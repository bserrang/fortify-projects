
export function allImports(){
 // console.log(this);

!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var c="function"==typeof require&&require;if(!u&&c)return c(o,!0);if(i)return i(o,!0);var a=new Error("Cannot find module '"+o+"'");throw a.code="MODULE_NOT_FOUND",a}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(n){var r=t[o][1][n];return s(r||n)},f,f.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(t,n,r){(function(n){"use strict";function define(t,n,e){t[n]||Object[r](t,n,{writable:!0,configurable:!0,value:e})}if(t(327),t(328),t(2),n._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");n._babelPolyfill=!0;var r="defineProperty";define(String.prototype,"padLeft","".padStart),define(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&define(Array,t,Function.call.bind([][t]))})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2,327:327,328:328}],2:[function(t,n,r){t(130),n.exports=t(23).RegExp.escape},{130:130,23:23}],3:[function(t,n,r){n.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},{}],4:[function(t,n,r){var e=t(18);n.exports=function(t,n){if("number"!=typeof t&&"Number"!=e(t))throw TypeError(n);return+t}},{18:18}],5:[function(t,n,r){var e=t(128)("unscopables"),i=Array.prototype;void 0==i[e]&&t(42)(i,e,{}),n.exports=function(t){i[e][t]=!0}},{128:128,42:42}],6:[function(t,n,r){n.exports=function(t,n,r,e){if(!(t instanceof n)||void 0!==e&&e in t)throw TypeError(r+": incorrect invocation!");return t}},{}],7:[function(t,n,r){var e=t(51);n.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},{51:51}],8:[function(t,n,r){"use strict";var e=t(119),i=t(114),o=t(118);n.exports=[].copyWithin||function copyWithin(t,n){var r=e(this),u=o(r.length),c=i(t,u),a=i(n,u),f=arguments.length>2?arguments[2]:void 0,s=Math.min((void 0===f?u:i(f,u))-a,u-c),l=1;for(a<c&&c<a+s&&(l=-1,a+=s-1,c+=s-1);s-- >0;)a in r?r[c]=r[a]:delete r[c],c+=l,a+=l;return r}},{114:114,118:118,119:119}],9:[function(t,n,r){"use strict";var e=t(119),i=t(114),o=t(118);n.exports=function fill(t){for(var n=e(this),r=o(n.length),u=arguments.length,c=i(u>1?arguments[1]:void 0,r),a=u>2?arguments[2]:void 0,f=void 0===a?r:i(a,r);f>c;)n[c++]=t;return n}},{114:114,118:118,119:119}],10:[function(t,n,r){var e=t(39);n.exports=function(t,n){var r=[];return e(t,!1,r.push,r,n),r}},{39:39}],11:[function(t,n,r){var e=t(117),i=t(118),o=t(114);n.exports=function(t){return function(n,r,u){var c,a=e(n),f=i(a.length),s=o(u,f);if(t&&r!=r){for(;f>s;)if((c=a[s++])!=c)return!0}else for(;f>s;s++)if((t||s in a)&&a[s]===r)return t||s||0;return!t&&-1}}},{114:114,117:117,118:118}],12:[function(t,n,r){var e=t(25),i=t(47),o=t(119),u=t(118),c=t(15);n.exports=function(t,n){var r=1==t,a=2==t,f=3==t,s=4==t,l=6==t,h=5==t||l,v=n||c;return function(n,c,p){for(var d,y,g=o(n),m=i(g),b=e(c,p,3),x=u(m.length),S=0,w=r?v(n,x):a?v(n,0):void 0;x>S;S++)if((h||S in m)&&(d=m[S],y=b(d,S,g),t))if(r)w[S]=y;else if(y)switch(t){case 3:return!0;case 5:return d;case 6:return S;case 2:w.push(d)}else if(s)return!1;return l?-1:f||s?s:w}}},{118:118,119:119,15:15,25:25,47:47}],13:[function(t,n,r){var e=t(3),i=t(119),o=t(47),u=t(118);n.exports=function(t,n,r,c,a){e(n);var f=i(t),s=o(f),l=u(f.length),h=a?l-1:0,v=a?-1:1;if(r<2)for(;;){if(h in s){c=s[h],h+=v;break}if(h+=v,a?h<0:l<=h)throw TypeError("Reduce of empty array with no initial value")}for(;a?h>=0:l>h;h+=v)h in s&&(c=n(c,s[h],h,f));return c}},{118:118,119:119,3:3,47:47}],14:[function(t,n,r){var e=t(51),i=t(49),o=t(128)("species");n.exports=function(t){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)||(n=void 0),e(n)&&null===(n=n[o])&&(n=void 0)),void 0===n?Array:n}},{128:128,49:49,51:51}],15:[function(t,n,r){var e=t(14);n.exports=function(t,n){return new(e(t))(n)}},{14:14}],16:[function(t,n,r){"use strict";var e=t(3),i=t(51),o=t(46),u=[].slice,c={},a=function(t,n,r){if(!(n in c)){for(var e=[],i=0;i<n;i++)e[i]="a["+i+"]";c[n]=Function("F,a","return new F("+e.join(",")+")")}return c[n](t,r)};n.exports=Function.bind||function bind(t){var n=e(this),r=u.call(arguments,1),c=function(){var e=r.concat(u.call(arguments));return this instanceof c?a(n,e.length,e):o(n,e,t)};return i(n.prototype)&&(c.prototype=n.prototype),c}},{3:3,46:46,51:51}],17:[function(t,n,r){var e=t(18),i=t(128)("toStringTag"),o="Arguments"==e(function(){return arguments}()),u=function(t,n){try{return t[n]}catch(t){}};n.exports=function(t){var n,r,c;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=u(n=Object(t),i))?r:o?e(n):"Object"==(c=e(n))&&"function"==typeof n.callee?"Arguments":c}},{128:128,18:18}],18:[function(t,n,r){var e={}.toString;n.exports=function(t){return e.call(t).slice(8,-1)}},{}],19:[function(t,n,r){"use strict";var e=t(72).f,i=t(71),o=t(93),u=t(25),c=t(6),a=t(39),f=t(55),s=t(57),l=t(100),h=t(29),v=t(66).fastKey,p=t(125),d=h?"_s":"size",y=function(t,n){var r,e=v(n);if("F"!==e)return t._i[e];for(r=t._f;r;r=r.n)if(r.k==n)return r};n.exports={getConstructor:function(t,n,r,f){var s=t(function(t,e){c(t,s,n,"_i"),t._t=n,t._i=i(null),t._f=void 0,t._l=void 0,t[d]=0,void 0!=e&&a(e,r,t[f],t)});return o(s.prototype,{clear:function clear(){for(var t=p(this,n),r=t._i,e=t._f;e;e=e.n)e.r=!0,e.p&&(e.p=e.p.n=void 0),delete r[e.i];t._f=t._l=void 0,t[d]=0},delete:function(t){var r=p(this,n),e=y(r,t);if(e){var i=e.n,o=e.p;delete r._i[e.i],e.r=!0,o&&(o.n=i),i&&(i.p=o),r._f==e&&(r._f=i),r._l==e&&(r._l=o),r[d]--}return!!e},forEach:function forEach(t){p(this,n);for(var r,e=u(t,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(e(r.v,r.k,this);r&&r.r;)r=r.p},has:function has(t){return!!y(p(this,n),t)}}),h&&e(s.prototype,"size",{get:function(){return p(this,n)[d]}}),s},def:function(t,n,r){var e,i,o=y(t,n);return o?o.v=r:(t._l=o={i:i=v(n,!0),k:n,v:r,p:e=t._l,n:void 0,r:!1},t._f||(t._f=o),e&&(e.n=o),t[d]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,n,r){f(t,n,function(t,r){this._t=p(t,n),this._k=r,this._l=void 0},function(){for(var t=this,n=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?"keys"==n?s(0,r.k):"values"==n?s(0,r.v):s(0,[r.k,r.v]):(t._t=void 0,s(1))},r?"entries":"values",!r,!0),l(n)}}},{100:100,125:125,25:25,29:29,39:39,55:55,57:57,6:6,66:66,71:71,72:72,93:93}],20:[function(t,n,r){var e=t(17),i=t(10);n.exports=function(t){return function toJSON(){if(e(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},{10:10,17:17}],21:[function(t,n,r){"use strict";var e=t(93),i=t(66).getWeak,o=t(7),u=t(51),c=t(6),a=t(39),f=t(12),s=t(41),l=t(125),h=f(5),v=f(6),p=0,d=function(t){return t._l||(t._l=new y)},y=function(){this.a=[]},g=function(t,n){return h(t.a,function(t){return t[0]===n})};y.prototype={get:function(t){var n=g(this,t);if(n)return n[1]},has:function(t){return!!g(this,t)},set:function(t,n){var r=g(this,t);r?r[1]=n:this.a.push([t,n])},delete:function(t){var n=v(this.a,function(n){return n[0]===t});return~n&&this.a.splice(n,1),!!~n}},n.exports={getConstructor:function(t,n,r,o){var f=t(function(t,e){c(t,f,n,"_i"),t._t=n,t._i=p++,t._l=void 0,void 0!=e&&a(e,r,t[o],t)});return e(f.prototype,{delete:function(t){if(!u(t))return!1;var r=i(t);return!0===r?d(l(this,n)).delete(t):r&&s(r,this._i)&&delete r[this._i]},has:function has(t){if(!u(t))return!1;var r=i(t);return!0===r?d(l(this,n)).has(t):r&&s(r,this._i)}}),f},def:function(t,n,r){var e=i(o(n),!0);return!0===e?d(t).set(n,r):e[t._i]=r,t},ufstore:d}},{12:12,125:125,39:39,41:41,51:51,6:6,66:66,7:7,93:93}],22:[function(t,n,r){"use strict";var e=t(40),i=t(33),o=t(94),u=t(93),c=t(66),a=t(39),f=t(6),s=t(51),l=t(35),h=t(56),v=t(101),p=t(45);n.exports=function(t,n,r,d,y,g){var m=e[t],b=m,x=y?"set":"add",S=b&&b.prototype,w={},_=function(t){var n=S[t];o(S,t,"delete"==t?function(t){return!(g&&!s(t))&&n.call(this,0===t?0:t)}:"has"==t?function has(t){return!(g&&!s(t))&&n.call(this,0===t?0:t)}:"get"==t?function get(t){return g&&!s(t)?void 0:n.call(this,0===t?0:t)}:"add"==t?function add(t){return n.call(this,0===t?0:t),this}:function set(t,r){return n.call(this,0===t?0:t,r),this})};if("function"==typeof b&&(g||S.forEach&&!l(function(){(new b).entries().next()}))){var E=new b,O=E[x](g?{}:-0,1)!=E,P=l(function(){E.has(1)}),M=h(function(t){new b(t)}),F=!g&&l(function(){for(var t=new b,n=5;n--;)t[x](n,n);return!t.has(-0)});M||(b=n(function(n,r){f(n,b,t);var e=p(new m,n,b);return void 0!=r&&a(r,y,e[x],e),e}),b.prototype=S,S.constructor=b),(P||F)&&(_("delete"),_("has"),y&&_("get")),(F||O)&&_(x),g&&S.clear&&delete S.clear}else b=d.getConstructor(n,t,y,x),u(b.prototype,r),c.NEED=!0;return v(b,t),w[t]=b,i(i.G+i.W+i.F*(b!=m),w),g||d.setStrong(b,t,y),b}},{101:101,33:33,35:35,39:39,40:40,45:45,51:51,56:56,6:6,66:66,93:93,94:94}],23:[function(t,n,r){var e=n.exports={version:"2.5.0"};"number"==typeof __e&&(__e=e)},{}],24:[function(t,n,r){"use strict";var e=t(72),i=t(92);n.exports=function(t,n,r){n in t?e.f(t,n,i(0,r)):t[n]=r}},{72:72,92:92}],25:[function(t,n,r){var e=t(3);n.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)}}return function(){return t.apply(n,arguments)}}},{3:3}],26:[function(t,n,r){"use strict";var e=t(35),i=Date.prototype.getTime,o=Date.prototype.toISOString,u=function(t){return t>9?t:"0"+t};n.exports=e(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!e(function(){o.call(new Date(NaN))})?function toISOString(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,n=t.getUTCFullYear(),r=t.getUTCMilliseconds(),e=n<0?"-":n>9999?"+":"";return e+("00000"+Math.abs(n)).slice(e?-6:-4)+"-"+u(t.getUTCMonth()+1)+"-"+u(t.getUTCDate())+"T"+u(t.getUTCHours())+":"+u(t.getUTCMinutes())+":"+u(t.getUTCSeconds())+"."+(r>99?r:"0"+u(r))+"Z"}:o},{35:35}],27:[function(t,n,r){"use strict";var e=t(7),i=t(120);n.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(e(this),"number"!=t)}},{120:120,7:7}],28:[function(t,n,r){n.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},{}],29:[function(t,n,r){n.exports=!t(35)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{35:35}],30:[function(t,n,r){var e=t(51),i=t(40).document,o=e(i)&&e(i.createElement);n.exports=function(t){return o?i.createElement(t):{}}},{40:40,51:51}],31:[function(t,n,r){n.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],32:[function(t,n,r){var e=t(81),i=t(78),o=t(82);n.exports=function(t){var n=e(t),r=i.f;if(r)for(var u,c=r(t),a=o.f,f=0;c.length>f;)a.call(t,u=c[f++])&&n.push(u);return n}},{78:78,81:81,82:82}],33:[function(t,n,r){var e=t(40),i=t(23),o=t(42),u=t(94),c=t(25),a=function(t,n,r){var f,s,l,h,v=t&a.F,p=t&a.G,d=t&a.S,y=t&a.P,g=t&a.B,m=p?e:d?e[n]||(e[n]={}):(e[n]||{}).prototype,b=p?i:i[n]||(i[n]={}),x=b.prototype||(b.prototype={});p&&(r=n);for(f in r)s=!v&&m&&void 0!==m[f],l=(s?m:r)[f],h=g&&s?c(l,e):y&&"function"==typeof l?c(Function.call,l):l,m&&u(m,f,l,t&a.U),b[f]!=l&&o(b,f,h),y&&x[f]!=l&&(x[f]=l)};e.core=i,a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,n.exports=a},{23:23,25:25,40:40,42:42,94:94}],34:[function(t,n,r){var e=t(128)("match");n.exports=function(t){var n=/./;try{"/./"[t](n)}catch(r){try{return n[e]=!1,!"/./"[t](n)}catch(t){}}return!0}},{128:128}],35:[function(t,n,r){n.exports=function(t){try{return!!t()}catch(t){return!0}}},{}],36:[function(t,n,r){"use strict";var e=t(42),i=t(94),o=t(35),u=t(28),c=t(128);n.exports=function(t,n,r){var a=c(t),f=r(u,a,""[t]),s=f[0],l=f[1];o(function(){var n={};return n[a]=function(){return 7},7!=""[t](n)})&&(i(String.prototype,t,s),e(RegExp.prototype,a,2==n?function(t,n){return l.call(t,this,n)}:function(t){return l.call(t,this)}))}},{128:128,28:28,35:35,42:42,94:94}],37:[function(t,n,r){"use strict";var e=t(7);n.exports=function(){var t=e(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},{7:7}],38:[function(t,n,r){"use strict";function flattenIntoArray(t,n,r,a,f,s,l,h){for(var v,p,d=f,y=0,g=!!l&&u(l,h,3);y<a;){if(y in r){if(v=g?g(r[y],y,n):r[y],p=!1,i(v)&&(p=v[c],p=void 0!==p?!!p:e(v)),p&&s>0)d=flattenIntoArray(t,n,v,o(v.length),d,s-1)-1;else{if(d>=9007199254740991)throw TypeError();t[d]=v}d++}y++}return d}var e=t(49),i=t(51),o=t(118),u=t(25),c=t(128)("isConcatSpreadable");n.exports=flattenIntoArray},{118:118,128:128,25:25,49:49,51:51}],39:[function(t,n,r){var e=t(25),i=t(53),o=t(48),u=t(7),c=t(118),a=t(129),f={},s={},r=n.exports=function(t,n,r,l,h){var v,p,d,y,g=h?function(){return t}:a(t),m=e(r,l,n?2:1),b=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(v=c(t.length);v>b;b++)if((y=n?m(u(p=t[b])[0],p[1]):m(t[b]))===f||y===s)return y}else for(d=g.call(t);!(p=d.next()).done;)if((y=i(d,m,p.value,n))===f||y===s)return y};r.BREAK=f,r.RETURN=s},{118:118,129:129,25:25,48:48,53:53,7:7}],40:[function(t,n,r){var e=n.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},{}],41:[function(t,n,r){var e={}.hasOwnProperty;n.exports=function(t,n){return e.call(t,n)}},{}],42:[function(t,n,r){var e=t(72),i=t(92);n.exports=t(29)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},{29:29,72:72,92:92}],43:[function(t,n,r){var e=t(40).document;n.exports=e&&e.documentElement},{40:40}],44:[function(t,n,r){n.exports=!t(29)&&!t(35)(function(){return 7!=Object.defineProperty(t(30)("div"),"a",{get:function(){return 7}}).a})},{29:29,30:30,35:35}],45:[function(t,n,r){var e=t(51),i=t(99).set;n.exports=function(t,n,r){var o,u=n.constructor;return u!==r&&"function"==typeof u&&(o=u.prototype)!==r.prototype&&e(o)&&i&&i(t,o),t}},{51:51,99:99}],46:[function(t,n,r){n.exports=function(t,n,r){var e=void 0===r;switch(n.length){case 0:return e?t():t.call(r);case 1:return e?t(n[0]):t.call(r,n[0]);case 2:return e?t(n[0],n[1]):t.call(r,n[0],n[1]);case 3:return e?t(n[0],n[1],n[2]):t.call(r,n[0],n[1],n[2]);case 4:return e?t(n[0],n[1],n[2],n[3]):t.call(r,n[0],n[1],n[2],n[3])}return t.apply(r,n)}},{}],47:[function(t,n,r){var e=t(18);n.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},{18:18}],48:[function(t,n,r){var e=t(58),i=t(128)("iterator"),o=Array.prototype;n.exports=function(t){return void 0!==t&&(e.Array===t||o[i]===t)}},{128:128,58:58}],49:[function(t,n,r){var e=t(18);n.exports=Array.isArray||function isArray(t){return"Array"==e(t)}},{18:18}],50:[function(t,n,r){var e=t(51),i=Math.floor;n.exports=function isInteger(t){return!e(t)&&isFinite(t)&&i(t)===t}},{51:51}],51:[function(t,n,r){n.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},{}],52:[function(t,n,r){var e=t(51),i=t(18),o=t(128)("match");n.exports=function(t){var n;return e(t)&&(void 0!==(n=t[o])?!!n:"RegExp"==i(t))}},{128:128,18:18,51:51}],53:[function(t,n,r){var e=t(7);n.exports=function(t,n,r,i){try{return i?n(e(r)[0],r[1]):n(r)}catch(n){var o=t.return;throw void 0!==o&&e(o.call(t)),n}}},{7:7}],54:[function(t,n,r){"use strict";var e=t(71),i=t(92),o=t(101),u={};t(42)(u,t(128)("iterator"),function(){return this}),n.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},{101:101,128:128,42:42,71:71,92:92}],55:[function(t,n,r){"use strict";var e=t(60),i=t(33),o=t(94),u=t(42),c=t(41),a=t(58),f=t(54),s=t(101),l=t(79),h=t(128)("iterator"),v=!([].keys&&"next"in[].keys()),p=function(){return this};n.exports=function(t,n,r,d,y,g,m){f(r,n,d);var b,x,S,w=function(t){if(!v&&t in P)return P[t];switch(t){case"keys":return function keys(){return new r(this,t)};case"values":return function values(){return new r(this,t)}}return function entries(){return new r(this,t)}},_=n+" Iterator",E="values"==y,O=!1,P=t.prototype,M=P[h]||P["@@iterator"]||y&&P[y],F=M||w(y),I=y?E?w("entries"):F:void 0,A="Array"==n?P.entries||M:M;if(A&&(S=l(A.call(new t)))!==Object.prototype&&S.next&&(s(S,_,!0),e||c(S,h)||u(S,h,p)),E&&M&&"values"!==M.name&&(O=!0,F=function values(){return M.call(this)}),e&&!m||!v&&!O&&P[h]||u(P,h,F),a[n]=F,a[_]=p,y)if(b={values:E?F:w("values"),keys:g?F:w("keys"),entries:I},m)for(x in b)x in P||o(P,x,b[x]);else i(i.P+i.F*(v||O),n,b);return b}},{101:101,128:128,33:33,41:41,42:42,54:54,58:58,60:60,79:79,94:94}],56:[function(t,n,r){var e=t(128)("iterator"),i=!1;try{var o=[7][e]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}n.exports=function(t,n){if(!n&&!i)return!1;var r=!1;try{var o=[7],u=o[e]();u.next=function(){return{done:r=!0}},o[e]=function(){return u},t(o)}catch(t){}return r}},{128:128}],57:[function(t,n,r){n.exports=function(t,n){return{value:n,done:!!t}}},{}],58:[function(t,n,r){n.exports={}},{}],59:[function(t,n,r){var e=t(81),i=t(117);n.exports=function(t,n){for(var r,o=i(t),u=e(o),c=u.length,a=0;c>a;)if(o[r=u[a++]]===n)return r}},{117:117,81:81}],60:[function(t,n,r){n.exports=!1},{}],61:[function(t,n,r){var e=Math.expm1;n.exports=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||-2e-17!=e(-2e-17)?function expm1(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:e},{}],62:[function(t,n,r){var e=t(65),i=Math.pow,o=i(2,-52),u=i(2,-23),c=i(2,127)*(2-u),a=i(2,-126),f=function(t){return t+1/o-1/o};n.exports=Math.fround||function fround(t){var n,r,i=Math.abs(t),s=e(t);return i<a?s*f(i/a/u)*a*u:(n=(1+u/o)*i,r=n-(n-i),r>c||r!=r?s*(1/0):s*r)}},{65:65}],63:[function(t,n,r){n.exports=Math.log1p||function log1p(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},{}],64:[function(t,n,r){n.exports=Math.scale||function scale(t,n,r,e,i){return 0===arguments.length||t!=t||n!=n||r!=r||e!=e||i!=i?NaN:t===1/0||t===-1/0?t:(t-n)*(i-e)/(r-n)+e}},{}],65:[function(t,n,r){n.exports=Math.sign||function sign(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},{}],66:[function(t,n,r){var e=t(124)("meta"),i=t(51),o=t(41),u=t(72).f,c=0,a=Object.isExtensible||function(){return!0},f=!t(35)(function(){return a(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!a(t))return"F";if(!n)return"E";s(t)}return t[e].i},h=function(t,n){if(!o(t,e)){if(!a(t))return!0;if(!n)return!1;s(t)}return t[e].w},v=function(t){return f&&p.NEED&&a(t)&&!o(t,e)&&s(t),t},p=n.exports={KEY:e,NEED:!1,fastKey:l,getWeak:h,onFreeze:v}},{124:124,35:35,41:41,51:51,72:72}],67:[function(t,n,r){var e=t(160),i=t(33),o=t(103)("metadata"),u=o.store||(o.store=new(t(266))),c=function(t,n,r){var i=u.get(t);if(!i){if(!r)return;u.set(t,i=new e)}var o=i.get(n);if(!o){if(!r)return;i.set(n,o=new e)}return o},a=function(t,n,r){var e=c(n,r,!1);return void 0!==e&&e.has(t)},f=function(t,n,r){var e=c(n,r,!1);return void 0===e?void 0:e.get(t)},s=function(t,n,r,e){c(r,e,!0).set(t,n)},l=function(t,n){var r=c(t,n,!1),e=[];return r&&r.forEach(function(t,n){e.push(n)}),e},h=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},v=function(t){i(i.S,"Reflect",t)};n.exports={store:u,map:c,has:a,get:f,set:s,keys:l,key:h,exp:v}},{103:103,160:160,266:266,33:33}],68:[function(t,n,r){var e=t(40),i=t(113).set,o=e.MutationObserver||e.WebKitMutationObserver,u=e.process,c=e.Promise,a="process"==t(18)(u);n.exports=function(){var t,n,r,f=function(){var e,i;for(a&&(e=u.domain)&&e.exit();t;){i=t.fn,t=t.next;try{i()}catch(e){throw t?r():n=void 0,e}}n=void 0,e&&e.enter()};if(a)r=function(){u.nextTick(f)};else if(o){var s=!0,l=document.createTextNode("");new o(f).observe(l,{characterData:!0}),r=function(){l.data=s=!s}}else if(c&&c.resolve){var h=c.resolve();r=function(){h.then(f)}}else r=function(){i.call(e,f)};return function(e){var i={fn:e,next:void 0};n&&(n.next=i),t||(t=i,r()),n=i}}},{113:113,18:18,40:40}],69:[function(t,n,r){"use strict";function PromiseCapability(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=e(n),this.reject=e(r)}var e=t(3);n.exports.f=function(t){return new PromiseCapability(t)}},{3:3}],70:[function(t,n,r){"use strict";var e=t(81),i=t(78),o=t(82),u=t(119),c=t(47),a=Object.assign;n.exports=!a||t(35)(function(){var t={},n={},r=Symbol(),e="abcdefghijklmnopqrst";return t[r]=7,e.split("").forEach(function(t){n[t]=t}),7!=a({},t)[r]||Object.keys(a({},n)).join("")!=e})?function assign(t,n){for(var r=u(t),a=arguments.length,f=1,s=i.f,l=o.f;a>f;)for(var h,v=c(arguments[f++]),p=s?e(v).concat(s(v)):e(v),d=p.length,y=0;d>y;)l.call(v,h=p[y++])&&(r[h]=v[h]);return r}:a},{119:119,35:35,47:47,78:78,81:81,82:82}],71:[function(t,n,r){var e=t(7),i=t(73),o=t(31),u=t(102)("IE_PROTO"),c=function(){},a=function(){var n,r=t(30)("iframe"),e=o.length;for(r.style.display="none",t(43).appendChild(r),r.src="javascript:",n=r.contentWindow.document,n.open(),n.write("<script>document.F=Object<\/script>"),n.close(),a=n.F;e--;)delete a.prototype[o[e]];return a()};n.exports=Object.create||function create(t,n){var r;return null!==t?(c.prototype=e(t),r=new c,c.prototype=null,r[u]=t):r=a(),void 0===n?r:i(r,n)}},{102:102,30:30,31:31,43:43,7:7,73:73}],72:[function(t,n,r){var e=t(7),i=t(44),o=t(120),u=Object.defineProperty;r.f=t(29)?Object.defineProperty:function defineProperty(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},{120:120,29:29,44:44,7:7}],73:[function(t,n,r){var e=t(72),i=t(7),o=t(81);n.exports=t(29)?Object.defineProperties:function defineProperties(t,n){i(t);for(var r,u=o(n),c=u.length,a=0;c>a;)e.f(t,r=u[a++],n[r]);return t}},{29:29,7:7,72:72,81:81}],74:[function(t,n,r){"use strict";n.exports=t(60)||!t(35)(function(){var n=Math.random();__defineSetter__.call(null,n,function(){}),delete t(40)[n]})},{35:35,40:40,60:60}],75:[function(t,n,r){var e=t(82),i=t(92),o=t(117),u=t(120),c=t(41),a=t(44),f=Object.getOwnPropertyDescriptor;r.f=t(29)?f:function getOwnPropertyDescriptor(t,n){if(t=o(t),n=u(n,!0),a)try{return f(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},{117:117,120:120,29:29,41:41,44:44,82:82,92:92}],76:[function(t,n,r){var e=t(117),i=t(77).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(t){return u.slice()}};n.exports.f=function getOwnPropertyNames(t){return u&&"[object Window]"==o.call(t)?c(t):i(e(t))}},{117:117,77:77}],77:[function(t,n,r){var e=t(80),i=t(31).concat("length","prototype");r.f=Object.getOwnPropertyNames||function getOwnPropertyNames(t){return e(t,i)}},{31:31,80:80}],78:[function(t,n,r){r.f=Object.getOwnPropertySymbols},{}],79:[function(t,n,r){var e=t(41),i=t(119),o=t(102)("IE_PROTO"),u=Object.prototype;n.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},{102:102,119:119,41:41}],80:[function(t,n,r){var e=t(41),i=t(117),o=t(11)(!1),u=t(102)("IE_PROTO");n.exports=function(t,n){var r,c=i(t),a=0,f=[];for(r in c)r!=u&&e(c,r)&&f.push(r);for(;n.length>a;)e(c,r=n[a++])&&(~o(f,r)||f.push(r));return f}},{102:102,11:11,117:117,41:41}],81:[function(t,n,r){var e=t(80),i=t(31);n.exports=Object.keys||function keys(t){return e(t,i)}},{31:31,80:80}],82:[function(t,n,r){r.f={}.propertyIsEnumerable},{}],83:[function(t,n,r){var e=t(33),i=t(23),o=t(35);n.exports=function(t,n){var r=(i.Object||{})[t]||Object[t],u={};u[t]=n(r),e(e.S+e.F*o(function(){r(1)}),"Object",u)}},{23:23,33:33,35:35}],84:[function(t,n,r){var e=t(81),i=t(117),o=t(82).f;n.exports=function(t){return function(n){for(var r,u=i(n),c=e(u),a=c.length,f=0,s=[];a>f;)o.call(u,r=c[f++])&&s.push(t?[r,u[r]]:u[r]);return s}}},{117:117,81:81,82:82}],85:[function(t,n,r){var e=t(77),i=t(78),o=t(7),u=t(40).Reflect;n.exports=u&&u.ownKeys||function ownKeys(t){var n=e.f(o(t)),r=i.f;return r?n.concat(r(t)):n}},{40:40,7:7,77:77,78:78}],86:[function(t,n,r){var e=t(40).parseFloat,i=t(111).trim;n.exports=1/e(t(112)+"-0")!=-1/0?function parseFloat(t){var n=i(String(t),3),r=e(n);return 0===r&&"-"==n.charAt(0)?-0:r}:e},{111:111,112:112,40:40}],87:[function(t,n,r){var e=t(40).parseInt,i=t(111).trim,o=t(112),u=/^[-+]?0[xX]/;n.exports=8!==e(o+"08")||22!==e(o+"0x16")?function parseInt(t,n){var r=i(String(t),3);return e(r,n>>>0||(u.test(r)?16:10))}:e},{111:111,112:112,40:40}],88:[function(t,n,r){"use strict";var e=t(89),i=t(46),o=t(3);n.exports=function(){for(var t=o(this),n=arguments.length,r=Array(n),u=0,c=e._,a=!1;n>u;)(r[u]=arguments[u++])===c&&(a=!0);return function(){var e,o=this,u=arguments.length,f=0,s=0;if(!a&&!u)return i(t,r,o);if(e=r.slice(),a)for(;n>f;f++)e[f]===c&&(e[f]=arguments[s++]);for(;u>s;)e.push(arguments[s++]);return i(t,e,o)}}},{3:3,46:46,89:89}],89:[function(t,n,r){n.exports=t(40)},{40:40}],90:[function(t,n,r){n.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},{}],91:[function(t,n,r){var e=t(69);n.exports=function(t,n){var r=e.f(t);return(0,r.resolve)(n),r.promise}},{69:69}],92:[function(t,n,r){n.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},{}],93:[function(t,n,r){var e=t(94);n.exports=function(t,n,r){for(var i in n)e(t,i,n[i],r);return t}},{94:94}],94:[function(t,n,r){var e=t(40),i=t(42),o=t(41),u=t(124)("src"),c=Function.toString,a=(""+c).split("toString");t(23).inspectSource=function(t){return c.call(t)},(n.exports=function(t,n,r,c){var f="function"==typeof r;f&&(o(r,"name")||i(r,"name",n)),t[n]!==r&&(f&&(o(r,u)||i(r,u,t[n]?""+t[n]:a.join(String(n)))),t===e?t[n]=r:c?t[n]?t[n]=r:i(t,n,r):(delete t[n],i(t,n,r)))})(Function.prototype,"toString",function toString(){return"function"==typeof this&&this[u]||c.call(this)})},{124:124,23:23,40:40,41:41,42:42}],95:[function(t,n,r){n.exports=function(t,n){var r=n===Object(n)?function(t){return n[t]}:n;return function(n){return String(n).replace(t,r)}}},{}],96:[function(t,n,r){n.exports=Object.is||function is(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}},{}],97:[function(t,n,r){"use strict";var e=t(33),i=t(3),o=t(25),u=t(39);n.exports=function(t){e(e.S,t,{from:function from(t){var n,r,e,c,a=arguments[1];return i(this),n=void 0!==a,n&&i(a),void 0==t?new this:(r=[],n?(e=0,c=o(a,arguments[2],2),u(t,!1,function(t){r.push(c(t,e++))})):u(t,!1,r.push,r),new this(r))}})}},{25:25,3:3,33:33,39:39}],98:[function(t,n,r){"use strict";var e=t(33);n.exports=function(t){e(e.S,t,{of:function of(){for(var t=arguments.length,n=Array(t);t--;)n[t]=arguments[t];return new this(n)}})}},{33:33}],99:[function(t,n,r){var e=t(51),i=t(7),o=function(t,n){if(i(t),!e(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};n.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(n,r,e){try{e=t(25)(Function.call,t(75).f(Object.prototype,"__proto__").set,2),e(n,[]),r=!(n instanceof Array)}catch(t){r=!0}return function setPrototypeOf(t,n){return o(t,n),r?t.__proto__=n:e(t,n),t}}({},!1):void 0),check:o}},{25:25,51:51,7:7,75:75}],100:[function(t,n,r){"use strict";var e=t(40),i=t(72),o=t(29),u=t(128)("species");n.exports=function(t){var n=e[t];o&&n&&!n[u]&&i.f(n,u,{configurable:!0,get:function(){return this}})}},{128:128,29:29,40:40,72:72}],101:[function(t,n,r){var e=t(72).f,i=t(41),o=t(128)("toStringTag");n.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},{128:128,41:41,72:72}],102:[function(t,n,r){var e=t(103)("keys"),i=t(124);n.exports=function(t){return e[t]||(e[t]=i(t))}},{103:103,124:124}],103:[function(t,n,r){var e=t(40),i=e["__core-js_shared__"]||(e["__core-js_shared__"]={});n.exports=function(t){return i[t]||(i[t]={})}},{40:40}],104:[function(t,n,r){var e=t(7),i=t(3),o=t(128)("species");n.exports=function(t,n){var r,u=e(t).constructor;return void 0===u||void 0==(r=e(u)[o])?n:i(r)}},{128:128,3:3,7:7}],105:[function(t,n,r){"use strict";var e=t(35);n.exports=function(t,n){return!!t&&e(function(){n?t.call(null,function(){},1):t.call(null)})}},{35:35}],106:[function(t,n,r){var e=t(116),i=t(28);n.exports=function(t){return function(n,r){var o,u,c=String(i(n)),a=e(r),f=c.length;return a<0||a>=f?t?"":void 0:(o=c.charCodeAt(a),o<55296||o>56319||a+1===f||(u=c.charCodeAt(a+1))<56320||u>57343?t?c.charAt(a):o:t?c.slice(a,a+2):u-56320+(o-55296<<10)+65536)}}},{116:116,28:28}],107:[function(t,n,r){var e=t(52),i=t(28);n.exports=function(t,n,r){if(e(n))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},{28:28,52:52}],108:[function(t,n,r){var e=t(33),i=t(35),o=t(28),u=/"/g,c=function(t,n,r,e){var i=String(o(t)),c="<"+n;return""!==r&&(c+=" "+r+'="'+String(e).replace(u,"&quot;")+'"'),c+">"+i+"</"+n+">"};n.exports=function(t,n){var r={};r[t]=n(c),e(e.P+e.F*i(function(){var n=""[t]('"');return n!==n.toLowerCase()||n.split('"').length>3}),"String",r)}},{28:28,33:33,35:35}],109:[function(t,n,r){var e=t(118),i=t(110),o=t(28);n.exports=function(t,n,r,u){var c=String(o(t)),a=c.length,f=void 0===r?" ":String(r),s=e(n);if(s<=a||""==f)return c;var l=s-a,h=i.call(f,Math.ceil(l/f.length));return h.length>l&&(h=h.slice(0,l)),u?h+c:c+h}},{110:110,118:118,28:28}],110:[function(t,n,r){"use strict";var e=t(116),i=t(28);n.exports=function repeat(t){var n=String(i(this)),r="",o=e(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(n+=n))1&o&&(r+=n);return r}},{116:116,28:28}],111:[function(t,n,r){var e=t(33),i=t(28),o=t(35),u=t(112),c="["+u+"]",a="​",f=RegExp("^"+c+c+"*"),s=RegExp(c+c+"*$"),l=function(t,n,r){var i={},c=o(function(){return!!u[t]()||a[t]()!=a}),f=i[t]=c?n(h):u[t];r&&(i[r]=f),e(e.P+e.F*c,"String",i)},h=l.trim=function(t,n){return t=String(i(t)),1&n&&(t=t.replace(f,"")),2&n&&(t=t.replace(s,"")),t};n.exports=l},{112:112,28:28,33:33,35:35}],112:[function(t,n,r){n.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},{}],113:[function(t,n,r){var e,i,o,u=t(25),c=t(46),a=t(43),f=t(30),s=t(40),l=s.process,h=s.setImmediate,v=s.clearImmediate,p=s.MessageChannel,d=s.Dispatch,y=0,g={},m=function(){var t=+this;if(g.hasOwnProperty(t)){var n=g[t];delete g[t],n()}},b=function(t){m.call(t.data)};h&&v||(h=function setImmediate(t){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return g[++y]=function(){c("function"==typeof t?t:Function(t),n)},e(y),y},v=function clearImmediate(t){delete g[t]},"process"==t(18)(l)?e=function(t){l.nextTick(u(m,t,1))}:d&&d.now?e=function(t){d.now(u(m,t,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=b,e=u(o.postMessage,o,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(e=function(t){s.postMessage(t+"","*")},s.addEventListener("message",b,!1)):e="onreadystatechange"in f("script")?function(t){a.appendChild(f("script")).onreadystatechange=function(){a.removeChild(this),m.call(t)}}:function(t){setTimeout(u(m,t,1),0)}),n.exports={set:h,clear:v}},{18:18,25:25,30:30,40:40,43:43,46:46}],114:[function(t,n,r){var e=t(116),i=Math.max,o=Math.min;n.exports=function(t,n){return t=e(t),t<0?i(t+n,0):o(t,n)}},{116:116}],115:[function(t,n,r){var e=t(116),i=t(118);n.exports=function(t){if(void 0===t)return 0;var n=e(t),r=i(n);if(n!==r)throw RangeError("Wrong length!");return r}},{116:116,118:118}],116:[function(t,n,r){var e=Math.ceil,i=Math.floor;n.exports=function(t){return isNaN(t=+t)?0:(t>0?i:e)(t)}},{}],117:[function(t,n,r){var e=t(47),i=t(28);n.exports=function(t){return e(i(t))}},{28:28,47:47}],118:[function(t,n,r){var e=t(116),i=Math.min;n.exports=function(t){return t>0?i(e(t),9007199254740991):0}},{116:116}],
119:[function(t,n,r){var e=t(28);n.exports=function(t){return Object(e(t))}},{28:28}],120:[function(t,n,r){var e=t(51);n.exports=function(t,n){if(!e(t))return t;var r,i;if(n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!e(i=r.call(t)))return i;if(!n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},{51:51}],121:[function(t,n,r){"use strict";if(t(29)){var e=t(60),i=t(40),o=t(35),u=t(33),c=t(123),a=t(122),f=t(25),s=t(6),l=t(92),h=t(42),v=t(93),p=t(116),d=t(118),y=t(115),g=t(114),m=t(120),b=t(41),x=t(17),S=t(51),w=t(119),_=t(48),E=t(71),O=t(79),P=t(77).f,M=t(129),F=t(124),I=t(128),A=t(12),k=t(11),N=t(104),j=t(141),T=t(58),R=t(56),L=t(100),G=t(9),D=t(8),C=t(72),W=t(75),U=C.f,B=W.f,V=i.RangeError,z=i.TypeError,q=i.Uint8Array,K=Array.prototype,Y=a.ArrayBuffer,J=a.DataView,H=A(0),X=A(2),$=A(3),Z=A(4),Q=A(5),tt=A(6),nt=k(!0),rt=k(!1),et=j.values,it=j.keys,ot=j.entries,ut=K.lastIndexOf,ct=K.reduce,at=K.reduceRight,ft=K.join,st=K.sort,lt=K.slice,ht=K.toString,vt=K.toLocaleString,pt=I("iterator"),dt=I("toStringTag"),yt=F("typed_constructor"),gt=F("def_constructor"),mt=c.CONSTR,bt=c.TYPED,xt=c.VIEW,St=A(1,function(t,n){return Pt(N(t,t[gt]),n)}),wt=o(function(){return 1===new q(new Uint16Array([1]).buffer)[0]}),_t=!!q&&!!q.prototype.set&&o(function(){new q(1).set({})}),Et=function(t,n){var r=p(t);if(r<0||r%n)throw V("Wrong offset!");return r},Ot=function(t){if(S(t)&&bt in t)return t;throw z(t+" is not a typed array!")},Pt=function(t,n){if(!(S(t)&&yt in t))throw z("It is not a typed array constructor!");return new t(n)},Mt=function(t,n){return Ft(N(t,t[gt]),n)},Ft=function(t,n){for(var r=0,e=n.length,i=Pt(t,e);e>r;)i[r]=n[r++];return i},It=function(t,n,r){U(t,n,{get:function(){return this._d[r]}})},At=function from(t){var n,r,e,i,o,u,c=w(t),a=arguments.length,s=a>1?arguments[1]:void 0,l=void 0!==s,h=M(c);if(void 0!=h&&!_(h)){for(u=h.call(c),e=[],n=0;!(o=u.next()).done;n++)e.push(o.value);c=e}for(l&&a>2&&(s=f(s,arguments[2],2)),n=0,r=d(c.length),i=Pt(this,r);r>n;n++)i[n]=l?s(c[n],n):c[n];return i},kt=function of(){for(var t=0,n=arguments.length,r=Pt(this,n);n>t;)r[t]=arguments[t++];return r},Nt=!!q&&o(function(){vt.call(new q(1))}),jt=function toLocaleString(){return vt.apply(Nt?lt.call(Ot(this)):Ot(this),arguments)},Tt={copyWithin:function copyWithin(t,n){return D.call(Ot(this),t,n,arguments.length>2?arguments[2]:void 0)},every:function every(t){return Z(Ot(this),t,arguments.length>1?arguments[1]:void 0)},fill:function fill(t){return G.apply(Ot(this),arguments)},filter:function filter(t){return Mt(this,X(Ot(this),t,arguments.length>1?arguments[1]:void 0))},find:function find(t){return Q(Ot(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function findIndex(t){return tt(Ot(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function forEach(t){H(Ot(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function indexOf(t){return rt(Ot(this),t,arguments.length>1?arguments[1]:void 0)},includes:function includes(t){return nt(Ot(this),t,arguments.length>1?arguments[1]:void 0)},join:function join(t){return ft.apply(Ot(this),arguments)},lastIndexOf:function lastIndexOf(t){return ut.apply(Ot(this),arguments)},map:function map(t){return St(Ot(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function reduce(t){return ct.apply(Ot(this),arguments)},reduceRight:function reduceRight(t){return at.apply(Ot(this),arguments)},reverse:function reverse(){for(var t,n=this,r=Ot(n).length,e=Math.floor(r/2),i=0;i<e;)t=n[i],n[i++]=n[--r],n[r]=t;return n},some:function some(t){return $(Ot(this),t,arguments.length>1?arguments[1]:void 0)},sort:function sort(t){return st.call(Ot(this),t)},subarray:function subarray(t,n){var r=Ot(this),e=r.length,i=g(t,e);return new(N(r,r[gt]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,d((void 0===n?e:g(n,e))-i))}},Rt=function slice(t,n){return Mt(this,lt.call(Ot(this),t,n))},Lt=function set(t){Ot(this);var n=Et(arguments[1],1),r=this.length,e=w(t),i=d(e.length),o=0;if(i+n>r)throw V("Wrong length!");for(;o<i;)this[n+o]=e[o++]},Gt={entries:function entries(){return ot.call(Ot(this))},keys:function keys(){return it.call(Ot(this))},values:function values(){return et.call(Ot(this))}},Dt=function(t,n){return S(t)&&t[bt]&&"symbol"!=typeof n&&n in t&&String(+n)==String(n)},Ct=function getOwnPropertyDescriptor(t,n){return Dt(t,n=m(n,!0))?l(2,t[n]):B(t,n)},Wt=function defineProperty(t,n,r){return!(Dt(t,n=m(n,!0))&&S(r)&&b(r,"value"))||b(r,"get")||b(r,"set")||r.configurable||b(r,"writable")&&!r.writable||b(r,"enumerable")&&!r.enumerable?U(t,n,r):(t[n]=r.value,t)};mt||(W.f=Ct,C.f=Wt),u(u.S+u.F*!mt,"Object",{getOwnPropertyDescriptor:Ct,defineProperty:Wt}),o(function(){ht.call({})})&&(ht=vt=function toString(){return ft.call(this)});var Ut=v({},Tt);v(Ut,Gt),h(Ut,pt,Gt.values),v(Ut,{slice:Rt,set:Lt,constructor:function(){},toString:ht,toLocaleString:jt}),It(Ut,"buffer","b"),It(Ut,"byteOffset","o"),It(Ut,"byteLength","l"),It(Ut,"length","e"),U(Ut,dt,{get:function(){return this[bt]}}),n.exports=function(t,n,r,a){a=!!a;var f=t+(a?"Clamped":"")+"Array",l="get"+t,v="set"+t,p=i[f],g=p||{},m=p&&O(p),b=!p||!c.ABV,w={},_=p&&p.prototype,M=function(t,r){var e=t._d;return e.v[l](r*n+e.o,wt)},F=function(t,r,e){var i=t._d;a&&(e=(e=Math.round(e))<0?0:e>255?255:255&e),i.v[v](r*n+i.o,e,wt)},I=function(t,n){U(t,n,{get:function(){return M(this,n)},set:function(t){return F(this,n,t)},enumerable:!0})};b?(p=r(function(t,r,e,i){s(t,p,f,"_d");var o,u,c,a,l=0,v=0;if(S(r)){if(!(r instanceof Y||"ArrayBuffer"==(a=x(r))||"SharedArrayBuffer"==a))return bt in r?Ft(p,r):At.call(p,r);o=r,v=Et(e,n);var g=r.byteLength;if(void 0===i){if(g%n)throw V("Wrong length!");if((u=g-v)<0)throw V("Wrong length!")}else if((u=d(i)*n)+v>g)throw V("Wrong length!");c=u/n}else c=y(r),u=c*n,o=new Y(u);for(h(t,"_d",{b:o,o:v,l:u,e:c,v:new J(o)});l<c;)I(t,l++)}),_=p.prototype=E(Ut),h(_,"constructor",p)):o(function(){p(1)})&&o(function(){new p(-1)})&&R(function(t){new p,new p(null),new p(1.5),new p(t)},!0)||(p=r(function(t,r,e,i){s(t,p,f);var o;return S(r)?r instanceof Y||"ArrayBuffer"==(o=x(r))||"SharedArrayBuffer"==o?void 0!==i?new g(r,Et(e,n),i):void 0!==e?new g(r,Et(e,n)):new g(r):bt in r?Ft(p,r):At.call(p,r):new g(y(r))}),H(m!==Function.prototype?P(g).concat(P(m)):P(g),function(t){t in p||h(p,t,g[t])}),p.prototype=_,e||(_.constructor=p));var A=_[pt],k=!!A&&("values"==A.name||void 0==A.name),N=Gt.values;h(p,yt,!0),h(_,bt,f),h(_,xt,!0),h(_,gt,p),(a?new p(1)[dt]==f:dt in _)||U(_,dt,{get:function(){return f}}),w[f]=p,u(u.G+u.W+u.F*(p!=g),w),u(u.S,f,{BYTES_PER_ELEMENT:n}),u(u.S+u.F*o(function(){g.of.call(p,1)}),f,{from:At,of:kt}),"BYTES_PER_ELEMENT"in _||h(_,"BYTES_PER_ELEMENT",n),u(u.P,f,Tt),L(f),u(u.P+u.F*_t,f,{set:Lt}),u(u.P+u.F*!k,f,Gt),e||_.toString==ht||(_.toString=ht),u(u.P+u.F*o(function(){new p(1).slice()}),f,{slice:Rt}),u(u.P+u.F*(o(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!o(function(){_.toLocaleString.call([1,2])})),f,{toLocaleString:jt}),T[f]=k?A:N,e||k||h(_,pt,N)}}else n.exports=function(){}},{100:100,104:104,11:11,114:114,115:115,116:116,118:118,119:119,12:12,120:120,122:122,123:123,124:124,128:128,129:129,141:141,17:17,25:25,29:29,33:33,35:35,40:40,41:41,42:42,48:48,51:51,56:56,58:58,6:6,60:60,71:71,72:72,75:75,77:77,79:79,8:8,9:9,92:92,93:93}],122:[function(t,n,r){"use strict";function packIEEE754(t,n,r){var e,i,o,u=Array(r),c=8*r-n-1,a=(1<<c)-1,f=a>>1,s=23===n?M(2,-24)-M(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for(t=P(t),t!=t||t===E?(i=t!=t?1:0,e=a):(e=F(I(t)/A),t*(o=M(2,-e))<1&&(e--,o*=2),t+=e+f>=1?s/o:s*M(2,1-f),t*o>=2&&(e++,o/=2),e+f>=a?(i=0,e=a):e+f>=1?(i=(t*o-1)*M(2,n),e+=f):(i=t*M(2,f-1)*M(2,n),e=0));n>=8;u[l++]=255&i,i/=256,n-=8);for(e=e<<n|i,c+=n;c>0;u[l++]=255&e,e/=256,c-=8);return u[--l]|=128*h,u}function unpackIEEE754(t,n,r){var e,i=8*r-n-1,o=(1<<i)-1,u=o>>1,c=i-7,a=r-1,f=t[a--],s=127&f;for(f>>=7;c>0;s=256*s+t[a],a--,c-=8);for(e=s&(1<<-c)-1,s>>=-c,c+=n;c>0;e=256*e+t[a],a--,c-=8);if(0===s)s=1-u;else{if(s===o)return e?NaN:f?-E:E;e+=M(2,n),s-=u}return(f?-1:1)*e*M(2,s-n)}function unpackI32(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function packI8(t){return[255&t]}function packI16(t){return[255&t,t>>8&255]}function packI32(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function packF64(t){return packIEEE754(t,52,8)}function packF32(t){return packIEEE754(t,23,4)}function addGetter(t,n,r){d(t[m],n,{get:function(){return this[r]}})}function get(t,n,r,e){var i=+r,o=v(i);if(o+n>t[N])throw _(b);var u=t[k]._b,c=o+t[j],a=u.slice(c,c+n);return e?a:a.reverse()}function set(t,n,r,e,i,o){var u=+r,c=v(u);if(c+n>t[N])throw _(b);for(var a=t[k]._b,f=c+t[j],s=e(+i),l=0;l<n;l++)a[f+l]=s[o?l:n-l-1]}var e=t(40),i=t(29),o=t(60),u=t(123),c=t(42),a=t(93),f=t(35),s=t(6),l=t(116),h=t(118),v=t(115),p=t(77).f,d=t(72).f,y=t(9),g=t(101),m="prototype",b="Wrong index!",x=e.ArrayBuffer,S=e.DataView,w=e.Math,_=e.RangeError,E=e.Infinity,O=x,P=w.abs,M=w.pow,F=w.floor,I=w.log,A=w.LN2,k=i?"_b":"buffer",N=i?"_l":"byteLength",j=i?"_o":"byteOffset";if(u.ABV){if(!f(function(){x(1)})||!f(function(){new x(-1)})||f(function(){return new x,new x(1.5),new x(NaN),"ArrayBuffer"!=x.name})){x=function ArrayBuffer(t){return s(this,x),new O(v(t))};for(var T,R=x[m]=O[m],L=p(O),G=0;L.length>G;)(T=L[G++])in x||c(x,T,O[T]);o||(R.constructor=x)}var D=new S(new x(2)),C=S[m].setInt8;D.setInt8(0,2147483648),D.setInt8(1,2147483649),!D.getInt8(0)&&D.getInt8(1)||a(S[m],{setInt8:function setInt8(t,n){C.call(this,t,n<<24>>24)},setUint8:function setUint8(t,n){C.call(this,t,n<<24>>24)}},!0)}else x=function ArrayBuffer(t){s(this,x,"ArrayBuffer");var n=v(t);this._b=y.call(Array(n),0),this[N]=n},S=function DataView(t,n,r){s(this,S,"DataView"),s(t,x,"DataView");var e=t[N],i=l(n);if(i<0||i>e)throw _("Wrong offset!");if(r=void 0===r?e-i:h(r),i+r>e)throw _("Wrong length!");this[k]=t,this[j]=i,this[N]=r},i&&(addGetter(x,"byteLength","_l"),addGetter(S,"buffer","_b"),addGetter(S,"byteLength","_l"),addGetter(S,"byteOffset","_o")),a(S[m],{getInt8:function getInt8(t){return get(this,1,t)[0]<<24>>24},getUint8:function getUint8(t){return get(this,1,t)[0]},getInt16:function getInt16(t){var n=get(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function getUint16(t){var n=get(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function getInt32(t){return unpackI32(get(this,4,t,arguments[1]))},getUint32:function getUint32(t){return unpackI32(get(this,4,t,arguments[1]))>>>0},getFloat32:function getFloat32(t){return unpackIEEE754(get(this,4,t,arguments[1]),23,4)},getFloat64:function getFloat64(t){return unpackIEEE754(get(this,8,t,arguments[1]),52,8)},setInt8:function setInt8(t,n){set(this,1,t,packI8,n)},setUint8:function setUint8(t,n){set(this,1,t,packI8,n)},setInt16:function setInt16(t,n){set(this,2,t,packI16,n,arguments[2])},setUint16:function setUint16(t,n){set(this,2,t,packI16,n,arguments[2])},setInt32:function setInt32(t,n){set(this,4,t,packI32,n,arguments[2])},setUint32:function setUint32(t,n){set(this,4,t,packI32,n,arguments[2])},setFloat32:function setFloat32(t,n){set(this,4,t,packF32,n,arguments[2])},setFloat64:function setFloat64(t,n){set(this,8,t,packF64,n,arguments[2])}});g(x,"ArrayBuffer"),g(S,"DataView"),c(S[m],u.VIEW,!0),r.ArrayBuffer=x,r.DataView=S},{101:101,115:115,116:116,118:118,123:123,29:29,35:35,40:40,42:42,6:6,60:60,72:72,77:77,9:9,93:93}],123:[function(t,n,r){for(var e,i=t(40),o=t(42),u=t(124),c=u("typed_array"),a=u("view"),f=!(!i.ArrayBuffer||!i.DataView),s=f,l=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(e=i[h[l++]])?(o(e.prototype,c,!0),o(e.prototype,a,!0)):s=!1;n.exports={ABV:f,CONSTR:s,TYPED:c,VIEW:a}},{124:124,40:40,42:42}],124:[function(t,n,r){var e=0,i=Math.random();n.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+i).toString(36))}},{}],125:[function(t,n,r){var e=t(51);n.exports=function(t,n){if(!e(t)||t._t!==n)throw TypeError("Incompatible receiver, "+n+" required!");return t}},{51:51}],126:[function(t,n,r){var e=t(40),i=t(23),o=t(60),u=t(127),c=t(72).f;n.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},{127:127,23:23,40:40,60:60,72:72}],127:[function(t,n,r){r.f=t(128)},{128:128}],128:[function(t,n,r){var e=t(103)("wks"),i=t(124),o=t(40).Symbol,u="function"==typeof o;(n.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},{103:103,124:124,40:40}],129:[function(t,n,r){var e=t(17),i=t(128)("iterator"),o=t(58);n.exports=t(23).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[e(t)]}},{128:128,17:17,23:23,58:58}],130:[function(t,n,r){var e=t(33),i=t(95)(/[\\^$*+?.()|[\]{}]/g,"\\$&");e(e.S,"RegExp",{escape:function escape(t){return i(t)}})},{33:33,95:95}],131:[function(t,n,r){var e=t(33);e(e.P,"Array",{copyWithin:t(8)}),t(5)("copyWithin")},{33:33,5:5,8:8}],132:[function(t,n,r){"use strict";var e=t(33),i=t(12)(4);e(e.P+e.F*!t(105)([].every,!0),"Array",{every:function every(t){return i(this,t,arguments[1])}})},{105:105,12:12,33:33}],133:[function(t,n,r){var e=t(33);e(e.P,"Array",{fill:t(9)}),t(5)("fill")},{33:33,5:5,9:9}],134:[function(t,n,r){"use strict";var e=t(33),i=t(12)(2);e(e.P+e.F*!t(105)([].filter,!0),"Array",{filter:function filter(t){return i(this,t,arguments[1])}})},{105:105,12:12,33:33}],135:[function(t,n,r){"use strict";var e=t(33),i=t(12)(6),o="findIndex",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{findIndex:function findIndex(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),t(5)(o)},{12:12,33:33,5:5}],136:[function(t,n,r){"use strict";var e=t(33),i=t(12)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),e(e.P+e.F*o,"Array",{find:function find(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),t(5)("find")},{12:12,33:33,5:5}],137:[function(t,n,r){"use strict";var e=t(33),i=t(12)(0),o=t(105)([].forEach,!0);e(e.P+e.F*!o,"Array",{forEach:function forEach(t){return i(this,t,arguments[1])}})},{105:105,12:12,33:33}],138:[function(t,n,r){"use strict";var e=t(25),i=t(33),o=t(119),u=t(53),c=t(48),a=t(118),f=t(24),s=t(129);i(i.S+i.F*!t(56)(function(t){Array.from(t)}),"Array",{from:function from(t){var n,r,i,l,h=o(t),v="function"==typeof this?this:Array,p=arguments.length,d=p>1?arguments[1]:void 0,y=void 0!==d,g=0,m=s(h);if(y&&(d=e(d,p>2?arguments[2]:void 0,2)),void 0==m||v==Array&&c(m))for(n=a(h.length),r=new v(n);n>g;g++)f(r,g,y?d(h[g],g):h[g]);else for(l=m.call(h),r=new v;!(i=l.next()).done;g++)f(r,g,y?u(l,d,[i.value,g],!0):i.value);return r.length=g,r}})},{118:118,119:119,129:129,24:24,25:25,33:33,48:48,53:53,56:56}],139:[function(t,n,r){"use strict";var e=t(33),i=t(11)(!1),o=[].indexOf,u=!!o&&1/[1].indexOf(1,-0)<0;e(e.P+e.F*(u||!t(105)(o)),"Array",{indexOf:function indexOf(t){return u?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},{105:105,11:11,33:33}],140:[function(t,n,r){var e=t(33);e(e.S,"Array",{isArray:t(49)})},{33:33,49:49}],141:[function(t,n,r){"use strict";var e=t(5),i=t(57),o=t(58),u=t(117);n.exports=t(55)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==n?i(0,r):"values"==n?i(0,t[r]):i(0,[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},{117:117,5:5,55:55,57:57,58:58}],142:[function(t,n,r){"use strict";var e=t(33),i=t(117),o=[].join;e(e.P+e.F*(t(47)!=Object||!t(105)(o)),"Array",{join:function join(t){return o.call(i(this),void 0===t?",":t)}})},{105:105,117:117,33:33,47:47}],143:[function(t,n,r){"use strict";var e=t(33),i=t(117),o=t(116),u=t(118),c=[].lastIndexOf,a=!!c&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(a||!t(105)(c)),"Array",{lastIndexOf:function lastIndexOf(t){if(a)return c.apply(this,arguments)||0;var n=i(this),r=u(n.length),e=r-1;for(arguments.length>1&&(e=Math.min(e,o(arguments[1]))),e<0&&(e=r+e);e>=0;e--)if(e in n&&n[e]===t)return e||0;return-1}})},{105:105,116:116,117:117,118:118,33:33}],144:[function(t,n,r){"use strict";var e=t(33),i=t(12)(1);e(e.P+e.F*!t(105)([].map,!0),"Array",{map:function map(t){return i(this,t,arguments[1])}})},{105:105,12:12,33:33}],145:[function(t,n,r){"use strict";var e=t(33),i=t(24);e(e.S+e.F*t(35)(function(){function F(){}return!(Array.of.call(F)instanceof F)}),"Array",{of:function of(){for(var t=0,n=arguments.length,r=new("function"==typeof this?this:Array)(n);n>t;)i(r,t,arguments[t++]);return r.length=n,r}})},{24:24,33:33,35:35}],146:[function(t,n,r){"use strict";var e=t(33),i=t(13);e(e.P+e.F*!t(105)([].reduceRight,!0),"Array",{reduceRight:function reduceRight(t){return i(this,t,arguments.length,arguments[1],!0)}})},{105:105,13:13,33:33}],147:[function(t,n,r){"use strict";var e=t(33),i=t(13);e(e.P+e.F*!t(105)([].reduce,!0),"Array",{reduce:function reduce(t){return i(this,t,arguments.length,arguments[1],!1)}})},{105:105,13:13,33:33}],148:[function(t,n,r){"use strict";var e=t(33),i=t(43),o=t(18),u=t(114),c=t(118),a=[].slice;e(e.P+e.F*t(35)(function(){i&&a.call(i)}),"Array",{slice:function slice(t,n){var r=c(this.length),e=o(this);if(n=void 0===n?r:n,"Array"==e)return a.call(this,t,n);for(var i=u(t,r),f=u(n,r),s=c(f-i),l=Array(s),h=0;h<s;h++)l[h]="String"==e?this.charAt(i+h):this[i+h];return l}})},{114:114,118:118,18:18,33:33,35:35,43:43}],149:[function(t,n,r){"use strict";var e=t(33),i=t(12)(3);e(e.P+e.F*!t(105)([].some,!0),"Array",{some:function some(t){return i(this,t,arguments[1])}})},{105:105,12:12,33:33}],150:[function(t,n,r){"use strict";var e=t(33),i=t(3),o=t(119),u=t(35),c=[].sort,a=[1,2,3];e(e.P+e.F*(u(function(){a.sort(void 0)})||!u(function(){a.sort(null)})||!t(105)(c)),"Array",{sort:function sort(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},{105:105,119:119,3:3,33:33,35:35}],151:[function(t,n,r){t(100)("Array")},{100:100}],152:[function(t,n,r){var e=t(33);e(e.S,"Date",{now:function(){return(new Date).getTime()}})},{33:33}],153:[function(t,n,r){var e=t(33),i=t(26);e(e.P+e.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},{26:26,33:33}],154:[function(t,n,r){"use strict";var e=t(33),i=t(119),o=t(120);e(e.P+e.F*t(35)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function toJSON(t){var n=i(this),r=o(n);return"number"!=typeof r||isFinite(r)?n.toISOString():null}})},{119:119,120:120,33:33,35:35}],155:[function(t,n,r){var e=t(128)("toPrimitive"),i=Date.prototype;e in i||t(42)(i,e,t(27))},{128:128,27:27,42:42}],156:[function(t,n,r){var e=Date.prototype,i=e.toString,o=e.getTime;new Date(NaN)+""!="Invalid Date"&&t(94)(e,"toString",function toString(){var t=o.call(this);return t===t?i.call(this):"Invalid Date"})},{94:94}],157:[function(t,n,r){var e=t(33);e(e.P,"Function",{bind:t(16)})},{16:16,33:33}],158:[function(t,n,r){"use strict";var e=t(51),i=t(79),o=t(128)("hasInstance"),u=Function.prototype;o in u||t(72).f(u,o,{value:function(t){if("function"!=typeof this||!e(t))return!1;if(!e(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},{128:128,51:51,72:72,79:79}],159:[function(t,n,r){var e=t(72).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||t(29)&&e(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},{29:29,72:72}],160:[function(t,n,r){"use strict";var e=t(19),i=t(125);n.exports=t(22)("Map",function(t){return function Map(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function get(t){var n=e.getEntry(i(this,"Map"),t);return n&&n.v},set:function set(t,n){return e.def(i(this,"Map"),0===t?0:t,n)}},e,!0)},{125:125,19:19,22:22}],161:[function(t,n,r){var e=t(33),i=t(63),o=Math.sqrt,u=Math.acosh;e(e.S+e.F*!(u&&710==Math.floor(u(Number.MAX_VALUE))&&u(1/0)==1/0),"Math",{acosh:function acosh(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},{33:33,63:63}],162:[function(t,n,r){function asinh(t){return isFinite(t=+t)&&0!=t?t<0?-asinh(-t):Math.log(t+Math.sqrt(t*t+1)):t}var e=t(33),i=Math.asinh;e(e.S+e.F*!(i&&1/i(0)>0),"Math",{asinh:asinh})},{33:33}],163:[function(t,n,r){var e=t(33),i=Math.atanh;e(e.S+e.F*!(i&&1/i(-0)<0),"Math",{atanh:function atanh(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},{33:33}],164:[function(t,n,r){var e=t(33),i=t(65);e(e.S,"Math",{cbrt:function cbrt(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},{33:33,65:65}],165:[function(t,n,r){var e=t(33);e(e.S,"Math",{clz32:function clz32(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},{33:33}],166:[function(t,n,r){var e=t(33),i=Math.exp;e(e.S,"Math",{cosh:function cosh(t){return(i(t=+t)+i(-t))/2}})},{33:33}],167:[function(t,n,r){var e=t(33),i=t(61);e(e.S+e.F*(i!=Math.expm1),"Math",{expm1:i})},{33:33,61:61}],168:[function(t,n,r){var e=t(33);e(e.S,"Math",{fround:t(62)})},{33:33,62:62}],169:[function(t,n,r){var e=t(33),i=Math.abs;e(e.S,"Math",{hypot:function hypot(t,n){for(var r,e,o=0,u=0,c=arguments.length,a=0;u<c;)r=i(arguments[u++]),a<r?(e=a/r,o=o*e*e+1,a=r):r>0?(e=r/a,o+=e*e):o+=r;return a===1/0?1/0:a*Math.sqrt(o)}})},{33:33}],170:[function(t,n,r){var e=t(33),i=Math.imul;e(e.S+e.F*t(35)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function imul(t,n){var r=+t,e=+n,i=65535&r,o=65535&e;return 0|i*o+((65535&r>>>16)*o+i*(65535&e>>>16)<<16>>>0)}})},{33:33,35:35}],171:[function(t,n,r){var e=t(33);e(e.S,"Math",{log10:function log10(t){return Math.log(t)*Math.LOG10E}})},{33:33}],172:[function(t,n,r){var e=t(33);e(e.S,"Math",{log1p:t(63)})},{33:33,63:63}],173:[function(t,n,r){var e=t(33);e(e.S,"Math",{log2:function log2(t){return Math.log(t)/Math.LN2}})},{33:33}],174:[function(t,n,r){var e=t(33);e(e.S,"Math",{sign:t(65)})},{33:33,65:65}],175:[function(t,n,r){var e=t(33),i=t(61),o=Math.exp;e(e.S+e.F*t(35)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function sinh(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},{33:33,35:35,61:61}],176:[function(t,n,r){var e=t(33),i=t(61),o=Math.exp;e(e.S,"Math",{tanh:function tanh(t){var n=i(t=+t),r=i(-t);return n==1/0?1:r==1/0?-1:(n-r)/(o(t)+o(-t))}})},{33:33,61:61}],177:[function(t,n,r){var e=t(33);e(e.S,"Math",{trunc:function trunc(t){return(t>0?Math.floor:Math.ceil)(t)}})},{33:33}],178:[function(t,n,r){"use strict";var e=t(40),i=t(41),o=t(18),u=t(45),c=t(120),a=t(35),f=t(77).f,s=t(75).f,l=t(72).f,h=t(111).trim,v=e.Number,p=v,d=v.prototype,y="Number"==o(t(71)(d)),g="trim"in String.prototype,m=function(t){var n=c(t,!1);if("string"==typeof n&&n.length>2){n=g?n.trim():h(n,3);var r,e,i,o=n.charCodeAt(0);if(43===o||45===o){if(88===(r=n.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(n.charCodeAt(1)){case 66:case 98:e=2,i=49;break;case 79:case 111:e=8,i=55;break;default:return+n}for(var u,a=n.slice(2),f=0,s=a.length;f<s;f++)if((u=a.charCodeAt(f))<48||u>i)return NaN;return parseInt(a,e)}}return+n};if(!v(" 0o1")||!v("0b1")||v("+0x1")){v=function Number(t){var n=arguments.length<1?0:t,r=this;return r instanceof v&&(y?a(function(){d.valueOf.call(r)}):"Number"!=o(r))?u(new p(m(n)),r,v):m(n)};for(var b,x=t(29)?f(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;x.length>S;S++)i(p,b=x[S])&&!i(v,b)&&l(v,b,s(p,b));v.prototype=d,d.constructor=v,t(94)(e,"Number",v)}},{111:111,120:120,18:18,29:29,35:35,40:40,41:41,45:45,71:71,72:72,75:75,77:77,94:94}],179:[function(t,n,r){var e=t(33);e(e.S,"Number",{EPSILON:Math.pow(2,-52)})},{33:33}],180:[function(t,n,r){var e=t(33),i=t(40).isFinite;e(e.S,"Number",{isFinite:function isFinite(t){return"number"==typeof t&&i(t)}})},{33:33,40:40}],181:[function(t,n,r){var e=t(33);e(e.S,"Number",{isInteger:t(50)})},{33:33,50:50}],182:[function(t,n,r){var e=t(33);e(e.S,"Number",{isNaN:function isNaN(t){return t!=t}})},{33:33}],183:[function(t,n,r){var e=t(33),i=t(50),o=Math.abs;e(e.S,"Number",{isSafeInteger:function isSafeInteger(t){return i(t)&&o(t)<=9007199254740991}})},{33:33,50:50}],184:[function(t,n,r){var e=t(33);e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{33:33}],185:[function(t,n,r){var e=t(33);e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{33:33}],186:[function(t,n,r){var e=t(33),i=t(86);e(e.S+e.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},{33:33,86:86}],187:[function(t,n,r){var e=t(33),i=t(87);e(e.S+e.F*(Number.parseInt!=i),"Number",{parseInt:i})},{33:33,87:87}],188:[function(t,n,r){"use strict";var e=t(33),i=t(116),o=t(4),u=t(110),c=1..toFixed,a=Math.floor,f=[0,0,0,0,0,0],s="Number.toFixed: incorrect invocation!",l=function(t,n){for(var r=-1,e=n;++r<6;)e+=t*f[r],f[r]=e%1e7,e=a(e/1e7)},h=function(t){for(var n=6,r=0;--n>=0;)r+=f[n],f[n]=a(r/t),r=r%t*1e7},v=function(){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==f[t]){var r=String(f[t]);n=""===n?r:n+u.call("0",7-r.length)+r}return n},p=function(t,n,r){return 0===n?r:n%2==1?p(t,n-1,r*t):p(t*t,n/2,r)},d=function(t){for(var n=0,r=t;r>=4096;)n+=12,r/=4096;for(;r>=2;)n+=1,r/=2;return n};e(e.P+e.F*(!!c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!t(35)(function(){c.call({})})),"Number",{toFixed:function toFixed(t){var n,r,e,c,a=o(this,s),f=i(t),y="",g="0";if(f<0||f>20)throw RangeError(s);if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return String(a);if(a<0&&(y="-",a=-a),a>1e-21)if(n=d(a*p(2,69,1))-69,r=n<0?a*p(2,-n,1):a/p(2,n,1),r*=4503599627370496,(n=52-n)>0){for(l(0,r),e=f;e>=7;)l(1e7,0),e-=7;for(l(p(10,e,1),0),e=n-1;e>=23;)h(1<<23),e-=23;h(1<<e),l(1,1),h(2),g=v()}else l(0,r),l(1<<-n,0),g=v()+u.call("0",f);return f>0?(c=g.length,g=y+(c<=f?"0."+u.call("0",f-c)+g:g.slice(0,c-f)+"."+g.slice(c-f))):g=y+g,g}})},{110:110,116:116,33:33,35:35,4:4}],189:[function(t,n,r){"use strict";var e=t(33),i=t(35),o=t(4),u=1..toPrecision;e(e.P+e.F*(i(function(){return"1"!==u.call(1,void 0)})||!i(function(){u.call({})})),"Number",{toPrecision:function toPrecision(t){var n=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?u.call(n):u.call(n,t)}})},{33:33,35:35,4:4}],190:[function(t,n,r){var e=t(33);e(e.S+e.F,"Object",{assign:t(70)})},{33:33,70:70}],191:[function(t,n,r){var e=t(33);e(e.S,"Object",{create:t(71)})},{33:33,71:71}],192:[function(t,n,r){var e=t(33);e(e.S+e.F*!t(29),"Object",{defineProperties:t(73)})},{29:29,33:33,73:73}],193:[function(t,n,r){var e=t(33);e(e.S+e.F*!t(29),"Object",{defineProperty:t(72).f})},{29:29,33:33,72:72}],194:[function(t,n,r){var e=t(51),i=t(66).onFreeze;t(83)("freeze",function(t){return function freeze(n){return t&&e(n)?t(i(n)):n}})},{51:51,66:66,83:83}],195:[function(t,n,r){var e=t(117),i=t(75).f;t(83)("getOwnPropertyDescriptor",function(){return function getOwnPropertyDescriptor(t,n){return i(e(t),n)}})},{117:117,75:75,83:83}],196:[function(t,n,r){t(83)("getOwnPropertyNames",function(){return t(76).f})},{76:76,83:83}],197:[function(t,n,r){var e=t(119),i=t(79);t(83)("getPrototypeOf",function(){return function getPrototypeOf(t){return i(e(t))}})},{119:119,79:79,83:83}],198:[function(t,n,r){var e=t(51);t(83)("isExtensible",function(t){return function isExtensible(n){return!!e(n)&&(!t||t(n))}})},{51:51,83:83}],199:[function(t,n,r){var e=t(51);t(83)("isFrozen",function(t){return function isFrozen(n){return!e(n)||!!t&&t(n)}})},{51:51,83:83}],200:[function(t,n,r){var e=t(51);t(83)("isSealed",function(t){return function isSealed(n){return!e(n)||!!t&&t(n)}})},{51:51,83:83}],201:[function(t,n,r){var e=t(33);e(e.S,"Object",{is:t(96)})},{33:33,96:96}],202:[function(t,n,r){var e=t(119),i=t(81);t(83)("keys",function(){return function keys(t){return i(e(t))}})},{119:119,81:81,83:83}],203:[function(t,n,r){var e=t(51),i=t(66).onFreeze;t(83)("preventExtensions",function(t){return function preventExtensions(n){return t&&e(n)?t(i(n)):n}})},{51:51,66:66,83:83}],204:[function(t,n,r){var e=t(51),i=t(66).onFreeze;t(83)("seal",function(t){return function seal(n){return t&&e(n)?t(i(n)):n}})},{51:51,66:66,83:83}],205:[function(t,n,r){var e=t(33);e(e.S,"Object",{setPrototypeOf:t(99).set})},{33:33,99:99}],206:[function(t,n,r){"use strict";var e=t(17),i={};i[t(128)("toStringTag")]="z",i+""!="[object z]"&&t(94)(Object.prototype,"toString",function toString(){return"[object "+e(this)+"]"},!0)},{128:128,17:17,94:94}],207:[function(t,n,r){var e=t(33),i=t(86);e(e.G+e.F*(parseFloat!=i),{parseFloat:i})},{33:33,86:86}],208:[function(t,n,r){var e=t(33),i=t(87);e(e.G+e.F*(parseInt!=i),{parseInt:i})},{33:33,87:87}],209:[function(t,n,r){"use strict";var e,i,o,u,c=t(60),a=t(40),f=t(25),s=t(17),l=t(33),h=t(51),v=t(3),p=t(6),d=t(39),y=t(104),g=t(113).set,m=t(68)(),b=t(69),x=t(90),S=t(91),w=a.TypeError,_=a.process,E=a.Promise,O="process"==s(_),P=function(){},M=i=b.f,F=!!function(){try{var n=E.resolve(1),r=(n.constructor={})[t(128)("species")]=function(t){t(P,P)};return(O||"function"==typeof PromiseRejectionEvent)&&n.then(P)instanceof r}catch(t){}}(),I=c?function(t,n){return t===n||t===E&&n===u}:function(t,n){return t===n},A=function(t){var n;return!(!h(t)||"function"!=typeof(n=t.then))&&n},k=function(t,n){if(!t._n){t._n=!0;var r=t._c;m(function(){for(var e=t._v,i=1==t._s,o=0;r.length>o;)!function(n){var r,o,u=i?n.ok:n.fail,c=n.resolve,a=n.reject,f=n.domain;try{u?(i||(2==t._h&&T(t),t._h=1),!0===u?r=e:(f&&f.enter(),r=u(e),f&&f.exit()),r===n.promise?a(w("Promise-chain cycle")):(o=A(r))?o.call(r,c,a):c(r)):a(e)}catch(t){a(t)}}(r[o++]);t._c=[],t._n=!1,n&&!t._h&&N(t)})}},N=function(t){g.call(a,function(){var n,r,e,i=t._v,o=j(t);if(o&&(n=x(function(){O?_.emit("unhandledRejection",i,t):(r=a.onunhandledrejection)?r({promise:t,reason:i}):(e=a.console)&&e.error&&e.error("Unhandled promise rejection",i)}),t._h=O||j(t)?2:1),t._a=void 0,o&&n.e)throw n.v})},j=function(t){if(1==t._h)return!1;for(var n,r=t._a||t._c,e=0;r.length>e;)if(n=r[e++],n.fail||!j(n.promise))return!1;return!0},T=function(t){g.call(a,function(){var n;O?_.emit("rejectionHandled",t):(n=a.onrejectionhandled)&&n({promise:t,reason:t._v})})},R=function(t){var n=this;n._d||(n._d=!0,n=n._w||n,n._v=t,n._s=2,n._a||(n._a=n._c.slice()),k(n,!0))},L=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw w("Promise can't be resolved itself");(n=A(t))?m(function(){var e={_w:r,_d:!1};try{n.call(t,f(L,e,1),f(R,e,1))}catch(t){R.call(e,t)}}):(r._v=t,r._s=1,k(r,!1))}catch(t){R.call({_w:r,_d:!1},t)}}};F||(E=function Promise(t){p(this,E,"Promise","_h"),v(t),e.call(this);try{t(f(L,this,1),f(R,this,1))}catch(t){R.call(this,t)}},e=function Promise(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},e.prototype=t(93)(E.prototype,{then:function then(t,n){var r=M(y(this,E));return r.ok="function"!=typeof t||t,r.fail="function"==typeof n&&n,r.domain=O?_.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&k(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new e;this.promise=t,this.resolve=f(L,t,1),this.reject=f(R,t,1)},b.f=M=function(t){return I(E,t)?new o(t):i(t)}),l(l.G+l.W+l.F*!F,{Promise:E}),t(101)(E,"Promise"),t(100)("Promise"),u=t(23).Promise,l(l.S+l.F*!F,"Promise",{reject:function reject(t){var n=M(this);return(0,n.reject)(t),n.promise}}),l(l.S+l.F*(c||!F),"Promise",{resolve:function resolve(t){return t instanceof E&&I(t.constructor,this)?t:S(this,t)}}),l(l.S+l.F*!(F&&t(56)(function(t){E.all(t).catch(P)})),"Promise",{all:function all(t){var n=this,r=M(n),e=r.resolve,i=r.reject,o=x(function(){var r=[],o=0,u=1;d(t,!1,function(t){var c=o++,a=!1;r.push(void 0),u++,n.resolve(t).then(function(t){a||(a=!0,r[c]=t,--u||e(r))},i)}),--u||e(r)});return o.e&&i(o.v),r.promise},race:function race(t){var n=this,r=M(n),e=r.reject,i=x(function(){d(t,!1,function(t){n.resolve(t).then(r.resolve,e)})});return i.e&&e(i.v),r.promise}})},{100:100,101:101,104:104,113:113,128:128,17:17,23:23,25:25,
3:3,33:33,39:39,40:40,51:51,56:56,6:6,60:60,68:68,69:69,90:90,91:91,93:93}],210:[function(t,n,r){var e=t(33),i=t(3),o=t(7),u=(t(40).Reflect||{}).apply,c=Function.apply;e(e.S+e.F*!t(35)(function(){u(function(){})}),"Reflect",{apply:function apply(t,n,r){var e=i(t),a=o(r);return u?u(e,n,a):c.call(e,n,a)}})},{3:3,33:33,35:35,40:40,7:7}],211:[function(t,n,r){var e=t(33),i=t(71),o=t(3),u=t(7),c=t(51),a=t(35),f=t(16),s=(t(40).Reflect||{}).construct,l=a(function(){function F(){}return!(s(function(){},[],F)instanceof F)}),h=!a(function(){s(function(){})});e(e.S+e.F*(l||h),"Reflect",{construct:function construct(t,n){o(t),u(n);var r=arguments.length<3?t:o(arguments[2]);if(h&&!l)return s(t,n,r);if(t==r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var e=[null];return e.push.apply(e,n),new(f.apply(t,e))}var a=r.prototype,v=i(c(a)?a:Object.prototype),p=Function.apply.call(t,v,n);return c(p)?p:v}})},{16:16,3:3,33:33,35:35,40:40,51:51,7:7,71:71}],212:[function(t,n,r){var e=t(72),i=t(33),o=t(7),u=t(120);i(i.S+i.F*t(35)(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function defineProperty(t,n,r){o(t),n=u(n,!0),o(r);try{return e.f(t,n,r),!0}catch(t){return!1}}})},{120:120,33:33,35:35,7:7,72:72}],213:[function(t,n,r){var e=t(33),i=t(75).f,o=t(7);e(e.S,"Reflect",{deleteProperty:function deleteProperty(t,n){var r=i(o(t),n);return!(r&&!r.configurable)&&delete t[n]}})},{33:33,7:7,75:75}],214:[function(t,n,r){"use strict";var e=t(33),i=t(7),o=function(t){this._t=i(t),this._i=0;var n,r=this._k=[];for(n in t)r.push(n)};t(54)(o,"Object",function(){var t,n=this,r=n._k;do{if(n._i>=r.length)return{value:void 0,done:!0}}while(!((t=r[n._i++])in n._t));return{value:t,done:!1}}),e(e.S,"Reflect",{enumerate:function enumerate(t){return new o(t)}})},{33:33,54:54,7:7}],215:[function(t,n,r){var e=t(75),i=t(33),o=t(7);i(i.S,"Reflect",{getOwnPropertyDescriptor:function getOwnPropertyDescriptor(t,n){return e.f(o(t),n)}})},{33:33,7:7,75:75}],216:[function(t,n,r){var e=t(33),i=t(79),o=t(7);e(e.S,"Reflect",{getPrototypeOf:function getPrototypeOf(t){return i(o(t))}})},{33:33,7:7,79:79}],217:[function(t,n,r){function get(t,n){var r,u,f=arguments.length<3?t:arguments[2];return a(t)===f?t[n]:(r=e.f(t,n))?o(r,"value")?r.value:void 0!==r.get?r.get.call(f):void 0:c(u=i(t))?get(u,n,f):void 0}var e=t(75),i=t(79),o=t(41),u=t(33),c=t(51),a=t(7);u(u.S,"Reflect",{get:get})},{33:33,41:41,51:51,7:7,75:75,79:79}],218:[function(t,n,r){var e=t(33);e(e.S,"Reflect",{has:function has(t,n){return n in t}})},{33:33}],219:[function(t,n,r){var e=t(33),i=t(7),o=Object.isExtensible;e(e.S,"Reflect",{isExtensible:function isExtensible(t){return i(t),!o||o(t)}})},{33:33,7:7}],220:[function(t,n,r){var e=t(33);e(e.S,"Reflect",{ownKeys:t(85)})},{33:33,85:85}],221:[function(t,n,r){var e=t(33),i=t(7),o=Object.preventExtensions;e(e.S,"Reflect",{preventExtensions:function preventExtensions(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},{33:33,7:7}],222:[function(t,n,r){var e=t(33),i=t(99);i&&e(e.S,"Reflect",{setPrototypeOf:function setPrototypeOf(t,n){i.check(t,n);try{return i.set(t,n),!0}catch(t){return!1}}})},{33:33,99:99}],223:[function(t,n,r){function set(t,n,r){var c,l,h=arguments.length<4?t:arguments[3],v=i.f(f(t),n);if(!v){if(s(l=o(t)))return set(l,n,r,h);v=a(0)}return u(v,"value")?!(!1===v.writable||!s(h))&&(c=i.f(h,n)||a(0),c.value=r,e.f(h,n,c),!0):void 0!==v.set&&(v.set.call(h,r),!0)}var e=t(72),i=t(75),o=t(79),u=t(41),c=t(33),a=t(92),f=t(7),s=t(51);c(c.S,"Reflect",{set:set})},{33:33,41:41,51:51,7:7,72:72,75:75,79:79,92:92}],224:[function(t,n,r){var e=t(40),i=t(45),o=t(72).f,u=t(77).f,c=t(52),a=t(37),f=e.RegExp,s=f,l=f.prototype,h=/a/g,v=/a/g,p=new f(h)!==h;if(t(29)&&(!p||t(35)(function(){return v[t(128)("match")]=!1,f(h)!=h||f(v)==v||"/a/i"!=f(h,"i")}))){f=function RegExp(t,n){var r=this instanceof f,e=c(t),o=void 0===n;return!r&&e&&t.constructor===f&&o?t:i(p?new s(e&&!o?t.source:t,n):s((e=t instanceof f)?t.source:t,e&&o?a.call(t):n),r?this:l,f)};for(var d=u(s),y=0;d.length>y;)!function(t){t in f||o(f,t,{configurable:!0,get:function(){return s[t]},set:function(n){s[t]=n}})}(d[y++]);l.constructor=f,f.prototype=l,t(94)(e,"RegExp",f)}t(100)("RegExp")},{100:100,128:128,29:29,35:35,37:37,40:40,45:45,52:52,72:72,77:77,94:94}],225:[function(t,n,r){t(29)&&"g"!=/./g.flags&&t(72).f(RegExp.prototype,"flags",{configurable:!0,get:t(37)})},{29:29,37:37,72:72}],226:[function(t,n,r){t(36)("match",1,function(t,n,r){return[function match(r){"use strict";var e=t(this),i=void 0==r?void 0:r[n];return void 0!==i?i.call(r,e):new RegExp(r)[n](String(e))},r]})},{36:36}],227:[function(t,n,r){t(36)("replace",2,function(t,n,r){return[function replace(e,i){"use strict";var o=t(this),u=void 0==e?void 0:e[n];return void 0!==u?u.call(e,o,i):r.call(String(o),e,i)},r]})},{36:36}],228:[function(t,n,r){t(36)("search",1,function(t,n,r){return[function search(r){"use strict";var e=t(this),i=void 0==r?void 0:r[n];return void 0!==i?i.call(r,e):new RegExp(r)[n](String(e))},r]})},{36:36}],229:[function(t,n,r){t(36)("split",2,function(n,r,e){"use strict";var i=t(52),o=e,u=[].push,c="length";if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[c]||2!="ab".split(/(?:ab)*/)[c]||4!=".".split(/(.?)(.?)/)[c]||".".split(/()()/)[c]>1||"".split(/.?/)[c]){var a=void 0===/()??/.exec("")[1];e=function(t,n){var r=String(this);if(void 0===t&&0===n)return[];if(!i(t))return o.call(r,t,n);var e,f,s,l,h,v=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,y=void 0===n?4294967295:n>>>0,g=new RegExp(t.source,p+"g");for(a||(e=new RegExp("^"+g.source+"$(?!\\s)",p));(f=g.exec(r))&&!((s=f.index+f[0][c])>d&&(v.push(r.slice(d,f.index)),!a&&f[c]>1&&f[0].replace(e,function(){for(h=1;h<arguments[c]-2;h++)void 0===arguments[h]&&(f[h]=void 0)}),f[c]>1&&f.index<r[c]&&u.apply(v,f.slice(1)),l=f[0][c],d=s,v[c]>=y));)g.lastIndex===f.index&&g.lastIndex++;return d===r[c]?!l&&g.test("")||v.push(""):v.push(r.slice(d)),v[c]>y?v.slice(0,y):v}}else"0".split(void 0,0)[c]&&(e=function(t,n){return void 0===t&&0===n?[]:o.call(this,t,n)});return[function split(t,i){var o=n(this),u=void 0==t?void 0:t[r];return void 0!==u?u.call(t,o,i):e.call(String(o),t,i)},e]})},{36:36,52:52}],230:[function(t,n,r){"use strict";t(225);var e=t(7),i=t(37),o=t(29),u=/./.toString,c=function(n){t(94)(RegExp.prototype,"toString",n,!0)};t(35)(function(){return"/a/b"!=u.call({source:"a",flags:"b"})})?c(function toString(){var t=e(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):"toString"!=u.name&&c(function toString(){return u.call(this)})},{225:225,29:29,35:35,37:37,7:7,94:94}],231:[function(t,n,r){"use strict";var e=t(19),i=t(125);n.exports=t(22)("Set",function(t){return function Set(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function add(t){return e.def(i(this,"Set"),t=0===t?0:t,t)}},e)},{125:125,19:19,22:22}],232:[function(t,n,r){"use strict";t(108)("anchor",function(t){return function anchor(n){return t(this,"a","name",n)}})},{108:108}],233:[function(t,n,r){"use strict";t(108)("big",function(t){return function big(){return t(this,"big","","")}})},{108:108}],234:[function(t,n,r){"use strict";t(108)("blink",function(t){return function blink(){return t(this,"blink","","")}})},{108:108}],235:[function(t,n,r){"use strict";t(108)("bold",function(t){return function bold(){return t(this,"b","","")}})},{108:108}],236:[function(t,n,r){"use strict";var e=t(33),i=t(106)(!1);e(e.P,"String",{codePointAt:function codePointAt(t){return i(this,t)}})},{106:106,33:33}],237:[function(t,n,r){"use strict";var e=t(33),i=t(118),o=t(107),u="".endsWith;e(e.P+e.F*t(34)("endsWith"),"String",{endsWith:function endsWith(t){var n=o(this,t,"endsWith"),r=arguments.length>1?arguments[1]:void 0,e=i(n.length),c=void 0===r?e:Math.min(i(r),e),a=String(t);return u?u.call(n,a,c):n.slice(c-a.length,c)===a}})},{107:107,118:118,33:33,34:34}],238:[function(t,n,r){"use strict";t(108)("fixed",function(t){return function fixed(){return t(this,"tt","","")}})},{108:108}],239:[function(t,n,r){"use strict";t(108)("fontcolor",function(t){return function fontcolor(n){return t(this,"font","color",n)}})},{108:108}],240:[function(t,n,r){"use strict";t(108)("fontsize",function(t){return function fontsize(n){return t(this,"font","size",n)}})},{108:108}],241:[function(t,n,r){var e=t(33),i=t(114),o=String.fromCharCode,u=String.fromCodePoint;e(e.S+e.F*(!!u&&1!=u.length),"String",{fromCodePoint:function fromCodePoint(t){for(var n,r=[],e=arguments.length,u=0;e>u;){if(n=+arguments[u++],i(n,1114111)!==n)throw RangeError(n+" is not a valid code point");r.push(n<65536?o(n):o(55296+((n-=65536)>>10),n%1024+56320))}return r.join("")}})},{114:114,33:33}],242:[function(t,n,r){"use strict";var e=t(33),i=t(107);e(e.P+e.F*t(34)("includes"),"String",{includes:function includes(t){return!!~i(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},{107:107,33:33,34:34}],243:[function(t,n,r){"use strict";t(108)("italics",function(t){return function italics(){return t(this,"i","","")}})},{108:108}],244:[function(t,n,r){"use strict";var e=t(106)(!0);t(55)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},{106:106,55:55}],245:[function(t,n,r){"use strict";t(108)("link",function(t){return function link(n){return t(this,"a","href",n)}})},{108:108}],246:[function(t,n,r){var e=t(33),i=t(117),o=t(118);e(e.S,"String",{raw:function raw(t){for(var n=i(t.raw),r=o(n.length),e=arguments.length,u=[],c=0;r>c;)u.push(String(n[c++])),c<e&&u.push(String(arguments[c]));return u.join("")}})},{117:117,118:118,33:33}],247:[function(t,n,r){var e=t(33);e(e.P,"String",{repeat:t(110)})},{110:110,33:33}],248:[function(t,n,r){"use strict";t(108)("small",function(t){return function small(){return t(this,"small","","")}})},{108:108}],249:[function(t,n,r){"use strict";var e=t(33),i=t(118),o=t(107),u="".startsWith;e(e.P+e.F*t(34)("startsWith"),"String",{startsWith:function startsWith(t){var n=o(this,t,"startsWith"),r=i(Math.min(arguments.length>1?arguments[1]:void 0,n.length)),e=String(t);return u?u.call(n,e,r):n.slice(r,r+e.length)===e}})},{107:107,118:118,33:33,34:34}],250:[function(t,n,r){"use strict";t(108)("strike",function(t){return function strike(){return t(this,"strike","","")}})},{108:108}],251:[function(t,n,r){"use strict";t(108)("sub",function(t){return function sub(){return t(this,"sub","","")}})},{108:108}],252:[function(t,n,r){"use strict";t(108)("sup",function(t){return function sup(){return t(this,"sup","","")}})},{108:108}],253:[function(t,n,r){"use strict";t(111)("trim",function(t){return function trim(){return t(this,3)}})},{111:111}],254:[function(t,n,r){"use strict";var e=t(40),i=t(41),o=t(29),u=t(33),c=t(94),a=t(66).KEY,f=t(35),s=t(103),l=t(101),h=t(124),v=t(128),p=t(127),d=t(126),y=t(59),g=t(32),m=t(49),b=t(7),x=t(117),S=t(120),w=t(92),_=t(71),E=t(76),O=t(75),P=t(72),M=t(81),F=O.f,I=P.f,A=E.f,k=e.Symbol,N=e.JSON,j=N&&N.stringify,T=v("_hidden"),R=v("toPrimitive"),L={}.propertyIsEnumerable,G=s("symbol-registry"),D=s("symbols"),C=s("op-symbols"),W=Object.prototype,U="function"==typeof k,B=e.QObject,V=!B||!B.prototype||!B.prototype.findChild,z=o&&f(function(){return 7!=_(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=F(W,n);e&&delete W[n],I(t,n,r),e&&t!==W&&I(W,n,e)}:I,q=function(t){var n=D[t]=_(k.prototype);return n._k=t,n},K=U&&"symbol"==typeof k.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof k},Y=function defineProperty(t,n,r){return t===W&&Y(C,n,r),b(t),n=S(n,!0),b(r),i(D,n)?(r.enumerable?(i(t,T)&&t[T][n]&&(t[T][n]=!1),r=_(r,{enumerable:w(0,!1)})):(i(t,T)||I(t,T,w(1,{})),t[T][n]=!0),z(t,n,r)):I(t,n,r)},J=function defineProperties(t,n){b(t);for(var r,e=g(n=x(n)),i=0,o=e.length;o>i;)Y(t,r=e[i++],n[r]);return t},H=function create(t,n){return void 0===n?_(t):J(_(t),n)},X=function propertyIsEnumerable(t){var n=L.call(this,t=S(t,!0));return!(this===W&&i(D,t)&&!i(C,t))&&(!(n||!i(this,t)||!i(D,t)||i(this,T)&&this[T][t])||n)},$=function getOwnPropertyDescriptor(t,n){if(t=x(t),n=S(n,!0),t!==W||!i(D,n)||i(C,n)){var r=F(t,n);return!r||!i(D,n)||i(t,T)&&t[T][n]||(r.enumerable=!0),r}},Z=function getOwnPropertyNames(t){for(var n,r=A(x(t)),e=[],o=0;r.length>o;)i(D,n=r[o++])||n==T||n==a||e.push(n);return e},Q=function getOwnPropertySymbols(t){for(var n,r=t===W,e=A(r?C:x(t)),o=[],u=0;e.length>u;)!i(D,n=e[u++])||r&&!i(W,n)||o.push(D[n]);return o};U||(k=function Symbol(){if(this instanceof k)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(r){this===W&&n.call(C,r),i(this,T)&&i(this[T],t)&&(this[T][t]=!1),z(this,t,w(1,r))};return o&&V&&z(W,t,{configurable:!0,set:n}),q(t)},c(k.prototype,"toString",function toString(){return this._k}),O.f=$,P.f=Y,t(77).f=E.f=Z,t(82).f=X,t(78).f=Q,o&&!t(60)&&c(W,"propertyIsEnumerable",X,!0),p.f=function(t){return q(v(t))}),u(u.G+u.W+u.F*!U,{Symbol:k});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;tt.length>nt;)v(tt[nt++]);for(var rt=M(v.store),et=0;rt.length>et;)d(rt[et++]);u(u.S+u.F*!U,"Symbol",{for:function(t){return i(G,t+="")?G[t]:G[t]=k(t)},keyFor:function keyFor(t){if(K(t))return y(G,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){V=!0},useSimple:function(){V=!1}}),u(u.S+u.F*!U,"Object",{create:H,defineProperty:Y,defineProperties:J,getOwnPropertyDescriptor:$,getOwnPropertyNames:Z,getOwnPropertySymbols:Q}),N&&u(u.S+u.F*(!U||f(function(){var t=k();return"[null]"!=j([t])||"{}"!=j({a:t})||"{}"!=j(Object(t))})),"JSON",{stringify:function stringify(t){if(void 0!==t&&!K(t)){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);return n=e[1],"function"==typeof n&&(r=n),!r&&m(n)||(n=function(t,n){if(r&&(n=r.call(this,t,n)),!K(n))return n}),e[1]=n,j.apply(N,e)}}}),k.prototype[R]||t(42)(k.prototype,R,k.prototype.valueOf),l(k,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},{101:101,103:103,117:117,120:120,124:124,126:126,127:127,128:128,29:29,32:32,33:33,35:35,40:40,41:41,42:42,49:49,59:59,60:60,66:66,7:7,71:71,72:72,75:75,76:76,77:77,78:78,81:81,82:82,92:92,94:94}],255:[function(t,n,r){"use strict";var e=t(33),i=t(123),o=t(122),u=t(7),c=t(114),a=t(118),f=t(51),s=t(40).ArrayBuffer,l=t(104),h=o.ArrayBuffer,v=o.DataView,p=i.ABV&&s.isView,d=h.prototype.slice,y=i.VIEW;e(e.G+e.W+e.F*(s!==h),{ArrayBuffer:h}),e(e.S+e.F*!i.CONSTR,"ArrayBuffer",{isView:function isView(t){return p&&p(t)||f(t)&&y in t}}),e(e.P+e.U+e.F*t(35)(function(){return!new h(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function slice(t,n){if(void 0!==d&&void 0===n)return d.call(u(this),t);for(var r=u(this).byteLength,e=c(t,r),i=c(void 0===n?r:n,r),o=new(l(this,h))(a(i-e)),f=new v(this),s=new v(o),p=0;e<i;)s.setUint8(p++,f.getUint8(e++));return o}}),t(100)("ArrayBuffer")},{100:100,104:104,114:114,118:118,122:122,123:123,33:33,35:35,40:40,51:51,7:7}],256:[function(t,n,r){var e=t(33);e(e.G+e.W+e.F*!t(123).ABV,{DataView:t(122).DataView})},{122:122,123:123,33:33}],257:[function(t,n,r){t(121)("Float32",4,function(t){return function Float32Array(n,r,e){return t(this,n,r,e)}})},{121:121}],258:[function(t,n,r){t(121)("Float64",8,function(t){return function Float64Array(n,r,e){return t(this,n,r,e)}})},{121:121}],259:[function(t,n,r){t(121)("Int16",2,function(t){return function Int16Array(n,r,e){return t(this,n,r,e)}})},{121:121}],260:[function(t,n,r){t(121)("Int32",4,function(t){return function Int32Array(n,r,e){return t(this,n,r,e)}})},{121:121}],261:[function(t,n,r){t(121)("Int8",1,function(t){return function Int8Array(n,r,e){return t(this,n,r,e)}})},{121:121}],262:[function(t,n,r){t(121)("Uint16",2,function(t){return function Uint16Array(n,r,e){return t(this,n,r,e)}})},{121:121}],263:[function(t,n,r){t(121)("Uint32",4,function(t){return function Uint32Array(n,r,e){return t(this,n,r,e)}})},{121:121}],264:[function(t,n,r){t(121)("Uint8",1,function(t){return function Uint8Array(n,r,e){return t(this,n,r,e)}})},{121:121}],265:[function(t,n,r){t(121)("Uint8",1,function(t){return function Uint8ClampedArray(n,r,e){return t(this,n,r,e)}},!0)},{121:121}],266:[function(t,n,r){"use strict";var e,i=t(12)(0),o=t(94),u=t(66),c=t(70),a=t(21),f=t(51),s=t(35),l=t(125),h=u.getWeak,v=Object.isExtensible,p=a.ufstore,d={},y=function(t){return function WeakMap(){return t(this,arguments.length>0?arguments[0]:void 0)}},g={get:function get(t){if(f(t)){var n=h(t);return!0===n?p(l(this,"WeakMap")).get(t):n?n[this._i]:void 0}},set:function set(t,n){return a.def(l(this,"WeakMap"),t,n)}},m=n.exports=t(22)("WeakMap",y,g,a,!0,!0);s(function(){return 7!=(new m).set((Object.freeze||Object)(d),7).get(d)})&&(e=a.getConstructor(y,"WeakMap"),c(e.prototype,g),u.NEED=!0,i(["delete","has","get","set"],function(t){var n=m.prototype,r=n[t];o(n,t,function(n,i){if(f(n)&&!v(n)){this._f||(this._f=new e);var o=this._f[t](n,i);return"set"==t?this:o}return r.call(this,n,i)})}))},{12:12,125:125,21:21,22:22,35:35,51:51,66:66,70:70,94:94}],267:[function(t,n,r){"use strict";var e=t(21),i=t(125);t(22)("WeakSet",function(t){return function WeakSet(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function add(t){return e.def(i(this,"WeakSet"),t,!0)}},e,!1,!0)},{125:125,21:21,22:22}],268:[function(t,n,r){"use strict";var e=t(33),i=t(38),o=t(119),u=t(118),c=t(3),a=t(15);e(e.P,"Array",{flatMap:function flatMap(t){var n,r,e=o(this);return c(t),n=u(e.length),r=a(e,0),i(r,e,e,n,0,1,t,arguments[1]),r}}),t(5)("flatMap")},{118:118,119:119,15:15,3:3,33:33,38:38,5:5}],269:[function(t,n,r){"use strict";var e=t(33),i=t(38),o=t(119),u=t(118),c=t(116),a=t(15);e(e.P,"Array",{flatten:function flatten(){var t=arguments[0],n=o(this),r=u(n.length),e=a(n,0);return i(e,n,n,r,0,void 0===t?1:c(t)),e}}),t(5)("flatten")},{116:116,118:118,119:119,15:15,33:33,38:38,5:5}],270:[function(t,n,r){"use strict";var e=t(33),i=t(11)(!0);e(e.P,"Array",{includes:function includes(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),t(5)("includes")},{11:11,33:33,5:5}],271:[function(t,n,r){var e=t(33),i=t(68)(),o=t(40).process,u="process"==t(18)(o);e(e.G,{asap:function asap(t){var n=u&&o.domain;i(n?n.bind(t):t)}})},{18:18,33:33,40:40,68:68}],272:[function(t,n,r){var e=t(33),i=t(18);e(e.S,"Error",{isError:function isError(t){return"Error"===i(t)}})},{18:18,33:33}],273:[function(t,n,r){var e=t(33);e(e.G,{global:t(40)})},{33:33,40:40}],274:[function(t,n,r){t(97)("Map")},{97:97}],275:[function(t,n,r){t(98)("Map")},{98:98}],276:[function(t,n,r){var e=t(33);e(e.P+e.R,"Map",{toJSON:t(20)("Map")})},{20:20,33:33}],277:[function(t,n,r){var e=t(33);e(e.S,"Math",{clamp:function clamp(t,n,r){return Math.min(r,Math.max(n,t))}})},{33:33}],278:[function(t,n,r){var e=t(33);e(e.S,"Math",{DEG_PER_RAD:Math.PI/180})},{33:33}],279:[function(t,n,r){var e=t(33),i=180/Math.PI;e(e.S,"Math",{degrees:function degrees(t){return t*i}})},{33:33}],280:[function(t,n,r){var e=t(33),i=t(64),o=t(62);e(e.S,"Math",{fscale:function fscale(t,n,r,e,u){return o(i(t,n,r,e,u))}})},{33:33,62:62,64:64}],281:[function(t,n,r){var e=t(33);e(e.S,"Math",{iaddh:function iaddh(t,n,r,e){var i=t>>>0,o=n>>>0,u=r>>>0;return o+(e>>>0)+((i&u|(i|u)&~(i+u>>>0))>>>31)|0}})},{33:33}],282:[function(t,n,r){var e=t(33);e(e.S,"Math",{imulh:function imulh(t,n){var r=+t,e=+n,i=65535&r,o=65535&e,u=r>>16,c=e>>16,a=(u*o>>>0)+(i*o>>>16);return u*c+(a>>16)+((i*c>>>0)+(65535&a)>>16)}})},{33:33}],283:[function(t,n,r){var e=t(33);e(e.S,"Math",{isubh:function isubh(t,n,r,e){var i=t>>>0,o=n>>>0,u=r>>>0;return o-(e>>>0)-((~i&u|~(i^u)&i-u>>>0)>>>31)|0}})},{33:33}],284:[function(t,n,r){var e=t(33);e(e.S,"Math",{RAD_PER_DEG:180/Math.PI})},{33:33}],285:[function(t,n,r){var e=t(33),i=Math.PI/180;e(e.S,"Math",{radians:function radians(t){return t*i}})},{33:33}],286:[function(t,n,r){var e=t(33);e(e.S,"Math",{scale:t(64)})},{33:33,64:64}],287:[function(t,n,r){var e=t(33);e(e.S,"Math",{signbit:function signbit(t){return(t=+t)!=t?t:0==t?1/t==1/0:t>0}})},{33:33}],288:[function(t,n,r){var e=t(33);e(e.S,"Math",{umulh:function umulh(t,n){var r=+t,e=+n,i=65535&r,o=65535&e,u=r>>>16,c=e>>>16,a=(u*o>>>0)+(i*o>>>16);return u*c+(a>>>16)+((i*c>>>0)+(65535&a)>>>16)}})},{33:33}],289:[function(t,n,r){"use strict";var e=t(33),i=t(119),o=t(3),u=t(72);t(29)&&e(e.P+t(74),"Object",{__defineGetter__:function __defineGetter__(t,n){u.f(i(this),t,{get:o(n),enumerable:!0,configurable:!0})}})},{119:119,29:29,3:3,33:33,72:72,74:74}],290:[function(t,n,r){"use strict";var e=t(33),i=t(119),o=t(3),u=t(72);t(29)&&e(e.P+t(74),"Object",{__defineSetter__:function __defineSetter__(t,n){u.f(i(this),t,{set:o(n),enumerable:!0,configurable:!0})}})},{119:119,29:29,3:3,33:33,72:72,74:74}],291:[function(t,n,r){var e=t(33),i=t(84)(!0);e(e.S,"Object",{entries:function entries(t){return i(t)}})},{33:33,84:84}],292:[function(t,n,r){var e=t(33),i=t(85),o=t(117),u=t(75),c=t(24);e(e.S,"Object",{getOwnPropertyDescriptors:function getOwnPropertyDescriptors(t){for(var n,r,e=o(t),a=u.f,f=i(e),s={},l=0;f.length>l;)void 0!==(r=a(e,n=f[l++]))&&c(s,n,r);return s}})},{117:117,24:24,33:33,75:75,85:85}],293:[function(t,n,r){"use strict";var e=t(33),i=t(119),o=t(120),u=t(79),c=t(75).f;t(29)&&e(e.P+t(74),"Object",{__lookupGetter__:function __lookupGetter__(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.get}while(r=u(r))}})},{119:119,120:120,29:29,33:33,74:74,75:75,79:79}],294:[function(t,n,r){"use strict";var e=t(33),i=t(119),o=t(120),u=t(79),c=t(75).f;t(29)&&e(e.P+t(74),"Object",{__lookupSetter__:function __lookupSetter__(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.set}while(r=u(r))}})},{119:119,120:120,29:29,33:33,74:74,75:75,79:79}],295:[function(t,n,r){var e=t(33),i=t(84)(!1);e(e.S,"Object",{values:function values(t){return i(t)}})},{33:33,84:84}],296:[function(t,n,r){"use strict";var e=t(33),i=t(40),o=t(23),u=t(68)(),c=t(128)("observable"),a=t(3),f=t(7),s=t(6),l=t(93),h=t(42),v=t(39),p=v.RETURN,d=function(t){return null==t?void 0:a(t)},y=function(t){var n=t._c;n&&(t._c=void 0,n())},g=function(t){return void 0===t._o},m=function(t){g(t)||(t._o=void 0,y(t))},b=function(t,n){f(t),this._c=void 0,this._o=t,t=new x(this);try{var r=n(t),e=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){e.unsubscribe()}:a(r),this._c=r)}catch(n){return void t.error(n)}g(this)&&y(this)};b.prototype=l({},{unsubscribe:function unsubscribe(){m(this)}});var x=function(t){this._s=t};x.prototype=l({},{next:function next(t){var n=this._s;if(!g(n)){var r=n._o;try{var e=d(r.next);if(e)return e.call(r,t)}catch(t){try{m(n)}finally{throw t}}}},error:function error(t){var n=this._s;if(g(n))throw t;var r=n._o;n._o=void 0;try{var e=d(r.error);if(!e)throw t;t=e.call(r,t)}catch(t){try{y(n)}finally{throw t}}return y(n),t},complete:function complete(t){var n=this._s;if(!g(n)){var r=n._o;n._o=void 0;try{var e=d(r.complete);t=e?e.call(r,t):void 0}catch(t){try{y(n)}finally{throw t}}return y(n),t}}});var S=function Observable(t){s(this,S,"Observable","_f")._f=a(t)};l(S.prototype,{subscribe:function subscribe(t){return new b(t,this._f)},forEach:function forEach(t){var n=this;return new(o.Promise||i.Promise)(function(r,e){a(t);var i=n.subscribe({next:function(n){try{return t(n)}catch(t){e(t),i.unsubscribe()}},error:e,complete:r})})}}),l(S,{from:function from(t){var n="function"==typeof this?this:S,r=d(f(t)[c]);if(r){var e=f(r.call(t));return e.constructor===n?e:new n(function(t){return e.subscribe(t)})}return new n(function(n){var r=!1;return u(function(){if(!r){try{if(v(t,!1,function(t){if(n.next(t),r)return p})===p)return}catch(t){if(r)throw t;return void n.error(t)}n.complete()}}),function(){r=!0}})},of:function of(){for(var t=0,n=arguments.length,r=Array(n);t<n;)r[t]=arguments[t++];return new("function"==typeof this?this:S)(function(t){var n=!1;return u(function(){if(!n){for(var e=0;e<r.length;++e)if(t.next(r[e]),n)return;t.complete()}}),function(){n=!0}})}}),h(S.prototype,c,function(){return this}),e(e.G,{Observable:S}),t(100)("Observable")},{100:100,128:128,23:23,3:3,33:33,39:39,40:40,42:42,6:6,68:68,7:7,93:93}],297:[function(t,n,r){"use strict";var e=t(33),i=t(23),o=t(40),u=t(104),c=t(91);e(e.P+e.R,"Promise",{finally:function(t){var n=u(this,i.Promise||o.Promise),r="function"==typeof t;return this.then(r?function(r){return c(n,t()).then(function(){return r})}:t,r?function(r){return c(n,t()).then(function(){throw r})}:t)}})},{104:104,23:23,33:33,40:40,91:91}],298:[function(t,n,r){"use strict";var e=t(33),i=t(69),o=t(90);e(e.S,"Promise",{try:function(t){var n=i.f(this),r=o(t);return(r.e?n.reject:n.resolve)(r.v),n.promise}})},{33:33,69:69,90:90}],299:[function(t,n,r){var e=t(67),i=t(7),o=e.key,u=e.set;e.exp({defineMetadata:function defineMetadata(t,n,r,e){u(t,n,i(r),o(e))}})},{67:67,7:7}],300:[function(t,n,r){var e=t(67),i=t(7),o=e.key,u=e.map,c=e.store;e.exp({deleteMetadata:function deleteMetadata(t,n){var r=arguments.length<3?void 0:o(arguments[2]),e=u(i(n),r,!1);if(void 0===e||!e.delete(t))return!1;if(e.size)return!0;var a=c.get(n);return a.delete(r),!!a.size||c.delete(n)}})},{67:67,7:7}],301:[function(t,n,r){var e=t(231),i=t(10),o=t(67),u=t(7),c=t(79),a=o.keys,f=o.key,s=function(t,n){var r=a(t,n),o=c(t);if(null===o)return r;var u=s(o,n);return u.length?r.length?i(new e(r.concat(u))):u:r};o.exp({getMetadataKeys:function getMetadataKeys(t){return s(u(t),arguments.length<2?void 0:f(arguments[1]))}})},{10:10,231:231,67:67,7:7,79:79}],302:[function(t,n,r){var e=t(67),i=t(7),o=t(79),u=e.has,c=e.get,a=e.key,f=function(t,n,r){if(u(t,n,r))return c(t,n,r);var e=o(n);return null!==e?f(t,e,r):void 0};e.exp({getMetadata:function getMetadata(t,n){return f(t,i(n),arguments.length<3?void 0:a(arguments[2]))}})},{67:67,7:7,79:79}],303:[function(t,n,r){var e=t(67),i=t(7),o=e.keys,u=e.key;e.exp({getOwnMetadataKeys:function getOwnMetadataKeys(t){return o(i(t),arguments.length<2?void 0:u(arguments[1]))}})},{67:67,7:7}],304:[function(t,n,r){var e=t(67),i=t(7),o=e.get,u=e.key;e.exp({getOwnMetadata:function getOwnMetadata(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},{67:67,7:7}],305:[function(t,n,r){var e=t(67),i=t(7),o=t(79),u=e.has,c=e.key,a=function(t,n,r){if(u(t,n,r))return!0;var e=o(n);return null!==e&&a(t,e,r)};e.exp({hasMetadata:function hasMetadata(t,n){return a(t,i(n),arguments.length<3?void 0:c(arguments[2]))}})},{67:67,7:7,79:79}],306:[function(t,n,r){var e=t(67),i=t(7),o=e.has,u=e.key;e.exp({hasOwnMetadata:function hasOwnMetadata(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},{67:67,7:7}],307:[function(t,n,r){var e=t(67),i=t(7),o=t(3),u=e.key,c=e.set;e.exp({metadata:function metadata(t,n){return function decorator(r,e){c(t,n,(void 0!==e?i:o)(r),u(e))}}})},{3:3,67:67,7:7}],308:[function(t,n,r){t(97)("Set")},{97:97}],309:[function(t,n,r){t(98)("Set")},{98:98}],310:[function(t,n,r){var e=t(33);e(e.P+e.R,"Set",{toJSON:t(20)("Set")})},{20:20,33:33}],311:[function(t,n,r){"use strict";var e=t(33),i=t(106)(!0);e(e.P,"String",{at:function at(t){return i(this,t)}})},{106:106,33:33}],312:[function(t,n,r){"use strict";var e=t(33),i=t(28),o=t(118),u=t(52),c=t(37),a=RegExp.prototype,f=function(t,n){this._r=t,this._s=n};t(54)(f,"RegExp String",function next(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),e(e.P,"String",{matchAll:function matchAll(t){if(i(this),!u(t))throw TypeError(t+" is not a regexp!");var n=String(this),r="flags"in a?String(t.flags):c.call(t),e=new RegExp(t.source,~r.indexOf("g")?r:"g"+r);return e.lastIndex=o(t.lastIndex),new f(e,n)}})},{118:118,28:28,33:33,37:37,52:52,54:54}],313:[function(t,n,r){"use strict";var e=t(33),i=t(109);e(e.P,"String",{padEnd:function padEnd(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},{109:109,33:33}],314:[function(t,n,r){"use strict";var e=t(33),i=t(109);e(e.P,"String",{padStart:function padStart(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},{109:109,33:33}],315:[function(t,n,r){"use strict";t(111)("trimLeft",function(t){return function trimLeft(){return t(this,1)}},"trimStart")},{111:111}],316:[function(t,n,r){"use strict";t(111)("trimRight",function(t){return function trimRight(){return t(this,2)}},"trimEnd")},{111:111}],317:[function(t,n,r){t(126)("asyncIterator")},{126:126}],318:[function(t,n,r){t(126)("observable")},{126:126}],319:[function(t,n,r){var e=t(33);e(e.S,"System",{global:t(40)})},{33:33,40:40}],320:[function(t,n,r){t(97)("WeakMap")},{97:97}],321:[function(t,n,r){t(98)("WeakMap")},{98:98}],322:[function(t,n,r){t(97)("WeakSet")},{97:97}],323:[function(t,n,r){t(98)("WeakSet")},{98:98}],324:[function(t,n,r){for(var e=t(141),i=t(81),o=t(94),u=t(40),c=t(42),a=t(58),f=t(128),s=f("iterator"),l=f("toStringTag"),h=a.Array,v={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(v),d=0;d<p.length;d++){var y,g=p[d],m=v[g],b=u[g],x=b&&b.prototype;if(x&&(x[s]||c(x,s,h),x[l]||c(x,l,g),a[g]=h,m))for(y in e)x[y]||o(x,y,e[y],!0)}},{128:128,141:141,40:40,42:42,58:58,81:81,94:94}],325:[function(t,n,r){var e=t(33),i=t(113);e(e.G+e.B,{setImmediate:i.set,clearImmediate:i.clear})},{113:113,33:33}],326:[function(t,n,r){var e=t(40),i=t(33),o=t(46),u=t(88),c=e.navigator,a=!!c&&/MSIE .\./.test(c.userAgent),f=function(t){return a?function(n,r){return t(o(u,[].slice.call(arguments,2),"function"==typeof n?n:Function(n)),r)}:t};i(i.G+i.B+i.F*a,{setTimeout:f(e.setTimeout),setInterval:f(e.setInterval)})},{33:33,40:40,46:46,88:88}],327:[function(t,n,r){t(254),t(191),t(193),t(192),t(195),t(197),t(202),t(196),t(194),t(204),t(203),t(199),t(200),t(198),t(190),t(201),t(205),t(206),t(157),t(159),t(158),t(208),t(207),t(178),t(188),t(189),t(179),t(180),t(181),t(182),t(183),t(184),t(185),t(186),t(187),t(161),t(162),t(163),t(164),t(165),t(166),t(167),t(168),t(169),t(170),t(171),t(172),t(173),t(174),t(175),t(176),t(177),t(241),t(246),t(253),t(244),t(236),t(237),t(242),t(247),t(249),t(232),t(233),t(234),t(235),t(238),t(239),t(240),t(243),t(245),t(248),t(250),t(251),t(252),t(152),t(154),t(153),t(156),t(155),t(140),t(138),t(145),t(142),t(148),t(150),t(137),t(144),t(134),t(149),t(132),t(147),t(146),t(139),t(143),t(131),t(133),t(136),t(135),t(151),t(141),t(224),t(230),t(225),t(226),t(227),t(228),t(229),t(209),t(160),t(231),t(266),t(267),t(255),t(256),t(261),t(264),t(265),t(259),t(262),t(260),t(263),t(257),t(258),t(210),t(211),t(212),t(213),t(214),t(217),t(215),t(216),t(218),t(219),t(220),t(221),t(223),t(222),t(270),t(268),t(269),t(311),t(314),t(313),t(315),t(316),t(312),t(317),t(318),t(292),t(295),t(291),t(289),t(290),t(293),t(294),t(276),t(310),t(275),t(309),t(321),t(323),t(274),t(308),t(320),t(322),t(273),t(319),t(272),t(277),t(278),t(279),t(280),t(281),t(283),t(282),t(284),t(285),t(286),t(288),t(287),t(297),t(298),t(299),t(300),t(302),t(301),t(304),t(303),t(305),t(306),t(307),t(271),t(296),t(326),t(325),t(324),n.exports=t(23)},{131:131,132:132,133:133,134:134,135:135,136:136,137:137,138:138,139:139,140:140,141:141,142:142,143:143,144:144,145:145,146:146,147:147,148:148,149:149,150:150,151:151,152:152,153:153,154:154,155:155,156:156,157:157,158:158,159:159,160:160,161:161,162:162,163:163,164:164,165:165,166:166,167:167,168:168,169:169,170:170,171:171,172:172,173:173,174:174,175:175,176:176,177:177,178:178,179:179,180:180,181:181,182:182,183:183,184:184,185:185,
186:186,187:187,188:188,189:189,190:190,191:191,192:192,193:193,194:194,195:195,196:196,197:197,198:198,199:199,200:200,201:201,202:202,203:203,204:204,205:205,206:206,207:207,208:208,209:209,210:210,211:211,212:212,213:213,214:214,215:215,216:216,217:217,218:218,219:219,220:220,221:221,222:222,223:223,224:224,225:225,226:226,227:227,228:228,229:229,23:23,230:230,231:231,232:232,233:233,234:234,235:235,236:236,237:237,238:238,239:239,240:240,241:241,242:242,243:243,244:244,245:245,246:246,247:247,248:248,249:249,250:250,251:251,252:252,253:253,254:254,255:255,256:256,257:257,258:258,259:259,260:260,261:261,262:262,263:263,264:264,265:265,266:266,267:267,268:268,269:269,270:270,271:271,272:272,273:273,274:274,275:275,276:276,277:277,278:278,279:279,280:280,281:281,282:282,283:283,284:284,285:285,286:286,287:287,288:288,289:289,290:290,291:291,292:292,293:293,294:294,295:295,296:296,297:297,298:298,299:299,300:300,301:301,302:302,303:303,304:304,305:305,306:306,307:307,308:308,309:309,310:310,311:311,312:312,313:313,314:314,315:315,316:316,317:317,318:318,319:319,320:320,321:321,322:322,323:323,324:324,325:325,326:326}],328:[function(t,n,r){(function(t){!function(t){"use strict";function wrap(t,n,r,e){var i=n&&n.prototype instanceof Generator?n:Generator,o=Object.create(i.prototype),u=new Context(e||[]);return o._invoke=makeInvokeMethod(t,r,u),o}function tryCatch(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}function defineIteratorMethods(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function AsyncIterator(n){function invoke(t,r,e,o){var u=tryCatch(n[t],n,r);if("throw"!==u.type){var c=u.arg,a=c.value;return a&&"object"==typeof a&&i.call(a,"__await")?Promise.resolve(a.__await).then(function(t){invoke("next",t,e,o)},function(t){invoke("throw",t,e,o)}):Promise.resolve(a).then(function(t){c.value=t,e(c)},o)}o(u.arg)}function enqueue(t,n){function callInvokeWithMethodAndArg(){return new Promise(function(r,e){invoke(t,n,r,e)})}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}"object"==typeof t.process&&t.process.domain&&(invoke=t.process.domain.bind(invoke));var r;this._invoke=enqueue}function makeInvokeMethod(t,n,r){var e=l;return function invoke(i,o){if(e===v)throw new Error("Generator is already running");if(e===p){if("throw"===i)throw o;return doneResult()}for(r.method=i,r.arg=o;;){var u=r.delegate;if(u){var c=maybeInvokeDelegate(u,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(e===l)throw e=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);e=v;var a=tryCatch(t,n,r);if("normal"===a.type){if(e=r.done?p:h,a.arg===d)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(e=p,r.method="throw",r.arg=a.arg)}}}function maybeInvokeDelegate(t,n){var e=t.iterator[n.method];if(e===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=r,maybeInvokeDelegate(t,n),"throw"===n.method))return d;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=tryCatch(e,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,d;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=r),n.delegate=null,d):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function pushTryEntry(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function resetTryEntry(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var n=t[u];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,o=function next(){for(;++e<t.length;)if(i.call(t,e))return next.value=t[e],next.done=!1,next;return next.value=r,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:r,done:!0}}var r,e=Object.prototype,i=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag",f="object"==typeof n,s=t.regeneratorRuntime;if(s)return void(f&&(n.exports=s));s=t.regeneratorRuntime=f?n.exports:{},s.wrap=wrap;var l="suspendedStart",h="suspendedYield",v="executing",p="completed",d={},y={};y[u]=function(){return this};var g=Object.getPrototypeOf,m=g&&g(g(values([])));m&&m!==e&&i.call(m,u)&&(y=m);var b=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(y);GeneratorFunction.prototype=b.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[a]=GeneratorFunction.displayName="GeneratorFunction",s.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===GeneratorFunction||"GeneratorFunction"===(n.displayName||n.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(b),t},s.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[c]=function(){return this},s.AsyncIterator=AsyncIterator,s.async=function(t,n,r,e){var i=new AsyncIterator(wrap(t,n,r,e));return s.isGeneratorFunction(n)?i:i.next().then(function(t){return t.done?t.value:i.next()})},defineIteratorMethods(b),b[a]="Generator",b[u]=function(){return this},b.toString=function(){return"[object Generator]"},s.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function next(){for(;n.length;){var r=n.pop();if(r in t)return next.value=r,next.done=!1,next}return next.done=!0,next}},s.values=values,Context.prototype={constructor:Context,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(resetTryEntry),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0],n=t.completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){function handle(e,i){return u.type="throw",u.arg=t,n.next=e,i&&(n.method="next",n.arg=r),!!i}if(this.done)throw t;for(var n=this,e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e],u=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),a=i.call(o,"finallyLoc");if(c&&a){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc<=this.prev&&i.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var o=e;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=n,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),d},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),d}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var e=r.completion;if("throw"===e.type){var i=e.arg;resetTryEntry(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:values(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=r),d}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);




//////////////////////asdf


// 20201126150759
// https://fortifyapp.com/external/asmCrypto/2.3.2/asmcrypto.all.es5.min.js

var asmCrypto=function(f){"use strict";var t="undefined"==typeof atob?function(f){return Buffer.from(f,"base64").toString("binary")}:atob,e="undefined"==typeof btoa?function(f){return Buffer.from(f,"binary").toString("base64")}:btoa;function r(f,t){void 0===t&&(t=!1);for(var e=f.length,r=new Uint8Array(t?4*e:e),n=0,i=0;n<e;n++){var a=f.charCodeAt(n);if(t&&55296<=a&&a<=56319){if(++n>=e)throw new Error("Malformed string, low surrogate expected at position "+n);a=(55296^a)<<10|65536|56320^f.charCodeAt(n)}else if(!t&&a>>>8)throw new Error("Wide characters are not allowed.");!t||a<=127?r[i++]=a:(a<=2047?r[i++]=192|a>>6:(a<=65535?r[i++]=224|a>>12:(r[i++]=240|a>>18,r[i++]=128|a>>12&63),r[i++]=128|a>>6&63),r[i++]=128|63&a)}return r.subarray(0,i)}function n(f){var t=f.length;1&t&&(f="0"+f,t++);for(var e=new Uint8Array(t>>1),r=0;r<t;r+=2)e[r>>1]=parseInt(f.substr(r,2),16);return e}function i(f){return r(t(f))}function a(f,t){void 0===t&&(t=!1);for(var e=f.length,r=new Array(e),n=0,i=0;n<e;n++){var a=f[n];if(!t||a<128)r[i++]=a;else if(192<=a&&a<224&&n+1<e)r[i++]=(31&a)<<6|63&f[++n];else if(224<=a&&a<240&&n+2<e)r[i++]=(15&a)<<12|(63&f[++n])<<6|63&f[++n];else{if(!(240<=a&&a<248&&n+3<e))throw new Error("Malformed UTF8 character at byte offset "+n);var s=(7&a)<<18|(63&f[++n])<<12|(63&f[++n])<<6|63&f[++n];s<=65535?r[i++]=s:(s^=65536,r[i++]=55296|s>>10,r[i++]=56320|1023&s)}}var o="",x=16384;for(n=0;n<i;n+=x)o+=String.fromCharCode.apply(String,r.slice(n,n+x<=i?n+x:i));return o}function s(f){for(var t="",e=0;e<f.length;e++){var r=(255&f[e]).toString(16);r.length<2&&(t+="0"),t+=r}return t}function o(f){return e(a(f))}function p(f){return f instanceof Uint8Array}function x(f,t){var e=f?f.byteLength:t||65536;if(4095&e||e<=0)throw new Error("heap size must be a positive integer and a multiple of 4096");return f=f||new Uint8Array(new ArrayBuffer(e)),f}function y(f,t,e,r,n){var i=f.length-t,a=i<n?i:n;return f.set(e.subarray(r,r+a),t),a}function c(){for(var f=[],t=0;t<arguments.length;t++)f[t]=arguments[t];for(var e=f.reduce(function(f,t){return f+t.length},0),r=new Uint8Array(e),n=0,i=0;i<f.length;i++)r.set(f[i],n),n+=f[i].length;return r}var h=function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,t){f.__proto__=t}||function(f,t){for(var e in t)t.hasOwnProperty(e)&&(f[e]=t[e])};return function(f,t){function e(){this.constructor=f}r(f,t),f.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),b=function(r){function f(){for(var f=[],t=0;t<arguments.length;t++)f[t]=arguments[t];var e=r.apply(this,f)||this;return e}return h(f,r),f}(Error),_=function(r){function f(){for(var f=[],t=0;t<arguments.length;t++)f[t]=arguments[t];var e=r.apply(this,f)||this;return e}return h(f,r),f}(Error),v=function(r){function f(){for(var f=[],t=0;t<arguments.length;t++)f[t]=arguments[t];var e=r.apply(this,f)||this;return e}return h(f,r),f}(Error),g=function(){var r,n,i=!1;function a(){r=[],n=[];var f,t,e=1;for(f=0;f<255;f++)r[f]=e,t=128&e,e<<=1,e&=255,128===t&&(e^=27),e^=r[f],n[r[f]]=f;r[255]=r[0],n[0]=0,i=!0}function s(f,t){var e=r[(n[f]+n[t])%255];return 0!==f&&0!==t||(e=0),e}function o(f){var t=r[255-n[f]];return 0===f&&(t=0),t}var _,x,c,v,h=!1;function u(){function f(f){var t,e,r;for(e=r=o(f),t=0;t<4;t++)e=255&(e<<1|e>>>7),r^=e;return r^=99,r}i||a(),_=[],x=[],c=[[],[],[],[]],v=[[],[],[],[]];for(var t=0;t<256;t++){var e=f(t);_[t]=e,x[e]=t,c[0][t]=s(2,e)<<24|e<<16|e<<8|s(3,e),v[0][e]=s(14,t)<<24|s(9,t)<<16|s(13,t)<<8|s(11,t);for(var r=1;r<4;r++)c[r][t]=c[r-1][t]>>>8|c[r-1][t]<<24,v[r][e]=v[r-1][e]>>>8|v[r-1][e]<<24}h=!0}var f=function(f,t){h||u();var b=new Uint32Array(t);b.set(_,512),b.set(x,768);for(var e=0;e<4;e++)b.set(c[e],4096+1024*e>>2),b.set(v[e],8192+1024*e>>2);function r(f,t,e,r,n,i,a,s,o){var x=b.subarray(0,60),c=b.subarray(256,316);x.set([t,e,r,n,i,a,s,o]);for(var h=f,u=1;h<4*f+28;h++){var l=x[h-1];(h%f==0||8===f&&h%f==4)&&(l=_[l>>>24]<<24^_[l>>>16&255]<<16^_[l>>>8&255]<<8^_[255&l]),h%f==0&&(l=l<<8^l>>>24^u<<24,u=u<<1^(128&u?27:0)),x[h]=x[h-f]^l}for(var p=0;p<h;p+=4)for(var y=0;y<4;y++){l=x[h-(4+p)+(4-y)%4];c[p+y]=p<4||h-4<=p?l:v[0][_[l>>>24]]^v[1][_[l>>>16&255]]^v[2][_[l>>>8&255]]^v[3][_[255&l]]}g.set_rounds(f+5)}var n={Uint8Array:Uint8Array,Uint32Array:Uint32Array},g=function(f,t,e){"use asm";var b=0,g=0,_=0,v=0,p=0,y=0,d=0,w=0,n=0,i=0,a=0,s=0,o=0,x=0,c=0,h=0,A=0,m=0,E=0,C=0,u=0;var S=new f.Uint32Array(e),l=new f.Uint8Array(e);function U(f,t,e,r,n,i,a,s){f=f|0;t=t|0;e=e|0;r=r|0;n=n|0;i=i|0;a=a|0;s=s|0;var o=0,x=0,c=0,h=0,u=0,l=0,p=0,y=0;o=e|0x400,x=e|0x800,c=e|0xc00;n=n^S[(f|0)>>2],i=i^S[(f|4)>>2],a=a^S[(f|8)>>2],s=s^S[(f|12)>>2];for(y=16;(y|0)<=r<<4;y=y+16|0){h=S[(e|n>>22&1020)>>2]^S[(o|i>>14&1020)>>2]^S[(x|a>>6&1020)>>2]^S[(c|s<<2&1020)>>2]^S[(f|y|0)>>2],u=S[(e|i>>22&1020)>>2]^S[(o|a>>14&1020)>>2]^S[(x|s>>6&1020)>>2]^S[(c|n<<2&1020)>>2]^S[(f|y|4)>>2],l=S[(e|a>>22&1020)>>2]^S[(o|s>>14&1020)>>2]^S[(x|n>>6&1020)>>2]^S[(c|i<<2&1020)>>2]^S[(f|y|8)>>2],p=S[(e|s>>22&1020)>>2]^S[(o|n>>14&1020)>>2]^S[(x|i>>6&1020)>>2]^S[(c|a<<2&1020)>>2]^S[(f|y|12)>>2];n=h,i=u,a=l,s=p}b=S[(t|n>>22&1020)>>2]<<24^S[(t|i>>14&1020)>>2]<<16^S[(t|a>>6&1020)>>2]<<8^S[(t|s<<2&1020)>>2]^S[(f|y|0)>>2],g=S[(t|i>>22&1020)>>2]<<24^S[(t|a>>14&1020)>>2]<<16^S[(t|s>>6&1020)>>2]<<8^S[(t|n<<2&1020)>>2]^S[(f|y|4)>>2],_=S[(t|a>>22&1020)>>2]<<24^S[(t|s>>14&1020)>>2]<<16^S[(t|n>>6&1020)>>2]<<8^S[(t|i<<2&1020)>>2]^S[(f|y|8)>>2],v=S[(t|s>>22&1020)>>2]<<24^S[(t|n>>14&1020)>>2]<<16^S[(t|i>>6&1020)>>2]<<8^S[(t|a<<2&1020)>>2]^S[(f|y|12)>>2]}function r(f,t,e,r){f=f|0;t=t|0;e=e|0;r=r|0;U(0x0000,0x0800,0x1000,u,f,t,e,r)}function M(f,t,e,r){f=f|0;t=t|0;e=e|0;r=r|0;var n=0;U(0x0400,0x0c00,0x2000,u,f,r,e,t);n=g,g=v,v=n}function O(f,t,e,r){f=f|0;t=t|0;e=e|0;r=r|0;U(0x0000,0x0800,0x1000,u,p^f,y^t,d^e,w^r);p=b,y=g,d=_,w=v}function H(f,t,e,r){f=f|0;t=t|0;e=e|0;r=r|0;var n=0;U(0x0400,0x0c00,0x2000,u,f,r,e,t);n=g,g=v,v=n;b=b^p,g=g^y,_=_^d,v=v^w;p=f,y=t,d=e,w=r}function L(f,t,e,r){f=f|0;t=t|0;e=e|0;r=r|0;U(0x0000,0x0800,0x1000,u,p,y,d,w);p=b=b^f,y=g=g^t,d=_=_^e,w=v=v^r}function k(f,t,e,r){f=f|0;t=t|0;e=e|0;r=r|0;U(0x0000,0x0800,0x1000,u,p,y,d,w);b=b^f,g=g^t,_=_^e,v=v^r;p=f,y=t,d=e,w=r}function P(f,t,e,r){f=f|0;t=t|0;e=e|0;r=r|0;U(0x0000,0x0800,0x1000,u,p,y,d,w);p=b,y=g,d=_,w=v;b=b^f,g=g^t,_=_^e,v=v^r}function D(f,t,e,r){f=f|0;t=t|0;e=e|0;r=r|0;U(0x0000,0x0800,0x1000,u,n,i,a,s);s=~h&s|h&s+1;a=~c&a|c&a+((s|0)==0);i=~x&i|x&i+((a|0)==0);n=~o&n|o&n+((i|0)==0);b=b^f;g=g^t;_=_^e;v=v^r}function R(f,t,e,r){f=f|0;t=t|0;e=e|0;r=r|0;var n=0,i=0,a=0,s=0,o=0,x=0,c=0,h=0,u=0,l=0;f=f^p,t=t^y,e=e^d,r=r^w;n=A|0,i=m|0,a=E|0,s=C|0;for(;(u|0)<128;u=u+1|0){if(n>>>31){o=o^f,x=x^t,c=c^e,h=h^r}n=n<<1|i>>>31,i=i<<1|a>>>31,a=a<<1|s>>>31,s=s<<1;l=r&1;r=r>>>1|e<<31,e=e>>>1|t<<31,t=t>>>1|f<<31,f=f>>>1;if(l)f=f^0xe1000000}p=o,y=x,d=c,w=h}function T(f){f=f|0;u=f}function Z(f,t,e,r){f=f|0;t=t|0;e=e|0;r=r|0;b=f,g=t,_=e,v=r}function B(f,t,e,r){f=f|0;t=t|0;e=e|0;r=r|0;p=f,y=t,d=e,w=r}function I(f,t,e,r){f=f|0;t=t|0;e=e|0;r=r|0;n=f,i=t,a=e,s=r}function z(f,t,e,r){f=f|0;t=t|0;e=e|0;r=r|0;o=f,x=t,c=e,h=r}function G(f,t,e,r){f=f|0;t=t|0;e=e|0;r=r|0;s=~h&s|h&r,a=~c&a|c&e,i=~x&i|x&t,n=~o&n|o&f}function N(f){f=f|0;if(f&15)return-1;l[f|0]=b>>>24,l[f|1]=b>>>16&255,l[f|2]=b>>>8&255,l[f|3]=b&255,l[f|4]=g>>>24,l[f|5]=g>>>16&255,l[f|6]=g>>>8&255,l[f|7]=g&255,l[f|8]=_>>>24,l[f|9]=_>>>16&255,l[f|10]=_>>>8&255,l[f|11]=_&255,l[f|12]=v>>>24,l[f|13]=v>>>16&255,l[f|14]=v>>>8&255,l[f|15]=v&255;return 16}function j(f){f=f|0;if(f&15)return-1;l[f|0]=p>>>24,l[f|1]=p>>>16&255,l[f|2]=p>>>8&255,l[f|3]=p&255,l[f|4]=y>>>24,l[f|5]=y>>>16&255,l[f|6]=y>>>8&255,l[f|7]=y&255,l[f|8]=d>>>24,l[f|9]=d>>>16&255,l[f|10]=d>>>8&255,l[f|11]=d&255,l[f|12]=w>>>24,l[f|13]=w>>>16&255,l[f|14]=w>>>8&255,l[f|15]=w&255;return 16}function F(){r(0,0,0,0);A=b,m=g,E=_,C=v}function q(f,t,e){f=f|0;t=t|0;e=e|0;var r=0;if(t&15)return-1;while((e|0)>=16){K[f&7](l[t|0]<<24|l[t|1]<<16|l[t|2]<<8|l[t|3],l[t|4]<<24|l[t|5]<<16|l[t|6]<<8|l[t|7],l[t|8]<<24|l[t|9]<<16|l[t|10]<<8|l[t|11],l[t|12]<<24|l[t|13]<<16|l[t|14]<<8|l[t|15]);l[t|0]=b>>>24,l[t|1]=b>>>16&255,l[t|2]=b>>>8&255,l[t|3]=b&255,l[t|4]=g>>>24,l[t|5]=g>>>16&255,l[t|6]=g>>>8&255,l[t|7]=g&255,l[t|8]=_>>>24,l[t|9]=_>>>16&255,l[t|10]=_>>>8&255,l[t|11]=_&255,l[t|12]=v>>>24,l[t|13]=v>>>16&255,l[t|14]=v>>>8&255,l[t|15]=v&255;r=r+16|0,t=t+16|0,e=e-16|0}return r|0}function V(f,t,e){f=f|0;t=t|0;e=e|0;var r=0;if(t&15)return-1;while((e|0)>=16){W[f&1](l[t|0]<<24|l[t|1]<<16|l[t|2]<<8|l[t|3],l[t|4]<<24|l[t|5]<<16|l[t|6]<<8|l[t|7],l[t|8]<<24|l[t|9]<<16|l[t|10]<<8|l[t|11],l[t|12]<<24|l[t|13]<<16|l[t|14]<<8|l[t|15]);r=r+16|0,t=t+16|0,e=e-16|0}return r|0}var K=[r,M,O,H,L,k,P,D];var W=[O,R];return{set_rounds:T,set_state:Z,set_iv:B,set_nonce:I,set_mask:z,set_counter:G,get_state:N,get_iv:j,gcm_init:F,cipher:q,mac:V}}(n,f,t);return g.set_key=r,g};return f.ENC={ECB:0,CBC:2,CFB:4,OFB:6,CTR:7},f.DEC={ECB:1,CBC:3,CFB:5,OFB:6,CTR:7},f.MAC={CBC:0,GCM:1},f.HEAP_DATA=16384,f}(),u=function(){function f(f,t,e,r){void 0===e&&(e=!0),this.pos=0,this.len=0,this.mode=r,this.heap=x().subarray(g.HEAP_DATA),this.asm=new g(null,this.heap.buffer),this.pos=0,this.len=0;var n=f.length;if(16!==n&&24!==n&&32!==n)throw new _("illegal key size");var i=new DataView(f.buffer,f.byteOffset,f.byteLength);if(this.asm.set_key(n>>2,i.getUint32(0),i.getUint32(4),i.getUint32(8),i.getUint32(12),16<n?i.getUint32(16):0,16<n?i.getUint32(20):0,24<n?i.getUint32(24):0,24<n?i.getUint32(28):0),void 0!==t){if(16!==t.length)throw new _("illegal iv size");var a=new DataView(t.buffer,t.byteOffset,t.byteLength);this.asm.set_iv(a.getUint32(0),a.getUint32(4),a.getUint32(8),a.getUint32(12))}else this.asm.set_iv(0,0,0,0);this.padding=e}return f.prototype.AES_Encrypt_process=function(f){if(!p(f))throw new TypeError("data isn't of expected type");for(var t=this.asm,e=this.heap,r=g.ENC[this.mode],n=g.HEAP_DATA,i=this.pos,a=this.len,s=0,o=f.length||0,x=0,c=a+o&-16,h=0,u=new Uint8Array(c);0<o;)h=y(e,i+a,f,s,o),a+=h,s+=h,o-=h,h=t.cipher(r,n+i,a),h&&u.set(e.subarray(i,i+h),x),x+=h,h<a?(i+=h,a-=h):(i=0,a=0);return this.pos=i,this.len=a,u},f.prototype.AES_Encrypt_finish=function(){var f=this.asm,t=this.heap,e=g.ENC[this.mode],r=g.HEAP_DATA,n=this.pos,i=this.len,a=16-i%16,s=i;if(this.hasOwnProperty("padding")){if(this.padding){for(var o=0;o<a;++o)t[n+i+o]=a;i+=a,s=i}else if(i%16)throw new _("data length must be a multiple of the block size")}else i+=a;var x=new Uint8Array(s);return i&&f.cipher(e,r+n,i),s&&x.set(t.subarray(n,n+s)),this.pos=0,this.len=0,x},f.prototype.AES_Decrypt_process=function(f){if(!p(f))throw new TypeError("data isn't of expected type");var t=this.asm,e=this.heap,r=g.DEC[this.mode],n=g.HEAP_DATA,i=this.pos,a=this.len,s=0,o=f.length||0,x=0,c=a+o&-16,h=0,u=0;this.padding&&(h=a+o-c||16,c-=h);for(var l=new Uint8Array(c);0<o;)u=y(e,i+a,f,s,o),a+=u,s+=u,o-=u,u=t.cipher(r,n+i,a-(o?0:h)),u&&l.set(e.subarray(i,i+u),x),x+=u,u<a?(i+=u,a-=u):(i=0,a=0);return this.pos=i,this.len=a,l},f.prototype.AES_Decrypt_finish=function(){var f=this.asm,t=this.heap,e=g.DEC[this.mode],r=g.HEAP_DATA,n=this.pos,i=this.len,a=i;if(0<i){if(i%16){if(this.hasOwnProperty("padding"))throw new _("data length must be a multiple of the block size");i+=16-i%16}if(f.cipher(e,r+n,i),this.hasOwnProperty("padding")&&this.padding){var s=t[n+a-1];if(s<1||16<s||a<s)throw new v("bad padding");for(var o=0,x=s;1<x;x--)o|=s^t[n+a-x];if(o)throw new v("bad padding");a-=s}}var c=new Uint8Array(a);return 0<a&&c.set(t.subarray(n,n+a)),this.pos=0,this.len=0,c},f}(),l=function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,t){f.__proto__=t}||function(f,t){for(var e in t)t.hasOwnProperty(e)&&(f[e]=t[e])};return function(f,t){function e(){this.constructor=f}r(f,t),f.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),d=function(r){function n(f,t,e){return void 0===e&&(e=!0),r.call(this,f,t,e,"CBC")||this}return l(n,r),n.encrypt=function(f,t,e,r){return void 0===e&&(e=!0),new n(t,r,e).encrypt(f)},n.decrypt=function(f,t,e,r){return void 0===e&&(e=!0),new n(t,r,e).decrypt(f)},n.prototype.encrypt=function(f){var t=this.AES_Encrypt_process(f),e=this.AES_Encrypt_finish();return c(t,e)},n.prototype.decrypt=function(f){var t=this.AES_Decrypt_process(f),e=this.AES_Decrypt_finish();return c(t,e)},n}(u),w=function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,t){f.__proto__=t}||function(f,t){for(var e in t)t.hasOwnProperty(e)&&(f[e]=t[e])};return function(f,t){function e(){this.constructor=f}r(f,t),f.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),A=65279,m=0xffffffffffff0,E=function(a){function i(f,t,e,r,n){void 0===r&&(r=16);var i=a.call(this,f,void 0,void 0,"CCM")||this;if(i.counter=1,i.dataLength=-1,r<4||16<r||1&r)throw new _("illegal tagSize value");if(i.tagSize=r,i.nonce=t,t.length<8||13<t.length)throw new _("illegal nonce length");if(i.lengthSize=15-t.length,t=new Uint8Array(t.length+1),t[0]=i.lengthSize-1,t.set(i.nonce,1),n<0||m<n||n>Math.pow(2,8*i.lengthSize)-16)throw new _("illegal dataLength value");if(void 0!==e){if(e.length>A)throw new _("illegal adata length");i.adata=e.length?e:void 0}return i.dataLength=n,i.counter=1,i.AES_CCM_calculate_iv(),i.AES_CTR_set_options(t,i.counter,8*i.lengthSize),i}return w(i,a),i.encrypt=function(f,t,e,r,n){return void 0===n&&(n=16),new i(t,e,r,n,f.length).encrypt(f)},i.decrypt=function(f,t,e,r,n){return void 0===n&&(n=16),new i(t,e,r,n,f.length-n).decrypt(f)},i.prototype.encrypt=function(f){this.dataLength=f.length||0;var t=this.AES_CCM_Encrypt_process(f),e=this.AES_CCM_Encrypt_finish(),r=new Uint8Array(t.length+e.length);return t.length&&r.set(t),e.length&&r.set(e,t.length),r},i.prototype.decrypt=function(f){this.dataLength=f.length||0;var t=this.AES_CCM_Decrypt_process(f),e=this.AES_CCM_Decrypt_finish(),r=new Uint8Array(t.length+e.length);return t.length&&r.set(t),e.length&&r.set(e,t.length),r},i.prototype.AES_CCM_calculate_iv=function(){var f=this.nonce,t=this.adata,e=this.tagSize,r=this.lengthSize,n=this.dataLength,i=new Uint8Array(16+(t?2+t.length:0));i[0]=(t?64:0)|e-2<<2|r-1,i.set(f,1),6<r&&(i[9]=n/4294967296>>>16&15),5<r&&(i[10]=n/4294967296>>>8&255),4<r&&(i[11]=n/4294967296&255),3<r&&(i[12]=n>>>24),2<r&&(i[13]=n>>>16&255),i[14]=n>>>8&255,i[15]=255&n,t&&(i[16]=t.length>>>8&255,i[17]=255&t.length,i.set(t,18)),this._cbc_mac_process(i),this.asm.get_state(g.HEAP_DATA);var a=new Uint8Array(this.heap.subarray(0,16)),s=new DataView(a.buffer,a.byteOffset,a.byteLength);this.asm.set_iv(s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12))},i.prototype._cbc_mac_process=function(f){for(var t=this.heap,e=this.asm,r=0,n=f.length||0,i=0;0<n;){for(i=y(t,0,f,r,n);15&i;)t[i++]=0;r+=i,n-=i,e.mac(g.MAC.CBC,g.HEAP_DATA,i)}},i.prototype.AES_CCM_Encrypt_process=function(f){var t=this.asm,e=this.heap,r=0,n=f.length||0,i=this.counter,a=this.pos,s=this.len,o=s+n&-16,x=0,c=0;if(m<(i-1<<4)+s+n)throw new RangeError("counter overflow");for(var h=new Uint8Array(o);0<n;)c=y(e,a+s,f,r,n),s+=c,r+=c,n-=c,c=t.mac(g.MAC.CBC,g.HEAP_DATA+a,s),c=t.cipher(g.ENC.CTR,g.HEAP_DATA+a,c),c&&h.set(e.subarray(a,a+c),x),i+=c>>>4,x+=c,c<s?(a+=c,s-=c):(a=0,s=0);return this.counter=i,this.pos=a,this.len=s,h},i.prototype.AES_CCM_Encrypt_finish=function(){for(var f=this.asm,t=this.heap,e=this.tagSize,r=this.pos,n=this.len,i=new Uint8Array(n+e),a=n;15&a;a++)t[r+a]=0;return f.mac(g.MAC.CBC,g.HEAP_DATA+r,a),f.cipher(g.ENC.CTR,g.HEAP_DATA+r,a),n&&i.set(t.subarray(r,r+n)),f.set_counter(0,0,0,0),f.get_iv(g.HEAP_DATA),f.cipher(g.ENC.CTR,g.HEAP_DATA,16),i.set(t.subarray(0,e),n),this.counter=1,this.pos=0,this.len=0,i},i.prototype.AES_CCM_Decrypt_process=function(f){var t=0,e=f.length||0,r=this.asm,n=this.heap,i=this.counter,a=this.tagSize,s=this.pos,o=this.len,x=0,c=a<o+e?o+e-a&-16:0,h=o+e-c,u=0;if(m<(i-1<<4)+o+e)throw new RangeError("counter overflow");for(var l=new Uint8Array(c);h<e;)u=y(n,s+o,f,t,e-h),o+=u,t+=u,e-=u,u=r.cipher(g.DEC.CTR,g.HEAP_DATA+s,u),u=r.mac(g.MAC.CBC,g.HEAP_DATA+s,u),u&&l.set(n.subarray(s,s+u),x),i+=u>>>4,x+=u,s=0,o=0;return 0<e&&(o+=y(n,0,f,t,e)),this.counter=i,this.pos=s,this.len=o,l},i.prototype.AES_CCM_Decrypt_finish=function(){var f=this.asm,t=this.heap,e=this.tagSize,r=this.pos,n=this.len,i=n-e;if(n<e)throw new b("authentication tag not found");var a=new Uint8Array(i),s=new Uint8Array(t.subarray(r+i,r+n));f.cipher(g.DEC.CTR,g.HEAP_DATA+r,i+15&-16),a.set(t.subarray(r,r+i));for(var o=i;15&o;o++)t[r+o]=0;f.mac(g.MAC.CBC,g.HEAP_DATA+r,o),f.set_counter(0,0,0,0),f.get_iv(g.HEAP_DATA),f.cipher(g.ENC.CTR,g.HEAP_DATA,16);for(var x=0,c=0;c<e;++c)x|=s[c]^t[c];if(x)throw new v("data integrity check failed");return this.counter=1,this.pos=0,this.len=0,a},i.prototype.AES_CTR_set_options=function(f,t,e){if(e<8||48<e)throw new _("illegal counter size");var r=Math.pow(2,e)-1;this.asm.set_mask(0,0,r/4294967296|0,0|r);var n=f.length;if(!n||16<n)throw new _("illegal nonce size");this.nonce=f;var i=new DataView(new ArrayBuffer(16));if(new Uint8Array(i.buffer).set(f),this.asm.set_nonce(i.getUint32(0),i.getUint32(4),i.getUint32(8),i.getUint32(12)),t<0||t>=Math.pow(2,e))throw new _("illegal counter value");this.counter=t,this.asm.set_counter(0,0,t/4294967296|0,0|t)},i}(u),C=function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,t){f.__proto__=t}||function(f,t){for(var e in t)t.hasOwnProperty(e)&&(f[e]=t[e])};return function(f,t){function e(){this.constructor=f}r(f,t),f.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),S=function(r){function n(f,t){var e=r.call(this,f,t,!0,"CFB")||this;return delete e.padding,e}return C(n,r),n.encrypt=function(f,t,e){return new n(t,e).encrypt(f)},n.decrypt=function(f,t,e){return new n(t,e).decrypt(f)},n.prototype.encrypt=function(f){var t=this.AES_Encrypt_process(f),e=this.AES_Encrypt_finish();return c(t,e)},n.prototype.decrypt=function(f){var t=this.AES_Decrypt_process(f),e=this.AES_Decrypt_finish();return c(t,e)},n}(u),U=function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,t){f.__proto__=t}||function(f,t){for(var e in t)t.hasOwnProperty(e)&&(f[e]=t[e])};return function(f,t){function e(){this.constructor=f}r(f,t),f.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),M=function(e){function r(f,t){return void 0===t&&(t=!1),e.call(this,f,void 0,t,"ECB")||this}return U(r,e),r.encrypt=function(f,t,e){return void 0===e&&(e=!1),new r(t,e).encrypt(f)},r.decrypt=function(f,t,e){return void 0===e&&(e=!1),new r(t,e).decrypt(f)},r.prototype.encrypt=function(f){var t=this.AES_Encrypt_process(f),e=this.AES_Encrypt_finish();return c(t,e)},r.prototype.decrypt=function(f){var t=this.AES_Decrypt_process(f),e=this.AES_Decrypt_finish();return c(t,e)},r}(u);function O(f){for(var t=128&f[0],e=0;e<15;e++)f[e]=f[e]<<1^(128&f[e+1]?1:0);f[15]=f[15]<<1^(t?135:0)}var H=function(){function e(f){this.bufferLength=0,this.k=new M(f).encrypt(new Uint8Array(16)),O(this.k),this.cbc=new d(f,new Uint8Array(16),!1),this.buffer=new Uint8Array(16),this.result=null}return e.bytes=function(f,t){return new e(t).process(f).finish().result},e.prototype.process=function(f){if(16<this.bufferLength+f.length){this.cbc.encrypt(this.buffer.subarray(0,this.bufferLength));var t=(this.bufferLength+f.length-1&-16)-this.bufferLength;this.cbc.encrypt(f.subarray(0,t)),this.buffer.set(f.subarray(t)),this.bufferLength=f.length-t}else this.buffer.set(f,this.bufferLength),this.bufferLength+=f.length;return this},e.prototype.finish=function(){if(16!==this.bufferLength){this.buffer[this.bufferLength]=128;for(var f=this.bufferLength+1;f<16;f++)this.buffer[f]=0;O(this.k)}for(f=0;f<16;f++)this.buffer[f]^=this.k[f];return this.result=this.cbc.encrypt(this.buffer),this},e}(),L=function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,t){f.__proto__=t}||function(f,t){for(var e in t)t.hasOwnProperty(e)&&(f[e]=t[e])};return function(f,t){function e(){this.constructor=f}r(f,t),f.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),k=function(r){function n(f,t){var e=r.call(this,f,void 0,!1,"CTR")||this;return delete e.padding,e.AES_CTR_set_options(t),e}return L(n,r),n.encrypt=function(f,t,e){return new n(t,e).encrypt(f)},n.decrypt=function(f,t,e){return new n(t,e).encrypt(f)},n.prototype.encrypt=function(f){var t=this.AES_Encrypt_process(f),e=this.AES_Encrypt_finish();return c(t,e)},n.prototype.decrypt=function(f){var t=this.AES_Encrypt_process(f),e=this.AES_Encrypt_finish();return c(t,e)},n.prototype.AES_CTR_set_options=function(f,t,e){if(void 0!==e){if(e<8||48<e)throw new _("illegal counter size");var r=Math.pow(2,e)-1;this.asm.set_mask(0,0,r/4294967296|0,0|r)}else e=48,this.asm.set_mask(0,0,65535,4294967295);if(void 0===f)throw new Error("nonce is required");var n=f.length;if(!n||16<n)throw new _("illegal nonce size");var i=new DataView(new ArrayBuffer(16));if(new Uint8Array(i.buffer).set(f),this.asm.set_nonce(i.getUint32(0),i.getUint32(4),i.getUint32(8),i.getUint32(12)),void 0!==t){if(t<0||t>=Math.pow(2,e))throw new _("illegal counter value");this.asm.set_counter(0,0,t/4294967296|0,0|t)}},n}(u),P=function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,t){f.__proto__=t}||function(f,t){for(var e in t)t.hasOwnProperty(e)&&(f[e]=t[e])};return function(f,t){function e(){this.constructor=f}r(f,t),f.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),D=68719476704,R=function(o){function i(f,t,e,r){void 0===r&&(r=16);var n=o.call(this,f,void 0,!1,"CTR")||this;if(n.tagSize=r,n.gamma0=0,n.counter=1,n.asm.gcm_init(),n.tagSize<4||16<n.tagSize)throw new _("illegal tagSize value");var i=t.length||0,a=new Uint8Array(16);12!==i?(n._gcm_mac_process(t),n.heap[0]=0,n.heap[1]=0,n.heap[2]=0,n.heap[3]=0,n.heap[4]=0,n.heap[5]=0,n.heap[6]=0,n.heap[7]=0,n.heap[8]=0,n.heap[9]=0,n.heap[10]=0,n.heap[11]=i>>>29,n.heap[12]=i>>>21&255,n.heap[13]=i>>>13&255,n.heap[14]=i>>>5&255,n.heap[15]=i<<3&255,n.asm.mac(g.MAC.GCM,g.HEAP_DATA,16),n.asm.get_iv(g.HEAP_DATA),n.asm.set_iv(0,0,0,0),a.set(n.heap.subarray(0,16))):(a.set(t),a[15]=1);var s=new DataView(a.buffer);if(n.gamma0=s.getUint32(12),n.asm.set_nonce(s.getUint32(0),s.getUint32(4),s.getUint32(8),0),n.asm.set_mask(0,0,0,4294967295),void 0!==e){if(e.length>D)throw new _("illegal adata length");e.length?(n.adata=e,n._gcm_mac_process(e)):n.adata=void 0}else n.adata=void 0;if(n.counter<1||4294967295<n.counter)throw new RangeError("counter must be a positive 32-bit integer");return n.asm.set_counter(0,0,0,n.gamma0+n.counter|0),n}return P(i,o),i.encrypt=function(f,t,e,r,n){return new i(t,e,r,n).encrypt(f)},i.decrypt=function(f,t,e,r,n){return new i(t,e,r,n).decrypt(f)},i.prototype.encrypt=function(f){return this.AES_GCM_encrypt(f)},i.prototype.decrypt=function(f){return this.AES_GCM_decrypt(f)},i.prototype.AES_GCM_Encrypt_process=function(f){var t=0,e=f.length||0,r=this.asm,n=this.heap,i=this.counter,a=this.pos,s=this.len,o=0,x=s+e&-16,c=0;if(D<(i-1<<4)+s+e)throw new RangeError("counter overflow");for(var h=new Uint8Array(x);0<e;)c=y(n,a+s,f,t,e),s+=c,t+=c,e-=c,c=r.cipher(g.ENC.CTR,g.HEAP_DATA+a,s),c=r.mac(g.MAC.GCM,g.HEAP_DATA+a,c),c&&h.set(n.subarray(a,a+c),o),i+=c>>>4,o+=c,c<s?(a+=c,s-=c):(a=0,s=0);return this.counter=i,this.pos=a,this.len=s,h},i.prototype.AES_GCM_Encrypt_finish=function(){var f=this.asm,t=this.heap,e=this.counter,r=this.tagSize,n=this.adata,i=this.pos,a=this.len,s=new Uint8Array(a+r);f.cipher(g.ENC.CTR,g.HEAP_DATA+i,a+15&-16),a&&s.set(t.subarray(i,i+a));for(var o=a;15&o;o++)t[i+o]=0;f.mac(g.MAC.GCM,g.HEAP_DATA+i,o);var x=void 0!==n?n.length:0,c=(e-1<<4)+a;return t[0]=0,t[1]=0,t[2]=0,t[3]=x>>>29,t[4]=x>>>21,t[5]=x>>>13&255,t[6]=x>>>5&255,t[7]=x<<3&255,t[8]=t[9]=t[10]=0,t[11]=c>>>29,t[12]=c>>>21&255,t[13]=c>>>13&255,t[14]=c>>>5&255,t[15]=c<<3&255,f.mac(g.MAC.GCM,g.HEAP_DATA,16),f.get_iv(g.HEAP_DATA),f.set_counter(0,0,0,this.gamma0),f.cipher(g.ENC.CTR,g.HEAP_DATA,16),s.set(t.subarray(0,r),a),this.counter=1,this.pos=0,this.len=0,s},i.prototype.AES_GCM_Decrypt_process=function(f){var t=0,e=f.length||0,r=this.asm,n=this.heap,i=this.counter,a=this.tagSize,s=this.pos,o=this.len,x=0,c=a<o+e?o+e-a&-16:0,h=o+e-c,u=0;if(D<(i-1<<4)+o+e)throw new RangeError("counter overflow");for(var l=new Uint8Array(c);h<e;)u=y(n,s+o,f,t,e-h),o+=u,t+=u,e-=u,u=r.mac(g.MAC.GCM,g.HEAP_DATA+s,u),u=r.cipher(g.DEC.CTR,g.HEAP_DATA+s,u),u&&l.set(n.subarray(s,s+u),x),i+=u>>>4,x+=u,s=0,o=0;return 0<e&&(o+=y(n,0,f,t,e)),this.counter=i,this.pos=s,this.len=o,l},i.prototype.AES_GCM_Decrypt_finish=function(){var f=this.asm,t=this.heap,e=this.tagSize,r=this.adata,n=this.counter,i=this.pos,a=this.len,s=a-e;if(a<e)throw new b("authentication tag not found");for(var o=new Uint8Array(s),x=new Uint8Array(t.subarray(i+s,i+a)),c=s;15&c;c++)t[i+c]=0;f.mac(g.MAC.GCM,g.HEAP_DATA+i,c),f.cipher(g.DEC.CTR,g.HEAP_DATA+i,c),s&&o.set(t.subarray(i,i+s));var h=void 0!==r?r.length:0,u=(n-1<<4)+a-e;t[0]=0,t[1]=0,t[2]=0,t[3]=h>>>29,t[4]=h>>>21,t[5]=h>>>13&255,t[6]=h>>>5&255,t[7]=h<<3&255,t[8]=t[9]=t[10]=0,t[11]=u>>>29,t[12]=u>>>21&255,t[13]=u>>>13&255,t[14]=u>>>5&255,t[15]=u<<3&255,f.mac(g.MAC.GCM,g.HEAP_DATA,16),f.get_iv(g.HEAP_DATA),f.set_counter(0,0,0,this.gamma0),f.cipher(g.ENC.CTR,g.HEAP_DATA,16);for(var l=0,p=0;p<e;++p)l|=x[p]^t[p];if(l)throw new v("data integrity check failed");return this.counter=1,this.pos=0,this.len=0,o},i.prototype.AES_GCM_decrypt=function(f){var t=this.AES_GCM_Decrypt_process(f),e=this.AES_GCM_Decrypt_finish(),r=new Uint8Array(t.length+e.length);return t.length&&r.set(t),e.length&&r.set(e,t.length),r},i.prototype.AES_GCM_encrypt=function(f){var t=this.AES_GCM_Encrypt_process(f),e=this.AES_GCM_Encrypt_finish(),r=new Uint8Array(t.length+e.length);return t.length&&r.set(t),e.length&&r.set(e,t.length),r},i.prototype._gcm_mac_process=function(f){for(var t=this.heap,e=this.asm,r=0,n=f.length||0,i=0;0<n;){for(i=y(t,0,f,r,n),r+=i,n-=i;15&i;)t[i++]=0;e.mac(g.MAC.GCM,g.HEAP_DATA,i)}},i}(u),T=function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,t){f.__proto__=t}||function(f,t){for(var e in t)t.hasOwnProperty(e)&&(f[e]=t[e])};return function(f,t){function e(){this.constructor=f}r(f,t),f.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),Z=function(e){function r(f,t){return e.call(this,f,t,!1,"OFB")||this}return T(r,e),r.encrypt=function(f,t,e){return new r(t,e).encrypt(f)},r.decrypt=function(f,t,e){return new r(t,e).decrypt(f)},r.prototype.encrypt=function(f){var t=this.AES_Encrypt_process(f),e=this.AES_Encrypt_finish();return c(t,e)},r.prototype.decrypt=function(f){var t=this.AES_Decrypt_process(f),e=this.AES_Decrypt_finish();return c(t,e)},r}(u),B=function(f,t,e){"use asm";var r=0;var pf=new f.Uint32Array(e);var yf=f.Math.imul;function n(f){f=f|0;r=f=f+31&-32;return f|0}function d(f){f=f|0;var t=0;t=r;r=t+(f+31&-32)|0;return t|0}function w(f){f=f|0;r=r-(f+31&-32)|0}function A(f,t,e){f=f|0;t=t|0;e=e|0;var r=0;if((t|0)>(e|0)){for(;(r|0)<(f|0);r=r+4|0){pf[e+r>>2]=pf[t+r>>2]}}else{for(r=f-4|0;(r|0)>=0;r=r-4|0){pf[e+r>>2]=pf[t+r>>2]}}}function m(f,t,e){f=f|0;t=t|0;e=e|0;var r=0;for(;(r|0)<(f|0);r=r+4|0){pf[e+r>>2]=t}}function i(f,t,e,r){f=f|0;t=t|0;e=e|0;r=r|0;var n=0,i=0,a=0,s=0,o=0;if((r|0)<=0)r=t;if((r|0)<(t|0))t=r;i=1;for(;(o|0)<(t|0);o=o+4|0){n=~pf[f+o>>2];a=(n&0xffff)+i|0;s=(n>>>16)+(a>>>16)|0;pf[e+o>>2]=s<<16|a&0xffff;i=s>>>16}for(;(o|0)<(r|0);o=o+4|0){pf[e+o>>2]=i-1|0}return i|0}function E(f,t,e,r){f=f|0;t=t|0;e=e|0;r=r|0;var n=0,i=0,a=0;if((t|0)>(r|0)){for(a=t-4|0;(a|0)>=(r|0);a=a-4|0){if(pf[f+a>>2]|0)return 1}}else{for(a=r-4|0;(a|0)>=(t|0);a=a-4|0){if(pf[e+a>>2]|0)return-1}}for(;(a|0)>=0;a=a-4|0){n=pf[f+a>>2]|0,i=pf[e+a>>2]|0;if(n>>>0<i>>>0)return-1;if(n>>>0>i>>>0)return 1}return 0}function a(f,t){f=f|0;t=t|0;var e=0;for(e=t-4|0;(e|0)>=0;e=e-4|0){if(pf[f+e>>2]|0)return e+4|0}return 0}function s(f,t,e,r,n,i){f=f|0;t=t|0;e=e|0;r=r|0;n=n|0;i=i|0;var a=0,s=0,o=0,x=0,c=0,h=0;if((t|0)<(r|0)){x=f,f=e,e=x;x=t,t=r,r=x}if((i|0)<=0)i=t+4|0;if((i|0)<(r|0))t=r=i;for(;(h|0)<(r|0);h=h+4|0){a=pf[f+h>>2]|0;s=pf[e+h>>2]|0;x=((a&0xffff)+(s&0xffff)|0)+o|0;c=((a>>>16)+(s>>>16)|0)+(x>>>16)|0;pf[n+h>>2]=x&0xffff|c<<16;o=c>>>16}for(;(h|0)<(t|0);h=h+4|0){a=pf[f+h>>2]|0;x=(a&0xffff)+o|0;c=(a>>>16)+(x>>>16)|0;pf[n+h>>2]=x&0xffff|c<<16;o=c>>>16}for(;(h|0)<(i|0);h=h+4|0){pf[n+h>>2]=o|0;o=0}return o|0}function C(f,t,e,r,n,i){f=f|0;t=t|0;e=e|0;r=r|0;n=n|0;i=i|0;var a=0,s=0,o=0,x=0,c=0,h=0;if((i|0)<=0)i=(t|0)>(r|0)?t+4|0:r+4|0;if((i|0)<(t|0))t=i;if((i|0)<(r|0))r=i;if((t|0)<(r|0)){for(;(h|0)<(t|0);h=h+4|0){a=pf[f+h>>2]|0;s=pf[e+h>>2]|0;x=((a&0xffff)-(s&0xffff)|0)+o|0;c=((a>>>16)-(s>>>16)|0)+(x>>16)|0;pf[n+h>>2]=x&0xffff|c<<16;o=c>>16}for(;(h|0)<(r|0);h=h+4|0){s=pf[e+h>>2]|0;x=o-(s&0xffff)|0;c=(x>>16)-(s>>>16)|0;pf[n+h>>2]=x&0xffff|c<<16;o=c>>16}}else{for(;(h|0)<(r|0);h=h+4|0){a=pf[f+h>>2]|0;s=pf[e+h>>2]|0;x=((a&0xffff)-(s&0xffff)|0)+o|0;c=((a>>>16)-(s>>>16)|0)+(x>>16)|0;pf[n+h>>2]=x&0xffff|c<<16;o=c>>16}for(;(h|0)<(t|0);h=h+4|0){a=pf[f+h>>2]|0;x=(a&0xffff)+o|0;c=(a>>>16)+(x>>16)|0;pf[n+h>>2]=x&0xffff|c<<16;o=c>>16}}for(;(h|0)<(i|0);h=h+4|0){pf[n+h>>2]=o|0}return o|0}function o(f,t,e,r,n,i){f=f|0;t=t|0;e=e|0;r=r|0;n=n|0;i=i|0;var a=0,s=0,o=0,x=0,c=0,h=0,u=0,l=0,p=0,y=0,b=0,g=0,_=0,v=0,d=0,w=0,A=0,m=0,E=0,C=0,S=0,U=0,M=0,O=0,H=0,L=0,k=0,P=0,D=0,R=0,T=0,Z=0,B=0,I=0,z=0,G=0,N=0,j=0,F=0,q=0,V=0,K=0,W=0,J=0,Q=0,X=0,Y=0,$$=0,ff=0,tf=0,ef=0,rf=0,nf=0,af=0,sf=0,of=0,xf=0;if((t|0)>(r|0)){ff=f,tf=t;f=e,t=r;e=ff,r=tf}rf=t+r|0;if((i|0)>(rf|0)|(i|0)<=0)i=rf;if((i|0)<(t|0))t=i;if((i|0)<(r|0))r=i;for(;(nf|0)<(t|0);nf=nf+32|0){af=f+nf|0;p=pf[(af|0)>>2]|0,y=pf[(af|4)>>2]|0,b=pf[(af|8)>>2]|0,g=pf[(af|12)>>2]|0,_=pf[(af|16)>>2]|0,v=pf[(af|20)>>2]|0,d=pf[(af|24)>>2]|0,w=pf[(af|28)>>2]|0,a=p&0xffff,s=y&0xffff,o=b&0xffff,x=g&0xffff,c=_&0xffff,h=v&0xffff,u=d&0xffff,l=w&0xffff,p=p>>>16,y=y>>>16,b=b>>>16,g=g>>>16,_=_>>>16,v=v>>>16,d=d>>>16,w=w>>>16;V=K=W=J=Q=X=Y=$$=0;for(sf=0;(sf|0)<(r|0);sf=sf+32|0){of=e+sf|0;xf=n+(nf+sf|0)|0;H=pf[(of|0)>>2]|0,L=pf[(of|4)>>2]|0,k=pf[(of|8)>>2]|0,P=pf[(of|12)>>2]|0,D=pf[(of|16)>>2]|0,R=pf[(of|20)>>2]|0,T=pf[(of|24)>>2]|0,Z=pf[(of|28)>>2]|0,A=H&0xffff,m=L&0xffff,E=k&0xffff,C=P&0xffff,S=D&0xffff,U=R&0xffff,M=T&0xffff,O=Z&0xffff,H=H>>>16,L=L>>>16,k=k>>>16,P=P>>>16,D=D>>>16,R=R>>>16,T=T>>>16,Z=Z>>>16;B=pf[(xf|0)>>2]|0,I=pf[(xf|4)>>2]|0,z=pf[(xf|8)>>2]|0,G=pf[(xf|12)>>2]|0,N=pf[(xf|16)>>2]|0,j=pf[(xf|20)>>2]|0,F=pf[(xf|24)>>2]|0,q=pf[(xf|28)>>2]|0;ff=((yf(a,A)|0)+(V&0xffff)|0)+(B&0xffff)|0;tf=((yf(p,A)|0)+(V>>>16)|0)+(B>>>16)|0;ef=((yf(a,H)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(p,H)|0)+(tf>>>16)|0)+(ef>>>16)|0;B=ef<<16|ff&0xffff;ff=((yf(a,m)|0)+(rf&0xffff)|0)+(I&0xffff)|0;tf=((yf(p,m)|0)+(rf>>>16)|0)+(I>>>16)|0;ef=((yf(a,L)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(p,L)|0)+(tf>>>16)|0)+(ef>>>16)|0;I=ef<<16|ff&0xffff;ff=((yf(a,E)|0)+(rf&0xffff)|0)+(z&0xffff)|0;tf=((yf(p,E)|0)+(rf>>>16)|0)+(z>>>16)|0;ef=((yf(a,k)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(p,k)|0)+(tf>>>16)|0)+(ef>>>16)|0;z=ef<<16|ff&0xffff;ff=((yf(a,C)|0)+(rf&0xffff)|0)+(G&0xffff)|0;tf=((yf(p,C)|0)+(rf>>>16)|0)+(G>>>16)|0;ef=((yf(a,P)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(p,P)|0)+(tf>>>16)|0)+(ef>>>16)|0;G=ef<<16|ff&0xffff;ff=((yf(a,S)|0)+(rf&0xffff)|0)+(N&0xffff)|0;tf=((yf(p,S)|0)+(rf>>>16)|0)+(N>>>16)|0;ef=((yf(a,D)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(p,D)|0)+(tf>>>16)|0)+(ef>>>16)|0;N=ef<<16|ff&0xffff;ff=((yf(a,U)|0)+(rf&0xffff)|0)+(j&0xffff)|0;tf=((yf(p,U)|0)+(rf>>>16)|0)+(j>>>16)|0;ef=((yf(a,R)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(p,R)|0)+(tf>>>16)|0)+(ef>>>16)|0;j=ef<<16|ff&0xffff;ff=((yf(a,M)|0)+(rf&0xffff)|0)+(F&0xffff)|0;tf=((yf(p,M)|0)+(rf>>>16)|0)+(F>>>16)|0;ef=((yf(a,T)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(p,T)|0)+(tf>>>16)|0)+(ef>>>16)|0;F=ef<<16|ff&0xffff;ff=((yf(a,O)|0)+(rf&0xffff)|0)+(q&0xffff)|0;tf=((yf(p,O)|0)+(rf>>>16)|0)+(q>>>16)|0;ef=((yf(a,Z)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(p,Z)|0)+(tf>>>16)|0)+(ef>>>16)|0;q=ef<<16|ff&0xffff;V=rf;ff=((yf(s,A)|0)+(K&0xffff)|0)+(I&0xffff)|0;tf=((yf(y,A)|0)+(K>>>16)|0)+(I>>>16)|0;ef=((yf(s,H)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(y,H)|0)+(tf>>>16)|0)+(ef>>>16)|0;I=ef<<16|ff&0xffff;ff=((yf(s,m)|0)+(rf&0xffff)|0)+(z&0xffff)|0;tf=((yf(y,m)|0)+(rf>>>16)|0)+(z>>>16)|0;ef=((yf(s,L)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(y,L)|0)+(tf>>>16)|0)+(ef>>>16)|0;z=ef<<16|ff&0xffff;ff=((yf(s,E)|0)+(rf&0xffff)|0)+(G&0xffff)|0;tf=((yf(y,E)|0)+(rf>>>16)|0)+(G>>>16)|0;ef=((yf(s,k)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(y,k)|0)+(tf>>>16)|0)+(ef>>>16)|0;G=ef<<16|ff&0xffff;ff=((yf(s,C)|0)+(rf&0xffff)|0)+(N&0xffff)|0;tf=((yf(y,C)|0)+(rf>>>16)|0)+(N>>>16)|0;ef=((yf(s,P)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(y,P)|0)+(tf>>>16)|0)+(ef>>>16)|0;N=ef<<16|ff&0xffff;ff=((yf(s,S)|0)+(rf&0xffff)|0)+(j&0xffff)|0;tf=((yf(y,S)|0)+(rf>>>16)|0)+(j>>>16)|0;ef=((yf(s,D)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(y,D)|0)+(tf>>>16)|0)+(ef>>>16)|0;j=ef<<16|ff&0xffff;ff=((yf(s,U)|0)+(rf&0xffff)|0)+(F&0xffff)|0;tf=((yf(y,U)|0)+(rf>>>16)|0)+(F>>>16)|0;ef=((yf(s,R)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(y,R)|0)+(tf>>>16)|0)+(ef>>>16)|0;F=ef<<16|ff&0xffff;ff=((yf(s,M)|0)+(rf&0xffff)|0)+(q&0xffff)|0;tf=((yf(y,M)|0)+(rf>>>16)|0)+(q>>>16)|0;ef=((yf(s,T)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(y,T)|0)+(tf>>>16)|0)+(ef>>>16)|0;q=ef<<16|ff&0xffff;ff=((yf(s,O)|0)+(rf&0xffff)|0)+(V&0xffff)|0;tf=((yf(y,O)|0)+(rf>>>16)|0)+(V>>>16)|0;ef=((yf(s,Z)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(y,Z)|0)+(tf>>>16)|0)+(ef>>>16)|0;V=ef<<16|ff&0xffff;K=rf;ff=((yf(o,A)|0)+(W&0xffff)|0)+(z&0xffff)|0;tf=((yf(b,A)|0)+(W>>>16)|0)+(z>>>16)|0;ef=((yf(o,H)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(b,H)|0)+(tf>>>16)|0)+(ef>>>16)|0;z=ef<<16|ff&0xffff;ff=((yf(o,m)|0)+(rf&0xffff)|0)+(G&0xffff)|0;tf=((yf(b,m)|0)+(rf>>>16)|0)+(G>>>16)|0;ef=((yf(o,L)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(b,L)|0)+(tf>>>16)|0)+(ef>>>16)|0;G=ef<<16|ff&0xffff;ff=((yf(o,E)|0)+(rf&0xffff)|0)+(N&0xffff)|0;tf=((yf(b,E)|0)+(rf>>>16)|0)+(N>>>16)|0;ef=((yf(o,k)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(b,k)|0)+(tf>>>16)|0)+(ef>>>16)|0;N=ef<<16|ff&0xffff;ff=((yf(o,C)|0)+(rf&0xffff)|0)+(j&0xffff)|0;tf=((yf(b,C)|0)+(rf>>>16)|0)+(j>>>16)|0;ef=((yf(o,P)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(b,P)|0)+(tf>>>16)|0)+(ef>>>16)|0;j=ef<<16|ff&0xffff;ff=((yf(o,S)|0)+(rf&0xffff)|0)+(F&0xffff)|0;tf=((yf(b,S)|0)+(rf>>>16)|0)+(F>>>16)|0;ef=((yf(o,D)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(b,D)|0)+(tf>>>16)|0)+(ef>>>16)|0;F=ef<<16|ff&0xffff;ff=((yf(o,U)|0)+(rf&0xffff)|0)+(q&0xffff)|0;tf=((yf(b,U)|0)+(rf>>>16)|0)+(q>>>16)|0;ef=((yf(o,R)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(b,R)|0)+(tf>>>16)|0)+(ef>>>16)|0;q=ef<<16|ff&0xffff;ff=((yf(o,M)|0)+(rf&0xffff)|0)+(V&0xffff)|0;tf=((yf(b,M)|0)+(rf>>>16)|0)+(V>>>16)|0;ef=((yf(o,T)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(b,T)|0)+(tf>>>16)|0)+(ef>>>16)|0;V=ef<<16|ff&0xffff;ff=((yf(o,O)|0)+(rf&0xffff)|0)+(K&0xffff)|0;tf=((yf(b,O)|0)+(rf>>>16)|0)+(K>>>16)|0;ef=((yf(o,Z)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(b,Z)|0)+(tf>>>16)|0)+(ef>>>16)|0;K=ef<<16|ff&0xffff;W=rf;ff=((yf(x,A)|0)+(J&0xffff)|0)+(G&0xffff)|0;tf=((yf(g,A)|0)+(J>>>16)|0)+(G>>>16)|0;ef=((yf(x,H)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(g,H)|0)+(tf>>>16)|0)+(ef>>>16)|0;G=ef<<16|ff&0xffff;ff=((yf(x,m)|0)+(rf&0xffff)|0)+(N&0xffff)|0;tf=((yf(g,m)|0)+(rf>>>16)|0)+(N>>>16)|0;ef=((yf(x,L)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(g,L)|0)+(tf>>>16)|0)+(ef>>>16)|0;N=ef<<16|ff&0xffff;ff=((yf(x,E)|0)+(rf&0xffff)|0)+(j&0xffff)|0;tf=((yf(g,E)|0)+(rf>>>16)|0)+(j>>>16)|0;ef=((yf(x,k)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(g,k)|0)+(tf>>>16)|0)+(ef>>>16)|0;j=ef<<16|ff&0xffff;ff=((yf(x,C)|0)+(rf&0xffff)|0)+(F&0xffff)|0;tf=((yf(g,C)|0)+(rf>>>16)|0)+(F>>>16)|0;ef=((yf(x,P)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(g,P)|0)+(tf>>>16)|0)+(ef>>>16)|0;F=ef<<16|ff&0xffff;ff=((yf(x,S)|0)+(rf&0xffff)|0)+(q&0xffff)|0;tf=((yf(g,S)|0)+(rf>>>16)|0)+(q>>>16)|0;ef=((yf(x,D)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(g,D)|0)+(tf>>>16)|0)+(ef>>>16)|0;q=ef<<16|ff&0xffff;ff=((yf(x,U)|0)+(rf&0xffff)|0)+(V&0xffff)|0;tf=((yf(g,U)|0)+(rf>>>16)|0)+(V>>>16)|0;ef=((yf(x,R)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(g,R)|0)+(tf>>>16)|0)+(ef>>>16)|0;V=ef<<16|ff&0xffff;ff=((yf(x,M)|0)+(rf&0xffff)|0)+(K&0xffff)|0;tf=((yf(g,M)|0)+(rf>>>16)|0)+(K>>>16)|0;ef=((yf(x,T)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(g,T)|0)+(tf>>>16)|0)+(ef>>>16)|0;K=ef<<16|ff&0xffff;ff=((yf(x,O)|0)+(rf&0xffff)|0)+(W&0xffff)|0;tf=((yf(g,O)|0)+(rf>>>16)|0)+(W>>>16)|0;ef=((yf(x,Z)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(g,Z)|0)+(tf>>>16)|0)+(ef>>>16)|0;W=ef<<16|ff&0xffff;J=rf;ff=((yf(c,A)|0)+(Q&0xffff)|0)+(N&0xffff)|0;tf=((yf(_,A)|0)+(Q>>>16)|0)+(N>>>16)|0;ef=((yf(c,H)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(_,H)|0)+(tf>>>16)|0)+(ef>>>16)|0;N=ef<<16|ff&0xffff;ff=((yf(c,m)|0)+(rf&0xffff)|0)+(j&0xffff)|0;tf=((yf(_,m)|0)+(rf>>>16)|0)+(j>>>16)|0;ef=((yf(c,L)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(_,L)|0)+(tf>>>16)|0)+(ef>>>16)|0;j=ef<<16|ff&0xffff;ff=((yf(c,E)|0)+(rf&0xffff)|0)+(F&0xffff)|0;tf=((yf(_,E)|0)+(rf>>>16)|0)+(F>>>16)|0;ef=((yf(c,k)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(_,k)|0)+(tf>>>16)|0)+(ef>>>16)|0;F=ef<<16|ff&0xffff;ff=((yf(c,C)|0)+(rf&0xffff)|0)+(q&0xffff)|0;tf=((yf(_,C)|0)+(rf>>>16)|0)+(q>>>16)|0;ef=((yf(c,P)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(_,P)|0)+(tf>>>16)|0)+(ef>>>16)|0;q=ef<<16|ff&0xffff;ff=((yf(c,S)|0)+(rf&0xffff)|0)+(V&0xffff)|0;tf=((yf(_,S)|0)+(rf>>>16)|0)+(V>>>16)|0;ef=((yf(c,D)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(_,D)|0)+(tf>>>16)|0)+(ef>>>16)|0;V=ef<<16|ff&0xffff;ff=((yf(c,U)|0)+(rf&0xffff)|0)+(K&0xffff)|0;tf=((yf(_,U)|0)+(rf>>>16)|0)+(K>>>16)|0;ef=((yf(c,R)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(_,R)|0)+(tf>>>16)|0)+(ef>>>16)|0;K=ef<<16|ff&0xffff;ff=((yf(c,M)|0)+(rf&0xffff)|0)+(W&0xffff)|0;tf=((yf(_,M)|0)+(rf>>>16)|0)+(W>>>16)|0;ef=((yf(c,T)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(_,T)|0)+(tf>>>16)|0)+(ef>>>16)|0;W=ef<<16|ff&0xffff;ff=((yf(c,O)|0)+(rf&0xffff)|0)+(J&0xffff)|0;tf=((yf(_,O)|0)+(rf>>>16)|0)+(J>>>16)|0;ef=((yf(c,Z)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(_,Z)|0)+(tf>>>16)|0)+(ef>>>16)|0;J=ef<<16|ff&0xffff;Q=rf;ff=((yf(h,A)|0)+(X&0xffff)|0)+(j&0xffff)|0;tf=((yf(v,A)|0)+(X>>>16)|0)+(j>>>16)|0;ef=((yf(h,H)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(v,H)|0)+(tf>>>16)|0)+(ef>>>16)|0;j=ef<<16|ff&0xffff;ff=((yf(h,m)|0)+(rf&0xffff)|0)+(F&0xffff)|0;tf=((yf(v,m)|0)+(rf>>>16)|0)+(F>>>16)|0;ef=((yf(h,L)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(v,L)|0)+(tf>>>16)|0)+(ef>>>16)|0;F=ef<<16|ff&0xffff;ff=((yf(h,E)|0)+(rf&0xffff)|0)+(q&0xffff)|0;tf=((yf(v,E)|0)+(rf>>>16)|0)+(q>>>16)|0;ef=((yf(h,k)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(v,k)|0)+(tf>>>16)|0)+(ef>>>16)|0;q=ef<<16|ff&0xffff;ff=((yf(h,C)|0)+(rf&0xffff)|0)+(V&0xffff)|0;tf=((yf(v,C)|0)+(rf>>>16)|0)+(V>>>16)|0;ef=((yf(h,P)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(v,P)|0)+(tf>>>16)|0)+(ef>>>16)|0;V=ef<<16|ff&0xffff;ff=((yf(h,S)|0)+(rf&0xffff)|0)+(K&0xffff)|0;tf=((yf(v,S)|0)+(rf>>>16)|0)+(K>>>16)|0;ef=((yf(h,D)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(v,D)|0)+(tf>>>16)|0)+(ef>>>16)|0;K=ef<<16|ff&0xffff;ff=((yf(h,U)|0)+(rf&0xffff)|0)+(W&0xffff)|0;tf=((yf(v,U)|0)+(rf>>>16)|0)+(W>>>16)|0;ef=((yf(h,R)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(v,R)|0)+(tf>>>16)|0)+(ef>>>16)|0;W=ef<<16|ff&0xffff;ff=((yf(h,M)|0)+(rf&0xffff)|0)+(J&0xffff)|0;tf=((yf(v,M)|0)+(rf>>>16)|0)+(J>>>16)|0;ef=((yf(h,T)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(v,T)|0)+(tf>>>16)|0)+(ef>>>16)|0;J=ef<<16|ff&0xffff;ff=((yf(h,O)|0)+(rf&0xffff)|0)+(Q&0xffff)|0;tf=((yf(v,O)|0)+(rf>>>16)|0)+(Q>>>16)|0;ef=((yf(h,Z)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(v,Z)|0)+(tf>>>16)|0)+(ef>>>16)|0;Q=ef<<16|ff&0xffff;X=rf;ff=((yf(u,A)|0)+(Y&0xffff)|0)+(F&0xffff)|0;tf=((yf(d,A)|0)+(Y>>>16)|0)+(F>>>16)|0;ef=((yf(u,H)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(d,H)|0)+(tf>>>16)|0)+(ef>>>16)|0;F=ef<<16|ff&0xffff;ff=((yf(u,m)|0)+(rf&0xffff)|0)+(q&0xffff)|0;tf=((yf(d,m)|0)+(rf>>>16)|0)+(q>>>16)|0;ef=((yf(u,L)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(d,L)|0)+(tf>>>16)|0)+(ef>>>16)|0;q=ef<<16|ff&0xffff;ff=((yf(u,E)|0)+(rf&0xffff)|0)+(V&0xffff)|0;tf=((yf(d,E)|0)+(rf>>>16)|0)+(V>>>16)|0;ef=((yf(u,k)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(d,k)|0)+(tf>>>16)|0)+(ef>>>16)|0;V=ef<<16|ff&0xffff;ff=((yf(u,C)|0)+(rf&0xffff)|0)+(K&0xffff)|0;tf=((yf(d,C)|0)+(rf>>>16)|0)+(K>>>16)|0;ef=((yf(u,P)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(d,P)|0)+(tf>>>16)|0)+(ef>>>16)|0;K=ef<<16|ff&0xffff;ff=((yf(u,S)|0)+(rf&0xffff)|0)+(W&0xffff)|0;tf=((yf(d,S)|0)+(rf>>>16)|0)+(W>>>16)|0;ef=((yf(u,D)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(d,D)|0)+(tf>>>16)|0)+(ef>>>16)|0;W=ef<<16|ff&0xffff;ff=((yf(u,U)|0)+(rf&0xffff)|0)+(J&0xffff)|0;tf=((yf(d,U)|0)+(rf>>>16)|0)+(J>>>16)|0;ef=((yf(u,R)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(d,R)|0)+(tf>>>16)|0)+(ef>>>16)|0;J=ef<<16|ff&0xffff;ff=((yf(u,M)|0)+(rf&0xffff)|0)+(Q&0xffff)|0;tf=((yf(d,M)|0)+(rf>>>16)|0)+(Q>>>16)|0;ef=((yf(u,T)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(d,T)|0)+(tf>>>16)|0)+(ef>>>16)|0;Q=ef<<16|ff&0xffff;ff=((yf(u,O)|0)+(rf&0xffff)|0)+(X&0xffff)|0;tf=((yf(d,O)|0)+(rf>>>16)|0)+(X>>>16)|0;ef=((yf(u,Z)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(d,Z)|0)+(tf>>>16)|0)+(ef>>>16)|0;X=ef<<16|ff&0xffff;Y=rf;ff=((yf(l,A)|0)+($$&0xffff)|0)+(q&0xffff)|0;tf=((yf(w,A)|0)+($$>>>16)|0)+(q>>>16)|0;ef=((yf(l,H)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(w,H)|0)+(tf>>>16)|0)+(ef>>>16)|0;q=ef<<16|ff&0xffff;ff=((yf(l,m)|0)+(rf&0xffff)|0)+(V&0xffff)|0;tf=((yf(w,m)|0)+(rf>>>16)|0)+(V>>>16)|0;ef=((yf(l,L)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(w,L)|0)+(tf>>>16)|0)+(ef>>>16)|0;V=ef<<16|ff&0xffff;ff=((yf(l,E)|0)+(rf&0xffff)|0)+(K&0xffff)|0;tf=((yf(w,E)|0)+(rf>>>16)|0)+(K>>>16)|0;ef=((yf(l,k)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(w,k)|0)+(tf>>>16)|0)+(ef>>>16)|0;K=ef<<16|ff&0xffff;ff=((yf(l,C)|0)+(rf&0xffff)|0)+(W&0xffff)|0;tf=((yf(w,C)|0)+(rf>>>16)|0)+(W>>>16)|0;ef=((yf(l,P)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(w,P)|0)+(tf>>>16)|0)+(ef>>>16)|0;W=ef<<16|ff&0xffff;ff=((yf(l,S)|0)+(rf&0xffff)|0)+(J&0xffff)|0;tf=((yf(w,S)|0)+(rf>>>16)|0)+(J>>>16)|0;ef=((yf(l,D)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(w,D)|0)+(tf>>>16)|0)+(ef>>>16)|0;J=ef<<16|ff&0xffff;ff=((yf(l,U)|0)+(rf&0xffff)|0)+(Q&0xffff)|0;tf=((yf(w,U)|0)+(rf>>>16)|0)+(Q>>>16)|0;ef=((yf(l,R)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(w,R)|0)+(tf>>>16)|0)+(ef>>>16)|0;Q=ef<<16|ff&0xffff;ff=((yf(l,M)|0)+(rf&0xffff)|0)+(X&0xffff)|0;tf=((yf(w,M)|0)+(rf>>>16)|0)+(X>>>16)|0;ef=((yf(l,T)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(w,T)|0)+(tf>>>16)|0)+(ef>>>16)|0;X=ef<<16|ff&0xffff;ff=((yf(l,O)|0)+(rf&0xffff)|0)+(Y&0xffff)|0;tf=((yf(w,O)|0)+(rf>>>16)|0)+(Y>>>16)|0;ef=((yf(l,Z)|0)+(tf&0xffff)|0)+(ff>>>16)|0;rf=((yf(w,Z)|0)+(tf>>>16)|0)+(ef>>>16)|0;Y=ef<<16|ff&0xffff;$$=rf;pf[(xf|0)>>2]=B,pf[(xf|4)>>2]=I,pf[(xf|8)>>2]=z,pf[(xf|12)>>2]=G,pf[(xf|16)>>2]=N,pf[(xf|20)>>2]=j,pf[(xf|24)>>2]=F,pf[(xf|28)>>2]=q}xf=n+(nf+sf|0)|0;pf[(xf|0)>>2]=V,pf[(xf|4)>>2]=K,pf[(xf|8)>>2]=W,pf[(xf|12)>>2]=J,pf[(xf|16)>>2]=Q,pf[(xf|20)>>2]=X,pf[(xf|24)>>2]=Y,pf[(xf|28)>>2]=$$}}function x(f,t,e){f=f|0;t=t|0;e=e|0;var r=0,n=0,i=0,a=0,s=0,o=0,x=0,c=0,h=0,u=0,l=0,p=0,y=0,b=0,g=0,_=0,v=0,d=0,w=0,A=0,m=0,E=0,C=0,S=0,U=0,M=0,O=0,H=0,L=0,k=0,P=0,D=0,R=0,T=0,Z=0,B=0,I=0,z=0,G=0,N=0,j=0,F=0,q=0,V=0,K=0,W=0,J=0,Q=0,X=0,Y=0,$$=0,ff=0,tf=0,ef=0,rf=0,nf=0,af=0,sf=0,of=0,xf=0,cf=0,hf=0,uf=0,lf=0;for(;(of|0)<(t|0);of=of+4|0){lf=e+(of<<1)|0;h=pf[f+of>>2]|0,r=h&0xffff,h=h>>>16;X=yf(r,r)|0;Y=(yf(r,h)|0)+(X>>>17)|0;$$=(yf(h,h)|0)+(Y>>>15)|0;pf[lf>>2]=Y<<17|X&0x1ffff;pf[(lf|4)>>2]=$$}for(sf=0;(sf|0)<(t|0);sf=sf+8|0){hf=f+sf|0,lf=e+(sf<<1)|0;h=pf[hf>>2]|0,r=h&0xffff,h=h>>>16;U=pf[(hf|4)>>2]|0,v=U&0xffff,U=U>>>16;X=yf(r,v)|0;Y=(yf(r,U)|0)+(X>>>16)|0;$$=(yf(h,v)|0)+(Y&0xffff)|0;ef=((yf(h,U)|0)+(Y>>>16)|0)+($$>>>16)|0;rf=pf[(lf|4)>>2]|0;X=(rf&0xffff)+((X&0xffff)<<1)|0;$$=((rf>>>16)+(($$&0xffff)<<1)|0)+(X>>>16)|0;pf[(lf|4)>>2]=$$<<16|X&0xffff;ff=$$>>>16;rf=pf[(lf|8)>>2]|0;X=((rf&0xffff)+((ef&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(ef>>>16<<1)|0)+(X>>>16)|0;pf[(lf|8)>>2]=$$<<16|X&0xffff;ff=$$>>>16;if(ff){rf=pf[(lf|12)>>2]|0;X=(rf&0xffff)+ff|0;$$=(rf>>>16)+(X>>>16)|0;pf[(lf|12)>>2]=$$<<16|X&0xffff}}for(sf=0;(sf|0)<(t|0);sf=sf+16|0){hf=f+sf|0,lf=e+(sf<<1)|0;h=pf[hf>>2]|0,r=h&0xffff,h=h>>>16,u=pf[(hf|4)>>2]|0,n=u&0xffff,u=u>>>16;U=pf[(hf|8)>>2]|0,v=U&0xffff,U=U>>>16,M=pf[(hf|12)>>2]|0,d=M&0xffff,M=M>>>16;X=yf(r,v)|0;Y=yf(h,v)|0;$$=((yf(r,U)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(h,U)|0)+(Y>>>16)|0)+($$>>>16)|0;R=$$<<16|X&0xffff;X=(yf(r,d)|0)+(ef&0xffff)|0;Y=(yf(h,d)|0)+(ef>>>16)|0;$$=((yf(r,M)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(h,M)|0)+(Y>>>16)|0)+($$>>>16)|0;T=$$<<16|X&0xffff;Z=ef;X=(yf(n,v)|0)+(T&0xffff)|0;Y=(yf(u,v)|0)+(T>>>16)|0;$$=((yf(n,U)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(u,U)|0)+(Y>>>16)|0)+($$>>>16)|0;T=$$<<16|X&0xffff;X=((yf(n,d)|0)+(Z&0xffff)|0)+(ef&0xffff)|0;Y=((yf(u,d)|0)+(Z>>>16)|0)+(ef>>>16)|0;$$=((yf(n,M)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(u,M)|0)+(Y>>>16)|0)+($$>>>16)|0;Z=$$<<16|X&0xffff;B=ef;rf=pf[(lf|8)>>2]|0;X=(rf&0xffff)+((R&0xffff)<<1)|0;$$=((rf>>>16)+(R>>>16<<1)|0)+(X>>>16)|0;pf[(lf|8)>>2]=$$<<16|X&0xffff;ff=$$>>>16;rf=pf[(lf|12)>>2]|0;X=((rf&0xffff)+((T&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(T>>>16<<1)|0)+(X>>>16)|0;pf[(lf|12)>>2]=$$<<16|X&0xffff;ff=$$>>>16;rf=pf[(lf|16)>>2]|0;X=((rf&0xffff)+((Z&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(Z>>>16<<1)|0)+(X>>>16)|0;pf[(lf|16)>>2]=$$<<16|X&0xffff;ff=$$>>>16;rf=pf[(lf|20)>>2]|0;X=((rf&0xffff)+((B&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(B>>>16<<1)|0)+(X>>>16)|0;pf[(lf|20)>>2]=$$<<16|X&0xffff;ff=$$>>>16;for(cf=24;!!ff&(cf|0)<32;cf=cf+4|0){rf=pf[(lf|cf)>>2]|0;X=(rf&0xffff)+ff|0;$$=(rf>>>16)+(X>>>16)|0;pf[(lf|cf)>>2]=$$<<16|X&0xffff;ff=$$>>>16}}for(sf=0;(sf|0)<(t|0);sf=sf+32|0){hf=f+sf|0,lf=e+(sf<<1)|0;h=pf[hf>>2]|0,r=h&0xffff,h=h>>>16,u=pf[(hf|4)>>2]|0,n=u&0xffff,u=u>>>16,l=pf[(hf|8)>>2]|0,i=l&0xffff,l=l>>>16,p=pf[(hf|12)>>2]|0,a=p&0xffff,p=p>>>16;U=pf[(hf|16)>>2]|0,v=U&0xffff,U=U>>>16,M=pf[(hf|20)>>2]|0,d=M&0xffff,M=M>>>16,O=pf[(hf|24)>>2]|0,w=O&0xffff,O=O>>>16,H=pf[(hf|28)>>2]|0,A=H&0xffff,H=H>>>16;X=yf(r,v)|0;Y=yf(h,v)|0;$$=((yf(r,U)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(h,U)|0)+(Y>>>16)|0)+($$>>>16)|0;R=$$<<16|X&0xffff;X=(yf(r,d)|0)+(ef&0xffff)|0;Y=(yf(h,d)|0)+(ef>>>16)|0;$$=((yf(r,M)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(h,M)|0)+(Y>>>16)|0)+($$>>>16)|0;T=$$<<16|X&0xffff;X=(yf(r,w)|0)+(ef&0xffff)|0;Y=(yf(h,w)|0)+(ef>>>16)|0;$$=((yf(r,O)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(h,O)|0)+(Y>>>16)|0)+($$>>>16)|0;Z=$$<<16|X&0xffff;X=(yf(r,A)|0)+(ef&0xffff)|0;Y=(yf(h,A)|0)+(ef>>>16)|0;$$=((yf(r,H)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(h,H)|0)+(Y>>>16)|0)+($$>>>16)|0;B=$$<<16|X&0xffff;I=ef;X=(yf(n,v)|0)+(T&0xffff)|0;Y=(yf(u,v)|0)+(T>>>16)|0;$$=((yf(n,U)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(u,U)|0)+(Y>>>16)|0)+($$>>>16)|0;T=$$<<16|X&0xffff;X=((yf(n,d)|0)+(Z&0xffff)|0)+(ef&0xffff)|0;Y=((yf(u,d)|0)+(Z>>>16)|0)+(ef>>>16)|0;$$=((yf(n,M)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(u,M)|0)+(Y>>>16)|0)+($$>>>16)|0;Z=$$<<16|X&0xffff;X=((yf(n,w)|0)+(B&0xffff)|0)+(ef&0xffff)|0;Y=((yf(u,w)|0)+(B>>>16)|0)+(ef>>>16)|0;$$=((yf(n,O)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(u,O)|0)+(Y>>>16)|0)+($$>>>16)|0;B=$$<<16|X&0xffff;X=((yf(n,A)|0)+(I&0xffff)|0)+(ef&0xffff)|0;Y=((yf(u,A)|0)+(I>>>16)|0)+(ef>>>16)|0;$$=((yf(n,H)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(u,H)|0)+(Y>>>16)|0)+($$>>>16)|0;I=$$<<16|X&0xffff;z=ef;X=(yf(i,v)|0)+(Z&0xffff)|0;Y=(yf(l,v)|0)+(Z>>>16)|0;$$=((yf(i,U)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(l,U)|0)+(Y>>>16)|0)+($$>>>16)|0;Z=$$<<16|X&0xffff;X=((yf(i,d)|0)+(B&0xffff)|0)+(ef&0xffff)|0;Y=((yf(l,d)|0)+(B>>>16)|0)+(ef>>>16)|0;$$=((yf(i,M)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(l,M)|0)+(Y>>>16)|0)+($$>>>16)|0;B=$$<<16|X&0xffff;X=((yf(i,w)|0)+(I&0xffff)|0)+(ef&0xffff)|0;Y=((yf(l,w)|0)+(I>>>16)|0)+(ef>>>16)|0;$$=((yf(i,O)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(l,O)|0)+(Y>>>16)|0)+($$>>>16)|0;I=$$<<16|X&0xffff;X=((yf(i,A)|0)+(z&0xffff)|0)+(ef&0xffff)|0;Y=((yf(l,A)|0)+(z>>>16)|0)+(ef>>>16)|0;$$=((yf(i,H)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(l,H)|0)+(Y>>>16)|0)+($$>>>16)|0;z=$$<<16|X&0xffff;G=ef;X=(yf(a,v)|0)+(B&0xffff)|0;Y=(yf(p,v)|0)+(B>>>16)|0;$$=((yf(a,U)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(p,U)|0)+(Y>>>16)|0)+($$>>>16)|0;B=$$<<16|X&0xffff;X=((yf(a,d)|0)+(I&0xffff)|0)+(ef&0xffff)|0;Y=((yf(p,d)|0)+(I>>>16)|0)+(ef>>>16)|0;$$=((yf(a,M)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(p,M)|0)+(Y>>>16)|0)+($$>>>16)|0;I=$$<<16|X&0xffff;X=((yf(a,w)|0)+(z&0xffff)|0)+(ef&0xffff)|0;Y=((yf(p,w)|0)+(z>>>16)|0)+(ef>>>16)|0;$$=((yf(a,O)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(p,O)|0)+(Y>>>16)|0)+($$>>>16)|0;z=$$<<16|X&0xffff;X=((yf(a,A)|0)+(G&0xffff)|0)+(ef&0xffff)|0;Y=((yf(p,A)|0)+(G>>>16)|0)+(ef>>>16)|0;$$=((yf(a,H)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(p,H)|0)+(Y>>>16)|0)+($$>>>16)|0;G=$$<<16|X&0xffff;N=ef;rf=pf[(lf|16)>>2]|0;X=(rf&0xffff)+((R&0xffff)<<1)|0;$$=((rf>>>16)+(R>>>16<<1)|0)+(X>>>16)|0;pf[(lf|16)>>2]=$$<<16|X&0xffff;ff=$$>>>16;rf=pf[(lf|20)>>2]|0;X=((rf&0xffff)+((T&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(T>>>16<<1)|0)+(X>>>16)|0;pf[(lf|20)>>2]=$$<<16|X&0xffff;ff=$$>>>16;rf=pf[(lf|24)>>2]|0;X=((rf&0xffff)+((Z&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(Z>>>16<<1)|0)+(X>>>16)|0;pf[(lf|24)>>2]=$$<<16|X&0xffff;ff=$$>>>16;rf=pf[(lf|28)>>2]|0;X=((rf&0xffff)+((B&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(B>>>16<<1)|0)+(X>>>16)|0;pf[(lf|28)>>2]=$$<<16|X&0xffff;ff=$$>>>16;rf=pf[lf+32>>2]|0;X=((rf&0xffff)+((I&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(I>>>16<<1)|0)+(X>>>16)|0;pf[lf+32>>2]=$$<<16|X&0xffff;ff=$$>>>16;rf=pf[lf+36>>2]|0;X=((rf&0xffff)+((z&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(z>>>16<<1)|0)+(X>>>16)|0;pf[lf+36>>2]=$$<<16|X&0xffff;ff=$$>>>16;rf=pf[lf+40>>2]|0;X=((rf&0xffff)+((G&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(G>>>16<<1)|0)+(X>>>16)|0;pf[lf+40>>2]=$$<<16|X&0xffff;ff=$$>>>16;rf=pf[lf+44>>2]|0;X=((rf&0xffff)+((N&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(N>>>16<<1)|0)+(X>>>16)|0;pf[lf+44>>2]=$$<<16|X&0xffff;ff=$$>>>16;for(cf=48;!!ff&(cf|0)<64;cf=cf+4|0){rf=pf[lf+cf>>2]|0;X=(rf&0xffff)+ff|0;$$=(rf>>>16)+(X>>>16)|0;pf[lf+cf>>2]=$$<<16|X&0xffff;ff=$$>>>16}}for(nf=32;(nf|0)<(t|0);nf=nf<<1){af=nf<<1;for(sf=0;(sf|0)<(t|0);sf=sf+af|0){lf=e+(sf<<1)|0;tf=0;for(of=0;(of|0)<(nf|0);of=of+32|0){hf=(f+sf|0)+of|0;h=pf[hf>>2]|0,r=h&0xffff,h=h>>>16,u=pf[(hf|4)>>2]|0,n=u&0xffff,u=u>>>16,l=pf[(hf|8)>>2]|0,i=l&0xffff,l=l>>>16,p=pf[(hf|12)>>2]|0,a=p&0xffff,p=p>>>16,y=pf[(hf|16)>>2]|0,s=y&0xffff,y=y>>>16,b=pf[(hf|20)>>2]|0,o=b&0xffff,b=b>>>16,g=pf[(hf|24)>>2]|0,x=g&0xffff,g=g>>>16,_=pf[(hf|28)>>2]|0,c=_&0xffff,_=_>>>16;j=F=q=V=K=W=J=Q=ff=0;for(xf=0;(xf|0)<(nf|0);xf=xf+32|0){uf=((f+sf|0)+nf|0)+xf|0;U=pf[uf>>2]|0,v=U&0xffff,U=U>>>16,M=pf[(uf|4)>>2]|0,d=M&0xffff,M=M>>>16,O=pf[(uf|8)>>2]|0,w=O&0xffff,O=O>>>16,H=pf[(uf|12)>>2]|0,A=H&0xffff,H=H>>>16,L=pf[(uf|16)>>2]|0,m=L&0xffff,L=L>>>16,k=pf[(uf|20)>>2]|0,E=k&0xffff,k=k>>>16,P=pf[(uf|24)>>2]|0,C=P&0xffff,P=P>>>16,D=pf[(uf|28)>>2]|0,S=D&0xffff,D=D>>>16;R=T=Z=B=I=z=G=N=0;X=((yf(r,v)|0)+(R&0xffff)|0)+(j&0xffff)|0;Y=((yf(h,v)|0)+(R>>>16)|0)+(j>>>16)|0;$$=((yf(r,U)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(h,U)|0)+(Y>>>16)|0)+($$>>>16)|0;R=$$<<16|X&0xffff;X=((yf(r,d)|0)+(T&0xffff)|0)+(ef&0xffff)|0;Y=((yf(h,d)|0)+(T>>>16)|0)+(ef>>>16)|0;$$=((yf(r,M)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(h,M)|0)+(Y>>>16)|0)+($$>>>16)|0;T=$$<<16|X&0xffff;X=((yf(r,w)|0)+(Z&0xffff)|0)+(ef&0xffff)|0;Y=((yf(h,w)|0)+(Z>>>16)|0)+(ef>>>16)|0;$$=((yf(r,O)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(h,O)|0)+(Y>>>16)|0)+($$>>>16)|0;Z=$$<<16|X&0xffff;X=((yf(r,A)|0)+(B&0xffff)|0)+(ef&0xffff)|0;Y=((yf(h,A)|0)+(B>>>16)|0)+(ef>>>16)|0;$$=((yf(r,H)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(h,H)|0)+(Y>>>16)|0)+($$>>>16)|0;B=$$<<16|X&0xffff;X=((yf(r,m)|0)+(I&0xffff)|0)+(ef&0xffff)|0;Y=((yf(h,m)|0)+(I>>>16)|0)+(ef>>>16)|0;$$=((yf(r,L)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(h,L)|0)+(Y>>>16)|0)+($$>>>16)|0;I=$$<<16|X&0xffff;X=((yf(r,E)|0)+(z&0xffff)|0)+(ef&0xffff)|0;Y=((yf(h,E)|0)+(z>>>16)|0)+(ef>>>16)|0;$$=((yf(r,k)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(h,k)|0)+(Y>>>16)|0)+($$>>>16)|0;z=$$<<16|X&0xffff;X=((yf(r,C)|0)+(G&0xffff)|0)+(ef&0xffff)|0;Y=((yf(h,C)|0)+(G>>>16)|0)+(ef>>>16)|0;$$=((yf(r,P)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(h,P)|0)+(Y>>>16)|0)+($$>>>16)|0;G=$$<<16|X&0xffff;X=((yf(r,S)|0)+(N&0xffff)|0)+(ef&0xffff)|0;Y=((yf(h,S)|0)+(N>>>16)|0)+(ef>>>16)|0;$$=((yf(r,D)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(h,D)|0)+(Y>>>16)|0)+($$>>>16)|0;N=$$<<16|X&0xffff;j=ef;X=((yf(n,v)|0)+(T&0xffff)|0)+(F&0xffff)|0;Y=((yf(u,v)|0)+(T>>>16)|0)+(F>>>16)|0;$$=((yf(n,U)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(u,U)|0)+(Y>>>16)|0)+($$>>>16)|0;T=$$<<16|X&0xffff;X=((yf(n,d)|0)+(Z&0xffff)|0)+(ef&0xffff)|0;Y=((yf(u,d)|0)+(Z>>>16)|0)+(ef>>>16)|0;$$=((yf(n,M)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(u,M)|0)+(Y>>>16)|0)+($$>>>16)|0;Z=$$<<16|X&0xffff;X=((yf(n,w)|0)+(B&0xffff)|0)+(ef&0xffff)|0;Y=((yf(u,w)|0)+(B>>>16)|0)+(ef>>>16)|0;$$=((yf(n,O)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(u,O)|0)+(Y>>>16)|0)+($$>>>16)|0;B=$$<<16|X&0xffff;X=((yf(n,A)|0)+(I&0xffff)|0)+(ef&0xffff)|0;Y=((yf(u,A)|0)+(I>>>16)|0)+(ef>>>16)|0;$$=((yf(n,H)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(u,H)|0)+(Y>>>16)|0)+($$>>>16)|0;I=$$<<16|X&0xffff;X=((yf(n,m)|0)+(z&0xffff)|0)+(ef&0xffff)|0;Y=((yf(u,m)|0)+(z>>>16)|0)+(ef>>>16)|0;$$=((yf(n,L)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(u,L)|0)+(Y>>>16)|0)+($$>>>16)|0;z=$$<<16|X&0xffff;X=((yf(n,E)|0)+(G&0xffff)|0)+(ef&0xffff)|0;Y=((yf(u,E)|0)+(G>>>16)|0)+(ef>>>16)|0;$$=((yf(n,k)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(u,k)|0)+(Y>>>16)|0)+($$>>>16)|0;G=$$<<16|X&0xffff;X=((yf(n,C)|0)+(N&0xffff)|0)+(ef&0xffff)|0;Y=((yf(u,C)|0)+(N>>>16)|0)+(ef>>>16)|0;$$=((yf(n,P)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(u,P)|0)+(Y>>>16)|0)+($$>>>16)|0;N=$$<<16|X&0xffff;X=((yf(n,S)|0)+(j&0xffff)|0)+(ef&0xffff)|0;Y=((yf(u,S)|0)+(j>>>16)|0)+(ef>>>16)|0;$$=((yf(n,D)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(u,D)|0)+(Y>>>16)|0)+($$>>>16)|0;j=$$<<16|X&0xffff;F=ef;X=((yf(i,v)|0)+(Z&0xffff)|0)+(q&0xffff)|0;Y=((yf(l,v)|0)+(Z>>>16)|0)+(q>>>16)|0;$$=((yf(i,U)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(l,U)|0)+(Y>>>16)|0)+($$>>>16)|0;Z=$$<<16|X&0xffff;X=((yf(i,d)|0)+(B&0xffff)|0)+(ef&0xffff)|0;Y=((yf(l,d)|0)+(B>>>16)|0)+(ef>>>16)|0;$$=((yf(i,M)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(l,M)|0)+(Y>>>16)|0)+($$>>>16)|0;B=$$<<16|X&0xffff;X=((yf(i,w)|0)+(I&0xffff)|0)+(ef&0xffff)|0;Y=((yf(l,w)|0)+(I>>>16)|0)+(ef>>>16)|0;$$=((yf(i,O)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(l,O)|0)+(Y>>>16)|0)+($$>>>16)|0;I=$$<<16|X&0xffff;X=((yf(i,A)|0)+(z&0xffff)|0)+(ef&0xffff)|0;Y=((yf(l,A)|0)+(z>>>16)|0)+(ef>>>16)|0;$$=((yf(i,H)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(l,H)|0)+(Y>>>16)|0)+($$>>>16)|0;z=$$<<16|X&0xffff;X=((yf(i,m)|0)+(G&0xffff)|0)+(ef&0xffff)|0;Y=((yf(l,m)|0)+(G>>>16)|0)+(ef>>>16)|0;$$=((yf(i,L)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(l,L)|0)+(Y>>>16)|0)+($$>>>16)|0;G=$$<<16|X&0xffff;X=((yf(i,E)|0)+(N&0xffff)|0)+(ef&0xffff)|0;Y=((yf(l,E)|0)+(N>>>16)|0)+(ef>>>16)|0;$$=((yf(i,k)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(l,k)|0)+(Y>>>16)|0)+($$>>>16)|0;N=$$<<16|X&0xffff;X=((yf(i,C)|0)+(j&0xffff)|0)+(ef&0xffff)|0;Y=((yf(l,C)|0)+(j>>>16)|0)+(ef>>>16)|0;$$=((yf(i,P)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(l,P)|0)+(Y>>>16)|0)+($$>>>16)|0;j=$$<<16|X&0xffff;X=((yf(i,S)|0)+(F&0xffff)|0)+(ef&0xffff)|0;Y=((yf(l,S)|0)+(F>>>16)|0)+(ef>>>16)|0;$$=((yf(i,D)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(l,D)|0)+(Y>>>16)|0)+($$>>>16)|0;F=$$<<16|X&0xffff;q=ef;X=((yf(a,v)|0)+(B&0xffff)|0)+(V&0xffff)|0;Y=((yf(p,v)|0)+(B>>>16)|0)+(V>>>16)|0;$$=((yf(a,U)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(p,U)|0)+(Y>>>16)|0)+($$>>>16)|0;B=$$<<16|X&0xffff;X=((yf(a,d)|0)+(I&0xffff)|0)+(ef&0xffff)|0;Y=((yf(p,d)|0)+(I>>>16)|0)+(ef>>>16)|0;$$=((yf(a,M)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(p,M)|0)+(Y>>>16)|0)+($$>>>16)|0;I=$$<<16|X&0xffff;X=((yf(a,w)|0)+(z&0xffff)|0)+(ef&0xffff)|0;Y=((yf(p,w)|0)+(z>>>16)|0)+(ef>>>16)|0;$$=((yf(a,O)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(p,O)|0)+(Y>>>16)|0)+($$>>>16)|0;z=$$<<16|X&0xffff;X=((yf(a,A)|0)+(G&0xffff)|0)+(ef&0xffff)|0;Y=((yf(p,A)|0)+(G>>>16)|0)+(ef>>>16)|0;$$=((yf(a,H)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(p,H)|0)+(Y>>>16)|0)+($$>>>16)|0;G=$$<<16|X&0xffff;X=((yf(a,m)|0)+(N&0xffff)|0)+(ef&0xffff)|0;Y=((yf(p,m)|0)+(N>>>16)|0)+(ef>>>16)|0;$$=((yf(a,L)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(p,L)|0)+(Y>>>16)|0)+($$>>>16)|0;N=$$<<16|X&0xffff;X=((yf(a,E)|0)+(j&0xffff)|0)+(ef&0xffff)|0;Y=((yf(p,E)|0)+(j>>>16)|0)+(ef>>>16)|0;$$=((yf(a,k)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(p,k)|0)+(Y>>>16)|0)+($$>>>16)|0;j=$$<<16|X&0xffff;X=((yf(a,C)|0)+(F&0xffff)|0)+(ef&0xffff)|0;Y=((yf(p,C)|0)+(F>>>16)|0)+(ef>>>16)|0;$$=((yf(a,P)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(p,P)|0)+(Y>>>16)|0)+($$>>>16)|0;F=$$<<16|X&0xffff;X=((yf(a,S)|0)+(q&0xffff)|0)+(ef&0xffff)|0;Y=((yf(p,S)|0)+(q>>>16)|0)+(ef>>>16)|0;$$=((yf(a,D)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(p,D)|0)+(Y>>>16)|0)+($$>>>16)|0;q=$$<<16|X&0xffff;V=ef;X=((yf(s,v)|0)+(I&0xffff)|0)+(K&0xffff)|0;Y=((yf(y,v)|0)+(I>>>16)|0)+(K>>>16)|0;$$=((yf(s,U)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(y,U)|0)+(Y>>>16)|0)+($$>>>16)|0;I=$$<<16|X&0xffff;X=((yf(s,d)|0)+(z&0xffff)|0)+(ef&0xffff)|0;Y=((yf(y,d)|0)+(z>>>16)|0)+(ef>>>16)|0;$$=((yf(s,M)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(y,M)|0)+(Y>>>16)|0)+($$>>>16)|0;z=$$<<16|X&0xffff;X=((yf(s,w)|0)+(G&0xffff)|0)+(ef&0xffff)|0;Y=((yf(y,w)|0)+(G>>>16)|0)+(ef>>>16)|0;$$=((yf(s,O)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(y,O)|0)+(Y>>>16)|0)+($$>>>16)|0;G=$$<<16|X&0xffff;X=((yf(s,A)|0)+(N&0xffff)|0)+(ef&0xffff)|0;Y=((yf(y,A)|0)+(N>>>16)|0)+(ef>>>16)|0;$$=((yf(s,H)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(y,H)|0)+(Y>>>16)|0)+($$>>>16)|0;N=$$<<16|X&0xffff;X=((yf(s,m)|0)+(j&0xffff)|0)+(ef&0xffff)|0;Y=((yf(y,m)|0)+(j>>>16)|0)+(ef>>>16)|0;$$=((yf(s,L)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(y,L)|0)+(Y>>>16)|0)+($$>>>16)|0;j=$$<<16|X&0xffff;X=((yf(s,E)|0)+(F&0xffff)|0)+(ef&0xffff)|0;Y=((yf(y,E)|0)+(F>>>16)|0)+(ef>>>16)|0;$$=((yf(s,k)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(y,k)|0)+(Y>>>16)|0)+($$>>>16)|0;F=$$<<16|X&0xffff;X=((yf(s,C)|0)+(q&0xffff)|0)+(ef&0xffff)|0;Y=((yf(y,C)|0)+(q>>>16)|0)+(ef>>>16)|0;$$=((yf(s,P)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(y,P)|0)+(Y>>>16)|0)+($$>>>16)|0;q=$$<<16|X&0xffff;X=((yf(s,S)|0)+(V&0xffff)|0)+(ef&0xffff)|0;Y=((yf(y,S)|0)+(V>>>16)|0)+(ef>>>16)|0;$$=((yf(s,D)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(y,D)|0)+(Y>>>16)|0)+($$>>>16)|0;V=$$<<16|X&0xffff;K=ef;X=((yf(o,v)|0)+(z&0xffff)|0)+(W&0xffff)|0;Y=((yf(b,v)|0)+(z>>>16)|0)+(W>>>16)|0;$$=((yf(o,U)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(b,U)|0)+(Y>>>16)|0)+($$>>>16)|0;z=$$<<16|X&0xffff;X=((yf(o,d)|0)+(G&0xffff)|0)+(ef&0xffff)|0;Y=((yf(b,d)|0)+(G>>>16)|0)+(ef>>>16)|0;$$=((yf(o,M)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(b,M)|0)+(Y>>>16)|0)+($$>>>16)|0;G=$$<<16|X&0xffff;X=((yf(o,w)|0)+(N&0xffff)|0)+(ef&0xffff)|0;Y=((yf(b,w)|0)+(N>>>16)|0)+(ef>>>16)|0;$$=((yf(o,O)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(b,O)|0)+(Y>>>16)|0)+($$>>>16)|0;N=$$<<16|X&0xffff;X=((yf(o,A)|0)+(j&0xffff)|0)+(ef&0xffff)|0;Y=((yf(b,A)|0)+(j>>>16)|0)+(ef>>>16)|0;$$=((yf(o,H)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(b,H)|0)+(Y>>>16)|0)+($$>>>16)|0;j=$$<<16|X&0xffff;X=((yf(o,m)|0)+(F&0xffff)|0)+(ef&0xffff)|0;Y=((yf(b,m)|0)+(F>>>16)|0)+(ef>>>16)|0;$$=((yf(o,L)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(b,L)|0)+(Y>>>16)|0)+($$>>>16)|0;F=$$<<16|X&0xffff;X=((yf(o,E)|0)+(q&0xffff)|0)+(ef&0xffff)|0;Y=((yf(b,E)|0)+(q>>>16)|0)+(ef>>>16)|0;$$=((yf(o,k)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(b,k)|0)+(Y>>>16)|0)+($$>>>16)|0;q=$$<<16|X&0xffff;X=((yf(o,C)|0)+(V&0xffff)|0)+(ef&0xffff)|0;Y=((yf(b,C)|0)+(V>>>16)|0)+(ef>>>16)|0;$$=((yf(o,P)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(b,P)|0)+(Y>>>16)|0)+($$>>>16)|0;V=$$<<16|X&0xffff;X=((yf(o,S)|0)+(K&0xffff)|0)+(ef&0xffff)|0;Y=((yf(b,S)|0)+(K>>>16)|0)+(ef>>>16)|0;$$=((yf(o,D)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(b,D)|0)+(Y>>>16)|0)+($$>>>16)|0;K=$$<<16|X&0xffff;W=ef;X=((yf(x,v)|0)+(G&0xffff)|0)+(J&0xffff)|0;Y=((yf(g,v)|0)+(G>>>16)|0)+(J>>>16)|0;$$=((yf(x,U)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(g,U)|0)+(Y>>>16)|0)+($$>>>16)|0;G=$$<<16|X&0xffff;X=((yf(x,d)|0)+(N&0xffff)|0)+(ef&0xffff)|0;Y=((yf(g,d)|0)+(N>>>16)|0)+(ef>>>16)|0;$$=((yf(x,M)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(g,M)|0)+(Y>>>16)|0)+($$>>>16)|0;N=$$<<16|X&0xffff;X=((yf(x,w)|0)+(j&0xffff)|0)+(ef&0xffff)|0;Y=((yf(g,w)|0)+(j>>>16)|0)+(ef>>>16)|0;$$=((yf(x,O)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(g,O)|0)+(Y>>>16)|0)+($$>>>16)|0;j=$$<<16|X&0xffff;X=((yf(x,A)|0)+(F&0xffff)|0)+(ef&0xffff)|0;Y=((yf(g,A)|0)+(F>>>16)|0)+(ef>>>16)|0;$$=((yf(x,H)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(g,H)|0)+(Y>>>16)|0)+($$>>>16)|0;F=$$<<16|X&0xffff;X=((yf(x,m)|0)+(q&0xffff)|0)+(ef&0xffff)|0;Y=((yf(g,m)|0)+(q>>>16)|0)+(ef>>>16)|0;$$=((yf(x,L)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(g,L)|0)+(Y>>>16)|0)+($$>>>16)|0;q=$$<<16|X&0xffff;X=((yf(x,E)|0)+(V&0xffff)|0)+(ef&0xffff)|0;Y=((yf(g,E)|0)+(V>>>16)|0)+(ef>>>16)|0;$$=((yf(x,k)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(g,k)|0)+(Y>>>16)|0)+($$>>>16)|0;V=$$<<16|X&0xffff;X=((yf(x,C)|0)+(K&0xffff)|0)+(ef&0xffff)|0;Y=((yf(g,C)|0)+(K>>>16)|0)+(ef>>>16)|0;$$=((yf(x,P)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(g,P)|0)+(Y>>>16)|0)+($$>>>16)|0;K=$$<<16|X&0xffff;X=((yf(x,S)|0)+(W&0xffff)|0)+(ef&0xffff)|0;Y=((yf(g,S)|0)+(W>>>16)|0)+(ef>>>16)|0;$$=((yf(x,D)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(g,D)|0)+(Y>>>16)|0)+($$>>>16)|0;W=$$<<16|X&0xffff;J=ef;X=((yf(c,v)|0)+(N&0xffff)|0)+(Q&0xffff)|0;Y=((yf(_,v)|0)+(N>>>16)|0)+(Q>>>16)|0;$$=((yf(c,U)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(_,U)|0)+(Y>>>16)|0)+($$>>>16)|0;N=$$<<16|X&0xffff;X=((yf(c,d)|0)+(j&0xffff)|0)+(ef&0xffff)|0;Y=((yf(_,d)|0)+(j>>>16)|0)+(ef>>>16)|0;$$=((yf(c,M)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(_,M)|0)+(Y>>>16)|0)+($$>>>16)|0;j=$$<<16|X&0xffff;X=((yf(c,w)|0)+(F&0xffff)|0)+(ef&0xffff)|0;Y=((yf(_,w)|0)+(F>>>16)|0)+(ef>>>16)|0;$$=((yf(c,O)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(_,O)|0)+(Y>>>16)|0)+($$>>>16)|0;F=$$<<16|X&0xffff;X=((yf(c,A)|0)+(q&0xffff)|0)+(ef&0xffff)|0;Y=((yf(_,A)|0)+(q>>>16)|0)+(ef>>>16)|0;$$=((yf(c,H)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(_,H)|0)+(Y>>>16)|0)+($$>>>16)|0;q=$$<<16|X&0xffff;X=((yf(c,m)|0)+(V&0xffff)|0)+(ef&0xffff)|0;Y=((yf(_,m)|0)+(V>>>16)|0)+(ef>>>16)|0;$$=((yf(c,L)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(_,L)|0)+(Y>>>16)|0)+($$>>>16)|0;V=$$<<16|X&0xffff;X=((yf(c,E)|0)+(K&0xffff)|0)+(ef&0xffff)|0;Y=((yf(_,E)|0)+(K>>>16)|0)+(ef>>>16)|0;$$=((yf(c,k)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(_,k)|0)+(Y>>>16)|0)+($$>>>16)|0;K=$$<<16|X&0xffff;X=((yf(c,C)|0)+(W&0xffff)|0)+(ef&0xffff)|0;Y=((yf(_,C)|0)+(W>>>16)|0)+(ef>>>16)|0;$$=((yf(c,P)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(_,P)|0)+(Y>>>16)|0)+($$>>>16)|0;W=$$<<16|X&0xffff;X=((yf(c,S)|0)+(J&0xffff)|0)+(ef&0xffff)|0;Y=((yf(_,S)|0)+(J>>>16)|0)+(ef>>>16)|0;$$=((yf(c,D)|0)+(Y&0xffff)|0)+(X>>>16)|0;ef=((yf(_,D)|0)+(Y>>>16)|0)+($$>>>16)|0;J=$$<<16|X&0xffff;Q=ef;cf=nf+(of+xf|0)|0;rf=pf[lf+cf>>2]|0;X=((rf&0xffff)+((R&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(R>>>16<<1)|0)+(X>>>16)|0;pf[lf+cf>>2]=$$<<16|X&0xffff;ff=$$>>>16;cf=cf+4|0;rf=pf[lf+cf>>2]|0;X=((rf&0xffff)+((T&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(T>>>16<<1)|0)+(X>>>16)|0;pf[lf+cf>>2]=$$<<16|X&0xffff;ff=$$>>>16;cf=cf+4|0;rf=pf[lf+cf>>2]|0;X=((rf&0xffff)+((Z&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(Z>>>16<<1)|0)+(X>>>16)|0;pf[lf+cf>>2]=$$<<16|X&0xffff;ff=$$>>>16;cf=cf+4|0;rf=pf[lf+cf>>2]|0;X=((rf&0xffff)+((B&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(B>>>16<<1)|0)+(X>>>16)|0;pf[lf+cf>>2]=$$<<16|X&0xffff;ff=$$>>>16;cf=cf+4|0;rf=pf[lf+cf>>2]|0;X=((rf&0xffff)+((I&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(I>>>16<<1)|0)+(X>>>16)|0;pf[lf+cf>>2]=$$<<16|X&0xffff;ff=$$>>>16;cf=cf+4|0;rf=pf[lf+cf>>2]|0;X=((rf&0xffff)+((z&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(z>>>16<<1)|0)+(X>>>16)|0;pf[lf+cf>>2]=$$<<16|X&0xffff;ff=$$>>>16;cf=cf+4|0;rf=pf[lf+cf>>2]|0;X=((rf&0xffff)+((G&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(G>>>16<<1)|0)+(X>>>16)|0;pf[lf+cf>>2]=$$<<16|X&0xffff;ff=$$>>>16;cf=cf+4|0;rf=pf[lf+cf>>2]|0;X=((rf&0xffff)+((N&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(N>>>16<<1)|0)+(X>>>16)|0;pf[lf+cf>>2]=$$<<16|X&0xffff;ff=$$>>>16}cf=nf+(of+xf|0)|0;rf=pf[lf+cf>>2]|0;X=(((rf&0xffff)+((j&0xffff)<<1)|0)+ff|0)+tf|0;$$=((rf>>>16)+(j>>>16<<1)|0)+(X>>>16)|0;pf[lf+cf>>2]=$$<<16|X&0xffff;ff=$$>>>16;cf=cf+4|0;rf=pf[lf+cf>>2]|0;X=((rf&0xffff)+((F&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(F>>>16<<1)|0)+(X>>>16)|0;pf[lf+cf>>2]=$$<<16|X&0xffff;ff=$$>>>16;cf=cf+4|0;rf=pf[lf+cf>>2]|0;X=((rf&0xffff)+((q&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(q>>>16<<1)|0)+(X>>>16)|0;pf[lf+cf>>2]=$$<<16|X&0xffff;ff=$$>>>16;cf=cf+4|0;rf=pf[lf+cf>>2]|0;X=((rf&0xffff)+((V&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(V>>>16<<1)|0)+(X>>>16)|0;pf[lf+cf>>2]=$$<<16|X&0xffff;ff=$$>>>16;cf=cf+4|0;rf=pf[lf+cf>>2]|0;X=((rf&0xffff)+((K&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(K>>>16<<1)|0)+(X>>>16)|0;pf[lf+cf>>2]=$$<<16|X&0xffff;ff=$$>>>16;cf=cf+4|0;rf=pf[lf+cf>>2]|0;X=((rf&0xffff)+((W&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(W>>>16<<1)|0)+(X>>>16)|0;pf[lf+cf>>2]=$$<<16|X&0xffff;ff=$$>>>16;cf=cf+4|0;rf=pf[lf+cf>>2]|0;X=((rf&0xffff)+((J&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(J>>>16<<1)|0)+(X>>>16)|0;pf[lf+cf>>2]=$$<<16|X&0xffff;ff=$$>>>16;cf=cf+4|0;rf=pf[lf+cf>>2]|0;X=((rf&0xffff)+((Q&0xffff)<<1)|0)+ff|0;$$=((rf>>>16)+(Q>>>16<<1)|0)+(X>>>16)|0;pf[lf+cf>>2]=$$<<16|X&0xffff;tf=$$>>>16}for(cf=cf+4|0;!!tf&(cf|0)<af<<1;cf=cf+4|0){rf=pf[lf+cf>>2]|0;X=(rf&0xffff)+tf|0;$$=(rf>>>16)+(X>>>16)|0;pf[lf+cf>>2]=$$<<16|X&0xffff;tf=$$>>>16}}}}function c(f,t,e,r,n){f=f|0;t=t|0;e=e|0;r=r|0;n=n|0;var i=0,a=0,s=0,o=0,x=0,c=0,h=0,u=0,l=0,p=0,y=0,b=0,g=0,_=0,v=0,d=0,w=0,A=0,m=0;for(w=t-1&-4;(w|0)>=0;w=w-4|0){i=pf[f+w>>2]|0;if(i){t=w;break}}for(w=r-1&-4;(w|0)>=0;w=w-4|0){a=pf[e+w>>2]|0;if(a){r=w;break}}while((a&0x80000000)==0){a=a<<1;s=s+1|0}x=pf[f+t>>2]|0;if(s){o=x>>>(32-s|0);for(w=t-4|0;(w|0)>=0;w=w-4|0){i=pf[f+w>>2]|0;pf[f+w+4>>2]=x<<s|(s?i>>>(32-s|0):0);x=i}pf[f>>2]=x<<s}if(s){c=pf[e+r>>2]|0;for(w=r-4|0;(w|0)>=0;w=w-4|0){a=pf[e+w>>2]|0;pf[e+w+4>>2]=c<<s|a>>>(32-s|0);c=a}pf[e>>2]=c<<s}c=pf[e+r>>2]|0;h=c>>>16,u=c&0xffff;for(w=t;(w|0)>=(r|0);w=w-4|0){A=w-r|0;x=pf[f+w>>2]|0;l=(o>>>0)/(h>>>0)|0,y=(o>>>0)%(h>>>0)|0,g=yf(l,u)|0;while((l|0)==0x10000|g>>>0>(y<<16|x>>>16)>>>0){l=l-1|0,y=y+h|0,g=g-u|0;if((y|0)>=0x10000)break}v=0,d=0;for(m=0;(m|0)<=(r|0);m=m+4|0){a=pf[e+m>>2]|0;g=(yf(l,a&0xffff)|0)+(v>>>16)|0;_=(yf(l,a>>>16)|0)+(g>>>16)|0;a=v&0xffff|g<<16;v=_;i=pf[f+A+m>>2]|0;g=((i&0xffff)-(a&0xffff)|0)+d|0;_=((i>>>16)-(a>>>16)|0)+(g>>16)|0;pf[f+A+m>>2]=_<<16|g&0xffff;d=_>>16}g=((o&0xffff)-(v&0xffff)|0)+d|0;_=((o>>>16)-(v>>>16)|0)+(g>>16)|0;o=_<<16|g&0xffff;d=_>>16;if(d){l=l-1|0;d=0;for(m=0;(m|0)<=(r|0);m=m+4|0){a=pf[e+m>>2]|0;i=pf[f+A+m>>2]|0;g=(i&0xffff)+d|0;_=(i>>>16)+a+(g>>>16)|0;pf[f+A+m>>2]=_<<16|g&0xffff;d=_>>>16}o=o+d|0}x=pf[f+w>>2]|0;i=o<<16|x>>>16;p=(i>>>0)/(h>>>0)|0,b=(i>>>0)%(h>>>0)|0,g=yf(p,u)|0;while((p|0)==0x10000|g>>>0>(b<<16|x&0xffff)>>>0){p=p-1|0,b=b+h|0,g=g-u|0;if((b|0)>=0x10000)break}v=0,d=0;for(m=0;(m|0)<=(r|0);m=m+4|0){a=pf[e+m>>2]|0;g=(yf(p,a&0xffff)|0)+(v&0xffff)|0;_=((yf(p,a>>>16)|0)+(g>>>16)|0)+(v>>>16)|0;a=g&0xffff|_<<16;v=_>>>16;i=pf[f+A+m>>2]|0;g=((i&0xffff)-(a&0xffff)|0)+d|0;_=((i>>>16)-(a>>>16)|0)+(g>>16)|0;d=_>>16;pf[f+A+m>>2]=_<<16|g&0xffff}g=((o&0xffff)-(v&0xffff)|0)+d|0;_=((o>>>16)-(v>>>16)|0)+(g>>16)|0;d=_>>16;if(d){p=p-1|0;d=0;for(m=0;(m|0)<=(r|0);m=m+4|0){a=pf[e+m>>2]|0;i=pf[f+A+m>>2]|0;g=((i&0xffff)+(a&0xffff)|0)+d|0;_=((i>>>16)+(a>>>16)|0)+(g>>>16)|0;d=_>>>16;pf[f+A+m>>2]=g&0xffff|_<<16}}pf[n+A>>2]=l<<16|p;o=pf[f+w>>2]|0}if(s){x=pf[f>>2]|0;for(w=4;(w|0)<=(r|0);w=w+4|0){i=pf[f+w>>2]|0;pf[f+w-4>>2]=i<<(32-s|0)|x>>>s;x=i}pf[f+r>>2]=x>>>s}}function h(f,t,e,r,n,i){f=f|0;t=t|0;e=e|0;r=r|0;n=n|0;i=i|0;var a=0,s=0,o=0,x=0,c=0,h=0,u=0,l=0,p=0,y=0,b=0,g=0,_=0,v=0;a=d(r<<1)|0;m(r<<1,0,a);A(t,f,a);for(g=0;(g|0)<(r|0);g=g+4|0){o=pf[a+g>>2]|0,x=o&0xffff,o=o>>>16;h=n>>>16,c=n&0xffff;u=yf(x,c)|0,l=((yf(x,h)|0)+(yf(o,c)|0)|0)+(u>>>16)|0;x=u&0xffff,o=l&0xffff;b=0;for(_=0;(_|0)<(r|0);_=_+4|0){v=g+_|0;h=pf[e+_>>2]|0,c=h&0xffff,h=h>>>16;y=pf[a+v>>2]|0;u=((yf(x,c)|0)+(b&0xffff)|0)+(y&0xffff)|0;l=((yf(x,h)|0)+(b>>>16)|0)+(y>>>16)|0;p=((yf(o,c)|0)+(l&0xffff)|0)+(u>>>16)|0;b=((yf(o,h)|0)+(p>>>16)|0)+(l>>>16)|0;y=p<<16|u&0xffff;pf[a+v>>2]=y}v=g+_|0;y=pf[a+v>>2]|0;u=((y&0xffff)+(b&0xffff)|0)+s|0;l=((y>>>16)+(b>>>16)|0)+(u>>>16)|0;pf[a+v>>2]=l<<16|u&0xffff;s=l>>>16}A(r,a+r|0,i);w(r<<1);if(s|(E(e,r,i,r)|0)<=0){C(i,r,e,r,i,r)|0}}return{sreset:n,salloc:d,sfree:w,z:m,tst:a,neg:i,cmp:E,add:s,sub:C,mul:o,sqr:x,div:c,mredc:h}};function I(f,t){var e,r,n,i,a=f<0?-1:1,s=t<0?-1:1,o=1,x=0,c=0,h=1;for(f*=a,t*=s,i=f<t,i&&(n=f,f=t,t=n,n=a,a=s,s=n),r=Math.floor(f/t),e=f-r*t;e;)n=o-r*x,o=x,x=n,n=c-r*h,c=h,h=n,f=t,t=e,r=Math.floor(f/t),e=f-r*t;return x*=a,h*=s,i&&(n=x,x=h,h=n),{gcd:t,x:x,y:h}}function z(f,t){var e=f.sign,r=t.sign;e<0&&(f=f.negate()),r<0&&(t=t.negate());var n=f.compare(t);if(n<0){var i=f;f=t,t=i;var a=e;e=r,r=a}var s,o,x,c=W.ONE,h=W.ZERO,u=t.bitLength,l=W.ZERO,p=W.ONE,y=f.bitLength;for(s=f.divide(t);(o=s.remainder)!==W.ZERO;)x=s.quotient,s=c.subtract(x.multiply(h).clamp(u)).clamp(u),c=h,h=s,s=l.subtract(x.multiply(p).clamp(y)).clamp(y),l=p,p=s,f=t,t=o,s=f.divide(t);if(e<0&&(h=h.negate()),r<0&&(p=p.negate()),n<0){i=h;h=p,p=i}return{gcd:t,x:h,y:p}}function G(f){if("undefined"==typeof process)if(window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(f);else if(self.crypto&&self.crypto.getRandomValues)self.crypto.getRandomValues(f);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)throw new Error("No secure random number generator available.");window.msCrypto.getRandomValues(f)}else{var t=require("crypto"),e=t.randomBytes(f.length);f.set(e)}}var N,j=function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,t){f.__proto__=t}||function(f,t){for(var e in t)t.hasOwnProperty(e)&&(f[e]=t[e])};return function(f,t){function e(){this.constructor=f}r(f,t),f.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),F={Uint32Array:Uint32Array,Math:Math},q=new Uint32Array(1048576);function V(f,t){return f*t|0}void 0===F.Math.imul?(F.Math.imul=V,N=B(F,null,q.buffer),delete F.Math.imul):N=B(F,null,q.buffer);var K=new Uint32Array(0),W=function(){function g(f){var t=K,e=0,r=0;if(void 0===f);else{for(var n=0;!f[n];n++);if(e=8*(f.length-n),!e)return g.ZERO;t=new Uint32Array(e+31>>5);for(var i=f.length-4;n<=i;i-=4)t[f.length-4-i>>2]=f[i]<<24|f[i+1]<<16|f[i+2]<<8|f[i+3];n-i==3?t[t.length-1]=f[n]:n-i==2?t[t.length-1]=f[n]<<8|f[n+1]:n-i==1&&(t[t.length-1]=f[n]<<16|f[n+1]<<8|f[n+2]),r=1}this.limbs=t,this.bitLength=e,this.sign=r}return g.fromString=function(f){var t=r(f);return new g(t)},g.fromNumber=function(f){var t=K,e=0,r=0,n=Math.abs(f);return 4294967295<n?(t=new Uint32Array(2),t[0]=0|n,t[1]=n/4294967296|0,e=52):0<n?(t=new Uint32Array(1),t[0]=n,e=32):(t=K,e=0),r=f<0?-1:1,g.fromConfig({limbs:t,bitLength:e,sign:r})},g.fromArrayBuffer=function(f){return new g(new Uint8Array(f))},g.fromConfig=function(f){var t=new g;return t.limbs=new Uint32Array(f.limbs),t.bitLength=f.bitLength,t.sign=f.sign,t},g.prototype.toString=function(f){f=f||16;var t=this.limbs,e=this.bitLength,r="";if(16!==f)throw new _("bad radix");for(var n=(e+31>>5)-1;0<=n;n--){var i=t[n].toString(16);r+="00000000".substr(i.length),r+=i}return r=r.replace(/^0+/,""),r.length||(r="0"),this.sign<0&&(r="-"+r),r},g.prototype.toBytes=function(){var f=this.bitLength,t=this.limbs;if(0===f)return new Uint8Array(0);for(var e=f+7>>3,r=new Uint8Array(e),n=0;n<e;n++){var i=e-n-1;r[n]=t[i>>2]>>((3&i)<<3)}return r},g.prototype.valueOf=function(){var f=this.limbs,t=this.bitLength,e=this.sign;if(!e)return 0;if(t<=32)return e*(f[0]>>>0);if(t<=52)return e*(4294967296*(f[1]>>>0)+(f[0]>>>0));var r,n,i=0;for(r=f.length-1;0<=r;r--)if(0!==(n=f[r])){for(;0==(n<<i&2147483648);)i++;break}return 0===r?e*(f[0]>>>0):e*(1048576*((f[r]<<i|(i?f[r-1]>>>32-i:0))>>>0)+((f[r-1]<<i|(i&&1<r?f[r-2]>>>32-i:0))>>>12))*Math.pow(2,32*r-i-52)},g.prototype.clamp=function(f){var t=this.limbs,e=this.bitLength;if(e<=f)return this;var r=new g,n=f+31>>5,i=f%32;return r.limbs=new Uint32Array(t.subarray(0,n)),r.bitLength=f,r.sign=this.sign,i&&(r.limbs[n-1]&=-1>>>32-i),r},g.prototype.slice=function(f,t){var e=this.limbs,r=this.bitLength;if(f<0)throw new RangeError("TODO");if(r<=f)return g.ZERO;(void 0===t||r-f<t)&&(t=r-f);var n=new g,i=f>>5,a=f+t+31>>5,s=t+31>>5,o=f%32,x=t%32,c=new Uint32Array(s);if(o){for(var h=0;h<a-i-1;h++)c[h]=e[i+h]>>>o|e[i+h+1]<<32-o;c[h]=e[i+h]>>>o}else c.set(e.subarray(i,a));return x&&(c[s-1]&=-1>>>32-x),n.limbs=c,n.bitLength=t,n.sign=this.sign,n},g.prototype.negate=function(){var f=new g;return f.limbs=this.limbs,f.bitLength=this.bitLength,f.sign=-1*this.sign,f},g.prototype.compare=function(f){var t=this.limbs,e=t.length,r=f.limbs,n=r.length,i=0;return this.sign<f.sign?-1:this.sign>f.sign?1:(q.set(t,0),q.set(r,e),i=N.cmp(0,e<<2,e<<2,n<<2),i*this.sign)},g.prototype.add=function(f){if(!this.sign)return f;if(!f.sign)return this;var t,e,r,n,i=this.bitLength,a=this.limbs,s=a.length,o=this.sign,x=f.bitLength,c=f.limbs,h=c.length,u=f.sign,l=new g;t=(x<i?i:x)+(0<o*u?1:0),e=t+31>>5,N.sreset();var p=N.salloc(s<<2),y=N.salloc(h<<2),b=N.salloc(e<<2);return N.z(b-p+(e<<2),0,p),q.set(a,p>>2),q.set(c,y>>2),0<o*u?(N.add(p,s<<2,y,h<<2,b,e<<2),r=o):u<o?(n=N.sub(p,s<<2,y,h<<2,b,e<<2),r=n?u:o):(n=N.sub(y,h<<2,p,s<<2,b,e<<2),r=n?o:u),n&&N.neg(b,e<<2,b,e<<2),0===N.tst(b,e<<2)?g.ZERO:(l.limbs=new Uint32Array(q.subarray(b>>2,(b>>2)+e)),l.bitLength=t,l.sign=r,l)},g.prototype.subtract=function(f){return this.add(f.negate())},g.prototype.square=function(){if(!this.sign)return g.ZERO;var f,t,e=this.bitLength,r=this.limbs,n=r.length,i=new g;f=e<<1,t=f+31>>5,N.sreset();var a=N.salloc(n<<2),s=N.salloc(t<<2);return N.z(s-a+(t<<2),0,a),q.set(r,a>>2),N.sqr(a,n<<2,s),i.limbs=new Uint32Array(q.subarray(s>>2,(s>>2)+t)),i.bitLength=f,i.sign=1,i},g.prototype.divide=function(f){var t,e,r=this.bitLength,n=this.limbs,i=n.length,a=f.bitLength,s=f.limbs,o=s.length,x=g.ZERO,c=g.ZERO;N.sreset();var h=N.salloc(i<<2),u=N.salloc(o<<2),l=N.salloc(i<<2);return N.z(l-h+(i<<2),0,h),q.set(n,h>>2),q.set(s,u>>2),N.div(h,i<<2,u,o<<2,l),t=N.tst(l,i<<2)>>2,t&&(x=new g,x.limbs=new Uint32Array(q.subarray(l>>2,(l>>2)+t)),x.bitLength=r<t<<5?r:t<<5,x.sign=this.sign*f.sign),e=N.tst(h,o<<2)>>2,e&&(c=new g,c.limbs=new Uint32Array(q.subarray(h>>2,(h>>2)+e)),c.bitLength=a<e<<5?a:e<<5,c.sign=this.sign),{quotient:x,remainder:c}},g.prototype.multiply=function(f){if(!this.sign||!f.sign)return g.ZERO;var t,e,r=this.bitLength,n=this.limbs,i=n.length,a=f.bitLength,s=f.limbs,o=s.length,x=new g;t=r+a,e=t+31>>5,N.sreset();var c=N.salloc(i<<2),h=N.salloc(o<<2),u=N.salloc(e<<2);return N.z(u-c+(e<<2),0,c),q.set(n,c>>2),q.set(s,h>>2),N.mul(c,i<<2,h,o<<2,u,e<<2),x.limbs=new Uint32Array(q.subarray(u>>2,(u>>2)+e)),x.sign=this.sign*f.sign,x.bitLength=t,x},g.prototype.isMillerRabinProbablePrime=function(f){var t=g.fromConfig(this),e=0;for(t.limbs[0]-=1;0===t.limbs[e>>5];)e+=32;for(;0==(t.limbs[e>>5]>>(31&e)&1);)e++;t=t.slice(e);for(var r=new J(this),n=this.subtract(g.ONE),i=g.fromConfig(this),a=this.limbs.length-1;0===i.limbs[a];)a--;for(;0<=--f;){for(G(i.limbs),i.limbs[0]<2&&(i.limbs[0]+=2);0<=i.compare(n);)i.limbs[a]>>>=1;var s=r.power(i,t);if(0!==s.compare(g.ONE)&&0!==s.compare(n)){for(var o=e;0<--o;){if(s=s.square().divide(r).remainder,0===s.compare(g.ONE))return!1;if(0===s.compare(n))break}if(0===o)return!1}}return!0},g.prototype.isProbablePrime=function(f){void 0===f&&(f=80);var t=this.limbs,e=0;if(0==(1&t[0]))return!1;if(f<=1)return!0;var r=0,n=0,i=0;for(e=0;e<t.length;e++){for(var a=t[e];a;)r+=3&a,a>>>=2;for(var s=t[e];s;)n+=3&s,s>>>=2,n-=3&s,s>>>=2;for(var o=t[e];o;)i+=15&o,o>>>=4,i-=15&o,o>>>=4}return!!(r%3&&n%5&&i%17)&&(f<=2||this.isMillerRabinProbablePrime(f>>>1))},g.extGCD=z,g.ZERO=g.fromNumber(0),g.ONE=g.fromNumber(1),g}(),J=function(a){function p(f){var t,e=a.call(this)||this;if(e.limbs=f.limbs,e.bitLength=f.bitLength,e.sign=f.sign,e.valueOf()<1)throw new RangeError;if(e.bitLength<=32)return e;if(!(1&e.limbs[0]))return e;var r=1+(e.bitLength+31&-32),n=new Uint32Array(r+31>>5);n[n.length-1]=1,t=new W,t.sign=1,t.bitLength=r,t.limbs=n;var i=I(4294967296,e.limbs[0]).y;return e.coefficient=i<0?-i:4294967296-i,e.comodulus=t,e.comodulusRemainder=t.divide(e).remainder,e.comodulusRemainderSquare=t.square().divide(e).remainder,e}return j(p,a),p.prototype.reduce=function(f){return f.bitLength<=32&&this.bitLength<=32?W.fromNumber(f.valueOf()%this.valueOf()):f.compare(this)<0?f:f.divide(this).remainder},p.prototype.inverse=function(f){f=this.reduce(f);var t=z(this,f);if(1!==t.gcd.valueOf())throw new Error("GCD is not 1");return t.y.sign<0?t.y.add(this).clamp(this.bitLength):t.y},p.prototype.power=function(f,t){for(var e=0,r=0;r<t.limbs.length;r++)for(var n=t.limbs[r];n;)1&n&&e++,n>>>=1;var i=8;t.bitLength<=4536&&(i=7),t.bitLength<=1736&&(i=6),t.bitLength<=630&&(i=5),t.bitLength<=210&&(i=4),t.bitLength<=60&&(i=3),t.bitLength<=12&&(i=2),e<=1<<i-1&&(i=1),f=p._Montgomery_reduce(this.reduce(f).multiply(this.comodulusRemainderSquare),this);var a=p._Montgomery_reduce(f.square(),this),s=new Array(1<<i-1);s[0]=f,s[1]=p._Montgomery_reduce(f.multiply(a),this);for(r=2;r<1<<i-1;r++)s[r]=p._Montgomery_reduce(s[r-1].multiply(a),this);var o=this.comodulusRemainder,x=o;for(r=t.limbs.length-1;0<=r;r--){n=t.limbs[r];for(var c=32;0<c;)if(2147483648&n){for(var h=n>>>32-i,u=i;0==(1&h);)h>>>=1,u--;for(var l=s[h>>>1];h;)h>>>=1,x!==o&&(x=p._Montgomery_reduce(x.square(),this));x=x!==o?p._Montgomery_reduce(x.multiply(l),this):l,n<<=u,c-=u}else x!==o&&(x=p._Montgomery_reduce(x.square(),this)),n<<=1,c--}return p._Montgomery_reduce(x,this)},p._Montgomery_reduce=function(f,t){var e=f.limbs,r=e.length,n=t.limbs,i=n.length,a=t.coefficient;N.sreset();var s=N.salloc(r<<2),o=N.salloc(i<<2),x=N.salloc(i<<2);N.z(x-s+(i<<2),0,s),q.set(e,s>>2),q.set(n,o>>2),N.mredc(s,r<<2,o,i<<2,a,x);var c=new W;return c.limbs=new Uint32Array(q.subarray(x>>2,(x>>2)+i)),c.bitLength=t.bitLength,c.sign=1,c},p}(W),Q=function(f,t,e){"use asm";var Df=0,Rf=0,Tf=0,Zf=0,Bf=0,b=0,g=0;var _=0,v=0,d=0,w=0,A=0,m=0,E=0,C=0,S=0,U=0;var y=new f.Uint8Array(e);function M(f,t,e,r,n,i,a,s,o,x,c,h,u,l,p,y){f=f|0;t=t|0;e=e|0;r=r|0;n=n|0;i=i|0;a=a|0;s=s|0;o=o|0;x=x|0;c=c|0;h=h|0;u=u|0;l=l|0;p=p|0;y=y|0;var b=0,g=0,_=0,v=0,d=0,w=0,A=0,m=0,E=0,C=0,S=0,U=0,M=0,O=0,H=0,L=0,k=0,P=0,D=0,R=0,T=0,Z=0,B=0,I=0,z=0,G=0,N=0,j=0,F=0,q=0,V=0,K=0,W=0,J=0,Q=0,X=0,Y=0,$$=0,ff=0,tf=0,ef=0,rf=0,nf=0,af=0,sf=0,of=0,xf=0,cf=0,hf=0,uf=0,lf=0,pf=0,yf=0,bf=0,gf=0,_f=0,vf=0,df=0,wf=0,Af=0,mf=0,Ef=0,Cf=0,Sf=0,Uf=0,Mf=0,Of=0,Hf=0,Lf=0,kf=0,Pf=0;b=Df;g=Rf;_=Tf;v=Zf;d=Bf;A=f+(b<<5|b>>>27)+d+(g&_|~g&v)+0x5a827999|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;A=t+(b<<5|b>>>27)+d+(g&_|~g&v)+0x5a827999|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;A=e+(b<<5|b>>>27)+d+(g&_|~g&v)+0x5a827999|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;A=r+(b<<5|b>>>27)+d+(g&_|~g&v)+0x5a827999|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;A=n+(b<<5|b>>>27)+d+(g&_|~g&v)+0x5a827999|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;A=i+(b<<5|b>>>27)+d+(g&_|~g&v)+0x5a827999|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;A=a+(b<<5|b>>>27)+d+(g&_|~g&v)+0x5a827999|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;A=s+(b<<5|b>>>27)+d+(g&_|~g&v)+0x5a827999|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;A=o+(b<<5|b>>>27)+d+(g&_|~g&v)+0x5a827999|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;A=x+(b<<5|b>>>27)+d+(g&_|~g&v)+0x5a827999|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;A=c+(b<<5|b>>>27)+d+(g&_|~g&v)+0x5a827999|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;A=h+(b<<5|b>>>27)+d+(g&_|~g&v)+0x5a827999|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;A=u+(b<<5|b>>>27)+d+(g&_|~g&v)+0x5a827999|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;A=l+(b<<5|b>>>27)+d+(g&_|~g&v)+0x5a827999|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;A=p+(b<<5|b>>>27)+d+(g&_|~g&v)+0x5a827999|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;A=y+(b<<5|b>>>27)+d+(g&_|~g&v)+0x5a827999|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=l^o^e^f;m=w<<1|w>>>31;A=m+(b<<5|b>>>27)+d+(g&_|~g&v)+0x5a827999|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=p^x^r^t;E=w<<1|w>>>31;A=E+(b<<5|b>>>27)+d+(g&_|~g&v)+0x5a827999|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=y^c^n^e;C=w<<1|w>>>31;A=C+(b<<5|b>>>27)+d+(g&_|~g&v)+0x5a827999|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=m^h^i^r;S=w<<1|w>>>31;A=S+(b<<5|b>>>27)+d+(g&_|~g&v)+0x5a827999|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=E^u^a^n;U=w<<1|w>>>31;A=U+(b<<5|b>>>27)+d+(g^_^v)+0x6ed9eba1|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=C^l^s^i;M=w<<1|w>>>31;A=M+(b<<5|b>>>27)+d+(g^_^v)+0x6ed9eba1|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=S^p^o^a;O=w<<1|w>>>31;A=O+(b<<5|b>>>27)+d+(g^_^v)+0x6ed9eba1|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=U^y^x^s;H=w<<1|w>>>31;A=H+(b<<5|b>>>27)+d+(g^_^v)+0x6ed9eba1|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=M^m^c^o;L=w<<1|w>>>31;A=L+(b<<5|b>>>27)+d+(g^_^v)+0x6ed9eba1|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=O^E^h^x;k=w<<1|w>>>31;A=k+(b<<5|b>>>27)+d+(g^_^v)+0x6ed9eba1|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=H^C^u^c;P=w<<1|w>>>31;A=P+(b<<5|b>>>27)+d+(g^_^v)+0x6ed9eba1|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=L^S^l^h;D=w<<1|w>>>31;A=D+(b<<5|b>>>27)+d+(g^_^v)+0x6ed9eba1|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=k^U^p^u;R=w<<1|w>>>31;A=R+(b<<5|b>>>27)+d+(g^_^v)+0x6ed9eba1|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=P^M^y^l;T=w<<1|w>>>31;A=T+(b<<5|b>>>27)+d+(g^_^v)+0x6ed9eba1|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=D^O^m^p;Z=w<<1|w>>>31;A=Z+(b<<5|b>>>27)+d+(g^_^v)+0x6ed9eba1|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=R^H^E^y;B=w<<1|w>>>31;A=B+(b<<5|b>>>27)+d+(g^_^v)+0x6ed9eba1|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=T^L^C^m;I=w<<1|w>>>31;A=I+(b<<5|b>>>27)+d+(g^_^v)+0x6ed9eba1|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=Z^k^S^E;z=w<<1|w>>>31;A=z+(b<<5|b>>>27)+d+(g^_^v)+0x6ed9eba1|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=B^P^U^C;G=w<<1|w>>>31;A=G+(b<<5|b>>>27)+d+(g^_^v)+0x6ed9eba1|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=I^D^M^S;N=w<<1|w>>>31;A=N+(b<<5|b>>>27)+d+(g^_^v)+0x6ed9eba1|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=z^R^O^U;j=w<<1|w>>>31;A=j+(b<<5|b>>>27)+d+(g^_^v)+0x6ed9eba1|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=G^T^H^M;F=w<<1|w>>>31;A=F+(b<<5|b>>>27)+d+(g^_^v)+0x6ed9eba1|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=N^Z^L^O;q=w<<1|w>>>31;A=q+(b<<5|b>>>27)+d+(g^_^v)+0x6ed9eba1|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=j^B^k^H;V=w<<1|w>>>31;A=V+(b<<5|b>>>27)+d+(g^_^v)+0x6ed9eba1|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=F^I^P^L;K=w<<1|w>>>31;A=K+(b<<5|b>>>27)+d+(g&_|g&v|_&v)-0x70e44324|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=q^z^D^k;W=w<<1|w>>>31;A=W+(b<<5|b>>>27)+d+(g&_|g&v|_&v)-0x70e44324|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=V^G^R^P;J=w<<1|w>>>31;A=J+(b<<5|b>>>27)+d+(g&_|g&v|_&v)-0x70e44324|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=K^N^T^D;Q=w<<1|w>>>31;A=Q+(b<<5|b>>>27)+d+(g&_|g&v|_&v)-0x70e44324|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=W^j^Z^R;X=w<<1|w>>>31;A=X+(b<<5|b>>>27)+d+(g&_|g&v|_&v)-0x70e44324|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=J^F^B^T;Y=w<<1|w>>>31;A=Y+(b<<5|b>>>27)+d+(g&_|g&v|_&v)-0x70e44324|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=Q^q^I^Z;$$=w<<1|w>>>31;A=$$+(b<<5|b>>>27)+d+(g&_|g&v|_&v)-0x70e44324|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=X^V^z^B;ff=w<<1|w>>>31;A=ff+(b<<5|b>>>27)+d+(g&_|g&v|_&v)-0x70e44324|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=Y^K^G^I;tf=w<<1|w>>>31;A=tf+(b<<5|b>>>27)+d+(g&_|g&v|_&v)-0x70e44324|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=$$^W^N^z;ef=w<<1|w>>>31;A=ef+(b<<5|b>>>27)+d+(g&_|g&v|_&v)-0x70e44324|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=ff^J^j^G;rf=w<<1|w>>>31;A=rf+(b<<5|b>>>27)+d+(g&_|g&v|_&v)-0x70e44324|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=tf^Q^F^N;nf=w<<1|w>>>31;A=nf+(b<<5|b>>>27)+d+(g&_|g&v|_&v)-0x70e44324|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=ef^X^q^j;af=w<<1|w>>>31;A=af+(b<<5|b>>>27)+d+(g&_|g&v|_&v)-0x70e44324|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=rf^Y^V^F;sf=w<<1|w>>>31;A=sf+(b<<5|b>>>27)+d+(g&_|g&v|_&v)-0x70e44324|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=nf^$$^K^q;of=w<<1|w>>>31;A=of+(b<<5|b>>>27)+d+(g&_|g&v|_&v)-0x70e44324|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=af^ff^W^V;xf=w<<1|w>>>31;A=xf+(b<<5|b>>>27)+d+(g&_|g&v|_&v)-0x70e44324|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=sf^tf^J^K;cf=w<<1|w>>>31;A=cf+(b<<5|b>>>27)+d+(g&_|g&v|_&v)-0x70e44324|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=of^ef^Q^W;hf=w<<1|w>>>31;A=hf+(b<<5|b>>>27)+d+(g&_|g&v|_&v)-0x70e44324|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=xf^rf^X^J;uf=w<<1|w>>>31;A=uf+(b<<5|b>>>27)+d+(g&_|g&v|_&v)-0x70e44324|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=cf^nf^Y^Q;lf=w<<1|w>>>31;A=lf+(b<<5|b>>>27)+d+(g&_|g&v|_&v)-0x70e44324|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=hf^af^$$^X;pf=w<<1|w>>>31;A=pf+(b<<5|b>>>27)+d+(g^_^v)-0x359d3e2a|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=uf^sf^ff^Y;yf=w<<1|w>>>31;A=yf+(b<<5|b>>>27)+d+(g^_^v)-0x359d3e2a|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=lf^of^tf^$$;bf=w<<1|w>>>31;A=bf+(b<<5|b>>>27)+d+(g^_^v)-0x359d3e2a|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=pf^xf^ef^ff;gf=w<<1|w>>>31;A=gf+(b<<5|b>>>27)+d+(g^_^v)-0x359d3e2a|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=yf^cf^rf^tf;_f=w<<1|w>>>31;A=_f+(b<<5|b>>>27)+d+(g^_^v)-0x359d3e2a|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=bf^hf^nf^ef;vf=w<<1|w>>>31;A=vf+(b<<5|b>>>27)+d+(g^_^v)-0x359d3e2a|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=gf^uf^af^rf;df=w<<1|w>>>31;A=df+(b<<5|b>>>27)+d+(g^_^v)-0x359d3e2a|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=_f^lf^sf^nf;wf=w<<1|w>>>31;A=wf+(b<<5|b>>>27)+d+(g^_^v)-0x359d3e2a|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=vf^pf^of^af;Af=w<<1|w>>>31;A=Af+(b<<5|b>>>27)+d+(g^_^v)-0x359d3e2a|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=df^yf^xf^sf;mf=w<<1|w>>>31;A=mf+(b<<5|b>>>27)+d+(g^_^v)-0x359d3e2a|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=wf^bf^cf^of;Ef=w<<1|w>>>31;A=Ef+(b<<5|b>>>27)+d+(g^_^v)-0x359d3e2a|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=Af^gf^hf^xf;Cf=w<<1|w>>>31;A=Cf+(b<<5|b>>>27)+d+(g^_^v)-0x359d3e2a|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=mf^_f^uf^cf;Sf=w<<1|w>>>31;A=Sf+(b<<5|b>>>27)+d+(g^_^v)-0x359d3e2a|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=Ef^vf^lf^hf;Uf=w<<1|w>>>31;A=Uf+(b<<5|b>>>27)+d+(g^_^v)-0x359d3e2a|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=Cf^df^pf^uf;Mf=w<<1|w>>>31;A=Mf+(b<<5|b>>>27)+d+(g^_^v)-0x359d3e2a|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=Sf^wf^yf^lf;Of=w<<1|w>>>31;A=Of+(b<<5|b>>>27)+d+(g^_^v)-0x359d3e2a|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=Uf^Af^bf^pf;Hf=w<<1|w>>>31;A=Hf+(b<<5|b>>>27)+d+(g^_^v)-0x359d3e2a|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=Mf^mf^gf^yf;Lf=w<<1|w>>>31;A=Lf+(b<<5|b>>>27)+d+(g^_^v)-0x359d3e2a|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=Of^Ef^_f^bf;kf=w<<1|w>>>31;A=kf+(b<<5|b>>>27)+d+(g^_^v)-0x359d3e2a|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;w=Hf^Cf^vf^gf;Pf=w<<1|w>>>31;A=Pf+(b<<5|b>>>27)+d+(g^_^v)-0x359d3e2a|0;d=v;v=_;_=g<<30|g>>>2;g=b;b=A;Df=Df+b|0;Rf=Rf+g|0;Tf=Tf+_|0;Zf=Zf+v|0;Bf=Bf+d|0}function i(f){f=f|0;M(y[f|0]<<24|y[f|1]<<16|y[f|2]<<8|y[f|3],y[f|4]<<24|y[f|5]<<16|y[f|6]<<8|y[f|7],y[f|8]<<24|y[f|9]<<16|y[f|10]<<8|y[f|11],y[f|12]<<24|y[f|13]<<16|y[f|14]<<8|y[f|15],y[f|16]<<24|y[f|17]<<16|y[f|18]<<8|y[f|19],y[f|20]<<24|y[f|21]<<16|y[f|22]<<8|y[f|23],y[f|24]<<24|y[f|25]<<16|y[f|26]<<8|y[f|27],y[f|28]<<24|y[f|29]<<16|y[f|30]<<8|y[f|31],y[f|32]<<24|y[f|33]<<16|y[f|34]<<8|y[f|35],y[f|36]<<24|y[f|37]<<16|y[f|38]<<8|y[f|39],y[f|40]<<24|y[f|41]<<16|y[f|42]<<8|y[f|43],y[f|44]<<24|y[f|45]<<16|y[f|46]<<8|y[f|47],y[f|48]<<24|y[f|49]<<16|y[f|50]<<8|y[f|51],y[f|52]<<24|y[f|53]<<16|y[f|54]<<8|y[f|55],y[f|56]<<24|y[f|57]<<16|y[f|58]<<8|y[f|59],y[f|60]<<24|y[f|61]<<16|y[f|62]<<8|y[f|63])}function O(f){f=f|0;y[f|0]=Df>>>24;y[f|1]=Df>>>16&255;y[f|2]=Df>>>8&255;y[f|3]=Df&255;y[f|4]=Rf>>>24;y[f|5]=Rf>>>16&255;y[f|6]=Rf>>>8&255;y[f|7]=Rf&255;y[f|8]=Tf>>>24;y[f|9]=Tf>>>16&255;y[f|10]=Tf>>>8&255;y[f|11]=Tf&255;y[f|12]=Zf>>>24;y[f|13]=Zf>>>16&255;y[f|14]=Zf>>>8&255;y[f|15]=Zf&255;y[f|16]=Bf>>>24;y[f|17]=Bf>>>16&255;y[f|18]=Bf>>>8&255;y[f|19]=Bf&255}function H(){Df=0x67452301;Rf=0xefcdab89;Tf=0x98badcfe;Zf=0x10325476;Bf=0xc3d2e1f0;b=g=0}function r(f,t,e,r,n,i,a){f=f|0;t=t|0;e=e|0;r=r|0;n=n|0;i=i|0;a=a|0;Df=f;Rf=t;Tf=e;Zf=r;Bf=n;b=i;g=a}function a(f,t){f=f|0;t=t|0;var e=0;if(f&63)return-1;while((t|0)>=64){i(f);f=f+64|0;t=t-64|0;e=e+64|0}b=b+e|0;if(b>>>0<e>>>0)g=g+1|0;return e|0}function x(f,t,e){f=f|0;t=t|0;e=e|0;var r=0,n=0;if(f&63)return-1;if(~e)if(e&31)return-1;if((t|0)>=64){r=a(f,t)|0;if((r|0)==-1)return-1;f=f+r|0;t=t-r|0}r=r+t|0;b=b+t|0;if(b>>>0<t>>>0)g=g+1|0;y[f|t]=0x80;if((t|0)>=56){for(n=t+1|0;(n|0)<64;n=n+1|0)y[f|n]=0x00;i(f);t=0;y[f|0]=0}for(n=t+1|0;(n|0)<59;n=n+1|0)y[f|n]=0;y[f|56]=g>>>21&255;y[f|57]=g>>>13&255;y[f|58]=g>>>5&255;y[f|59]=g<<3&255|b>>>29;y[f|60]=b>>>21&255;y[f|61]=b>>>13&255;y[f|62]=b>>>5&255;y[f|63]=b<<3&255;i(f);if(~e)O(e);return r|0}function L(){Df=_;Rf=v;Tf=d;Zf=w;Bf=A;b=64;g=0}function k(){Df=m;Rf=E;Tf=C;Zf=S;Bf=U;b=64;g=0}function n(f,t,e,r,n,i,a,s,o,x,c,h,u,l,p,y){f=f|0;t=t|0;e=e|0;r=r|0;n=n|0;i=i|0;a=a|0;s=s|0;o=o|0;x=x|0;c=c|0;h=h|0;u=u|0;l=l|0;p=p|0;y=y|0;H();M(f^0x5c5c5c5c,t^0x5c5c5c5c,e^0x5c5c5c5c,r^0x5c5c5c5c,n^0x5c5c5c5c,i^0x5c5c5c5c,a^0x5c5c5c5c,s^0x5c5c5c5c,o^0x5c5c5c5c,x^0x5c5c5c5c,c^0x5c5c5c5c,h^0x5c5c5c5c,u^0x5c5c5c5c,l^0x5c5c5c5c,p^0x5c5c5c5c,y^0x5c5c5c5c);m=Df;E=Rf;C=Tf;S=Zf;U=Bf;H();M(f^0x36363636,t^0x36363636,e^0x36363636,r^0x36363636,n^0x36363636,i^0x36363636,a^0x36363636,s^0x36363636,o^0x36363636,x^0x36363636,c^0x36363636,h^0x36363636,u^0x36363636,l^0x36363636,p^0x36363636,y^0x36363636);_=Df;v=Rf;d=Tf;w=Zf;A=Bf;b=64;g=0}function P(f,t,e){f=f|0;t=t|0;e=e|0;var r=0,n=0,i=0,a=0,s=0,o=0;if(f&63)return-1;if(~e)if(e&31)return-1;o=x(f,t,-1)|0;r=Df,n=Rf,i=Tf,a=Zf,s=Bf;k();M(r,n,i,a,s,0x80000000,0,0,0,0,0,0,0,0,0,672);if(~e)O(e);return o|0}function s(f,t,e,r,n){f=f|0;t=t|0;e=e|0;r=r|0;n=n|0;var i=0,a=0,s=0,o=0,x=0,c=0,h=0,u=0,l=0,p=0;if(f&63)return-1;if(~n)if(n&31)return-1;y[f+t|0]=e>>>24;y[f+t+1|0]=e>>>16&255;y[f+t+2|0]=e>>>8&255;y[f+t+3|0]=e&255;P(f,t+4|0,-1)|0;i=c=Df,a=h=Rf,s=u=Tf,o=l=Zf,x=p=Bf;r=r-1|0;while((r|0)>0){L();M(c,h,u,l,p,0x80000000,0,0,0,0,0,0,0,0,0,672);c=Df,h=Rf,u=Tf,l=Zf,p=Bf;k();M(c,h,u,l,p,0x80000000,0,0,0,0,0,0,0,0,0,672);c=Df,h=Rf,u=Tf,l=Zf,p=Bf;i=i^Df;a=a^Rf;s=s^Tf;o=o^Zf;x=x^Bf;r=r-1|0}Df=i;Rf=a;Tf=s;Zf=o;Bf=x;if(~n)O(n);return 0}return{reset:H,init:r,process:a,finish:x,hmac_reset:L,hmac_init:n,hmac_finish:P,pbkdf2_generate_block:s}},X=function(){function f(){this.pos=0,this.len=0}return f.prototype.reset=function(){return this.result=null,this.pos=0,this.len=0,this.asm.reset(),this},f.prototype.process=function(f){if(null!==this.result)throw new b("state must be reset before processing new data");for(var t=this.asm,e=this.heap,r=this.pos,n=this.len,i=0,a=f.length,s=0;0<a;)s=y(e,r+n,f,i,a),n+=s,i+=s,a-=s,s=t.process(r,n),r+=s,n-=s,n||(r=0);return this.pos=r,this.len=n,this},f.prototype.finish=function(){if(null!==this.result)throw new b("state must be reset before processing new data");return this.asm.finish(this.pos,this.len,0),this.result=new Uint8Array(this.HASH_SIZE),this.result.set(this.heap.subarray(0,this.HASH_SIZE)),this.pos=0,this.len=0,this},f}(),Y=function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,t){f.__proto__=t}||function(f,t){for(var e in t)t.hasOwnProperty(e)&&(f[e]=t[e])};return function(f,t){function e(){this.constructor=f}r(f,t),f.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),$$=64,ff=20,tf=function(t){function f(){var f=t.call(this)||this;return f.NAME="sha1",f.BLOCK_SIZE=$$,f.HASH_SIZE=ff,f.heap=x(),f.asm=Q({Uint8Array:Uint8Array},null,f.heap.buffer),f.reset(),f}return Y(f,t),f.NAME="sha1",f}(X),ef=function(f,t,e){"use asm";var E=0,C=0,S=0,U=0,M=0,O=0,H=0,L=0,b=0,g=0;var _=0,v=0,d=0,w=0,A=0,m=0,k=0,P=0,D=0,R=0,T=0,Z=0,B=0,I=0,z=0,G=0;var N=new f.Uint8Array(e);function j(f,t,e,r,n,i,a,s,o,x,c,h,u,l,p,y){f=f|0;t=t|0;e=e|0;r=r|0;n=n|0;i=i|0;a=a|0;s=s|0;o=o|0;x=x|0;c=c|0;h=h|0;u=u|0;l=l|0;p=p|0;y=y|0;var b=0,g=0,_=0,v=0,d=0,w=0,A=0,m=0;b=E;g=C;_=S;v=U;d=M;w=O;A=H;m=L;m=f+m+(d>>>6^d>>>11^d>>>25^d<<26^d<<21^d<<7)+(A^d&(w^A))+0x428a2f98|0;v=v+m|0;m=m+(b&g^_&(b^g))+(b>>>2^b>>>13^b>>>22^b<<30^b<<19^b<<10)|0;A=t+A+(v>>>6^v>>>11^v>>>25^v<<26^v<<21^v<<7)+(w^v&(d^w))+0x71374491|0;_=_+A|0;A=A+(m&b^g&(m^b))+(m>>>2^m>>>13^m>>>22^m<<30^m<<19^m<<10)|0;w=e+w+(_>>>6^_>>>11^_>>>25^_<<26^_<<21^_<<7)+(d^_&(v^d))+0xb5c0fbcf|0;g=g+w|0;w=w+(A&m^b&(A^m))+(A>>>2^A>>>13^A>>>22^A<<30^A<<19^A<<10)|0;d=r+d+(g>>>6^g>>>11^g>>>25^g<<26^g<<21^g<<7)+(v^g&(_^v))+0xe9b5dba5|0;b=b+d|0;d=d+(w&A^m&(w^A))+(w>>>2^w>>>13^w>>>22^w<<30^w<<19^w<<10)|0;v=n+v+(b>>>6^b>>>11^b>>>25^b<<26^b<<21^b<<7)+(_^b&(g^_))+0x3956c25b|0;m=m+v|0;v=v+(d&w^A&(d^w))+(d>>>2^d>>>13^d>>>22^d<<30^d<<19^d<<10)|0;_=i+_+(m>>>6^m>>>11^m>>>25^m<<26^m<<21^m<<7)+(g^m&(b^g))+0x59f111f1|0;A=A+_|0;_=_+(v&d^w&(v^d))+(v>>>2^v>>>13^v>>>22^v<<30^v<<19^v<<10)|0;g=a+g+(A>>>6^A>>>11^A>>>25^A<<26^A<<21^A<<7)+(b^A&(m^b))+0x923f82a4|0;w=w+g|0;g=g+(_&v^d&(_^v))+(_>>>2^_>>>13^_>>>22^_<<30^_<<19^_<<10)|0;b=s+b+(w>>>6^w>>>11^w>>>25^w<<26^w<<21^w<<7)+(m^w&(A^m))+0xab1c5ed5|0;d=d+b|0;b=b+(g&_^v&(g^_))+(g>>>2^g>>>13^g>>>22^g<<30^g<<19^g<<10)|0;m=o+m+(d>>>6^d>>>11^d>>>25^d<<26^d<<21^d<<7)+(A^d&(w^A))+0xd807aa98|0;v=v+m|0;m=m+(b&g^_&(b^g))+(b>>>2^b>>>13^b>>>22^b<<30^b<<19^b<<10)|0;A=x+A+(v>>>6^v>>>11^v>>>25^v<<26^v<<21^v<<7)+(w^v&(d^w))+0x12835b01|0;_=_+A|0;A=A+(m&b^g&(m^b))+(m>>>2^m>>>13^m>>>22^m<<30^m<<19^m<<10)|0;w=c+w+(_>>>6^_>>>11^_>>>25^_<<26^_<<21^_<<7)+(d^_&(v^d))+0x243185be|0;g=g+w|0;w=w+(A&m^b&(A^m))+(A>>>2^A>>>13^A>>>22^A<<30^A<<19^A<<10)|0;d=h+d+(g>>>6^g>>>11^g>>>25^g<<26^g<<21^g<<7)+(v^g&(_^v))+0x550c7dc3|0;b=b+d|0;d=d+(w&A^m&(w^A))+(w>>>2^w>>>13^w>>>22^w<<30^w<<19^w<<10)|0;v=u+v+(b>>>6^b>>>11^b>>>25^b<<26^b<<21^b<<7)+(_^b&(g^_))+0x72be5d74|0;m=m+v|0;v=v+(d&w^A&(d^w))+(d>>>2^d>>>13^d>>>22^d<<30^d<<19^d<<10)|0;_=l+_+(m>>>6^m>>>11^m>>>25^m<<26^m<<21^m<<7)+(g^m&(b^g))+0x80deb1fe|0;A=A+_|0;_=_+(v&d^w&(v^d))+(v>>>2^v>>>13^v>>>22^v<<30^v<<19^v<<10)|0;g=p+g+(A>>>6^A>>>11^A>>>25^A<<26^A<<21^A<<7)+(b^A&(m^b))+0x9bdc06a7|0;w=w+g|0;g=g+(_&v^d&(_^v))+(_>>>2^_>>>13^_>>>22^_<<30^_<<19^_<<10)|0;b=y+b+(w>>>6^w>>>11^w>>>25^w<<26^w<<21^w<<7)+(m^w&(A^m))+0xc19bf174|0;d=d+b|0;b=b+(g&_^v&(g^_))+(g>>>2^g>>>13^g>>>22^g<<30^g<<19^g<<10)|0;f=(t>>>7^t>>>18^t>>>3^t<<25^t<<14)+(p>>>17^p>>>19^p>>>10^p<<15^p<<13)+f+x|0;m=f+m+(d>>>6^d>>>11^d>>>25^d<<26^d<<21^d<<7)+(A^d&(w^A))+0xe49b69c1|0;v=v+m|0;m=m+(b&g^_&(b^g))+(b>>>2^b>>>13^b>>>22^b<<30^b<<19^b<<10)|0;t=(e>>>7^e>>>18^e>>>3^e<<25^e<<14)+(y>>>17^y>>>19^y>>>10^y<<15^y<<13)+t+c|0;A=t+A+(v>>>6^v>>>11^v>>>25^v<<26^v<<21^v<<7)+(w^v&(d^w))+0xefbe4786|0;_=_+A|0;A=A+(m&b^g&(m^b))+(m>>>2^m>>>13^m>>>22^m<<30^m<<19^m<<10)|0;e=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(f>>>17^f>>>19^f>>>10^f<<15^f<<13)+e+h|0;w=e+w+(_>>>6^_>>>11^_>>>25^_<<26^_<<21^_<<7)+(d^_&(v^d))+0x0fc19dc6|0;g=g+w|0;w=w+(A&m^b&(A^m))+(A>>>2^A>>>13^A>>>22^A<<30^A<<19^A<<10)|0;r=(n>>>7^n>>>18^n>>>3^n<<25^n<<14)+(t>>>17^t>>>19^t>>>10^t<<15^t<<13)+r+u|0;d=r+d+(g>>>6^g>>>11^g>>>25^g<<26^g<<21^g<<7)+(v^g&(_^v))+0x240ca1cc|0;b=b+d|0;d=d+(w&A^m&(w^A))+(w>>>2^w>>>13^w>>>22^w<<30^w<<19^w<<10)|0;n=(i>>>7^i>>>18^i>>>3^i<<25^i<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+n+l|0;v=n+v+(b>>>6^b>>>11^b>>>25^b<<26^b<<21^b<<7)+(_^b&(g^_))+0x2de92c6f|0;m=m+v|0;v=v+(d&w^A&(d^w))+(d>>>2^d>>>13^d>>>22^d<<30^d<<19^d<<10)|0;i=(a>>>7^a>>>18^a>>>3^a<<25^a<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+i+p|0;_=i+_+(m>>>6^m>>>11^m>>>25^m<<26^m<<21^m<<7)+(g^m&(b^g))+0x4a7484aa|0;A=A+_|0;_=_+(v&d^w&(v^d))+(v>>>2^v>>>13^v>>>22^v<<30^v<<19^v<<10)|0;a=(s>>>7^s>>>18^s>>>3^s<<25^s<<14)+(n>>>17^n>>>19^n>>>10^n<<15^n<<13)+a+y|0;g=a+g+(A>>>6^A>>>11^A>>>25^A<<26^A<<21^A<<7)+(b^A&(m^b))+0x5cb0a9dc|0;w=w+g|0;g=g+(_&v^d&(_^v))+(_>>>2^_>>>13^_>>>22^_<<30^_<<19^_<<10)|0;s=(o>>>7^o>>>18^o>>>3^o<<25^o<<14)+(i>>>17^i>>>19^i>>>10^i<<15^i<<13)+s+f|0;b=s+b+(w>>>6^w>>>11^w>>>25^w<<26^w<<21^w<<7)+(m^w&(A^m))+0x76f988da|0;d=d+b|0;b=b+(g&_^v&(g^_))+(g>>>2^g>>>13^g>>>22^g<<30^g<<19^g<<10)|0;o=(x>>>7^x>>>18^x>>>3^x<<25^x<<14)+(a>>>17^a>>>19^a>>>10^a<<15^a<<13)+o+t|0;m=o+m+(d>>>6^d>>>11^d>>>25^d<<26^d<<21^d<<7)+(A^d&(w^A))+0x983e5152|0;v=v+m|0;m=m+(b&g^_&(b^g))+(b>>>2^b>>>13^b>>>22^b<<30^b<<19^b<<10)|0;x=(c>>>7^c>>>18^c>>>3^c<<25^c<<14)+(s>>>17^s>>>19^s>>>10^s<<15^s<<13)+x+e|0;A=x+A+(v>>>6^v>>>11^v>>>25^v<<26^v<<21^v<<7)+(w^v&(d^w))+0xa831c66d|0;_=_+A|0;A=A+(m&b^g&(m^b))+(m>>>2^m>>>13^m>>>22^m<<30^m<<19^m<<10)|0;c=(h>>>7^h>>>18^h>>>3^h<<25^h<<14)+(o>>>17^o>>>19^o>>>10^o<<15^o<<13)+c+r|0;w=c+w+(_>>>6^_>>>11^_>>>25^_<<26^_<<21^_<<7)+(d^_&(v^d))+0xb00327c8|0;g=g+w|0;w=w+(A&m^b&(A^m))+(A>>>2^A>>>13^A>>>22^A<<30^A<<19^A<<10)|0;h=(u>>>7^u>>>18^u>>>3^u<<25^u<<14)+(x>>>17^x>>>19^x>>>10^x<<15^x<<13)+h+n|0;d=h+d+(g>>>6^g>>>11^g>>>25^g<<26^g<<21^g<<7)+(v^g&(_^v))+0xbf597fc7|0;b=b+d|0;d=d+(w&A^m&(w^A))+(w>>>2^w>>>13^w>>>22^w<<30^w<<19^w<<10)|0;u=(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(c>>>17^c>>>19^c>>>10^c<<15^c<<13)+u+i|0;v=u+v+(b>>>6^b>>>11^b>>>25^b<<26^b<<21^b<<7)+(_^b&(g^_))+0xc6e00bf3|0;m=m+v|0;v=v+(d&w^A&(d^w))+(d>>>2^d>>>13^d>>>22^d<<30^d<<19^d<<10)|0;l=(p>>>7^p>>>18^p>>>3^p<<25^p<<14)+(h>>>17^h>>>19^h>>>10^h<<15^h<<13)+l+a|0;_=l+_+(m>>>6^m>>>11^m>>>25^m<<26^m<<21^m<<7)+(g^m&(b^g))+0xd5a79147|0;A=A+_|0;_=_+(v&d^w&(v^d))+(v>>>2^v>>>13^v>>>22^v<<30^v<<19^v<<10)|0;p=(y>>>7^y>>>18^y>>>3^y<<25^y<<14)+(u>>>17^u>>>19^u>>>10^u<<15^u<<13)+p+s|0;g=p+g+(A>>>6^A>>>11^A>>>25^A<<26^A<<21^A<<7)+(b^A&(m^b))+0x06ca6351|0;w=w+g|0;g=g+(_&v^d&(_^v))+(_>>>2^_>>>13^_>>>22^_<<30^_<<19^_<<10)|0;y=(f>>>7^f>>>18^f>>>3^f<<25^f<<14)+(l>>>17^l>>>19^l>>>10^l<<15^l<<13)+y+o|0;b=y+b+(w>>>6^w>>>11^w>>>25^w<<26^w<<21^w<<7)+(m^w&(A^m))+0x14292967|0;d=d+b|0;b=b+(g&_^v&(g^_))+(g>>>2^g>>>13^g>>>22^g<<30^g<<19^g<<10)|0;f=(t>>>7^t>>>18^t>>>3^t<<25^t<<14)+(p>>>17^p>>>19^p>>>10^p<<15^p<<13)+f+x|0;m=f+m+(d>>>6^d>>>11^d>>>25^d<<26^d<<21^d<<7)+(A^d&(w^A))+0x27b70a85|0;v=v+m|0;m=m+(b&g^_&(b^g))+(b>>>2^b>>>13^b>>>22^b<<30^b<<19^b<<10)|0;t=(e>>>7^e>>>18^e>>>3^e<<25^e<<14)+(y>>>17^y>>>19^y>>>10^y<<15^y<<13)+t+c|0;A=t+A+(v>>>6^v>>>11^v>>>25^v<<26^v<<21^v<<7)+(w^v&(d^w))+0x2e1b2138|0;_=_+A|0;A=A+(m&b^g&(m^b))+(m>>>2^m>>>13^m>>>22^m<<30^m<<19^m<<10)|0;e=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(f>>>17^f>>>19^f>>>10^f<<15^f<<13)+e+h|0;w=e+w+(_>>>6^_>>>11^_>>>25^_<<26^_<<21^_<<7)+(d^_&(v^d))+0x4d2c6dfc|0;g=g+w|0;w=w+(A&m^b&(A^m))+(A>>>2^A>>>13^A>>>22^A<<30^A<<19^A<<10)|0;r=(n>>>7^n>>>18^n>>>3^n<<25^n<<14)+(t>>>17^t>>>19^t>>>10^t<<15^t<<13)+r+u|0;d=r+d+(g>>>6^g>>>11^g>>>25^g<<26^g<<21^g<<7)+(v^g&(_^v))+0x53380d13|0;b=b+d|0;d=d+(w&A^m&(w^A))+(w>>>2^w>>>13^w>>>22^w<<30^w<<19^w<<10)|0;n=(i>>>7^i>>>18^i>>>3^i<<25^i<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+n+l|0;v=n+v+(b>>>6^b>>>11^b>>>25^b<<26^b<<21^b<<7)+(_^b&(g^_))+0x650a7354|0;m=m+v|0;v=v+(d&w^A&(d^w))+(d>>>2^d>>>13^d>>>22^d<<30^d<<19^d<<10)|0;i=(a>>>7^a>>>18^a>>>3^a<<25^a<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+i+p|0;_=i+_+(m>>>6^m>>>11^m>>>25^m<<26^m<<21^m<<7)+(g^m&(b^g))+0x766a0abb|0;A=A+_|0;_=_+(v&d^w&(v^d))+(v>>>2^v>>>13^v>>>22^v<<30^v<<19^v<<10)|0;a=(s>>>7^s>>>18^s>>>3^s<<25^s<<14)+(n>>>17^n>>>19^n>>>10^n<<15^n<<13)+a+y|0;g=a+g+(A>>>6^A>>>11^A>>>25^A<<26^A<<21^A<<7)+(b^A&(m^b))+0x81c2c92e|0;w=w+g|0;g=g+(_&v^d&(_^v))+(_>>>2^_>>>13^_>>>22^_<<30^_<<19^_<<10)|0;s=(o>>>7^o>>>18^o>>>3^o<<25^o<<14)+(i>>>17^i>>>19^i>>>10^i<<15^i<<13)+s+f|0;b=s+b+(w>>>6^w>>>11^w>>>25^w<<26^w<<21^w<<7)+(m^w&(A^m))+0x92722c85|0;d=d+b|0;b=b+(g&_^v&(g^_))+(g>>>2^g>>>13^g>>>22^g<<30^g<<19^g<<10)|0;o=(x>>>7^x>>>18^x>>>3^x<<25^x<<14)+(a>>>17^a>>>19^a>>>10^a<<15^a<<13)+o+t|0;m=o+m+(d>>>6^d>>>11^d>>>25^d<<26^d<<21^d<<7)+(A^d&(w^A))+0xa2bfe8a1|0;v=v+m|0;m=m+(b&g^_&(b^g))+(b>>>2^b>>>13^b>>>22^b<<30^b<<19^b<<10)|0;x=(c>>>7^c>>>18^c>>>3^c<<25^c<<14)+(s>>>17^s>>>19^s>>>10^s<<15^s<<13)+x+e|0;A=x+A+(v>>>6^v>>>11^v>>>25^v<<26^v<<21^v<<7)+(w^v&(d^w))+0xa81a664b|0;_=_+A|0;A=A+(m&b^g&(m^b))+(m>>>2^m>>>13^m>>>22^m<<30^m<<19^m<<10)|0;c=(h>>>7^h>>>18^h>>>3^h<<25^h<<14)+(o>>>17^o>>>19^o>>>10^o<<15^o<<13)+c+r|0;w=c+w+(_>>>6^_>>>11^_>>>25^_<<26^_<<21^_<<7)+(d^_&(v^d))+0xc24b8b70|0;g=g+w|0;w=w+(A&m^b&(A^m))+(A>>>2^A>>>13^A>>>22^A<<30^A<<19^A<<10)|0;h=(u>>>7^u>>>18^u>>>3^u<<25^u<<14)+(x>>>17^x>>>19^x>>>10^x<<15^x<<13)+h+n|0;d=h+d+(g>>>6^g>>>11^g>>>25^g<<26^g<<21^g<<7)+(v^g&(_^v))+0xc76c51a3|0;b=b+d|0;d=d+(w&A^m&(w^A))+(w>>>2^w>>>13^w>>>22^w<<30^w<<19^w<<10)|0;u=(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(c>>>17^c>>>19^c>>>10^c<<15^c<<13)+u+i|0;v=u+v+(b>>>6^b>>>11^b>>>25^b<<26^b<<21^b<<7)+(_^b&(g^_))+0xd192e819|0;m=m+v|0;v=v+(d&w^A&(d^w))+(d>>>2^d>>>13^d>>>22^d<<30^d<<19^d<<10)|0;l=(p>>>7^p>>>18^p>>>3^p<<25^p<<14)+(h>>>17^h>>>19^h>>>10^h<<15^h<<13)+l+a|0;_=l+_+(m>>>6^m>>>11^m>>>25^m<<26^m<<21^m<<7)+(g^m&(b^g))+0xd6990624|0;A=A+_|0;_=_+(v&d^w&(v^d))+(v>>>2^v>>>13^v>>>22^v<<30^v<<19^v<<10)|0;p=(y>>>7^y>>>18^y>>>3^y<<25^y<<14)+(u>>>17^u>>>19^u>>>10^u<<15^u<<13)+p+s|0;g=p+g+(A>>>6^A>>>11^A>>>25^A<<26^A<<21^A<<7)+(b^A&(m^b))+0xf40e3585|0;w=w+g|0;g=g+(_&v^d&(_^v))+(_>>>2^_>>>13^_>>>22^_<<30^_<<19^_<<10)|0;y=(f>>>7^f>>>18^f>>>3^f<<25^f<<14)+(l>>>17^l>>>19^l>>>10^l<<15^l<<13)+y+o|0;b=y+b+(w>>>6^w>>>11^w>>>25^w<<26^w<<21^w<<7)+(m^w&(A^m))+0x106aa070|0;d=d+b|0;b=b+(g&_^v&(g^_))+(g>>>2^g>>>13^g>>>22^g<<30^g<<19^g<<10)|0;f=(t>>>7^t>>>18^t>>>3^t<<25^t<<14)+(p>>>17^p>>>19^p>>>10^p<<15^p<<13)+f+x|0;m=f+m+(d>>>6^d>>>11^d>>>25^d<<26^d<<21^d<<7)+(A^d&(w^A))+0x19a4c116|0;v=v+m|0;m=m+(b&g^_&(b^g))+(b>>>2^b>>>13^b>>>22^b<<30^b<<19^b<<10)|0;t=(e>>>7^e>>>18^e>>>3^e<<25^e<<14)+(y>>>17^y>>>19^y>>>10^y<<15^y<<13)+t+c|0;A=t+A+(v>>>6^v>>>11^v>>>25^v<<26^v<<21^v<<7)+(w^v&(d^w))+0x1e376c08|0;_=_+A|0;A=A+(m&b^g&(m^b))+(m>>>2^m>>>13^m>>>22^m<<30^m<<19^m<<10)|0;e=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(f>>>17^f>>>19^f>>>10^f<<15^f<<13)+e+h|0;w=e+w+(_>>>6^_>>>11^_>>>25^_<<26^_<<21^_<<7)+(d^_&(v^d))+0x2748774c|0;g=g+w|0;w=w+(A&m^b&(A^m))+(A>>>2^A>>>13^A>>>22^A<<30^A<<19^A<<10)|0;r=(n>>>7^n>>>18^n>>>3^n<<25^n<<14)+(t>>>17^t>>>19^t>>>10^t<<15^t<<13)+r+u|0;d=r+d+(g>>>6^g>>>11^g>>>25^g<<26^g<<21^g<<7)+(v^g&(_^v))+0x34b0bcb5|0;b=b+d|0;d=d+(w&A^m&(w^A))+(w>>>2^w>>>13^w>>>22^w<<30^w<<19^w<<10)|0;n=(i>>>7^i>>>18^i>>>3^i<<25^i<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+n+l|0;v=n+v+(b>>>6^b>>>11^b>>>25^b<<26^b<<21^b<<7)+(_^b&(g^_))+0x391c0cb3|0;m=m+v|0;v=v+(d&w^A&(d^w))+(d>>>2^d>>>13^d>>>22^d<<30^d<<19^d<<10)|0;i=(a>>>7^a>>>18^a>>>3^a<<25^a<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+i+p|0;_=i+_+(m>>>6^m>>>11^m>>>25^m<<26^m<<21^m<<7)+(g^m&(b^g))+0x4ed8aa4a|0;A=A+_|0;_=_+(v&d^w&(v^d))+(v>>>2^v>>>13^v>>>22^v<<30^v<<19^v<<10)|0;a=(s>>>7^s>>>18^s>>>3^s<<25^s<<14)+(n>>>17^n>>>19^n>>>10^n<<15^n<<13)+a+y|0;g=a+g+(A>>>6^A>>>11^A>>>25^A<<26^A<<21^A<<7)+(b^A&(m^b))+0x5b9cca4f|0;w=w+g|0;g=g+(_&v^d&(_^v))+(_>>>2^_>>>13^_>>>22^_<<30^_<<19^_<<10)|0;s=(o>>>7^o>>>18^o>>>3^o<<25^o<<14)+(i>>>17^i>>>19^i>>>10^i<<15^i<<13)+s+f|0;b=s+b+(w>>>6^w>>>11^w>>>25^w<<26^w<<21^w<<7)+(m^w&(A^m))+0x682e6ff3|0;d=d+b|0;b=b+(g&_^v&(g^_))+(g>>>2^g>>>13^g>>>22^g<<30^g<<19^g<<10)|0;o=(x>>>7^x>>>18^x>>>3^x<<25^x<<14)+(a>>>17^a>>>19^a>>>10^a<<15^a<<13)+o+t|0;m=o+m+(d>>>6^d>>>11^d>>>25^d<<26^d<<21^d<<7)+(A^d&(w^A))+0x748f82ee|0;v=v+m|0;m=m+(b&g^_&(b^g))+(b>>>2^b>>>13^b>>>22^b<<30^b<<19^b<<10)|0;x=(c>>>7^c>>>18^c>>>3^c<<25^c<<14)+(s>>>17^s>>>19^s>>>10^s<<15^s<<13)+x+e|0;A=x+A+(v>>>6^v>>>11^v>>>25^v<<26^v<<21^v<<7)+(w^v&(d^w))+0x78a5636f|0;_=_+A|0;A=A+(m&b^g&(m^b))+(m>>>2^m>>>13^m>>>22^m<<30^m<<19^m<<10)|0;c=(h>>>7^h>>>18^h>>>3^h<<25^h<<14)+(o>>>17^o>>>19^o>>>10^o<<15^o<<13)+c+r|0;w=c+w+(_>>>6^_>>>11^_>>>25^_<<26^_<<21^_<<7)+(d^_&(v^d))+0x84c87814|0;g=g+w|0;w=w+(A&m^b&(A^m))+(A>>>2^A>>>13^A>>>22^A<<30^A<<19^A<<10)|0;h=(u>>>7^u>>>18^u>>>3^u<<25^u<<14)+(x>>>17^x>>>19^x>>>10^x<<15^x<<13)+h+n|0;d=h+d+(g>>>6^g>>>11^g>>>25^g<<26^g<<21^g<<7)+(v^g&(_^v))+0x8cc70208|0;b=b+d|0;d=d+(w&A^m&(w^A))+(w>>>2^w>>>13^w>>>22^w<<30^w<<19^w<<10)|0;u=(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(c>>>17^c>>>19^c>>>10^c<<15^c<<13)+u+i|0;v=u+v+(b>>>6^b>>>11^b>>>25^b<<26^b<<21^b<<7)+(_^b&(g^_))+0x90befffa|0;m=m+v|0;v=v+(d&w^A&(d^w))+(d>>>2^d>>>13^d>>>22^d<<30^d<<19^d<<10)|0;l=(p>>>7^p>>>18^p>>>3^p<<25^p<<14)+(h>>>17^h>>>19^h>>>10^h<<15^h<<13)+l+a|0;_=l+_+(m>>>6^m>>>11^m>>>25^m<<26^m<<21^m<<7)+(g^m&(b^g))+0xa4506ceb|0;A=A+_|0;_=_+(v&d^w&(v^d))+(v>>>2^v>>>13^v>>>22^v<<30^v<<19^v<<10)|0;p=(y>>>7^y>>>18^y>>>3^y<<25^y<<14)+(u>>>17^u>>>19^u>>>10^u<<15^u<<13)+p+s|0;g=p+g+(A>>>6^A>>>11^A>>>25^A<<26^A<<21^A<<7)+(b^A&(m^b))+0xbef9a3f7|0;w=w+g|0;g=g+(_&v^d&(_^v))+(_>>>2^_>>>13^_>>>22^_<<30^_<<19^_<<10)|0;y=(f>>>7^f>>>18^f>>>3^f<<25^f<<14)+(l>>>17^l>>>19^l>>>10^l<<15^l<<13)+y+o|0;b=y+b+(w>>>6^w>>>11^w>>>25^w<<26^w<<21^w<<7)+(m^w&(A^m))+0xc67178f2|0;d=d+b|0;b=b+(g&_^v&(g^_))+(g>>>2^g>>>13^g>>>22^g<<30^g<<19^g<<10)|0;E=E+b|0;C=C+g|0;S=S+_|0;U=U+v|0;M=M+d|0;O=O+w|0;H=H+A|0;L=L+m|0}function i(f){f=f|0;j(N[f|0]<<24|N[f|1]<<16|N[f|2]<<8|N[f|3],N[f|4]<<24|N[f|5]<<16|N[f|6]<<8|N[f|7],N[f|8]<<24|N[f|9]<<16|N[f|10]<<8|N[f|11],N[f|12]<<24|N[f|13]<<16|N[f|14]<<8|N[f|15],N[f|16]<<24|N[f|17]<<16|N[f|18]<<8|N[f|19],N[f|20]<<24|N[f|21]<<16|N[f|22]<<8|N[f|23],N[f|24]<<24|N[f|25]<<16|N[f|26]<<8|N[f|27],N[f|28]<<24|N[f|29]<<16|N[f|30]<<8|N[f|31],N[f|32]<<24|N[f|33]<<16|N[f|34]<<8|N[f|35],N[f|36]<<24|N[f|37]<<16|N[f|38]<<8|N[f|39],N[f|40]<<24|N[f|41]<<16|N[f|42]<<8|N[f|43],N[f|44]<<24|N[f|45]<<16|N[f|46]<<8|N[f|47],N[f|48]<<24|N[f|49]<<16|N[f|50]<<8|N[f|51],N[f|52]<<24|N[f|53]<<16|N[f|54]<<8|N[f|55],N[f|56]<<24|N[f|57]<<16|N[f|58]<<8|N[f|59],N[f|60]<<24|N[f|61]<<16|N[f|62]<<8|N[f|63])}function F(f){f=f|0;N[f|0]=E>>>24;N[f|1]=E>>>16&255;N[f|2]=E>>>8&255;N[f|3]=E&255;N[f|4]=C>>>24;N[f|5]=C>>>16&255;N[f|6]=C>>>8&255;N[f|7]=C&255;N[f|8]=S>>>24;N[f|9]=S>>>16&255;N[f|10]=S>>>8&255;N[f|11]=S&255;N[f|12]=U>>>24;N[f|13]=U>>>16&255;N[f|14]=U>>>8&255;N[f|15]=U&255;N[f|16]=M>>>24;N[f|17]=M>>>16&255;N[f|18]=M>>>8&255;N[f|19]=M&255;N[f|20]=O>>>24;N[f|21]=O>>>16&255;N[f|22]=O>>>8&255;N[f|23]=O&255;N[f|24]=H>>>24;N[f|25]=H>>>16&255;N[f|26]=H>>>8&255;N[f|27]=H&255;N[f|28]=L>>>24;N[f|29]=L>>>16&255;N[f|30]=L>>>8&255;N[f|31]=L&255}function q(){E=0x6a09e667;C=0xbb67ae85;S=0x3c6ef372;U=0xa54ff53a;M=0x510e527f;O=0x9b05688c;H=0x1f83d9ab;L=0x5be0cd19;b=g=0}function r(f,t,e,r,n,i,a,s,o,x){f=f|0;t=t|0;e=e|0;r=r|0;n=n|0;i=i|0;a=a|0;s=s|0;o=o|0;x=x|0;E=f;C=t;S=e;U=r;M=n;O=i;H=a;L=s;b=o;g=x}function a(f,t){f=f|0;t=t|0;var e=0;if(f&63)return-1;while((t|0)>=64){i(f);f=f+64|0;t=t-64|0;e=e+64|0}b=b+e|0;if(b>>>0<e>>>0)g=g+1|0;return e|0}function u(f,t,e){f=f|0;t=t|0;e=e|0;var r=0,n=0;if(f&63)return-1;if(~e)if(e&31)return-1;if((t|0)>=64){r=a(f,t)|0;if((r|0)==-1)return-1;f=f+r|0;t=t-r|0}r=r+t|0;b=b+t|0;if(b>>>0<t>>>0)g=g+1|0;N[f|t]=0x80;if((t|0)>=56){for(n=t+1|0;(n|0)<64;n=n+1|0)N[f|n]=0x00;i(f);t=0;N[f|0]=0}for(n=t+1|0;(n|0)<59;n=n+1|0)N[f|n]=0;N[f|56]=g>>>21&255;N[f|57]=g>>>13&255;N[f|58]=g>>>5&255;N[f|59]=g<<3&255|b>>>29;N[f|60]=b>>>21&255;N[f|61]=b>>>13&255;N[f|62]=b>>>5&255;N[f|63]=b<<3&255;i(f);if(~e)F(e);return r|0}function V(){E=_;C=v;S=d;U=w;M=A;O=m;H=k;L=P;b=64;g=0}function K(){E=D;C=R;S=T;U=Z;M=B;O=I;H=z;L=G;b=64;g=0}function n(f,t,e,r,n,i,a,s,o,x,c,h,u,l,p,y){f=f|0;t=t|0;e=e|0;r=r|0;n=n|0;i=i|0;a=a|0;s=s|0;o=o|0;x=x|0;c=c|0;h=h|0;u=u|0;l=l|0;p=p|0;y=y|0;q();j(f^0x5c5c5c5c,t^0x5c5c5c5c,e^0x5c5c5c5c,r^0x5c5c5c5c,n^0x5c5c5c5c,i^0x5c5c5c5c,a^0x5c5c5c5c,s^0x5c5c5c5c,o^0x5c5c5c5c,x^0x5c5c5c5c,c^0x5c5c5c5c,h^0x5c5c5c5c,u^0x5c5c5c5c,l^0x5c5c5c5c,p^0x5c5c5c5c,y^0x5c5c5c5c);D=E;R=C;T=S;Z=U;B=M;I=O;z=H;G=L;q();j(f^0x36363636,t^0x36363636,e^0x36363636,r^0x36363636,n^0x36363636,i^0x36363636,a^0x36363636,s^0x36363636,o^0x36363636,x^0x36363636,c^0x36363636,h^0x36363636,u^0x36363636,l^0x36363636,p^0x36363636,y^0x36363636);_=E;v=C;d=S;w=U;A=M;m=O;k=H;P=L;b=64;g=0}function W(f,t,e){f=f|0;t=t|0;e=e|0;var r=0,n=0,i=0,a=0,s=0,o=0,x=0,c=0,h=0;if(f&63)return-1;if(~e)if(e&31)return-1;h=u(f,t,-1)|0;r=E,n=C,i=S,a=U,s=M,o=O,x=H,c=L;K();j(r,n,i,a,s,o,x,c,0x80000000,0,0,0,0,0,0,768);if(~e)F(e);return h|0}function s(f,t,e,r,n){f=f|0;t=t|0;e=e|0;r=r|0;n=n|0;var i=0,a=0,s=0,o=0,x=0,c=0,h=0,u=0,l=0,p=0,y=0,b=0,g=0,_=0,v=0,d=0;if(f&63)return-1;if(~n)if(n&31)return-1;N[f+t|0]=e>>>24;N[f+t+1|0]=e>>>16&255;N[f+t+2|0]=e>>>8&255;N[f+t+3|0]=e&255;W(f,t+4|0,-1)|0;i=l=E,a=p=C,s=y=S,o=b=U,x=g=M,c=_=O,h=v=H,u=d=L;r=r-1|0;while((r|0)>0){V();j(l,p,y,b,g,_,v,d,0x80000000,0,0,0,0,0,0,768);l=E,p=C,y=S,b=U,g=M,_=O,v=H,d=L;K();j(l,p,y,b,g,_,v,d,0x80000000,0,0,0,0,0,0,768);l=E,p=C,y=S,b=U,g=M,_=O,v=H,d=L;i=i^E;a=a^C;s=s^S;o=o^U;x=x^M;c=c^O;h=h^H;u=u^L;r=r-1|0}E=i;C=a;S=s;U=o;M=x;O=c;H=h;L=u;if(~n)F(n);return 0}return{reset:q,init:r,process:a,finish:u,hmac_reset:V,hmac_init:n,hmac_finish:W,pbkdf2_generate_block:s}},rf=function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,t){f.__proto__=t}||function(f,t){for(var e in t)t.hasOwnProperty(e)&&(f[e]=t[e])};return function(f,t){function e(){this.constructor=f}r(f,t),f.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),nf=64,af=32,sf=function(t){function f(){var f=t.call(this)||this;return f.NAME="sha256",f.BLOCK_SIZE=nf,f.HASH_SIZE=af,f.heap=x(),f.asm=ef({Uint8Array:Uint8Array},null,f.heap.buffer),f.reset(),f}return rf(f,t),f.NAME="sha256",f}(X),of=function(f,t,e){"use asm";var X=0,Y=0,$$=0,ff=0,tf=0,ef=0,rf=0,nf=0,af=0,sf=0,of=0,xf=0,cf=0,hf=0,uf=0,lf=0,k=0,P=0;var D=0,R=0,T=0,Z=0,B=0,I=0,z=0,G=0,N=0,j=0,F=0,q=0,V=0,K=0,W=0,J=0,Q=0,pf=0,yf=0,bf=0,gf=0,_f=0,vf=0,df=0,wf=0,Af=0,mf=0,Ef=0,Cf=0,Sf=0,Uf=0,Mf=0;var Of=new f.Uint8Array(e);function Hf(f,t,e,r,n,i,a,s,o,x,c,h,u,l,p,y,b,g,_,v,d,w,A,m,E,C,S,U,M,O,H,L){f=f|0;t=t|0;e=e|0;r=r|0;n=n|0;i=i|0;a=a|0;s=s|0;o=o|0;x=x|0;c=c|0;h=h|0;u=u|0;l=l|0;p=p|0;y=y|0;b=b|0;g=g|0;_=_|0;v=v|0;d=d|0;w=w|0;A=A|0;m=m|0;E=E|0;C=C|0;S=S|0;U=U|0;M=M|0;O=O|0;H=H|0;L=L|0;var k=0,P=0,D=0,R=0,T=0,Z=0,B=0,I=0,z=0,G=0,N=0,j=0,F=0,q=0,V=0,K=0,W=0,J=0,Q=0;k=X;P=Y;D=$$;R=ff;T=tf;Z=ef;B=rf;I=nf;z=af;G=sf;N=of;j=xf;F=cf;q=hf;V=uf;K=lf;J=0xd728ae22+t|0;W=0x428a2f98+f+(J>>>0<t>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;J=0x23ef65cd+r|0;W=0x71374491+e+(J>>>0<r>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;J=0xec4d3b2f+i|0;W=0xb5c0fbcf+n+(J>>>0<i>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;J=0x8189dbbc+s|0;W=0xe9b5dba5+a+(J>>>0<s>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;J=0xf348b538+x|0;W=0x3956c25b+o+(J>>>0<x>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;J=0xb605d019+h|0;W=0x59f111f1+c+(J>>>0<h>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;J=0xaf194f9b+l|0;W=0x923f82a4+u+(J>>>0<l>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;J=0xda6d8118+y|0;W=0xab1c5ed5+p+(J>>>0<y>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;J=0xa3030242+g|0;W=0xd807aa98+b+(J>>>0<g>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;J=0x45706fbe+v|0;W=0x12835b01+_+(J>>>0<v>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;J=0x4ee4b28c+w|0;W=0x243185be+d+(J>>>0<w>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;J=0xd5ffb4e2+m|0;W=0x550c7dc3+A+(J>>>0<m>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;J=0xf27b896f+C|0;W=0x72be5d74+E+(J>>>0<C>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;J=0x3b1696b1+U|0;W=0x80deb1fe+S+(J>>>0<U>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;J=0x25c71235+O|0;W=0x9bdc06a7+M+(J>>>0<O>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;J=0xcf692694+L|0;W=0xc19bf174+H+(J>>>0<L>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;t=t+v|0;f=f+_+(t>>>0<v>>>0?1:0)|0;Q=(r>>>1|e<<31)^(r>>>8|e<<24)^(r>>>7|e<<25)|0;t=t+Q|0;f=f+((e>>>1|r<<31)^(e>>>8|r<<24)^e>>>7)+(t>>>0<Q>>>0?1:0)|0;Q=(O>>>19|M<<13)^(O<<3|M>>>29)^(O>>>6|M<<26)|0;t=t+Q|0;f=f+((M>>>19|O<<13)^(M<<3|O>>>29)^M>>>6)+(t>>>0<Q>>>0?1:0)|0;J=0x9ef14ad2+t|0;W=0xe49b69c1+f+(J>>>0<t>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;r=r+w|0;e=e+d+(r>>>0<w>>>0?1:0)|0;Q=(i>>>1|n<<31)^(i>>>8|n<<24)^(i>>>7|n<<25)|0;r=r+Q|0;e=e+((n>>>1|i<<31)^(n>>>8|i<<24)^n>>>7)+(r>>>0<Q>>>0?1:0)|0;Q=(L>>>19|H<<13)^(L<<3|H>>>29)^(L>>>6|H<<26)|0;r=r+Q|0;e=e+((H>>>19|L<<13)^(H<<3|L>>>29)^H>>>6)+(r>>>0<Q>>>0?1:0)|0;J=0x384f25e3+r|0;W=0xefbe4786+e+(J>>>0<r>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;i=i+m|0;n=n+A+(i>>>0<m>>>0?1:0)|0;Q=(s>>>1|a<<31)^(s>>>8|a<<24)^(s>>>7|a<<25)|0;i=i+Q|0;n=n+((a>>>1|s<<31)^(a>>>8|s<<24)^a>>>7)+(i>>>0<Q>>>0?1:0)|0;Q=(t>>>19|f<<13)^(t<<3|f>>>29)^(t>>>6|f<<26)|0;i=i+Q|0;n=n+((f>>>19|t<<13)^(f<<3|t>>>29)^f>>>6)+(i>>>0<Q>>>0?1:0)|0;J=0x8b8cd5b5+i|0;W=0xfc19dc6+n+(J>>>0<i>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;s=s+C|0;a=a+E+(s>>>0<C>>>0?1:0)|0;Q=(x>>>1|o<<31)^(x>>>8|o<<24)^(x>>>7|o<<25)|0;s=s+Q|0;a=a+((o>>>1|x<<31)^(o>>>8|x<<24)^o>>>7)+(s>>>0<Q>>>0?1:0)|0;Q=(r>>>19|e<<13)^(r<<3|e>>>29)^(r>>>6|e<<26)|0;s=s+Q|0;a=a+((e>>>19|r<<13)^(e<<3|r>>>29)^e>>>6)+(s>>>0<Q>>>0?1:0)|0;J=0x77ac9c65+s|0;W=0x240ca1cc+a+(J>>>0<s>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;x=x+U|0;o=o+S+(x>>>0<U>>>0?1:0)|0;Q=(h>>>1|c<<31)^(h>>>8|c<<24)^(h>>>7|c<<25)|0;x=x+Q|0;o=o+((c>>>1|h<<31)^(c>>>8|h<<24)^c>>>7)+(x>>>0<Q>>>0?1:0)|0;Q=(i>>>19|n<<13)^(i<<3|n>>>29)^(i>>>6|n<<26)|0;x=x+Q|0;o=o+((n>>>19|i<<13)^(n<<3|i>>>29)^n>>>6)+(x>>>0<Q>>>0?1:0)|0;J=0x592b0275+x|0;W=0x2de92c6f+o+(J>>>0<x>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;h=h+O|0;c=c+M+(h>>>0<O>>>0?1:0)|0;Q=(l>>>1|u<<31)^(l>>>8|u<<24)^(l>>>7|u<<25)|0;h=h+Q|0;c=c+((u>>>1|l<<31)^(u>>>8|l<<24)^u>>>7)+(h>>>0<Q>>>0?1:0)|0;Q=(s>>>19|a<<13)^(s<<3|a>>>29)^(s>>>6|a<<26)|0;h=h+Q|0;c=c+((a>>>19|s<<13)^(a<<3|s>>>29)^a>>>6)+(h>>>0<Q>>>0?1:0)|0;J=0x6ea6e483+h|0;W=0x4a7484aa+c+(J>>>0<h>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;l=l+L|0;u=u+H+(l>>>0<L>>>0?1:0)|0;Q=(y>>>1|p<<31)^(y>>>8|p<<24)^(y>>>7|p<<25)|0;l=l+Q|0;u=u+((p>>>1|y<<31)^(p>>>8|y<<24)^p>>>7)+(l>>>0<Q>>>0?1:0)|0;Q=(x>>>19|o<<13)^(x<<3|o>>>29)^(x>>>6|o<<26)|0;l=l+Q|0;u=u+((o>>>19|x<<13)^(o<<3|x>>>29)^o>>>6)+(l>>>0<Q>>>0?1:0)|0;J=0xbd41fbd4+l|0;W=0x5cb0a9dc+u+(J>>>0<l>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;y=y+t|0;p=p+f+(y>>>0<t>>>0?1:0)|0;Q=(g>>>1|b<<31)^(g>>>8|b<<24)^(g>>>7|b<<25)|0;y=y+Q|0;p=p+((b>>>1|g<<31)^(b>>>8|g<<24)^b>>>7)+(y>>>0<Q>>>0?1:0)|0;Q=(h>>>19|c<<13)^(h<<3|c>>>29)^(h>>>6|c<<26)|0;y=y+Q|0;p=p+((c>>>19|h<<13)^(c<<3|h>>>29)^c>>>6)+(y>>>0<Q>>>0?1:0)|0;J=0x831153b5+y|0;W=0x76f988da+p+(J>>>0<y>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;g=g+r|0;b=b+e+(g>>>0<r>>>0?1:0)|0;Q=(v>>>1|_<<31)^(v>>>8|_<<24)^(v>>>7|_<<25)|0;g=g+Q|0;b=b+((_>>>1|v<<31)^(_>>>8|v<<24)^_>>>7)+(g>>>0<Q>>>0?1:0)|0;Q=(l>>>19|u<<13)^(l<<3|u>>>29)^(l>>>6|u<<26)|0;g=g+Q|0;b=b+((u>>>19|l<<13)^(u<<3|l>>>29)^u>>>6)+(g>>>0<Q>>>0?1:0)|0;J=0xee66dfab+g|0;W=0x983e5152+b+(J>>>0<g>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;v=v+i|0;_=_+n+(v>>>0<i>>>0?1:0)|0;Q=(w>>>1|d<<31)^(w>>>8|d<<24)^(w>>>7|d<<25)|0;v=v+Q|0;_=_+((d>>>1|w<<31)^(d>>>8|w<<24)^d>>>7)+(v>>>0<Q>>>0?1:0)|0;Q=(y>>>19|p<<13)^(y<<3|p>>>29)^(y>>>6|p<<26)|0;v=v+Q|0;_=_+((p>>>19|y<<13)^(p<<3|y>>>29)^p>>>6)+(v>>>0<Q>>>0?1:0)|0;J=0x2db43210+v|0;W=0xa831c66d+_+(J>>>0<v>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;w=w+s|0;d=d+a+(w>>>0<s>>>0?1:0)|0;Q=(m>>>1|A<<31)^(m>>>8|A<<24)^(m>>>7|A<<25)|0;w=w+Q|0;d=d+((A>>>1|m<<31)^(A>>>8|m<<24)^A>>>7)+(w>>>0<Q>>>0?1:0)|0;Q=(g>>>19|b<<13)^(g<<3|b>>>29)^(g>>>6|b<<26)|0;w=w+Q|0;d=d+((b>>>19|g<<13)^(b<<3|g>>>29)^b>>>6)+(w>>>0<Q>>>0?1:0)|0;J=0x98fb213f+w|0;W=0xb00327c8+d+(J>>>0<w>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;m=m+x|0;A=A+o+(m>>>0<x>>>0?1:0)|0;Q=(C>>>1|E<<31)^(C>>>8|E<<24)^(C>>>7|E<<25)|0;m=m+Q|0;A=A+((E>>>1|C<<31)^(E>>>8|C<<24)^E>>>7)+(m>>>0<Q>>>0?1:0)|0;Q=(v>>>19|_<<13)^(v<<3|_>>>29)^(v>>>6|_<<26)|0;m=m+Q|0;A=A+((_>>>19|v<<13)^(_<<3|v>>>29)^_>>>6)+(m>>>0<Q>>>0?1:0)|0;J=0xbeef0ee4+m|0;W=0xbf597fc7+A+(J>>>0<m>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;C=C+h|0;E=E+c+(C>>>0<h>>>0?1:0)|0;Q=(U>>>1|S<<31)^(U>>>8|S<<24)^(U>>>7|S<<25)|0;C=C+Q|0;E=E+((S>>>1|U<<31)^(S>>>8|U<<24)^S>>>7)+(C>>>0<Q>>>0?1:0)|0;Q=(w>>>19|d<<13)^(w<<3|d>>>29)^(w>>>6|d<<26)|0;C=C+Q|0;E=E+((d>>>19|w<<13)^(d<<3|w>>>29)^d>>>6)+(C>>>0<Q>>>0?1:0)|0;J=0x3da88fc2+C|0;W=0xc6e00bf3+E+(J>>>0<C>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;U=U+l|0;S=S+u+(U>>>0<l>>>0?1:0)|0;Q=(O>>>1|M<<31)^(O>>>8|M<<24)^(O>>>7|M<<25)|0;U=U+Q|0;S=S+((M>>>1|O<<31)^(M>>>8|O<<24)^M>>>7)+(U>>>0<Q>>>0?1:0)|0;Q=(m>>>19|A<<13)^(m<<3|A>>>29)^(m>>>6|A<<26)|0;U=U+Q|0;S=S+((A>>>19|m<<13)^(A<<3|m>>>29)^A>>>6)+(U>>>0<Q>>>0?1:0)|0;J=0x930aa725+U|0;W=0xd5a79147+S+(J>>>0<U>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;O=O+y|0;M=M+p+(O>>>0<y>>>0?1:0)|0;Q=(L>>>1|H<<31)^(L>>>8|H<<24)^(L>>>7|H<<25)|0;O=O+Q|0;M=M+((H>>>1|L<<31)^(H>>>8|L<<24)^H>>>7)+(O>>>0<Q>>>0?1:0)|0;Q=(C>>>19|E<<13)^(C<<3|E>>>29)^(C>>>6|E<<26)|0;O=O+Q|0;M=M+((E>>>19|C<<13)^(E<<3|C>>>29)^E>>>6)+(O>>>0<Q>>>0?1:0)|0;J=0xe003826f+O|0;W=0x6ca6351+M+(J>>>0<O>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;L=L+g|0;H=H+b+(L>>>0<g>>>0?1:0)|0;Q=(t>>>1|f<<31)^(t>>>8|f<<24)^(t>>>7|f<<25)|0;L=L+Q|0;H=H+((f>>>1|t<<31)^(f>>>8|t<<24)^f>>>7)+(L>>>0<Q>>>0?1:0)|0;Q=(U>>>19|S<<13)^(U<<3|S>>>29)^(U>>>6|S<<26)|0;L=L+Q|0;H=H+((S>>>19|U<<13)^(S<<3|U>>>29)^S>>>6)+(L>>>0<Q>>>0?1:0)|0;J=0xa0e6e70+L|0;W=0x14292967+H+(J>>>0<L>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;t=t+v|0;f=f+_+(t>>>0<v>>>0?1:0)|0;Q=(r>>>1|e<<31)^(r>>>8|e<<24)^(r>>>7|e<<25)|0;t=t+Q|0;f=f+((e>>>1|r<<31)^(e>>>8|r<<24)^e>>>7)+(t>>>0<Q>>>0?1:0)|0;Q=(O>>>19|M<<13)^(O<<3|M>>>29)^(O>>>6|M<<26)|0;t=t+Q|0;f=f+((M>>>19|O<<13)^(M<<3|O>>>29)^M>>>6)+(t>>>0<Q>>>0?1:0)|0;J=0x46d22ffc+t|0;W=0x27b70a85+f+(J>>>0<t>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;r=r+w|0;e=e+d+(r>>>0<w>>>0?1:0)|0;Q=(i>>>1|n<<31)^(i>>>8|n<<24)^(i>>>7|n<<25)|0;r=r+Q|0;e=e+((n>>>1|i<<31)^(n>>>8|i<<24)^n>>>7)+(r>>>0<Q>>>0?1:0)|0;Q=(L>>>19|H<<13)^(L<<3|H>>>29)^(L>>>6|H<<26)|0;r=r+Q|0;e=e+((H>>>19|L<<13)^(H<<3|L>>>29)^H>>>6)+(r>>>0<Q>>>0?1:0)|0;J=0x5c26c926+r|0;W=0x2e1b2138+e+(J>>>0<r>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;i=i+m|0;n=n+A+(i>>>0<m>>>0?1:0)|0;Q=(s>>>1|a<<31)^(s>>>8|a<<24)^(s>>>7|a<<25)|0;i=i+Q|0;n=n+((a>>>1|s<<31)^(a>>>8|s<<24)^a>>>7)+(i>>>0<Q>>>0?1:0)|0;Q=(t>>>19|f<<13)^(t<<3|f>>>29)^(t>>>6|f<<26)|0;i=i+Q|0;n=n+((f>>>19|t<<13)^(f<<3|t>>>29)^f>>>6)+(i>>>0<Q>>>0?1:0)|0;J=0x5ac42aed+i|0;W=0x4d2c6dfc+n+(J>>>0<i>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;s=s+C|0;a=a+E+(s>>>0<C>>>0?1:0)|0;Q=(x>>>1|o<<31)^(x>>>8|o<<24)^(x>>>7|o<<25)|0;s=s+Q|0;a=a+((o>>>1|x<<31)^(o>>>8|x<<24)^o>>>7)+(s>>>0<Q>>>0?1:0)|0;Q=(r>>>19|e<<13)^(r<<3|e>>>29)^(r>>>6|e<<26)|0;s=s+Q|0;a=a+((e>>>19|r<<13)^(e<<3|r>>>29)^e>>>6)+(s>>>0<Q>>>0?1:0)|0;J=0x9d95b3df+s|0;W=0x53380d13+a+(J>>>0<s>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;x=x+U|0;o=o+S+(x>>>0<U>>>0?1:0)|0;Q=(h>>>1|c<<31)^(h>>>8|c<<24)^(h>>>7|c<<25)|0;x=x+Q|0;o=o+((c>>>1|h<<31)^(c>>>8|h<<24)^c>>>7)+(x>>>0<Q>>>0?1:0)|0;Q=(i>>>19|n<<13)^(i<<3|n>>>29)^(i>>>6|n<<26)|0;x=x+Q|0;o=o+((n>>>19|i<<13)^(n<<3|i>>>29)^n>>>6)+(x>>>0<Q>>>0?1:0)|0;J=0x8baf63de+x|0;W=0x650a7354+o+(J>>>0<x>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;h=h+O|0;c=c+M+(h>>>0<O>>>0?1:0)|0;Q=(l>>>1|u<<31)^(l>>>8|u<<24)^(l>>>7|u<<25)|0;h=h+Q|0;c=c+((u>>>1|l<<31)^(u>>>8|l<<24)^u>>>7)+(h>>>0<Q>>>0?1:0)|0;Q=(s>>>19|a<<13)^(s<<3|a>>>29)^(s>>>6|a<<26)|0;h=h+Q|0;c=c+((a>>>19|s<<13)^(a<<3|s>>>29)^a>>>6)+(h>>>0<Q>>>0?1:0)|0;J=0x3c77b2a8+h|0;W=0x766a0abb+c+(J>>>0<h>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;l=l+L|0;u=u+H+(l>>>0<L>>>0?1:0)|0;Q=(y>>>1|p<<31)^(y>>>8|p<<24)^(y>>>7|p<<25)|0;l=l+Q|0;u=u+((p>>>1|y<<31)^(p>>>8|y<<24)^p>>>7)+(l>>>0<Q>>>0?1:0)|0;Q=(x>>>19|o<<13)^(x<<3|o>>>29)^(x>>>6|o<<26)|0;l=l+Q|0;u=u+((o>>>19|x<<13)^(o<<3|x>>>29)^o>>>6)+(l>>>0<Q>>>0?1:0)|0;J=0x47edaee6+l|0;W=0x81c2c92e+u+(J>>>0<l>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;y=y+t|0;p=p+f+(y>>>0<t>>>0?1:0)|0;Q=(g>>>1|b<<31)^(g>>>8|b<<24)^(g>>>7|b<<25)|0;y=y+Q|0;p=p+((b>>>1|g<<31)^(b>>>8|g<<24)^b>>>7)+(y>>>0<Q>>>0?1:0)|0;Q=(h>>>19|c<<13)^(h<<3|c>>>29)^(h>>>6|c<<26)|0;y=y+Q|0;p=p+((c>>>19|h<<13)^(c<<3|h>>>29)^c>>>6)+(y>>>0<Q>>>0?1:0)|0;J=0x1482353b+y|0;W=0x92722c85+p+(J>>>0<y>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;g=g+r|0;b=b+e+(g>>>0<r>>>0?1:0)|0;Q=(v>>>1|_<<31)^(v>>>8|_<<24)^(v>>>7|_<<25)|0;g=g+Q|0;b=b+((_>>>1|v<<31)^(_>>>8|v<<24)^_>>>7)+(g>>>0<Q>>>0?1:0)|0;Q=(l>>>19|u<<13)^(l<<3|u>>>29)^(l>>>6|u<<26)|0;g=g+Q|0;b=b+((u>>>19|l<<13)^(u<<3|l>>>29)^u>>>6)+(g>>>0<Q>>>0?1:0)|0;J=0x4cf10364+g|0;W=0xa2bfe8a1+b+(J>>>0<g>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;v=v+i|0;_=_+n+(v>>>0<i>>>0?1:0)|0;Q=(w>>>1|d<<31)^(w>>>8|d<<24)^(w>>>7|d<<25)|0;v=v+Q|0;_=_+((d>>>1|w<<31)^(d>>>8|w<<24)^d>>>7)+(v>>>0<Q>>>0?1:0)|0;Q=(y>>>19|p<<13)^(y<<3|p>>>29)^(y>>>6|p<<26)|0;v=v+Q|0;_=_+((p>>>19|y<<13)^(p<<3|y>>>29)^p>>>6)+(v>>>0<Q>>>0?1:0)|0;J=0xbc423001+v|0;W=0xa81a664b+_+(J>>>0<v>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;w=w+s|0;d=d+a+(w>>>0<s>>>0?1:0)|0;Q=(m>>>1|A<<31)^(m>>>8|A<<24)^(m>>>7|A<<25)|0;w=w+Q|0;d=d+((A>>>1|m<<31)^(A>>>8|m<<24)^A>>>7)+(w>>>0<Q>>>0?1:0)|0;Q=(g>>>19|b<<13)^(g<<3|b>>>29)^(g>>>6|b<<26)|0;w=w+Q|0;d=d+((b>>>19|g<<13)^(b<<3|g>>>29)^b>>>6)+(w>>>0<Q>>>0?1:0)|0;J=0xd0f89791+w|0;W=0xc24b8b70+d+(J>>>0<w>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;m=m+x|0;A=A+o+(m>>>0<x>>>0?1:0)|0;Q=(C>>>1|E<<31)^(C>>>8|E<<24)^(C>>>7|E<<25)|0;m=m+Q|0;A=A+((E>>>1|C<<31)^(E>>>8|C<<24)^E>>>7)+(m>>>0<Q>>>0?1:0)|0;Q=(v>>>19|_<<13)^(v<<3|_>>>29)^(v>>>6|_<<26)|0;m=m+Q|0;A=A+((_>>>19|v<<13)^(_<<3|v>>>29)^_>>>6)+(m>>>0<Q>>>0?1:0)|0;J=0x654be30+m|0;W=0xc76c51a3+A+(J>>>0<m>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;C=C+h|0;E=E+c+(C>>>0<h>>>0?1:0)|0;Q=(U>>>1|S<<31)^(U>>>8|S<<24)^(U>>>7|S<<25)|0;C=C+Q|0;E=E+((S>>>1|U<<31)^(S>>>8|U<<24)^S>>>7)+(C>>>0<Q>>>0?1:0)|0;Q=(w>>>19|d<<13)^(w<<3|d>>>29)^(w>>>6|d<<26)|0;C=C+Q|0;E=E+((d>>>19|w<<13)^(d<<3|w>>>29)^d>>>6)+(C>>>0<Q>>>0?1:0)|0;J=0xd6ef5218+C|0;W=0xd192e819+E+(J>>>0<C>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;U=U+l|0;S=S+u+(U>>>0<l>>>0?1:0)|0;Q=(O>>>1|M<<31)^(O>>>8|M<<24)^(O>>>7|M<<25)|0;U=U+Q|0;S=S+((M>>>1|O<<31)^(M>>>8|O<<24)^M>>>7)+(U>>>0<Q>>>0?1:0)|0;Q=(m>>>19|A<<13)^(m<<3|A>>>29)^(m>>>6|A<<26)|0;U=U+Q|0;S=S+((A>>>19|m<<13)^(A<<3|m>>>29)^A>>>6)+(U>>>0<Q>>>0?1:0)|0;J=0x5565a910+U|0;W=0xd6990624+S+(J>>>0<U>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;O=O+y|0;M=M+p+(O>>>0<y>>>0?1:0)|0;Q=(L>>>1|H<<31)^(L>>>8|H<<24)^(L>>>7|H<<25)|0;O=O+Q|0;M=M+((H>>>1|L<<31)^(H>>>8|L<<24)^H>>>7)+(O>>>0<Q>>>0?1:0)|0;Q=(C>>>19|E<<13)^(C<<3|E>>>29)^(C>>>6|E<<26)|0;O=O+Q|0;M=M+((E>>>19|C<<13)^(E<<3|C>>>29)^E>>>6)+(O>>>0<Q>>>0?1:0)|0;J=0x5771202a+O|0;W=0xf40e3585+M+(J>>>0<O>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;L=L+g|0;H=H+b+(L>>>0<g>>>0?1:0)|0;Q=(t>>>1|f<<31)^(t>>>8|f<<24)^(t>>>7|f<<25)|0;L=L+Q|0;H=H+((f>>>1|t<<31)^(f>>>8|t<<24)^f>>>7)+(L>>>0<Q>>>0?1:0)|0;Q=(U>>>19|S<<13)^(U<<3|S>>>29)^(U>>>6|S<<26)|0;L=L+Q|0;H=H+((S>>>19|U<<13)^(S<<3|U>>>29)^S>>>6)+(L>>>0<Q>>>0?1:0)|0;J=0x32bbd1b8+L|0;W=0x106aa070+H+(J>>>0<L>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;t=t+v|0;f=f+_+(t>>>0<v>>>0?1:0)|0;Q=(r>>>1|e<<31)^(r>>>8|e<<24)^(r>>>7|e<<25)|0;t=t+Q|0;f=f+((e>>>1|r<<31)^(e>>>8|r<<24)^e>>>7)+(t>>>0<Q>>>0?1:0)|0;Q=(O>>>19|M<<13)^(O<<3|M>>>29)^(O>>>6|M<<26)|0;t=t+Q|0;f=f+((M>>>19|O<<13)^(M<<3|O>>>29)^M>>>6)+(t>>>0<Q>>>0?1:0)|0;J=0xb8d2d0c8+t|0;W=0x19a4c116+f+(J>>>0<t>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;r=r+w|0;e=e+d+(r>>>0<w>>>0?1:0)|0;Q=(i>>>1|n<<31)^(i>>>8|n<<24)^(i>>>7|n<<25)|0;r=r+Q|0;e=e+((n>>>1|i<<31)^(n>>>8|i<<24)^n>>>7)+(r>>>0<Q>>>0?1:0)|0;Q=(L>>>19|H<<13)^(L<<3|H>>>29)^(L>>>6|H<<26)|0;r=r+Q|0;e=e+((H>>>19|L<<13)^(H<<3|L>>>29)^H>>>6)+(r>>>0<Q>>>0?1:0)|0;J=0x5141ab53+r|0;W=0x1e376c08+e+(J>>>0<r>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;i=i+m|0;n=n+A+(i>>>0<m>>>0?1:0)|0;Q=(s>>>1|a<<31)^(s>>>8|a<<24)^(s>>>7|a<<25)|0;i=i+Q|0;n=n+((a>>>1|s<<31)^(a>>>8|s<<24)^a>>>7)+(i>>>0<Q>>>0?1:0)|0;Q=(t>>>19|f<<13)^(t<<3|f>>>29)^(t>>>6|f<<26)|0;i=i+Q|0;n=n+((f>>>19|t<<13)^(f<<3|t>>>29)^f>>>6)+(i>>>0<Q>>>0?1:0)|0;J=0xdf8eeb99+i|0;W=0x2748774c+n+(J>>>0<i>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;s=s+C|0;a=a+E+(s>>>0<C>>>0?1:0)|0;Q=(x>>>1|o<<31)^(x>>>8|o<<24)^(x>>>7|o<<25)|0;s=s+Q|0;a=a+((o>>>1|x<<31)^(o>>>8|x<<24)^o>>>7)+(s>>>0<Q>>>0?1:0)|0;Q=(r>>>19|e<<13)^(r<<3|e>>>29)^(r>>>6|e<<26)|0;s=s+Q|0;a=a+((e>>>19|r<<13)^(e<<3|r>>>29)^e>>>6)+(s>>>0<Q>>>0?1:0)|0;J=0xe19b48a8+s|0;W=0x34b0bcb5+a+(J>>>0<s>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;x=x+U|0;o=o+S+(x>>>0<U>>>0?1:0)|0;Q=(h>>>1|c<<31)^(h>>>8|c<<24)^(h>>>7|c<<25)|0;x=x+Q|0;o=o+((c>>>1|h<<31)^(c>>>8|h<<24)^c>>>7)+(x>>>0<Q>>>0?1:0)|0;Q=(i>>>19|n<<13)^(i<<3|n>>>29)^(i>>>6|n<<26)|0;x=x+Q|0;o=o+((n>>>19|i<<13)^(n<<3|i>>>29)^n>>>6)+(x>>>0<Q>>>0?1:0)|0;J=0xc5c95a63+x|0;W=0x391c0cb3+o+(J>>>0<x>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;h=h+O|0;c=c+M+(h>>>0<O>>>0?1:0)|0;Q=(l>>>1|u<<31)^(l>>>8|u<<24)^(l>>>7|u<<25)|0;h=h+Q|0;c=c+((u>>>1|l<<31)^(u>>>8|l<<24)^u>>>7)+(h>>>0<Q>>>0?1:0)|0;Q=(s>>>19|a<<13)^(s<<3|a>>>29)^(s>>>6|a<<26)|0;h=h+Q|0;c=c+((a>>>19|s<<13)^(a<<3|s>>>29)^a>>>6)+(h>>>0<Q>>>0?1:0)|0;J=0xe3418acb+h|0;W=0x4ed8aa4a+c+(J>>>0<h>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;l=l+L|0;u=u+H+(l>>>0<L>>>0?1:0)|0;Q=(y>>>1|p<<31)^(y>>>8|p<<24)^(y>>>7|p<<25)|0;l=l+Q|0;u=u+((p>>>1|y<<31)^(p>>>8|y<<24)^p>>>7)+(l>>>0<Q>>>0?1:0)|0;Q=(x>>>19|o<<13)^(x<<3|o>>>29)^(x>>>6|o<<26)|0;l=l+Q|0;u=u+((o>>>19|x<<13)^(o<<3|x>>>29)^o>>>6)+(l>>>0<Q>>>0?1:0)|0;J=0x7763e373+l|0;W=0x5b9cca4f+u+(J>>>0<l>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;y=y+t|0;p=p+f+(y>>>0<t>>>0?1:0)|0;Q=(g>>>1|b<<31)^(g>>>8|b<<24)^(g>>>7|b<<25)|0;y=y+Q|0;p=p+((b>>>1|g<<31)^(b>>>8|g<<24)^b>>>7)+(y>>>0<Q>>>0?1:0)|0;Q=(h>>>19|c<<13)^(h<<3|c>>>29)^(h>>>6|c<<26)|0;y=y+Q|0;p=p+((c>>>19|h<<13)^(c<<3|h>>>29)^c>>>6)+(y>>>0<Q>>>0?1:0)|0;J=0xd6b2b8a3+y|0;W=0x682e6ff3+p+(J>>>0<y>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;g=g+r|0;b=b+e+(g>>>0<r>>>0?1:0)|0;Q=(v>>>1|_<<31)^(v>>>8|_<<24)^(v>>>7|_<<25)|0;g=g+Q|0;b=b+((_>>>1|v<<31)^(_>>>8|v<<24)^_>>>7)+(g>>>0<Q>>>0?1:0)|0;Q=(l>>>19|u<<13)^(l<<3|u>>>29)^(l>>>6|u<<26)|0;g=g+Q|0;b=b+((u>>>19|l<<13)^(u<<3|l>>>29)^u>>>6)+(g>>>0<Q>>>0?1:0)|0;J=0x5defb2fc+g|0;W=0x748f82ee+b+(J>>>0<g>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;v=v+i|0;_=_+n+(v>>>0<i>>>0?1:0)|0;Q=(w>>>1|d<<31)^(w>>>8|d<<24)^(w>>>7|d<<25)|0;v=v+Q|0;_=_+((d>>>1|w<<31)^(d>>>8|w<<24)^d>>>7)+(v>>>0<Q>>>0?1:0)|0;Q=(y>>>19|p<<13)^(y<<3|p>>>29)^(y>>>6|p<<26)|0;v=v+Q|0;_=_+((p>>>19|y<<13)^(p<<3|y>>>29)^p>>>6)+(v>>>0<Q>>>0?1:0)|0;J=0x43172f60+v|0;W=0x78a5636f+_+(J>>>0<v>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;w=w+s|0;d=d+a+(w>>>0<s>>>0?1:0)|0;Q=(m>>>1|A<<31)^(m>>>8|A<<24)^(m>>>7|A<<25)|0;w=w+Q|0;d=d+((A>>>1|m<<31)^(A>>>8|m<<24)^A>>>7)+(w>>>0<Q>>>0?1:0)|0;Q=(g>>>19|b<<13)^(g<<3|b>>>29)^(g>>>6|b<<26)|0;w=w+Q|0;d=d+((b>>>19|g<<13)^(b<<3|g>>>29)^b>>>6)+(w>>>0<Q>>>0?1:0)|0;J=0xa1f0ab72+w|0;W=0x84c87814+d+(J>>>0<w>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;m=m+x|0;A=A+o+(m>>>0<x>>>0?1:0)|0;Q=(C>>>1|E<<31)^(C>>>8|E<<24)^(C>>>7|E<<25)|0;m=m+Q|0;A=A+((E>>>1|C<<31)^(E>>>8|C<<24)^E>>>7)+(m>>>0<Q>>>0?1:0)|0;Q=(v>>>19|_<<13)^(v<<3|_>>>29)^(v>>>6|_<<26)|0;m=m+Q|0;A=A+((_>>>19|v<<13)^(_<<3|v>>>29)^_>>>6)+(m>>>0<Q>>>0?1:0)|0;J=0x1a6439ec+m|0;W=0x8cc70208+A+(J>>>0<m>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;C=C+h|0;E=E+c+(C>>>0<h>>>0?1:0)|0;Q=(U>>>1|S<<31)^(U>>>8|S<<24)^(U>>>7|S<<25)|0;C=C+Q|0;E=E+((S>>>1|U<<31)^(S>>>8|U<<24)^S>>>7)+(C>>>0<Q>>>0?1:0)|0;Q=(w>>>19|d<<13)^(w<<3|d>>>29)^(w>>>6|d<<26)|0;C=C+Q|0;E=E+((d>>>19|w<<13)^(d<<3|w>>>29)^d>>>6)+(C>>>0<Q>>>0?1:0)|0;J=0x23631e28+C|0;W=0x90befffa+E+(J>>>0<C>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;U=U+l|0;S=S+u+(U>>>0<l>>>0?1:0)|0;Q=(O>>>1|M<<31)^(O>>>8|M<<24)^(O>>>7|M<<25)|0;U=U+Q|0;S=S+((M>>>1|O<<31)^(M>>>8|O<<24)^M>>>7)+(U>>>0<Q>>>0?1:0)|0;Q=(m>>>19|A<<13)^(m<<3|A>>>29)^(m>>>6|A<<26)|0;U=U+Q|0;S=S+((A>>>19|m<<13)^(A<<3|m>>>29)^A>>>6)+(U>>>0<Q>>>0?1:0)|0;J=0xde82bde9+U|0;W=0xa4506ceb+S+(J>>>0<U>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;O=O+y|0;M=M+p+(O>>>0<y>>>0?1:0)|0;Q=(L>>>1|H<<31)^(L>>>8|H<<24)^(L>>>7|H<<25)|0;O=O+Q|0;M=M+((H>>>1|L<<31)^(H>>>8|L<<24)^H>>>7)+(O>>>0<Q>>>0?1:0)|0;Q=(C>>>19|E<<13)^(C<<3|E>>>29)^(C>>>6|E<<26)|0;O=O+Q|0;M=M+((E>>>19|C<<13)^(E<<3|C>>>29)^E>>>6)+(O>>>0<Q>>>0?1:0)|0;J=0xb2c67915+O|0;W=0xbef9a3f7+M+(J>>>0<O>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;L=L+g|0;H=H+b+(L>>>0<g>>>0?1:0)|0;Q=(t>>>1|f<<31)^(t>>>8|f<<24)^(t>>>7|f<<25)|0;L=L+Q|0;H=H+((f>>>1|t<<31)^(f>>>8|t<<24)^f>>>7)+(L>>>0<Q>>>0?1:0)|0;Q=(U>>>19|S<<13)^(U<<3|S>>>29)^(U>>>6|S<<26)|0;L=L+Q|0;H=H+((S>>>19|U<<13)^(S<<3|U>>>29)^S>>>6)+(L>>>0<Q>>>0?1:0)|0;J=0xe372532b+L|0;W=0xc67178f2+H+(J>>>0<L>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;t=t+v|0;f=f+_+(t>>>0<v>>>0?1:0)|0;Q=(r>>>1|e<<31)^(r>>>8|e<<24)^(r>>>7|e<<25)|0;t=t+Q|0;f=f+((e>>>1|r<<31)^(e>>>8|r<<24)^e>>>7)+(t>>>0<Q>>>0?1:0)|0;Q=(O>>>19|M<<13)^(O<<3|M>>>29)^(O>>>6|M<<26)|0;t=t+Q|0;f=f+((M>>>19|O<<13)^(M<<3|O>>>29)^M>>>6)+(t>>>0<Q>>>0?1:0)|0;J=0xea26619c+t|0;W=0xca273ece+f+(J>>>0<t>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;r=r+w|0;e=e+d+(r>>>0<w>>>0?1:0)|0;Q=(i>>>1|n<<31)^(i>>>8|n<<24)^(i>>>7|n<<25)|0;r=r+Q|0;e=e+((n>>>1|i<<31)^(n>>>8|i<<24)^n>>>7)+(r>>>0<Q>>>0?1:0)|0;Q=(L>>>19|H<<13)^(L<<3|H>>>29)^(L>>>6|H<<26)|0;r=r+Q|0;e=e+((H>>>19|L<<13)^(H<<3|L>>>29)^H>>>6)+(r>>>0<Q>>>0?1:0)|0;J=0x21c0c207+r|0;W=0xd186b8c7+e+(J>>>0<r>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;i=i+m|0;n=n+A+(i>>>0<m>>>0?1:0)|0;Q=(s>>>1|a<<31)^(s>>>8|a<<24)^(s>>>7|a<<25)|0;i=i+Q|0;n=n+((a>>>1|s<<31)^(a>>>8|s<<24)^a>>>7)+(i>>>0<Q>>>0?1:0)|0;Q=(t>>>19|f<<13)^(t<<3|f>>>29)^(t>>>6|f<<26)|0;i=i+Q|0;n=n+((f>>>19|t<<13)^(f<<3|t>>>29)^f>>>6)+(i>>>0<Q>>>0?1:0)|0;J=0xcde0eb1e+i|0;W=0xeada7dd6+n+(J>>>0<i>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;s=s+C|0;a=a+E+(s>>>0<C>>>0?1:0)|0;Q=(x>>>1|o<<31)^(x>>>8|o<<24)^(x>>>7|o<<25)|0;s=s+Q|0;a=a+((o>>>1|x<<31)^(o>>>8|x<<24)^o>>>7)+(s>>>0<Q>>>0?1:0)|0;Q=(r>>>19|e<<13)^(r<<3|e>>>29)^(r>>>6|e<<26)|0;s=s+Q|0;a=a+((e>>>19|r<<13)^(e<<3|r>>>29)^e>>>6)+(s>>>0<Q>>>0?1:0)|0;J=0xee6ed178+s|0;W=0xf57d4f7f+a+(J>>>0<s>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;x=x+U|0;o=o+S+(x>>>0<U>>>0?1:0)|0;Q=(h>>>1|c<<31)^(h>>>8|c<<24)^(h>>>7|c<<25)|0;x=x+Q|0;o=o+((c>>>1|h<<31)^(c>>>8|h<<24)^c>>>7)+(x>>>0<Q>>>0?1:0)|0;Q=(i>>>19|n<<13)^(i<<3|n>>>29)^(i>>>6|n<<26)|0;x=x+Q|0;o=o+((n>>>19|i<<13)^(n<<3|i>>>29)^n>>>6)+(x>>>0<Q>>>0?1:0)|0;J=0x72176fba+x|0;W=0x6f067aa+o+(J>>>0<x>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;h=h+O|0;c=c+M+(h>>>0<O>>>0?1:0)|0;Q=(l>>>1|u<<31)^(l>>>8|u<<24)^(l>>>7|u<<25)|0;h=h+Q|0;c=c+((u>>>1|l<<31)^(u>>>8|l<<24)^u>>>7)+(h>>>0<Q>>>0?1:0)|0;Q=(s>>>19|a<<13)^(s<<3|a>>>29)^(s>>>6|a<<26)|0;h=h+Q|0;c=c+((a>>>19|s<<13)^(a<<3|s>>>29)^a>>>6)+(h>>>0<Q>>>0?1:0)|0;J=0xa2c898a6+h|0;W=0xa637dc5+c+(J>>>0<h>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;l=l+L|0;u=u+H+(l>>>0<L>>>0?1:0)|0;Q=(y>>>1|p<<31)^(y>>>8|p<<24)^(y>>>7|p<<25)|0;l=l+Q|0;u=u+((p>>>1|y<<31)^(p>>>8|y<<24)^p>>>7)+(l>>>0<Q>>>0?1:0)|0;Q=(x>>>19|o<<13)^(x<<3|o>>>29)^(x>>>6|o<<26)|0;l=l+Q|0;u=u+((o>>>19|x<<13)^(o<<3|x>>>29)^o>>>6)+(l>>>0<Q>>>0?1:0)|0;J=0xbef90dae+l|0;W=0x113f9804+u+(J>>>0<l>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;y=y+t|0;p=p+f+(y>>>0<t>>>0?1:0)|0;Q=(g>>>1|b<<31)^(g>>>8|b<<24)^(g>>>7|b<<25)|0;y=y+Q|0;p=p+((b>>>1|g<<31)^(b>>>8|g<<24)^b>>>7)+(y>>>0<Q>>>0?1:0)|0;Q=(h>>>19|c<<13)^(h<<3|c>>>29)^(h>>>6|c<<26)|0;y=y+Q|0;p=p+((c>>>19|h<<13)^(c<<3|h>>>29)^c>>>6)+(y>>>0<Q>>>0?1:0)|0;J=0x131c471b+y|0;W=0x1b710b35+p+(J>>>0<y>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;g=g+r|0;b=b+e+(g>>>0<r>>>0?1:0)|0;Q=(v>>>1|_<<31)^(v>>>8|_<<24)^(v>>>7|_<<25)|0;g=g+Q|0;b=b+((_>>>1|v<<31)^(_>>>8|v<<24)^_>>>7)+(g>>>0<Q>>>0?1:0)|0;Q=(l>>>19|u<<13)^(l<<3|u>>>29)^(l>>>6|u<<26)|0;g=g+Q|0;b=b+((u>>>19|l<<13)^(u<<3|l>>>29)^u>>>6)+(g>>>0<Q>>>0?1:0)|0;J=0x23047d84+g|0;W=0x28db77f5+b+(J>>>0<g>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;v=v+i|0;_=_+n+(v>>>0<i>>>0?1:0)|0;Q=(w>>>1|d<<31)^(w>>>8|d<<24)^(w>>>7|d<<25)|0;v=v+Q|0;_=_+((d>>>1|w<<31)^(d>>>8|w<<24)^d>>>7)+(v>>>0<Q>>>0?1:0)|0;Q=(y>>>19|p<<13)^(y<<3|p>>>29)^(y>>>6|p<<26)|0;v=v+Q|0;_=_+((p>>>19|y<<13)^(p<<3|y>>>29)^p>>>6)+(v>>>0<Q>>>0?1:0)|0;J=0x40c72493+v|0;W=0x32caab7b+_+(J>>>0<v>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;w=w+s|0;d=d+a+(w>>>0<s>>>0?1:0)|0;Q=(m>>>1|A<<31)^(m>>>8|A<<24)^(m>>>7|A<<25)|0;w=w+Q|0;d=d+((A>>>1|m<<31)^(A>>>8|m<<24)^A>>>7)+(w>>>0<Q>>>0?1:0)|0;Q=(g>>>19|b<<13)^(g<<3|b>>>29)^(g>>>6|b<<26)|0;w=w+Q|0;d=d+((b>>>19|g<<13)^(b<<3|g>>>29)^b>>>6)+(w>>>0<Q>>>0?1:0)|0;J=0x15c9bebc+w|0;W=0x3c9ebe0a+d+(J>>>0<w>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;m=m+x|0;A=A+o+(m>>>0<x>>>0?1:0)|0;Q=(C>>>1|E<<31)^(C>>>8|E<<24)^(C>>>7|E<<25)|0;m=m+Q|0;A=A+((E>>>1|C<<31)^(E>>>8|C<<24)^E>>>7)+(m>>>0<Q>>>0?1:0)|0;Q=(v>>>19|_<<13)^(v<<3|_>>>29)^(v>>>6|_<<26)|0;m=m+Q|0;A=A+((_>>>19|v<<13)^(_<<3|v>>>29)^_>>>6)+(m>>>0<Q>>>0?1:0)|0;J=0x9c100d4c+m|0;W=0x431d67c4+A+(J>>>0<m>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;C=C+h|0;E=E+c+(C>>>0<h>>>0?1:0)|0;Q=(U>>>1|S<<31)^(U>>>8|S<<24)^(U>>>7|S<<25)|0;C=C+Q|0;E=E+((S>>>1|U<<31)^(S>>>8|U<<24)^S>>>7)+(C>>>0<Q>>>0?1:0)|0;Q=(w>>>19|d<<13)^(w<<3|d>>>29)^(w>>>6|d<<26)|0;C=C+Q|0;E=E+((d>>>19|w<<13)^(d<<3|w>>>29)^d>>>6)+(C>>>0<Q>>>0?1:0)|0;J=0xcb3e42b6+C|0;W=0x4cc5d4be+E+(J>>>0<C>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;U=U+l|0;S=S+u+(U>>>0<l>>>0?1:0)|0;Q=(O>>>1|M<<31)^(O>>>8|M<<24)^(O>>>7|M<<25)|0;U=U+Q|0;S=S+((M>>>1|O<<31)^(M>>>8|O<<24)^M>>>7)+(U>>>0<Q>>>0?1:0)|0;Q=(m>>>19|A<<13)^(m<<3|A>>>29)^(m>>>6|A<<26)|0;U=U+Q|0;S=S+((A>>>19|m<<13)^(A<<3|m>>>29)^A>>>6)+(U>>>0<Q>>>0?1:0)|0;J=0xfc657e2a+U|0;W=0x597f299c+S+(J>>>0<U>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;O=O+y|0;M=M+p+(O>>>0<y>>>0?1:0)|0;Q=(L>>>1|H<<31)^(L>>>8|H<<24)^(L>>>7|H<<25)|0;O=O+Q|0;M=M+((H>>>1|L<<31)^(H>>>8|L<<24)^H>>>7)+(O>>>0<Q>>>0?1:0)|0;Q=(C>>>19|E<<13)^(C<<3|E>>>29)^(C>>>6|E<<26)|0;O=O+Q|0;M=M+((E>>>19|C<<13)^(E<<3|C>>>29)^E>>>6)+(O>>>0<Q>>>0?1:0)|0;J=0x3ad6faec+O|0;W=0x5fcb6fab+M+(J>>>0<O>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;L=L+g|0;H=H+b+(L>>>0<g>>>0?1:0)|0;Q=(t>>>1|f<<31)^(t>>>8|f<<24)^(t>>>7|f<<25)|0;L=L+Q|0;H=H+((f>>>1|t<<31)^(f>>>8|t<<24)^f>>>7)+(L>>>0<Q>>>0?1:0)|0;Q=(U>>>19|S<<13)^(U<<3|S>>>29)^(U>>>6|S<<26)|0;L=L+Q|0;H=H+((S>>>19|U<<13)^(S<<3|U>>>29)^S>>>6)+(L>>>0<Q>>>0?1:0)|0;J=0x4a475817+L|0;W=0x6c44198c+H+(J>>>0<L>>>0?1:0)|0;J=J+K|0;W=W+V+(J>>>0<K>>>0?1:0)|0;Q=(G>>>14|z<<18)^(G>>>18|z<<14)^(G<<23|z>>>9)|0;J=J+Q|0;W=W+((z>>>14|G<<18)^(z>>>18|G<<14)^(z<<23|G>>>9))+(J>>>0<Q>>>0?1:0)|0;Q=q^G&(j^q)|0;J=J+Q|0;W=W+(F^z&(N^F))+(J>>>0<Q>>>0?1:0)|0;K=q;V=F;q=j;F=N;j=G;N=z;G=I+J|0;z=B+W+(G>>>0<I>>>0?1:0)|0;I=Z;B=T;Z=R;T=D;R=P;D=k;P=J+(R&Z^I&(R^Z))|0;k=W+(D&T^B&(D^T))+(P>>>0<J>>>0?1:0)|0;Q=(R>>>28|D<<4)^(R<<30|D>>>2)^(R<<25|D>>>7)|0;P=P+Q|0;k=k+((D>>>28|R<<4)^(D<<30|R>>>2)^(D<<25|R>>>7))+(P>>>0<Q>>>0?1:0)|0;Y=Y+P|0;X=X+k+(Y>>>0<P>>>0?1:0)|0;ff=ff+R|0;$$=$$+D+(ff>>>0<R>>>0?1:0)|0;ef=ef+Z|0;tf=tf+T+(ef>>>0<Z>>>0?1:0)|0;nf=nf+I|0;rf=rf+B+(nf>>>0<I>>>0?1:0)|0;sf=sf+G|0;af=af+z+(sf>>>0<G>>>0?1:0)|0;xf=xf+j|0;of=of+N+(xf>>>0<j>>>0?1:0)|0;hf=hf+q|0;cf=cf+F+(hf>>>0<q>>>0?1:0)|0;lf=lf+K|0;uf=uf+V+(lf>>>0<K>>>0?1:0)|0}function i(f){f=f|0;Hf(Of[f|0]<<24|Of[f|1]<<16|Of[f|2]<<8|Of[f|3],Of[f|4]<<24|Of[f|5]<<16|Of[f|6]<<8|Of[f|7],Of[f|8]<<24|Of[f|9]<<16|Of[f|10]<<8|Of[f|11],Of[f|12]<<24|Of[f|13]<<16|Of[f|14]<<8|Of[f|15],Of[f|16]<<24|Of[f|17]<<16|Of[f|18]<<8|Of[f|19],Of[f|20]<<24|Of[f|21]<<16|Of[f|22]<<8|Of[f|23],Of[f|24]<<24|Of[f|25]<<16|Of[f|26]<<8|Of[f|27],Of[f|28]<<24|Of[f|29]<<16|Of[f|30]<<8|Of[f|31],Of[f|32]<<24|Of[f|33]<<16|Of[f|34]<<8|Of[f|35],Of[f|36]<<24|Of[f|37]<<16|Of[f|38]<<8|Of[f|39],Of[f|40]<<24|Of[f|41]<<16|Of[f|42]<<8|Of[f|43],Of[f|44]<<24|Of[f|45]<<16|Of[f|46]<<8|Of[f|47],Of[f|48]<<24|Of[f|49]<<16|Of[f|50]<<8|Of[f|51],Of[f|52]<<24|Of[f|53]<<16|Of[f|54]<<8|Of[f|55],Of[f|56]<<24|Of[f|57]<<16|Of[f|58]<<8|Of[f|59],Of[f|60]<<24|Of[f|61]<<16|Of[f|62]<<8|Of[f|63],Of[f|64]<<24|Of[f|65]<<16|Of[f|66]<<8|Of[f|67],Of[f|68]<<24|Of[f|69]<<16|Of[f|70]<<8|Of[f|71],Of[f|72]<<24|Of[f|73]<<16|Of[f|74]<<8|Of[f|75],Of[f|76]<<24|Of[f|77]<<16|Of[f|78]<<8|Of[f|79],Of[f|80]<<24|Of[f|81]<<16|Of[f|82]<<8|Of[f|83],Of[f|84]<<24|Of[f|85]<<16|Of[f|86]<<8|Of[f|87],Of[f|88]<<24|Of[f|89]<<16|Of[f|90]<<8|Of[f|91],Of[f|92]<<24|Of[f|93]<<16|Of[f|94]<<8|Of[f|95],Of[f|96]<<24|Of[f|97]<<16|Of[f|98]<<8|Of[f|99],Of[f|100]<<24|Of[f|101]<<16|Of[f|102]<<8|Of[f|103],Of[f|104]<<24|Of[f|105]<<16|Of[f|106]<<8|Of[f|107],Of[f|108]<<24|Of[f|109]<<16|Of[f|110]<<8|Of[f|111],Of[f|112]<<24|Of[f|113]<<16|Of[f|114]<<8|Of[f|115],Of[f|116]<<24|Of[f|117]<<16|Of[f|118]<<8|Of[f|119],Of[f|120]<<24|Of[f|121]<<16|Of[f|122]<<8|Of[f|123],Of[f|124]<<24|Of[f|125]<<16|Of[f|126]<<8|Of[f|127])}function Lf(f){f=f|0;Of[f|0]=X>>>24;Of[f|1]=X>>>16&255;Of[f|2]=X>>>8&255;Of[f|3]=X&255;Of[f|4]=Y>>>24;Of[f|5]=Y>>>16&255;Of[f|6]=Y>>>8&255;Of[f|7]=Y&255;Of[f|8]=$$>>>24;Of[f|9]=$$>>>16&255;Of[f|10]=$$>>>8&255;Of[f|11]=$$&255;Of[f|12]=ff>>>24;Of[f|13]=ff>>>16&255;Of[f|14]=ff>>>8&255;Of[f|15]=ff&255;Of[f|16]=tf>>>24;Of[f|17]=tf>>>16&255;Of[f|18]=tf>>>8&255;Of[f|19]=tf&255;Of[f|20]=ef>>>24;Of[f|21]=ef>>>16&255;Of[f|22]=ef>>>8&255;Of[f|23]=ef&255;Of[f|24]=rf>>>24;Of[f|25]=rf>>>16&255;Of[f|26]=rf>>>8&255;Of[f|27]=rf&255;Of[f|28]=nf>>>24;Of[f|29]=nf>>>16&255;Of[f|30]=nf>>>8&255;Of[f|31]=nf&255;Of[f|32]=af>>>24;Of[f|33]=af>>>16&255;Of[f|34]=af>>>8&255;Of[f|35]=af&255;Of[f|36]=sf>>>24;Of[f|37]=sf>>>16&255;Of[f|38]=sf>>>8&255;Of[f|39]=sf&255;Of[f|40]=of>>>24;Of[f|41]=of>>>16&255;Of[f|42]=of>>>8&255;Of[f|43]=of&255;Of[f|44]=xf>>>24;Of[f|45]=xf>>>16&255;Of[f|46]=xf>>>8&255;Of[f|47]=xf&255;Of[f|48]=cf>>>24;Of[f|49]=cf>>>16&255;Of[f|50]=cf>>>8&255;Of[f|51]=cf&255;Of[f|52]=hf>>>24;Of[f|53]=hf>>>16&255;Of[f|54]=hf>>>8&255;Of[f|55]=hf&255;Of[f|56]=uf>>>24;Of[f|57]=uf>>>16&255;Of[f|58]=uf>>>8&255;Of[f|59]=uf&255;Of[f|60]=lf>>>24;Of[f|61]=lf>>>16&255;Of[f|62]=lf>>>8&255;Of[f|63]=lf&255}function kf(){X=0x6a09e667;Y=0xf3bcc908;$$=0xbb67ae85;ff=0x84caa73b;tf=0x3c6ef372;ef=0xfe94f82b;rf=0xa54ff53a;nf=0x5f1d36f1;af=0x510e527f;sf=0xade682d1;of=0x9b05688c;xf=0x2b3e6c1f;cf=0x1f83d9ab;hf=0xfb41bd6b;uf=0x5be0cd19;lf=0x137e2179;k=P=0}function r(f,t,e,r,n,i,a,s,o,x,c,h,u,l,p,y,b,g){f=f|0;t=t|0;e=e|0;r=r|0;n=n|0;i=i|0;a=a|0;s=s|0;o=o|0;x=x|0;c=c|0;h=h|0;u=u|0;l=l|0;p=p|0;y=y|0;b=b|0;g=g|0;X=f;Y=t;$$=e;ff=r;tf=n;ef=i;rf=a;nf=s;af=o;sf=x;of=c;xf=h;cf=u;hf=l;uf=p;lf=y;k=b;P=g}function a(f,t){f=f|0;t=t|0;var e=0;if(f&127)return-1;while((t|0)>=128){i(f);f=f+128|0;t=t-128|0;e=e+128|0}k=k+e|0;if(k>>>0<e>>>0)P=P+1|0;return e|0}function d(f,t,e){f=f|0;t=t|0;e=e|0;var r=0,n=0;if(f&127)return-1;if(~e)if(e&63)return-1;if((t|0)>=128){r=a(f,t)|0;if((r|0)==-1)return-1;f=f+r|0;t=t-r|0}r=r+t|0;k=k+t|0;if(k>>>0<t>>>0)P=P+1|0;Of[f|t]=0x80;if((t|0)>=112){for(n=t+1|0;(n|0)<128;n=n+1|0)Of[f|n]=0x00;i(f);t=0;Of[f|0]=0}for(n=t+1|0;(n|0)<123;n=n+1|0)Of[f|n]=0;Of[f|120]=P>>>21&255;Of[f|121]=P>>>13&255;Of[f|122]=P>>>5&255;Of[f|123]=P<<3&255|k>>>29;Of[f|124]=k>>>21&255;Of[f|125]=k>>>13&255;Of[f|126]=k>>>5&255;Of[f|127]=k<<3&255;i(f);if(~e)Lf(e);return r|0}function Pf(){X=D;Y=R;$$=T;ff=Z;tf=B;ef=I;rf=z;nf=G;af=N;sf=j;of=F;xf=q;cf=V;hf=K;uf=W;lf=J;k=128;P=0}function Df(){X=Q;Y=pf;$$=yf;ff=bf;tf=gf;ef=_f;rf=vf;nf=df;af=wf;sf=Af;of=mf;xf=Ef;cf=Cf;hf=Sf;uf=Uf;lf=Mf;k=128;P=0}function n(f,t,e,r,n,i,a,s,o,x,c,h,u,l,p,y,b,g,_,v,d,w,A,m,E,C,S,U,M,O,H,L){f=f|0;t=t|0;e=e|0;r=r|0;n=n|0;i=i|0;a=a|0;s=s|0;o=o|0;x=x|0;c=c|0;h=h|0;u=u|0;l=l|0;p=p|0;y=y|0;b=b|0;g=g|0;_=_|0;v=v|0;d=d|0;w=w|0;A=A|0;m=m|0;E=E|0;C=C|0;S=S|0;U=U|0;M=M|0;O=O|0;H=H|0;L=L|0;kf();Hf(f^0x5c5c5c5c,t^0x5c5c5c5c,e^0x5c5c5c5c,r^0x5c5c5c5c,n^0x5c5c5c5c,i^0x5c5c5c5c,a^0x5c5c5c5c,s^0x5c5c5c5c,o^0x5c5c5c5c,x^0x5c5c5c5c,c^0x5c5c5c5c,h^0x5c5c5c5c,u^0x5c5c5c5c,l^0x5c5c5c5c,p^0x5c5c5c5c,y^0x5c5c5c5c,b^0x5c5c5c5c,g^0x5c5c5c5c,_^0x5c5c5c5c,v^0x5c5c5c5c,d^0x5c5c5c5c,w^0x5c5c5c5c,A^0x5c5c5c5c,m^0x5c5c5c5c,E^0x5c5c5c5c,C^0x5c5c5c5c,S^0x5c5c5c5c,U^0x5c5c5c5c,M^0x5c5c5c5c,O^0x5c5c5c5c,H^0x5c5c5c5c,L^0x5c5c5c5c);Q=X;pf=Y;yf=$$;bf=ff;gf=tf;_f=ef;vf=rf;df=nf;wf=af;Af=sf;mf=of;Ef=xf;Cf=cf;Sf=hf;Uf=uf;Mf=lf;kf();Hf(f^0x36363636,t^0x36363636,e^0x36363636,r^0x36363636,n^0x36363636,i^0x36363636,a^0x36363636,s^0x36363636,o^0x36363636,x^0x36363636,c^0x36363636,h^0x36363636,u^0x36363636,l^0x36363636,p^0x36363636,y^0x36363636,b^0x36363636,g^0x36363636,_^0x36363636,v^0x36363636,d^0x36363636,w^0x36363636,A^0x36363636,m^0x36363636,E^0x36363636,C^0x36363636,S^0x36363636,U^0x36363636,M^0x36363636,O^0x36363636,H^0x36363636,L^0x36363636);D=X;R=Y;T=$$;Z=ff;B=tf;I=ef;z=rf;G=nf;N=af;j=sf;F=of;q=xf;V=cf;K=hf;W=uf;J=lf;k=128;P=0}function Rf(f,t,e){f=f|0;t=t|0;e=e|0;var r=0,n=0,i=0,a=0,s=0,o=0,x=0,c=0,h=0,u=0,l=0,p=0,y=0,b=0,g=0,_=0,v=0;if(f&127)return-1;if(~e)if(e&63)return-1;v=d(f,t,-1)|0;r=X;n=Y;i=$$;a=ff;s=tf;o=ef;x=rf;c=nf;h=af;u=sf;l=of;p=xf;y=cf;b=hf;g=uf;_=lf;Df();Hf(r,n,i,a,s,o,x,c,h,u,l,p,y,b,g,_,0x80000000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1536);if(~e)Lf(e);return v|0}function s(f,t,e,r,n){f=f|0;t=t|0;e=e|0;r=r|0;n=n|0;var i=0,a=0,s=0,o=0,x=0,c=0,h=0,u=0,l=0,p=0,y=0,b=0,g=0,_=0,v=0,d=0,w=0,A=0,m=0,E=0,C=0,S=0,U=0,M=0,O=0,H=0,L=0,k=0,P=0,D=0,R=0,T=0;if(f&127)return-1;if(~n)if(n&63)return-1;Of[f+t|0]=e>>>24;Of[f+t+1|0]=e>>>16&255;Of[f+t+2|0]=e>>>8&255;Of[f+t+3|0]=e&255;Rf(f,t+4|0,-1)|0;i=w=X;a=A=Y;s=m=$$;o=E=ff;x=C=tf;c=S=ef;h=U=rf;u=M=nf;l=O=af;p=H=sf;y=L=of;b=k=xf;g=P=cf;_=D=hf;v=R=uf;d=T=lf;r=r-1|0;while((r|0)>0){Pf();Hf(w,A,m,E,C,S,U,M,O,H,L,k,P,D,R,T,0x80000000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1536);w=X;A=Y;m=$$;E=ff;C=tf;S=ef;U=rf;M=nf;O=af;H=sf;L=of;k=xf;P=cf;D=hf;R=uf;T=lf;Df();Hf(w,A,m,E,C,S,U,M,O,H,L,k,P,D,R,T,0x80000000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1536);w=X;A=Y;m=$$;E=ff;C=tf;S=ef;U=rf;M=nf;O=af;H=sf;L=of;k=xf;P=cf;D=hf;R=uf;T=lf;i=i^X;a=a^Y;s=s^$$;o=o^ff;x=x^tf;c=c^ef;h=h^rf;u=u^nf;l=l^af;p=p^sf;y=y^of;b=b^xf;g=g^cf;_=_^hf;v=v^uf;d=d^lf;r=r-1|0}X=i;Y=a;$$=s;ff=o;tf=x;ef=c;rf=h;nf=u;af=l;sf=p;of=y;xf=b;cf=g;hf=_;uf=v;lf=d;if(~n)Lf(n);return 0}return{reset:kf,init:r,process:a,finish:d,hmac_reset:Pf,hmac_init:n,hmac_finish:Rf,pbkdf2_generate_block:s}},xf=function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,t){f.__proto__=t}||function(f,t){for(var e in t)t.hasOwnProperty(e)&&(f[e]=t[e])};return function(f,t){function e(){this.constructor=f}r(f,t),f.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),cf=128,hf=64,uf=function(t){function f(){var f=t.call(this)||this;return f.NAME="sha512",f.BLOCK_SIZE=cf,f.HASH_SIZE=hf,f.heap=x(),f.asm=of({Uint8Array:Uint8Array},null,f.heap.buffer),f.reset(),f}return xf(f,t),f.NAME="sha512",f}(X),lf=function(){function f(f,t,e){if(!f.HASH_SIZE)throw new SyntaxError("option 'hash' supplied doesn't seem to be a valid hash function");this.hash=f,this.BLOCK_SIZE=this.hash.BLOCK_SIZE,this.HMAC_SIZE=this.hash.HASH_SIZE,this.result=null,this.key=pf(this.hash,t);for(var r=new Uint8Array(this.key),n=0;n<r.length;++n)r[n]^=54;this.hash.reset().process(r),void 0!==e?this._hmac_init_verify(e):this.verify=null}return f.prototype.process=function(f){if(null!==this.result)throw new b("state must be reset before processing new data");return this.hash.process(f),this},f.prototype.finish=function(){if(null!==this.result)throw new b("state must be reset before processing new data");for(var f=this.hash.finish().result,t=new Uint8Array(this.key),e=0;e<t.length;++e)t[e]^=92;var r=this.verify,n=this.hash.reset().process(t).process(f).finish().result;if(r){if(r.length!==n.length)throw new Error("HMAC verification failed, lengths doesn't match");var i=0;for(e=0;e<r.length;e++)i|=r[e]^n[e];if(0!==i)throw new Error("HMAC verification failed, hash value doesn't match")}return this.result=n,this},f.prototype._hmac_init_verify=function(f){if(f.length!==this.HMAC_SIZE)throw new _("illegal verification tag size");this.verify=f},f}();function pf(f,t){var e=new Uint8Array(f.BLOCK_SIZE);return t.length>f.BLOCK_SIZE?e.set(f.reset().process(t).finish().result):e.set(t),e}var yf=function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,t){f.__proto__=t}||function(f,t){for(var e in t)t.hasOwnProperty(e)&&(f[e]=t[e])};return function(f,t){function e(){this.constructor=f}r(f,t),f.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),bf=function(n){function f(f,t){var e=this,r=new tf;return e=n.call(this,r,f,t)||this,e.reset(),void 0!==t?e._hmac_init_verify(t):e.verify=null,e}return yf(f,n),f.prototype.reset=function(){this.result=null;var f=this.key;return this.hash.reset().asm.hmac_init(f[0]<<24|f[1]<<16|f[2]<<8|f[3],f[4]<<24|f[5]<<16|f[6]<<8|f[7],f[8]<<24|f[9]<<16|f[10]<<8|f[11],f[12]<<24|f[13]<<16|f[14]<<8|f[15],f[16]<<24|f[17]<<16|f[18]<<8|f[19],f[20]<<24|f[21]<<16|f[22]<<8|f[23],f[24]<<24|f[25]<<16|f[26]<<8|f[27],f[28]<<24|f[29]<<16|f[30]<<8|f[31],f[32]<<24|f[33]<<16|f[34]<<8|f[35],f[36]<<24|f[37]<<16|f[38]<<8|f[39],f[40]<<24|f[41]<<16|f[42]<<8|f[43],f[44]<<24|f[45]<<16|f[46]<<8|f[47],f[48]<<24|f[49]<<16|f[50]<<8|f[51],f[52]<<24|f[53]<<16|f[54]<<8|f[55],f[56]<<24|f[57]<<16|f[58]<<8|f[59],f[60]<<24|f[61]<<16|f[62]<<8|f[63]),this},f.prototype.finish=function(){if(null!==this.result)throw new b("state must be reset before processing new data");var f=this.hash,t=this.hash.asm,e=this.hash.heap;t.hmac_finish(f.pos,f.len,0);var r=this.verify,n=new Uint8Array(ff);if(n.set(e.subarray(0,ff)),r){if(r.length!==n.length)throw new Error("HMAC verification failed, lengths doesn't match");for(var i=0,a=0;a<r.length;a++)i|=r[a]^n[a];if(0!==i)throw new Error("HMAC verification failed, hash value doesn't match")}else this.result=n;return this},f}(lf),gf=function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,t){f.__proto__=t}||function(f,t){for(var e in t)t.hasOwnProperty(e)&&(f[e]=t[e])};return function(f,t){function e(){this.constructor=f}r(f,t),f.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),_f=function(n){function f(f,t){var e=this,r=new sf;return e=n.call(this,r,f,t)||this,e.reset(),void 0!==t?e._hmac_init_verify(t):e.verify=null,e}return gf(f,n),f.prototype.reset=function(){var f=this.key;return this.hash.reset().asm.hmac_init(f[0]<<24|f[1]<<16|f[2]<<8|f[3],f[4]<<24|f[5]<<16|f[6]<<8|f[7],f[8]<<24|f[9]<<16|f[10]<<8|f[11],f[12]<<24|f[13]<<16|f[14]<<8|f[15],f[16]<<24|f[17]<<16|f[18]<<8|f[19],f[20]<<24|f[21]<<16|f[22]<<8|f[23],f[24]<<24|f[25]<<16|f[26]<<8|f[27],f[28]<<24|f[29]<<16|f[30]<<8|f[31],f[32]<<24|f[33]<<16|f[34]<<8|f[35],f[36]<<24|f[37]<<16|f[38]<<8|f[39],f[40]<<24|f[41]<<16|f[42]<<8|f[43],f[44]<<24|f[45]<<16|f[46]<<8|f[47],f[48]<<24|f[49]<<16|f[50]<<8|f[51],f[52]<<24|f[53]<<16|f[54]<<8|f[55],f[56]<<24|f[57]<<16|f[58]<<8|f[59],f[60]<<24|f[61]<<16|f[62]<<8|f[63]),this},f.prototype.finish=function(){if(null===this.key)throw new b("no key is associated with the instance");if(null!==this.result)throw new b("state must be reset before processing new data");var f=this.hash,t=this.hash.asm,e=this.hash.heap;t.hmac_finish(f.pos,f.len,0);var r=this.verify,n=new Uint8Array(af);if(n.set(e.subarray(0,af)),r){if(r.length!==n.length)throw new Error("HMAC verification failed, lengths doesn't match");for(var i=0,a=0;a<r.length;a++)i|=r[a]^n[a];if(0!==i)throw new Error("HMAC verification failed, hash value doesn't match")}else this.result=n;return this},f}(lf),vf=function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,t){f.__proto__=t}||function(f,t){for(var e in t)t.hasOwnProperty(e)&&(f[e]=t[e])};return function(f,t){function e(){this.constructor=f}r(f,t),f.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}}(),df=function(n){function f(f,t){var e=this,r=new uf;return e=n.call(this,r,f,t)||this,e.reset(),void 0!==t?e._hmac_init_verify(t):e.verify=null,e}return vf(f,n),f.prototype.reset=function(){var f=this.key;return this.hash.reset().asm.hmac_init(f[0]<<24|f[1]<<16|f[2]<<8|f[3],f[4]<<24|f[5]<<16|f[6]<<8|f[7],f[8]<<24|f[9]<<16|f[10]<<8|f[11],f[12]<<24|f[13]<<16|f[14]<<8|f[15],f[16]<<24|f[17]<<16|f[18]<<8|f[19],f[20]<<24|f[21]<<16|f[22]<<8|f[23],f[24]<<24|f[25]<<16|f[26]<<8|f[27],f[28]<<24|f[29]<<16|f[30]<<8|f[31],f[32]<<24|f[33]<<16|f[34]<<8|f[35],f[36]<<24|f[37]<<16|f[38]<<8|f[39],f[40]<<24|f[41]<<16|f[42]<<8|f[43],f[44]<<24|f[45]<<16|f[46]<<8|f[47],f[48]<<24|f[49]<<16|f[50]<<8|f[51],f[52]<<24|f[53]<<16|f[54]<<8|f[55],f[56]<<24|f[57]<<16|f[58]<<8|f[59],f[60]<<24|f[61]<<16|f[62]<<8|f[63],f[64]<<24|f[65]<<16|f[66]<<8|f[67],f[68]<<24|f[69]<<16|f[70]<<8|f[71],f[72]<<24|f[73]<<16|f[74]<<8|f[75],f[76]<<24|f[77]<<16|f[78]<<8|f[79],f[80]<<24|f[81]<<16|f[82]<<8|f[83],f[84]<<24|f[85]<<16|f[86]<<8|f[87],f[88]<<24|f[89]<<16|f[90]<<8|f[91],f[92]<<24|f[93]<<16|f[94]<<8|f[95],f[96]<<24|f[97]<<16|f[98]<<8|f[99],f[100]<<24|f[101]<<16|f[102]<<8|f[103],f[104]<<24|f[105]<<16|f[106]<<8|f[107],f[108]<<24|f[109]<<16|f[110]<<8|f[111],f[112]<<24|f[113]<<16|f[114]<<8|f[115],f[116]<<24|f[117]<<16|f[118]<<8|f[119],f[120]<<24|f[121]<<16|f[122]<<8|f[123],f[124]<<24|f[125]<<16|f[126]<<8|f[127]),this},f.prototype.finish=function(){if(null===this.key)throw new b("no key is associated with the instance");if(null!==this.result)throw new b("state must be reset before processing new data");var f=this.hash,t=this.hash.asm,e=this.hash.heap;t.hmac_finish(f.pos,f.len,0);var r=this.verify,n=new Uint8Array(hf);if(n.set(e.subarray(0,hf)),r){if(r.length!==n.length)throw new Error("HMAC verification failed, lengths doesn't match");for(var i=0,a=0;a<r.length;a++)i|=r[a]^n[a];if(0!==i)throw new Error("HMAC verification failed, hash value doesn't match")}else this.result=n;return this},f}(lf);function wf(f,t,e,r){for(var n=new bf(f),i=new Uint8Array(r),a=Math.ceil(r/n.HMAC_SIZE),s=1;s<=a;++s){var o=(s-1)*n.HMAC_SIZE,x=(s<a?0:r%n.HMAC_SIZE)||n.HMAC_SIZE;n.reset().process(t),n.hash.asm.pbkdf2_generate_block(n.hash.pos,n.hash.len,s,e,0),i.set(n.hash.heap.subarray(0,x),o)}return i}function Af(f,t,e,r){for(var n=new _f(f),i=new Uint8Array(r),a=Math.ceil(r/n.HMAC_SIZE),s=1;s<=a;++s){var o=(s-1)*n.HMAC_SIZE,x=(s<a?0:r%n.HMAC_SIZE)||n.HMAC_SIZE;n.reset().process(t),n.hash.asm.pbkdf2_generate_block(n.hash.pos,n.hash.len,s,e,0),i.set(n.hash.heap.subarray(0,x),o)}return i}function mf(f,t,e,r){for(var n=new df(f),i=new Uint8Array(r),a=Math.ceil(r/n.HMAC_SIZE),s=1;s<=a;++s){var o=(s-1)*n.HMAC_SIZE,x=(s<a?0:r%n.HMAC_SIZE)||n.HMAC_SIZE;n.reset().process(t),n.hash.asm.pbkdf2_generate_block(n.hash.pos,n.hash.len,s,e,0),i.set(n.hash.heap.subarray(0,x),o)}return i}var Ef=function(){function f(f){var t=f.length;if(2!==t&&3!==t&&8!==t)throw new SyntaxError("unexpected key type");var e=new J(new W(f[0])),r=new W(f[1]);this.key={0:e,1:r},2<t&&(this.key[2]=new W(f[2])),3<t&&(this.key[3]=new J(new W(f[3])),this.key[4]=new J(new W(f[4])),this.key[5]=new W(f[5]),this.key[6]=new W(f[6]),this.key[7]=new W(f[7]))}return f.prototype.encrypt=function(f){if(!this.key)throw new b("no key is associated with the instance");if(this.key[0].compare(f)<=0)throw new RangeError("data too large");var t=this.key[0],e=this.key[1],r=t.power(f,e).toBytes(),n=t.bitLength+7>>3;if(r.length<n){var i=new Uint8Array(n);i.set(r,n-r.length),r=i}return this.result=r,this},f.prototype.decrypt=function(f){if(this.key[0].compare(f)<=0)throw new RangeError("data too large");var t,e;if(void 0!==this.key[3]){e=this.key[0];for(var r=this.key[3],n=this.key[4],i=this.key[5],a=this.key[6],s=this.key[7],o=r.power(f,i),x=n.power(f,a),c=o.subtract(x);c.sign<0;)c=c.add(r);var h=r.reduce(s.multiply(c));t=h.multiply(n).add(x).clamp(e.bitLength).toBytes()}else{e=this.key[0];var u=this.key[2];t=e.power(f,u).toBytes()}var l=e.bitLength+7>>3;if(t.length<l){var p=new Uint8Array(l);p.set(t,l-t.length),t=p}return this.result=t,this},f}(),Cf=function(){function f(f,t,e){this.rsa=new Ef(f),this.hash=t,this.label=void 0!==e&&0<e.length?e:null}return f.prototype.encrypt=function(f,t){var e=Math.ceil(this.rsa.key[0].bitLength/8),r=this.hash.HASH_SIZE,n=f.byteLength||f.length||0,i=e-n-2*r-2;if(n>e-2*this.hash.HASH_SIZE-2)throw new _("data too large");var a=new Uint8Array(e),s=a.subarray(1,r+1),o=a.subarray(r+1);if(o.set(f,r+i+1),o.set(this.hash.process(this.label||new Uint8Array(0)).finish().result,0),o[r+i]=1,void 0!==t){if(s.length!==t.length)throw new _("random size must equal the hash size");s.set(t)}else G(s);for(var x=this.RSA_MGF1_generate(s,o.length),c=0;c<o.length;c++)o[c]^=x[c];var h=this.RSA_MGF1_generate(o,s.length);for(c=0;c<s.length;c++)s[c]^=h[c];return this.rsa.encrypt(new W(a)),new Uint8Array(this.rsa.result)},f.prototype.decrypt=function(f){if(!this.rsa.key)throw new b("no key is associated with the instance");var t=Math.ceil(this.rsa.key[0].bitLength/8),e=this.hash.HASH_SIZE,r=f.byteLength||f.length||0;if(r!==t)throw new _("bad data");this.rsa.decrypt(new W(f));var n=this.rsa.result[0],i=this.rsa.result.subarray(1,e+1),a=this.rsa.result.subarray(e+1);if(0!==n)throw new v("decryption failed");for(var s=this.RSA_MGF1_generate(a,i.length),o=0;o<i.length;o++)i[o]^=s[o];var x=this.RSA_MGF1_generate(i,a.length);for(o=0;o<a.length;o++)a[o]^=x[o];var c=this.hash.reset().process(this.label||new Uint8Array(0)).finish().result;for(o=0;o<e;o++)if(c[o]!==a[o])throw new v("decryption failed");for(var h=e;h<a.length;h++){var u=a[h];if(1===u)break;if(0!==u)throw new v("decryption failed")}if(h===a.length)throw new v("decryption failed");return this.rsa.result=a.subarray(h+1),new Uint8Array(this.rsa.result)},f.prototype.RSA_MGF1_generate=function(f,t){void 0===t&&(t=0);for(var e=this.hash.HASH_SIZE,r=new Uint8Array(t),n=new Uint8Array(4),i=Math.ceil(t/e),a=0;a<i;a++){n[0]=a>>>24,n[1]=a>>>16&255,n[2]=a>>>8&255,n[3]=255&a;var s=r.subarray(a*e),o=this.hash.reset().process(f).process(n).finish().result;o.length>s.length&&(o=o.subarray(0,s.length)),s.set(o)}return r},f}(),Sf=function(){function f(f,t,e){if(void 0===e&&(e=4),this.rsa=new Ef(f),this.hash=t,this.saltLength=e,this.saltLength<0)throw new TypeError("saltLength should be a non-negative number");if(null!==this.rsa.key&&Math.ceil((this.rsa.key[0].bitLength-1)/8)<this.hash.HASH_SIZE+this.saltLength+2)throw new SyntaxError("saltLength is too large")}return f.prototype.sign=function(f,t){var e=this.rsa.key[0].bitLength,r=this.hash.HASH_SIZE,n=Math.ceil((e-1)/8),i=this.saltLength,a=n-i-r-2,s=new Uint8Array(n),o=s.subarray(n-r-1,n-1),x=s.subarray(0,n-r-1),c=x.subarray(a+1),h=new Uint8Array(8+r+i),u=h.subarray(8,8+r),l=h.subarray(8+r);if(u.set(this.hash.process(f).finish().result),0<i)if(void 0!==t){if(l.length!==t.length)throw new _("random size must equal the salt size");l.set(t)}else G(l);x[a]=1,c.set(l),o.set(this.hash.reset().process(h).finish().result);for(var p=this.RSA_MGF1_generate(o,x.length),y=0;y<x.length;y++)x[y]^=p[y];s[n-1]=188;var b=8*n-e+1;return b%8&&(s[0]&=255>>>b),this.rsa.decrypt(new W(s)),this.rsa.result},f.prototype.verify=function(f,t){var e=this.rsa.key[0].bitLength,r=this.hash.HASH_SIZE,n=Math.ceil((e-1)/8),i=this.saltLength,a=n-i-r-2;this.rsa.encrypt(new W(f));var s=this.rsa.result;if(188!==s[n-1])throw new v("bad signature");var o=s.subarray(n-r-1,n-1),x=s.subarray(0,n-r-1),c=x.subarray(a+1),h=8*n-e+1;if(h%8&&s[0]>>>8-h)throw new v("bad signature");for(var u=this.RSA_MGF1_generate(o,x.length),l=0;l<x.length;l++)x[l]^=u[l];h%8&&(s[0]&=255>>>h);for(l=0;l<a;l++)if(0!==x[l])throw new v("bad signature");if(1!==x[a])throw new v("bad signature");var p=new Uint8Array(8+r+i),y=p.subarray(8,8+r),b=p.subarray(8+r);y.set(this.hash.reset().process(t).finish().result),b.set(c);var g=this.hash.reset().process(p).finish().result;for(l=0;l<r;l++)if(o[l]!==g[l])throw new v("bad signature")},f.prototype.RSA_MGF1_generate=function(f,t){void 0===t&&(t=0);for(var e=this.hash.HASH_SIZE,r=new Uint8Array(t),n=new Uint8Array(4),i=Math.ceil(t/e),a=0;a<i;a++){n[0]=a>>>24,n[1]=a>>>16&255,n[2]=a>>>8&255,n[3]=255&a;var s=r.subarray(a*e),o=this.hash.reset().process(f).process(n).finish().result;o.length>s.length&&(o=o.subarray(0,s.length)),s.set(o)}return r},f}(),Uf=function(){function f(f,t){this.rsa=new Ef(f),this.hash=t}return f.prototype.sign=function(f){if(!this.rsa.key)throw new b("no key is associated with the instance");var t=Of(this.hash),e=this.hash.HASH_SIZE,r=t.length+e,n=this.rsa.key[0].bitLength+7>>3;if(n<r+11)throw new Error("Message too long");var i=new Uint8Array(e);i.set(this.hash.process(f).finish().result);var a=new Uint8Array(n),s=0;for(a[s++]=0,a[s++]=1;s<n-r-1;s++)a[s]=255;return a[s++]=0,a.set(t,s),a.set(i,a.length-e),this.rsa.decrypt(new W(a)),this.rsa.result},f.prototype.verify=function(f,t){var e=Of(this.hash),r=this.hash.HASH_SIZE,n=e.length+r,i=this.rsa.key[0].bitLength+7>>3;if(i<n+11)throw new v("Bad signature");this.rsa.encrypt(new W(f));var a=new Uint8Array(r);a.set(this.hash.process(t).finish().result);var s=1,o=this.rsa.result,x=0;for(s&=0===o[x++]?1:0,s&=1===o[x++]?1:0;x<i-n-1;x++)s&=255===o[x]?1:0;s&=0===o[x++]?1:0;for(var c=0,h=x+e.length;x<h;x++)s&=o[x]===e[c++]?1:0;for(c=0,h=x+a.length;x<h;x++)s&=o[x]===a[c++]?1:0;if(!s)throw new v("Bad signature")},f}(),Mf={sha1:new Uint8Array([48,33,48,9,6,5,43,14,3,2,26,5,0,4,20]),sha256:new Uint8Array([48,49,48,13,6,9,96,134,72,1,101,3,4,2,1,5,0,4,32]),sha384:new Uint8Array([48,65,48,13,6,9,96,134,72,1,101,3,4,2,2,5,0,4,48]),sha512:new Uint8Array([48,81,48,13,6,9,96,134,72,1,101,3,4,2,3,5,0,4,64])};function Of(f){var t=Mf[f.NAME];if(!t)throw new Error("Cannot get hash prefix for hash algorithm '"+f.NAME+"'");return t}return f.string_to_bytes=r,f.hex_to_bytes=n,f.base64_to_bytes=i,f.bytes_to_string=a,f.bytes_to_hex=s,f.bytes_to_base64=o,f.IllegalStateError=b,f.IllegalArgumentError=_,f.SecurityError=v,f.AES_CBC=d,f.AES_CCM=E,f.AES_CFB=S,f.AES_CMAC=H,f.AES_CTR=k,f.AES_ECB=M,f.AES_GCM=R,f.AES_OFB=Z,f.BigNumber=W,f.Modulus=J,f.Sha1=tf,f.Sha256=sf,f.Sha512=uf,f.HmacSha1=bf,f.HmacSha256=_f,f.HmacSha512=df,f.Pbkdf2HmacSha1=wf,f.Pbkdf2HmacSha256=Af,f.Pbkdf2HmacSha512=mf,f.RSA_OAEP=Cf,f.RSA_PKCS1_v1_5=Uf,f.RSA_PSS=Sf,f.RSA=Ef,f}({
  
});



/////////////////////asdf


!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.elliptic=a()}}(function(){return function(){function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}return a}()({1:[function(a,b,c){"use strict";var d=c;d.version=a("../package.json").version,d.utils=a("./elliptic/utils"),d.rand=a("brorand"),d.curve=a("./elliptic/curve"),d.curves=a("./elliptic/curves"),d.ec=a("./elliptic/ec"),d.eddsa=a("./elliptic/eddsa")},{"../package.json":35,"./elliptic/curve":4,"./elliptic/curves":7,"./elliptic/ec":8,"./elliptic/eddsa":11,"./elliptic/utils":15,brorand:17}],2:[function(a,b,c){"use strict";function d(a,b){this.type=a,this.p=new f(b.p,16),this.red=b.prime?f.red(b.prime):f.mont(this.p),this.zero=new f(0).toRed(this.red),this.one=new f(1).toRed(this.red),this.two=new f(2).toRed(this.red),this.n=b.n&&new f(b.n,16),this.g=b.g&&this.pointFromJSON(b.g,b.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var c=this.n&&this.p.div(this.n);!c||c.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function e(a,b){this.curve=a,this.type=b,this.precomputed=null}var f=a("bn.js"),g=a("../utils"),h=g.getNAF,i=g.getJSF,j=g.assert;b.exports=d,d.prototype.point=function(){throw new Error("Not implemented")},d.prototype.validate=function(){throw new Error("Not implemented")},d.prototype._fixedNafMul=function(a,b){j(a.precomputed);var c=a._getDoubles(),d=h(b,1,this._bitLength),e=(1<<c.step+1)-(c.step%2===0?2:1);e/=3;for(var f=[],g=0;g<d.length;g+=c.step){for(var i=0,b=g+c.step-1;b>=g;b--)i=(i<<1)+d[b];f.push(i)}for(var k=this.jpoint(null,null,null),l=this.jpoint(null,null,null),m=e;m>0;m--){for(var g=0;g<f.length;g++){var i=f[g];i===m?l=l.mixedAdd(c.points[g]):i===-m&&(l=l.mixedAdd(c.points[g].neg()))}k=k.add(l)}return k.toP()},d.prototype._wnafMul=function(a,b){var c=4,d=a._getNAFPoints(c);c=d.wnd;for(var e=d.points,f=h(b,c,this._bitLength),g=this.jpoint(null,null,null),i=f.length-1;i>=0;i--){for(var b=0;i>=0&&0===f[i];i--)b++;if(i>=0&&b++,g=g.dblp(b),i<0)break;var k=f[i];j(0!==k),g="affine"===a.type?k>0?g.mixedAdd(e[k-1>>1]):g.mixedAdd(e[-k-1>>1].neg()):k>0?g.add(e[k-1>>1]):g.add(e[-k-1>>1].neg())}return"affine"===a.type?g.toP():g},d.prototype._wnafMulAdd=function(a,b,c,d,e){for(var f=this._wnafT1,g=this._wnafT2,j=this._wnafT3,k=0,l=0;l<d;l++){var m=b[l],n=m._getNAFPoints(a);f[l]=n.wnd,g[l]=n.points}for(var l=d-1;l>=1;l-=2){var o=l-1,p=l;if(1===f[o]&&1===f[p]){var q=[b[o],null,null,b[p]];0===b[o].y.cmp(b[p].y)?(q[1]=b[o].add(b[p]),q[2]=b[o].toJ().mixedAdd(b[p].neg())):0===b[o].y.cmp(b[p].y.redNeg())?(q[1]=b[o].toJ().mixedAdd(b[p]),q[2]=b[o].add(b[p].neg())):(q[1]=b[o].toJ().mixedAdd(b[p]),q[2]=b[o].toJ().mixedAdd(b[p].neg()));var r=[-3,-1,-5,-7,0,7,5,1,3],s=i(c[o],c[p]);k=Math.max(s[0].length,k),j[o]=new Array(k),j[p]=new Array(k);for(var t=0;t<k;t++){var u=0|s[0][t],v=0|s[1][t];j[o][t]=r[3*(u+1)+(v+1)],j[p][t]=0,g[o]=q}}else j[o]=h(c[o],f[o],this._bitLength),j[p]=h(c[p],f[p],this._bitLength),k=Math.max(j[o].length,k),k=Math.max(j[p].length,k)}for(var w=this.jpoint(null,null,null),x=this._wnafT4,l=k;l>=0;l--){for(var y=0;l>=0;){for(var z=!0,t=0;t<d;t++)x[t]=0|j[t][l],0!==x[t]&&(z=!1);if(!z)break;y++,l--}if(l>=0&&y++,w=w.dblp(y),l<0)break;for(var t=0;t<d;t++){var m,A=x[t];0!==A&&(A>0?m=g[t][A-1>>1]:A<0&&(m=g[t][-A-1>>1].neg()),w="affine"===m.type?w.mixedAdd(m):w.add(m))}}for(var l=0;l<d;l++)g[l]=null;return e?w:w.toP()},d.BasePoint=e,e.prototype.eq=function(){throw new Error("Not implemented")},e.prototype.validate=function(){return this.curve.validate(this)},d.prototype.decodePoint=function(a,b){a=g.toArray(a,b);var c=this.p.byteLength();if((4===a[0]||6===a[0]||7===a[0])&&a.length-1===2*c){6===a[0]?j(a[a.length-1]%2===0):7===a[0]&&j(a[a.length-1]%2===1);var d=this.point(a.slice(1,1+c),a.slice(1+c,1+2*c));return d}if((2===a[0]||3===a[0])&&a.length-1===c)return this.pointFromX(a.slice(1,1+c),3===a[0]);throw new Error("Unknown point format")},e.prototype.encodeCompressed=function(a){return this.encode(a,!0)},e.prototype._encode=function(a){var b=this.curve.p.byteLength(),c=this.getX().toArray("be",b);return a?[this.getY().isEven()?2:3].concat(c):[4].concat(c,this.getY().toArray("be",b))},e.prototype.encode=function(a,b){return g.encode(this._encode(b),a)},e.prototype.precompute=function(a){if(this.precomputed)return this;var b={doubles:null,naf:null,beta:null};return b.naf=this._getNAFPoints(8),b.doubles=this._getDoubles(4,a),b.beta=this._getBeta(),this.precomputed=b,this},e.prototype._hasDoubles=function(a){if(!this.precomputed)return!1;var b=this.precomputed.doubles;return!!b&&b.points.length>=Math.ceil((a.bitLength()+1)/b.step)},e.prototype._getDoubles=function(a,b){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var c=[this],d=this,e=0;e<b;e+=a){for(var f=0;f<a;f++)d=d.dbl();c.push(d)}return{step:a,points:c}},e.prototype._getNAFPoints=function(a){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var b=[this],c=(1<<a)-1,d=1===c?null:this.dbl(),e=1;e<c;e++)b[e]=b[e-1].add(d);return{wnd:a,points:b}},e.prototype._getBeta=function(){return null},e.prototype.dblp=function(a){for(var b=this,c=0;c<a;c++)b=b.dbl();return b}},{"../utils":15,"bn.js":16}],3:[function(a,b,c){"use strict";function d(a){this.twisted=1!==(0|a.a),this.mOneA=this.twisted&&(0|a.a)===-1,this.extended=this.mOneA,i.call(this,"edwards",a),this.a=new g(a.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new g(a.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new g(a.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),j(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1===(0|a.c)}function e(a,b,c,d,e){i.BasePoint.call(this,a,"projective"),null===b&&null===c&&null===d?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new g(b,16),this.y=new g(c,16),this.z=d?new g(d,16):this.curve.one,this.t=e&&new g(e,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}var f=a("../utils"),g=a("bn.js"),h=a("inherits"),i=a("./base"),j=f.assert;h(d,i),b.exports=d,d.prototype._mulA=function(a){return this.mOneA?a.redNeg():this.a.redMul(a)},d.prototype._mulC=function(a){return this.oneC?a:this.c.redMul(a)},d.prototype.jpoint=function(a,b,c,d){return this.point(a,b,c,d)},d.prototype.pointFromX=function(a,b){a=new g(a,16),a.red||(a=a.toRed(this.red));var c=a.redSqr(),d=this.c2.redSub(this.a.redMul(c)),e=this.one.redSub(this.c2.redMul(this.d).redMul(c)),f=d.redMul(e.redInvm()),h=f.redSqrt();if(0!==h.redSqr().redSub(f).cmp(this.zero))throw new Error("invalid point");var i=h.fromRed().isOdd();return(b&&!i||!b&&i)&&(h=h.redNeg()),this.point(a,h)},d.prototype.pointFromY=function(a,b){a=new g(a,16),a.red||(a=a.toRed(this.red));var c=a.redSqr(),d=c.redSub(this.c2),e=c.redMul(this.d).redMul(this.c2).redSub(this.a),f=d.redMul(e.redInvm());if(0===f.cmp(this.zero)){if(b)throw new Error("invalid point");return this.point(this.zero,a)}var h=f.redSqrt();if(0!==h.redSqr().redSub(f).cmp(this.zero))throw new Error("invalid point");return h.fromRed().isOdd()!==b&&(h=h.redNeg()),this.point(h,a)},d.prototype.validate=function(a){if(a.isInfinity())return!0;a.normalize();var b=a.x.redSqr(),c=a.y.redSqr(),d=b.redMul(this.a).redAdd(c),e=this.c2.redMul(this.one.redAdd(this.d.redMul(b).redMul(c)));return 0===d.cmp(e)},h(e,i.BasePoint),d.prototype.pointFromJSON=function(a){return e.fromJSON(this,a)},d.prototype.point=function(a,b,c,d){return new e(this,a,b,c,d)},e.fromJSON=function(a,b){return new e(a,b[0],b[1],b[2])},e.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},e.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},e.prototype._extDbl=function(){var a=this.x.redSqr(),b=this.y.redSqr(),c=this.z.redSqr();c=c.redIAdd(c);var d=this.curve._mulA(a),e=this.x.redAdd(this.y).redSqr().redISub(a).redISub(b),f=d.redAdd(b),g=f.redSub(c),h=d.redSub(b),i=e.redMul(g),j=f.redMul(h),k=e.redMul(h),l=g.redMul(f);return this.curve.point(i,j,l,k)},e.prototype._projDbl=function(){var a,b,c,d=this.x.redAdd(this.y).redSqr(),e=this.x.redSqr(),f=this.y.redSqr();if(this.curve.twisted){var g=this.curve._mulA(e),h=g.redAdd(f);if(this.zOne)a=d.redSub(e).redSub(f).redMul(h.redSub(this.curve.two)),b=h.redMul(g.redSub(f)),c=h.redSqr().redSub(h).redSub(h);else{var i=this.z.redSqr(),j=h.redSub(i).redISub(i);a=d.redSub(e).redISub(f).redMul(j),b=h.redMul(g.redSub(f)),c=h.redMul(j)}}else{var g=e.redAdd(f),i=this.curve._mulC(this.z).redSqr(),j=g.redSub(i).redSub(i);a=this.curve._mulC(d.redISub(g)).redMul(j),b=this.curve._mulC(g).redMul(e.redISub(f)),c=g.redMul(j)}return this.curve.point(a,b,c)},e.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},e.prototype._extAdd=function(a){var b=this.y.redSub(this.x).redMul(a.y.redSub(a.x)),c=this.y.redAdd(this.x).redMul(a.y.redAdd(a.x)),d=this.t.redMul(this.curve.dd).redMul(a.t),e=this.z.redMul(a.z.redAdd(a.z)),f=c.redSub(b),g=e.redSub(d),h=e.redAdd(d),i=c.redAdd(b),j=f.redMul(g),k=h.redMul(i),l=f.redMul(i),m=g.redMul(h);return this.curve.point(j,k,m,l)},e.prototype._projAdd=function(a){var b,c,d=this.z.redMul(a.z),e=d.redSqr(),f=this.x.redMul(a.x),g=this.y.redMul(a.y),h=this.curve.d.redMul(f).redMul(g),i=e.redSub(h),j=e.redAdd(h),k=this.x.redAdd(this.y).redMul(a.x.redAdd(a.y)).redISub(f).redISub(g),l=d.redMul(i).redMul(k);return this.curve.twisted?(b=d.redMul(j).redMul(g.redSub(this.curve._mulA(f))),c=i.redMul(j)):(b=d.redMul(j).redMul(g.redSub(f)),c=this.curve._mulC(i).redMul(j)),this.curve.point(l,b,c)},e.prototype.add=function(a){return this.isInfinity()?a:a.isInfinity()?this:this.curve.extended?this._extAdd(a):this._projAdd(a)},e.prototype.mul=function(a){return this._hasDoubles(a)?this.curve._fixedNafMul(this,a):this.curve._wnafMul(this,a)},e.prototype.mulAdd=function(a,b,c){return this.curve._wnafMulAdd(1,[this,b],[a,c],2,!1)},e.prototype.jmulAdd=function(a,b,c){return this.curve._wnafMulAdd(1,[this,b],[a,c],2,!0)},e.prototype.normalize=function(){if(this.zOne)return this;var a=this.z.redInvm();return this.x=this.x.redMul(a),this.y=this.y.redMul(a),this.t&&(this.t=this.t.redMul(a)),this.z=this.curve.one,this.zOne=!0,this},e.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},e.prototype.getX=function(){return this.normalize(),this.x.fromRed()},e.prototype.getY=function(){return this.normalize(),this.y.fromRed()},e.prototype.eq=function(a){return this===a||0===this.getX().cmp(a.getX())&&0===this.getY().cmp(a.getY())},e.prototype.eqXToP=function(a){var b=a.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(b))return!0;for(var c=a.clone(),d=this.curve.redN.redMul(this.z);;){if(c.iadd(this.curve.n),c.cmp(this.curve.p)>=0)return!1;if(b.redIAdd(d),0===this.x.cmp(b))return!0}},e.prototype.toP=e.prototype.normalize,e.prototype.mixedAdd=e.prototype.add},{"../utils":15,"./base":2,"bn.js":16,inherits:32}],4:[function(a,b,c){"use strict";var d=c;d.base=a("./base"),d["short"]=a("./short"),d.mont=a("./mont"),d.edwards=a("./edwards")},{"./base":2,"./edwards":3,"./mont":5,"./short":6}],5:[function(a,b,c){"use strict";function d(a){h.call(this,"mont",a),this.a=new f(a.a,16).toRed(this.red),this.b=new f(a.b,16).toRed(this.red),this.i4=new f(4).toRed(this.red).redInvm(),this.two=new f(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function e(a,b,c){h.BasePoint.call(this,a,"projective"),null===b&&null===c?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new f(b,16),this.z=new f(c,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}var f=a("bn.js"),g=a("inherits"),h=a("./base"),i=a("../utils");g(d,h),b.exports=d,d.prototype.validate=function(a){var b=a.normalize().x,c=b.redSqr(),d=c.redMul(b).redAdd(c.redMul(this.a)).redAdd(b),e=d.redSqrt();return 0===e.redSqr().cmp(d)},g(e,h.BasePoint),d.prototype.decodePoint=function(a,b){return this.point(i.toArray(a,b),1)},d.prototype.point=function(a,b){return new e(this,a,b)},d.prototype.pointFromJSON=function(a){return e.fromJSON(this,a)},e.prototype.precompute=function(){},e.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},e.fromJSON=function(a,b){return new e(a,b[0],b[1]||a.one)},e.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},e.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},e.prototype.dbl=function(){var a=this.x.redAdd(this.z),b=a.redSqr(),c=this.x.redSub(this.z),d=c.redSqr(),e=b.redSub(d),f=b.redMul(d),g=e.redMul(d.redAdd(this.curve.a24.redMul(e)));return this.curve.point(f,g)},e.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},e.prototype.diffAdd=function(a,b){var c=this.x.redAdd(this.z),d=this.x.redSub(this.z),e=a.x.redAdd(a.z),f=a.x.redSub(a.z),g=f.redMul(c),h=e.redMul(d),i=b.z.redMul(g.redAdd(h).redSqr()),j=b.x.redMul(g.redISub(h).redSqr());return this.curve.point(i,j)},e.prototype.mul=function(a){for(var b=a.clone(),c=this,d=this.curve.point(null,null),e=this,f=[];0!==b.cmpn(0);b.iushrn(1))f.push(b.andln(1));for(var g=f.length-1;g>=0;g--)0===f[g]?(c=c.diffAdd(d,e),d=d.dbl()):(d=c.diffAdd(d,e),c=c.dbl());return d},e.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},e.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},e.prototype.eq=function(a){return 0===this.getX().cmp(a.getX())},e.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},e.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":15,"./base":2,"bn.js":16,inherits:32}],6:[function(a,b,c){"use strict";function d(a){j.call(this,"short",a),this.a=new h(a.a,16).toRed(this.red),this.b=new h(a.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(a),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function e(a,b,c,d){j.BasePoint.call(this,a,"affine"),null===b&&null===c?(this.x=null,this.y=null,this.inf=!0):(this.x=new h(b,16),this.y=new h(c,16),d&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function f(a,b,c,d){j.BasePoint.call(this,a,"jacobian"),null===b&&null===c&&null===d?(this.x=this.curve.one,this.y=this.curve.one,this.z=new h(0)):(this.x=new h(b,16),this.y=new h(c,16),this.z=new h(d,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}var g=a("../utils"),h=a("bn.js"),i=a("inherits"),j=a("./base"),k=g.assert;i(d,j),b.exports=d,d.prototype._getEndomorphism=function(a){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var b,c;if(a.beta)b=new h(a.beta,16).toRed(this.red);else{var d=this._getEndoRoots(this.p);b=d[0].cmp(d[1])<0?d[0]:d[1],b=b.toRed(this.red)}if(a.lambda)c=new h(a.lambda,16);else{var e=this._getEndoRoots(this.n);0===this.g.mul(e[0]).x.cmp(this.g.x.redMul(b))?c=e[0]:(c=e[1],k(0===this.g.mul(c).x.cmp(this.g.x.redMul(b))))}var f;return f=a.basis?a.basis.map(function(a){return{a:new h(a.a,16),b:new h(a.b,16)}}):this._getEndoBasis(c),{beta:b,lambda:c,basis:f}}},d.prototype._getEndoRoots=function(a){var b=a===this.p?this.red:h.mont(a),c=new h(2).toRed(b).redInvm(),d=c.redNeg(),e=new h(3).toRed(b).redNeg().redSqrt().redMul(c),f=d.redAdd(e).fromRed(),g=d.redSub(e).fromRed();return[f,g]},d.prototype._getEndoBasis=function(a){for(var b,c,d,e,f,g,i,j,k,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),m=a,n=this.n.clone(),o=new h(1),p=new h(0),q=new h(0),r=new h(1),s=0;0!==m.cmpn(0);){var t=n.div(m);j=n.sub(t.mul(m)),k=q.sub(t.mul(o));var u=r.sub(t.mul(p));if(!d&&j.cmp(l)<0)b=i.neg(),c=o,d=j.neg(),e=k;else if(d&&2===++s)break;i=j,n=m,m=j,q=o,o=k,r=p,p=u}f=j.neg(),g=k;var v=d.sqr().add(e.sqr()),w=f.sqr().add(g.sqr());return w.cmp(v)>=0&&(f=b,g=c),d.negative&&(d=d.neg(),e=e.neg()),f.negative&&(f=f.neg(),g=g.neg()),[{a:d,b:e},{a:f,b:g}]},d.prototype._endoSplit=function(a){var b=this.endo.basis,c=b[0],d=b[1],e=d.b.mul(a).divRound(this.n),f=c.b.neg().mul(a).divRound(this.n),g=e.mul(c.a),h=f.mul(d.a),i=e.mul(c.b),j=f.mul(d.b),k=a.sub(g).sub(h),l=i.add(j).neg();return{k1:k,k2:l}},d.prototype.pointFromX=function(a,b){a=new h(a,16),a.red||(a=a.toRed(this.red));var c=a.redSqr().redMul(a).redIAdd(a.redMul(this.a)).redIAdd(this.b),d=c.redSqrt();if(0!==d.redSqr().redSub(c).cmp(this.zero))throw new Error("invalid point");var e=d.fromRed().isOdd();return(b&&!e||!b&&e)&&(d=d.redNeg()),this.point(a,d)},d.prototype.validate=function(a){if(a.inf)return!0;var b=a.x,c=a.y,d=this.a.redMul(b),e=b.redSqr().redMul(b).redIAdd(d).redIAdd(this.b);return 0===c.redSqr().redISub(e).cmpn(0)},d.prototype._endoWnafMulAdd=function(a,b,c){for(var d=this._endoWnafT1,e=this._endoWnafT2,f=0;f<a.length;f++){var g=this._endoSplit(b[f]),h=a[f],i=h._getBeta();g.k1.negative&&(g.k1.ineg(),h=h.neg(!0)),g.k2.negative&&(g.k2.ineg(),i=i.neg(!0)),d[2*f]=h,d[2*f+1]=i,e[2*f]=g.k1,e[2*f+1]=g.k2}for(var j=this._wnafMulAdd(1,d,e,2*f,c),k=0;k<2*f;k++)d[k]=null,e[k]=null;return j},i(e,j.BasePoint),d.prototype.point=function(a,b,c){return new e(this,a,b,c)},d.prototype.pointFromJSON=function(a,b){return e.fromJSON(this,a,b)},e.prototype._getBeta=function(){if(this.curve.endo){var a=this.precomputed;if(a&&a.beta)return a.beta;var b=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(a){var c=this.curve,d=function(a){return c.point(a.x.redMul(c.endo.beta),a.y)};a.beta=b,b.precomputed={beta:null,naf:a.naf&&{wnd:a.naf.wnd,points:a.naf.points.map(d)},doubles:a.doubles&&{step:a.doubles.step,points:a.doubles.points.map(d)}}}return b}},e.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},e.fromJSON=function(a,b,c){function d(b){return a.point(b[0],b[1],c)}"string"==typeof b&&(b=JSON.parse(b));var e=a.point(b[0],b[1],c);if(!b[2])return e;var f=b[2];return e.precomputed={beta:null,doubles:f.doubles&&{step:f.doubles.step,points:[e].concat(f.doubles.points.map(d))},naf:f.naf&&{wnd:f.naf.wnd,points:[e].concat(f.naf.points.map(d))}},e},e.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},e.prototype.isInfinity=function(){return this.inf},e.prototype.add=function(a){if(this.inf)return a;if(a.inf)return this;if(this.eq(a))return this.dbl();if(this.neg().eq(a))return this.curve.point(null,null);if(0===this.x.cmp(a.x))return this.curve.point(null,null);var b=this.y.redSub(a.y);0!==b.cmpn(0)&&(b=b.redMul(this.x.redSub(a.x).redInvm()));var c=b.redSqr().redISub(this.x).redISub(a.x),d=b.redMul(this.x.redSub(c)).redISub(this.y);return this.curve.point(c,d)},e.prototype.dbl=function(){if(this.inf)return this;var a=this.y.redAdd(this.y);if(0===a.cmpn(0))return this.curve.point(null,null);var b=this.curve.a,c=this.x.redSqr(),d=a.redInvm(),e=c.redAdd(c).redIAdd(c).redIAdd(b).redMul(d),f=e.redSqr().redISub(this.x.redAdd(this.x)),g=e.redMul(this.x.redSub(f)).redISub(this.y);return this.curve.point(f,g)},e.prototype.getX=function(){return this.x.fromRed()},e.prototype.getY=function(){return this.y.fromRed()},e.prototype.mul=function(a){return a=new h(a,16),this.isInfinity()?this:this._hasDoubles(a)?this.curve._fixedNafMul(this,a):this.curve.endo?this.curve._endoWnafMulAdd([this],[a]):this.curve._wnafMul(this,a)},e.prototype.mulAdd=function(a,b,c){var d=[this,b],e=[a,c];return this.curve.endo?this.curve._endoWnafMulAdd(d,e):this.curve._wnafMulAdd(1,d,e,2)},e.prototype.jmulAdd=function(a,b,c){var d=[this,b],e=[a,c];return this.curve.endo?this.curve._endoWnafMulAdd(d,e,!0):this.curve._wnafMulAdd(1,d,e,2,!0)},e.prototype.eq=function(a){return this===a||this.inf===a.inf&&(this.inf||0===this.x.cmp(a.x)&&0===this.y.cmp(a.y))},e.prototype.neg=function(a){if(this.inf)return this;var b=this.curve.point(this.x,this.y.redNeg());if(a&&this.precomputed){var c=this.precomputed,d=function(a){return a.neg()};b.precomputed={naf:c.naf&&{wnd:c.naf.wnd,points:c.naf.points.map(d)},doubles:c.doubles&&{step:c.doubles.step,points:c.doubles.points.map(d)}}}return b},e.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var a=this.curve.jpoint(this.x,this.y,this.curve.one);return a},i(f,j.BasePoint),d.prototype.jpoint=function(a,b,c){return new f(this,a,b,c)},f.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var a=this.z.redInvm(),b=a.redSqr(),c=this.x.redMul(b),d=this.y.redMul(b).redMul(a);return this.curve.point(c,d)},f.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},f.prototype.add=function(a){if(this.isInfinity())return a;if(a.isInfinity())return this;var b=a.z.redSqr(),c=this.z.redSqr(),d=this.x.redMul(b),e=a.x.redMul(c),f=this.y.redMul(b.redMul(a.z)),g=a.y.redMul(c.redMul(this.z)),h=d.redSub(e),i=f.redSub(g);if(0===h.cmpn(0))return 0!==i.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var j=h.redSqr(),k=j.redMul(h),l=d.redMul(j),m=i.redSqr().redIAdd(k).redISub(l).redISub(l),n=i.redMul(l.redISub(m)).redISub(f.redMul(k)),o=this.z.redMul(a.z).redMul(h);return this.curve.jpoint(m,n,o)},f.prototype.mixedAdd=function(a){if(this.isInfinity())return a.toJ();if(a.isInfinity())return this;var b=this.z.redSqr(),c=this.x,d=a.x.redMul(b),e=this.y,f=a.y.redMul(b).redMul(this.z),g=c.redSub(d),h=e.redSub(f);if(0===g.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var i=g.redSqr(),j=i.redMul(g),k=c.redMul(i),l=h.redSqr().redIAdd(j).redISub(k).redISub(k),m=h.redMul(k.redISub(l)).redISub(e.redMul(j)),n=this.z.redMul(g);return this.curve.jpoint(l,m,n)},f.prototype.dblp=function(a){if(0===a)return this;if(this.isInfinity())return this;if(!a)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var b=this,c=0;c<a;c++)b=b.dbl();return b}for(var d=this.curve.a,e=this.curve.tinv,f=this.x,g=this.y,h=this.z,i=h.redSqr().redSqr(),j=g.redAdd(g),c=0;c<a;c++){var k=f.redSqr(),l=j.redSqr(),m=l.redSqr(),n=k.redAdd(k).redIAdd(k).redIAdd(d.redMul(i)),o=f.redMul(l),p=n.redSqr().redISub(o.redAdd(o)),q=o.redISub(p),r=n.redMul(q);r=r.redIAdd(r).redISub(m);var s=j.redMul(h);c+1<a&&(i=i.redMul(m)),f=p,h=s,j=r}return this.curve.jpoint(f,j.redMul(e),h)},f.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},f.prototype._zeroDbl=function(){var a,b,c;if(this.zOne){var d=this.x.redSqr(),e=this.y.redSqr(),f=e.redSqr(),g=this.x.redAdd(e).redSqr().redISub(d).redISub(f);g=g.redIAdd(g);var h=d.redAdd(d).redIAdd(d),i=h.redSqr().redISub(g).redISub(g),j=f.redIAdd(f);j=j.redIAdd(j),j=j.redIAdd(j),a=i,b=h.redMul(g.redISub(i)).redISub(j),c=this.y.redAdd(this.y)}else{var k=this.x.redSqr(),l=this.y.redSqr(),m=l.redSqr(),n=this.x.redAdd(l).redSqr().redISub(k).redISub(m);n=n.redIAdd(n);var o=k.redAdd(k).redIAdd(k),p=o.redSqr(),q=m.redIAdd(m);q=q.redIAdd(q),q=q.redIAdd(q),a=p.redISub(n).redISub(n),b=o.redMul(n.redISub(a)).redISub(q),c=this.y.redMul(this.z),c=c.redIAdd(c)}return this.curve.jpoint(a,b,c)},f.prototype._threeDbl=function(){var a,b,c;if(this.zOne){var d=this.x.redSqr(),e=this.y.redSqr(),f=e.redSqr(),g=this.x.redAdd(e).redSqr().redISub(d).redISub(f);g=g.redIAdd(g);var h=d.redAdd(d).redIAdd(d).redIAdd(this.curve.a),i=h.redSqr().redISub(g).redISub(g);a=i;var j=f.redIAdd(f);j=j.redIAdd(j),j=j.redIAdd(j),b=h.redMul(g.redISub(i)).redISub(j),c=this.y.redAdd(this.y)}else{var k=this.z.redSqr(),l=this.y.redSqr(),m=this.x.redMul(l),n=this.x.redSub(k).redMul(this.x.redAdd(k));n=n.redAdd(n).redIAdd(n);var o=m.redIAdd(m);o=o.redIAdd(o);var p=o.redAdd(o);a=n.redSqr().redISub(p),c=this.y.redAdd(this.z).redSqr().redISub(l).redISub(k);var q=l.redSqr();q=q.redIAdd(q),q=q.redIAdd(q),q=q.redIAdd(q),b=n.redMul(o.redISub(a)).redISub(q)}return this.curve.jpoint(a,b,c)},f.prototype._dbl=function(){var a=this.curve.a,b=this.x,c=this.y,d=this.z,e=d.redSqr().redSqr(),f=b.redSqr(),g=c.redSqr(),h=f.redAdd(f).redIAdd(f).redIAdd(a.redMul(e)),i=b.redAdd(b);i=i.redIAdd(i);var j=i.redMul(g),k=h.redSqr().redISub(j.redAdd(j)),l=j.redISub(k),m=g.redSqr();m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);var n=h.redMul(l).redISub(m),o=c.redAdd(c).redMul(d);return this.curve.jpoint(k,n,o)},f.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var a=this.x.redSqr(),b=this.y.redSqr(),c=this.z.redSqr(),d=b.redSqr(),e=a.redAdd(a).redIAdd(a),f=e.redSqr(),g=this.x.redAdd(b).redSqr().redISub(a).redISub(d);g=g.redIAdd(g),g=g.redAdd(g).redIAdd(g),g=g.redISub(f);var h=g.redSqr(),i=d.redIAdd(d);i=i.redIAdd(i),i=i.redIAdd(i),i=i.redIAdd(i);var j=e.redIAdd(g).redSqr().redISub(f).redISub(h).redISub(i),k=b.redMul(j);k=k.redIAdd(k),k=k.redIAdd(k);var l=this.x.redMul(h).redISub(k);l=l.redIAdd(l),l=l.redIAdd(l);var m=this.y.redMul(j.redMul(i.redISub(j)).redISub(g.redMul(h)));m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);var n=this.z.redAdd(g).redSqr().redISub(c).redISub(h);return this.curve.jpoint(l,m,n)},f.prototype.mul=function(a,b){return a=new h(a,b),this.curve._wnafMul(this,a)},f.prototype.eq=function(a){if("affine"===a.type)return this.eq(a.toJ());if(this===a)return!0;var b=this.z.redSqr(),c=a.z.redSqr();if(0!==this.x.redMul(c).redISub(a.x.redMul(b)).cmpn(0))return!1;var d=b.redMul(this.z),e=c.redMul(a.z);return 0===this.y.redMul(e).redISub(a.y.redMul(d)).cmpn(0)},f.prototype.eqXToP=function(a){var b=this.z.redSqr(),c=a.toRed(this.curve.red).redMul(b);if(0===this.x.cmp(c))return!0;for(var d=a.clone(),e=this.curve.redN.redMul(b);;){if(d.iadd(this.curve.n),d.cmp(this.curve.p)>=0)return!1;if(c.redIAdd(e),0===this.x.cmp(c))return!0}},f.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},f.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},{"../utils":15,"./base":2,"bn.js":16,inherits:32}],7:[function(a,b,c){"use strict";function d(a){"short"===a.type?this.curve=new h["short"](a):"edwards"===a.type?this.curve=new h.edwards(a):this.curve=new h.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,j(this.g.validate(),"Invalid curve"),j(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function e(a,b){Object.defineProperty(f,a,{configurable:!0,enumerable:!0,get:function(){var c=new d(b);return Object.defineProperty(f,a,{configurable:!0,enumerable:!0,value:c}),c}})}var f=c,g=a("hash.js"),h=a("./curve"),i=a("./utils"),j=i.assert;f.PresetCurve=d,e("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:g.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),e("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:g.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),e("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:g.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),e("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:g.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),e("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:g.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),e("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:g.sha256,gRed:!1,g:["9"]}),e("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:g.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]
});var k;try{k=a("./precomputed/secp256k1")}catch(l){k=void 0}e("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:g.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",k]})},{"./curve":4,"./precomputed/secp256k1":14,"./utils":15,"hash.js":19}],8:[function(a,b,c){"use strict";function d(a){return this instanceof d?("string"==typeof a&&(j(h.hasOwnProperty(a),"Unknown curve "+a),a=h[a]),a instanceof h.PresetCurve&&(a={curve:a}),this.curve=a.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=a.curve.g,this.g.precompute(a.curve.n.bitLength()+1),void(this.hash=a.hash||a.curve.hash)):new d(a)}var e=a("bn.js"),f=a("hmac-drbg"),g=a("../utils"),h=a("../curves"),i=a("brorand"),j=g.assert,k=a("./key"),l=a("./signature");b.exports=d,d.prototype.keyPair=function(a){return new k(this,a)},d.prototype.keyFromPrivate=function(a,b){return k.fromPrivate(this,a,b)},d.prototype.keyFromPublic=function(a,b){return k.fromPublic(this,a,b)},d.prototype.genKeyPair=function(a){a||(a={});for(var b=new f({hash:this.hash,pers:a.pers,persEnc:a.persEnc||"utf8",entropy:a.entropy||i(this.hash.hmacStrength),entropyEnc:a.entropy&&a.entropyEnc||"utf8",nonce:this.n.toArray()}),c=this.n.byteLength(),d=this.n.sub(new e(2));;){var g=new e(b.generate(c));if(!(g.cmp(d)>0))return g.iaddn(1),this.keyFromPrivate(g)}},d.prototype._truncateToN=function(a,b){var c=8*a.byteLength()-this.n.bitLength();return c>0&&(a=a.ushrn(c)),!b&&a.cmp(this.n)>=0?a.sub(this.n):a},d.prototype.sign=function(a,b,c,d){"object"==typeof c&&(d=c,c=null),d||(d={}),b=this.keyFromPrivate(b,c),a=this._truncateToN(new e(a,16));for(var g=this.n.byteLength(),h=b.getPrivate().toArray("be",g),i=a.toArray("be",g),j=new f({hash:this.hash,entropy:h,nonce:i,pers:d.pers,persEnc:d.persEnc||"utf8"}),k=this.n.sub(new e(1)),m=0;!0;m++){var n=d.k?d.k(m):new e(j.generate(this.n.byteLength()));if(n=this._truncateToN(n,!0),!(n.cmpn(1)<=0||n.cmp(k)>=0)){var o=this.g.mul(n);if(!o.isInfinity()){var p=o.getX(),q=p.umod(this.n);if(0!==q.cmpn(0)){var r=n.invm(this.n).mul(q.mul(b.getPrivate()).iadd(a));if(r=r.umod(this.n),0!==r.cmpn(0)){var s=(o.getY().isOdd()?1:0)|(0!==p.cmp(q)?2:0);return d.canonical&&r.cmp(this.nh)>0&&(r=this.n.sub(r),s^=1),new l({r:q,s:r,recoveryParam:s})}}}}}},d.prototype.verify=function(a,b,c,d){a=this._truncateToN(new e(a,16)),c=this.keyFromPublic(c,d),b=new l(b,"hex");var f=b.r,g=b.s;if(f.cmpn(1)<0||f.cmp(this.n)>=0)return!1;if(g.cmpn(1)<0||g.cmp(this.n)>=0)return!1;var h=g.invm(this.n),i=h.mul(a).umod(this.n),j=h.mul(f).umod(this.n);if(!this.curve._maxwellTrick){var k=this.g.mulAdd(i,c.getPublic(),j);return!k.isInfinity()&&0===k.getX().umod(this.n).cmp(f)}var k=this.g.jmulAdd(i,c.getPublic(),j);return!k.isInfinity()&&k.eqXToP(f)},d.prototype.recoverPubKey=function(a,b,c,d){j((3&c)===c,"The recovery param is more than two bits"),b=new l(b,d);var f=this.n,g=new e(a),h=b.r,i=b.s,k=1&c,m=c>>1;if(h.cmp(this.curve.p.umod(this.curve.n))>=0&&m)throw new Error("Unable to find sencond key candinate");h=m?this.curve.pointFromX(h.add(this.curve.n),k):this.curve.pointFromX(h,k);var n=b.r.invm(f),o=f.sub(g).mul(n).umod(f),p=i.mul(n).umod(f);return this.g.mulAdd(o,h,p)},d.prototype.getKeyRecoveryParam=function(a,b,c,d){if(b=new l(b,d),null!==b.recoveryParam)return b.recoveryParam;for(var e=0;e<4;e++){var f;try{f=this.recoverPubKey(a,b,e)}catch(a){continue}if(f.eq(c))return e}throw new Error("Unable to find valid recovery factor")}},{"../curves":7,"../utils":15,"./key":9,"./signature":10,"bn.js":16,brorand:17,"hmac-drbg":31}],9:[function(a,b,c){"use strict";function d(a,b){this.ec=a,this.priv=null,this.pub=null,b.priv&&this._importPrivate(b.priv,b.privEnc),b.pub&&this._importPublic(b.pub,b.pubEnc)}var e=a("bn.js"),f=a("../utils"),g=f.assert;b.exports=d,d.fromPublic=function(a,b,c){return b instanceof d?b:new d(a,{pub:b,pubEnc:c})},d.fromPrivate=function(a,b,c){return b instanceof d?b:new d(a,{priv:b,privEnc:c})},d.prototype.validate=function(){var a=this.getPublic();return a.isInfinity()?{result:!1,reason:"Invalid public key"}:a.validate()?a.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},d.prototype.getPublic=function(a,b){return"string"==typeof a&&(b=a,a=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),b?this.pub.encode(b,a):this.pub},d.prototype.getPrivate=function(a){return"hex"===a?this.priv.toString(16,2):this.priv},d.prototype._importPrivate=function(a,b){this.priv=new e(a,b||16),this.priv=this.priv.umod(this.ec.curve.n)},d.prototype._importPublic=function(a,b){return a.x||a.y?("mont"===this.ec.curve.type?g(a.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||g(a.x&&a.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(a.x,a.y))):void(this.pub=this.ec.curve.decodePoint(a,b))},d.prototype.derive=function(a){return a.mul(this.priv).getX()},d.prototype.sign=function(a,b,c){return this.ec.sign(a,this,b,c)},d.prototype.verify=function(a,b){return this.ec.verify(a,b,this)},d.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":15,"bn.js":16}],10:[function(a,b,c){"use strict";function d(a,b){return a instanceof d?a:void(this._importDER(a,b)||(k(a.r&&a.s,"Signature without r or s"),this.r=new i(a.r,16),this.s=new i(a.s,16),void 0===a.recoveryParam?this.recoveryParam=null:this.recoveryParam=a.recoveryParam))}function e(){this.place=0}function f(a,b){var c=a[b.place++];if(!(128&c))return c;var d=15&c;if(0===d||d>4)return!1;for(var e=0,f=0,g=b.place;f<d;f++,g++)e<<=8,e|=a[g],e>>>=0;return!(e<=127)&&(b.place=g,e)}function g(a){for(var b=0,c=a.length-1;!a[b]&&!(128&a[b+1])&&b<c;)b++;return 0===b?a:a.slice(b)}function h(a,b){if(b<128)return void a.push(b);var c=1+(Math.log(b)/Math.LN2>>>3);for(a.push(128|c);--c;)a.push(b>>>(c<<3)&255);a.push(b)}var i=a("bn.js"),j=a("../utils"),k=j.assert;b.exports=d,d.prototype._importDER=function(a,b){a=j.toArray(a,b);var c=new e;if(48!==a[c.place++])return!1;var d=f(a,c);if(d===!1)return!1;if(d+c.place!==a.length)return!1;if(2!==a[c.place++])return!1;var g=f(a,c);if(g===!1)return!1;var h=a.slice(c.place,g+c.place);if(c.place+=g,2!==a[c.place++])return!1;var k=f(a,c);if(k===!1)return!1;if(a.length!==k+c.place)return!1;var l=a.slice(c.place,k+c.place);if(0===h[0]){if(!(128&h[1]))return!1;h=h.slice(1)}if(0===l[0]){if(!(128&l[1]))return!1;l=l.slice(1)}return this.r=new i(h),this.s=new i(l),this.recoveryParam=null,!0},d.prototype.toDER=function(a){var b=this.r.toArray(),c=this.s.toArray();for(128&b[0]&&(b=[0].concat(b)),128&c[0]&&(c=[0].concat(c)),b=g(b),c=g(c);!(c[0]||128&c[1]);)c=c.slice(1);var d=[2];h(d,b.length),d=d.concat(b),d.push(2),h(d,c.length);var e=d.concat(c),f=[48];return h(f,e.length),f=f.concat(e),j.encode(f,a)}},{"../utils":15,"bn.js":16}],11:[function(a,b,c){"use strict";function d(a){if(h("ed25519"===a,"only tested with ed25519 so far"),!(this instanceof d))return new d(a);var a=f[a].curve;this.curve=a,this.g=a.g,this.g.precompute(a.n.bitLength()+1),this.pointClass=a.point().constructor,this.encodingLength=Math.ceil(a.n.bitLength()/8),this.hash=e.sha512}var e=a("hash.js"),f=a("../curves"),g=a("../utils"),h=g.assert,i=g.parseBytes,j=a("./key"),k=a("./signature");b.exports=d,d.prototype.sign=function(a,b){a=i(a);var c=this.keyFromSecret(b),d=this.hashInt(c.messagePrefix(),a),e=this.g.mul(d),f=this.encodePoint(e),g=this.hashInt(f,c.pubBytes(),a).mul(c.priv()),h=d.add(g).umod(this.curve.n);return this.makeSignature({R:e,S:h,Rencoded:f})},d.prototype.verify=function(a,b,c){a=i(a),b=this.makeSignature(b);var d=this.keyFromPublic(c),e=this.hashInt(b.Rencoded(),d.pubBytes(),a),f=this.g.mul(b.S()),g=b.R().add(d.pub().mul(e));return g.eq(f)},d.prototype.hashInt=function(){for(var a=this.hash(),b=0;b<arguments.length;b++)a.update(arguments[b]);return g.intFromLE(a.digest()).umod(this.curve.n)},d.prototype.keyFromPublic=function(a){return j.fromPublic(this,a)},d.prototype.keyFromSecret=function(a){return j.fromSecret(this,a)},d.prototype.makeSignature=function(a){return a instanceof k?a:new k(this,a)},d.prototype.encodePoint=function(a){var b=a.getY().toArray("le",this.encodingLength);return b[this.encodingLength-1]|=a.getX().isOdd()?128:0,b},d.prototype.decodePoint=function(a){a=g.parseBytes(a);var b=a.length-1,c=a.slice(0,b).concat(a[b]&-129),d=0!==(128&a[b]),e=g.intFromLE(c);return this.curve.pointFromY(e,d)},d.prototype.encodeInt=function(a){return a.toArray("le",this.encodingLength)},d.prototype.decodeInt=function(a){return g.intFromLE(a)},d.prototype.isPoint=function(a){return a instanceof this.pointClass}},{"../curves":7,"../utils":15,"./key":12,"./signature":13,"hash.js":19}],12:[function(a,b,c){"use strict";function d(a,b){this.eddsa=a,this._secret=g(b.secret),a.isPoint(b.pub)?this._pub=b.pub:this._pubBytes=g(b.pub)}var e=a("../utils"),f=e.assert,g=e.parseBytes,h=e.cachedProperty;d.fromPublic=function(a,b){return b instanceof d?b:new d(a,{pub:b})},d.fromSecret=function(a,b){return b instanceof d?b:new d(a,{secret:b})},d.prototype.secret=function(){return this._secret},h(d,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),h(d,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),h(d,"privBytes",function(){var a=this.eddsa,b=this.hash(),c=a.encodingLength-1,d=b.slice(0,a.encodingLength);return d[0]&=248,d[c]&=127,d[c]|=64,d}),h(d,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),h(d,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),h(d,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),d.prototype.sign=function(a){return f(this._secret,"KeyPair can only verify"),this.eddsa.sign(a,this)},d.prototype.verify=function(a,b){return this.eddsa.verify(a,b,this)},d.prototype.getSecret=function(a){return f(this._secret,"KeyPair is public only"),e.encode(this.secret(),a)},d.prototype.getPublic=function(a){return e.encode(this.pubBytes(),a)},b.exports=d},{"../utils":15}],13:[function(a,b,c){"use strict";function d(a,b){this.eddsa=a,"object"!=typeof b&&(b=i(b)),Array.isArray(b)&&(b={R:b.slice(0,a.encodingLength),S:b.slice(a.encodingLength)}),g(b.R&&b.S,"Signature without R or S"),a.isPoint(b.R)&&(this._R=b.R),b.S instanceof e&&(this._S=b.S),this._Rencoded=Array.isArray(b.R)?b.R:b.Rencoded,this._Sencoded=Array.isArray(b.S)?b.S:b.Sencoded}var e=a("bn.js"),f=a("../utils"),g=f.assert,h=f.cachedProperty,i=f.parseBytes;h(d,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),h(d,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),h(d,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),h(d,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),d.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},d.prototype.toHex=function(){return f.encode(this.toBytes(),"hex").toUpperCase()},b.exports=d},{"../utils":15,"bn.js":16}],14:[function(a,b,c){b.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]
}}},{}],15:[function(a,b,c){"use strict";function d(a,b,c){var d=new Array(Math.max(a.bitLength(),c)+1);d.fill(0);for(var e=1<<b+1,f=a.clone(),g=0;g<d.length;g++){var h,i=f.andln(e-1);f.isOdd()?(h=i>(e>>1)-1?(e>>1)-i:i,f.isubn(h)):h=0,d[g]=h,f.iushrn(1)}return d}function e(a,b){var c=[[],[]];a=a.clone(),b=b.clone();for(var d=0,e=0;a.cmpn(-d)>0||b.cmpn(-e)>0;){var f=a.andln(3)+d&3,g=b.andln(3)+e&3;3===f&&(f=-1),3===g&&(g=-1);var h;if(0===(1&f))h=0;else{var i=a.andln(7)+d&7;h=3!==i&&5!==i||2!==g?f:-f}c[0].push(h);var j;if(0===(1&g))j=0;else{var i=b.andln(7)+e&7;j=3!==i&&5!==i||2!==f?g:-g}c[1].push(j),2*d===h+1&&(d=1-d),2*e===j+1&&(e=1-e),a.iushrn(1),b.iushrn(1)}return c}function f(a,b,c){var d="_"+b;a.prototype[b]=function(){return void 0!==this[d]?this[d]:this[d]=c.call(this)}}function g(a){return"string"==typeof a?i.toArray(a,"hex"):a}function h(a){return new j(a,"hex","le")}var i=c,j=a("bn.js"),k=a("minimalistic-assert"),l=a("minimalistic-crypto-utils");i.assert=k,i.toArray=l.toArray,i.zero2=l.zero2,i.toHex=l.toHex,i.encode=l.encode,i.getNAF=d,i.getJSF=e,i.cachedProperty=f,i.parseBytes=g,i.intFromLE=h},{"bn.js":16,"minimalistic-assert":33,"minimalistic-crypto-utils":34}],16:[function(a,b,c){!function(b,c){"use strict";function d(a,b){if(!a)throw new Error(b||"Assertion failed")}function e(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}function f(a,b,c){return f.isBN(a)?a:(this.negative=0,this.words=null,this.length=0,this.red=null,void(null!==a&&("le"!==b&&"be"!==b||(c=b,b=10),this._init(a||0,b||10,c||"be"))))}function g(a,b,c){for(var d=0,e=Math.min(a.length,c),f=b;f<e;f++){var g=a.charCodeAt(f)-48;d<<=4,d|=g>=49&&g<=54?g-49+10:g>=17&&g<=22?g-17+10:15&g}return d}function h(a,b,c,d){for(var e=0,f=Math.min(a.length,c),g=b;g<f;g++){var h=a.charCodeAt(g)-48;e*=d,e+=h>=49?h-49+10:h>=17?h-17+10:h}return e}function i(a){for(var b=new Array(a.bitLength()),c=0;c<b.length;c++){var d=c/26|0,e=c%26;b[c]=(a.words[d]&1<<e)>>>e}return b}function j(a,b,c){c.negative=b.negative^a.negative;var d=a.length+b.length|0;c.length=d,d=d-1|0;var e=0|a.words[0],f=0|b.words[0],g=e*f,h=67108863&g,i=g/67108864|0;c.words[0]=h;for(var j=1;j<d;j++){for(var k=i>>>26,l=67108863&i,m=Math.min(j,b.length-1),n=Math.max(0,j-a.length+1);n<=m;n++){var o=j-n|0;e=0|a.words[o],f=0|b.words[n],g=e*f+l,k+=g/67108864|0,l=67108863&g}c.words[j]=0|l,i=0|k}return 0!==i?c.words[j]=0|i:c.length--,c.strip()}function k(a,b,c){c.negative=b.negative^a.negative,c.length=a.length+b.length;for(var d=0,e=0,f=0;f<c.length-1;f++){var g=e;e=0;for(var h=67108863&d,i=Math.min(f,b.length-1),j=Math.max(0,f-a.length+1);j<=i;j++){var k=f-j,l=0|a.words[k],m=0|b.words[j],n=l*m,o=67108863&n;g=g+(n/67108864|0)|0,o=o+h|0,h=67108863&o,g=g+(o>>>26)|0,e+=g>>>26,g&=67108863}c.words[f]=h,d=g,g=e}return 0!==d?c.words[f]=d:c.length--,c.strip()}function l(a,b,c){var d=new m;return d.mulp(a,b,c)}function m(a,b){this.x=a,this.y=b}function n(a,b){this.name=a,this.p=new f(b,16),this.n=this.p.bitLength(),this.k=new f(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function o(){n.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function p(){n.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function q(){n.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function r(){n.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function s(a){if("string"==typeof a){var b=f._prime(a);this.m=b.p,this.prime=b}else d(a.gtn(1),"modulus must be greater than 1"),this.m=a,this.prime=null}function t(a){s.call(this,a),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new f(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}"object"==typeof b?b.exports=f:c.BN=f,f.BN=f,f.wordSize=26;var u;try{u=a("buffer").Buffer}catch(v){}f.isBN=function(a){return a instanceof f||null!==a&&"object"==typeof a&&a.constructor.wordSize===f.wordSize&&Array.isArray(a.words)},f.max=function(a,b){return a.cmp(b)>0?a:b},f.min=function(a,b){return a.cmp(b)<0?a:b},f.prototype._init=function(a,b,c){if("number"==typeof a)return this._initNumber(a,b,c);if("object"==typeof a)return this._initArray(a,b,c);"hex"===b&&(b=16),d(b===(0|b)&&b>=2&&b<=36),a=a.toString().replace(/\s+/g,"");var e=0;"-"===a[0]&&e++,16===b?this._parseHex(a,e):this._parseBase(a,b,e),"-"===a[0]&&(this.negative=1),this.strip(),"le"===c&&this._initArray(this.toArray(),b,c)},f.prototype._initNumber=function(a,b,c){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[67108863&a],this.length=1):a<4503599627370496?(this.words=[67108863&a,a/67108864&67108863],this.length=2):(d(a<9007199254740992),this.words=[67108863&a,a/67108864&67108863,1],this.length=3),"le"===c&&this._initArray(this.toArray(),b,c)},f.prototype._initArray=function(a,b,c){if(d("number"==typeof a.length),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var e=0;e<this.length;e++)this.words[e]=0;var f,g,h=0;if("be"===c)for(e=a.length-1,f=0;e>=0;e-=3)g=a[e]|a[e-1]<<8|a[e-2]<<16,this.words[f]|=g<<h&67108863,this.words[f+1]=g>>>26-h&67108863,h+=24,h>=26&&(h-=26,f++);else if("le"===c)for(e=0,f=0;e<a.length;e+=3)g=a[e]|a[e+1]<<8|a[e+2]<<16,this.words[f]|=g<<h&67108863,this.words[f+1]=g>>>26-h&67108863,h+=24,h>=26&&(h-=26,f++);return this.strip()},f.prototype._parseHex=function(a,b){this.length=Math.ceil((a.length-b)/6),this.words=new Array(this.length);for(var c=0;c<this.length;c++)this.words[c]=0;var d,e,f=0;for(c=a.length-6,d=0;c>=b;c-=6)e=g(a,c,c+6),this.words[d]|=e<<f&67108863,this.words[d+1]|=e>>>26-f&4194303,f+=24,f>=26&&(f-=26,d++);c+6!==b&&(e=g(a,b,c+6),this.words[d]|=e<<f&67108863,this.words[d+1]|=e>>>26-f&4194303),this.strip()},f.prototype._parseBase=function(a,b,c){this.words=[0],this.length=1;for(var d=0,e=1;e<=67108863;e*=b)d++;d--,e=e/b|0;for(var f=a.length-c,g=f%d,i=Math.min(f,f-g)+c,j=0,k=c;k<i;k+=d)j=h(a,k,k+d,b),this.imuln(e),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j);if(0!==g){var l=1;for(j=h(a,k,a.length,b),k=0;k<g;k++)l*=b;this.imuln(l),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j)}},f.prototype.copy=function(a){a.words=new Array(this.length);for(var b=0;b<this.length;b++)a.words[b]=this.words[b];a.length=this.length,a.negative=this.negative,a.red=this.red},f.prototype.clone=function(){var a=new f(null);return this.copy(a),a},f.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},f.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},f.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},f.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var w=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];f.prototype.toString=function(a,b){a=a||10,b=0|b||1;var c;if(16===a||"hex"===a){c="";for(var e=0,f=0,g=0;g<this.length;g++){var h=this.words[g],i=(16777215&(h<<e|f)).toString(16);f=h>>>24-e&16777215,c=0!==f||g!==this.length-1?w[6-i.length]+i+c:i+c,e+=2,e>=26&&(e-=26,g--)}for(0!==f&&(c=f.toString(16)+c);c.length%b!==0;)c="0"+c;return 0!==this.negative&&(c="-"+c),c}if(a===(0|a)&&a>=2&&a<=36){var j=x[a],k=y[a];c="";var l=this.clone();for(l.negative=0;!l.isZero();){var m=l.modn(k).toString(a);l=l.idivn(k),c=l.isZero()?m+c:w[j-m.length]+m+c}for(this.isZero()&&(c="0"+c);c.length%b!==0;)c="0"+c;return 0!==this.negative&&(c="-"+c),c}d(!1,"Base should be between 2 and 36")},f.prototype.toNumber=function(){var a=this.words[0];return 2===this.length?a+=67108864*this.words[1]:3===this.length&&1===this.words[2]?a+=4503599627370496+67108864*this.words[1]:this.length>2&&d(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-a:a},f.prototype.toJSON=function(){return this.toString(16)},f.prototype.toBuffer=function(a,b){return d("undefined"!=typeof u),this.toArrayLike(u,a,b)},f.prototype.toArray=function(a,b){return this.toArrayLike(Array,a,b)},f.prototype.toArrayLike=function(a,b,c){var e=this.byteLength(),f=c||Math.max(1,e);d(e<=f,"byte array longer than desired length"),d(f>0,"Requested array length <= 0"),this.strip();var g,h,i="le"===b,j=new a(f),k=this.clone();if(i){for(h=0;!k.isZero();h++)g=k.andln(255),k.iushrn(8),j[h]=g;for(;h<f;h++)j[h]=0}else{for(h=0;h<f-e;h++)j[h]=0;for(h=0;!k.isZero();h++)g=k.andln(255),k.iushrn(8),j[f-h-1]=g}return j},Math.clz32?f.prototype._countBits=function(a){return 32-Math.clz32(a)}:f.prototype._countBits=function(a){var b=a,c=0;return b>=4096&&(c+=13,b>>>=13),b>=64&&(c+=7,b>>>=7),b>=8&&(c+=4,b>>>=4),b>=2&&(c+=2,b>>>=2),c+b},f.prototype._zeroBits=function(a){if(0===a)return 26;var b=a,c=0;return 0===(8191&b)&&(c+=13,b>>>=13),0===(127&b)&&(c+=7,b>>>=7),0===(15&b)&&(c+=4,b>>>=4),0===(3&b)&&(c+=2,b>>>=2),0===(1&b)&&c++,c},f.prototype.bitLength=function(){var a=this.words[this.length-1],b=this._countBits(a);return 26*(this.length-1)+b},f.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,b=0;b<this.length;b++){var c=this._zeroBits(this.words[b]);if(a+=c,26!==c)break}return a},f.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},f.prototype.toTwos=function(a){return 0!==this.negative?this.abs().inotn(a).iaddn(1):this.clone()},f.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},f.prototype.isNeg=function(){return 0!==this.negative},f.prototype.neg=function(){return this.clone().ineg()},f.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},f.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var b=0;b<a.length;b++)this.words[b]=this.words[b]|a.words[b];return this.strip()},f.prototype.ior=function(a){return d(0===(this.negative|a.negative)),this.iuor(a)},f.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},f.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},f.prototype.iuand=function(a){var b;b=this.length>a.length?a:this;for(var c=0;c<b.length;c++)this.words[c]=this.words[c]&a.words[c];return this.length=b.length,this.strip()},f.prototype.iand=function(a){return d(0===(this.negative|a.negative)),this.iuand(a)},f.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},f.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},f.prototype.iuxor=function(a){var b,c;this.length>a.length?(b=this,c=a):(b=a,c=this);for(var d=0;d<c.length;d++)this.words[d]=b.words[d]^c.words[d];if(this!==b)for(;d<b.length;d++)this.words[d]=b.words[d];return this.length=b.length,this.strip()},f.prototype.ixor=function(a){return d(0===(this.negative|a.negative)),this.iuxor(a)},f.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},f.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},f.prototype.inotn=function(a){d("number"==typeof a&&a>=0);var b=0|Math.ceil(a/26),c=a%26;this._expand(b),c>0&&b--;for(var e=0;e<b;e++)this.words[e]=67108863&~this.words[e];return c>0&&(this.words[e]=~this.words[e]&67108863>>26-c),this.strip()},f.prototype.notn=function(a){return this.clone().inotn(a)},f.prototype.setn=function(a,b){d("number"==typeof a&&a>=0);var c=a/26|0,e=a%26;return this._expand(c+1),b?this.words[c]=this.words[c]|1<<e:this.words[c]=this.words[c]&~(1<<e),this.strip()},f.prototype.iadd=function(a){var b;if(0!==this.negative&&0===a.negative)return this.negative=0,b=this.isub(a),this.negative^=1,this._normSign();if(0===this.negative&&0!==a.negative)return a.negative=0,b=this.isub(a),a.negative=1,b._normSign();var c,d;this.length>a.length?(c=this,d=a):(c=a,d=this);for(var e=0,f=0;f<d.length;f++)b=(0|c.words[f])+(0|d.words[f])+e,this.words[f]=67108863&b,e=b>>>26;for(;0!==e&&f<c.length;f++)b=(0|c.words[f])+e,this.words[f]=67108863&b,e=b>>>26;if(this.length=c.length,0!==e)this.words[this.length]=e,this.length++;else if(c!==this)for(;f<c.length;f++)this.words[f]=c.words[f];return this},f.prototype.add=function(a){var b;return 0!==a.negative&&0===this.negative?(a.negative=0,b=this.sub(a),a.negative^=1,b):0===a.negative&&0!==this.negative?(this.negative=0,b=a.sub(this),this.negative=1,b):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},f.prototype.isub=function(a){if(0!==a.negative){a.negative=0;var b=this.iadd(a);return a.negative=1,b._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var c=this.cmp(a);if(0===c)return this.negative=0,this.length=1,this.words[0]=0,this;var d,e;c>0?(d=this,e=a):(d=a,e=this);for(var f=0,g=0;g<e.length;g++)b=(0|d.words[g])-(0|e.words[g])+f,f=b>>26,this.words[g]=67108863&b;for(;0!==f&&g<d.length;g++)b=(0|d.words[g])+f,f=b>>26,this.words[g]=67108863&b;if(0===f&&g<d.length&&d!==this)for(;g<d.length;g++)this.words[g]=d.words[g];return this.length=Math.max(this.length,g),d!==this&&(this.negative=1),this.strip()},f.prototype.sub=function(a){return this.clone().isub(a)};var z=function(a,b,c){var d,e,f,g=a.words,h=b.words,i=c.words,j=0,k=0|g[0],l=8191&k,m=k>>>13,n=0|g[1],o=8191&n,p=n>>>13,q=0|g[2],r=8191&q,s=q>>>13,t=0|g[3],u=8191&t,v=t>>>13,w=0|g[4],x=8191&w,y=w>>>13,z=0|g[5],A=8191&z,B=z>>>13,C=0|g[6],D=8191&C,E=C>>>13,F=0|g[7],G=8191&F,H=F>>>13,I=0|g[8],J=8191&I,K=I>>>13,L=0|g[9],M=8191&L,N=L>>>13,O=0|h[0],P=8191&O,Q=O>>>13,R=0|h[1],S=8191&R,T=R>>>13,U=0|h[2],V=8191&U,W=U>>>13,X=0|h[3],Y=8191&X,Z=X>>>13,$=0|h[4],_=8191&$,aa=$>>>13,ba=0|h[5],ca=8191&ba,da=ba>>>13,ea=0|h[6],fa=8191&ea,ga=ea>>>13,ha=0|h[7],ia=8191&ha,ja=ha>>>13,ka=0|h[8],la=8191&ka,ma=ka>>>13,na=0|h[9],oa=8191&na,pa=na>>>13;c.negative=a.negative^b.negative,c.length=19,d=Math.imul(l,P),e=Math.imul(l,Q),e=e+Math.imul(m,P)|0,f=Math.imul(m,Q);var qa=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(qa>>>26)|0,qa&=67108863,d=Math.imul(o,P),e=Math.imul(o,Q),e=e+Math.imul(p,P)|0,f=Math.imul(p,Q),d=d+Math.imul(l,S)|0,e=e+Math.imul(l,T)|0,e=e+Math.imul(m,S)|0,f=f+Math.imul(m,T)|0;var ra=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(ra>>>26)|0,ra&=67108863,d=Math.imul(r,P),e=Math.imul(r,Q),e=e+Math.imul(s,P)|0,f=Math.imul(s,Q),d=d+Math.imul(o,S)|0,e=e+Math.imul(o,T)|0,e=e+Math.imul(p,S)|0,f=f+Math.imul(p,T)|0,d=d+Math.imul(l,V)|0,e=e+Math.imul(l,W)|0,e=e+Math.imul(m,V)|0,f=f+Math.imul(m,W)|0;var sa=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(sa>>>26)|0,sa&=67108863,d=Math.imul(u,P),e=Math.imul(u,Q),e=e+Math.imul(v,P)|0,f=Math.imul(v,Q),d=d+Math.imul(r,S)|0,e=e+Math.imul(r,T)|0,e=e+Math.imul(s,S)|0,f=f+Math.imul(s,T)|0,d=d+Math.imul(o,V)|0,e=e+Math.imul(o,W)|0,e=e+Math.imul(p,V)|0,f=f+Math.imul(p,W)|0,d=d+Math.imul(l,Y)|0,e=e+Math.imul(l,Z)|0,e=e+Math.imul(m,Y)|0,f=f+Math.imul(m,Z)|0;var ta=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(ta>>>26)|0,ta&=67108863,d=Math.imul(x,P),e=Math.imul(x,Q),e=e+Math.imul(y,P)|0,f=Math.imul(y,Q),d=d+Math.imul(u,S)|0,e=e+Math.imul(u,T)|0,e=e+Math.imul(v,S)|0,f=f+Math.imul(v,T)|0,d=d+Math.imul(r,V)|0,e=e+Math.imul(r,W)|0,e=e+Math.imul(s,V)|0,f=f+Math.imul(s,W)|0,d=d+Math.imul(o,Y)|0,e=e+Math.imul(o,Z)|0,e=e+Math.imul(p,Y)|0,f=f+Math.imul(p,Z)|0,d=d+Math.imul(l,_)|0,e=e+Math.imul(l,aa)|0,e=e+Math.imul(m,_)|0,f=f+Math.imul(m,aa)|0;var ua=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(ua>>>26)|0,ua&=67108863,d=Math.imul(A,P),e=Math.imul(A,Q),e=e+Math.imul(B,P)|0,f=Math.imul(B,Q),d=d+Math.imul(x,S)|0,e=e+Math.imul(x,T)|0,e=e+Math.imul(y,S)|0,f=f+Math.imul(y,T)|0,d=d+Math.imul(u,V)|0,e=e+Math.imul(u,W)|0,e=e+Math.imul(v,V)|0,f=f+Math.imul(v,W)|0,d=d+Math.imul(r,Y)|0,e=e+Math.imul(r,Z)|0,e=e+Math.imul(s,Y)|0,f=f+Math.imul(s,Z)|0,d=d+Math.imul(o,_)|0,e=e+Math.imul(o,aa)|0,e=e+Math.imul(p,_)|0,f=f+Math.imul(p,aa)|0,d=d+Math.imul(l,ca)|0,e=e+Math.imul(l,da)|0,e=e+Math.imul(m,ca)|0,f=f+Math.imul(m,da)|0;var va=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(va>>>26)|0,va&=67108863,d=Math.imul(D,P),e=Math.imul(D,Q),e=e+Math.imul(E,P)|0,f=Math.imul(E,Q),d=d+Math.imul(A,S)|0,e=e+Math.imul(A,T)|0,e=e+Math.imul(B,S)|0,f=f+Math.imul(B,T)|0,d=d+Math.imul(x,V)|0,e=e+Math.imul(x,W)|0,e=e+Math.imul(y,V)|0,f=f+Math.imul(y,W)|0,d=d+Math.imul(u,Y)|0,e=e+Math.imul(u,Z)|0,e=e+Math.imul(v,Y)|0,f=f+Math.imul(v,Z)|0,d=d+Math.imul(r,_)|0,e=e+Math.imul(r,aa)|0,e=e+Math.imul(s,_)|0,f=f+Math.imul(s,aa)|0,d=d+Math.imul(o,ca)|0,e=e+Math.imul(o,da)|0,e=e+Math.imul(p,ca)|0,f=f+Math.imul(p,da)|0,d=d+Math.imul(l,fa)|0,e=e+Math.imul(l,ga)|0,e=e+Math.imul(m,fa)|0,f=f+Math.imul(m,ga)|0;var wa=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(wa>>>26)|0,wa&=67108863,d=Math.imul(G,P),e=Math.imul(G,Q),e=e+Math.imul(H,P)|0,f=Math.imul(H,Q),d=d+Math.imul(D,S)|0,e=e+Math.imul(D,T)|0,e=e+Math.imul(E,S)|0,f=f+Math.imul(E,T)|0,d=d+Math.imul(A,V)|0,e=e+Math.imul(A,W)|0,e=e+Math.imul(B,V)|0,f=f+Math.imul(B,W)|0,d=d+Math.imul(x,Y)|0,e=e+Math.imul(x,Z)|0,e=e+Math.imul(y,Y)|0,f=f+Math.imul(y,Z)|0,d=d+Math.imul(u,_)|0,e=e+Math.imul(u,aa)|0,e=e+Math.imul(v,_)|0,f=f+Math.imul(v,aa)|0,d=d+Math.imul(r,ca)|0,e=e+Math.imul(r,da)|0,e=e+Math.imul(s,ca)|0,f=f+Math.imul(s,da)|0,d=d+Math.imul(o,fa)|0,e=e+Math.imul(o,ga)|0,e=e+Math.imul(p,fa)|0,f=f+Math.imul(p,ga)|0,d=d+Math.imul(l,ia)|0,e=e+Math.imul(l,ja)|0,e=e+Math.imul(m,ia)|0,f=f+Math.imul(m,ja)|0;var xa=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(xa>>>26)|0,xa&=67108863,d=Math.imul(J,P),e=Math.imul(J,Q),e=e+Math.imul(K,P)|0,f=Math.imul(K,Q),d=d+Math.imul(G,S)|0,e=e+Math.imul(G,T)|0,e=e+Math.imul(H,S)|0,f=f+Math.imul(H,T)|0,d=d+Math.imul(D,V)|0,e=e+Math.imul(D,W)|0,e=e+Math.imul(E,V)|0,f=f+Math.imul(E,W)|0,d=d+Math.imul(A,Y)|0,e=e+Math.imul(A,Z)|0,e=e+Math.imul(B,Y)|0,f=f+Math.imul(B,Z)|0,d=d+Math.imul(x,_)|0,e=e+Math.imul(x,aa)|0,e=e+Math.imul(y,_)|0,f=f+Math.imul(y,aa)|0,d=d+Math.imul(u,ca)|0,e=e+Math.imul(u,da)|0,e=e+Math.imul(v,ca)|0,f=f+Math.imul(v,da)|0,d=d+Math.imul(r,fa)|0,e=e+Math.imul(r,ga)|0,e=e+Math.imul(s,fa)|0,f=f+Math.imul(s,ga)|0,d=d+Math.imul(o,ia)|0,e=e+Math.imul(o,ja)|0,e=e+Math.imul(p,ia)|0,f=f+Math.imul(p,ja)|0,d=d+Math.imul(l,la)|0,e=e+Math.imul(l,ma)|0,e=e+Math.imul(m,la)|0,f=f+Math.imul(m,ma)|0;var ya=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(ya>>>26)|0,ya&=67108863,d=Math.imul(M,P),e=Math.imul(M,Q),e=e+Math.imul(N,P)|0,f=Math.imul(N,Q),d=d+Math.imul(J,S)|0,e=e+Math.imul(J,T)|0,e=e+Math.imul(K,S)|0,f=f+Math.imul(K,T)|0,d=d+Math.imul(G,V)|0,e=e+Math.imul(G,W)|0,e=e+Math.imul(H,V)|0,f=f+Math.imul(H,W)|0,d=d+Math.imul(D,Y)|0,e=e+Math.imul(D,Z)|0,e=e+Math.imul(E,Y)|0,f=f+Math.imul(E,Z)|0,d=d+Math.imul(A,_)|0,e=e+Math.imul(A,aa)|0,e=e+Math.imul(B,_)|0,f=f+Math.imul(B,aa)|0,d=d+Math.imul(x,ca)|0,e=e+Math.imul(x,da)|0,e=e+Math.imul(y,ca)|0,f=f+Math.imul(y,da)|0,d=d+Math.imul(u,fa)|0,e=e+Math.imul(u,ga)|0,e=e+Math.imul(v,fa)|0,f=f+Math.imul(v,ga)|0,d=d+Math.imul(r,ia)|0,e=e+Math.imul(r,ja)|0,e=e+Math.imul(s,ia)|0,f=f+Math.imul(s,ja)|0,d=d+Math.imul(o,la)|0,e=e+Math.imul(o,ma)|0,e=e+Math.imul(p,la)|0,f=f+Math.imul(p,ma)|0,d=d+Math.imul(l,oa)|0,e=e+Math.imul(l,pa)|0,e=e+Math.imul(m,oa)|0,f=f+Math.imul(m,pa)|0;var za=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(za>>>26)|0,za&=67108863,d=Math.imul(M,S),e=Math.imul(M,T),e=e+Math.imul(N,S)|0,f=Math.imul(N,T),d=d+Math.imul(J,V)|0,e=e+Math.imul(J,W)|0,e=e+Math.imul(K,V)|0,f=f+Math.imul(K,W)|0,d=d+Math.imul(G,Y)|0,e=e+Math.imul(G,Z)|0,e=e+Math.imul(H,Y)|0,f=f+Math.imul(H,Z)|0,d=d+Math.imul(D,_)|0,e=e+Math.imul(D,aa)|0,e=e+Math.imul(E,_)|0,f=f+Math.imul(E,aa)|0,d=d+Math.imul(A,ca)|0,e=e+Math.imul(A,da)|0,e=e+Math.imul(B,ca)|0,f=f+Math.imul(B,da)|0,d=d+Math.imul(x,fa)|0,e=e+Math.imul(x,ga)|0,e=e+Math.imul(y,fa)|0,f=f+Math.imul(y,ga)|0,d=d+Math.imul(u,ia)|0,e=e+Math.imul(u,ja)|0,e=e+Math.imul(v,ia)|0,f=f+Math.imul(v,ja)|0,d=d+Math.imul(r,la)|0,e=e+Math.imul(r,ma)|0,e=e+Math.imul(s,la)|0,f=f+Math.imul(s,ma)|0,d=d+Math.imul(o,oa)|0,e=e+Math.imul(o,pa)|0,e=e+Math.imul(p,oa)|0,f=f+Math.imul(p,pa)|0;var Aa=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(Aa>>>26)|0,Aa&=67108863,d=Math.imul(M,V),e=Math.imul(M,W),e=e+Math.imul(N,V)|0,f=Math.imul(N,W),d=d+Math.imul(J,Y)|0,e=e+Math.imul(J,Z)|0,e=e+Math.imul(K,Y)|0,f=f+Math.imul(K,Z)|0,d=d+Math.imul(G,_)|0,e=e+Math.imul(G,aa)|0,e=e+Math.imul(H,_)|0,f=f+Math.imul(H,aa)|0,d=d+Math.imul(D,ca)|0,e=e+Math.imul(D,da)|0,e=e+Math.imul(E,ca)|0,f=f+Math.imul(E,da)|0,d=d+Math.imul(A,fa)|0,e=e+Math.imul(A,ga)|0,e=e+Math.imul(B,fa)|0,f=f+Math.imul(B,ga)|0,d=d+Math.imul(x,ia)|0,e=e+Math.imul(x,ja)|0,e=e+Math.imul(y,ia)|0,f=f+Math.imul(y,ja)|0,d=d+Math.imul(u,la)|0,e=e+Math.imul(u,ma)|0,e=e+Math.imul(v,la)|0,f=f+Math.imul(v,ma)|0,d=d+Math.imul(r,oa)|0,e=e+Math.imul(r,pa)|0,e=e+Math.imul(s,oa)|0,f=f+Math.imul(s,pa)|0;var Ba=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(Ba>>>26)|0,Ba&=67108863,d=Math.imul(M,Y),e=Math.imul(M,Z),e=e+Math.imul(N,Y)|0,f=Math.imul(N,Z),d=d+Math.imul(J,_)|0,e=e+Math.imul(J,aa)|0,e=e+Math.imul(K,_)|0,f=f+Math.imul(K,aa)|0,d=d+Math.imul(G,ca)|0,e=e+Math.imul(G,da)|0,e=e+Math.imul(H,ca)|0,f=f+Math.imul(H,da)|0,d=d+Math.imul(D,fa)|0,e=e+Math.imul(D,ga)|0,e=e+Math.imul(E,fa)|0,f=f+Math.imul(E,ga)|0,d=d+Math.imul(A,ia)|0,e=e+Math.imul(A,ja)|0,e=e+Math.imul(B,ia)|0,f=f+Math.imul(B,ja)|0,d=d+Math.imul(x,la)|0,e=e+Math.imul(x,ma)|0,e=e+Math.imul(y,la)|0,f=f+Math.imul(y,ma)|0,d=d+Math.imul(u,oa)|0,e=e+Math.imul(u,pa)|0,e=e+Math.imul(v,oa)|0,f=f+Math.imul(v,pa)|0;var Ca=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(Ca>>>26)|0,Ca&=67108863,d=Math.imul(M,_),e=Math.imul(M,aa),e=e+Math.imul(N,_)|0,f=Math.imul(N,aa),d=d+Math.imul(J,ca)|0,e=e+Math.imul(J,da)|0,e=e+Math.imul(K,ca)|0,f=f+Math.imul(K,da)|0,d=d+Math.imul(G,fa)|0,e=e+Math.imul(G,ga)|0,e=e+Math.imul(H,fa)|0,f=f+Math.imul(H,ga)|0,d=d+Math.imul(D,ia)|0,e=e+Math.imul(D,ja)|0,e=e+Math.imul(E,ia)|0,f=f+Math.imul(E,ja)|0,d=d+Math.imul(A,la)|0,e=e+Math.imul(A,ma)|0,e=e+Math.imul(B,la)|0,f=f+Math.imul(B,ma)|0,d=d+Math.imul(x,oa)|0,e=e+Math.imul(x,pa)|0,e=e+Math.imul(y,oa)|0,f=f+Math.imul(y,pa)|0;var Da=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(Da>>>26)|0,Da&=67108863,d=Math.imul(M,ca),e=Math.imul(M,da),e=e+Math.imul(N,ca)|0,f=Math.imul(N,da),d=d+Math.imul(J,fa)|0,e=e+Math.imul(J,ga)|0,e=e+Math.imul(K,fa)|0,f=f+Math.imul(K,ga)|0,d=d+Math.imul(G,ia)|0,e=e+Math.imul(G,ja)|0,e=e+Math.imul(H,ia)|0,f=f+Math.imul(H,ja)|0,d=d+Math.imul(D,la)|0,e=e+Math.imul(D,ma)|0,e=e+Math.imul(E,la)|0,f=f+Math.imul(E,ma)|0,d=d+Math.imul(A,oa)|0,e=e+Math.imul(A,pa)|0,e=e+Math.imul(B,oa)|0,f=f+Math.imul(B,pa)|0;var Ea=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(Ea>>>26)|0,Ea&=67108863,d=Math.imul(M,fa),e=Math.imul(M,ga),e=e+Math.imul(N,fa)|0,f=Math.imul(N,ga),d=d+Math.imul(J,ia)|0,e=e+Math.imul(J,ja)|0,e=e+Math.imul(K,ia)|0,f=f+Math.imul(K,ja)|0,d=d+Math.imul(G,la)|0,e=e+Math.imul(G,ma)|0,e=e+Math.imul(H,la)|0,f=f+Math.imul(H,ma)|0,d=d+Math.imul(D,oa)|0,e=e+Math.imul(D,pa)|0,e=e+Math.imul(E,oa)|0,f=f+Math.imul(E,pa)|0;var Fa=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(Fa>>>26)|0,Fa&=67108863,d=Math.imul(M,ia),e=Math.imul(M,ja),e=e+Math.imul(N,ia)|0,f=Math.imul(N,ja),d=d+Math.imul(J,la)|0,e=e+Math.imul(J,ma)|0,e=e+Math.imul(K,la)|0,f=f+Math.imul(K,ma)|0,d=d+Math.imul(G,oa)|0,e=e+Math.imul(G,pa)|0,e=e+Math.imul(H,oa)|0,f=f+Math.imul(H,pa)|0;var Ga=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(Ga>>>26)|0,Ga&=67108863,d=Math.imul(M,la),e=Math.imul(M,ma),e=e+Math.imul(N,la)|0,f=Math.imul(N,ma),d=d+Math.imul(J,oa)|0,e=e+Math.imul(J,pa)|0,e=e+Math.imul(K,oa)|0,f=f+Math.imul(K,pa)|0;var Ha=(j+d|0)+((8191&e)<<13)|0;j=(f+(e>>>13)|0)+(Ha>>>26)|0,Ha&=67108863,d=Math.imul(M,oa),e=Math.imul(M,pa),e=e+Math.imul(N,oa)|0,f=Math.imul(N,pa);var Ia=(j+d|0)+((8191&e)<<13)|0;return j=(f+(e>>>13)|0)+(Ia>>>26)|0,Ia&=67108863,i[0]=qa,i[1]=ra,i[2]=sa,i[3]=ta,i[4]=ua,i[5]=va,i[6]=wa,i[7]=xa,i[8]=ya,i[9]=za,i[10]=Aa,i[11]=Ba,i[12]=Ca,i[13]=Da,i[14]=Ea,i[15]=Fa,i[16]=Ga,i[17]=Ha,i[18]=Ia,0!==j&&(i[19]=j,c.length++),c};Math.imul||(z=j),f.prototype.mulTo=function(a,b){var c,d=this.length+a.length;return c=10===this.length&&10===a.length?z(this,a,b):d<63?j(this,a,b):d<1024?k(this,a,b):l(this,a,b)},m.prototype.makeRBT=function(a){for(var b=new Array(a),c=f.prototype._countBits(a)-1,d=0;d<a;d++)b[d]=this.revBin(d,c,a);return b},m.prototype.revBin=function(a,b,c){if(0===a||a===c-1)return a;for(var d=0,e=0;e<b;e++)d|=(1&a)<<b-e-1,a>>=1;return d},m.prototype.permute=function(a,b,c,d,e,f){for(var g=0;g<f;g++)d[g]=b[a[g]],e[g]=c[a[g]]},m.prototype.transform=function(a,b,c,d,e,f){this.permute(f,a,b,c,d,e);for(var g=1;g<e;g<<=1)for(var h=g<<1,i=Math.cos(2*Math.PI/h),j=Math.sin(2*Math.PI/h),k=0;k<e;k+=h)for(var l=i,m=j,n=0;n<g;n++){var o=c[k+n],p=d[k+n],q=c[k+n+g],r=d[k+n+g],s=l*q-m*r;r=l*r+m*q,q=s,c[k+n]=o+q,d[k+n]=p+r,c[k+n+g]=o-q,d[k+n+g]=p-r,n!==h&&(s=i*l-j*m,m=i*m+j*l,l=s)}},m.prototype.guessLen13b=function(a,b){var c=1|Math.max(b,a),d=1&c,e=0;for(c=c/2|0;c;c>>>=1)e++;return 1<<e+1+d},m.prototype.conjugate=function(a,b,c){if(!(c<=1))for(var d=0;d<c/2;d++){var e=a[d];a[d]=a[c-d-1],a[c-d-1]=e,e=b[d],b[d]=-b[c-d-1],b[c-d-1]=-e}},m.prototype.normalize13b=function(a,b){for(var c=0,d=0;d<b/2;d++){var e=8192*Math.round(a[2*d+1]/b)+Math.round(a[2*d]/b)+c;a[d]=67108863&e,c=e<67108864?0:e/67108864|0}return a},m.prototype.convert13b=function(a,b,c,e){for(var f=0,g=0;g<b;g++)f+=0|a[g],c[2*g]=8191&f,f>>>=13,c[2*g+1]=8191&f,f>>>=13;for(g=2*b;g<e;++g)c[g]=0;d(0===f),d(0===(f&-8192))},m.prototype.stub=function(a){for(var b=new Array(a),c=0;c<a;c++)b[c]=0;return b},m.prototype.mulp=function(a,b,c){var d=2*this.guessLen13b(a.length,b.length),e=this.makeRBT(d),f=this.stub(d),g=new Array(d),h=new Array(d),i=new Array(d),j=new Array(d),k=new Array(d),l=new Array(d),m=c.words;m.length=d,this.convert13b(a.words,a.length,g,d),this.convert13b(b.words,b.length,j,d),this.transform(g,f,h,i,d,e),this.transform(j,f,k,l,d,e);for(var n=0;n<d;n++){var o=h[n]*k[n]-i[n]*l[n];i[n]=h[n]*l[n]+i[n]*k[n],h[n]=o}return this.conjugate(h,i,d),this.transform(h,i,m,f,d,e),this.conjugate(m,f,d),this.normalize13b(m,d),c.negative=a.negative^b.negative,c.length=a.length+b.length,c.strip()},f.prototype.mul=function(a){var b=new f(null);return b.words=new Array(this.length+a.length),this.mulTo(a,b)},f.prototype.mulf=function(a){var b=new f(null);return b.words=new Array(this.length+a.length),l(this,a,b)},f.prototype.imul=function(a){return this.clone().mulTo(a,this)},f.prototype.imuln=function(a){d("number"==typeof a),d(a<67108864);for(var b=0,c=0;c<this.length;c++){var e=(0|this.words[c])*a,f=(67108863&e)+(67108863&b);b>>=26,b+=e/67108864|0,b+=f>>>26,this.words[c]=67108863&f}return 0!==b&&(this.words[c]=b,this.length++),this},f.prototype.muln=function(a){return this.clone().imuln(a)},f.prototype.sqr=function(){return this.mul(this)},f.prototype.isqr=function(){return this.imul(this.clone())},f.prototype.pow=function(a){var b=i(a);if(0===b.length)return new f(1);for(var c=this,d=0;d<b.length&&0===b[d];d++,c=c.sqr());if(++d<b.length)for(var e=c.sqr();d<b.length;d++,e=e.sqr())0!==b[d]&&(c=c.mul(e));return c},f.prototype.iushln=function(a){d("number"==typeof a&&a>=0);var b,c=a%26,e=(a-c)/26,f=67108863>>>26-c<<26-c;if(0!==c){var g=0;for(b=0;b<this.length;b++){var h=this.words[b]&f,i=(0|this.words[b])-h<<c;this.words[b]=i|g,g=h>>>26-c}g&&(this.words[b]=g,this.length++)}if(0!==e){for(b=this.length-1;b>=0;b--)this.words[b+e]=this.words[b];for(b=0;b<e;b++)this.words[b]=0;this.length+=e}return this.strip()},f.prototype.ishln=function(a){return d(0===this.negative),this.iushln(a)},f.prototype.iushrn=function(a,b,c){d("number"==typeof a&&a>=0);var e;e=b?(b-b%26)/26:0;var f=a%26,g=Math.min((a-f)/26,this.length),h=67108863^67108863>>>f<<f,i=c;if(e-=g,e=Math.max(0,e),i){for(var j=0;j<g;j++)i.words[j]=this.words[j];i.length=g}if(0===g);else if(this.length>g)for(this.length-=g,j=0;j<this.length;j++)this.words[j]=this.words[j+g];else this.words[0]=0,this.length=1;var k=0;for(j=this.length-1;j>=0&&(0!==k||j>=e);j--){var l=0|this.words[j];this.words[j]=k<<26-f|l>>>f,k=l&h}return i&&0!==k&&(i.words[i.length++]=k),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},f.prototype.ishrn=function(a,b,c){return d(0===this.negative),this.iushrn(a,b,c)},f.prototype.shln=function(a){return this.clone().ishln(a)},f.prototype.ushln=function(a){return this.clone().iushln(a)},f.prototype.shrn=function(a){return this.clone().ishrn(a)},f.prototype.ushrn=function(a){return this.clone().iushrn(a)},f.prototype.testn=function(a){d("number"==typeof a&&a>=0);var b=a%26,c=(a-b)/26,e=1<<b;if(this.length<=c)return!1;var f=this.words[c];return!!(f&e)},f.prototype.imaskn=function(a){d("number"==typeof a&&a>=0);var b=a%26,c=(a-b)/26;if(d(0===this.negative,"imaskn works only with positive numbers"),this.length<=c)return this;if(0!==b&&c++,this.length=Math.min(c,this.length),0!==b){var e=67108863^67108863>>>b<<b;this.words[this.length-1]&=e}return this.strip()},f.prototype.maskn=function(a){return this.clone().imaskn(a)},f.prototype.iaddn=function(a){return d("number"==typeof a),d(a<67108864),a<0?this.isubn(-a):0!==this.negative?1===this.length&&(0|this.words[0])<a?(this.words[0]=a-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},f.prototype._iaddn=function(a){this.words[0]+=a;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},f.prototype.isubn=function(a){if(d("number"==typeof a),d(a<67108864),a<0)return this.iaddn(-a);if(0!==this.negative)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},f.prototype.addn=function(a){return this.clone().iaddn(a)},f.prototype.subn=function(a){return this.clone().isubn(a)},f.prototype.iabs=function(){return this.negative=0,this},f.prototype.abs=function(){return this.clone().iabs()},f.prototype._ishlnsubmul=function(a,b,c){var e,f=a.length+c;this._expand(f);var g,h=0;for(e=0;e<a.length;e++){g=(0|this.words[e+c])+h;var i=(0|a.words[e])*b;g-=67108863&i,h=(g>>26)-(i/67108864|0),this.words[e+c]=67108863&g}for(;e<this.length-c;e++)g=(0|this.words[e+c])+h,h=g>>26,this.words[e+c]=67108863&g;if(0===h)return this.strip();for(d(h===-1),h=0,e=0;e<this.length;e++)g=-(0|this.words[e])+h,h=g>>26,this.words[e]=67108863&g;return this.negative=1,this.strip()},f.prototype._wordDiv=function(a,b){var c=this.length-a.length,d=this.clone(),e=a,g=0|e.words[e.length-1],h=this._countBits(g);c=26-h,0!==c&&(e=e.ushln(c),d.iushln(c),g=0|e.words[e.length-1]);var i,j=d.length-e.length;if("mod"!==b){i=new f(null),i.length=j+1,i.words=new Array(i.length);for(var k=0;k<i.length;k++)i.words[k]=0}var l=d.clone()._ishlnsubmul(e,1,j);0===l.negative&&(d=l,i&&(i.words[j]=1));for(var m=j-1;m>=0;m--){var n=67108864*(0|d.words[e.length+m])+(0|d.words[e.length+m-1]);for(n=Math.min(n/g|0,67108863),d._ishlnsubmul(e,n,m);0!==d.negative;)n--,d.negative=0,d._ishlnsubmul(e,1,m),d.isZero()||(d.negative^=1);i&&(i.words[m]=n);
}return i&&i.strip(),d.strip(),"div"!==b&&0!==c&&d.iushrn(c),{div:i||null,mod:d}},f.prototype.divmod=function(a,b,c){if(d(!a.isZero()),this.isZero())return{div:new f(0),mod:new f(0)};var e,g,h;return 0!==this.negative&&0===a.negative?(h=this.neg().divmod(a,b),"mod"!==b&&(e=h.div.neg()),"div"!==b&&(g=h.mod.neg(),c&&0!==g.negative&&g.iadd(a)),{div:e,mod:g}):0===this.negative&&0!==a.negative?(h=this.divmod(a.neg(),b),"mod"!==b&&(e=h.div.neg()),{div:e,mod:h.mod}):0!==(this.negative&a.negative)?(h=this.neg().divmod(a.neg(),b),"div"!==b&&(g=h.mod.neg(),c&&0!==g.negative&&g.isub(a)),{div:h.div,mod:g}):a.length>this.length||this.cmp(a)<0?{div:new f(0),mod:this}:1===a.length?"div"===b?{div:this.divn(a.words[0]),mod:null}:"mod"===b?{div:null,mod:new f(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new f(this.modn(a.words[0]))}:this._wordDiv(a,b)},f.prototype.div=function(a){return this.divmod(a,"div",!1).div},f.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},f.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},f.prototype.divRound=function(a){var b=this.divmod(a);if(b.mod.isZero())return b.div;var c=0!==b.div.negative?b.mod.isub(a):b.mod,d=a.ushrn(1),e=a.andln(1),f=c.cmp(d);return f<0||1===e&&0===f?b.div:0!==b.div.negative?b.div.isubn(1):b.div.iaddn(1)},f.prototype.modn=function(a){d(a<=67108863);for(var b=(1<<26)%a,c=0,e=this.length-1;e>=0;e--)c=(b*c+(0|this.words[e]))%a;return c},f.prototype.idivn=function(a){d(a<=67108863);for(var b=0,c=this.length-1;c>=0;c--){var e=(0|this.words[c])+67108864*b;this.words[c]=e/a|0,b=e%a}return this.strip()},f.prototype.divn=function(a){return this.clone().idivn(a)},f.prototype.egcd=function(a){d(0===a.negative),d(!a.isZero());var b=this,c=a.clone();b=0!==b.negative?b.umod(a):b.clone();for(var e=new f(1),g=new f(0),h=new f(0),i=new f(1),j=0;b.isEven()&&c.isEven();)b.iushrn(1),c.iushrn(1),++j;for(var k=c.clone(),l=b.clone();!b.isZero();){for(var m=0,n=1;0===(b.words[0]&n)&&m<26;++m,n<<=1);if(m>0)for(b.iushrn(m);m-- >0;)(e.isOdd()||g.isOdd())&&(e.iadd(k),g.isub(l)),e.iushrn(1),g.iushrn(1);for(var o=0,p=1;0===(c.words[0]&p)&&o<26;++o,p<<=1);if(o>0)for(c.iushrn(o);o-- >0;)(h.isOdd()||i.isOdd())&&(h.iadd(k),i.isub(l)),h.iushrn(1),i.iushrn(1);b.cmp(c)>=0?(b.isub(c),e.isub(h),g.isub(i)):(c.isub(b),h.isub(e),i.isub(g))}return{a:h,b:i,gcd:c.iushln(j)}},f.prototype._invmp=function(a){d(0===a.negative),d(!a.isZero());var b=this,c=a.clone();b=0!==b.negative?b.umod(a):b.clone();for(var e=new f(1),g=new f(0),h=c.clone();b.cmpn(1)>0&&c.cmpn(1)>0;){for(var i=0,j=1;0===(b.words[0]&j)&&i<26;++i,j<<=1);if(i>0)for(b.iushrn(i);i-- >0;)e.isOdd()&&e.iadd(h),e.iushrn(1);for(var k=0,l=1;0===(c.words[0]&l)&&k<26;++k,l<<=1);if(k>0)for(c.iushrn(k);k-- >0;)g.isOdd()&&g.iadd(h),g.iushrn(1);b.cmp(c)>=0?(b.isub(c),e.isub(g)):(c.isub(b),g.isub(e))}var m;return m=0===b.cmpn(1)?e:g,m.cmpn(0)<0&&m.iadd(a),m},f.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var b=this.clone(),c=a.clone();b.negative=0,c.negative=0;for(var d=0;b.isEven()&&c.isEven();d++)b.iushrn(1),c.iushrn(1);for(;;){for(;b.isEven();)b.iushrn(1);for(;c.isEven();)c.iushrn(1);var e=b.cmp(c);if(e<0){var f=b;b=c,c=f}else if(0===e||0===c.cmpn(1))break;b.isub(c)}return c.iushln(d)},f.prototype.invm=function(a){return this.egcd(a).a.umod(a)},f.prototype.isEven=function(){return 0===(1&this.words[0])},f.prototype.isOdd=function(){return 1===(1&this.words[0])},f.prototype.andln=function(a){return this.words[0]&a},f.prototype.bincn=function(a){d("number"==typeof a);var b=a%26,c=(a-b)/26,e=1<<b;if(this.length<=c)return this._expand(c+1),this.words[c]|=e,this;for(var f=e,g=c;0!==f&&g<this.length;g++){var h=0|this.words[g];h+=f,f=h>>>26,h&=67108863,this.words[g]=h}return 0!==f&&(this.words[g]=f,this.length++),this},f.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},f.prototype.cmpn=function(a){var b=a<0;if(0!==this.negative&&!b)return-1;if(0===this.negative&&b)return 1;this.strip();var c;if(this.length>1)c=1;else{b&&(a=-a),d(a<=67108863,"Number is too big");var e=0|this.words[0];c=e===a?0:e<a?-1:1}return 0!==this.negative?0|-c:c},f.prototype.cmp=function(a){if(0!==this.negative&&0===a.negative)return-1;if(0===this.negative&&0!==a.negative)return 1;var b=this.ucmp(a);return 0!==this.negative?0|-b:b},f.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var b=0,c=this.length-1;c>=0;c--){var d=0|this.words[c],e=0|a.words[c];if(d!==e){d<e?b=-1:d>e&&(b=1);break}}return b},f.prototype.gtn=function(a){return 1===this.cmpn(a)},f.prototype.gt=function(a){return 1===this.cmp(a)},f.prototype.gten=function(a){return this.cmpn(a)>=0},f.prototype.gte=function(a){return this.cmp(a)>=0},f.prototype.ltn=function(a){return this.cmpn(a)===-1},f.prototype.lt=function(a){return this.cmp(a)===-1},f.prototype.lten=function(a){return this.cmpn(a)<=0},f.prototype.lte=function(a){return this.cmp(a)<=0},f.prototype.eqn=function(a){return 0===this.cmpn(a)},f.prototype.eq=function(a){return 0===this.cmp(a)},f.red=function(a){return new s(a)},f.prototype.toRed=function(a){return d(!this.red,"Already a number in reduction context"),d(0===this.negative,"red works only with positives"),a.convertTo(this)._forceRed(a)},f.prototype.fromRed=function(){return d(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},f.prototype._forceRed=function(a){return this.red=a,this},f.prototype.forceRed=function(a){return d(!this.red,"Already a number in reduction context"),this._forceRed(a)},f.prototype.redAdd=function(a){return d(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},f.prototype.redIAdd=function(a){return d(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},f.prototype.redSub=function(a){return d(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},f.prototype.redISub=function(a){return d(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},f.prototype.redShl=function(a){return d(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},f.prototype.redMul=function(a){return d(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},f.prototype.redIMul=function(a){return d(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},f.prototype.redSqr=function(){return d(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},f.prototype.redISqr=function(){return d(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},f.prototype.redSqrt=function(){return d(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},f.prototype.redInvm=function(){return d(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},f.prototype.redNeg=function(){return d(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},f.prototype.redPow=function(a){return d(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var A={k256:null,p224:null,p192:null,p25519:null};n.prototype._tmp=function(){var a=new f(null);return a.words=new Array(Math.ceil(this.n/13)),a},n.prototype.ireduce=function(a){var b,c=a;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),b=c.bitLength();while(b>this.n);var d=b<this.n?-1:c.ucmp(this.p);return 0===d?(c.words[0]=0,c.length=1):d>0?c.isub(this.p):c.strip(),c},n.prototype.split=function(a,b){a.iushrn(this.n,0,b)},n.prototype.imulK=function(a){return a.imul(this.k)},e(o,n),o.prototype.split=function(a,b){for(var c=4194303,d=Math.min(a.length,9),e=0;e<d;e++)b.words[e]=a.words[e];if(b.length=d,a.length<=9)return a.words[0]=0,void(a.length=1);var f=a.words[9];for(b.words[b.length++]=f&c,e=10;e<a.length;e++){var g=0|a.words[e];a.words[e-10]=(g&c)<<4|f>>>22,f=g}f>>>=22,a.words[e-10]=f,0===f&&a.length>10?a.length-=10:a.length-=9},o.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var b=0,c=0;c<a.length;c++){var d=0|a.words[c];b+=977*d,a.words[c]=67108863&b,b=64*d+(b/67108864|0)}return 0===a.words[a.length-1]&&(a.length--,0===a.words[a.length-1]&&a.length--),a},e(p,n),e(q,n),e(r,n),r.prototype.imulK=function(a){for(var b=0,c=0;c<a.length;c++){var d=19*(0|a.words[c])+b,e=67108863&d;d>>>=26,a.words[c]=e,b=d}return 0!==b&&(a.words[a.length++]=b),a},f._prime=function B(a){if(A[a])return A[a];var B;if("k256"===a)B=new o;else if("p224"===a)B=new p;else if("p192"===a)B=new q;else{if("p25519"!==a)throw new Error("Unknown prime "+a);B=new r}return A[a]=B,B},s.prototype._verify1=function(a){d(0===a.negative,"red works only with positives"),d(a.red,"red works only with red numbers")},s.prototype._verify2=function(a,b){d(0===(a.negative|b.negative),"red works only with positives"),d(a.red&&a.red===b.red,"red works only with red numbers")},s.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},s.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},s.prototype.add=function(a,b){this._verify2(a,b);var c=a.add(b);return c.cmp(this.m)>=0&&c.isub(this.m),c._forceRed(this)},s.prototype.iadd=function(a,b){this._verify2(a,b);var c=a.iadd(b);return c.cmp(this.m)>=0&&c.isub(this.m),c},s.prototype.sub=function(a,b){this._verify2(a,b);var c=a.sub(b);return c.cmpn(0)<0&&c.iadd(this.m),c._forceRed(this)},s.prototype.isub=function(a,b){this._verify2(a,b);var c=a.isub(b);return c.cmpn(0)<0&&c.iadd(this.m),c},s.prototype.shl=function(a,b){return this._verify1(a),this.imod(a.ushln(b))},s.prototype.imul=function(a,b){return this._verify2(a,b),this.imod(a.imul(b))},s.prototype.mul=function(a,b){return this._verify2(a,b),this.imod(a.mul(b))},s.prototype.isqr=function(a){return this.imul(a,a.clone())},s.prototype.sqr=function(a){return this.mul(a,a)},s.prototype.sqrt=function(a){if(a.isZero())return a.clone();var b=this.m.andln(3);if(d(b%2===1),3===b){var c=this.m.add(new f(1)).iushrn(2);return this.pow(a,c)}for(var e=this.m.subn(1),g=0;!e.isZero()&&0===e.andln(1);)g++,e.iushrn(1);d(!e.isZero());var h=new f(1).toRed(this),i=h.redNeg(),j=this.m.subn(1).iushrn(1),k=this.m.bitLength();for(k=new f(2*k*k).toRed(this);0!==this.pow(k,j).cmp(i);)k.redIAdd(i);for(var l=this.pow(k,e),m=this.pow(a,e.addn(1).iushrn(1)),n=this.pow(a,e),o=g;0!==n.cmp(h);){for(var p=n,q=0;0!==p.cmp(h);q++)p=p.redSqr();d(q<o);var r=this.pow(l,new f(1).iushln(o-q-1));m=m.redMul(r),l=r.redSqr(),n=n.redMul(l),o=q}return m},s.prototype.invm=function(a){var b=a._invmp(this.m);return 0!==b.negative?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},s.prototype.pow=function(a,b){if(b.isZero())return new f(1).toRed(this);if(0===b.cmpn(1))return a.clone();var c=4,d=new Array(1<<c);d[0]=new f(1).toRed(this),d[1]=a;for(var e=2;e<d.length;e++)d[e]=this.mul(d[e-1],a);var g=d[0],h=0,i=0,j=b.bitLength()%26;for(0===j&&(j=26),e=b.length-1;e>=0;e--){for(var k=b.words[e],l=j-1;l>=0;l--){var m=k>>l&1;g!==d[0]&&(g=this.sqr(g)),0!==m||0!==h?(h<<=1,h|=m,i++,(i===c||0===e&&0===l)&&(g=this.mul(g,d[h]),i=0,h=0)):i=0}j=26}return g},s.prototype.convertTo=function(a){var b=a.umod(this.m);return b===a?b.clone():b},s.prototype.convertFrom=function(a){var b=a.clone();return b.red=null,b},f.mont=function(a){return new t(a)},e(t,s),t.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},t.prototype.convertFrom=function(a){var b=this.imod(a.mul(this.rinv));return b.red=null,b},t.prototype.imul=function(a,b){if(a.isZero()||b.isZero())return a.words[0]=0,a.length=1,a;var c=a.imul(b),d=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=c.isub(d).iushrn(this.shift),f=e;return e.cmp(this.m)>=0?f=e.isub(this.m):e.cmpn(0)<0&&(f=e.iadd(this.m)),f._forceRed(this)},t.prototype.mul=function(a,b){if(a.isZero()||b.isZero())return new f(0)._forceRed(this);var c=a.mul(b),d=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=c.isub(d).iushrn(this.shift),g=e;return e.cmp(this.m)>=0?g=e.isub(this.m):e.cmpn(0)<0&&(g=e.iadd(this.m)),g._forceRed(this)},t.prototype.invm=function(a){var b=this.imod(a._invmp(this.m).mul(this.r2));return b._forceRed(this)}}("undefined"==typeof b||b,this)},{buffer:18}],17:[function(a,b,c){function d(a){this.rand=a}var e;if(b.exports=function(a){return e||(e=new d(null)),e.generate(a)},b.exports.Rand=d,d.prototype.generate=function(a){return this._rand(a)},d.prototype._rand=function(a){if(this.rand.getBytes)return this.rand.getBytes(a);for(var b=new Uint8Array(a),c=0;c<b.length;c++)b[c]=this.rand.getByte();return b},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?d.prototype._rand=function(a){var b=new Uint8Array(a);return self.crypto.getRandomValues(b),b}:self.msCrypto&&self.msCrypto.getRandomValues?d.prototype._rand=function(a){var b=new Uint8Array(a);return self.msCrypto.getRandomValues(b),b}:"object"==typeof window&&(d.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var f=a("crypto");if("function"!=typeof f.randomBytes)throw new Error("Not supported");d.prototype._rand=function(a){return f.randomBytes(a)}}catch(g){}},{crypto:18}],18:[function(a,b,c){},{}],19:[function(a,b,c){var d=c;d.utils=a("./hash/utils"),d.common=a("./hash/common"),d.sha=a("./hash/sha"),d.ripemd=a("./hash/ripemd"),d.hmac=a("./hash/hmac"),d.sha1=d.sha.sha1,d.sha256=d.sha.sha256,d.sha224=d.sha.sha224,d.sha384=d.sha.sha384,d.sha512=d.sha.sha512,d.ripemd160=d.ripemd.ripemd160},{"./hash/common":20,"./hash/hmac":21,"./hash/ripemd":22,"./hash/sha":23,"./hash/utils":30}],20:[function(a,b,c){"use strict";function d(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}var e=a("./utils"),f=a("minimalistic-assert");c.BlockHash=d,d.prototype.update=function(a,b){if(a=e.toArray(a,b),this.pending?this.pending=this.pending.concat(a):this.pending=a,this.pendingTotal+=a.length,this.pending.length>=this._delta8){a=this.pending;var c=a.length%this._delta8;this.pending=a.slice(a.length-c,a.length),0===this.pending.length&&(this.pending=null),a=e.join32(a,0,a.length-c,this.endian);for(var d=0;d<a.length;d+=this._delta32)this._update(a,d,d+this._delta32)}return this},d.prototype.digest=function(a){return this.update(this._pad()),f(null===this.pending),this._digest(a)},d.prototype._pad=function(){var a=this.pendingTotal,b=this._delta8,c=b-(a+this.padLength)%b,d=new Array(c+this.padLength);d[0]=128;for(var e=1;e<c;e++)d[e]=0;if(a<<=3,"big"===this.endian){for(var f=8;f<this.padLength;f++)d[e++]=0;d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=a>>>24&255,d[e++]=a>>>16&255,d[e++]=a>>>8&255,d[e++]=255&a}else for(d[e++]=255&a,d[e++]=a>>>8&255,d[e++]=a>>>16&255,d[e++]=a>>>24&255,d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=0,f=8;f<this.padLength;f++)d[e++]=0;return d}},{"./utils":30,"minimalistic-assert":33}],21:[function(a,b,c){"use strict";function d(a,b,c){return this instanceof d?(this.Hash=a,this.blockSize=a.blockSize/8,this.outSize=a.outSize/8,this.inner=null,this.outer=null,void this._init(e.toArray(b,c))):new d(a,b,c)}var e=a("./utils"),f=a("minimalistic-assert");b.exports=d,d.prototype._init=function(a){a.length>this.blockSize&&(a=(new this.Hash).update(a).digest()),f(a.length<=this.blockSize);for(var b=a.length;b<this.blockSize;b++)a.push(0);for(b=0;b<a.length;b++)a[b]^=54;for(this.inner=(new this.Hash).update(a),b=0;b<a.length;b++)a[b]^=106;this.outer=(new this.Hash).update(a)},d.prototype.update=function(a,b){return this.inner.update(a,b),this},d.prototype.digest=function(a){return this.outer.update(this.inner.digest()),this.outer.digest(a)}},{"./utils":30,"minimalistic-assert":33}],22:[function(a,b,c){"use strict";function d(){return this instanceof d?(n.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.endian="little")):new d}function e(a,b,c,d){return a<=15?b^c^d:a<=31?b&c|~b&d:a<=47?(b|~c)^d:a<=63?b&d|c&~d:b^(c|~d)}function f(a){return a<=15?0:a<=31?1518500249:a<=47?1859775393:a<=63?2400959708:2840853838}function g(a){return a<=15?1352829926:a<=31?1548603684:a<=47?1836072691:a<=63?2053994217:0}var h=a("./utils"),i=a("./common"),j=h.rotl32,k=h.sum32,l=h.sum32_3,m=h.sum32_4,n=i.BlockHash;h.inherits(d,n),c.ripemd160=d,d.blockSize=512,d.outSize=160,d.hmacStrength=192,d.padLength=64,d.prototype._update=function(a,b){for(var c=this.h[0],d=this.h[1],h=this.h[2],i=this.h[3],n=this.h[4],s=c,t=d,u=h,v=i,w=n,x=0;x<80;x++){var y=k(j(m(c,e(x,d,h,i),a[o[x]+b],f(x)),q[x]),n);c=n,n=i,i=j(h,10),h=d,d=y,y=k(j(m(s,e(79-x,t,u,v),a[p[x]+b],g(x)),r[x]),w),s=w,w=v,v=j(u,10),u=t,t=y}y=l(this.h[1],h,v),this.h[1]=l(this.h[2],i,w),this.h[2]=l(this.h[3],n,s),this.h[3]=l(this.h[4],c,t),this.h[4]=l(this.h[0],d,u),this.h[0]=y},d.prototype._digest=function(a){return"hex"===a?h.toHex32(this.h,"little"):h.split32(this.h,"little")};var o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],p=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],q=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],r=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":20,"./utils":30}],23:[function(a,b,c){"use strict";c.sha1=a("./sha/1"),c.sha224=a("./sha/224"),c.sha256=a("./sha/256"),c.sha384=a("./sha/384"),c.sha512=a("./sha/512")},{"./sha/1":24,"./sha/224":25,"./sha/256":26,"./sha/384":27,"./sha/512":28}],24:[function(a,b,c){"use strict";function d(){return this instanceof d?(l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.W=new Array(80))):new d}var e=a("../utils"),f=a("../common"),g=a("./common"),h=e.rotl32,i=e.sum32,j=e.sum32_5,k=g.ft_1,l=f.BlockHash,m=[1518500249,1859775393,2400959708,3395469782];e.inherits(d,l),b.exports=d,d.blockSize=512,d.outSize=160,d.hmacStrength=80,d.padLength=64,d.prototype._update=function(a,b){for(var c=this.W,d=0;d<16;d++)c[d]=a[b+d];for(;d<c.length;d++)c[d]=h(c[d-3]^c[d-8]^c[d-14]^c[d-16],1);var e=this.h[0],f=this.h[1],g=this.h[2],l=this.h[3],n=this.h[4];for(d=0;d<c.length;d++){var o=~~(d/20),p=j(h(e,5),k(o,f,g,l),n,c[d],m[o]);n=l,l=g,g=h(f,30),f=e,e=p}this.h[0]=i(this.h[0],e),this.h[1]=i(this.h[1],f),this.h[2]=i(this.h[2],g),this.h[3]=i(this.h[3],l),this.h[4]=i(this.h[4],n)},d.prototype._digest=function(a){return"hex"===a?e.toHex32(this.h,"big"):e.split32(this.h,"big")}},{"../common":20,"../utils":30,"./common":29}],25:[function(a,b,c){"use strict";function d(){return this instanceof d?(f.call(this),void(this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])):new d}var e=a("../utils"),f=a("./256");e.inherits(d,f),b.exports=d,d.blockSize=512,d.outSize=224,d.hmacStrength=192,d.padLength=64,d.prototype._digest=function(a){return"hex"===a?e.toHex32(this.h.slice(0,7),"big"):e.split32(this.h.slice(0,7),"big")}},{"../utils":30,"./256":26}],26:[function(a,b,c){"use strict";function d(){return this instanceof d?(r.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=s,void(this.W=new Array(64))):new d}var e=a("../utils"),f=a("../common"),g=a("./common"),h=a("minimalistic-assert"),i=e.sum32,j=e.sum32_4,k=e.sum32_5,l=g.ch32,m=g.maj32,n=g.s0_256,o=g.s1_256,p=g.g0_256,q=g.g1_256,r=f.BlockHash,s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];e.inherits(d,r),b.exports=d,d.blockSize=512,d.outSize=256,d.hmacStrength=192,d.padLength=64,d.prototype._update=function(a,b){for(var c=this.W,d=0;d<16;d++)c[d]=a[b+d];for(;d<c.length;d++)c[d]=j(q(c[d-2]),c[d-7],p(c[d-15]),c[d-16]);var e=this.h[0],f=this.h[1],g=this.h[2],r=this.h[3],s=this.h[4],t=this.h[5],u=this.h[6],v=this.h[7];for(h(this.k.length===c.length),d=0;d<c.length;d++){var w=k(v,o(s),l(s,t,u),this.k[d],c[d]),x=i(n(e),m(e,f,g));v=u,u=t,t=s,s=i(r,w),r=g,g=f,f=e,e=i(w,x)}this.h[0]=i(this.h[0],e),this.h[1]=i(this.h[1],f),this.h[2]=i(this.h[2],g),this.h[3]=i(this.h[3],r),this.h[4]=i(this.h[4],s),this.h[5]=i(this.h[5],t),this.h[6]=i(this.h[6],u),this.h[7]=i(this.h[7],v)},d.prototype._digest=function(a){return"hex"===a?e.toHex32(this.h,"big"):e.split32(this.h,"big")}},{"../common":20,"../utils":30,"./common":29,"minimalistic-assert":33}],27:[function(a,b,c){"use strict";function d(){return this instanceof d?(f.call(this),void(this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428])):new d}var e=a("../utils"),f=a("./512");e.inherits(d,f),b.exports=d,d.blockSize=1024,d.outSize=384,d.hmacStrength=192,d.padLength=128,d.prototype._digest=function(a){return"hex"===a?e.toHex32(this.h.slice(0,12),"big"):e.split32(this.h.slice(0,12),"big")}},{"../utils":30,"./512":28}],28:[function(a,b,c){"use strict";function d(){return this instanceof d?(E.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=F,void(this.W=new Array(160))):new d}function e(a,b,c,d,e){var f=a&c^~a&e;return f<0&&(f+=4294967296),f}function f(a,b,c,d,e,f){var g=b&d^~b&f;return g<0&&(g+=4294967296),g}function g(a,b,c,d,e){var f=a&c^a&e^c&e;return f<0&&(f+=4294967296),f}function h(a,b,c,d,e,f){var g=b&d^b&f^d&f;return g<0&&(g+=4294967296),g}function i(a,b){var c=t(a,b,28),d=t(b,a,2),e=t(b,a,7),f=c^d^e;return f<0&&(f+=4294967296),f}function j(a,b){var c=u(a,b,28),d=u(b,a,2),e=u(b,a,7),f=c^d^e;return f<0&&(f+=4294967296),f}function k(a,b){var c=t(a,b,14),d=t(a,b,18),e=t(b,a,9),f=c^d^e;return f<0&&(f+=4294967296),f}function l(a,b){var c=u(a,b,14),d=u(a,b,18),e=u(b,a,9),f=c^d^e;return f<0&&(f+=4294967296),f}function m(a,b){var c=t(a,b,1),d=t(a,b,8),e=v(a,b,7),f=c^d^e;return f<0&&(f+=4294967296),f}function n(a,b){var c=u(a,b,1),d=u(a,b,8),e=w(a,b,7),f=c^d^e;return f<0&&(f+=4294967296),f}function o(a,b){var c=t(a,b,19),d=t(b,a,29),e=v(a,b,6),f=c^d^e;return f<0&&(f+=4294967296),f}function p(a,b){var c=u(a,b,19),d=u(b,a,29),e=w(a,b,6),f=c^d^e;return f<0&&(f+=4294967296),f}var q=a("../utils"),r=a("../common"),s=a("minimalistic-assert"),t=q.rotr64_hi,u=q.rotr64_lo,v=q.shr64_hi,w=q.shr64_lo,x=q.sum64,y=q.sum64_hi,z=q.sum64_lo,A=q.sum64_4_hi,B=q.sum64_4_lo,C=q.sum64_5_hi,D=q.sum64_5_lo,E=r.BlockHash,F=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];q.inherits(d,E),b.exports=d,d.blockSize=1024,d.outSize=512,d.hmacStrength=192,d.padLength=128,d.prototype._prepareBlock=function(a,b){for(var c=this.W,d=0;d<32;d++)c[d]=a[b+d];for(;d<c.length;d+=2){var e=o(c[d-4],c[d-3]),f=p(c[d-4],c[d-3]),g=c[d-14],h=c[d-13],i=m(c[d-30],c[d-29]),j=n(c[d-30],c[d-29]),k=c[d-32],l=c[d-31];c[d]=A(e,f,g,h,i,j,k,l),c[d+1]=B(e,f,g,h,i,j,k,l)}},d.prototype._update=function(a,b){this._prepareBlock(a,b);var c=this.W,d=this.h[0],m=this.h[1],n=this.h[2],o=this.h[3],p=this.h[4],q=this.h[5],r=this.h[6],t=this.h[7],u=this.h[8],v=this.h[9],w=this.h[10],A=this.h[11],B=this.h[12],E=this.h[13],F=this.h[14],G=this.h[15];s(this.k.length===c.length);for(var H=0;H<c.length;H+=2){var I=F,J=G,K=k(u,v),L=l(u,v),M=e(u,v,w,A,B,E),N=f(u,v,w,A,B,E),O=this.k[H],P=this.k[H+1],Q=c[H],R=c[H+1],S=C(I,J,K,L,M,N,O,P,Q,R),T=D(I,J,K,L,M,N,O,P,Q,R);I=i(d,m),J=j(d,m),K=g(d,m,n,o,p,q),L=h(d,m,n,o,p,q);var U=y(I,J,K,L),V=z(I,J,K,L);F=B,G=E,B=w,E=A,w=u,A=v,u=y(r,t,S,T),v=z(t,t,S,T),r=p,t=q,p=n,q=o,n=d,o=m,d=y(S,T,U,V),m=z(S,T,U,V)}x(this.h,0,d,m),x(this.h,2,n,o),x(this.h,4,p,q),x(this.h,6,r,t),x(this.h,8,u,v),x(this.h,10,w,A),x(this.h,12,B,E),x(this.h,14,F,G)},d.prototype._digest=function(a){return"hex"===a?q.toHex32(this.h,"big"):q.split32(this.h,"big")}},{"../common":20,"../utils":30,"minimalistic-assert":33}],29:[function(a,b,c){"use strict";function d(a,b,c,d){return 0===a?e(b,c,d):1===a||3===a?g(b,c,d):2===a?f(b,c,d):void 0}function e(a,b,c){return a&b^~a&c}function f(a,b,c){return a&b^a&c^b&c}function g(a,b,c){return a^b^c}function h(a){return m(a,2)^m(a,13)^m(a,22)}function i(a){return m(a,6)^m(a,11)^m(a,25)}function j(a){return m(a,7)^m(a,18)^a>>>3}function k(a){return m(a,17)^m(a,19)^a>>>10}var l=a("../utils"),m=l.rotr32;c.ft_1=d,c.ch32=e,c.maj32=f,c.p32=g,c.s0_256=h,c.s1_256=i,c.g0_256=j,c.g1_256=k},{"../utils":30}],30:[function(a,b,c){"use strict";function d(a,b){return 55296===(64512&a.charCodeAt(b))&&(!(b<0||b+1>=a.length)&&56320===(64512&a.charCodeAt(b+1)))}function e(a,b){if(Array.isArray(a))return a.slice();if(!a)return[];var c=[];if("string"==typeof a)if(b){if("hex"===b)for(a=a.replace(/[^a-z0-9]+/gi,""),a.length%2!==0&&(a="0"+a),f=0;f<a.length;f+=2)c.push(parseInt(a[f]+a[f+1],16))}else for(var e=0,f=0;f<a.length;f++){var g=a.charCodeAt(f);g<128?c[e++]=g:g<2048?(c[e++]=g>>6|192,c[e++]=63&g|128):d(a,f)?(g=65536+((1023&g)<<10)+(1023&a.charCodeAt(++f)),c[e++]=g>>18|240,c[e++]=g>>12&63|128,c[e++]=g>>6&63|128,c[e++]=63&g|128):(c[e++]=g>>12|224,c[e++]=g>>6&63|128,c[e++]=63&g|128)}else for(f=0;f<a.length;f++)c[f]=0|a[f];return c}function f(a){for(var b="",c=0;c<a.length;c++)b+=i(a[c].toString(16));return b}function g(a){var b=a>>>24|a>>>8&65280|a<<8&16711680|(255&a)<<24;return b>>>0}function h(a,b){for(var c="",d=0;d<a.length;d++){var e=a[d];"little"===b&&(e=g(e)),c+=j(e.toString(16))}return c}function i(a){return 1===a.length?"0"+a:a}function j(a){return 7===a.length?"0"+a:6===a.length?"00"+a:5===a.length?"000"+a:4===a.length?"0000"+a:3===a.length?"00000"+a:2===a.length?"000000"+a:1===a.length?"0000000"+a:a}function k(a,b,c,d){var e=c-b;D(e%4===0);for(var f=new Array(e/4),g=0,h=b;g<f.length;g++,h+=4){var i;i="big"===d?a[h]<<24|a[h+1]<<16|a[h+2]<<8|a[h+3]:a[h+3]<<24|a[h+2]<<16|a[h+1]<<8|a[h],f[g]=i>>>0}return f}function l(a,b){for(var c=new Array(4*a.length),d=0,e=0;d<a.length;d++,e+=4){var f=a[d];"big"===b?(c[e]=f>>>24,c[e+1]=f>>>16&255,c[e+2]=f>>>8&255,c[e+3]=255&f):(c[e+3]=f>>>24,c[e+2]=f>>>16&255,c[e+1]=f>>>8&255,c[e]=255&f)}return c}function m(a,b){return a>>>b|a<<32-b}function n(a,b){return a<<b|a>>>32-b}function o(a,b){return a+b>>>0}function p(a,b,c){return a+b+c>>>0}function q(a,b,c,d){return a+b+c+d>>>0}function r(a,b,c,d,e){return a+b+c+d+e>>>0}function s(a,b,c,d){var e=a[b],f=a[b+1],g=d+f>>>0,h=(g<d?1:0)+c+e;a[b]=h>>>0,a[b+1]=g}function t(a,b,c,d){var e=b+d>>>0,f=(e<b?1:0)+a+c;return f>>>0}function u(a,b,c,d){var e=b+d;return e>>>0}function v(a,b,c,d,e,f,g,h){var i=0,j=b;j=j+d>>>0,i+=j<b?1:0,j=j+f>>>0,i+=j<f?1:0,j=j+h>>>0,i+=j<h?1:0;var k=a+c+e+g+i;return k>>>0}function w(a,b,c,d,e,f,g,h){var i=b+d+f+h;return i>>>0}function x(a,b,c,d,e,f,g,h,i,j){var k=0,l=b;l=l+d>>>0,k+=l<b?1:0,l=l+f>>>0,k+=l<f?1:0,l=l+h>>>0,k+=l<h?1:0,l=l+j>>>0,k+=l<j?1:0;var m=a+c+e+g+i+k;return m>>>0}function y(a,b,c,d,e,f,g,h,i,j){var k=b+d+f+h+j;return k>>>0}function z(a,b,c){var d=b<<32-c|a>>>c;return d>>>0}function A(a,b,c){var d=a<<32-c|b>>>c;return d>>>0}function B(a,b,c){return a>>>c}function C(a,b,c){var d=a<<32-c|b>>>c;return d>>>0}var D=a("minimalistic-assert"),E=a("inherits");c.inherits=E,c.toArray=e,c.toHex=f,c.htonl=g,c.toHex32=h,c.zero2=i,c.zero8=j,c.join32=k,c.split32=l,c.rotr32=m,c.rotl32=n,c.sum32=o,c.sum32_3=p,c.sum32_4=q,c.sum32_5=r,c.sum64=s,c.sum64_hi=t,c.sum64_lo=u,c.sum64_4_hi=v,c.sum64_4_lo=w,c.sum64_5_hi=x,c.sum64_5_lo=y,c.rotr64_hi=z,c.rotr64_lo=A,c.shr64_hi=B,c.shr64_lo=C},{inherits:32,"minimalistic-assert":33}],31:[function(a,b,c){"use strict";function d(a){if(!(this instanceof d))return new d(a);this.hash=a.hash,this.predResist=!!a.predResist,this.outLen=this.hash.outSize,this.minEntropy=a.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var b=f.toArray(a.entropy,a.entropyEnc||"hex"),c=f.toArray(a.nonce,a.nonceEnc||"hex"),e=f.toArray(a.pers,a.persEnc||"hex");g(b.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(b,c,e)}var e=a("hash.js"),f=a("minimalistic-crypto-utils"),g=a("minimalistic-assert");b.exports=d,d.prototype._init=function(a,b,c){var d=a.concat(b).concat(c);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var e=0;e<this.V.length;e++)this.K[e]=0,this.V[e]=1;this._update(d),this._reseed=1,this.reseedInterval=281474976710656},d.prototype._hmac=function(){return new e.hmac(this.hash,this.K)},d.prototype._update=function(a){var b=this._hmac().update(this.V).update([0]);a&&(b=b.update(a)),this.K=b.digest(),this.V=this._hmac().update(this.V).digest(),a&&(this.K=this._hmac().update(this.V).update([1]).update(a).digest(),this.V=this._hmac().update(this.V).digest())},d.prototype.reseed=function(a,b,c,d){"string"!=typeof b&&(d=c,c=b,b=null),a=f.toArray(a,b),c=f.toArray(c,d),g(a.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(a.concat(c||[])),this._reseed=1},d.prototype.generate=function(a,b,c,d){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof b&&(d=c,c=b,b=null),c&&(c=f.toArray(c,d||"hex"),this._update(c));for(var e=[];e.length<a;)this.V=this._hmac().update(this.V).digest(),
e=e.concat(this.V);var g=e.slice(0,a);return this._update(c),this._reseed++,f.encode(g,b)}},{"hash.js":19,"minimalistic-assert":33,"minimalistic-crypto-utils":34}],32:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){b&&(a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}))}:b.exports=function(a,b){if(b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}}},{}],33:[function(a,b,c){function d(a,b){if(!a)throw new Error(b||"Assertion failed")}b.exports=d,d.equal=function(a,b,c){if(a!=b)throw new Error(c||"Assertion failed: "+a+" != "+b)}},{}],34:[function(a,b,c){"use strict";function d(a,b){if(Array.isArray(a))return a.slice();if(!a)return[];var c=[];if("string"!=typeof a){for(var d=0;d<a.length;d++)c[d]=0|a[d];return c}if("hex"===b){a=a.replace(/[^a-z0-9]+/gi,""),a.length%2!==0&&(a="0"+a);for(var d=0;d<a.length;d+=2)c.push(parseInt(a[d]+a[d+1],16))}else for(var d=0;d<a.length;d++){var e=a.charCodeAt(d),f=e>>8,g=255&e;f?c.push(f,g):c.push(g)}return c}function e(a){return 1===a.length?"0"+a:a}function f(a){for(var b="",c=0;c<a.length;c++)b+=e(a[c].toString(16));return b}var g=c;g.toArray=d,g.zero2=e,g.toHex=f,g.encode=function(a,b){return"hex"===b?f(a):a}},{}],35:[function(a,b,c){b.exports={name:"elliptic",version:"6.5.3",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{jscs:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",jshint:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",lint:"npm run jscs && npm run jshint",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^1.4.3",coveralls:"^3.0.8",grunt:"^1.0.4","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.2",jscs:"^3.0.7",jshint:"^2.10.3",mocha:"^6.2.2"},dependencies:{"bn.js":"^4.4.0",brorand:"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0",inherits:"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"}}},{}]},{},[1])(1)});




///////////////////////asdf


var liner=function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}let s={};"undefined"!=typeof self&&(s=self),e.nativeCrypto=s.msCrypto||s.crypto||{},e.nativeSubtle=null;try{e.nativeSubtle=(null===e.nativeCrypto||void 0===e.nativeCrypto?void 0:e.nativeCrypto.subtle)||(null===e.nativeCrypto||void 0===e.nativeCrypto?void 0:e.nativeCrypto.webkitSubtle)||null}catch(e){console.warn("Cannot get subtle from crypto",e)}function a(e){return"undefined"!=typeof Buffer&&Buffer.isBuffer(e)?new Uint8Array(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class c{static ToString(e,t="utf8"){const r=a(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromString(e,t="utf8"){switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToBase64(e){const t=a(e);if("undefined"!=typeof btoa){const e=this.ToString(t,"binary");return btoa(e)}return Buffer.from(t).toString("base64")}static FromBase64(e){return e=e.replace(/\n/g,"").replace(/\r/g,"").replace(/\t/g,"").replace(/\s/g,""),"undefined"!=typeof atob?this.FromBinary(atob(e)):new Uint8Array(Buffer.from(e,"base64")).buffer}static FromBase64Url(e){return this.FromBase64(this.Base64Padding(e.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e){const t=unescape(encodeURIComponent(e)),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r.buffer}static ToUtf8String(e){const t=a(e),r=String.fromCharCode.apply(null,t);return decodeURIComponent(escape(r))}static FromBinary(e){const t=e.length,r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);return r.buffer}static ToBinary(e){const t=a(e);let r="";const n=t.length;for(let e=0;e<n;e++)r+=String.fromCharCode(t[e]);return r}static ToHex(e){const t=a(e),r=[],n=t.length;for(let e=0;e<n;e++){const n=t[e].toString(16);r.push(1===n.length?"0"+n:n)}return r.join("")}static FromHex(e){const t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){const n=e.slice(r,r+2);t[r/2]=parseInt(n,16)}return t.buffer}static Base64Padding(e){const t=4-e.length%4;if(t<4)for(let r=0;r<t;r++)e+="=";return e}}class l{static toArrayBuffer(e){const t=this.toUint8Array(e);return t.byteOffset||t.length?t.buffer.slice(t.byteOffset,t.byteOffset+t.length):t.buffer}static toUint8Array(e){if("undefined"!=typeof Buffer&&Buffer.isBuffer(e))return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}}function u(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function h(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}function f(e,t){return e(t={exports:{}},t.exports),t.exports}function y(e,t){let r=0;if(1===e.length)return e[0];for(let n=e.length-1;n>=0;n--)r+=e[e.length-1-n]*Math.pow(2,t*n);return r}function p(e,t,r=-1){const n=r;let i=e,o=0,s=Math.pow(2,t);for(let r=1;r<8;r++){if(e<s){let e;if(n<0)e=new ArrayBuffer(r),o=r;else{if(n<r)return new ArrayBuffer(0);e=new ArrayBuffer(n),o=n}const s=new Uint8Array(e);for(let e=r-1;e>=0;e--){const r=Math.pow(2,e*t);s[o-e-1]=Math.floor(i/r),i-=s[o-e-1]*r}return e}s*=Math.pow(2,t)}return new ArrayBuffer(0)}const g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";const m=Math.log(2);var v,w=Object.freeze({__proto__:null,getUTCDate:function(e){return new Date(e.getTime()+6e4*e.getTimezoneOffset())},getParametersValue:function(e,t,r){return e instanceof Object==!1?r:t in e?e[t]:r},bufferToHexCodes:function(e,t=0,r=e.byteLength-t,n=!1){let i="";for(const o of new Uint8Array(e,t,r)){const e=o.toString(16).toUpperCase();1===e.length&&(i+="0"),i+=e,n&&(i+=" ")}return i.trim()},checkBufferParams:function(e,t,r,n){return t instanceof ArrayBuffer==!1?(e.error='Wrong parameter: inputBuffer must be "ArrayBuffer"',!1):0===t.byteLength?(e.error="Wrong parameter: inputBuffer has zero length",!1):r<0?(e.error="Wrong parameter: inputOffset less than zero",!1):n<0?(e.error="Wrong parameter: inputLength less than zero",!1):!(t.byteLength-r-n<0)||(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1)},utilFromBase:y,utilToBase:p,utilConcatBuf:function(...e){let t=0,r=0;for(const r of e)t+=r.byteLength;const n=new ArrayBuffer(t),i=new Uint8Array(n);for(const t of e)i.set(new Uint8Array(t),r),r+=t.byteLength;return n},utilConcatView:function(...e){let t=0,r=0;for(const r of e)t+=r.length;const n=new ArrayBuffer(t),i=new Uint8Array(n);for(const t of e)i.set(t,r),r+=t.length;return i},utilDecodeTC:function(){const e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const t=255===e[0]&&128&e[1],r=0===e[0]&&0==(128&e[1]);(t||r)&&this.warnings.push("Needlessly long format")}const t=new ArrayBuffer(this.valueHex.byteLength),r=new Uint8Array(t);for(let e=0;e<this.valueHex.byteLength;e++)r[e]=0;r[0]=128&e[0];const n=y(r,8),i=new ArrayBuffer(this.valueHex.byteLength),o=new Uint8Array(i);for(let t=0;t<this.valueHex.byteLength;t++)o[t]=e[t];return o[0]&=127,y(o,8)-n},utilEncodeTC:function(e){const t=e<0?-1*e:e;let r=128;for(let n=1;n<8;n++){if(t<=r){if(e<0){const e=p(r-t,8,n);return new Uint8Array(e)[0]|=128,e}let i=p(t,8,n),o=new Uint8Array(i);if(128&o[0]){const e=i.slice(0),t=new Uint8Array(e);i=new ArrayBuffer(i.byteLength+1),o=new Uint8Array(i);for(let r=0;r<e.byteLength;r++)o[r+1]=t[r];o[0]=0}return i}r*=Math.pow(2,8)}return new ArrayBuffer(0)},isEqualBuffer:function(e,t){if(e.byteLength!==t.byteLength)return!1;const r=new Uint8Array(e),n=new Uint8Array(t);for(let e=0;e<r.length;e++)if(r[e]!==n[e])return!1;return!0},padNumber:function(e,t){const r=e.toString(10);if(t<r.length)return"";const n=t-r.length,i=new Array(n);for(let e=0;e<n;e++)i[e]="0";return i.join("").concat(r)},toBase64:function(e,t=!1,r=!1,n=!1){let i=0,o=0,s=0,a="";const c=t?d:g;if(n){let t=0;for(let r=0;r<e.length;r++)if(0!==e.charCodeAt(r)){t=r;break}e=e.slice(t)}for(;i<e.length;){const t=e.charCodeAt(i++);i>=e.length&&(o=1);const n=e.charCodeAt(i++);i>=e.length&&(s=1);const l=e.charCodeAt(i++),u=t>>2,h=(3&t)<<4|n>>4;let f=(15&n)<<2|l>>6,y=63&l;1===o?f=y=64:1===s&&(y=64),a+=r?64===f?`${c.charAt(u)}${c.charAt(h)}`:64===y?`${c.charAt(u)}${c.charAt(h)}${c.charAt(f)}`:`${c.charAt(u)}${c.charAt(h)}${c.charAt(f)}${c.charAt(y)}`:`${c.charAt(u)}${c.charAt(h)}${c.charAt(f)}${c.charAt(y)}`}return a},fromBase64:function(e,t=!1,r=!1){const n=t?d:g;function i(e){for(let t=0;t<64;t++)if(n.charAt(t)===e)return t;return 64}function o(e){return 64===e?0:e}let s=0,a="";for(;s<e.length;){const t=i(e.charAt(s++)),r=s>=e.length?0:i(e.charAt(s++)),n=s>=e.length?0:i(e.charAt(s++)),c=s>=e.length?0:i(e.charAt(s++)),l=o(t)<<2|o(r)>>4,u=(15&o(r))<<4|o(n)>>2,h=(3&o(n))<<6|o(c);a+=String.fromCharCode(l),64!==n&&(a+=String.fromCharCode(u)),64!==c&&(a+=String.fromCharCode(h))}if(r){let e=-1;for(let t=a.length-1;t>=0;t--)if(0!==a.charCodeAt(t)){e=t;break}a=-1!==e?a.slice(0,e+1):""}return a},arrayBufferToString:function(e){let t="";const r=new Uint8Array(e);for(const e of r)t+=String.fromCharCode(e);return t},stringToArrayBuffer:function(e){const t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r);for(let r=0;r<t;r++)n[r]=e.charCodeAt(r);return r},nearestPowerOf2:function(e){const t=Math.log(e)/m,r=Math.floor(t),n=Math.round(t);return r===n?r:n},clearProps:function(e,t){for(const r of t)delete e[r]}}),k=f((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.fromBER=ce,t.compareSchema=le,t.verifySchema=function(e,t){if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};const r=ce(e);if(-1===r.offset)return{verified:!1,result:r.result};return le(r.result,r.result,t)},t.fromJSON=function(e){},t.RawData=t.Repeated=t.Any=t.Choice=t.TIME=t.Duration=t.DateTime=t.TimeOfDay=t.DATE=t.GeneralizedTime=t.UTCTime=t.CharacterString=t.GeneralString=t.VisibleString=t.GraphicString=t.IA5String=t.VideotexString=t.TeletexString=t.PrintableString=t.NumericString=t.UniversalString=t.BmpString=t.RelativeObjectIdentifier=t.Utf8String=t.ObjectIdentifier=t.Enumerated=t.Integer=t.BitString=t.OctetString=t.Null=t.Set=t.Sequence=t.Boolean=t.EndOfContent=t.Constructed=t.Primitive=t.BaseBlock=t.ValueBlock=t.HexBlock=void 0;const r=[new Uint8Array([1])];class n{constructor(e={}){this.blockLength=(0,w.getParametersValue)(e,"blockLength",0),this.error=(0,w.getParametersValue)(e,"error",""),this.warnings=(0,w.getParametersValue)(e,"warnings",[]),this.valueBeforeDecode="valueBeforeDecode"in e?e.valueBeforeDecode.slice(0):new ArrayBuffer(0)}static blockName(){return"baseBlock"}toJSON(){return{blockName:this.constructor.blockName(),blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:(0,w.bufferToHexCodes)(this.valueBeforeDecode,0,this.valueBeforeDecode.byteLength)}}}const i=e=>class extends e{constructor(e={}){super(e),this.isHexOnly=(0,w.getParametersValue)(e,"isHexOnly",!1),this.valueHex="valueHex"in e?e.valueHex.slice(0):new ArrayBuffer(0)}static blockName(){return"hexBlock"}fromBER(e,t,r){if(!1===(0,w.checkBufferParams)(this,e,t,r))return-1;return 0===new Uint8Array(e,t,r).length?(this.warnings.push("Zero buffer length"),t):(this.valueHex=e.slice(t,t+r),this.blockLength=r,t+r)}toBER(e=!1){return!0!==this.isHexOnly?(this.error='Flag "isHexOnly" is not set, abort',new ArrayBuffer(0)):!0===e?new ArrayBuffer(this.valueHex.byteLength):this.valueHex.slice(0)}toJSON(){let e={};try{e=super.toJSON()}catch(e){}return e.blockName=this.constructor.blockName(),e.isHexOnly=this.isHexOnly,e.valueHex=(0,w.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}};t.HexBlock=i;class o extends(i(n)){constructor(e={}){super(),"idBlock"in e?(this.isHexOnly=(0,w.getParametersValue)(e.idBlock,"isHexOnly",!1),this.valueHex=(0,w.getParametersValue)(e.idBlock,"valueHex",new ArrayBuffer(0)),this.tagClass=(0,w.getParametersValue)(e.idBlock,"tagClass",-1),this.tagNumber=(0,w.getParametersValue)(e.idBlock,"tagNumber",-1),this.isConstructed=(0,w.getParametersValue)(e.idBlock,"isConstructed",!1)):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}static blockName(){return"identificationBlock"}toBER(e=!1){let t,r,n=0;switch(this.tagClass){case 1:n|=0;break;case 2:n|=64;break;case 3:n|=128;break;case 4:n|=192;break;default:return this.error="Unknown tag class",new ArrayBuffer(0)}if(this.isConstructed&&(n|=32),this.tagNumber<31&&!this.isHexOnly){if(t=new ArrayBuffer(1),r=new Uint8Array(t),!e){let e=this.tagNumber;e&=31,n|=e,r[0]=n}return t}if(!1===this.isHexOnly){const i=(0,w.utilToBase)(this.tagNumber,7),o=new Uint8Array(i),s=i.byteLength;if(t=new ArrayBuffer(s+1),r=new Uint8Array(t),r[0]=31|n,!e){for(let e=0;e<s-1;e++)r[e+1]=128|o[e];r[s]=o[s-1]}return t}if(t=new ArrayBuffer(this.valueHex.byteLength+1),r=new Uint8Array(t),r[0]=31|n,!1===e){const e=new Uint8Array(this.valueHex);for(let t=0;t<e.length-1;t++)r[t+1]=128|e[t];r[this.valueHex.byteLength]=e[e.length-1]}return t}fromBER(e,t,r){if(!1===(0,w.checkBufferParams)(this,e,t,r))return-1;const n=new Uint8Array(e,t,r);if(0===n.length)return this.error="Zero buffer length",-1;switch(192&n[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=32==(32&n[0]),this.isHexOnly=!1;const i=31&n[0];if(31!==i)this.tagNumber=i,this.blockLength=1;else{let e=1;this.valueHex=new ArrayBuffer(255);let t=255,r=new Uint8Array(this.valueHex);for(;128&n[e];){if(r[e-1]=127&n[e],e++,e>=n.length)return this.error="End of input reached before message was fully decoded",-1;if(e===t){t+=255;const e=new ArrayBuffer(t),n=new Uint8Array(e);for(let e=0;e<r.length;e++)n[e]=r[e];this.valueHex=new ArrayBuffer(t),r=new Uint8Array(this.valueHex)}}this.blockLength=e+1,r[e-1]=127&n[e];const i=new ArrayBuffer(e),o=new Uint8Array(i);for(let t=0;t<e;t++)o[t]=r[t];this.valueHex=new ArrayBuffer(e),r=new Uint8Array(this.valueHex),r.set(o),this.blockLength<=9?this.tagNumber=(0,w.utilFromBase)(r,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}toJSON(){let e={};try{e=super.toJSON()}catch(e){}return e.blockName=this.constructor.blockName(),e.tagClass=this.tagClass,e.tagNumber=this.tagNumber,e.isConstructed=this.isConstructed,e}}class s extends n{constructor(e={}){super(),"lenBlock"in e?(this.isIndefiniteForm=(0,w.getParametersValue)(e.lenBlock,"isIndefiniteForm",!1),this.longFormUsed=(0,w.getParametersValue)(e.lenBlock,"longFormUsed",!1),this.length=(0,w.getParametersValue)(e.lenBlock,"length",0)):(this.isIndefiniteForm=!1,this.longFormUsed=!1,this.length=0)}static blockName(){return"lengthBlock"}fromBER(e,t,r){if(!1===(0,w.checkBufferParams)(this,e,t,r))return-1;const n=new Uint8Array(e,t,r);if(0===n.length)return this.error="Zero buffer length",-1;if(255===n[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===n[0],!0===this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&n[0]),!1===this.longFormUsed)return this.length=n[0],this.blockLength=1,t+this.blockLength;const i=127&n[0];if(i>8)return this.error="Too big integer",-1;if(i+1>n.length)return this.error="End of input reached before message was fully decoded",-1;const o=new Uint8Array(i);for(let e=0;e<i;e++)o[e]=n[e+1];return 0===o[i-1]&&this.warnings.push("Needlessly long encoded length"),this.length=(0,w.utilFromBase)(o,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unneccesary usage of long length form"),this.blockLength=i+1,t+this.blockLength}toBER(e=!1){let t,r;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),!1===e&&(r=new Uint8Array(t),r[0]=128),t;if(!0===this.longFormUsed){const n=(0,w.utilToBase)(this.length,8);if(n.byteLength>127)return this.error="Too big length",new ArrayBuffer(0);if(t=new ArrayBuffer(n.byteLength+1),!0===e)return t;const i=new Uint8Array(n);r=new Uint8Array(t),r[0]=128|n.byteLength;for(let e=0;e<n.byteLength;e++)r[e+1]=i[e];return t}return t=new ArrayBuffer(1),!1===e&&(r=new Uint8Array(t),r[0]=this.length),t}toJSON(){let e={};try{e=super.toJSON()}catch(e){}return e.blockName=this.constructor.blockName(),e.isIndefiniteForm=this.isIndefiniteForm,e.longFormUsed=this.longFormUsed,e.length=this.length,e}}class a extends n{constructor(e={}){super(e)}static blockName(){return"valueBlock"}fromBER(e,t,r){throw TypeError('User need to make a specific function in a class which extends "ValueBlock"')}toBER(e=!1){throw TypeError('User need to make a specific function in a class which extends "ValueBlock"')}}t.ValueBlock=a;class c extends n{constructor(e={},t=a){super(e),"name"in e&&(this.name=e.name),"optional"in e&&(this.optional=e.optional),"primitiveSchema"in e&&(this.primitiveSchema=e.primitiveSchema),this.idBlock=new o(e),this.lenBlock=new s(e),this.valueBlock=new t(e)}static blockName(){return"BaseBlock"}fromBER(e,t,r){const n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}toBER(e=!1){let t;const r=this.idBlock.toBER(e),n=this.valueBlock.toBER(!0);this.lenBlock.length=n.byteLength;const i=this.lenBlock.toBER(e);let o;if(t=(0,w.utilConcatBuf)(r,i),o=!1===e?this.valueBlock.toBER(e):new ArrayBuffer(this.lenBlock.length),t=(0,w.utilConcatBuf)(t,o),!0===this.lenBlock.isIndefiniteForm){const r=new ArrayBuffer(2);if(!1===e){const e=new Uint8Array(r);e[0]=0,e[1]=0}t=(0,w.utilConcatBuf)(t,r)}return t}toJSON(){let e={};try{e=super.toJSON()}catch(e){}return e.idBlock=this.idBlock.toJSON(),e.lenBlock=this.lenBlock.toJSON(),e.valueBlock=this.valueBlock.toJSON(),"name"in this&&(e.name=this.name),"optional"in this&&(e.optional=this.optional),"primitiveSchema"in this&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}}t.BaseBlock=c;class l extends a{constructor(e={}){super(e),this.valueHex="valueHex"in e?e.valueHex.slice(0):new ArrayBuffer(0),this.isHexOnly=(0,w.getParametersValue)(e,"isHexOnly",!0)}fromBER(e,t,r){if(!1===(0,w.checkBufferParams)(this,e,t,r))return-1;const n=new Uint8Array(e,t,r);if(0===n.length)return this.warnings.push("Zero buffer length"),t;this.valueHex=new ArrayBuffer(n.length);const i=new Uint8Array(this.valueHex);for(let e=0;e<n.length;e++)i[e]=n[e];return this.blockLength=r,t+r}toBER(e=!1){return this.valueHex.slice(0)}static blockName(){return"PrimitiveValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch(e){}return e.valueHex=(0,w.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e.isHexOnly=this.isHexOnly,e}}class u extends c{constructor(e={}){super(e,l),this.idBlock.isConstructed=!1}static blockName(){return"PRIMITIVE"}}t.Primitive=u;class h extends a{constructor(e={}){super(e),this.value=(0,w.getParametersValue)(e,"value",[]),this.isIndefiniteForm=(0,w.getParametersValue)(e,"isIndefiniteForm",!1)}fromBER(e,t,r){const n=t,i=r;if(!1===(0,w.checkBufferParams)(this,e,t,r))return-1;if(0===new Uint8Array(e,t,r).length)return this.warnings.push("Zero buffer length"),t;let o=t;for(;s=this.isIndefiniteForm,a=r,(!0===s?1:a)>0;){const t=ae(e,o,r);if(-1===t.offset)return this.error=t.result.error,this.warnings.concat(t.result.warnings),-1;if(o=t.offset,this.blockLength+=t.result.blockLength,r-=t.result.blockLength,this.value.push(t.result),!0===this.isIndefiniteForm&&t.result.constructor.blockName()===p.blockName())break}var s,a;return!0===this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.blockName()===p.blockName()?this.value.pop():this.warnings.push("No EndOfContent block encoded")),this.valueBeforeDecode=e.slice(n,n+i),o}toBER(e=!1){let t=new ArrayBuffer(0);for(let r=0;r<this.value.length;r++){const n=this.value[r].toBER(e);t=(0,w.utilConcatBuf)(t,n)}return t}static blockName(){return"ConstructedValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch(e){}e.isIndefiniteForm=this.isIndefiniteForm,e.value=[];for(let t=0;t<this.value.length;t++)e.value.push(this.value[t].toJSON());return e}}class f extends c{constructor(e={}){super(e,h),this.idBlock.isConstructed=!0}static blockName(){return"CONSTRUCTED"}fromBER(e,t,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}}t.Constructed=f;class y extends a{constructor(e={}){super(e)}fromBER(e,t,r){return t}toBER(e=!1){return new ArrayBuffer(0)}static blockName(){return"EndOfContentValueBlock"}}class p extends c{constructor(e={}){super(e,y),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}static blockName(){return"EndOfContent"}}t.EndOfContent=p;class g extends a{constructor(e={}){if(super(e),this.value=(0,w.getParametersValue)(e,"value",!1),this.isHexOnly=(0,w.getParametersValue)(e,"isHexOnly",!1),"valueHex"in e)this.valueHex=e.valueHex.slice(0);else if(this.valueHex=new ArrayBuffer(1),!0===this.value){new Uint8Array(this.valueHex)[0]=255}}fromBER(e,t,r){if(!1===(0,w.checkBufferParams)(this,e,t,r))return-1;const n=new Uint8Array(e,t,r);r>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,this.valueHex=new ArrayBuffer(n.length);const i=new Uint8Array(this.valueHex);for(let e=0;e<n.length;e++)i[e]=n[e];return 0!==w.utilDecodeTC.call(this)?this.value=!0:this.value=!1,this.blockLength=r,t+r}toBER(e=!1){return this.valueHex}static blockName(){return"BooleanValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch(e){}return e.value=this.value,e.isHexOnly=this.isHexOnly,e.valueHex=(0,w.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}class d extends c{constructor(e={}){super(e,g),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}static blockName(){return"Boolean"}}t.Boolean=d;class m extends f{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}static blockName(){return"Sequence"}}t.Sequence=m;class v extends f{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}static blockName(){return"Set"}}t.Set=v;class k extends c{constructor(e={}){super(e,n),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}static blockName(){return"Null"}fromBER(e,t,r){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=r,t+r>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+r}toBER(e=!1){const t=new ArrayBuffer(2);if(!0===e)return t;const r=new Uint8Array(t);return r[0]=5,r[1]=0,t}}t.Null=k;class b extends(i(h)){constructor(e={}){super(e),this.isConstructed=(0,w.getParametersValue)(e,"isConstructed",!1)}fromBER(e,t,r){let n=0;if(!0===this.isConstructed){if(this.isHexOnly=!1,n=h.prototype.fromBER.call(this,e,t,r),-1===n)return n;for(let e=0;e<this.value.length;e++){const t=this.value[e].constructor.blockName();if(t===p.blockName()){if(!0===this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(t!==B.blockName())return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,n=super.fromBER(e,t,r),this.blockLength=r;return n}toBER(e=!1){if(!0===this.isConstructed)return h.prototype.toBER.call(this,e);let t=new ArrayBuffer(this.valueHex.byteLength);return!0===e||0===this.valueHex.byteLength||(t=this.valueHex.slice(0)),t}static blockName(){return"OctetStringValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch(e){}return e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=(0,w.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}class B extends c{constructor(e={}){super(e,b),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,t,r){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===r?(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),t):super.fromBER(e,t,r)}static blockName(){return"OctetString"}isEqual(e){return e instanceof B!=!1&&JSON.stringify(this)===JSON.stringify(e)}}t.OctetString=B;class A extends(i(h)){constructor(e={}){super(e),this.unusedBits=(0,w.getParametersValue)(e,"unusedBits",0),this.isConstructed=(0,w.getParametersValue)(e,"isConstructed",!1),this.blockLength=this.valueHex.byteLength}fromBER(e,t,r){if(0===r)return t;let n=-1;if(!0===this.isConstructed){if(n=h.prototype.fromBER.call(this,e,t,r),-1===n)return n;for(let e=0;e<this.value.length;e++){const t=this.value[e].constructor.blockName();if(t===p.blockName()){if(!0===this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(t!==S.blockName())return this.error="BIT STRING may consists of BIT STRINGs only",-1;if(this.unusedBits>0&&this.value[e].valueBlock.unusedBits>0)return this.error='Usign of "unused bits" inside constructive BIT STRING allowed for least one only',-1;if(this.unusedBits=this.value[e].valueBlock.unusedBits,this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1}return n}if(!1===(0,w.checkBufferParams)(this,e,t,r))return-1;const i=new Uint8Array(e,t,r);if(this.unusedBits=i[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;this.valueHex=new ArrayBuffer(i.length-1);const o=new Uint8Array(this.valueHex);for(let e=0;e<r-1;e++)o[e]=i[e+1];return this.blockLength=i.length,t+r}toBER(e=!1){if(!0===this.isConstructed)return h.prototype.toBER.call(this,e);if(!0===e)return new ArrayBuffer(this.valueHex.byteLength+1);if(0===this.valueHex.byteLength)return new ArrayBuffer(0);const t=new Uint8Array(this.valueHex),r=new ArrayBuffer(this.valueHex.byteLength+1),n=new Uint8Array(r);n[0]=this.unusedBits;for(let e=0;e<this.valueHex.byteLength;e++)n[e+1]=t[e];return r}static blockName(){return"BitStringValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch(e){}return e.unusedBits=this.unusedBits,e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=(0,w.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}class S extends c{constructor(e={}){super(e,A),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}static blockName(){return"BitString"}fromBER(e,t,r){return 0===r?t:(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,t,r))}isEqual(e){return e instanceof S!=!1&&JSON.stringify(this)===JSON.stringify(e)}}t.BitString=S;class x extends(i(a)){constructor(e={}){super(e),"value"in e&&(this.valueDec=e.value)}set valueHex(e){this._valueHex=e.slice(0),e.byteLength>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,e.byteLength>0&&(this._valueDec=w.utilDecodeTC.call(this)))}get valueHex(){return this._valueHex}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this._valueHex=(0,w.utilEncodeTC)(e)}get valueDec(){return this._valueDec}fromDER(e,t,r,n=0){const i=this.fromBER(e,t,r);if(-1===i)return i;const o=new Uint8Array(this._valueHex);if(0===o[0]&&0!=(128&o[1])){const e=new ArrayBuffer(this._valueHex.byteLength-1);new Uint8Array(e).set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=e.slice(0)}else if(0!==n&&this._valueHex.byteLength<n){n-this._valueHex.byteLength>1&&(n=this._valueHex.byteLength+1);const e=new ArrayBuffer(n);new Uint8Array(e).set(o,n-this._valueHex.byteLength),this._valueHex=e.slice(0)}return i}toDER(e=!1){const t=new Uint8Array(this._valueHex);switch(!0){case 0!=(128&t[0]):{const e=new ArrayBuffer(this._valueHex.byteLength+1),r=new Uint8Array(e);r[0]=0,r.set(t,1),this._valueHex=e.slice(0)}break;case 0===t[0]&&0==(128&t[1]):{const e=new ArrayBuffer(this._valueHex.byteLength-1);new Uint8Array(e).set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=e.slice(0)}}return this.toBER(e)}fromBER(e,t,r){const n=super.fromBER(e,t,r);return-1===n?n:(this.blockLength=r,t+r)}toBER(e=!1){return this.valueHex.slice(0)}static blockName(){return"IntegerValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch(e){}return e.valueDec=this.valueDec,e}toString(){function e(e,t){const r=new Uint8Array([0]);let n=new Uint8Array(e),i=new Uint8Array(t),o=n.slice(0);const s=o.length-1;let a=i.slice(0);const c=a.length-1;let l=0;let u=0;for(let e=c<s?s:c;e>=0;e--,u++){switch(!0){case u<a.length:l=o[s-u]+a[c-u]+r[0];break;default:l=o[s-u]+r[0]}switch(r[0]=l/10,!0){case u>=o.length:o=(0,w.utilConcatView)(new Uint8Array([l%10]),o);break;default:o[s-u]=l%10}}return r[0]>0&&(o=(0,w.utilConcatView)(r,o)),o.slice(0)}function t(e){if(e>=r.length)for(let t=r.length;t<=e;t++){const e=new Uint8Array([0]);let n=r[t-1].slice(0);for(let t=n.length-1;t>=0;t--){const r=new Uint8Array([(n[t]<<1)+e[0]]);e[0]=r[0]/10,n[t]=r[0]%10}e[0]>0&&(n=(0,w.utilConcatView)(e,n)),r.push(n)}return r[e]}function n(e,t){let r=0,n=new Uint8Array(e),i=new Uint8Array(t),o=n.slice(0);const s=o.length-1;let a=i.slice(0);const c=a.length-1;let l,u=0;for(let e=c;e>=0;e--,u++)switch(l=o[s-u]-a[c-u]-r,!0){case l<0:r=1,o[s-u]=l+10;break;default:r=0,o[s-u]=l}if(r>0)for(let e=s-c+1;e>=0;e--,u++){if(l=o[s-u]-r,!(l<0)){r=0,o[s-u]=l;break}r=1,o[s-u]=l+10}return o.slice()}const i=8*this._valueHex.byteLength-1;let o,s=new Uint8Array(8*this._valueHex.byteLength/3),a=0;const c=new Uint8Array(this._valueHex);let l="",u=!1;for(let r=this._valueHex.byteLength-1;r>=0;r--){o=c[r];for(let r=0;r<8;r++){if(1==(1&o))switch(a){case i:s=n(t(a),s),l="-";break;default:s=e(s,t(a))}a++,o>>=1}}for(let e=0;e<s.length;e++)s[e]&&(u=!0),u&&(l+="0123456789".charAt(s[e]));return!1===u&&(l+="0123456789".charAt(0)),l}}class C extends c{constructor(e={}){super(e,x),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}static blockName(){return"Integer"}isEqual(e){return e instanceof C?this.valueBlock.isHexOnly&&e.valueBlock.isHexOnly?(0,w.isEqualBuffer)(this.valueBlock.valueHex,e.valueBlock.valueHex):this.valueBlock.isHexOnly===e.valueBlock.isHexOnly&&this.valueBlock.valueDec===e.valueBlock.valueDec:e instanceof ArrayBuffer&&(0,w.isEqualBuffer)(this.valueBlock.valueHex,e)}convertToDER(){const e=new C({valueHex:this.valueBlock.valueHex});return e.valueBlock.toDER(),e}convertFromDER(){const e=this.valueBlock.valueHex.byteLength%2?this.valueBlock.valueHex.byteLength+1:this.valueBlock.valueHex.byteLength,t=new C({valueHex:this.valueBlock.valueHex});return t.valueBlock.fromDER(t.valueBlock.valueHex,0,t.valueBlock.valueHex.byteLength,e),t}}t.Integer=C;class N extends C{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}static blockName(){return"Enumerated"}}t.Enumerated=N;class E extends(i(n)){constructor(e={}){super(e),this.valueDec=(0,w.getParametersValue)(e,"valueDec",-1),this.isFirstSid=(0,w.getParametersValue)(e,"isFirstSid",!1)}static blockName(){return"sidBlock"}fromBER(e,t,r){if(0===r)return t;if(!1===(0,w.checkBufferParams)(this,e,t,r))return-1;const n=new Uint8Array(e,t,r);this.valueHex=new ArrayBuffer(r);let i=new Uint8Array(this.valueHex);for(let e=0;e<r&&(i[e]=127&n[e],this.blockLength++,0!=(128&n[e]));e++);const o=new ArrayBuffer(this.blockLength),s=new Uint8Array(o);for(let e=0;e<this.blockLength;e++)s[e]=i[e];return this.valueHex=o.slice(0),i=new Uint8Array(this.valueHex),0!=(128&n[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===i[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=(0,w.utilFromBase)(i,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}toBER(e=!1){let t,r;if(this.isHexOnly){if(!0===e)return new ArrayBuffer(this.valueHex.byteLength);const n=new Uint8Array(this.valueHex);t=new ArrayBuffer(this.blockLength),r=new Uint8Array(t);for(let e=0;e<this.blockLength-1;e++)r[e]=128|n[e];return r[this.blockLength-1]=n[this.blockLength-1],t}const n=(0,w.utilToBase)(this.valueDec,7);if(0===n.byteLength)return this.error="Error during encoding SID value",new ArrayBuffer(0);if(t=new ArrayBuffer(n.byteLength),!1===e){const e=new Uint8Array(n);r=new Uint8Array(t);for(let t=0;t<n.byteLength-1;t++)r[t]=128|e[t];r[n.byteLength-1]=e[n.byteLength-1]}return t}toString(){let e="";if(!0===this.isHexOnly)e=(0,w.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength);else if(this.isFirstSid){let t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}toJSON(){let e={};try{e=super.toJSON()}catch(e){}return e.valueDec=this.valueDec,e.isFirstSid=this.isFirstSid,e}}class K extends a{constructor(e={}){super(e),this.fromString((0,w.getParametersValue)(e,"value",""))}fromBER(e,t,r){let n=t;for(;r>0;){const t=new E;if(n=t.fromBER(e,n,r),-1===n)return this.blockLength=0,this.error=t.error,n;0===this.value.length&&(t.isFirstSid=!0),this.blockLength+=t.blockLength,r-=t.blockLength,this.value.push(t)}return n}toBER(e=!1){let t=new ArrayBuffer(0);for(let r=0;r<this.value.length;r++){const n=this.value[r].toBER(e);if(0===n.byteLength)return this.error=this.value[r].error,new ArrayBuffer(0);t=(0,w.utilConcatBuf)(t,n)}return t}fromString(e){this.value=[];let t=0,r=0,n="",i=!1;do{if(r=e.indexOf(".",t),n=-1===r?e.substr(t):e.substr(t,r-t),t=r+1,i){const e=this.value[0];let t=0;switch(e.valueDec){case 0:break;case 1:t=40;break;case 2:t=80;break;default:return this.value=[],!1}const r=parseInt(n,10);if(isNaN(r))return!0;e.valueDec=r+t,i=!1}else{const e=new E;if(e.valueDec=parseInt(n,10),isNaN(e.valueDec))return!0;0===this.value.length&&(e.isFirstSid=!0,i=!0),this.value.push(e)}}while(-1!==r);return!0}toString(){let e="",t=!1;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let n=this.value[r].toString();0!==r&&(e+="."),t?(n=`{${n}}`,this.value[r].isFirstSid?e=`2.{${n} - 80}`:e+=n):e+=n}return e}static blockName(){return"ObjectIdentifierValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch(e){}e.value=this.toString(),e.sidArray=[];for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}class U extends c{constructor(e={}){super(e,K),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}static blockName(){return"ObjectIdentifier"}}t.ObjectIdentifier=U;class O extends(i(n)){constructor(e={}){super(e),this.isHexOnly=!0,this.value=""}static blockName(){return"Utf8StringValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch(e){}return e.value=this.value,e}}class H extends c{constructor(e={}){super(e,O),"value"in e&&this.fromString(e.value),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}static blockName(){return"Utf8String"}fromBER(e,t,r){const n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e));try{this.valueBlock.value=decodeURIComponent(escape(this.valueBlock.value))}catch(e){this.warnings.push(`Error during "decodeURIComponent": ${e}, using raw string`)}}fromString(e){const t=unescape(encodeURIComponent(e)),r=t.length;this.valueBlock.valueHex=new ArrayBuffer(r);const n=new Uint8Array(this.valueBlock.valueHex);for(let e=0;e<r;e++)n[e]=t.charCodeAt(e);this.valueBlock.value=e}}t.Utf8String=H;class L extends(i(n)){constructor(e={}){super(e),this.valueDec=(0,w.getParametersValue)(e,"valueDec",-1)}static blockName(){return"relativeSidBlock"}fromBER(e,t,r){if(0===r)return t;if(!1===(0,w.checkBufferParams)(this,e,t,r))return-1;const n=new Uint8Array(e,t,r);this.valueHex=new ArrayBuffer(r);let i=new Uint8Array(this.valueHex);for(let e=0;e<r&&(i[e]=127&n[e],this.blockLength++,0!=(128&n[e]));e++);const o=new ArrayBuffer(this.blockLength),s=new Uint8Array(o);for(let e=0;e<this.blockLength;e++)s[e]=i[e];return this.valueHex=o.slice(0),i=new Uint8Array(this.valueHex),0!=(128&n[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===i[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=(0,w.utilFromBase)(i,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}toBER(e=!1){let t,r;if(this.isHexOnly){if(!0===e)return new ArrayBuffer(this.valueHex.byteLength);const n=new Uint8Array(this.valueHex);t=new ArrayBuffer(this.blockLength),r=new Uint8Array(t);for(let e=0;e<this.blockLength-1;e++)r[e]=128|n[e];return r[this.blockLength-1]=n[this.blockLength-1],t}const n=(0,w.utilToBase)(this.valueDec,7);if(0===n.byteLength)return this.error="Error during encoding SID value",new ArrayBuffer(0);if(t=new ArrayBuffer(n.byteLength),!1===e){const e=new Uint8Array(n);r=new Uint8Array(t);for(let t=0;t<n.byteLength-1;t++)r[t]=128|e[t];r[n.byteLength-1]=e[n.byteLength-1]}return t}toString(){let e="";return e=!0===this.isHexOnly?(0,w.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength):this.valueDec.toString(),e}toJSON(){let e={};try{e=super.toJSON()}catch(e){}return e.valueDec=this.valueDec,e}}class I extends a{constructor(e={}){super(e),this.fromString((0,w.getParametersValue)(e,"value",""))}fromBER(e,t,r){let n=t;for(;r>0;){const t=new L;if(n=t.fromBER(e,n,r),-1===n)return this.blockLength=0,this.error=t.error,n;this.blockLength+=t.blockLength,r-=t.blockLength,this.value.push(t)}return n}toBER(e=!1){let t=new ArrayBuffer(0);for(let r=0;r<this.value.length;r++){const n=this.value[r].toBER(e);if(0===n.byteLength)return this.error=this.value[r].error,new ArrayBuffer(0);t=(0,w.utilConcatBuf)(t,n)}return t}fromString(e){this.value=[];let t=0,r=0,n="";do{r=e.indexOf(".",t),n=-1===r?e.substr(t):e.substr(t,r-t),t=r+1;const i=new L;if(i.valueDec=parseInt(n,10),isNaN(i.valueDec))return!0;this.value.push(i)}while(-1!==r);return!0}toString(){let e="",t=!1;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let n=this.value[r].toString();0!==r&&(e+="."),t?(n=`{${n}}`,e+=n):e+=n}return e}static blockName(){return"RelativeObjectIdentifierValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch(e){}e.value=this.toString(),e.sidArray=[];for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}class P extends c{constructor(e={}){super(e,I),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}static blockName(){return"RelativeObjectIdentifier"}}t.RelativeObjectIdentifier=P;class T extends(i(n)){constructor(e={}){super(e),this.isHexOnly=!0,this.value=""}static blockName(){return"BmpStringValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch(e){}return e.value=this.value,e}}class R extends c{constructor(e={}){super(e,T),"value"in e&&this.fromString(e.value),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}static blockName(){return"BmpString"}fromBER(e,t,r){const n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}fromBuffer(e){const t=e.slice(0),r=new Uint8Array(t);for(let e=0;e<r.length;e+=2){const t=r[e];r[e]=r[e+1],r[e+1]=t}this.valueBlock.value=String.fromCharCode.apply(null,new Uint16Array(t))}fromString(e){const t=e.length;this.valueBlock.valueHex=new ArrayBuffer(2*t);const r=new Uint8Array(this.valueBlock.valueHex);for(let n=0;n<t;n++){const t=(0,w.utilToBase)(e.charCodeAt(n),8),i=new Uint8Array(t);if(i.length>2)continue;const o=2-i.length;for(let e=i.length-1;e>=0;e--)r[2*n+e+o]=i[e]}this.valueBlock.value=e}}t.BmpString=R;class D extends(i(n)){constructor(e={}){super(e),this.isHexOnly=!0,this.value=""}static blockName(){return"UniversalStringValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch(e){}return e.value=this.value,e}}class _ extends c{constructor(e={}){super(e,D),"value"in e&&this.fromString(e.value),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}static blockName(){return"UniversalString"}fromBER(e,t,r){const n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}fromBuffer(e){const t=e.slice(0),r=new Uint8Array(t);for(let e=0;e<r.length;e+=4)r[e]=r[e+3],r[e+1]=r[e+2],r[e+2]=0,r[e+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){const t=e.length;this.valueBlock.valueHex=new ArrayBuffer(4*t);const r=new Uint8Array(this.valueBlock.valueHex);for(let n=0;n<t;n++){const t=(0,w.utilToBase)(e.charCodeAt(n),8),i=new Uint8Array(t);if(i.length>4)continue;const o=4-i.length;for(let e=i.length-1;e>=0;e--)r[4*n+e+o]=i[e]}this.valueBlock.value=e}}t.UniversalString=_;class j extends(i(n)){constructor(e={}){super(e),this.value="",this.isHexOnly=!0}static blockName(){return"SimpleStringValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch(e){}return e.value=this.value,e}}class V extends c{constructor(e={}){super(e,j),"value"in e&&this.fromString(e.value)}static blockName(){return"SIMPLESTRING"}fromBER(e,t,r){const n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e))}fromString(e){const t=e.length;this.valueBlock.valueHex=new ArrayBuffer(t);const r=new Uint8Array(this.valueBlock.valueHex);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);this.valueBlock.value=e}}class J extends V{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}static blockName(){return"NumericString"}}t.NumericString=J;class M extends V{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}static blockName(){return"PrintableString"}}t.PrintableString=M;class F extends V{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}static blockName(){return"TeletexString"}}t.TeletexString=F;class z extends V{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}static blockName(){return"VideotexString"}}t.VideotexString=z;class $ extends V{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}static blockName(){return"IA5String"}}t.IA5String=$;class G extends V{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}static blockName(){return"GraphicString"}}t.GraphicString=G;class q extends V{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}static blockName(){return"VisibleString"}}t.VisibleString=q;class W extends V{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}static blockName(){return"GeneralString"}}t.GeneralString=W;class Z extends V{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}static blockName(){return"CharacterString"}}t.CharacterString=Z;class X extends q{constructor(e={}){if(super(e),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,"value"in e){this.fromString(e.value),this.valueBlock.valueHex=new ArrayBuffer(e.value.length);const t=new Uint8Array(this.valueBlock.valueHex);for(let r=0;r<e.value.length;r++)t[r]=e.value.charCodeAt(r)}"valueDate"in e&&(this.fromDate(e.valueDate),this.valueBlock.valueHex=this.toBuffer()),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBER(e,t,r){const n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}toBuffer(){const e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return t}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi.exec(e);if(null===t)return void(this.error="Wrong input string for convertion");const r=parseInt(t[1],10);this.year=r>=50?1900+r:2e3+r,this.month=parseInt(t[2],10),this.day=parseInt(t[3],10),this.hour=parseInt(t[4],10),this.minute=parseInt(t[5],10),this.second=parseInt(t[6],10)}toString(){const e=new Array(7);return e[0]=(0,w.padNumber)(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=(0,w.padNumber)(this.month,2),e[2]=(0,w.padNumber)(this.day,2),e[3]=(0,w.padNumber)(this.hour,2),e[4]=(0,w.padNumber)(this.minute,2),e[5]=(0,w.padNumber)(this.second,2),e[6]="Z",e.join("")}static blockName(){return"UTCTime"}toJSON(){let e={};try{e=super.toJSON()}catch(e){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e}}t.UTCTime=X;class Y extends q{constructor(e={}){if(super(e),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,this.millisecond=0,"value"in e){this.fromString(e.value),this.valueBlock.valueHex=new ArrayBuffer(e.value.length);const t=new Uint8Array(this.valueBlock.valueHex);for(let r=0;r<e.value.length;r++)t[r]=e.value.charCodeAt(r)}"valueDate"in e&&(this.fromDate(e.valueDate),this.valueBlock.valueHex=this.toBuffer()),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromBER(e,t,r){const n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}toBuffer(){const e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return t}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let t,r=!1,n="",i="",o=0,s=0,a=0;if("Z"===e[e.length-1])n=e.substr(0,e.length-1),r=!0;else{const t=new Number(e[e.length-1]);if(isNaN(t.valueOf()))throw new Error("Wrong input string for convertion");n=e}if(r){if(-1!==n.indexOf("+"))throw new Error("Wrong input string for convertion");if(-1!==n.indexOf("-"))throw new Error("Wrong input string for convertion")}else{let e=1,t=n.indexOf("+"),r="";if(-1===t&&(t=n.indexOf("-"),e=-1),-1!==t){if(r=n.substr(t+1),n=n.substr(0,t),2!==r.length&&4!==r.length)throw new Error("Wrong input string for convertion");let i=new Number(r.substr(0,2));if(isNaN(i.valueOf()))throw new Error("Wrong input string for convertion");if(s=e*i,4===r.length){if(i=new Number(r.substr(2,2)),isNaN(i.valueOf()))throw new Error("Wrong input string for convertion");a=e*i}}}let c=n.indexOf(".");if(-1===c&&(c=n.indexOf(",")),-1!==c){const e=new Number("0"+n.substr(c));if(isNaN(e.valueOf()))throw new Error("Wrong input string for convertion");o=e.valueOf(),i=n.substr(0,c)}else i=n;switch(!0){case 8===i.length:if(t=/(\d{4})(\d{2})(\d{2})/gi,-1!==c)throw new Error("Wrong input string for convertion");break;case 10===i.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,-1!==c){let e=60*o;this.minute=Math.floor(e),e=60*(e-this.minute),this.second=Math.floor(e),e=1e3*(e-this.second),this.millisecond=Math.floor(e)}break;case 12===i.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==c){let e=60*o;this.second=Math.floor(e),e=1e3*(e-this.second),this.millisecond=Math.floor(e)}break;case 14===i.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==c){const e=1e3*o;this.millisecond=Math.floor(e)}break;default:throw new Error("Wrong input string for convertion")}const l=t.exec(i);if(null===l)throw new Error("Wrong input string for convertion");for(let e=1;e<l.length;e++)switch(e){case 1:this.year=parseInt(l[e],10);break;case 2:this.month=parseInt(l[e],10);break;case 3:this.day=parseInt(l[e],10);break;case 4:this.hour=parseInt(l[e],10)+s;break;case 5:this.minute=parseInt(l[e],10)+a;break;case 6:this.second=parseInt(l[e],10);break;default:throw new Error("Wrong input string for convertion")}if(!1===r){const e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=e.getUTCFullYear(),this.month=e.getUTCMonth(),this.day=e.getUTCDay(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}}toString(){const e=[];return e.push((0,w.padNumber)(this.year,4)),e.push((0,w.padNumber)(this.month,2)),e.push((0,w.padNumber)(this.day,2)),e.push((0,w.padNumber)(this.hour,2)),e.push((0,w.padNumber)(this.minute,2)),e.push((0,w.padNumber)(this.second,2)),0!==this.millisecond&&(e.push("."),e.push((0,w.padNumber)(this.millisecond,3))),e.push("Z"),e.join("")}static blockName(){return"GeneralizedTime"}toJSON(){let e={};try{e=super.toJSON()}catch(e){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e.millisecond=this.millisecond,e}}t.GeneralizedTime=Y;class Q extends H{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}static blockName(){return"DATE"}}t.DATE=Q;class ee extends H{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}static blockName(){return"TimeOfDay"}}t.TimeOfDay=ee;class te extends H{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}static blockName(){return"DateTime"}}t.DateTime=te;class re extends H{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}static blockName(){return"Duration"}}t.Duration=re;class ne extends H{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}static blockName(){return"TIME"}}t.TIME=ne;class ie{constructor(e={}){this.value=(0,w.getParametersValue)(e,"value",[]),this.optional=(0,w.getParametersValue)(e,"optional",!1)}}t.Choice=ie;class oe{constructor(e={}){this.name=(0,w.getParametersValue)(e,"name",""),this.optional=(0,w.getParametersValue)(e,"optional",!1)}}t.Any=oe;class se{constructor(e={}){this.name=(0,w.getParametersValue)(e,"name",""),this.optional=(0,w.getParametersValue)(e,"optional",!1),this.value=(0,w.getParametersValue)(e,"value",new oe),this.local=(0,w.getParametersValue)(e,"local",!1)}}t.Repeated=se;function ae(e,t,r){const i=t;let o=new c({},Object);const s=new n;if(!1===(0,w.checkBufferParams)(s,e,t,r))return o.error=s.error,{offset:-1,result:o};if(0===new Uint8Array(e,t,r).length)return this.error="Zero buffer length",{offset:-1,result:o};let a=o.idBlock.fromBER(e,t,r);if(o.warnings.concat(o.idBlock.warnings),-1===a)return o.error=o.idBlock.error,{offset:-1,result:o};if(t=a,r-=o.idBlock.blockLength,a=o.lenBlock.fromBER(e,t,r),o.warnings.concat(o.lenBlock.warnings),-1===a)return o.error=o.lenBlock.error,{offset:-1,result:o};if(t=a,r-=o.lenBlock.blockLength,!1===o.idBlock.isConstructed&&!0===o.lenBlock.isIndefiniteForm)return o.error="Indefinite length form used for primitive encoding form",{offset:-1,result:o};let l=c;switch(o.idBlock.tagClass){case 1:if(o.idBlock.tagNumber>=37&&!1===o.idBlock.isHexOnly)return o.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:o};switch(o.idBlock.tagNumber){case 0:if(!0===o.idBlock.isConstructed&&o.lenBlock.length>0)return o.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:o};l=p;break;case 1:l=d;break;case 2:l=C;break;case 3:l=S;break;case 4:l=B;break;case 5:l=k;break;case 6:l=U;break;case 10:l=N;break;case 12:l=H;break;case 13:l=P;break;case 14:l=ne;break;case 15:return o.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:o};case 16:l=m;break;case 17:l=v;break;case 18:l=J;break;case 19:l=M;break;case 20:l=F;break;case 21:l=z;break;case 22:l=$;break;case 23:l=X;break;case 24:l=Y;break;case 25:l=G;break;case 26:l=q;break;case 27:l=W;break;case 28:l=_;break;case 29:l=Z;break;case 30:l=R;break;case 31:l=Q;break;case 32:l=ee;break;case 33:l=te;break;case 34:l=re;break;default:{let n;n=!0===o.idBlock.isConstructed?new f:new u,n.idBlock=o.idBlock,n.lenBlock=o.lenBlock,n.warnings=o.warnings,o=n,a=o.fromBER(e,t,r)}}break;case 2:case 3:case 4:default:l=!0===o.idBlock.isConstructed?f:u}return o=function(e,t){if(e instanceof t)return e;const r=new t;return r.idBlock=e.idBlock,r.lenBlock=e.lenBlock,r.warnings=e.warnings,r.valueBeforeDecode=e.valueBeforeDecode.slice(0),r}(o,l),a=o.fromBER(e,t,!0===o.lenBlock.isIndefiniteForm?r:o.lenBlock.length),o.valueBeforeDecode=e.slice(i,i+o.blockLength),{offset:a,result:o}}function ce(e){if(0===e.byteLength){const e=new c({},Object);return e.error="Input buffer has zero length",{offset:-1,result:e}}return ae(e,0,e.byteLength)}function le(e,t,r){if(r instanceof ie){for(let n=0;n<r.value.length;n++){if(!0===le(e,t,r.value[n]).verified)return{verified:!0,result:e}}{const e={verified:!1,result:{error:"Wrong values for Choice type"}};return r.hasOwnProperty("name")&&(e.name=r.name),e}}if(r instanceof oe)return r.hasOwnProperty("name")&&(e[r.name]=t),{verified:!0,result:e};if(e instanceof Object==!1)return{verified:!1,result:{error:"Wrong root object"}};if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(r instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("idBlock"in r==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("fromBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("toBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const n=r.idBlock.toBER(!1);if(0===n.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(-1===r.idBlock.fromBER(n,0,n.byteLength))return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===r.idBlock.hasOwnProperty("tagClass"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagClass!==t.idBlock.tagClass)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("tagNumber"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagNumber!==t.idBlock.tagNumber)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("isConstructed"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isConstructed!==t.idBlock.isConstructed)return{verified:!1,result:e};if("isHexOnly"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly)return{verified:!1,result:e};if(!0===r.idBlock.isHexOnly){if("valueHex"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const n=new Uint8Array(r.idBlock.valueHex),i=new Uint8Array(t.idBlock.valueHex);if(n.length!==i.length)return{verified:!1,result:e};for(let t=0;t<n.length;t++)if(n[t]!==i[1])return{verified:!1,result:e}}if(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(e[r.name]=t)),!0===r.idBlock.isConstructed){let n=0,i={verified:!1},o=r.valueBlock.value.length;if(o>0&&r.valueBlock.value[0]instanceof se&&(o=t.valueBlock.value.length),0===o)return{verified:!0,result:e};if(0===t.valueBlock.value.length&&0!==r.valueBlock.value.length){let t=!0;for(let e=0;e<r.valueBlock.value.length;e++)t=t&&(r.valueBlock.value[e].optional||!1);return!0===t?{verified:!0,result:e}:(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),e.error="Inconsistent object length",{verified:!1,result:e})}for(let s=0;s<o;s++)if(s-n>=t.valueBlock.value.length){if(!1===r.valueBlock.value[s].optional){const t={verified:!1,result:e};return e.error="Inconsistent length between ASN.1 data and schema",r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],t.name=r.name)),t}}else if(r.valueBlock.value[0]instanceof se){if(i=le(e,t.valueBlock.value[s],r.valueBlock.value[0].value),!1===i.verified){if(!0!==r.valueBlock.value[0].optional)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),i;n++}if("name"in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){let n={};n="local"in r.valueBlock.value[0]&&!0===r.valueBlock.value[0].local?t:e,void 0===n[r.valueBlock.value[0].name]&&(n[r.valueBlock.value[0].name]=[]),n[r.valueBlock.value[0].name].push(t.valueBlock.value[s])}}else if(i=le(e,t.valueBlock.value[s-n],r.valueBlock.value[s]),!1===i.verified){if(!0!==r.valueBlock.value[s].optional)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),i;n++}if(!1===i.verified){const t={verified:!1,result:e};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],t.name=r.name)),t}return{verified:!0,result:e}}if("primitiveSchema"in r&&"valueHex"in t.valueBlock){const n=ce(t.valueBlock.valueHex);if(-1===n.offset){const t={verified:!1,result:n.result};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],t.name=r.name)),t}return le(e,n.result,r.primitiveSchema)}return{verified:!0,result:e}}t.RawData=class{constructor(e={}){this.data=(0,w.getParametersValue)(e,"data",new ArrayBuffer(0))}fromBER(e,t,r){return this.data=e.slice(t,r),t+r}toBER(e=!1){return this.data}}})),b=(v=k)&&v.__esModule&&Object.prototype.hasOwnProperty.call(v,"default")?v.default:v,B=k.fromBER,A=k.compareSchema,S=k.verifySchema,x=k.fromJSON,C=k.RawData,N=k.Repeated,E=k.Any,K=k.Choice,U=k.TIME,O=k.Duration,H=k.DateTime,L=k.TimeOfDay,I=k.DATE,P=k.GeneralizedTime,T=k.UTCTime,R=k.CharacterString,D=k.GeneralString,_=k.VisibleString,j=k.GraphicString,V=k.IA5String,J=k.VideotexString,M=k.TeletexString,F=k.PrintableString,z=k.NumericString,$=k.UniversalString,G=k.BmpString,q=k.RelativeObjectIdentifier,W=k.Utf8String,Z=k.ObjectIdentifier,X=k.Enumerated,Y=k.Integer,Q=k.BitString,ee=k.OctetString,te=k.Null,re=k.Set,ne=k.Sequence,ie=k.Boolean,oe=k.EndOfContent,se=k.Constructed,ae=k.Primitive,ce=k.BaseBlock,le=k.ValueBlock,ue=k.HexBlock,he=Object.freeze({__proto__:null,default:b,__moduleExports:k,fromBER:B,compareSchema:A,verifySchema:S,fromJSON:x,RawData:C,Repeated:N,Any:E,Choice:K,TIME:U,Duration:O,DateTime:H,TimeOfDay:L,DATE:I,GeneralizedTime:P,UTCTime:T,CharacterString:R,GeneralString:D,VisibleString:_,GraphicString:j,IA5String:V,VideotexString:J,TeletexString:M,PrintableString:F,NumericString:z,UniversalString:$,BmpString:G,RelativeObjectIdentifier:q,Utf8String:W,ObjectIdentifier:Z,Enumerated:X,Integer:Y,BitString:Q,OctetString:ee,Null:te,Set:re,Sequence:ne,Boolean:ie,EndOfContent:oe,Constructed:se,Primitive:ae,BaseBlock:ce,ValueBlock:le,HexBlock:ue});const fe={fromASN:e=>e instanceof te?null:e.valueBeforeDecode,toASN:e=>{if(null===e)return new te;const t=B(e);if(t.result.error)throw new Error(t.result.error);return t.result}},ye={fromASN:e=>!e.valueBlock.valueDec&&e.valueBlock.valueHex.byteLength>0?e.valueBlock.toString():e.valueBlock.valueDec,toASN:e=>new Y({value:e})},pe={fromASN:e=>e.valueBlock.valueDec,toASN:e=>new X({value:e})},ge={fromASN:e=>e.valueBlock.valueHex,toASN:e=>new Y({valueHex:e})},de={fromASN:e=>e.valueBlock.valueHex,toASN:e=>new Q({valueHex:e})},me={fromASN:e=>e.valueBlock.toString(),toASN:e=>new Z({value:e})},ve={fromASN:e=>e.valueBlock.value,toASN:e=>new ie({value:e})},we={fromASN:e=>e.valueBlock.valueHex,toASN:e=>new ee({valueHex:e})};function ke(e){return{fromASN:e=>e.valueBlock.value,toASN:t=>new e({value:t})}}const be=ke(W),Be=ke(G),Ae=ke($),Se=ke(z),xe=ke(F),Ce=ke(M),Ne=ke(J),Ee=ke(V),Ke=ke(j),Ue=ke(_),Oe=ke(D),He=ke(R),Le={fromASN:e=>e.toDate(),toASN:e=>new T({valueDate:e})},Ie={fromASN:e=>e.toDate(),toASN:e=>new P({valueDate:e})},Pe={fromASN:e=>null,toASN:e=>new te};var Te,Re,De=Object.freeze({__proto__:null,AsnAnyConverter:fe,AsnIntegerConverter:ye,AsnEnumeratedConverter:pe,AsnIntegerArrayBufferConverter:ge,AsnBitStringConverter:de,AsnObjectIdentifierConverter:me,AsnBooleanConverter:ve,AsnOctetStringConverter:we,AsnUtf8StringConverter:be,AsnBmpStringConverter:Be,AsnUniversalStringConverter:Ae,AsnNumericStringConverter:Se,AsnPrintableStringConverter:xe,AsnTeletexStringConverter:Ce,AsnVideotexStringConverter:Ne,AsnIA5StringConverter:Ee,AsnGraphicStringConverter:Ke,AsnVisibleStringConverter:Ue,AsnGeneralStringConverter:Oe,AsnCharacterStringConverter:He,AsnUTCTimeConverter:Le,AsnGeneralizedTimeConverter:Ie,AsnNullConverter:Pe});function _e(e){return e&&e.prototype?!(!e.prototype.toASN||!e.prototype.fromASN)||_e(e.prototype):!!(e&&e.toASN&&e.fromASN)}function je(e,t){if(!e||!t)return!1;if(e.byteLength!==t.byteLength)return!1;const r=new Uint8Array(e),n=new Uint8Array(t);for(let t=0;t<e.byteLength;t++)if(r[t]!==n[t])return!1;return!0}!function(e){e[e.Sequence=0]="Sequence",e[e.Set=1]="Set",e[e.Choice=2]="Choice"}(Te||(Te={})),function(e){e[e.Any=1]="Any",e[e.Boolean=2]="Boolean",e[e.OctetString=3]="OctetString",e[e.BitString=4]="BitString",e[e.Integer=5]="Integer",e[e.Enumerated=6]="Enumerated",e[e.ObjectIdentifier=7]="ObjectIdentifier",e[e.Utf8String=8]="Utf8String",e[e.BmpString=9]="BmpString",e[e.UniversalString=10]="UniversalString",e[e.NumericString=11]="NumericString",e[e.PrintableString=12]="PrintableString",e[e.TeletexString=13]="TeletexString",e[e.VideotexString=14]="VideotexString",e[e.IA5String=15]="IA5String",e[e.GraphicString=16]="GraphicString",e[e.VisibleString=17]="VisibleString",e[e.GeneralString=18]="GeneralString",e[e.CharacterString=19]="CharacterString",e[e.UTCTime=20]="UTCTime",e[e.GeneralizedTime=21]="GeneralizedTime",e[e.DATE=22]="DATE",e[e.TimeOfDay=23]="TimeOfDay",e[e.DateTime=24]="DateTime",e[e.Duration=25]="Duration",e[e.TIME=26]="TIME",e[e.Null=27]="Null"}(Re||(Re={}));const Ve=new class{constructor(){this.items=new WeakMap}has(e){return this.items.has(e)}get(e){var t,r,n,i;const o=this.items.get(e);if(!o)throw new Error(`Cannot get schema for '${null!==(i=null===(n=null===(r=null===(t=e)||void 0===t?void 0:t.prototype)||void 0===r?void 0:r.constructor)||void 0===n?void 0:n.name)&&void 0!==i?i:e}' target`);return o}cache(e){const t=this.get(e);t.schema||(t.schema=this.create(e,!0))}createDefault(e){const t={type:Te.Sequence,items:{}},r=this.findParentSchema(e);return r&&(Object.assign(t,r),t.items=Object.assign({},t.items,r.items)),t}create(e,t){const r=this.items.get(e)||this.createDefault(e),n=[];for(const e in r.items){const i=r.items[e],o=t?e:"";let s;if("number"==typeof i.type){const e=Re[i.type],t=he[e];if(!t)throw new Error(`Cannot get ASN1 class by name '${e}'`);s=new t({name:o})}else if(_e(i.type)){s=(new i.type).toSchema(o)}else s=new E({name:o});const a=!!i.optional||void 0!==i.defaultValue;if(i.repeated){s.name="",s=new("set"===i.repeated?re:ne)({name:"",value:[new N({name:o,value:s})]})}if(null!==i.context&&void 0!==i.context)if(i.implicit)if("number"==typeof i.type||_e(i.type)){const e=i.repeated?se:ae;n.push(new e({name:o,optional:a,idBlock:{tagClass:3,tagNumber:i.context}}))}else{this.cache(i.type);const e=!!i.repeated;let t=e?s:this.get(i.type).schema;t=t.valueBlock?t.valueBlock.value:t.value,n.push(new se({name:e?"":o,optional:a,idBlock:{tagClass:3,tagNumber:i.context},value:t}))}else n.push(new se({optional:a,idBlock:{tagClass:3,tagNumber:i.context},value:[s]}));else s.optional=a,n.push(s)}switch(r.type){case Te.Sequence:return new ne({value:n,name:""});case Te.Set:return new re({value:n,name:""});case Te.Choice:return new K({value:n,name:""});default:throw new Error("Unsupported ASN1 type in use")}}set(e,t){return this.items.set(e,t),this}findParentSchema(e){const t=e.__proto__;if(t){return this.items.get(t)||this.findParentSchema(t)}return null}},Je=e=>t=>{let r;Ve.has(t)?r=Ve.get(t):(r=Ve.createDefault(t),Ve.set(t,r)),Object.assign(r,e)},Me=e=>(t,r)=>{let n;Ve.has(t.constructor)?n=Ve.get(t.constructor):(n=Ve.createDefault(t.constructor),Ve.set(t.constructor,n));const i=Object.assign({},e);if("number"==typeof i.type&&!i.converter){const n=`Asn${Re[e.type]}Converter`,o=De[n];if(!o)throw new Error(`Cannot get '${n}' for property '${r}' of ${t.constructor.name}`);i.converter=o}n.items[r]=i};class Fe extends Error{constructor(){super(...arguments),this.schemas=[]}}class ze{static parse(e,t){let r;if(e instanceof ArrayBuffer)r=e;else if(void 0!==typeof Buffer&&Buffer.isBuffer(e))r=new Uint8Array(e).buffer;else{if(!ArrayBuffer.isView(e))throw new TypeError("Wrong type of 'data' argument");r=e.buffer}const n=B(r);if(n.result.error)throw new Error(n.result.error);return this.fromASN(n.result,t)}static fromASN(e,t){var r;try{if(_e(t)){return(new t).fromASN(e)}const n=Ve.get(t);Ve.cache(t);let i=n.schema;if(e.constructor===se&&n.type!==Te.Choice){i=new se({idBlock:{tagClass:3,tagNumber:e.idBlock.tagNumber},value:n.schema.valueBlock.value});for(const t in n.items)delete e[t]}const o=A(e,e,i);if(!o.verified)throw new Fe(`Data does not match to ${t.name} ASN1 schema. ${o.result.error}`);const s=new t;if(function e(t){var r;if(t){const n=Object.getPrototypeOf(t);return(null===(r=null==n?void 0:n.prototype)||void 0===r?void 0:r.constructor)===Array||e(n)}return!1}(t))return t.from(e.valueBlock.value,e=>this.fromASN(e,n.itemType));for(const t in n.items){if(!e[t])continue;const i=n.items[t];if("number"==typeof i.type||_e(i.type)){const n=null!==(r=i.converter)&&void 0!==r?r:_e(i.type)?new i.type:null;if(!n)throw new Error("Converter is empty");if(i.repeated)if(i.implicit){const r=new("sequence"===i.repeated?ne:re);r.valueBlock=e[t].valueBlock;const o=B(r.toBER(!1)).result.valueBlock.value;s[t]=Array.from(o,e=>n.fromASN(e))}else s[t]=Array.from(e[t],e=>n.fromASN(e));else{let r=e[t];if(i.implicit){let e;if(_e(i.type))e=(new i.type).toSchema("");else{const t=Re[i.type],r=he[t];if(!r)throw new Error(`Cannot get '${t}' class from asn1js module`);e=new r}e.valueBlock=r.valueBlock,r=B(e.toBER(!1)).result}s[t]=n.fromASN(r)}}else i.repeated?s[t]=Array.from(e[t],e=>this.fromASN(e,i.type)):s[t]=this.fromASN(e[t],i.type)}return s}catch(e){throw e instanceof Fe&&e.schemas.push(t.name),e}}}class $e{static serialize(e){return e instanceof ce?e.toBER(!1):this.toASN(e).toBER(!1)}static toASN(e){if(e&&_e(e.constructor))return e.toASN();const t=e.constructor,r=Ve.get(t);Ve.cache(t);let n,i=[];if(r.itemType)i=e.map(e=>this.toAsnItem({type:r.itemType},"[]",t,e));else for(const n in r.items){const o=r.items[n],s=e[n];if(void 0===s||o.defaultValue===s||"object"==typeof o.defaultValue&&"object"==typeof s&&je(this.serialize(o.defaultValue),this.serialize(s)))continue;let a=$e.toAsnItem(o,n,t,s);if("number"==typeof o.context)if(o.implicit)if(o.repeated||"number"!=typeof o.type&&!_e(o.type))i.push(new se({optional:o.optional,idBlock:{tagClass:3,tagNumber:o.context},value:a.valueBlock.value}));else{const e={};e.valueHex=a.valueBlock.toBER(),i.push(new ae(Object.assign({optional:o.optional,idBlock:{tagClass:3,tagNumber:o.context}},e)))}else i.push(new se({optional:o.optional,idBlock:{tagClass:3,tagNumber:o.context},value:[a]}));else o.repeated?i=i.concat(a):i.push(a)}switch(r.type){case Te.Sequence:n=new ne({value:i});break;case Te.Set:n=new re({value:i});break;case Te.Choice:if(!i[0])throw new Error(`Schema '${t.name}' has wrong data. Choice cannot be empty.`);n=i[0]}return n}static toAsnItem(e,t,r,n){let i;if("number"==typeof e.type){const o=e.converter;if(!o)throw new Error(`Property '${t}' doesn't have converter for type ${Re[e.type]} in schema '${r.name}'`);if(e.repeated){const t=Array.from(n,e=>o.toASN(e));i=new("sequence"===e.repeated?ne:re)({value:t})}else i=o.toASN(n)}else if(e.repeated){const t=Array.from(n,e=>this.toASN(e));i=new("sequence"===e.repeated?ne:re)({value:t})}else i=this.toASN(n);return i}}class Ge extends Error{constructor(e,t){super(t?e+". See the inner exception for more details.":e),this.message=e,this.innerError=t}}class qe extends Ge{constructor(e,t,r){super(t,r),this.schema=e}}class We extends qe{constructor(e,t,r){super(e,`JSON doesn't match to '${e.target.name}' schema. ${t}`,r)}}class Ze extends Ge{}class Xe extends Ge{constructor(e,t,r){super(`Cannot serialize by '${e}' schema. ${t}`,r),this.schemaName=e}}class Ye extends We{constructor(e,t,r={}){super(e,"Some keys doesn't match to schema"),this.keys=t,this.errors=r}}var Qe;function et(e,t){if(!function(e,t){switch(t){case Qe.Boolean:return"boolean"==typeof e;case Qe.Number:return"number"==typeof e;case Qe.String:return"string"==typeof e}return!0}(e,t))throw new TypeError("Value must be "+Qe[t])}function tt(e){return e&&e.prototype?!(!e.prototype.toJSON||!e.prototype.fromJSON)||tt(e.prototype):!!(e&&e.toJSON&&e.fromJSON)}!function(e){e[e.Any=0]="Any",e[e.Boolean=1]="Boolean",e[e.Number=2]="Number",e[e.String=3]="String"}(Qe||(Qe={}));const rt=new class{constructor(){this.items=new Map}has(e){return this.items.has(e)||!!this.findParentSchema(e)}get(e){const t=this.items.get(e)||this.findParentSchema(e);if(!t)throw new Error("Cannot get schema for current target");return t}create(e){const t={names:{}},r=this.findParentSchema(e);if(r){Object.assign(t,r),t.names={};for(const e in r.names)t.names[e]=Object.assign({},r.names[e])}return t.target=e,t}set(e,t){return this.items.set(e,t),this}findParentSchema(e){const t=e.__proto__;if(t){return this.items.get(t)||this.findParentSchema(t)}return null}};class nt{constructor(e){this.pattern=new RegExp(e)}validate(e){const t=new RegExp(this.pattern.source,this.pattern.flags);if("string"!=typeof e)throw new Ze("Incoming value must be string");if(!t.exec(e))throw new Ze(`Value doesn't match to pattern '${t.toString()}'`)}}class it{constructor(e=Number.MIN_VALUE,t=Number.MAX_VALUE){this.min=e,this.max=t}validate(e){if(et(e,Qe.Number),!(this.min<=e&&e<=this.max)){const e=this.min===Number.MIN_VALUE?"MIN":this.min,t=this.max===Number.MAX_VALUE?"MAX":this.max;throw new Ze(`Value doesn't match to diapason [${e},${t}]`)}}}class ot{constructor(e=Number.MIN_VALUE,t=Number.MAX_VALUE){this.min=e,this.max=t}validate(e){if(et(e,Qe.Number),!(this.min<e&&e<this.max)){const e=this.min===Number.MIN_VALUE?"MIN":this.min,t=this.max===Number.MAX_VALUE?"MAX":this.max;throw new Ze(`Value doesn't match to diapason (${e},${t})`)}}}class st{constructor(e,t,r){this.length=e,this.minLength=t,this.maxLength=r}validate(e){if(void 0===this.length){if(void 0!==this.minLength&&e.length<this.minLength)throw new Ze(`Value length must be more than ${this.minLength}.`);if(void 0!==this.maxLength&&e.length>this.maxLength)throw new Ze(`Value length must be less than ${this.maxLength}.`)}else if(e.length!==this.length)throw new Ze(`Value length must be exactly ${this.length}.`)}}class at{constructor(e){this.enumeration=e}validate(e){if(et(e,Qe.String),!this.enumeration.includes(e))throw new Ze("Value must be one of "+this.enumeration.map(e=>`'${e}'`).join(", "))}}class ct{static checkValues(e,t){const r=Array.isArray(e)?e:[e];for(const n of r)for(const r of t.validations)r instanceof st&&t.repeated?r.validate(e):r.validate(n)}static checkTypes(e,t){if(t.repeated&&!Array.isArray(e))throw new TypeError("Value must be Array");if("number"==typeof t.type){const r=Array.isArray(e)?e:[e];for(const e of r)et(e,t.type)}}static getSchemaByName(e,t="default"){return o(o({},e.names.default),e.names[t])}}class lt extends ct{static serialize(e,t,r,n){const i=this.toJSON(e,t);return JSON.stringify(i,r,n)}static toJSON(e,t={}){let r,n=t.targetSchema;const i=t.schemaName||"default";if(tt(e))return e.toJSON();if(Array.isArray(e)){r=[];for(const n of e)r.push(this.toJSON(n,t))}else if("object"==typeof e){if(n&&!rt.has(n))throw new Ge("Cannot get schema for `targetSchema` param");if(n=n||e.constructor,rt.has(n)){const t=rt.get(n);r={};const o=this.getSchemaByName(t,i);for(const s in o)try{const t=o[s],a=e[s];let c;if(t.optional&&void 0===a||void 0!==t.defaultValue&&a===t.defaultValue)continue;if(!t.optional&&void 0===a)throw new Xe(n.name,`Property '${s}' is required.`);c="number"==typeof t.type?t.converter?t.repeated?a.map(r=>t.converter.toJSON(r,e)):t.converter.toJSON(a,e):a:t.repeated?a.map(e=>this.toJSON(e,{schemaName:i})):this.toJSON(a,{schemaName:i}),this.checkTypes(c,t),this.checkValues(c,t),r[t.name||s]=c}catch(e){throw e instanceof Xe?e:new Xe(t.target.name,`Property '${s}' is wrong. ${e.message}`,e)}}else{r={};for(const t in e)r[t]=this.toJSON(e[t],{schemaName:i})}}else r=e;return r}}class ut extends ct{static parse(e,t){const r=JSON.parse(e);return this.fromJSON(r,t)}static fromJSON(e,t){const r=t.targetSchema,n=t.schemaName||"default",i=new r;if(tt(i))return i.fromJSON(e);const s=rt.get(r),a=this.getSchemaByName(s,n),c={};t.strictProperty&&!Array.isArray(e)&&ut.checkStrictProperty(e,a,s);for(const r in a)try{const c=a[r],l=c.name||r,u=e[l];if(void 0===u&&(c.optional||void 0!==c.defaultValue))continue;if(!c.optional&&void 0===u)throw new We(s,`Property '${l}' is required.`);if(this.checkTypes(u,c),this.checkValues(u,c),"number"==typeof c.type)c.converter?c.repeated?i[r]=u.map(e=>c.converter.fromJSON(e,i)):i[r]=c.converter.fromJSON(u,i):i[r]=u;else{const e=o(o({},t),{},{targetSchema:c.type,schemaName:n});c.repeated?i[r]=u.map(t=>this.fromJSON(t,e)):i[r]=this.fromJSON(u,e)}}catch(e){if(e instanceof We||(e=new We(s,`Property '${r}' is wrong. ${e.message}`,e)),!t.strictAllKeys)throw e;c[r]=e}const l=Object.keys(c);if(l.length)throw new Ye(s,l,c);return i}static checkStrictProperty(e,t,r){const n=Object.keys(e),i=Object.keys(t),o=[];for(const e of n)-1===i.indexOf(e)&&o.push(e);if(o.length)throw new Ye(r,o)}}const ht=(e={})=>(t,r)=>{const n=`Cannot set type for ${r} property of ${t.constructor.name} schema`;let i;rt.has(t.constructor)?(i=rt.get(t.constructor),i.target!==t.constructor&&(i=rt.create(t.constructor),rt.set(t.constructor,i))):(i=rt.create(t.constructor),rt.set(t.constructor,i));const o={type:Qe.Any,validations:[]},s=Object.assign(o,e);if(s.validations=function(e){const t=[];return e.pattern&&t.push(new nt(e.pattern)),e.type!==Qe.Number&&e.type!==Qe.Any||(void 0===e.minInclusive&&void 0===e.maxInclusive||t.push(new it(e.minInclusive,e.maxInclusive)),void 0===e.minExclusive&&void 0===e.maxExclusive||t.push(new ot(e.minExclusive,e.maxExclusive)),void 0!==e.enumeration&&t.push(new at(e.enumeration))),(e.type===Qe.String||e.repeated||e.type===Qe.Any)&&(void 0===e.length&&void 0===e.minLength&&void 0===e.maxLength||t.push(new st(e.length,e.minLength,e.maxLength))),t}(s),"number"!=typeof s.type&&!rt.has(s.type)&&!tt(s.type))throw new Error(n+". Assigning type doesn't have schema.");let a;a=Array.isArray(e.schema)?e.schema:[e.schema||"default"];for(const e of a){i.names[e]||(i.names[e]={}),i.names[e][r]=s}};class ft extends Error{}class yt extends ft{}class pt extends ft{constructor(e){super("Unsupported operation: "+(e?""+e:""))}}class gt extends ft{}class dt extends ft{constructor(e){super(e+": Missing required property")}}function mt(e){return"object"==typeof e&&"kty"in e}class vt{async digest(...e){return this.checkDigest.apply(this,e),this.onDigest.apply(this,e)}checkDigest(e,t){this.checkAlgorithmName(e)}async onDigest(e,t){throw new pt("digest")}async generateKey(...e){return this.checkGenerateKey.apply(this,e),this.onGenerateKey.apply(this,e)}checkGenerateKey(e,t,r){if(this.checkAlgorithmName(e),this.checkGenerateKeyParams(e),!r||!r.length)throw new TypeError("Usages cannot be empty when creating a key.");let n;n=Array.isArray(this.usages)?this.usages:this.usages.privateKey.concat(this.usages.publicKey),this.checkKeyUsages(r,n)}checkGenerateKeyParams(e){}async onGenerateKey(e,t,r){throw new pt("generateKey")}async sign(...e){return this.checkSign.apply(this,e),this.onSign.apply(this,e)}checkSign(e,t,r){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,"sign")}async onSign(e,t,r){throw new pt("sign")}async verify(...e){return this.checkVerify.apply(this,e),this.onVerify.apply(this,e)}checkVerify(e,t,r,n){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,"verify")}async onVerify(e,t,r,n){throw new pt("verify")}async encrypt(...e){return this.checkEncrypt.apply(this,e),this.onEncrypt.apply(this,e)}checkEncrypt(e,t,r,n={}){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,n.keyUsage?"encrypt":void 0)}async onEncrypt(e,t,r){throw new pt("encrypt")}async decrypt(...e){return this.checkDecrypt.apply(this,e),this.onDecrypt.apply(this,e)}checkDecrypt(e,t,r,n={}){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,n.keyUsage?"decrypt":void 0)}async onDecrypt(e,t,r){throw new pt("decrypt")}async deriveBits(...e){return this.checkDeriveBits.apply(this,e),this.onDeriveBits.apply(this,e)}checkDeriveBits(e,t,r,n={}){if(this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,n.keyUsage?"deriveBits":void 0),r%8!=0)throw new gt("length: Is not multiple of 8")}async onDeriveBits(e,t,r){throw new pt("deriveBits")}async exportKey(...e){return this.checkExportKey.apply(this,e),this.onExportKey.apply(this,e)}checkExportKey(e,t){if(this.checkKeyFormat(e),this.checkCryptoKey(t),!t.extractable)throw new ft("key: Is not extractable")}async onExportKey(e,t){throw new pt("exportKey")}async importKey(...e){return this.checkImportKey.apply(this,e),this.onImportKey.apply(this,e)}checkImportKey(e,t,r,n,i){this.checkKeyFormat(e),this.checkKeyData(e,t),this.checkAlgorithmName(r),this.checkImportParams(r),Array.isArray(this.usages)&&this.checkKeyUsages(i,this.usages)}async onImportKey(e,t,r,n,i){throw new pt("importKey")}checkAlgorithmName(e){if(e.name.toLowerCase()!==this.name.toLowerCase())throw new yt("Unrecognized name")}checkAlgorithmParams(e){}checkDerivedKeyParams(e){}checkKeyUsages(e,t){for(const r of e)if(-1===t.indexOf(r))throw new TypeError("Cannot create a key using the specified key usages")}checkCryptoKey(e,t){if(this.checkAlgorithmName(e.algorithm),t&&-1===e.usages.indexOf(t))throw new ft("key does not match that of operation")}checkRequiredProperty(e,t){if(!(t in e))throw new dt(t)}checkHashAlgorithm(e,t){for(const r of t)if(r.toLowerCase()===e.name.toLowerCase())return;throw new gt("hash: Must be one of "+t.join(", "))}checkImportParams(e){}checkKeyFormat(e){switch(e){case"raw":case"pkcs8":case"spki":case"jwk":break;default:throw new TypeError("format: Is invalid value. Must be 'jwk', 'raw', 'spki', or 'pkcs8'")}}checkKeyData(e,t){if(!t)throw new TypeError("keyData: Cannot be empty on empty on key importing");if("jwk"===e){if(!mt(t))throw new TypeError("keyData: Is not JsonWebToken")}else if(!l.isBufferSource(t))throw new TypeError("keyData: Is not ArrayBufferView or ArrayBuffer")}prepareData(e){return l.toArrayBuffer(e)}}class wt extends vt{checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"length"),"number"!=typeof e.length)throw new TypeError("length: Is not of type Number");switch(e.length){case 128:case 192:case 256:break;default:throw new TypeError("length: Must be 128, 192, or 256")}}checkDerivedKeyParams(e){this.checkGenerateKeyParams(e)}}class kt extends wt{constructor(){super(...arguments),this.name="AES-CBC",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"iv"),!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv)))throw new TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(16!==e.iv.byteLength)throw new TypeError("iv: Must have length 16 bytes")}}class bt extends wt{constructor(){super(...arguments),this.name="AES-CTR",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"counter"),!(e.counter instanceof ArrayBuffer||ArrayBuffer.isView(e.counter)))throw new TypeError("counter: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(16!==e.counter.byteLength)throw new TypeError("iv: Must have length 16 bytes");if(this.checkRequiredProperty(e,"length"),"number"!=typeof e.length)throw new TypeError("length: Is not a Number");if(e.length<1)throw new gt("length: Must be more than 0")}}class Bt extends wt{constructor(){super(...arguments),this.name="AES-ECB",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}}class At extends wt{constructor(){super(...arguments),this.name="AES-GCM",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"iv"),!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv)))throw new TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(e.iv.byteLength<1)throw new gt("iv: Must have length more than 0 and less than 2^64 - 1");switch("tagLength"in e||(e.tagLength=128),e.tagLength){case 32:case 64:case 96:case 104:case 112:case 120:case 128:break;default:throw new gt("tagLength: Must be one of 32, 64, 96, 104, 112, 120 or 128")}}}class St extends wt{constructor(){super(...arguments),this.name="AES-KW",this.usages=["wrapKey","unwrapKey"]}}class xt extends vt{constructor(){super(...arguments),this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.ivSize){if(this.checkRequiredProperty(e,"iv"),!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv)))throw new TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(e.iv.byteLength!==this.ivSize)throw new TypeError(`iv: Must have length ${this.ivSize} bytes`)}}checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"length"),"number"!=typeof e.length)throw new TypeError("length: Is not of type Number");if(e.length!==this.keySizeBits)throw new gt("algorith.length: Must be "+this.keySizeBits)}checkDerivedKeyParams(e){this.checkGenerateKeyParams(e)}}class Ct extends vt{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"]}checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),this.checkRequiredProperty(e,"publicExponent"),!(e.publicExponent&&e.publicExponent instanceof Uint8Array))throw new TypeError("publicExponent: Missing or not a Uint8Array");const t=c.ToBase64(e.publicExponent);if("Aw=="!==t&&"AQAB"!==t)throw new TypeError("publicExponent: Must be [3] or [1,0,1]");switch(this.checkRequiredProperty(e,"modulusLength"),e.modulusLength){case 1024:case 2048:case 4096:break;default:throw new TypeError("modulusLength: Must be 1024, 2048, or 4096")}}checkImportParams(e){this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}class Nt extends Ct{constructor(){super(...arguments),this.name="RSASSA-PKCS1-v1_5",this.usages={privateKey:["sign"],publicKey:["verify"]}}}class Et extends Ct{constructor(){super(...arguments),this.name="RSA-PSS",this.usages={privateKey:["sign"],publicKey:["verify"]}}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"saltLength"),"number"!=typeof e.saltLength)throw new TypeError("saltLength: Is not a Number");if(e.saltLength<1)throw new RangeError("saltLength: Must be more than 0")}}class Kt extends Ct{constructor(){super(...arguments),this.name="RSA-OAEP",this.usages={privateKey:["decrypt","unwrapKey"],publicKey:["encrypt","wrapKey"]}}checkAlgorithmParams(e){if(e.label&&!(e.label instanceof ArrayBuffer||ArrayBuffer.isView(e.label)))throw new TypeError("label: Is not of type '(ArrayBuffer or ArrayBufferView)'")}}class Ut extends vt{checkGenerateKeyParams(e){this.checkRequiredProperty(e,"namedCurve"),this.checkNamedCurve(e.namedCurve)}checkNamedCurve(e){for(const t of this.namedCurves)if(t.toLowerCase()===e.toLowerCase())return;throw new gt("namedCurve: Must be one of "+this.namedCurves.join(", "))}}class Ot extends Ut{constructor(){super(...arguments),this.name="ECDSA",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages={privateKey:["sign"],publicKey:["verify"]},this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}const Ht=["secret","private","public"];class Lt{static create(e,t,r,n){const i=new this;return i.algorithm=e,i.type=t,i.extractable=r,i.usages=n,i}static isKeyType(e){return-1!==Ht.indexOf(e)}}class It extends Ut{constructor(){super(...arguments),this.name="ECDH",this.usages={privateKey:["deriveBits","deriveKey"],publicKey:[]},this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"public"),!(e.public instanceof Lt))throw new TypeError("public: Is not a CryptoKey");if("public"!==e.public.type)throw new gt("public: Is not a public key");if(e.public.algorithm.name!==this.name)throw new gt(`public: Is not ${this.name} key`)}}class Pt extends vt{constructor(){super(...arguments),this.name="HMAC",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["sign","verify"]}getDefaultLength(e){switch(e.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":return 512;default:throw new Error(`Unknown algorithm name '${e}'`)}}checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),"length"in e){if("number"!=typeof e.length)throw new TypeError("length: Is not a Number");if(e.length<1)throw new RangeError("length: Number is out of range")}}checkImportParams(e){this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}class Tt extends vt{constructor(){super(...arguments),this.name="PBKDF2",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["deriveBits","deriveKey"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),this.checkRequiredProperty(e,"salt"),!(e.salt instanceof ArrayBuffer||ArrayBuffer.isView(e.salt)))throw new TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(this.checkRequiredProperty(e,"iterations"),"number"!=typeof e.iterations)throw new TypeError("iterations: Is not a Number");if(e.iterations<1)throw new TypeError("iterations: Is less than 1")}checkImportKey(e,t,r,n,i){if(super.checkImportKey(e,t,r,n,i),n)throw new SyntaxError("extractable: Must be False")}}class Rt{constructor(){this.items={}}get(e){return this.items[e.toLowerCase()]||null}set(e){this.items[e.name.toLowerCase()]=e}removeAt(e){const t=this.get(e.toLowerCase());return t&&delete this.items[e],t}has(e){return!!this.get(e)}get length(){return Object.keys(this.items).length}get algorithms(){const e=[];for(const t in this.items){const r=this.items[t];e.push(r.name)}return e.sort()}}class Dt{constructor(){this.providers=new Rt}static isHashedAlgorithm(e){return!!(e&&"object"==typeof e&&"name"in e&&"hash"in e)}async digest(...e){this.checkRequiredArguments(e,2,"digest");const[t,r]=e,n=this.prepareAlgorithm(t),i=l.toArrayBuffer(r),o=this.getProvider(n.name);return await o.digest(n,i)}async generateKey(...e){this.checkRequiredArguments(e,3,"generateKey");const[t,r,n]=e,i=this.prepareAlgorithm(t),s=this.getProvider(i.name);return await s.generateKey(o(o({},i),{},{name:s.name}),r,n)}async sign(...e){this.checkRequiredArguments(e,3,"sign");const[t,r,n]=e;this.checkCryptoKey(r);const i=this.prepareAlgorithm(t),s=l.toArrayBuffer(n),a=this.getProvider(i.name);return await a.sign(o(o({},i),{},{name:a.name}),r,s)}async verify(...e){this.checkRequiredArguments(e,4,"verify");const[t,r,n,i]=e;this.checkCryptoKey(r);const s=this.prepareAlgorithm(t),a=l.toArrayBuffer(i),c=l.toArrayBuffer(n),u=this.getProvider(s.name);return await u.verify(o(o({},s),{},{name:u.name}),r,c,a)}async encrypt(...e){this.checkRequiredArguments(e,3,"encrypt");const[t,r,n]=e;this.checkCryptoKey(r);const i=this.prepareAlgorithm(t),s=l.toArrayBuffer(n),a=this.getProvider(i.name);return await a.encrypt(o(o({},i),{},{name:a.name}),r,s,{keyUsage:!0})}async decrypt(...e){this.checkRequiredArguments(e,3,"decrypt");const[t,r,n]=e;this.checkCryptoKey(r);const i=this.prepareAlgorithm(t),s=l.toArrayBuffer(n),a=this.getProvider(i.name);return await a.decrypt(o(o({},i),{},{name:a.name}),r,s,{keyUsage:!0})}async deriveBits(...e){this.checkRequiredArguments(e,3,"deriveBits");const[t,r,n]=e;this.checkCryptoKey(r);const i=this.prepareAlgorithm(t),s=this.getProvider(i.name);return await s.deriveBits(o(o({},i),{},{name:s.name}),r,n,{keyUsage:!0})}async deriveKey(...e){this.checkRequiredArguments(e,5,"deriveKey");const[t,r,n,i,s]=e,a=this.prepareAlgorithm(n);this.getProvider(a.name).checkDerivedKeyParams(a);const c=this.prepareAlgorithm(t),l=this.getProvider(c.name);l.checkCryptoKey(r,"deriveKey");const u=await l.deriveBits(o(o({},c),{},{name:l.name}),r,n.length,{keyUsage:!1});return this.importKey("raw",u,n,i,s)}async exportKey(...e){this.checkRequiredArguments(e,2,"exportKey");const[t,r]=e;this.checkCryptoKey(r);const n=this.getProvider(r.algorithm.name);return await n.exportKey(t,r)}async importKey(...e){this.checkRequiredArguments(e,5,"importKey");const[t,r,n,i,s]=e,a=this.prepareAlgorithm(n),c=this.getProvider(a.name);if(-1!==["pkcs8","spki","raw"].indexOf(t)){const e=l.toArrayBuffer(r);return c.importKey(t,e,o(o({},a),{},{name:c.name}),i,s)}if(!r.kty)throw new TypeError("keyData: Is not JSON");return c.importKey(t,r,o(o({},a),{},{name:c.name}),i,s)}async wrapKey(e,t,r,n){let i=await this.exportKey(e,t);if("jwk"===e){const e=JSON.stringify(i);i=c.FromUtf8String(e)}const s=this.prepareAlgorithm(n),a=l.toArrayBuffer(i),u=this.getProvider(s.name);return u.encrypt(o(o({},s),{},{name:u.name}),r,a,{keyUsage:!1})}async unwrapKey(e,t,r,n,i,s,a){const u=this.prepareAlgorithm(n),h=l.toArrayBuffer(t),f=this.getProvider(u.name);let y=await f.decrypt(o(o({},u),{},{name:f.name}),r,h,{keyUsage:!1});if("jwk"===e)try{y=JSON.parse(c.ToUtf8String(y))}catch(e){const t=new TypeError("wrappedKey: Is not a JSON");throw t.internal=e,t}return this.importKey(e,y,i,s,a)}checkRequiredArguments(e,t,r){if(e.length!==t)throw new TypeError(`Failed to execute '${r}' on 'SubtleCrypto': ${t} arguments required, but only ${e.length} present`)}prepareAlgorithm(e){if("string"==typeof e)return{name:e};if(Dt.isHashedAlgorithm(e)){const t=o({},e);return t.hash=this.prepareAlgorithm(e.hash),t}return o({},e)}getProvider(e){const t=this.providers.get(e);if(!t)throw new yt("Unrecognized name");return t}checkCryptoKey(e){if(!(e instanceof Lt))throw new TypeError("Key is not of type 'CryptoKey'")}}let _t=class{constructor(e){e&&(this.value=e)}};u([Me({type:Re.ObjectIdentifier})],_t.prototype,"value",void 0),_t=u([Je({type:Te.Choice})],_t);class jt{constructor(e){Object.assign(this,e)}}u([Me({type:Re.ObjectIdentifier})],jt.prototype,"algorithm",void 0),u([Me({type:Re.Any,optional:!0})],jt.prototype,"parameters",void 0);class Vt{constructor(){this.version=0,this.privateKeyAlgorithm=new jt,this.privateKey=new ArrayBuffer(0)}}u([Me({type:Re.Integer})],Vt.prototype,"version",void 0),u([Me({type:jt})],Vt.prototype,"privateKeyAlgorithm",void 0),u([Me({type:Re.OctetString})],Vt.prototype,"privateKey",void 0),u([Me({type:Re.Any,optional:!0})],Vt.prototype,"attributes",void 0);class Jt{constructor(){this.publicKeyAlgorithm=new jt,this.publicKey=new ArrayBuffer(0)}}u([Me({type:jt})],Jt.prototype,"publicKeyAlgorithm",void 0),u([Me({type:Re.BitString})],Jt.prototype,"publicKey",void 0);const Mt={fromJSON:e=>c.FromBase64Url(e),toJSON:e=>c.ToBase64Url(new Uint8Array(e))},Ft={fromASN:e=>{const t=e.valueBlock.valueHex;return new Uint8Array(t)[0]?e.valueBlock.valueHex:e.valueBlock.valueHex.slice(1)},toASN:e=>{const t=new Uint8Array(e)[0]>127?Buffer.concat([Buffer.from([0]),Buffer.from(e)]):Buffer.from(e);return new Y({valueHex:new Uint8Array(t).buffer})}};class zt{constructor(){this.version=0,this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),this.privateExponent=new ArrayBuffer(0),this.prime1=new ArrayBuffer(0),this.prime2=new ArrayBuffer(0),this.exponent1=new ArrayBuffer(0),this.exponent2=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0)}}u([Me({type:Re.Integer,converter:ye})],zt.prototype,"version",void 0),u([Me({type:Re.Integer,converter:Ft}),ht({name:"n",converter:Mt})],zt.prototype,"modulus",void 0),u([Me({type:Re.Integer,converter:Ft}),ht({name:"e",converter:Mt})],zt.prototype,"publicExponent",void 0),u([Me({type:Re.Integer,converter:Ft}),ht({name:"d",converter:Mt})],zt.prototype,"privateExponent",void 0),u([Me({type:Re.Integer,converter:Ft}),ht({name:"p",converter:Mt})],zt.prototype,"prime1",void 0),u([Me({type:Re.Integer,converter:Ft}),ht({name:"q",converter:Mt})],zt.prototype,"prime2",void 0),u([Me({type:Re.Integer,converter:Ft}),ht({name:"dp",converter:Mt})],zt.prototype,"exponent1",void 0),u([Me({type:Re.Integer,converter:Ft}),ht({name:"dq",converter:Mt})],zt.prototype,"exponent2",void 0),u([Me({type:Re.Integer,converter:Ft}),ht({name:"qi",converter:Mt})],zt.prototype,"coefficient",void 0),u([Me({type:Re.Any,optional:!0})],zt.prototype,"otherPrimeInfos",void 0);class $t{constructor(){this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0)}}u([Me({type:Re.Integer,converter:Ft}),ht({name:"n",converter:Mt})],$t.prototype,"modulus",void 0),u([Me({type:Re.Integer,converter:Ft}),ht({name:"e",converter:Mt})],$t.prototype,"publicExponent",void 0);let Gt=class{constructor(e){this.value=new ArrayBuffer(0),e&&(this.value=e)}toJSON(){let e=new Uint8Array(this.value);if(4!==e[0])throw new ft("Wrong ECPoint. Current version supports only Uncompressed (0x04) point");e=new Uint8Array(this.value.slice(1));const t=e.length/2;return{x:c.ToBase64Url(e.buffer.slice(0,0+t)),y:c.ToBase64Url(e.buffer.slice(0+t,0+t+t))}}fromJSON(e){if(!("x"in e))throw new Error("x: Missing required property");if(!("y"in e))throw new Error("y: Missing required property");const t=c.FromBase64Url(e.x),r=c.FromBase64Url(e.y),n=Buffer.concat([new Uint8Array([4]),new Uint8Array(t),new Uint8Array(r)]);return this.value=new Uint8Array(n).buffer,this}};u([Me({type:Re.OctetString})],Gt.prototype,"value",void 0),Gt=u([Je({type:Te.Choice})],Gt);class qt{constructor(){this.version=1,this.privateKey=new ArrayBuffer(0)}fromJSON(e){if(!("d"in e))throw new Error("d: Missing required property");if(this.privateKey=c.FromBase64Url(e.d),"x"in e){const t=new Gt;t.fromJSON(e),this.publicKey=$e.toASN(t).valueBlock.valueHex}return this}toJSON(){const e={};return e.d=c.ToBase64Url(this.privateKey),this.publicKey&&Object.assign(e,new Gt(this.publicKey).toJSON()),e}}u([Me({type:Re.Integer,converter:ye})],qt.prototype,"version",void 0),u([Me({type:Re.OctetString})],qt.prototype,"privateKey",void 0),u([Me({context:0,type:Re.Any,optional:!0})],qt.prototype,"parameters",void 0),u([Me({context:1,type:Re.BitString,optional:!0})],qt.prototype,"publicKey",void 0);const Wt={fromASN:e=>{const t=new Uint8Array(e.valueBlock.valueHex);return 0===t[0]?t.buffer.slice(1):t.buffer},toASN:e=>{const t=new Uint8Array(e);if(t[0]>127){const e=new Uint8Array(t.length+1);return e.set(t,1),new Y({valueHex:e.buffer})}return new Y({valueHex:e})}};class Zt{constructor(){this.r=new ArrayBuffer(0),this.s=new ArrayBuffer(0)}static fromWebCryptoSignature(e){const t=l.toUint8Array(e),r=t.byteLength/2,n=new this;return n.r=n.removePadding(t.slice(0,r)),n.s=n.removePadding(t.slice(r,2*r)),n}toWebCryptoSignature(e){e=this.getPointSize();const t=this.addPadding(e,l.toUint8Array(this.r)),r=this.addPadding(e,l.toUint8Array(this.s)),n=new Uint8Array(t.byteLength+r.byteLength);return n.set(t,0),n.set(r,t.length),n.buffer}getPointSize(){switch(Math.max(this.r.byteLength,this.s.byteLength)){case 31:case 32:return 32;case 47:case 48:return 48;case 65:case 66:return 66}throw new Error("Unsupported EC point size")}addPadding(e,t){const r=new Uint8Array(e),n=l.toUint8Array(t);return r.set(n,e-n.length),r}removePadding(e){const t=l.toUint8Array(e);for(let e=0;e<t.length;e++)if(t[e])return t.slice(e);return new Uint8Array(0)}}u([Me({type:Re.Integer,converter:Wt})],Zt.prototype,"r",void 0),u([Me({type:Re.Integer,converter:Wt})],Zt.prototype,"s",void 0);let Xt=(()=>{let e=class{constructor(e){e&&(this.value=e)}};return u([Me({type:Re.ObjectIdentifier})],e.prototype,"value",void 0),e=u([Je({type:Te.Choice})],e),e})(),Yt=(()=>{class e{constructor(e){Object.assign(this,e)}}return u([Me({type:Re.ObjectIdentifier})],e.prototype,"algorithm",void 0),u([Me({type:Re.Any,optional:!0})],e.prototype,"parameters",void 0),e})(),Qt=(()=>{class e{constructor(){this.version=0,this.privateKeyAlgorithm=new Yt,this.privateKey=new ArrayBuffer(0)}}return u([Me({type:Re.Integer})],e.prototype,"version",void 0),u([Me({type:Yt})],e.prototype,"privateKeyAlgorithm",void 0),u([Me({type:Re.OctetString})],e.prototype,"privateKey",void 0),u([Me({type:Re.Any,optional:!0})],e.prototype,"attributes",void 0),e})(),er=(()=>{class e{constructor(){this.publicKeyAlgorithm=new Yt,this.publicKey=new ArrayBuffer(0)}}return u([Me({type:Yt})],e.prototype,"publicKeyAlgorithm",void 0),u([Me({type:Re.BitString})],e.prototype,"publicKey",void 0),e})();const tr={fromJSON:e=>c.FromBase64Url(e),toJSON:e=>c.ToBase64Url(new Uint8Array(e))};var rr;function nr(...e){const t=new Uint8Array(e.map(e=>e.length).reduce((e,t)=>e+t));let r=0;return e.forEach((e,n)=>{for(let n=0;n<e.length;n++)t[r+n]=e[n];r+=e.length}),t}!function(e){e.Unknown="Unknown",e.IE="Internet Explorer",e.Safari="Safari",e.Edge="Edge",e.Chrome="Chrome",e.Firefox="Firefox Mozilla",e.Mobile="Mobile"}(rr||(rr={}));const ir={fromASN:e=>{const t=e.valueBlock.valueHex;return new Uint8Array(t)[0]?e.valueBlock.valueHex:e.valueBlock.valueHex.slice(1)},toASN:e=>{const t=new Uint8Array(e)[0]>127?nr(new Uint8Array([0]),new Uint8Array(e)):new Uint8Array(e);return new Y({valueHex:new Uint8Array(t).buffer})}};let or=(()=>{class e{constructor(){this.version=0,this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),this.privateExponent=new ArrayBuffer(0),this.prime1=new ArrayBuffer(0),this.prime2=new ArrayBuffer(0),this.exponent1=new ArrayBuffer(0),this.exponent2=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0)}}return u([Me({type:Re.Integer,converter:ye})],e.prototype,"version",void 0),u([Me({type:Re.Integer,converter:ir}),ht({name:"n",converter:tr})],e.prototype,"modulus",void 0),u([Me({type:Re.Integer,converter:ir}),ht({name:"e",converter:tr})],e.prototype,"publicExponent",void 0),u([Me({type:Re.Integer,converter:ir}),ht({name:"d",converter:tr})],e.prototype,"privateExponent",void 0),u([Me({type:Re.Integer,converter:ir}),ht({name:"p",converter:tr})],e.prototype,"prime1",void 0),u([Me({type:Re.Integer,converter:ir}),ht({name:"q",converter:tr})],e.prototype,"prime2",void 0),u([Me({type:Re.Integer,converter:ir}),ht({name:"dp",converter:tr})],e.prototype,"exponent1",void 0),u([Me({type:Re.Integer,converter:ir}),ht({name:"dq",converter:tr})],e.prototype,"exponent2",void 0),u([Me({type:Re.Integer,converter:ir}),ht({name:"qi",converter:tr})],e.prototype,"coefficient",void 0),u([Me({type:Re.Any,optional:!0})],e.prototype,"otherPrimeInfos",void 0),e})(),sr=(()=>{class e{constructor(){this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0)}}return u([Me({type:Re.Integer,converter:ir}),ht({name:"n",converter:tr})],e.prototype,"modulus",void 0),u([Me({type:Re.Integer,converter:ir}),ht({name:"e",converter:tr})],e.prototype,"publicExponent",void 0),e})(),ar=(()=>{let e=class{constructor(e){this.value=new ArrayBuffer(0),e&&(this.value=e)}toJSON(){let e=new Uint8Array(this.value);if(4!==e[0])throw new ft("Wrong ECPoint. Current version supports only Uncompressed (0x04) point");e=new Uint8Array(this.value.slice(1));const t=e.length/2;return{x:c.ToBase64Url(e.buffer.slice(0,0+t)),y:c.ToBase64Url(e.buffer.slice(0+t,0+t+t))}}fromJSON(e){if(!("x"in e))throw new Error("x: Missing required property");if(!("y"in e))throw new Error("y: Missing required property");const t=c.FromBase64Url(e.x),r=c.FromBase64Url(e.y),n=nr(new Uint8Array([4]),new Uint8Array(t),new Uint8Array(r));return this.value=new Uint8Array(n).buffer,this}};return u([Me({type:Re.OctetString})],e.prototype,"value",void 0),e=u([Je({type:Te.Choice})],e),e})(),cr=(()=>{class e{constructor(){this.version=1,this.privateKey=new ArrayBuffer(0)}fromJSON(e){if(!("d"in e))throw new Error("d: Missing required property");if(this.privateKey=c.FromBase64Url(e.d),"x"in e){const t=new ar;t.fromJSON(e),this.publicKey=$e.toASN(t).valueBlock.valueHex}return this}toJSON(){const e={};return e.d=c.ToBase64Url(this.privateKey),this.publicKey&&Object.assign(e,new ar(this.publicKey).toJSON()),e}}return u([Me({type:Re.Integer,converter:ye})],e.prototype,"version",void 0),u([Me({type:Re.OctetString})],e.prototype,"privateKey",void 0),u([Me({context:0,type:Re.Any,optional:!0})],e.prototype,"parameters",void 0),u([Me({context:1,type:Re.BitString,optional:!0})],e.prototype,"publicKey",void 0),e})();const lr={fromASN:e=>{const t=new Uint8Array(e.valueBlock.valueHex);return 0===t[0]?t.buffer.slice(1):t.buffer},toASN:e=>{const t=new Uint8Array(e);if(t[0]>127){const e=new Uint8Array(t.length+1);return e.set(t,1),new Y({valueHex:e})}return new Y({valueHex:e})}};(()=>{class e{constructor(){this.r=new ArrayBuffer(0),this.s=new ArrayBuffer(0)}}u([Me({type:Re.Integer,converter:lr})],e.prototype,"r",void 0),u([Me({type:Re.Integer,converter:lr})],e.prototype,"s",void 0)})();class ur{static get enabled(){return"undefined"!=typeof self&&self.PV_WEBCRYPTO_LINER_LOG}static log(...e){this.enabled&&console.log.apply(console,e)}static error(...e){this.enabled&&console.error.apply(console,e)}static info(...e){this.enabled&&console.info.apply(console,e)}static warn(...e){this.enabled&&console.warn.apply(console,e)}static trace(...e){this.enabled&&console.trace.apply(console,e)}}class hr extends Lt{constructor(e,t,r,n){super(),this.extractable=t,this.type=r,this.usages=n,this.algorithm=Object.assign({},e)}}function fr(e,t){return e.name.toUpperCase()===t.toUpperCase()}class yr extends hr{constructor(e,t,r,n){super(e,t,"secret",r),this.raw=n}toJSON(){return{kty:"oct",alg:this.getJwkAlgorithm(),k:c.ToBase64Url(this.raw),ext:this.extractable,key_ops:this.usages}}getJwkAlgorithm(){switch(this.algorithm.name.toUpperCase()){case"AES-CBC":return`A${this.algorithm.length}CBC`;case"AES-CTR":return`A${this.algorithm.length}CTR`;case"AES-GCM":return`A${this.algorithm.length}GCM`;case"AES-ECB":return`A${this.algorithm.length}ECB`;default:throw new yt("Unsupported algorithm name")}}}let pr=(()=>{class r{static checkCryptoKey(e){if(!(e instanceof yr))throw new TypeError("key: Is not AesCryptoKey")}static generateKey(t,r,n){return h(this,void 0,void 0,(function*(){const i=e.nativeCrypto.getRandomValues(new Uint8Array(t.length/8));return new yr(t,r,n,i)}))}static encrypt(e,t,r){return h(this,void 0,void 0,(function*(){return this.cipher(e,t,l.toUint8Array(r),!0)}))}static decrypt(e,t,r){return h(this,void 0,void 0,(function*(){return this.cipher(e,t,l.toUint8Array(r),!1)}))}static exportKey(e,t){return h(this,void 0,void 0,(function*(){switch(e){case"jwk":return t.toJSON();case"raw":return t.raw.buffer;default:throw new gt("format: Must be 'jwk' or 'raw'")}}))}static importKey(e,t,r,n,i){return h(this,void 0,void 0,(function*(){let e;switch(e=mt(t)?c.FromBase64Url(t.k):l.toArrayBuffer(t),e.byteLength<<3){case 128:case 192:case 256:break;default:throw new gt("keyData: Is wrong key length")}return new yr({name:r.name,length:e.byteLength<<3},n,i,new Uint8Array(e))}))}static cipher(e,n,i,o){return h(this,void 0,void 0,(function*(){const s=o?"encrypt":"decrypt";let a;if(fr(e,r.AesCBC)){const r=l.toUint8Array(e.iv);a=t.AES_CBC[s](i,n.raw,void 0,r)}else if(fr(e,r.AesGCM)){const r=l.toUint8Array(e.iv);let o;e.additionalData&&(o=l.toArrayBuffer(e.additionalData));const c=(e.tagLength||128)/8;a=t.AES_GCM[s](i,n.raw,r,o,c)}else{if(!fr(e,r.AesECB))throw new gt("algorithm: Is not recognized");a=t.AES_ECB[s](i,n.raw,!0)}return l.toArrayBuffer(a)}))}}return r.AesCBC="AES-CBC",r.AesECB="AES-ECB",r.AesGCM="AES-GCM",r})();class gr extends kt{onGenerateKey(e,t,r){return h(this,void 0,void 0,(function*(){return pr.generateKey(e,t,r)}))}onEncrypt(e,t,r){return h(this,void 0,void 0,(function*(){return pr.encrypt(e,t,r)}))}onDecrypt(e,t,r){return h(this,void 0,void 0,(function*(){return pr.decrypt(e,t,r)}))}onExportKey(e,t){return h(this,void 0,void 0,(function*(){return pr.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return h(this,void 0,void 0,(function*(){return pr.importKey(e,t,r,n,i)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t),pr.checkCryptoKey(e)}}class dr extends Bt{onGenerateKey(e,t,r){return h(this,void 0,void 0,(function*(){return pr.generateKey(e,t,r)}))}onEncrypt(e,t,r){return h(this,void 0,void 0,(function*(){return pr.encrypt(e,t,r)}))}onDecrypt(e,t,r){return h(this,void 0,void 0,(function*(){return pr.decrypt(e,t,r)}))}onExportKey(e,t){return h(this,void 0,void 0,(function*(){return pr.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return h(this,void 0,void 0,(function*(){return pr.importKey(e,t,r,n,i)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t),pr.checkCryptoKey(e)}}class mr extends At{onGenerateKey(e,t,r){return h(this,void 0,void 0,(function*(){return pr.generateKey(e,t,r)}))}onEncrypt(e,t,r){return h(this,void 0,void 0,(function*(){return pr.encrypt(e,t,r)}))}onDecrypt(e,t,r){return h(this,void 0,void 0,(function*(){return pr.decrypt(e,t,r)}))}onExportKey(e,t){return h(this,void 0,void 0,(function*(){return pr.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return h(this,void 0,void 0,(function*(){return pr.importKey(e,t,r,n,i)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t),pr.checkCryptoKey(e)}}class vr extends bt{onEncrypt(e,r,n){return h(this,void 0,void 0,(function*(){const i=new t.AES_CTR(r.raw,l.toUint8Array(e.counter)).encrypt(l.toUint8Array(n));return l.toArrayBuffer(i)}))}onDecrypt(e,r,n){return h(this,void 0,void 0,(function*(){const i=new t.AES_CTR(r.raw,l.toUint8Array(e.counter)).decrypt(l.toUint8Array(n));return l.toArrayBuffer(i)}))}onGenerateKey(e,t,r){return h(this,void 0,void 0,(function*(){return pr.generateKey(e,t,r)}))}onExportKey(e,t){return h(this,void 0,void 0,(function*(){return pr.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return h(this,void 0,void 0,(function*(){return pr.importKey(e,t,r,n,i)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t),pr.checkCryptoKey(e)}}class wr extends St{onEncrypt(e,t,r){return h(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}onDecrypt(e,t,r){return h(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}onGenerateKey(e,t,r){return h(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}onExportKey(e,t){return h(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}onImportKey(e,t,r,n,i){return h(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t),pr.checkCryptoKey(e)}}class kr extends hr{constructor(e,t,r,n,i){super(e,t,r,n),this.data=i}}let br=(()=>{class t{static checkCryptoKey(e){if(!(e instanceof kr))throw new TypeError("key: Is not RsaCryptoKey")}static generateKey(t,r,n){return h(this,void 0,void 0,(function*(){const i={name:"RSA-PSS",hash:"SHA-256",publicExponent:t.publicExponent,modulusLength:t.modulusLength},o=yield e.nativeSubtle.generateKey(i,!0,["sign","verify"]),s=new Qn,a=yield s.subtle.exportKey("pkcs8",o.privateKey),c=yield s.subtle.importKey("pkcs8",a,t,r,n.filter(e=>this.privateUsages.includes(e))),l=yield s.subtle.exportKey("spki",o.publicKey);return{privateKey:c,publicKey:yield s.subtle.importKey("spki",l,t,!0,n.filter(e=>this.publicUsages.includes(e)))}}))}static exportKey(e,t){return h(this,void 0,void 0,(function*(){switch(e){case"pkcs8":return this.exportPkcs8Key(t);case"spki":return this.exportSpkiKey(t);case"jwk":return this.exportJwkKey(t);default:throw new gt("format: Must be 'jwk', 'pkcs8' or 'spki'")}}))}static importKey(e,t,r,n,i){return h(this,void 0,void 0,(function*(){let o;switch(e){case"pkcs8":o=this.importPkcs8Key(t);break;case"spki":o=this.importSpkiKey(t);break;case"jwk":o=this.importJwkKey(t);break;default:throw new gt("format: Must be 'jwk', 'pkcs8' or 'spki'")}return new kr(Object.assign({publicExponent:1===o[1][1]?o[1].slice(1):o[1].slice(3),modulusLength:o[0].byteLength<<3},r),n,2===o.length?"public":"private",i,o)}))}static randomNonZeroValues(t){return(t=e.nativeCrypto.getRandomValues(t)).map(t=>{for(;!t;)t=e.nativeCrypto.getRandomValues(new Uint8Array(1))[0];return t})}static exportPkcs8Key(e){const t=new Qt;return t.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",t.privateKeyAlgorithm.parameters=null,t.privateKey=$e.serialize(this.exportAsmKey(e.data)),$e.serialize(t)}static importPkcs8Key(e){const t=ze.parse(e,Qt),r=ze.parse(t.privateKey,or);return this.importAsmKey(r)}static importSpkiKey(e){const t=ze.parse(e,er),r=ze.parse(t.publicKey,sr);return this.importAsmKey(r)}static exportSpkiKey(e){const t=new sr;t.modulus=e.data[0].buffer,t.publicExponent=1===e.data[1][1]?e.data[1].buffer.slice(1):e.data[1].buffer.slice(3);const r=new er;return r.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",r.publicKeyAlgorithm.parameters=null,r.publicKey=$e.serialize(t),$e.serialize(r)}static importJwkKey(e){let t;return t=e.d?ut.fromJSON(e,{targetSchema:or}):ut.fromJSON(e,{targetSchema:sr}),this.importAsmKey(t)}static exportJwkKey(e){const t=this.exportAsmKey(e.data),r=lt.toJSON(t);return r.ext=!0,r.key_ops=e.usages,r.kty="RSA",r.alg=this.getJwkAlgorithm(e.algorithm),r}static getJwkAlgorithm(e){switch(e.name.toUpperCase()){case"RSA-OAEP":const t=/(\d+)$/.exec(e.hash.name)[1];return"RSA-OAEP"+("1"!==t?"-"+t:"");case"RSASSA-PKCS1-V1_5":return"RS"+/(\d+)$/.exec(e.hash.name)[1];case"RSA-PSS":return"PS"+/(\d+)$/.exec(e.hash.name)[1];case"RSAES-PKCS1-V1_5":return"PS1";default:throw new gt("algorithm: Is not recognized")}}static exportAsmKey(e){let t;if(e.length>2){const r=new or;r.privateExponent=e[2].buffer,r.prime1=e[3].buffer,r.prime2=e[4].buffer,r.exponent1=e[5].buffer,r.exponent2=e[6].buffer,r.coefficient=e[7].buffer,t=r}else t=new sr;return t.modulus=e[0].buffer,t.publicExponent=1===e[1][1]?e[1].buffer.slice(1):e[1].buffer.slice(3),t}static importAsmKey(e){const t=new Uint8Array(4-e.publicExponent.byteLength),r=[new Uint8Array(e.modulus),nr(t,new Uint8Array(e.publicExponent))];return e instanceof or&&(r.push(new Uint8Array(e.privateExponent)),r.push(new Uint8Array(e.prime1)),r.push(new Uint8Array(e.prime2)),r.push(new Uint8Array(e.exponent1)),r.push(new Uint8Array(e.exponent2)),r.push(new Uint8Array(e.coefficient))),r}}return t.RsaSsa="RSASSA-PKCS1-v1_5",t.RsaPss="RSA-PSS",t.RsaOaep="RSA-OAEP",t.privateUsages=["sign","decrypt","unwrapKey"],t.publicUsages=["verify","encrypt","wrapKey"],t})();class Br{static getDigest(e){switch(e){case"SHA-1":return new t.Sha1;case"SHA-256":return new t.Sha256;case"SHA-512":return new t.Sha512;default:throw new yt("keyAlgorithm.hash: Is not recognized")}}static digest(e,t){return h(this,void 0,void 0,(function*(){const r=this.getDigest(e.name).process(l.toUint8Array(t)).finish().result;return l.toArrayBuffer(r)}))}}class Ar extends Kt{onGenerateKey(e,t,r){return h(this,void 0,void 0,(function*(){return br.generateKey(e,t,r)}))}onExportKey(e,t){return h(this,void 0,void 0,(function*(){return br.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return h(this,void 0,void 0,(function*(){return br.importKey(e,t,r,n,i)}))}onEncrypt(e,t,r){return h(this,void 0,void 0,(function*(){return this.cipher(e,t,r)}))}onDecrypt(e,t,r){return h(this,void 0,void 0,(function*(){return this.cipher(e,t,r)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t),br.checkCryptoKey(e)}cipher(e,r,n){const i=Br.getDigest(r.algorithm.hash.name);let o;e.label&&(o=l.toUint8Array(e.label));const s=new t.RSA_OAEP(r.data,i,o);let a;const c=l.toUint8Array(n);return a="public"===r.type?s.encrypt(c):s.decrypt(c),l.toArrayBuffer(a)}}class Sr extends Et{onGenerateKey(e,t,r){return h(this,void 0,void 0,(function*(){return br.generateKey(e,t,r)}))}onExportKey(e,t){return h(this,void 0,void 0,(function*(){return br.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return h(this,void 0,void 0,(function*(){return br.importKey(e,t,r,n,i)}))}onSign(e,r,n){return h(this,void 0,void 0,(function*(){const i=new t.RSA_PSS(r.data,Br.getDigest(r.algorithm.hash.name),e.saltLength).sign(l.toUint8Array(n));return l.toArrayBuffer(i)}))}onVerify(e,r,n,i){return h(this,void 0,void 0,(function*(){const o=new t.RSA_PSS(r.data,Br.getDigest(r.algorithm.hash.name),e.saltLength);try{o.verify(l.toUint8Array(n),l.toUint8Array(i))}catch(e){return!1}return!0}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t),br.checkCryptoKey(e)}}class xr extends Nt{onGenerateKey(e,t,r){return h(this,void 0,void 0,(function*(){return br.generateKey(e,t,r)}))}onExportKey(e,t){return h(this,void 0,void 0,(function*(){return br.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return h(this,void 0,void 0,(function*(){return br.importKey(e,t,r,n,i)}))}onSign(e,r,n){return h(this,void 0,void 0,(function*(){const e=new t.RSA_PKCS1_v1_5(r.data,Br.getDigest(r.algorithm.hash.name)).sign(l.toUint8Array(n));return l.toArrayBuffer(e)}))}onVerify(e,r,n,i){return h(this,void 0,void 0,(function*(){const e=new t.RSA_PKCS1_v1_5(r.data,Br.getDigest(r.algorithm.hash.name));try{e.verify(l.toUint8Array(n),l.toUint8Array(i))}catch(e){return!1}return!0}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t),br.checkCryptoKey(e)}}class Cr extends vt{constructor(){super(...arguments),this.name="RSAES-PKCS1-v1_5",this.usages={publicKey:["encrypt","wrapKey"],privateKey:["decrypt","unwrapKey"]},this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"]}onGenerateKey(e,t,r){return h(this,void 0,void 0,(function*(){return br.generateKey(e,t,r)}))}checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"publicExponent"),!(e.publicExponent&&e.publicExponent instanceof Uint8Array))throw new TypeError("publicExponent: Missing or not a Uint8Array");const t=c.ToBase64(e.publicExponent);if("Aw=="!==t&&"AQAB"!==t)throw new TypeError("publicExponent: Must be [3] or [1,0,1]");switch(this.checkRequiredProperty(e,"modulusLength"),e.modulusLength){case 1024:case 2048:case 4096:break;default:throw new TypeError("modulusLength: Must be 1024, 2048, or 4096")}}onDecrypt(e,r,n){return h(this,void 0,void 0,(function*(){const e=new t.RSA(r.data).decrypt(new t.BigNumber(l.toUint8Array(n))).result,i=r.algorithm.modulusLength>>3;if(n.byteLength!==i)throw new ft("Decryption error. Encrypted message size doesn't match to key length");let o=0;if(e[o++]||2!==e[o++])throw new ft("Decryption error");do{if(0===e[o++])break}while(o<e.length);if(o<11)throw new ft("Decryption error. PS is less than 8 octets.");if(o===e.length)throw new ft("Decryption error. There is no octet with hexadecimal value 0x00 to separate PS from M");return e.buffer.slice(o)}))}onEncrypt(e,r,n){return h(this,void 0,void 0,(function*(){const e=r.algorithm.modulusLength>>3;if(n.byteLength>e-11)throw new ft("Message too long");const i=e-n.byteLength-3,o=br.randomNonZeroValues(new Uint8Array(i)),s=new Uint8Array(e);s[0]=0,s[1]=2,s.set(o,2),s[2+i]=0,s.set(new Uint8Array(n),3+i);const a=new t.RSA(r.data).encrypt(new t.BigNumber(s)).result;return l.toArrayBuffer(a)}))}onExportKey(e,t){return h(this,void 0,void 0,(function*(){return br.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return h(this,void 0,void 0,(function*(){return yield br.importKey(e,t,Object.assign(Object.assign({},r),{name:this.name}),n,i)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t),br.checkCryptoKey(e)}prepareSignData(e,t){return h(this,void 0,void 0,(function*(){return(new Qn).subtle.digest(e.hash,t)}))}}const Nr={"1.2.840.10045.3.1.7":"P-256","P-256":"1.2.840.10045.3.1.7","1.3.132.0.34":"P-384","P-384":"1.3.132.0.34","1.3.132.0.35":"P-521","P-521":"1.3.132.0.35","1.3.132.0.10":"K-256","K-256":"1.3.132.0.10"};function Er(e){const t=Nr[e];if(!t)throw new gt(`Cannot convert WebCrypto named curve '${e}' to OID`);return t}class Kr extends hr{constructor(e,t,r,n,i){super(e,t,r,n),this.data=i}}let Ur=(()=>{class e{static checkLib(){if(void 0===r)throw new gt("Cannot implement EC mechanism. Add 'https://peculiarventures.github.io/pv-webcrypto-tests/src/elliptic.js' script to your project")}static generateKey(e,t,r){return h(this,void 0,void 0,(function*(){this.checkLib();const n=this.initEcKey(e.namedCurve).genKeyPair();return n.getPublic(),{privateKey:new Kr(Object.assign({},e),t,"private",r.filter(e=>~this.privateUsages.indexOf(e)),n),publicKey:new Kr(Object.assign({},e),!0,"public",r.filter(e=>~this.publicUsages.indexOf(e)),n)}}))}static checkCryptoKey(e){if(!(e instanceof Kr))throw new TypeError("key: Is not EcCryptoKey")}static concat(...e){const t=new Uint8Array(e.map(e=>e.length).reduce((e,t)=>e+t));let r=0;return e.forEach((e,n)=>{for(let n=0;n<e.length;n++)t[r+n]=e[n];r+=e.length}),t}static exportKey(e,t){return h(this,void 0,void 0,(function*(){switch(this.checkLib(),e){case"pkcs8":return this.exportPkcs8Key(t);case"spki":return this.exportSpkiKey(t);case"jwk":return this.exportJwkKey(t);case"raw":return new Uint8Array(t.data.getPublic("der")).buffer;default:throw new gt("format: Must be 'jwk', 'raw, 'pkcs8' or 'spki'")}}))}static importKey(e,t,r,n,i){return h(this,void 0,void 0,(function*(){let o;switch(this.checkLib(),e){case"pkcs8":o=this.importPkcs8Key(t,r.namedCurve);break;case"spki":o=this.importSpkiKey(t,r.namedCurve);break;case"raw":o=this.importEcKey(new ar(t),r.namedCurve);break;case"jwk":o=this.importJwkKey(t);break;default:throw new gt("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}return new Kr(Object.assign({},r),n,o.priv?"private":"public",i,o)}))}static getNamedCurve(e){const t=e.toUpperCase();let r="";if(["P-256","P-384","P-521"].indexOf(t)>-1)r=t.replace("-","").toLowerCase();else{if("K-256"!==t)throw new gt(`Unsupported named curve '${e}'`);r="secp256k1"}return r}static initEcKey(e){return r.ec(this.getNamedCurve(e))}static exportPkcs8Key(e){const t=new Qt;return t.privateKeyAlgorithm.algorithm=this.ASN_ALGORITHM,t.privateKeyAlgorithm.parameters=$e.serialize(new Xt(Er(e.algorithm.namedCurve))),t.privateKey=$e.serialize(this.exportEcKey(e)),$e.serialize(t)}static importPkcs8Key(e,t){const r=ze.parse(e,Qt),n=ze.parse(r.privateKey,cr);return this.importEcKey(n,t)}static importSpkiKey(e,t){const r=ze.parse(e,er),n=new ar(r.publicKey);return this.importEcKey(n,t)}static exportSpkiKey(e){const t=new ar(new Uint8Array(e.data.getPublic("der")).buffer),r=new er;return r.publicKeyAlgorithm.algorithm=this.ASN_ALGORITHM,r.publicKeyAlgorithm.parameters=$e.serialize(new Xt(Er(e.algorithm.namedCurve))),r.publicKey=t.value,$e.serialize(r)}static importJwkKey(e){let t;return t=e.d?ut.fromJSON(e,{targetSchema:cr}):ut.fromJSON(e,{targetSchema:ar}),this.importEcKey(t,e.crv)}static exportJwkKey(e){const t=this.exportEcKey(e),r=lt.toJSON(t);return r.ext=!0,r.key_ops=e.usages,r.crv=e.algorithm.namedCurve,r.kty="EC",r}static exportEcKey(e){if("private"===e.type){const t=new cr,r=new Uint8Array(e.data.getPrivate("der").toArray()),n=new Uint8Array(this.getPointSize(e.algorithm.namedCurve)-r.length);return t.privateKey=nr(n,r),t.publicKey=new Uint8Array(e.data.getPublic("der")),t}if(e.data.pub)return new ar(new Uint8Array(e.data.getPublic("der")).buffer);throw new Error("Cannot get private or public key")}static importEcKey(e,t){const r=this.initEcKey(t);return e instanceof ar?r.keyFromPublic(new Uint8Array(e.value)):r.keyFromPrivate(new Uint8Array(e.privateKey))}static getPointSize(e){switch(e){case"P-256":case"K-256":return 32;case"P-384":return 48;case"P-521":return 66}throw new Error("namedCurve: Is not recognized")}}return e.privateUsages=["sign","deriveKey","deriveBits"],e.publicUsages=["verify"],e.ASN_ALGORITHM="1.2.840.10045.2.1",e})();class Or extends It{onGenerateKey(e,t,r){return h(this,void 0,void 0,(function*(){return Ur.generateKey(e,t,r)}))}onExportKey(e,t){return h(this,void 0,void 0,(function*(){return Ur.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return h(this,void 0,void 0,(function*(){return Ur.importKey(e,t,r,n,i)}))}onDeriveBits(e,t,r){return h(this,void 0,void 0,(function*(){Ur.checkLib();const n=t.data.derive(e.public.data.getPublic());let i=new Uint8Array(n.toArray()),o=i.length;return o=o>32?o>48?66:48:32,i.length<o&&(i=Ur.concat(new Uint8Array(o-i.length),i)),i.slice(0,r/8).buffer}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t),Ur.checkCryptoKey(e)}}function Hr(e){const t=new Uint8Array(e),r=[];for(let e=0;e<t.length;e++)r.push(t[e]);return r}function Lr(e,t){let r="";for(let t=0;t<e.length;t++){const n=e[t].toString(16);r+=n.length%2?"0"+n:n}if(t){let t=e.length;t=t>32?t>48?66:48:32,r.length/2<t&&(r=new Array(2*t-r.length+1).join("0")+r)}return r}class Ir extends Ot{onGenerateKey(e,t,r){return h(this,void 0,void 0,(function*(){return Ur.generateKey(e,t,r)}))}onExportKey(e,t){return h(this,void 0,void 0,(function*(){return Ur.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return h(this,void 0,void 0,(function*(){return Ur.importKey(e,t,r,n,i)}))}onSign(e,t,r){return h(this,void 0,void 0,(function*(){Ur.checkLib();const n=new Qn;let i;i=Hr(yield n.subtle.digest(e.hash,r));const o=yield t.data.sign(i);return function(e,t){e.length%2&&(e="0"+e);let r=new Uint8Array(e.length/2);for(let t=0;t<e.length;t++){const n=e.slice(t,1+ ++t);r[(t-1)/2]=parseInt(n,16)}if(t){let e=r.length;e=e>32?e>48?66:48:32,r.length<e&&(r=Ur.concat(new Uint8Array(e-r.length),r))}return r}(Lr(o.r.toArray(),!0)+Lr(o.s.toArray(),!0)).buffer}))}onVerify(e,t,r,n){return h(this,void 0,void 0,(function*(){Ur.checkLib();const i=new Qn,o={r:new Uint8Array(r.slice(0,r.byteLength/2)),s:new Uint8Array(r.slice(r.byteLength/2))},s=Hr(yield i.subtle.digest(e.hash,n));return t.data.verify(s,o)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t),Ur.checkCryptoKey(e)}}class Pr extends vt{constructor(){super(...arguments),this.name="SHA-1",this.usages=[]}onDigest(e,t){return h(this,void 0,void 0,(function*(){return Br.digest(e,t)}))}}class Tr extends Pr{constructor(){super(...arguments),this.name="SHA-256"}}class Rr extends Pr{constructor(){super(...arguments),this.name="SHA-512"}}class Dr extends hr{constructor(e,t,r,n){super(e,t,"secret",r),this.raw=n}}class _r extends Tt{onImportKey(e,t,r,n,i){return h(this,void 0,void 0,(function*(){return new Dr(r,n,i,l.toUint8Array(t))}))}onDeriveBits(e,r,n){return h(this,void 0,void 0,(function*(){let i;const o=l.toUint8Array(e.salt),s=r.raw;switch(e.hash.name.toUpperCase()){case"SHA-1":i=t.Pbkdf2HmacSha1(s,o,e.iterations,n>>3);break;case"SHA-256":i=t.Pbkdf2HmacSha256(s,o,e.iterations,n>>3);break;case"SHA-512":i=t.Pbkdf2HmacSha512(s,o,e.iterations,n>>3);break;default:throw new gt(`algorithm.hash: '${e.hash.name}' hash algorithm is not supported`)}return l.toArrayBuffer(i)}))}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(e instanceof Dr))throw new TypeError("key: Is not PbkdfCryptoKey")}}var jr=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24],Vr=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11],Jr=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7],Mr={readUInt32BE:function(e,t){return(e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])>>>0},writeUInt32BE:function(e,t,r){e[0+r]=t>>>24,e[1+r]=t>>>16&255,e[2+r]=t>>>8&255,e[3+r]=255&t},ip:function(e,t,r,n){for(var i=0,o=0,s=6;s>=0;s-=2){for(var a=0;a<=24;a+=8)i<<=1,i|=t>>>a+s&1;for(a=0;a<=24;a+=8)i<<=1,i|=e>>>a+s&1}for(s=6;s>=0;s-=2){for(a=1;a<=25;a+=8)o<<=1,o|=t>>>a+s&1;for(a=1;a<=25;a+=8)o<<=1,o|=e>>>a+s&1}r[n+0]=i>>>0,r[n+1]=o>>>0},rip:function(e,t,r,n){for(var i=0,o=0,s=0;s<4;s++)for(var a=24;a>=0;a-=8)i<<=1,i|=t>>>a+s&1,i<<=1,i|=e>>>a+s&1;for(s=4;s<8;s++)for(a=24;a>=0;a-=8)o<<=1,o|=t>>>a+s&1,o<<=1,o|=e>>>a+s&1;r[n+0]=i>>>0,r[n+1]=o>>>0},pc1:function(e,t,r,n){for(var i=0,o=0,s=7;s>=5;s--){for(var a=0;a<=24;a+=8)i<<=1,i|=t>>a+s&1;for(a=0;a<=24;a+=8)i<<=1,i|=e>>a+s&1}for(a=0;a<=24;a+=8)i<<=1,i|=t>>a+s&1;for(s=1;s<=3;s++){for(a=0;a<=24;a+=8)o<<=1,o|=t>>a+s&1;for(a=0;a<=24;a+=8)o<<=1,o|=e>>a+s&1}for(a=0;a<=24;a+=8)o<<=1,o|=e>>a+s&1;r[n+0]=i>>>0,r[n+1]=o>>>0},r28shl:function(e,t){return e<<t&268435455|e>>>28-t},pc2:function(e,t,r,n){for(var i=0,o=0,s=jr.length>>>1,a=0;a<s;a++)i<<=1,i|=e>>>jr[a]&1;for(a=s;a<jr.length;a++)o<<=1,o|=t>>>jr[a]&1;r[n+0]=i>>>0,r[n+1]=o>>>0},expand:function(e,t,r){var n=0,i=0;n=(1&e)<<5|e>>>27;for(var o=23;o>=15;o-=4)n<<=6,n|=e>>>o&63;for(o=11;o>=3;o-=4)i|=e>>>o&63,i<<=6;i|=(31&e)<<1|e>>>31,t[r+0]=n>>>0,t[r+1]=i>>>0},substitute:function(e,t){for(var r=0,n=0;n<4;n++){r<<=4,r|=Vr[64*n+(e>>>18-6*n&63)]}for(n=0;n<4;n++){r<<=4,r|=Vr[256+64*n+(t>>>18-6*n&63)]}return r>>>0},permute:function(e){for(var t=0,r=0;r<Jr.length;r++)t<<=1,t|=e>>>Jr[r]&1;return t>>>0},padSplit:function(e,t,r){for(var n=e.toString(2);n.length<t;)n="0"+n;for(var i=[],o=0;o<t;o+=r)i.push(n.slice(o,o+r));return i.join(" ")}},Fr=zr;function zr(e,t){if(!e)throw new Error(t||"Assertion failed")}function $r(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}zr.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var Gr=$r;$r.prototype._init=function(){},$r.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},$r.prototype._buffer=function(e,t){for(var r=Math.min(this.buffer.length-this.bufferOff,e.length-t),n=0;n<r;n++)this.buffer[this.bufferOff+n]=e[t+n];return this.bufferOff+=r,r},$r.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},$r.prototype._updateEncrypt=function(e){var t=0,r=0,n=(this.bufferOff+e.length)/this.blockSize|0,i=new Array(n*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(r+=this._flushBuffer(i,r)));for(var o=e.length-(e.length-t)%this.blockSize;t<o;t+=this.blockSize)this._update(e,t,i,r),r+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return i},$r.prototype._updateDecrypt=function(e){for(var t=0,r=0,n=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,i=new Array(n*this.blockSize);n>0;n--)t+=this._buffer(e,t),r+=this._flushBuffer(i,r);return t+=this._buffer(e,t),i},$r.prototype.final=function(e){var t,r;return e&&(t=this.update(e)),r="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(r):r},$r.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},$r.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e},$r.prototype._unpad=function(e){return e},$r.prototype._finalDecrypt=function(){Fr.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)};var qr="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},Wr=/%[sdj%]/g;function Zr(e){if(!un(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(Qr(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,o=String(e).replace(Wr,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),s=n[r];r<i;s=n[++r])cn(s)||!yn(s)?o+=" "+s:o+=" "+Qr(s);return o}var Xr,Yr={};function Qr(e,t){var r={seen:[],stylize:tn};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),an(t)?r.showHidden=t:t&&bn(r,t),hn(r.showHidden)&&(r.showHidden=!1),hn(r.depth)&&(r.depth=2),hn(r.colors)&&(r.colors=!1),hn(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=en),rn(r,e,r.depth)}function en(e,t){var r=Qr.styles[t];return r?"["+Qr.colors[r][0]+"m"+e+"["+Qr.colors[r][1]+"m":e}function tn(e,t){return e}function rn(e,t,r){if(e.customInspect&&t&&dn(t.inspect)&&t.inspect!==Qr&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return un(n)||(n=rn(e,n,r)),n}var i=function(e,t){if(hn(t))return e.stylize("undefined","undefined");if(un(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(ln(t))return e.stylize(""+t,"number");if(an(t))return e.stylize(""+t,"boolean");if(cn(t))return e.stylize("null","null")}(e,t);if(i)return i;var o=Object.keys(t),s=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),gn(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return nn(t);if(0===o.length){if(dn(t)){var a=t.name?": "+t.name:"";return e.stylize("[Function"+a+"]","special")}if(fn(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(pn(t))return e.stylize(Date.prototype.toString.call(t),"date");if(gn(t))return nn(t)}var c,l="",u=!1,h=["{","}"];(sn(t)&&(u=!0,h=["[","]"]),dn(t))&&(l=" [Function"+(t.name?": "+t.name:"")+"]");return fn(t)&&(l=" "+RegExp.prototype.toString.call(t)),pn(t)&&(l=" "+Date.prototype.toUTCString.call(t)),gn(t)&&(l=" "+nn(t)),0!==o.length||u&&0!=t.length?r<0?fn(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=u?function(e,t,r,n,i){for(var o=[],s=0,a=t.length;s<a;++s)Bn(t,String(s))?o.push(on(e,t,r,n,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(on(e,t,r,n,i,!0))})),o}(e,t,r,s,o):o.map((function(n){return on(e,t,r,s,n,u)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(c,l,h)):h[0]+l+h[1]}function nn(e){return"["+Error.prototype.toString.call(e)+"]"}function on(e,t,r,n,i,o){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),Bn(n,i)||(s="["+i+"]"),a||(e.seen.indexOf(c.value)<0?(a=cn(r)?rn(e,c.value,null):rn(e,c.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),hn(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function sn(e){return Array.isArray(e)}function an(e){return"boolean"==typeof e}function cn(e){return null===e}function ln(e){return"number"==typeof e}function un(e){return"string"==typeof e}function hn(e){return void 0===e}function fn(e){return yn(e)&&"[object RegExp]"===mn(e)}function yn(e){return"object"==typeof e&&null!==e}function pn(e){return yn(e)&&"[object Date]"===mn(e)}function gn(e){return yn(e)&&("[object Error]"===mn(e)||e instanceof Error)}function dn(e){return"function"==typeof e}function mn(e){return Object.prototype.toString.call(e)}function vn(e){return e<10?"0"+e.toString(10):e.toString(10)}Qr.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Qr.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var wn=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function kn(){var e=new Date,t=[vn(e.getHours()),vn(e.getMinutes()),vn(e.getSeconds())].join(":");return[e.getDate(),wn[e.getMonth()],t].join(" ")}function bn(e,t){if(!t||!yn(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function Bn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var An={inherits:qr,_extend:bn,log:function(){console.log("%s - %s",kn(),Zr.apply(null,arguments))},isBuffer:function(e){return Buffer.isBuffer(e)},isPrimitive:function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},isFunction:dn,isError:gn,isDate:pn,isObject:yn,isRegExp:fn,isUndefined:hn,isSymbol:function(e){return"symbol"==typeof e},isString:un,isNumber:ln,isNullOrUndefined:function(e){return null==e},isNull:cn,isBoolean:an,isArray:sn,inspect:Qr,deprecate:function e(t,r){if(hn(global.process))return function(){return e(t,r).apply(this,arguments)};var n=!1;return function(){return n||(console.error(r),n=!0),t.apply(this,arguments)}},format:Zr,debuglog:function(e){if(hn(Xr)&&(Xr=""),e=e.toUpperCase(),!Yr[e])if(new RegExp("\\b"+e+"\\b","i").test(Xr)){Yr[e]=function(){var t=Zr.apply(null,arguments);console.error("%s %d: %s",e,0,t)}}else Yr[e]=function(){};return Yr[e]}},Sn=f((function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}})),xn=f((function(e){try{var t=An;if("function"!=typeof t.inherits)throw"";e.exports=t.inherits}catch(t){e.exports=Sn}}));function Cn(){this.tmp=new Array(2),this.keys=null}function Nn(e){Gr.call(this,e);var t=new Cn;this._desState=t,this.deriveKeys(t,e.key)}xn(Nn,Gr);var En=Nn;Nn.create=function(e){return new Nn(e)};var Kn=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];Nn.prototype.deriveKeys=function(e,t){e.keys=new Array(32),Fr.equal(t.length,this.blockSize,"Invalid key length");var r=Mr.readUInt32BE(t,0),n=Mr.readUInt32BE(t,4);Mr.pc1(r,n,e.tmp,0),r=e.tmp[0],n=e.tmp[1];for(var i=0;i<e.keys.length;i+=2){var o=Kn[i>>>1];r=Mr.r28shl(r,o),n=Mr.r28shl(n,o),Mr.pc2(r,n,e.keys,i)}},Nn.prototype._update=function(e,t,r,n){var i=this._desState,o=Mr.readUInt32BE(e,t),s=Mr.readUInt32BE(e,t+4);Mr.ip(o,s,i.tmp,0),o=i.tmp[0],s=i.tmp[1],"encrypt"===this.type?this._encrypt(i,o,s,i.tmp,0):this._decrypt(i,o,s,i.tmp,0),o=i.tmp[0],s=i.tmp[1],Mr.writeUInt32BE(r,o,n),Mr.writeUInt32BE(r,s,n+4)},Nn.prototype._pad=function(e,t){for(var r=e.length-t,n=t;n<e.length;n++)e[n]=r;return!0},Nn.prototype._unpad=function(e){for(var t=e[e.length-1],r=e.length-t;r<e.length;r++)Fr.equal(e[r],t);return e.slice(0,e.length-t)},Nn.prototype._encrypt=function(e,t,r,n,i){for(var o=t,s=r,a=0;a<e.keys.length;a+=2){var c=e.keys[a],l=e.keys[a+1];Mr.expand(s,e.tmp,0),c^=e.tmp[0],l^=e.tmp[1];var u=Mr.substitute(c,l),h=s;s=(o^Mr.permute(u))>>>0,o=h}Mr.rip(s,o,n,i)},Nn.prototype._decrypt=function(e,t,r,n,i){for(var o=r,s=t,a=e.keys.length-2;a>=0;a-=2){var c=e.keys[a],l=e.keys[a+1];Mr.expand(o,e.tmp,0),c^=e.tmp[0],l^=e.tmp[1];var u=Mr.substitute(c,l),h=o;o=(s^Mr.permute(u))>>>0,s=h}Mr.rip(o,s,n,i)};var Un={};function On(e){Fr.equal(e.length,8,"Invalid IV length"),this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}var Hn=function(e){function t(t){e.call(this,t),this._cbcInit()}xn(t,e);for(var r=Object.keys(Un),n=0;n<r.length;n++){var i=r[n];t.prototype[i]=Un[i]}return t.create=function(e){return new t(e)},t};Un._cbcInit=function(){var e=new On(this.options.iv);this._cbcState=e},Un._update=function(e,t,r,n){var i=this._cbcState,o=this.constructor.super_.prototype,s=i.iv;if("encrypt"===this.type){for(var a=0;a<this.blockSize;a++)s[a]^=e[t+a];o._update.call(this,s,0,r,n);for(a=0;a<this.blockSize;a++)s[a]=r[n+a]}else{o._update.call(this,e,t,r,n);for(a=0;a<this.blockSize;a++)r[n+a]^=s[a];for(a=0;a<this.blockSize;a++)s[a]=e[t+a]}};var Ln={instantiate:Hn};function In(e,t){Fr.equal(t.length,24,"Invalid key length");var r=t.slice(0,8),n=t.slice(8,16),i=t.slice(16,24);this.ciphers="encrypt"===e?[En.create({type:"encrypt",key:r}),En.create({type:"decrypt",key:n}),En.create({type:"encrypt",key:i})]:[En.create({type:"decrypt",key:i}),En.create({type:"encrypt",key:n}),En.create({type:"decrypt",key:r})]}function Pn(e){Gr.call(this,e);var t=new In(this.type,this.options.key);this._edeState=t}xn(Pn,Gr);var Tn=Pn;Pn.create=function(e){return new Pn(e)},Pn.prototype._update=function(e,t,r,n){var i=this._edeState;i.ciphers[0]._update(e,t,r,n),i.ciphers[1]._update(r,n,r,n),i.ciphers[2]._update(r,n,r,n)},Pn.prototype._pad=En.prototype._pad,Pn.prototype._unpad=En.prototype._unpad;var Rn=Mr,Dn=Gr,_n=En,jn=Ln,Vn=Tn,Jn={utils:Rn,Cipher:Dn,DES:_n,CBC:jn,EDE:Vn},Mn=Object.freeze({__proto__:null,default:Jn,__moduleExports:Jn,utils:Rn,Cipher:Dn,DES:_n,CBC:jn,EDE:Vn});class Fn extends hr{constructor(e,t,r,n){super(e,t,"secret",r),this.raw=n}toJSON(){return{kty:"oct",alg:this.getJwkAlgorithm(),k:c.ToBase64Url(this.raw),ext:this.extractable,key_ops:this.usages}}getJwkAlgorithm(){switch(this.algorithm.name.toUpperCase()){case"DES-CBC":return"DES-CBC";case"DES-EDE3-CBC":return"3DES-CBC";default:throw new yt("Unsupported algorithm name")}}}class zn{static checkLib(){if(void 0===Mn)throw new gt("Cannot implement DES mechanism. Add 'https://peculiarventures.github.io/pv-webcrypto-tests/src/des.js' script to your project")}static checkCryptoKey(e){if(!(e instanceof Fn))throw new TypeError("key: Is not DesCryptoKey")}static generateKey(t,r,n){return h(this,void 0,void 0,(function*(){this.checkLib();const i=e.nativeCrypto.getRandomValues(new Uint8Array(t.length/8));return new Fn(t,r,n,i)}))}static exportKey(e,t){return h(this,void 0,void 0,(function*(){switch(this.checkLib(),e){case"jwk":return t.toJSON();case"raw":return t.raw.buffer;default:throw new gt("format: Must be 'jwk' or 'raw'")}}))}static importKey(e,t,r,n,i){return h(this,void 0,void 0,(function*(){let e;if(this.checkLib(),e=mt(t)?c.FromBase64Url(t.k):l.toArrayBuffer(t),"DES-CBC"===r.name&&8!==e.byteLength||"DES-EDE3-CBC"===r.name&&24!==e.byteLength)throw new gt("keyData: Is wrong key length");return new Fn({name:r.name,length:e.byteLength<<3},n,i,new Uint8Array(e))}))}static encrypt(e,t,r){return h(this,void 0,void 0,(function*(){return this.cipher(e,t,r,!0)}))}static decrypt(e,t,r){return h(this,void 0,void 0,(function*(){return this.cipher(e,t,r,!1)}))}static cipher(e,t,r,n){return h(this,void 0,void 0,(function*(){this.checkLib();const i=n?"encrypt":"decrypt";let o;const s=l.toUint8Array(e.iv);switch(e.name.toUpperCase()){case"DES-CBC":o=jn.instantiate(_n).create({key:t.raw,type:i,iv:s});break;case"DES-EDE3-CBC":o=jn.instantiate(Vn).create({key:t.raw,type:i,iv:s});break;default:throw new gt("algorithm: Is not recognized")}const a=o.update(new Uint8Array(r)).concat(o.final());return new Uint8Array(a).buffer}))}}class $n extends xt{constructor(){super(...arguments),this.keySizeBits=64,this.ivSize=8,this.name="DES-CBC"}onGenerateKey(e,t,r){return h(this,void 0,void 0,(function*(){return zn.generateKey(e,t,r)}))}onExportKey(e,t){return h(this,void 0,void 0,(function*(){return zn.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return h(this,void 0,void 0,(function*(){return zn.importKey(e,t,r,n,i)}))}onEncrypt(e,t,r){return h(this,void 0,void 0,(function*(){return zn.encrypt(e,t,r)}))}onDecrypt(e,t,r){return h(this,void 0,void 0,(function*(){return zn.decrypt(e,t,r)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t),zn.checkCryptoKey(e)}}class Gn extends xt{constructor(){super(...arguments),this.keySizeBits=192,this.ivSize=8,this.name="DES-EDE3-CBC"}onGenerateKey(e,t,r){return h(this,void 0,void 0,(function*(){return zn.generateKey(e,t,r)}))}onExportKey(e,t){return h(this,void 0,void 0,(function*(){return zn.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return h(this,void 0,void 0,(function*(){return zn.importKey(e,t,r,n,i)}))}onEncrypt(e,t,r){return h(this,void 0,void 0,(function*(){return zn.encrypt(e,t,r)}))}onDecrypt(e,t,r){return h(this,void 0,void 0,(function*(){return zn.decrypt(e,t,r)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t),zn.checkCryptoKey(e)}}let qn=(()=>{class e extends hr{constructor(e={name:"HMAC"},t=!1,r=[],n=new Uint8Array(0)){super(e,t,"secret",r),this.kty="oct",this.data=n}get alg(){return"HS"+this.algorithm.hash.name.toUpperCase().replace("SHA-","")}set alg(e){}}return u([ht({name:"ext",type:Qe.Boolean,optional:!0})],e.prototype,"extractable",void 0),u([ht({name:"key_ops",type:Qe.String,repeated:!0,optional:!0})],e.prototype,"usages",void 0),u([ht({name:"k",converter:tr})],e.prototype,"data",void 0),u([ht({type:Qe.String})],e.prototype,"kty",void 0),u([ht({type:Qe.String})],e.prototype,"alg",null),e})();class Wn extends Pt{onGenerateKey(t,r,n){return h(this,void 0,void 0,(function*(){const i=t.length||this.getDefaultLength(t.hash.name),o=e.nativeCrypto.getRandomValues(new Uint8Array(i>>3));return new qn(t,r,n,o)}))}onSign(e,r,n){return h(this,void 0,void 0,(function*(){let e;switch(r.algorithm.hash.name.toUpperCase()){case"SHA-1":e=t.HmacSha1;break;case"SHA-256":e=t.HmacSha256;break;case"SHA-512":e=t.HmacSha512;break;default:throw new gt("key.algorithm.hash: Is not recognized")}const i=new e(r.data).process(l.toUint8Array(n)).finish().result;return l.toArrayBuffer(i)}))}onVerify(e,t,r,n){return h(this,void 0,void 0,(function*(){const i=yield this.onSign(e,t,n);return c.ToHex(i)===c.ToHex(r)}))}onImportKey(e,t,r,n,i){return h(this,void 0,void 0,(function*(){let o;switch(e.toLowerCase()){case"jwk":o=ut.fromJSON(t,{targetSchema:qn});break;case"raw":if(!l.isBufferSource(t))throw new TypeError("keyData: Is not ArrayBuffer or ArrayBufferView");o=new qn(r,n,i,l.toUint8Array(t));break;default:throw new gt("format: Must be 'jwk' or 'raw'")}return o.algorithm={hash:{name:r.hash.name},name:this.name,length:o.data.length<<3},o.extractable=n,o.usages=i,o}))}onExportKey(e,t){return h(this,void 0,void 0,(function*(){switch(e.toLowerCase()){case"jwk":return lt.toJSON(t);case"raw":return new Uint8Array(t.data).buffer;default:throw new gt("format: Must be 'jwk' or 'raw'")}}))}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(e instanceof qn))throw new TypeError("key: Is not HMAC CryptoKey")}}var Zn;class Xn extends hr{constructor(e,t,r,n,i){super(e,t,r,n),Zn.set(this,void 0),function(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");t.set(e,r)}(this,Zn,i)}getNative(){return function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(this,Zn)}}Zn=new WeakMap;let Yn=(()=>{class t extends Dt{constructor(){super(),this.browserInfo=function(){const e={name:rr.Unknown,version:"0"};if("undefined"==typeof self)return e;const t=self.navigator.userAgent;let r;return(r=/edge\/([\d\.]+)/i.exec(t))?(e.name=rr.Edge,e.version=r[1]):/msie/i.test(t)?(e.name=rr.IE,e.version=/msie ([\d\.]+)/i.exec(t)[1]):/Trident/i.test(t)?(e.name=rr.IE,e.version=/rv:([\d\.]+)/i.exec(t)[1]):/chrome/i.test(t)?(e.name=rr.Chrome,e.version=/chrome\/([\d\.]+)/i.exec(t)[1]):/firefox/i.test(t)?(e.name=rr.Firefox,e.version=/firefox\/([\d\.]+)/i.exec(t)[1]):/mobile/i.test(t)?(e.name=rr.Mobile,e.version=/mobile\/([\w]+)/i.exec(t)[1]):/safari/i.test(t)&&(e.name=rr.Safari,e.version=/version\/([\d\.]+)/i.exec(t)[1]),e}(),this.providers.set(new gr),this.providers.set(new vr),this.providers.set(new dr),this.providers.set(new mr),this.providers.set(new wr),this.providers.set(new $n),this.providers.set(new Gn),this.providers.set(new xr),this.providers.set(new Sr),this.providers.set(new Ar),this.providers.set(new Cr),this.providers.set(new Ir),this.providers.set(new Or),this.providers.set(new Pr),this.providers.set(new Tr),this.providers.set(new Rr),this.providers.set(new _r),this.providers.set(new Wn)}static isAnotherKey(e){return"object"==typeof e&&"string"==typeof e.type&&"boolean"==typeof e.extractable&&"object"==typeof e.algorithm&&!(e instanceof hr)}digest(...e){return h(this,void 0,void 0,(function*(){return this.wrapNative("digest",...e)}))}importKey(...e){return h(this,void 0,void 0,(function*(){return this.fixFirefoxEcImportPkcs8(e),this.wrapNative("importKey",...e)}))}exportKey(...e){return h(this,void 0,void 0,(function*(){return(yield this.fixFirefoxEcExportPkcs8(e))||(yield this.wrapNative("exportKey",...e))}))}generateKey(...e){return h(this,void 0,void 0,(function*(){return this.wrapNative("generateKey",...e)}))}sign(...e){return h(this,void 0,void 0,(function*(){return this.wrapNative("sign",...e)}))}verify(...e){return h(this,void 0,void 0,(function*(){return this.wrapNative("verify",...e)}))}encrypt(...e){return h(this,void 0,void 0,(function*(){return this.wrapNative("encrypt",...e)}))}decrypt(...e){return h(this,void 0,void 0,(function*(){return this.wrapNative("decrypt",...e)}))}wrapKey(...e){return h(this,void 0,void 0,(function*(){return this.wrapNative("wrapKey",...e)}))}unwrapKey(...e){return h(this,void 0,void 0,(function*(){return this.wrapNative("unwrapKey",...e)}))}deriveBits(...e){return h(this,void 0,void 0,(function*(){return this.wrapNative("deriveBits",...e)}))}deriveKey(...e){return h(this,void 0,void 0,(function*(){return this.wrapNative("deriveKey",...e)}))}wrapNative(r,...n){const i=e=>super[e];return h(this,void 0,void 0,(function*(){~["generateKey","unwrapKey","deriveKey","importKey"].indexOf(r)&&this.fixAlgorithmName(n);try{if("digest"!==r||!n.some(e=>e instanceof hr)){const t=this.fixNativeArguments(r,n);ur.info(`Call native '${r}' method`,t);const i=yield e.nativeSubtle[r].apply(e.nativeSubtle,t);return this.fixNativeResult(r,n,i)}}catch(e){ur.warn(`Error on native '${r}' calling. ${e.message}`,e)}if("wrapKey"===r)try{ur.info("Trying to wrap key by using native functions",n);const e=yield this.exportKey(n[0],n[1]),t="jwk"===n[0]?c.FromUtf8String(JSON.stringify(e)):e;return yield this.encrypt(n[3],n[2],t)}catch(e){ur.warn("Cannot wrap key by native functions. "+e.message,e)}if("unwrapKey"===r)try{ur.info("Trying to unwrap key by using native functions",n);const e=yield this.decrypt(n[3],n[2],n[1]),t="jwk"===n[0]?JSON.parse(c.ToUtf8String(e)):e;return yield this.importKey(n[0],t,n[4],n[5],n[6])}catch(e){ur.warn("Cannot unwrap key by native functions. "+e.message,e)}if("deriveKey"===r)try{ur.info("Trying to derive key by using native functions",n);const e=yield this.deriveBits(n[0],n[1],n[2].length);return yield this.importKey("raw",e,n[2],n[3],n[4])}catch(e){ur.warn("Cannot derive key by native functions. "+e.message,e)}if("deriveBits"===r||"deriveKey"===r)for(const e of n)"object"==typeof e&&e.public&&t.isAnotherKey(e.public)&&(e.public=yield this.castKey(e.public));for(let e=0;e<n.length;e++){const r=n[e];t.isAnotherKey(r)&&(n[e]=yield this.castKey(r))}return i(r).apply(this,n)}))}fixNativeArguments(e,t){var r,n,i,o,s,a,u,h;const f=[...t];if("importKey"===e&&(this.browserInfo.name!==rr.IE||"jwk"!==(null===(n=null===(r=f[0])||void 0===r?void 0:r.toLowerCase)||void 0===n?void 0:n.call(r))||l.isBufferSource(f[1])||(f[1]=c.FromUtf8String(JSON.stringify(f[1])))),this.browserInfo.name===rr.IE&&t[1]instanceof Xn)switch(e){case"sign":case"verify":case"encrypt":case"decrypt":f[0]=Object.assign(Object.assign({},this.prepareAlgorithm(f[0])),{hash:null===(s=null===(o=null===(i=f[1])||void 0===i?void 0:i.algorithm)||void 0===o?void 0:o.hash)||void 0===s?void 0:s.name});break;case"wrapKey":case"unwrapKey":f[4]=Object.assign(Object.assign({},this.prepareAlgorithm(f[4])),{hash:null===(h=null===(u=null===(a=f[3])||void 0===a?void 0:a.algorithm)||void 0===u?void 0:u.hash)||void 0===h?void 0:h.name})}for(let e=0;e<f.length;e++){const t=f[e];t instanceof Xn&&(f[e]=t.getNative())}return f}fixNativeResult(e,t,r){var n,i;if(this.browserInfo.name===rr.IE){if("exportKey"===e&&"jwk"===(null===(i=null===(n=t[0])||void 0===n?void 0:n.toLowerCase)||void 0===i?void 0:i.call(n))&&r instanceof ArrayBuffer)return JSON.parse(c.ToUtf8String(r));if("privateKey"in r){const e=["sign","decrypt","unwrapKey","deriveKey","deriveBits"],n=["verify","encrypt","wrapKey"];return{privateKey:this.wrapNativeKey(r.privateKey,t[0],t[1],t[2].filter(t=>e.includes(t))),publicKey:this.wrapNativeKey(r.publicKey,t[0],t[1],t[2].filter(e=>n.includes(e)))}}if("extractable"in r){let n,i;switch(e){case"importKey":n=t[2],i=t[4];break;case"unwrapKey":n=t[4],i=t[6];break;case"generateKey":n=t[0],i=t[2];break;default:throw new gt("Cannot wrap native key. Unsupported method in use")}return this.wrapNativeKey(r,n,r.extractable,i)}}return r}wrapNativeKey(e,t,r,n){if(this.browserInfo.name===rr.IE){const i=["RSASSA-PKCS1-v1_5","RSA-PSS","RSA-OAEP","AES-CBC","AES-CTR","AES-KW","HMAC"],o=i.map(e=>e.toLowerCase()).indexOf(e.algorithm.name.toLowerCase());if(-1!==o){const s=this.prepareAlgorithm(t),a=Object.assign(Object.assign({},e.algorithm),{name:i[o]});return Dt.isHashedAlgorithm(s)&&(a.hash={name:s.hash.name.toUpperCase()}),ur.info(`Wrapping ${i[o]} crypto key to WrappedNativeCryptoKey`),new Xn(a,r,e.type,n,e)}}return e}castKey(e){return h(this,void 0,void 0,(function*(){if(ur.info("Cast native CryptoKey to linter key.",e),!e.extractable)throw new Error("Cannot cast unextractable crypto key");const t=this.getProvider(e.algorithm.name),r=yield this.exportKey("jwk",e);return t.importKey("jwk",r,e.algorithm,!0,e.usages)}))}fixAlgorithmName(e){if(this.browserInfo.name===rr.Edge)for(let t=0;t<e.length;t++){const r=e[0];if("string"==typeof r){for(const n of this.providers.algorithms)if(n.toLowerCase()===r.toLowerCase()){e[t]=n;break}}else if("object"==typeof r&&"string"==typeof r.name)for(const e of this.providers.algorithms)e.toLowerCase()===r.name.toLowerCase()&&(r.name=e),("string"==typeof r.hash&&e.toLowerCase()===r.hash.toLowerCase()||"object"==typeof r.hash&&"string"==typeof r.hash.name&&e.toLowerCase()===r.hash.name.toLowerCase())&&(r.hash={name:e})}}fixFirefoxEcImportPkcs8(e){const t=this.prepareAlgorithm(e[2]),r=t.name.toUpperCase();if(this.browserInfo.name===rr.Firefox&&"pkcs8"===e[0]&&~["ECDSA","ECDH"].indexOf(r)&&~["P-256","P-384","P-521"].indexOf(t.namedCurve)){if(!l.isBufferSource(e[1]))throw new TypeError("data: Is not ArrayBuffer or ArrayBufferView");const r=l.toArrayBuffer(e[1]),n=ze.parse(r,Qt),i=ze.parse(n.privateKey,cr),o=lt.toJSON(i);o.ext=!0,o.key_ops=e[4],o.crv=t.namedCurve,o.kty="EC",e[0]="jwk",e[1]=o}}fixFirefoxEcExportPkcs8(e){return h(this,void 0,void 0,(function*(){try{if(this.browserInfo.name===rr.Firefox&&"pkcs8"===e[0]&&~["ECDSA","ECDH"].indexOf(e[1].algorithm.name)&&~["P-256","P-384","P-521"].indexOf(e[1].algorithm.namedCurve)){const t=yield this.exportKey("jwk",e[1]),r=ut.fromJSON(t,{targetSchema:cr}),n=new Qt;return n.privateKeyAlgorithm.algorithm=Ur.ASN_ALGORITHM,n.privateKeyAlgorithm.parameters=$e.serialize(new Xt(Er(e[1].algorithm.namedCurve))),n.privateKey=$e.serialize(r),$e.serialize(n)}}catch(e){return ur.error(e),null}}))}}return t.methods=["digest","importKey","exportKey","sign","verify","generateKey","encrypt","decrypt","deriveBits","deriveKey","wrapKey","unwrapKey"],t})();class Qn extends class{}{constructor(){super(...arguments),this.subtle=new Yn}get nativeCrypto(){return e.nativeCrypto}getRandomValues(t){return e.nativeCrypto.getRandomValues(t)}}function ei(e,t){const r=e[t];e[t]=function(){const n=arguments;return new Promise((i,o)=>{const s=r.apply(e,n);s.oncomplete=e=>{i(e.target.result)},s.onerror=e=>{o(`Error on running '${t}' function`)}})}}"undefined"!=typeof self&&self.msCrypto&&(ei(e.nativeSubtle,"generateKey"),ei(e.nativeSubtle,"digest"),ei(e.nativeSubtle,"sign"),ei(e.nativeSubtle,"verify"),ei(e.nativeSubtle,"encrypt"),ei(e.nativeSubtle,"decrypt"),ei(e.nativeSubtle,"importKey"),ei(e.nativeSubtle,"exportKey"),ei(e.nativeSubtle,"wrapKey"),ei(e.nativeSubtle,"unwrapKey"),ei(e.nativeSubtle,"deriveKey"),ei(e.nativeSubtle,"deriveBits")),Math.imul||(Math.imul=function(e,t){const r=65535&e,n=65535&t;return r*n+((e>>>16&65535)*n+r*(t>>>16&65535)<<16>>>0)|0});const ti=self;e.nativeCrypto&&Object.freeze(e.nativeCrypto.getRandomValues);try{delete self.crypto,ti.crypto=new Qn,Object.freeze(ti.crypto)}catch(e){ur.error(e)}const ri=ti.crypto;return e.Crypto=Qn,e.CryptoKey=hr,e.crypto=ri,e.setCrypto=function(t){e.nativeCrypto=t,e.nativeSubtle=t.subtle},e}({},self.asmCrypto,self.elliptic);



/////////////////////asdf


var liner=function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r,n,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,i)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function u(e){i(o,n,a,u,s,"next",e)}function s(e){i(o,n,a,u,s,"throw",e)}u(void 0)}))}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function g(e,t,r){return(g=y()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&p(i,r.prototype),i}).apply(null,arguments)}function m(e){var t="function"==typeof Map?new Map:void 0;return(m=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return g(e,arguments,v(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?d(e):t}function w(e){var t=y();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return k(this,r)}}function b(e,t,r){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function A(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||B(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){if(e){if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function x(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=B(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i,a=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw i}}}}var C={};"undefined"!=typeof self&&(C=self),e.nativeCrypto=C.msCrypto||C.crypto||{},e.nativeSubtle=null;try{e.nativeSubtle=(null===e.nativeCrypto||void 0===e.nativeCrypto?void 0:e.nativeCrypto.subtle)||(null===e.nativeCrypto||void 0===e.nativeCrypto?void 0:e.nativeCrypto.webkitSubtle)||null}catch(e){console.warn("Cannot get subtle from crypto",e)}function R(e){return"undefined"!=typeof Buffer&&Buffer.isBuffer(e)?new Uint8Array(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var N=function(){function e(){o(this,e)}return s(e,null,[{key:"ToString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=R(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);default:throw new Error("Unknown type of encoding '".concat(t,"'"))}}},{key:"FromString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);default:throw new Error("Unknown type of encoding '".concat(t,"'"))}}},{key:"ToBase64",value:function(e){var t=R(e);if("undefined"!=typeof btoa){var r=this.ToString(t,"binary");return btoa(r)}return Buffer.from(t).toString("base64")}},{key:"FromBase64",value:function(e){return e=e.replace(/\n/g,"").replace(/\r/g,"").replace(/\t/g,"").replace(/\s/g,""),"undefined"!=typeof atob?this.FromBinary(atob(e)):new Uint8Array(Buffer.from(e,"base64")).buffer}},{key:"FromBase64Url",value:function(e){return this.FromBase64(this.Base64Padding(e.replace(/\-/g,"+").replace(/\_/g,"/")))}},{key:"ToBase64Url",value:function(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}},{key:"FromUtf8String",value:function(e){for(var t=unescape(encodeURIComponent(e)),r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r.buffer}},{key:"ToUtf8String",value:function(e){var t=R(e),r=String.fromCharCode.apply(null,t);return decodeURIComponent(escape(r))}},{key:"FromBinary",value:function(e){for(var t=e.length,r=new Uint8Array(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r.buffer}},{key:"ToBinary",value:function(e){for(var t=R(e),r="",n=t.length,i=0;i<n;i++)r+=String.fromCharCode(t[i]);return r}},{key:"ToHex",value:function(e){for(var t=R(e),r=[],n=t.length,i=0;i<n;i++){var a=t[i].toString(16);r.push(1===a.length?"0"+a:a)}return r.join("")}},{key:"FromHex",value:function(e){for(var t=new Uint8Array(e.length/2),r=0;r<e.length;r+=2){var n=e.slice(r,r+2);t[r/2]=parseInt(n,16)}return t.buffer}},{key:"Base64Padding",value:function(e){var t=4-e.length%4;if(t<4)for(var r=0;r<t;r++)e+="=";return e}}]),e}(),E=function(){function e(){o(this,e)}return s(e,null,[{key:"toArrayBuffer",value:function(e){var t=this.toUint8Array(e);return t.byteOffset||t.length?t.buffer.slice(t.byteOffset,t.byteOffset+t.length):t.buffer}},{key:"toUint8Array",value:function(e){if("undefined"!=typeof Buffer&&Buffer.isBuffer(e))return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}},{key:"isBufferSource",value:function(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}}]),e}();function K(e,t,r,i){var a,o=arguments.length,u=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(u=(o<3?a(u):o>3?a(t,r,u):a(t,r))||u);return o>3&&u&&Object.defineProperty(t,r,u),u}function O(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{s(n.next(e))}catch(e){a(e)}}function u(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,u)}s((n=n.apply(e,t||[])).next())}))}function U(e,t){return e(t={exports:{}},t.exports),t.exports}function H(e,t){var r=0;if(1===e.length)return e[0];for(var n=e.length-1;n>=0;n--)r+=e[e.length-1-n]*Math.pow(2,t*n);return r}function L(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=r,i=e,a=0,o=Math.pow(2,t),u=1;u<8;u++){if(e<o){var s=void 0;if(n<0)s=new ArrayBuffer(u),a=u;else{if(n<u)return new ArrayBuffer(0);s=new ArrayBuffer(n),a=n}for(var c=new Uint8Array(s),l=u-1;l>=0;l--){var h=Math.pow(2,l*t);c[a-l-1]=Math.floor(i/h),i-=c[a-l-1]*h}return s}o*=Math.pow(2,t)}return new ArrayBuffer(0)}var I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";var T=Math.log(2);var D,j=Object.freeze({__proto__:null,getUTCDate:function(e){return new Date(e.getTime()+6e4*e.getTimezoneOffset())},getParametersValue:function(e,t,r){return e instanceof Object==!1?r:t in e?e[t]:r},bufferToHexCodes:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength-r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a="",o=x(new Uint8Array(e,r,n));try{for(o.s();!(t=o.n()).done;){var u=t.value,s=u.toString(16).toUpperCase();1===s.length&&(a+="0"),a+=s,i&&(a+=" ")}}catch(e){o.e(e)}finally{o.f()}return a.trim()},checkBufferParams:function(e,t,r,n){return t instanceof ArrayBuffer==!1?(e.error='Wrong parameter: inputBuffer must be "ArrayBuffer"',!1):0===t.byteLength?(e.error="Wrong parameter: inputBuffer has zero length",!1):r<0?(e.error="Wrong parameter: inputOffset less than zero",!1):n<0?(e.error="Wrong parameter: inputLength less than zero",!1):!(t.byteLength-r-n<0)||(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1)},utilFromBase:H,utilToBase:L,utilConcatBuf:function(){for(var e=0,t=0,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];for(var a=0,o=n;a<o.length;a++){var u=o[a];e+=u.byteLength}for(var s=new ArrayBuffer(e),c=new Uint8Array(s),l=0,h=n;l<h.length;l++){var f=h[l];c.set(new Uint8Array(f),t),t+=f.byteLength}return s},utilConcatView:function(){for(var e=0,t=0,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];for(var a=0,o=n;a<o.length;a++){var u=o[a];e+=u.length}for(var s=new ArrayBuffer(e),c=new Uint8Array(s),l=0,h=n;l<h.length;l++){var f=h[l];c.set(f,t),t+=f.length}return c},utilDecodeTC:function(){var e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){var t=255===e[0]&&128&e[1],r=0===e[0]&&0==(128&e[1]);(t||r)&&this.warnings.push("Needlessly long format")}for(var n=new ArrayBuffer(this.valueHex.byteLength),i=new Uint8Array(n),a=0;a<this.valueHex.byteLength;a++)i[a]=0;i[0]=128&e[0];for(var o=H(i,8),u=new ArrayBuffer(this.valueHex.byteLength),s=new Uint8Array(u),c=0;c<this.valueHex.byteLength;c++)s[c]=e[c];return s[0]&=127,H(s,8)-o},utilEncodeTC:function(e){for(var t=e<0?-1*e:e,r=128,n=1;n<8;n++){if(t<=r){if(e<0){var i=L(r-t,8,n);return new Uint8Array(i)[0]|=128,i}var a=L(t,8,n),o=new Uint8Array(a);if(128&o[0]){var u=a.slice(0),s=new Uint8Array(u);a=new ArrayBuffer(a.byteLength+1),o=new Uint8Array(a);for(var c=0;c<u.byteLength;c++)o[c+1]=s[c];o[0]=0}return a}r*=Math.pow(2,8)}return new ArrayBuffer(0)},isEqualBuffer:function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=new Uint8Array(e),n=new Uint8Array(t),i=0;i<r.length;i++)if(r[i]!==n[i])return!1;return!0},padNumber:function(e,t){var r=e.toString(10);if(t<r.length)return"";for(var n=t-r.length,i=new Array(n),a=0;a<n;a++)i[a]="0";return i.join("").concat(r)},toBase64:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=0,a=0,o=0,u="",s=t?P:I;if(n){for(var c=0,l=0;l<e.length;l++)if(0!==e.charCodeAt(l)){c=l;break}e=e.slice(c)}for(;i<e.length;){var h=e.charCodeAt(i++);i>=e.length&&(a=1);var f=e.charCodeAt(i++);i>=e.length&&(o=1);var v=e.charCodeAt(i++),p=h>>2,y=(3&h)<<4|f>>4,g=(15&f)<<2|v>>6,m=63&v;1===a?g=m=64:1===o&&(m=64),u+=r?64===g?"".concat(s.charAt(p)).concat(s.charAt(y)):64===m?"".concat(s.charAt(p)).concat(s.charAt(y)).concat(s.charAt(g)):"".concat(s.charAt(p)).concat(s.charAt(y)).concat(s.charAt(g)).concat(s.charAt(m)):"".concat(s.charAt(p)).concat(s.charAt(y)).concat(s.charAt(g)).concat(s.charAt(m))}return u},fromBase64:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t?P:I;function i(e){for(var t=0;t<64;t++)if(n.charAt(t)===e)return t;return 64}function a(e){return 64===e?0:e}for(var o=0,u="";o<e.length;){var s=i(e.charAt(o++)),c=o>=e.length?0:i(e.charAt(o++)),l=o>=e.length?0:i(e.charAt(o++)),h=o>=e.length?0:i(e.charAt(o++)),f=a(s)<<2|a(c)>>4,v=(15&a(c))<<4|a(l)>>2,p=(3&a(l))<<6|a(h);u+=String.fromCharCode(f),64!==l&&(u+=String.fromCharCode(v)),64!==h&&(u+=String.fromCharCode(p))}if(r){for(var y=u.length,g=-1,m=y-1;m>=0;m--)if(0!==u.charCodeAt(m)){g=m;break}u=-1!==g?u.slice(0,g+1):""}return u},arrayBufferToString:function(e){var t,r="",n=x(new Uint8Array(e));try{for(n.s();!(t=n.n()).done;){var i=t.value;r+=String.fromCharCode(i)}}catch(e){n.e(e)}finally{n.f()}return r},stringToArrayBuffer:function(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),i=0;i<t;i++)n[i]=e.charCodeAt(i);return r},nearestPowerOf2:function(e){var t=Math.log(e)/T,r=Math.floor(t),n=Math.round(t);return r===n?r:n},clearProps:function(e,t){var r,n=x(t);try{for(n.s();!(r=n.n()).done;){delete e[r.value]}}catch(e){n.e(e)}finally{n.f()}}}),_=U((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.fromBER=ye,t.compareSchema=ge,t.verifySchema=function(e,t){if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};var r=ye(e);if(-1===r.offset)return{verified:!1,result:r.result};return ge(r.result,r.result,t)},t.fromJSON=function(e){},t.RawData=t.Repeated=t.Any=t.Choice=t.TIME=t.Duration=t.DateTime=t.TimeOfDay=t.DATE=t.GeneralizedTime=t.UTCTime=t.CharacterString=t.GeneralString=t.VisibleString=t.GraphicString=t.IA5String=t.VideotexString=t.TeletexString=t.PrintableString=t.NumericString=t.UniversalString=t.BmpString=t.RelativeObjectIdentifier=t.Utf8String=t.ObjectIdentifier=t.Enumerated=t.Integer=t.BitString=t.OctetString=t.Null=t.Set=t.Sequence=t.Boolean=t.EndOfContent=t.Constructed=t.Primitive=t.BaseBlock=t.ValueBlock=t.HexBlock=void 0;var r=[new Uint8Array([1])],n=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.blockLength=(0,j.getParametersValue)(t,"blockLength",0),this.error=(0,j.getParametersValue)(t,"error",""),this.warnings=(0,j.getParametersValue)(t,"warnings",[]),this.valueBeforeDecode="valueBeforeDecode"in t?t.valueBeforeDecode.slice(0):new ArrayBuffer(0)}return s(e,[{key:"toJSON",value:function(){return{blockName:this.constructor.blockName(),blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:(0,j.bufferToHexCodes)(this.valueBeforeDecode,0,this.valueBeforeDecode.byteLength)}}}],[{key:"blockName",value:function(){return"baseBlock"}}]),e}(),i=function(e){return function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).isHexOnly=(0,j.getParametersValue)(n,"isHexOnly",!1),e.valueHex="valueHex"in n?n.valueHex.slice(0):new ArrayBuffer(0),e}return s(r,[{key:"fromBER",value:function(e,t,r){return!1===(0,j.checkBufferParams)(this,e,t,r)?-1:0===new Uint8Array(e,t,r).length?(this.warnings.push("Zero buffer length"),t):(this.valueHex=e.slice(t,t+r),this.blockLength=r,t+r)}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!0!==this.isHexOnly?(this.error='Flag "isHexOnly" is not set, abort',new ArrayBuffer(0)):!0===e?new ArrayBuffer(this.valueHex.byteLength):this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=b(v(r.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.isHexOnly=this.isHexOnly,e.valueHex=(0,j.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"hexBlock"}}]),r}(e)};t.HexBlock=i;var a=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),e=t.call(this),"idBlock"in n?(e.isHexOnly=(0,j.getParametersValue)(n.idBlock,"isHexOnly",!1),e.valueHex=(0,j.getParametersValue)(n.idBlock,"valueHex",new ArrayBuffer(0)),e.tagClass=(0,j.getParametersValue)(n.idBlock,"tagClass",-1),e.tagNumber=(0,j.getParametersValue)(n.idBlock,"tagNumber",-1),e.isConstructed=(0,j.getParametersValue)(n.idBlock,"isConstructed",!1)):(e.tagClass=-1,e.tagNumber=-1,e.isConstructed=!1),e}return s(r,[{key:"toBER",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=0;switch(this.tagClass){case 1:n|=0;break;case 2:n|=64;break;case 3:n|=128;break;case 4:n|=192;break;default:return this.error="Unknown tag class",new ArrayBuffer(0)}if(this.isConstructed&&(n|=32),this.tagNumber<31&&!this.isHexOnly){if(e=new ArrayBuffer(1),t=new Uint8Array(e),!r){var i=this.tagNumber;n|=i&=31,t[0]=n}return e}if(!1===this.isHexOnly){var a=(0,j.utilToBase)(this.tagNumber,7),o=new Uint8Array(a),u=a.byteLength;if(e=new ArrayBuffer(u+1),(t=new Uint8Array(e))[0]=31|n,!r){for(var s=0;s<u-1;s++)t[s+1]=128|o[s];t[u]=o[u-1]}return e}if(e=new ArrayBuffer(this.valueHex.byteLength+1),(t=new Uint8Array(e))[0]=31|n,!1===r){for(var c=new Uint8Array(this.valueHex),l=0;l<c.length-1;l++)t[l+1]=128|c[l];t[this.valueHex.byteLength]=c[c.length-1]}return e}},{key:"fromBER",value:function(e,t,r){if(!1===(0,j.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.error="Zero buffer length",-1;switch(192&n[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=32==(32&n[0]),this.isHexOnly=!1;var i=31&n[0];if(31!==i)this.tagNumber=i,this.blockLength=1;else{var a=1;this.valueHex=new ArrayBuffer(255);for(var o=255,u=new Uint8Array(this.valueHex);128&n[a];){if(u[a-1]=127&n[a],++a>=n.length)return this.error="End of input reached before message was fully decoded",-1;if(a===o){o+=255;for(var s=new ArrayBuffer(o),c=new Uint8Array(s),l=0;l<u.length;l++)c[l]=u[l];this.valueHex=new ArrayBuffer(o),u=new Uint8Array(this.valueHex)}}this.blockLength=a+1,u[a-1]=127&n[a];for(var h=new ArrayBuffer(a),f=new Uint8Array(h),v=0;v<a;v++)f[v]=u[v];this.valueHex=new ArrayBuffer(a),(u=new Uint8Array(this.valueHex)).set(f),this.blockLength<=9?this.tagNumber=(0,j.utilFromBase)(u,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}},{key:"toJSON",value:function(){var e={};try{e=b(v(r.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.tagClass=this.tagClass,e.tagNumber=this.tagNumber,e.isConstructed=this.isConstructed,e}}],[{key:"blockName",value:function(){return"identificationBlock"}}]),r}(i(n)),u=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),e=t.call(this),"lenBlock"in n?(e.isIndefiniteForm=(0,j.getParametersValue)(n.lenBlock,"isIndefiniteForm",!1),e.longFormUsed=(0,j.getParametersValue)(n.lenBlock,"longFormUsed",!1),e.length=(0,j.getParametersValue)(n.lenBlock,"length",0)):(e.isIndefiniteForm=!1,e.longFormUsed=!1,e.length=0),e}return s(r,[{key:"fromBER",value:function(e,t,r){if(!1===(0,j.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.error="Zero buffer length",-1;if(255===n[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===n[0],!0===this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&n[0]),!1===this.longFormUsed)return this.length=n[0],this.blockLength=1,t+this.blockLength;var i=127&n[0];if(i>8)return this.error="Too big integer",-1;if(i+1>n.length)return this.error="End of input reached before message was fully decoded",-1;for(var a=new Uint8Array(i),o=0;o<i;o++)a[o]=n[o+1];return 0===a[i-1]&&this.warnings.push("Needlessly long encoded length"),this.length=(0,j.utilFromBase)(a,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unneccesary usage of long length form"),this.blockLength=i+1,t+this.blockLength}},{key:"toBER",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return e=new ArrayBuffer(1),!1===r&&((t=new Uint8Array(e))[0]=128),e;if(!0===this.longFormUsed){var n=(0,j.utilToBase)(this.length,8);if(n.byteLength>127)return this.error="Too big length",new ArrayBuffer(0);if(e=new ArrayBuffer(n.byteLength+1),!0===r)return e;var i=new Uint8Array(n);(t=new Uint8Array(e))[0]=128|n.byteLength;for(var a=0;a<n.byteLength;a++)t[a+1]=i[a];return e}return e=new ArrayBuffer(1),!1===r&&((t=new Uint8Array(e))[0]=this.length),e}},{key:"toJSON",value:function(){var e={};try{e=b(v(r.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.isIndefiniteForm=this.isIndefiniteForm,e.longFormUsed=this.longFormUsed,e.length=this.length,e}}],[{key:"blockName",value:function(){return"lengthBlock"}}]),r}(n),c=function(e){f(r,e);var t=w(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),t.call(this,e)}return s(r,[{key:"fromBER",value:function(e,t,r){throw TypeError('User need to make a specific function in a class which extends "ValueBlock"')}},{key:"toBER",value:function(){throw TypeError('User need to make a specific function in a class which extends "ValueBlock"')}}],[{key:"blockName",value:function(){return"valueBlock"}}]),r}(n);t.ValueBlock=c;var l=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;return o(this,r),e=t.call(this,n),"name"in n&&(e.name=n.name),"optional"in n&&(e.optional=n.optional),"primitiveSchema"in n&&(e.primitiveSchema=n.primitiveSchema),e.idBlock=new a(n),e.lenBlock=new u(n),e.valueBlock=new i(n),e}return s(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"toBER",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.idBlock.toBER(t),n=this.valueBlock.toBER(!0);this.lenBlock.length=n.byteLength;var i,a=this.lenBlock.toBER(t);if(e=(0,j.utilConcatBuf)(r,a),i=!1===t?this.valueBlock.toBER(t):new ArrayBuffer(this.lenBlock.length),e=(0,j.utilConcatBuf)(e,i),!0===this.lenBlock.isIndefiniteForm){var o=new ArrayBuffer(2);if(!1===t){var u=new Uint8Array(o);u[0]=0,u[1]=0}e=(0,j.utilConcatBuf)(e,o)}return e}},{key:"toJSON",value:function(){var e={};try{e=b(v(r.prototype),"toJSON",this).call(this)}catch(e){}return e.idBlock=this.idBlock.toJSON(),e.lenBlock=this.lenBlock.toJSON(),e.valueBlock=this.valueBlock.toJSON(),"name"in this&&(e.name=this.name),"optional"in this&&(e.optional=this.optional),"primitiveSchema"in this&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}}],[{key:"blockName",value:function(){return"BaseBlock"}}]),r}(n);t.BaseBlock=l;var h=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).valueHex="valueHex"in n?n.valueHex.slice(0):new ArrayBuffer(0),e.isHexOnly=(0,j.getParametersValue)(n,"isHexOnly",!0),e}return s(r,[{key:"fromBER",value:function(e,t,r){if(!1===(0,j.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.warnings.push("Zero buffer length"),t;this.valueHex=new ArrayBuffer(n.length);for(var i=new Uint8Array(this.valueHex),a=0;a<n.length;a++)i[a]=n[a];return this.blockLength=r,t+r}},{key:"toBER",value:function(){return this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=b(v(r.prototype),"toJSON",this).call(this)}catch(e){}return e.valueHex=(0,j.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e.isHexOnly=this.isHexOnly,e}}],[{key:"blockName",value:function(){return"PrimitiveValueBlock"}}]),r}(c),p=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n,h)).idBlock.isConstructed=!1,e}return s(r,null,[{key:"blockName",value:function(){return"PRIMITIVE"}}]),r}(l);t.Primitive=p;var y=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).value=(0,j.getParametersValue)(n,"value",[]),e.isIndefiniteForm=(0,j.getParametersValue)(n,"isIndefiniteForm",!1),e}return s(r,[{key:"fromBER",value:function(e,t,r){var n=t,i=r;if(!1===(0,j.checkBufferParams)(this,e,t,r))return-1;if(0===new Uint8Array(e,t,r).length)return this.warnings.push("Zero buffer length"),t;for(var a,o,u=t;a=this.isIndefiniteForm,o=r,(!0===a?1:o)>0;){var s=pe(e,u,r);if(-1===s.offset)return this.error=s.result.error,this.warnings.concat(s.result.warnings),-1;if(u=s.offset,this.blockLength+=s.result.blockLength,r-=s.result.blockLength,this.value.push(s.result),!0===this.isIndefiniteForm&&s.result.constructor.blockName()===d.blockName())break}return!0===this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.blockName()===d.blockName()?this.value.pop():this.warnings.push("No EndOfContent block encoded")),this.valueBeforeDecode=e.slice(n,n+i),u}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);t=(0,j.utilConcatBuf)(t,n)}return t}},{key:"toJSON",value:function(){var e={};try{e=b(v(r.prototype),"toJSON",this).call(this)}catch(e){}e.isIndefiniteForm=this.isIndefiniteForm,e.value=[];for(var t=0;t<this.value.length;t++)e.value.push(this.value[t].toJSON());return e}}],[{key:"blockName",value:function(){return"ConstructedValueBlock"}}]),r}(c),g=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n,y)).idBlock.isConstructed=!0,e}return s(r,[{key:"fromBER",value:function(e,t,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}}],[{key:"blockName",value:function(){return"CONSTRUCTED"}}]),r}(l);t.Constructed=g;var m=function(e){f(r,e);var t=w(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),t.call(this,e)}return s(r,[{key:"fromBER",value:function(e,t,r){return t}},{key:"toBER",value:function(){return new ArrayBuffer(0)}}],[{key:"blockName",value:function(){return"EndOfContentValueBlock"}}]),r}(c),d=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n,m)).idBlock.tagClass=1,e.idBlock.tagNumber=0,e}return s(r,null,[{key:"blockName",value:function(){return"EndOfContent"}}]),r}(l);t.EndOfContent=d;var k=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(o(this,r),(e=t.call(this,n)).value=(0,j.getParametersValue)(n,"value",!1),e.isHexOnly=(0,j.getParametersValue)(n,"isHexOnly",!1),"valueHex"in n)e.valueHex=n.valueHex.slice(0);else if(e.valueHex=new ArrayBuffer(1),!0===e.value){var i=new Uint8Array(e.valueHex);i[0]=255}return e}return s(r,[{key:"fromBER",value:function(e,t,r){if(!1===(0,j.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);r>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,this.valueHex=new ArrayBuffer(n.length);for(var i=new Uint8Array(this.valueHex),a=0;a<n.length;a++)i[a]=n[a];return 0!==j.utilDecodeTC.call(this)?this.value=!0:this.value=!1,this.blockLength=r,t+r}},{key:"toBER",value:function(){return this.valueHex}},{key:"toJSON",value:function(){var e={};try{e=b(v(r.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e.isHexOnly=this.isHexOnly,e.valueHex=(0,j.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"BooleanValueBlock"}}]),r}(c),A=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n,k)).idBlock.tagClass=1,e.idBlock.tagNumber=1,e}return s(r,null,[{key:"blockName",value:function(){return"Boolean"}}]),r}(l);t.Boolean=A;var B=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=16,e}return s(r,null,[{key:"blockName",value:function(){return"Sequence"}}]),r}(g);t.Sequence=B;var S=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=17,e}return s(r,null,[{key:"blockName",value:function(){return"Set"}}]),r}(g);t.Set=S;var x=function(e){f(r,e);var t=w(r);function r(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,i,n)).idBlock.tagClass=1,e.idBlock.tagNumber=5,e}return s(r,[{key:"fromBER",value:function(e,t,r){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=r,t+r>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+r}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(2);if(!0===e)return t;var r=new Uint8Array(t);return r[0]=5,r[1]=0,t}}],[{key:"blockName",value:function(){return"Null"}}]),r}(l);t.Null=x;var C=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).isConstructed=(0,j.getParametersValue)(n,"isConstructed",!1),e}return s(r,[{key:"fromBER",value:function(e,t,n){var i=0;if(!0===this.isConstructed){if(this.isHexOnly=!1,-1===(i=y.prototype.fromBER.call(this,e,t,n)))return i;for(var a=0;a<this.value.length;a++){var o=this.value[a].constructor.blockName();if(o===d.blockName()){if(!0===this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(o!==R.blockName())return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,i=b(v(r.prototype),"fromBER",this).call(this,e,t,n),this.blockLength=n;return i}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===this.isConstructed)return y.prototype.toBER.call(this,e);var t=new ArrayBuffer(this.valueHex.byteLength);return!0===e||0===this.valueHex.byteLength?t:t=this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=b(v(r.prototype),"toJSON",this).call(this)}catch(e){}return e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=(0,j.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"OctetStringValueBlock"}}]),r}(i(y)),R=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n,C)).idBlock.tagClass=1,e.idBlock.tagNumber=4,e}return s(r,[{key:"fromBER",value:function(e,t,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===n?(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),t):b(v(r.prototype),"fromBER",this).call(this,e,t,n)}},{key:"isEqual",value:function(e){return e instanceof r!=!1&&JSON.stringify(this)===JSON.stringify(e)}}],[{key:"blockName",value:function(){return"OctetString"}}]),r}(l);t.OctetString=R;var N=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).unusedBits=(0,j.getParametersValue)(n,"unusedBits",0),e.isConstructed=(0,j.getParametersValue)(n,"isConstructed",!1),e.blockLength=e.valueHex.byteLength,e}return s(r,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;var n=-1;if(!0===this.isConstructed){if(-1===(n=y.prototype.fromBER.call(this,e,t,r)))return n;for(var i=0;i<this.value.length;i++){var a=this.value[i].constructor.blockName();if(a===d.blockName()){if(!0===this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(a!==E.blockName())return this.error="BIT STRING may consists of BIT STRINGs only",-1;if(this.unusedBits>0&&this.value[i].valueBlock.unusedBits>0)return this.error='Usign of "unused bits" inside constructive BIT STRING allowed for least one only',-1;if(this.unusedBits=this.value[i].valueBlock.unusedBits,this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1}return n}if(!1===(0,j.checkBufferParams)(this,e,t,r))return-1;var o=new Uint8Array(e,t,r);if(this.unusedBits=o[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;this.valueHex=new ArrayBuffer(o.length-1);for(var u=new Uint8Array(this.valueHex),s=0;s<r-1;s++)u[s]=o[s+1];return this.blockLength=o.length,t+r}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===this.isConstructed)return y.prototype.toBER.call(this,e);if(!0===e)return new ArrayBuffer(this.valueHex.byteLength+1);if(0===this.valueHex.byteLength)return new ArrayBuffer(0);var t=new Uint8Array(this.valueHex),r=new ArrayBuffer(this.valueHex.byteLength+1),n=new Uint8Array(r);n[0]=this.unusedBits;for(var i=0;i<this.valueHex.byteLength;i++)n[i+1]=t[i];return r}},{key:"toJSON",value:function(){var e={};try{e=b(v(r.prototype),"toJSON",this).call(this)}catch(e){}return e.unusedBits=this.unusedBits,e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=(0,j.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"BitStringValueBlock"}}]),r}(i(y)),E=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n,N)).idBlock.tagClass=1,e.idBlock.tagNumber=3,e}return s(r,[{key:"fromBER",value:function(e,t,n){return 0===n?t:(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,b(v(r.prototype),"fromBER",this).call(this,e,t,n))}},{key:"isEqual",value:function(e){return e instanceof r!=!1&&JSON.stringify(this)===JSON.stringify(e)}}],[{key:"blockName",value:function(){return"BitString"}}]),r}(l);t.BitString=E;var K=function(e){f(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,n),e=t.call(this,r),"value"in r&&(e.valueDec=r.value),e}return s(n,[{key:"fromDER",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=this.fromBER(e,t,r);if(-1===i)return i;var a=new Uint8Array(this._valueHex);if(0===a[0]&&0!=(128&a[1])){var o=new ArrayBuffer(this._valueHex.byteLength-1),u=new Uint8Array(o);u.set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=o.slice(0)}else if(0!==n&&this._valueHex.byteLength<n){n-this._valueHex.byteLength>1&&(n=this._valueHex.byteLength+1);var s=new ArrayBuffer(n),c=new Uint8Array(s);c.set(a,n-this._valueHex.byteLength),this._valueHex=s.slice(0)}return i}},{key:"toDER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new Uint8Array(this._valueHex);switch(!0){case 0!=(128&t[0]):var r=new ArrayBuffer(this._valueHex.byteLength+1),n=new Uint8Array(r);n[0]=0,n.set(t,1),this._valueHex=r.slice(0);break;case 0===t[0]&&0==(128&t[1]):var i=new ArrayBuffer(this._valueHex.byteLength-1),a=new Uint8Array(i);a.set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=i.slice(0)}return this.toBER(e)}},{key:"fromBER",value:function(e,t,r){var i=b(v(n.prototype),"fromBER",this).call(this,e,t,r);return-1===i?i:(this.blockLength=r,t+r)}},{key:"toBER",value:function(){return this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=b(v(n.prototype),"toJSON",this).call(this)}catch(e){}return e.valueDec=this.valueDec,e}},{key:"toString",value:function(){function e(e,t){for(var r=new Uint8Array([0]),n=new Uint8Array(e),i=new Uint8Array(t),a=n.slice(0),o=a.length-1,u=i.slice(0),s=u.length-1,c=0,l=0,h=s<o?o:s;h>=0;h--,l++){switch(!0){case l<u.length:c=a[o-l]+u[s-l]+r[0];break;default:c=a[o-l]+r[0]}switch(r[0]=c/10,!0){case l>=a.length:a=(0,j.utilConcatView)(new Uint8Array([c%10]),a);break;default:a[o-l]=c%10}}return r[0]>0&&(a=(0,j.utilConcatView)(r,a)),a.slice(0)}function t(e){if(e>=r.length)for(var t=r.length;t<=e;t++){for(var n=new Uint8Array([0]),i=r[t-1].slice(0),a=i.length-1;a>=0;a--){var o=new Uint8Array([(i[a]<<1)+n[0]]);n[0]=o[0]/10,i[a]=o[0]%10}n[0]>0&&(i=(0,j.utilConcatView)(n,i)),r.push(i)}return r[e]}function n(e,t){for(var r,n=0,i=new Uint8Array(e),a=new Uint8Array(t),o=i.slice(0),u=o.length-1,s=a.slice(0),c=s.length-1,l=0,h=c;h>=0;h--,l++)switch(r=o[u-l]-s[c-l]-n,!0){case r<0:n=1,o[u-l]=r+10;break;default:n=0,o[u-l]=r}if(n>0)for(var f=u-c+1;f>=0;f--,l++){if(!((r=o[u-l]-n)<0)){n=0,o[u-l]=r;break}n=1,o[u-l]=r+10}return o.slice()}for(var i,a=8*this._valueHex.byteLength-1,o=new Uint8Array(8*this._valueHex.byteLength/3),u=0,s=new Uint8Array(this._valueHex),c="",l=!1,h=this._valueHex.byteLength-1;h>=0;h--){i=s[h];for(var f=0;f<8;f++){if(1==(1&i))switch(u){case a:o=n(t(u),o),c="-";break;default:o=e(o,t(u))}u++,i>>=1}}for(var v=0;v<o.length;v++)o[v]&&(l=!0),l&&(c+="0123456789".charAt(o[v]));return!1===l&&(c+="0123456789".charAt(0)),c}},{key:"valueHex",set:function(e){this._valueHex=e.slice(0),e.byteLength>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,e.byteLength>0&&(this._valueDec=j.utilDecodeTC.call(this)))},get:function(){return this._valueHex}},{key:"valueDec",set:function(e){this._valueDec=e,this.isHexOnly=!1,this._valueHex=(0,j.utilEncodeTC)(e)},get:function(){return this._valueDec}}],[{key:"blockName",value:function(){return"IntegerValueBlock"}}]),n}(i(c)),O=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n,K)).idBlock.tagClass=1,e.idBlock.tagNumber=2,e}return s(r,[{key:"isEqual",value:function(e){return e instanceof r?this.valueBlock.isHexOnly&&e.valueBlock.isHexOnly?(0,j.isEqualBuffer)(this.valueBlock.valueHex,e.valueBlock.valueHex):this.valueBlock.isHexOnly===e.valueBlock.isHexOnly&&this.valueBlock.valueDec===e.valueBlock.valueDec:e instanceof ArrayBuffer&&(0,j.isEqualBuffer)(this.valueBlock.valueHex,e)}},{key:"convertToDER",value:function(){var e=new r({valueHex:this.valueBlock.valueHex});return e.valueBlock.toDER(),e}},{key:"convertFromDER",value:function(){var e=this.valueBlock.valueHex.byteLength%2?this.valueBlock.valueHex.byteLength+1:this.valueBlock.valueHex.byteLength,t=new r({valueHex:this.valueBlock.valueHex});return t.valueBlock.fromDER(t.valueBlock.valueHex,0,t.valueBlock.valueHex.byteLength,e),t}}],[{key:"blockName",value:function(){return"Integer"}}]),r}(l);t.Integer=O;var U=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=10,e}return s(r,null,[{key:"blockName",value:function(){return"Enumerated"}}]),r}(O);t.Enumerated=U;var H=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).valueDec=(0,j.getParametersValue)(n,"valueDec",-1),e.isFirstSid=(0,j.getParametersValue)(n,"isFirstSid",!1),e}return s(r,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;if(!1===(0,j.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);this.valueHex=new ArrayBuffer(r);for(var i=new Uint8Array(this.valueHex),a=0;a<r&&(i[a]=127&n[a],this.blockLength++,0!=(128&n[a]));a++);for(var o=new ArrayBuffer(this.blockLength),u=new Uint8Array(o),s=0;s<this.blockLength;s++)u[s]=i[s];return this.valueHex=o.slice(0),i=new Uint8Array(this.valueHex),0!=(128&n[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===i[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=(0,j.utilFromBase)(i,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}},{key:"toBER",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isHexOnly){if(!0===r)return new ArrayBuffer(this.valueHex.byteLength);var n=new Uint8Array(this.valueHex);e=new ArrayBuffer(this.blockLength),t=new Uint8Array(e);for(var i=0;i<this.blockLength-1;i++)t[i]=128|n[i];return t[this.blockLength-1]=n[this.blockLength-1],e}var a=(0,j.utilToBase)(this.valueDec,7);if(0===a.byteLength)return this.error="Error during encoding SID value",new ArrayBuffer(0);if(e=new ArrayBuffer(a.byteLength),!1===r){var o=new Uint8Array(a);t=new Uint8Array(e);for(var u=0;u<a.byteLength-1;u++)t[u]=128|o[u];t[a.byteLength-1]=o[a.byteLength-1]}return e}},{key:"toString",value:function(){var e="";if(!0===this.isHexOnly)e=(0,j.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength);else if(this.isFirstSid){var t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}},{key:"toJSON",value:function(){var e={};try{e=b(v(r.prototype),"toJSON",this).call(this)}catch(e){}return e.valueDec=this.valueDec,e.isFirstSid=this.isFirstSid,e}}],[{key:"blockName",value:function(){return"sidBlock"}}]),r}(i(n)),L=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).fromString((0,j.getParametersValue)(n,"value","")),e}return s(r,[{key:"fromBER",value:function(e,t,r){for(var n=t;r>0;){var i=new H;if(-1===(n=i.fromBER(e,n,r)))return this.blockLength=0,this.error=i.error,n;0===this.value.length&&(i.isFirstSid=!0),this.blockLength+=i.blockLength,r-=i.blockLength,this.value.push(i)}return n}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);if(0===n.byteLength)return this.error=this.value[r].error,new ArrayBuffer(0);t=(0,j.utilConcatBuf)(t,n)}return t}},{key:"fromString",value:function(e){this.value=[];var t=0,r=0,n="",i=!1;do{if(n=-1===(r=e.indexOf(".",t))?e.substr(t):e.substr(t,r-t),t=r+1,i){var a=this.value[0],o=0;switch(a.valueDec){case 0:break;case 1:o=40;break;case 2:o=80;break;default:return this.value=[],!1}var u=parseInt(n,10);if(isNaN(u))return!0;a.valueDec=u+o,i=!1}else{var s=new H;if(s.valueDec=parseInt(n,10),isNaN(s.valueDec))return!0;0===this.value.length&&(s.isFirstSid=!0,i=!0),this.value.push(s)}}while(-1!==r);return!0}},{key:"toString",value:function(){for(var e="",t=!1,r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;var n=this.value[r].toString();0!==r&&(e="".concat(e,".")),t?(n="{".concat(n,"}"),this.value[r].isFirstSid?e="2.{".concat(n," - 80}"):e+=n):e+=n}return e}},{key:"toJSON",value:function(){var e={};try{e=b(v(r.prototype),"toJSON",this).call(this)}catch(e){}e.value=this.toString(),e.sidArray=[];for(var t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}],[{key:"blockName",value:function(){return"ObjectIdentifierValueBlock"}}]),r}(c),I=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n,L)).idBlock.tagClass=1,e.idBlock.tagNumber=6,e}return s(r,null,[{key:"blockName",value:function(){return"ObjectIdentifier"}}]),r}(l);t.ObjectIdentifier=I;var P=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).isHexOnly=!0,e.value="",e}return s(r,[{key:"toJSON",value:function(){var e={};try{e=b(v(r.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"Utf8StringValueBlock"}}]),r}(i(n)),T=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),e=t.call(this,n,P),"value"in n&&e.fromString(n.value),e.idBlock.tagClass=1,e.idBlock.tagNumber=12,e}return s(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e));try{this.valueBlock.value=decodeURIComponent(escape(this.valueBlock.value))}catch(e){this.warnings.push('Error during "decodeURIComponent": '.concat(e,", using raw string"))}}},{key:"fromString",value:function(e){var t=unescape(encodeURIComponent(e)),r=t.length;this.valueBlock.valueHex=new ArrayBuffer(r);for(var n=new Uint8Array(this.valueBlock.valueHex),i=0;i<r;i++)n[i]=t.charCodeAt(i);this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"Utf8String"}}]),r}(l);t.Utf8String=T;var D=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).valueDec=(0,j.getParametersValue)(n,"valueDec",-1),e}return s(r,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;if(!1===(0,j.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);this.valueHex=new ArrayBuffer(r);for(var i=new Uint8Array(this.valueHex),a=0;a<r&&(i[a]=127&n[a],this.blockLength++,0!=(128&n[a]));a++);for(var o=new ArrayBuffer(this.blockLength),u=new Uint8Array(o),s=0;s<this.blockLength;s++)u[s]=i[s];return this.valueHex=o.slice(0),i=new Uint8Array(this.valueHex),0!=(128&n[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===i[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=(0,j.utilFromBase)(i,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}},{key:"toBER",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isHexOnly){if(!0===r)return new ArrayBuffer(this.valueHex.byteLength);var n=new Uint8Array(this.valueHex);e=new ArrayBuffer(this.blockLength),t=new Uint8Array(e);for(var i=0;i<this.blockLength-1;i++)t[i]=128|n[i];return t[this.blockLength-1]=n[this.blockLength-1],e}var a=(0,j.utilToBase)(this.valueDec,7);if(0===a.byteLength)return this.error="Error during encoding SID value",new ArrayBuffer(0);if(e=new ArrayBuffer(a.byteLength),!1===r){var o=new Uint8Array(a);t=new Uint8Array(e);for(var u=0;u<a.byteLength-1;u++)t[u]=128|o[u];t[a.byteLength-1]=o[a.byteLength-1]}return e}},{key:"toString",value:function(){return!0===this.isHexOnly?(0,j.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength):this.valueDec.toString()}},{key:"toJSON",value:function(){var e={};try{e=b(v(r.prototype),"toJSON",this).call(this)}catch(e){}return e.valueDec=this.valueDec,e}}],[{key:"blockName",value:function(){return"relativeSidBlock"}}]),r}(i(n)),_=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).fromString((0,j.getParametersValue)(n,"value","")),e}return s(r,[{key:"fromBER",value:function(e,t,r){for(var n=t;r>0;){var i=new D;if(-1===(n=i.fromBER(e,n,r)))return this.blockLength=0,this.error=i.error,n;this.blockLength+=i.blockLength,r-=i.blockLength,this.value.push(i)}return n}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);if(0===n.byteLength)return this.error=this.value[r].error,new ArrayBuffer(0);t=(0,j.utilConcatBuf)(t,n)}return t}},{key:"fromString",value:function(e){this.value=[];var t=0,r=0,n="";do{n=-1===(r=e.indexOf(".",t))?e.substr(t):e.substr(t,r-t),t=r+1;var i=new D;if(i.valueDec=parseInt(n,10),isNaN(i.valueDec))return!0;this.value.push(i)}while(-1!==r);return!0}},{key:"toString",value:function(){for(var e="",t=!1,r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;var n=this.value[r].toString();0!==r&&(e="".concat(e,".")),e+=t?n="{".concat(n,"}"):n}return e}},{key:"toJSON",value:function(){var e={};try{e=b(v(r.prototype),"toJSON",this).call(this)}catch(e){}e.value=this.toString(),e.sidArray=[];for(var t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}],[{key:"blockName",value:function(){return"RelativeObjectIdentifierValueBlock"}}]),r}(c),V=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n,_)).idBlock.tagClass=1,e.idBlock.tagNumber=13,e}return s(r,null,[{key:"blockName",value:function(){return"RelativeObjectIdentifier"}}]),r}(l);t.RelativeObjectIdentifier=V;var J=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).isHexOnly=!0,e.value="",e}return s(r,[{key:"toJSON",value:function(){var e={};try{e=b(v(r.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"BmpStringValueBlock"}}]),r}(i(n)),M=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),e=t.call(this,n,J),"value"in n&&e.fromString(n.value),e.idBlock.tagClass=1,e.idBlock.tagNumber=30,e}return s(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){for(var t=e.slice(0),r=new Uint8Array(t),n=0;n<r.length;n+=2){var i=r[n];r[n]=r[n+1],r[n+1]=i}this.valueBlock.value=String.fromCharCode.apply(null,new Uint16Array(t))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(2*t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++){var i=(0,j.utilToBase)(e.charCodeAt(n),8),a=new Uint8Array(i);if(!(a.length>2))for(var o=2-a.length,u=a.length-1;u>=0;u--)r[2*n+u+o]=a[u]}this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"BmpString"}}]),r}(l);t.BmpString=M;var F=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).isHexOnly=!0,e.value="",e}return s(r,[{key:"toJSON",value:function(){var e={};try{e=b(v(r.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"UniversalStringValueBlock"}}]),r}(i(n)),z=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),e=t.call(this,n,F),"value"in n&&e.fromString(n.value),e.idBlock.tagClass=1,e.idBlock.tagNumber=28,e}return s(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){for(var t=e.slice(0),r=new Uint8Array(t),n=0;n<r.length;n+=4)r[n]=r[n+3],r[n+1]=r[n+2],r[n+2]=0,r[n+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(4*t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++){var i=(0,j.utilToBase)(e.charCodeAt(n),8),a=new Uint8Array(i);if(!(a.length>4))for(var o=4-a.length,u=a.length-1;u>=0;u--)r[4*n+u+o]=a[u]}this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"UniversalString"}}]),r}(l);t.UniversalString=z;var G=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).value="",e.isHexOnly=!0,e}return s(r,[{key:"toJSON",value:function(){var e={};try{e=b(v(r.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"SimpleStringValueBlock"}}]),r}(i(n)),q=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),e=t.call(this,n,G),"value"in n&&e.fromString(n.value),e}return s(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++)r[n]=e.charCodeAt(n);this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"SIMPLESTRING"}}]),r}(l),W=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=18,e}return s(r,null,[{key:"blockName",value:function(){return"NumericString"}}]),r}(q);t.NumericString=W;var Z=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=19,e}return s(r,null,[{key:"blockName",value:function(){return"PrintableString"}}]),r}(q);t.PrintableString=Z;var $=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=20,e}return s(r,null,[{key:"blockName",value:function(){return"TeletexString"}}]),r}(q);t.TeletexString=$;var X=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=21,e}return s(r,null,[{key:"blockName",value:function(){return"VideotexString"}}]),r}(q);t.VideotexString=X;var Y=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=22,e}return s(r,null,[{key:"blockName",value:function(){return"IA5String"}}]),r}(q);t.IA5String=Y;var Q=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=25,e}return s(r,null,[{key:"blockName",value:function(){return"GraphicString"}}]),r}(q);t.GraphicString=Q;var ee=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=26,e}return s(r,null,[{key:"blockName",value:function(){return"VisibleString"}}]),r}(q);t.VisibleString=ee;var te=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=27,e}return s(r,null,[{key:"blockName",value:function(){return"GeneralString"}}]),r}(q);t.GeneralString=te;var re=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=29,e}return s(r,null,[{key:"blockName",value:function(){return"CharacterString"}}]),r}(q);t.CharacterString=re;var ne=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(o(this,r),(e=t.call(this,n)).year=0,e.month=0,e.day=0,e.hour=0,e.minute=0,e.second=0,"value"in n){e.fromString(n.value),e.valueBlock.valueHex=new ArrayBuffer(n.value.length);for(var i=new Uint8Array(e.valueBlock.valueHex),a=0;a<n.value.length;a++)i[a]=n.value.charCodeAt(a)}return"valueDate"in n&&(e.fromDate(n.valueDate),e.valueBlock.valueHex=e.toBuffer()),e.idBlock.tagClass=1,e.idBlock.tagNumber=23,e}return s(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}},{key:"toBuffer",value:function(){for(var e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t}},{key:"fromDate",value:function(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}},{key:"toDate",value:function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}},{key:"fromString",value:function(e){var t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi.exec(e);if(null!==t){var r=parseInt(t[1],10);this.year=r>=50?1900+r:2e3+r,this.month=parseInt(t[2],10),this.day=parseInt(t[3],10),this.hour=parseInt(t[4],10),this.minute=parseInt(t[5],10),this.second=parseInt(t[6],10)}else this.error="Wrong input string for convertion"}},{key:"toString",value:function(){var e=new Array(7);return e[0]=(0,j.padNumber)(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=(0,j.padNumber)(this.month,2),e[2]=(0,j.padNumber)(this.day,2),e[3]=(0,j.padNumber)(this.hour,2),e[4]=(0,j.padNumber)(this.minute,2),e[5]=(0,j.padNumber)(this.second,2),e[6]="Z",e.join("")}},{key:"toJSON",value:function(){var e={};try{e=b(v(r.prototype),"toJSON",this).call(this)}catch(e){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e}}],[{key:"blockName",value:function(){return"UTCTime"}}]),r}(ee);t.UTCTime=ne;var ie=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(o(this,r),(e=t.call(this,n)).year=0,e.month=0,e.day=0,e.hour=0,e.minute=0,e.second=0,e.millisecond=0,"value"in n){e.fromString(n.value),e.valueBlock.valueHex=new ArrayBuffer(n.value.length);for(var i=new Uint8Array(e.valueBlock.valueHex),a=0;a<n.value.length;a++)i[a]=n.value.charCodeAt(a)}return"valueDate"in n&&(e.fromDate(n.valueDate),e.valueBlock.valueHex=e.toBuffer()),e.idBlock.tagClass=1,e.idBlock.tagNumber=24,e}return s(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}},{key:"toBuffer",value:function(){for(var e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t}},{key:"fromDate",value:function(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}},{key:"toDate",value:function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}},{key:"fromString",value:function(e){var t,r=!1,n="",i="",a=0,o=0,u=0;if("Z"===e[e.length-1])n=e.substr(0,e.length-1),r=!0;else{var s=new Number(e[e.length-1]);if(isNaN(s.valueOf()))throw new Error("Wrong input string for convertion");n=e}if(r){if(-1!==n.indexOf("+"))throw new Error("Wrong input string for convertion");if(-1!==n.indexOf("-"))throw new Error("Wrong input string for convertion")}else{var c=1,l=n.indexOf("+"),h="";if(-1===l&&(l=n.indexOf("-"),c=-1),-1!==l){if(h=n.substr(l+1),n=n.substr(0,l),2!==h.length&&4!==h.length)throw new Error("Wrong input string for convertion");var f=new Number(h.substr(0,2));if(isNaN(f.valueOf()))throw new Error("Wrong input string for convertion");if(o=c*f,4===h.length){if(f=new Number(h.substr(2,2)),isNaN(f.valueOf()))throw new Error("Wrong input string for convertion");u=c*f}}}var v=n.indexOf(".");if(-1===v&&(v=n.indexOf(",")),-1!==v){var p=new Number("0".concat(n.substr(v)));if(isNaN(p.valueOf()))throw new Error("Wrong input string for convertion");a=p.valueOf(),i=n.substr(0,v)}else i=n;switch(!0){case 8===i.length:if(t=/(\d{4})(\d{2})(\d{2})/gi,-1!==v)throw new Error("Wrong input string for convertion");break;case 10===i.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,-1!==v){var y=60*a;this.minute=Math.floor(y),y=60*(y-this.minute),this.second=Math.floor(y),y=1e3*(y-this.second),this.millisecond=Math.floor(y)}break;case 12===i.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==v){var g=60*a;this.second=Math.floor(g),g=1e3*(g-this.second),this.millisecond=Math.floor(g)}break;case 14===i.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==v){var m=1e3*a;this.millisecond=Math.floor(m)}break;default:throw new Error("Wrong input string for convertion")}var d=t.exec(i);if(null===d)throw new Error("Wrong input string for convertion");for(var k=1;k<d.length;k++)switch(k){case 1:this.year=parseInt(d[k],10);break;case 2:this.month=parseInt(d[k],10);break;case 3:this.day=parseInt(d[k],10);break;case 4:this.hour=parseInt(d[k],10)+o;break;case 5:this.minute=parseInt(d[k],10)+u;break;case 6:this.second=parseInt(d[k],10);break;default:throw new Error("Wrong input string for convertion")}if(!1===r){var w=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=w.getUTCFullYear(),this.month=w.getUTCMonth(),this.day=w.getUTCDay(),this.hour=w.getUTCHours(),this.minute=w.getUTCMinutes(),this.second=w.getUTCSeconds(),this.millisecond=w.getUTCMilliseconds()}}},{key:"toString",value:function(){var e=[];return e.push((0,j.padNumber)(this.year,4)),e.push((0,j.padNumber)(this.month,2)),e.push((0,j.padNumber)(this.day,2)),e.push((0,j.padNumber)(this.hour,2)),e.push((0,j.padNumber)(this.minute,2)),e.push((0,j.padNumber)(this.second,2)),0!==this.millisecond&&(e.push("."),e.push((0,j.padNumber)(this.millisecond,3))),e.push("Z"),e.join("")}},{key:"toJSON",value:function(){var e={};try{e=b(v(r.prototype),"toJSON",this).call(this)}catch(e){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e.millisecond=this.millisecond,e}}],[{key:"blockName",value:function(){return"GeneralizedTime"}}]),r}(ee);t.GeneralizedTime=ie;var ae=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=31,e}return s(r,null,[{key:"blockName",value:function(){return"DATE"}}]),r}(T);t.DATE=ae;var oe=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=32,e}return s(r,null,[{key:"blockName",value:function(){return"TimeOfDay"}}]),r}(T);t.TimeOfDay=oe;var ue=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=33,e}return s(r,null,[{key:"blockName",value:function(){return"DateTime"}}]),r}(T);t.DateTime=ue;var se=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=34,e}return s(r,null,[{key:"blockName",value:function(){return"Duration"}}]),r}(T);t.Duration=se;var ce=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=14,e}return s(r,null,[{key:"blockName",value:function(){return"TIME"}}]),r}(T);t.TIME=ce;var le=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.value=(0,j.getParametersValue)(t,"value",[]),this.optional=(0,j.getParametersValue)(t,"optional",!1)};t.Choice=le;var he=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.name=(0,j.getParametersValue)(t,"name",""),this.optional=(0,j.getParametersValue)(t,"optional",!1)};t.Any=he;var fe=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.name=(0,j.getParametersValue)(t,"name",""),this.optional=(0,j.getParametersValue)(t,"optional",!1),this.value=(0,j.getParametersValue)(t,"value",new he),this.local=(0,j.getParametersValue)(t,"local",!1)};t.Repeated=fe;var ve=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.data=(0,j.getParametersValue)(t,"data",new ArrayBuffer(0))}return s(e,[{key:"fromBER",value:function(e,t,r){return this.data=e.slice(t,r),t+r}},{key:"toBER",value:function(){return this.data}}]),e}();function pe(e,t,r){var i=t;var a=new l({},Object),o=new n;if(!1===(0,j.checkBufferParams)(o,e,t,r))return a.error=o.error,{offset:-1,result:a};if(0===new Uint8Array(e,t,r).length)return this.error="Zero buffer length",{offset:-1,result:a};var u=a.idBlock.fromBER(e,t,r);if(a.warnings.concat(a.idBlock.warnings),-1===u)return a.error=a.idBlock.error,{offset:-1,result:a};if(t=u,r-=a.idBlock.blockLength,u=a.lenBlock.fromBER(e,t,r),a.warnings.concat(a.lenBlock.warnings),-1===u)return a.error=a.lenBlock.error,{offset:-1,result:a};if(t=u,r-=a.lenBlock.blockLength,!1===a.idBlock.isConstructed&&!0===a.lenBlock.isIndefiniteForm)return a.error="Indefinite length form used for primitive encoding form",{offset:-1,result:a};var s=l;switch(a.idBlock.tagClass){case 1:if(a.idBlock.tagNumber>=37&&!1===a.idBlock.isHexOnly)return a.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:a};switch(a.idBlock.tagNumber){case 0:if(!0===a.idBlock.isConstructed&&a.lenBlock.length>0)return a.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:a};s=d;break;case 1:s=A;break;case 2:s=O;break;case 3:s=E;break;case 4:s=R;break;case 5:s=x;break;case 6:s=I;break;case 10:s=U;break;case 12:s=T;break;case 13:s=V;break;case 14:s=ce;break;case 15:return a.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:a};case 16:s=B;break;case 17:s=S;break;case 18:s=W;break;case 19:s=Z;break;case 20:s=$;break;case 21:s=X;break;case 22:s=Y;break;case 23:s=ne;break;case 24:s=ie;break;case 25:s=Q;break;case 26:s=ee;break;case 27:s=te;break;case 28:s=z;break;case 29:s=re;break;case 30:s=M;break;case 31:s=ae;break;case 32:s=oe;break;case 33:s=ue;break;case 34:s=se;break;default:var c;(c=!0===a.idBlock.isConstructed?new g:new p).idBlock=a.idBlock,c.lenBlock=a.lenBlock,c.warnings=a.warnings,u=(a=c).fromBER(e,t,r)}break;case 2:case 3:case 4:default:s=!0===a.idBlock.isConstructed?g:p}return u=(a=function(e,t){if(e instanceof t)return e;var r=new t;return r.idBlock=e.idBlock,r.lenBlock=e.lenBlock,r.warnings=e.warnings,r.valueBeforeDecode=e.valueBeforeDecode.slice(0),r}(a,s)).fromBER(e,t,!0===a.lenBlock.isIndefiniteForm?r:a.lenBlock.length),a.valueBeforeDecode=e.slice(i,i+a.blockLength),{offset:u,result:a}}function ye(e){if(0===e.byteLength){var t=new l({},Object);return t.error="Input buffer has zero length",{offset:-1,result:t}}return pe(e,0,e.byteLength)}function ge(e,t,r){if(r instanceof le){for(var n=0;n<r.value.length;n++){if(!0===ge(e,t,r.value[n]).verified)return{verified:!0,result:e}}var i={verified:!1,result:{error:"Wrong values for Choice type"}};return r.hasOwnProperty("name")&&(i.name=r.name),i}if(r instanceof he)return r.hasOwnProperty("name")&&(e[r.name]=t),{verified:!0,result:e};if(e instanceof Object==!1)return{verified:!1,result:{error:"Wrong root object"}};if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(r instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("idBlock"in r==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("fromBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("toBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var a=r.idBlock.toBER(!1);if(0===a.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(-1===r.idBlock.fromBER(a,0,a.byteLength))return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===r.idBlock.hasOwnProperty("tagClass"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagClass!==t.idBlock.tagClass)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("tagNumber"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagNumber!==t.idBlock.tagNumber)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("isConstructed"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isConstructed!==t.idBlock.isConstructed)return{verified:!1,result:e};if("isHexOnly"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly)return{verified:!1,result:e};if(!0===r.idBlock.isHexOnly){if("valueHex"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var o=new Uint8Array(r.idBlock.valueHex),u=new Uint8Array(t.idBlock.valueHex);if(o.length!==u.length)return{verified:!1,result:e};for(var s=0;s<o.length;s++)if(o[s]!==u[1])return{verified:!1,result:e}}if(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(e[r.name]=t)),!0===r.idBlock.isConstructed){var c=0,l={verified:!1},h=r.valueBlock.value.length;if(h>0&&r.valueBlock.value[0]instanceof fe&&(h=t.valueBlock.value.length),0===h)return{verified:!0,result:e};if(0===t.valueBlock.value.length&&0!==r.valueBlock.value.length){for(var f=!0,v=0;v<r.valueBlock.value.length;v++)f=f&&(r.valueBlock.value[v].optional||!1);return!0===f?{verified:!0,result:e}:(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),e.error="Inconsistent object length",{verified:!1,result:e})}for(var p=0;p<h;p++)if(p-c>=t.valueBlock.value.length){if(!1===r.valueBlock.value[p].optional){var y={verified:!1,result:e};return e.error="Inconsistent length between ASN.1 data and schema",r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],y.name=r.name)),y}}else if(r.valueBlock.value[0]instanceof fe){if(!1===(l=ge(e,t.valueBlock.value[p],r.valueBlock.value[0].value)).verified){if(!0!==r.valueBlock.value[0].optional)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),l;c++}if("name"in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){var g={};void 0===(g="local"in r.valueBlock.value[0]&&!0===r.valueBlock.value[0].local?t:e)[r.valueBlock.value[0].name]&&(g[r.valueBlock.value[0].name]=[]),g[r.valueBlock.value[0].name].push(t.valueBlock.value[p])}}else if(!1===(l=ge(e,t.valueBlock.value[p-c],r.valueBlock.value[p])).verified){if(!0!==r.valueBlock.value[p].optional)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),l;c++}if(!1===l.verified){var m={verified:!1,result:e};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],m.name=r.name)),m}return{verified:!0,result:e}}if("primitiveSchema"in r&&"valueHex"in t.valueBlock){var d=ye(t.valueBlock.valueHex);if(-1===d.offset){var k={verified:!1,result:d.result};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],k.name=r.name)),k}return ge(e,d.result,r.primitiveSchema)}return{verified:!0,result:e}}t.RawData=ve})),V=(D=_)&&D.__esModule&&Object.prototype.hasOwnProperty.call(D,"default")?D.default:D,J=_.fromBER,M=_.compareSchema,F=_.verifySchema,z=_.fromJSON,G=_.RawData,q=_.Repeated,W=_.Any,Z=_.Choice,$=_.TIME,X=_.Duration,Y=_.DateTime,Q=_.TimeOfDay,ee=_.DATE,te=_.GeneralizedTime,re=_.UTCTime,ne=_.CharacterString,ie=_.GeneralString,ae=_.VisibleString,oe=_.GraphicString,ue=_.IA5String,se=_.VideotexString,ce=_.TeletexString,le=_.PrintableString,he=_.NumericString,fe=_.UniversalString,ve=_.BmpString,pe=_.RelativeObjectIdentifier,ye=_.Utf8String,ge=_.ObjectIdentifier,me=_.Enumerated,de=_.Integer,ke=_.BitString,we=_.OctetString,be=_.Null,Ae=_.Set,Be=_.Sequence,Se=_.Boolean,xe=_.EndOfContent,Ce=_.Constructed,Re=_.Primitive,Ne=_.BaseBlock,Ee=_.ValueBlock,Ke=_.HexBlock,Oe=Object.freeze({__proto__:null,default:V,__moduleExports:_,fromBER:J,compareSchema:M,verifySchema:F,fromJSON:z,RawData:G,Repeated:q,Any:W,Choice:Z,TIME:$,Duration:X,DateTime:Y,TimeOfDay:Q,DATE:ee,GeneralizedTime:te,UTCTime:re,CharacterString:ne,GeneralString:ie,VisibleString:ae,GraphicString:oe,IA5String:ue,VideotexString:se,TeletexString:ce,PrintableString:le,NumericString:he,UniversalString:fe,BmpString:ve,RelativeObjectIdentifier:pe,Utf8String:ye,ObjectIdentifier:ge,Enumerated:me,Integer:de,BitString:ke,OctetString:we,Null:be,Set:Ae,Sequence:Be,Boolean:Se,EndOfContent:xe,Constructed:Ce,Primitive:Re,BaseBlock:Ne,ValueBlock:Ee,HexBlock:Ke}),Ue={fromASN:function(e){return e instanceof be?null:e.valueBeforeDecode},toASN:function(e){if(null===e)return new be;var t=J(e);if(t.result.error)throw new Error(t.result.error);return t.result}},He={fromASN:function(e){return!e.valueBlock.valueDec&&e.valueBlock.valueHex.byteLength>0?e.valueBlock.toString():e.valueBlock.valueDec},toASN:function(e){return new de({value:e})}},Le={fromASN:function(e){return e.valueBlock.valueDec},toASN:function(e){return new me({value:e})}},Ie={fromASN:function(e){return e.valueBlock.valueHex},toASN:function(e){return new de({valueHex:e})}},Pe={fromASN:function(e){return e.valueBlock.valueHex},toASN:function(e){return new ke({valueHex:e})}},Te={fromASN:function(e){return e.valueBlock.toString()},toASN:function(e){return new ge({value:e})}},De={fromASN:function(e){return e.valueBlock.value},toASN:function(e){return new Se({value:e})}},je={fromASN:function(e){return e.valueBlock.valueHex},toASN:function(e){return new we({valueHex:e})}};function _e(e){return{fromASN:function(e){return e.valueBlock.value},toASN:function(t){return new e({value:t})}}}var Ve,Je,Me=_e(ye),Fe=_e(ve),ze=_e(fe),Ge=_e(he),qe=_e(le),We=_e(ce),Ze=_e(se),$e=_e(ue),Xe=_e(oe),Ye=_e(ae),Qe=_e(ie),et=_e(ne),tt={fromASN:function(e){return e.toDate()},toASN:function(e){return new re({valueDate:e})}},rt={fromASN:function(e){return e.toDate()},toASN:function(e){return new te({valueDate:e})}},nt={fromASN:function(e){return null},toASN:function(e){return new be}},it=Object.freeze({__proto__:null,AsnAnyConverter:Ue,AsnIntegerConverter:He,AsnEnumeratedConverter:Le,AsnIntegerArrayBufferConverter:Ie,AsnBitStringConverter:Pe,AsnObjectIdentifierConverter:Te,AsnBooleanConverter:De,AsnOctetStringConverter:je,AsnUtf8StringConverter:Me,AsnBmpStringConverter:Fe,AsnUniversalStringConverter:ze,AsnNumericStringConverter:Ge,AsnPrintableStringConverter:qe,AsnTeletexStringConverter:We,AsnVideotexStringConverter:Ze,AsnIA5StringConverter:$e,AsnGraphicStringConverter:Xe,AsnVisibleStringConverter:Ye,AsnGeneralStringConverter:Qe,AsnCharacterStringConverter:et,AsnUTCTimeConverter:tt,AsnGeneralizedTimeConverter:rt,AsnNullConverter:nt});function at(e){return e&&e.prototype?!(!e.prototype.toASN||!e.prototype.fromASN)||at(e.prototype):!!(e&&e.toASN&&e.fromASN)}function ot(e,t){if(!e||!t)return!1;if(e.byteLength!==t.byteLength)return!1;for(var r=new Uint8Array(e),n=new Uint8Array(t),i=0;i<e.byteLength;i++)if(r[i]!==n[i])return!1;return!0}!function(e){e[e.Sequence=0]="Sequence",e[e.Set=1]="Set",e[e.Choice=2]="Choice"}(Ve||(Ve={})),function(e){e[e.Any=1]="Any",e[e.Boolean=2]="Boolean",e[e.OctetString=3]="OctetString",e[e.BitString=4]="BitString",e[e.Integer=5]="Integer",e[e.Enumerated=6]="Enumerated",e[e.ObjectIdentifier=7]="ObjectIdentifier",e[e.Utf8String=8]="Utf8String",e[e.BmpString=9]="BmpString",e[e.UniversalString=10]="UniversalString",e[e.NumericString=11]="NumericString",e[e.PrintableString=12]="PrintableString",e[e.TeletexString=13]="TeletexString",e[e.VideotexString=14]="VideotexString",e[e.IA5String=15]="IA5String",e[e.GraphicString=16]="GraphicString",e[e.VisibleString=17]="VisibleString",e[e.GeneralString=18]="GeneralString",e[e.CharacterString=19]="CharacterString",e[e.UTCTime=20]="UTCTime",e[e.GeneralizedTime=21]="GeneralizedTime",e[e.DATE=22]="DATE",e[e.TimeOfDay=23]="TimeOfDay",e[e.DateTime=24]="DateTime",e[e.Duration=25]="Duration",e[e.TIME=26]="TIME",e[e.Null=27]="Null"}(Je||(Je={}));var ut,st=new(function(){function e(){o(this,e),this.items=new WeakMap}return s(e,[{key:"has",value:function(e){return this.items.has(e)}},{key:"get",value:function(e){var t,r,n,i,a=this.items.get(e);if(!a)throw new Error("Cannot get schema for '".concat(null!==(i=null===(n=null===(r=null===(t=e)||void 0===t?void 0:t.prototype)||void 0===r?void 0:r.constructor)||void 0===n?void 0:n.name)&&void 0!==i?i:e,"' target"));return a}},{key:"cache",value:function(e){var t=this.get(e);t.schema||(t.schema=this.create(e,!0))}},{key:"createDefault",value:function(e){var t={type:Ve.Sequence,items:{}},r=this.findParentSchema(e);return r&&(Object.assign(t,r),t.items=Object.assign({},t.items,r.items)),t}},{key:"create",value:function(e,t){var r=this.items.get(e)||this.createDefault(e),n=[];for(var i in r.items){var a=r.items[i],o=t?i:"",u=void 0;if("number"==typeof a.type){var s=Je[a.type],c=Oe[s];if(!c)throw new Error("Cannot get ASN1 class by name '".concat(s,"'"));u=new c({name:o})}else if(at(a.type)){u=(new a.type).toSchema(o)}else u=new W({name:o});var l=!!a.optional||void 0!==a.defaultValue;if(a.repeated)u.name="",u=new("set"===a.repeated?Ae:Be)({name:"",value:[new q({name:o,value:u})]});if(null!==a.context&&void 0!==a.context)if(a.implicit)if("number"==typeof a.type||at(a.type)){var h=a.repeated?Ce:Re;n.push(new h({name:o,optional:l,idBlock:{tagClass:3,tagNumber:a.context}}))}else{this.cache(a.type);var f=!!a.repeated,v=f?u:this.get(a.type).schema;v=v.valueBlock?v.valueBlock.value:v.value,n.push(new Ce({name:f?"":o,optional:l,idBlock:{tagClass:3,tagNumber:a.context},value:v}))}else n.push(new Ce({optional:l,idBlock:{tagClass:3,tagNumber:a.context},value:[u]}));else u.optional=l,n.push(u)}switch(r.type){case Ve.Sequence:return new Be({value:n,name:""});case Ve.Set:return new Ae({value:n,name:""});case Ve.Choice:return new Z({value:n,name:""});default:throw new Error("Unsupported ASN1 type in use")}}},{key:"set",value:function(e,t){return this.items.set(e,t),this}},{key:"findParentSchema",value:function(e){var t=e.__proto__;return t?this.items.get(t)||this.findParentSchema(t):null}}]),e}()),ct=function(e){return function(t){var r;st.has(t)?r=st.get(t):(r=st.createDefault(t),st.set(t,r)),Object.assign(r,e)}},lt=function(e){return function(t,r){var n;st.has(t.constructor)?n=st.get(t.constructor):(n=st.createDefault(t.constructor),st.set(t.constructor,n));var i=Object.assign({},e);if("number"==typeof i.type&&!i.converter){var a="Asn".concat(Je[e.type],"Converter"),o=it[a];if(!o)throw new Error("Cannot get '".concat(a,"' for property '").concat(r,"' of ").concat(t.constructor.name));i.converter=o}n.items[r]=i}},ht=function(e){f(r,e);var t=w(r);function r(){var e;return o(this,r),(e=t.apply(this,arguments)).schemas=[],e}return r}(m(Error)),ft=function(){function e(){o(this,e)}return s(e,null,[{key:"parse",value:function(e,t){var r;if(e instanceof ArrayBuffer)r=e;else if(void 0!==("undefined"==typeof Buffer?"undefined":n(Buffer))&&Buffer.isBuffer(e))r=new Uint8Array(e).buffer;else{if(!ArrayBuffer.isView(e))throw new TypeError("Wrong type of 'data' argument");r=e.buffer}var i=J(r);if(i.result.error)throw new Error(i.result.error);return this.fromASN(i.result,t)}},{key:"fromASN",value:function(e,t){var r,n=this;try{if(at(t))return(new t).fromASN(e);var i=st.get(t);st.cache(t);var a=i.schema;if(e.constructor===Ce&&i.type!==Ve.Choice)for(var o in a=new Ce({idBlock:{tagClass:3,tagNumber:e.idBlock.tagNumber},value:i.schema.valueBlock.value}),i.items)delete e[o];var u=M(e,e,a);if(!u.verified)throw new ht("Data does not match to ".concat(t.name," ASN1 schema. ").concat(u.result.error));var s=new t;if(function e(t){var r;if(t){var n=Object.getPrototypeOf(t);return(null===(r=null==n?void 0:n.prototype)||void 0===r?void 0:r.constructor)===Array||e(n)}return!1}(t))return t.from(e.valueBlock.value,(function(e){return n.fromASN(e,i.itemType)}));var c=function(t){if(!e[t])return"continue";var a=i.items[t];if("number"==typeof a.type||at(a.type)){var o=null!==(r=a.converter)&&void 0!==r?r:at(a.type)?new a.type:null;if(!o)throw new Error("Converter is empty");if(a.repeated)if(a.implicit){var u=new("sequence"===a.repeated?Be:Ae);u.valueBlock=e[t].valueBlock;var c=J(u.toBER(!1)).result.valueBlock.value;s[t]=Array.from(c,(function(e){return o.fromASN(e)}))}else s[t]=Array.from(e[t],(function(e){return o.fromASN(e)}));else{var l=e[t];if(a.implicit){var h;if(at(a.type))h=(new a.type).toSchema("");else{var f=Je[a.type],v=Oe[f];if(!v)throw new Error("Cannot get '".concat(f,"' class from asn1js module"));h=new v}h.valueBlock=l.valueBlock,l=J(h.toBER(!1)).result}s[t]=o.fromASN(l)}}else a.repeated?s[t]=Array.from(e[t],(function(e){return n.fromASN(e,a.type)})):s[t]=n.fromASN(e[t],a.type)};for(var l in i.items)c(l);return s}catch(e){throw e instanceof ht&&e.schemas.push(t.name),e}}}]),e}(),vt=function(){function e(){o(this,e)}return s(e,null,[{key:"serialize",value:function(e){return e instanceof Ne?e.toBER(!1):this.toASN(e).toBER(!1)}},{key:"toASN",value:function(t){var r=this;if(t&&at(t.constructor))return t.toASN();var i=t.constructor,a=st.get(i);st.cache(i);var o,u=[];if(a.itemType)u=t.map((function(e){return r.toAsnItem({type:a.itemType},"[]",i,e)}));else for(var s in a.items){var c=a.items[s],l=t[s];if(!(void 0===l||c.defaultValue===l||"object"===n(c.defaultValue)&&"object"===n(l)&&ot(this.serialize(c.defaultValue),this.serialize(l)))){var h=e.toAsnItem(c,s,i,l);if("number"==typeof c.context)if(c.implicit)if(c.repeated||"number"!=typeof c.type&&!at(c.type))u.push(new Ce({optional:c.optional,idBlock:{tagClass:3,tagNumber:c.context},value:h.valueBlock.value}));else{var f={};f.valueHex=h.valueBlock.toBER(),u.push(new Re(Object.assign({optional:c.optional,idBlock:{tagClass:3,tagNumber:c.context}},f)))}else u.push(new Ce({optional:c.optional,idBlock:{tagClass:3,tagNumber:c.context},value:[h]}));else c.repeated?u=u.concat(h):u.push(h)}}switch(a.type){case Ve.Sequence:o=new Be({value:u});break;case Ve.Set:o=new Ae({value:u});break;case Ve.Choice:if(!u[0])throw new Error("Schema '".concat(i.name,"' has wrong data. Choice cannot be empty."));o=u[0]}return o}},{key:"toAsnItem",value:function(e,t,r,n){var i,a=this;if("number"==typeof e.type){var o=e.converter;if(!o)throw new Error("Property '".concat(t,"' doesn't have converter for type ").concat(Je[e.type]," in schema '").concat(r.name,"'"));if(e.repeated){var u=Array.from(n,(function(e){return o.toASN(e)}));i=new("sequence"===e.repeated?Be:Ae)({value:u})}else i=o.toASN(n)}else if(e.repeated){var s=Array.from(n,(function(e){return a.toASN(e)}));i=new("sequence"===e.repeated?Be:Ae)({value:s})}else i=this.toASN(n);return i}}]),e}(),pt=function(e){f(r,e);var t=w(r);function r(e,n){var i;return o(this,r),(i=t.call(this,n?"".concat(e,". See the inner exception for more details."):e)).message=e,i.innerError=n,i}return r}(m(Error)),yt=function(e){f(r,e);var t=w(r);function r(e,n,i){return o(this,r),t.call(this,e,"JSON doesn't match to '".concat(e.target.name,"' schema. ").concat(n),i)}return r}(function(e){f(r,e);var t=w(r);function r(e,n,i){var a;return o(this,r),(a=t.call(this,n,i)).schema=e,a}return r}(pt)),gt=function(e){f(r,e);var t=w(r);function r(){return o(this,r),t.apply(this,arguments)}return r}(pt),mt=function(e){f(r,e);var t=w(r);function r(e,n,i){var a;return o(this,r),(a=t.call(this,"Cannot serialize by '".concat(e,"' schema. ").concat(n),i)).schemaName=e,a}return r}(pt),dt=function(e){f(r,e);var t=w(r);function r(e,n){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o(this,r),(i=t.call(this,e,"Some keys doesn't match to schema")).keys=n,i.errors=a,i}return r}(yt);function kt(e,t){if(!function(e,t){switch(t){case ut.Boolean:return"boolean"==typeof e;case ut.Number:return"number"==typeof e;case ut.String:return"string"==typeof e}return!0}(e,t))throw new TypeError("Value must be ".concat(ut[t]))}function wt(e){return e&&e.prototype?!(!e.prototype.toJSON||!e.prototype.fromJSON)||wt(e.prototype):!!(e&&e.toJSON&&e.fromJSON)}!function(e){e[e.Any=0]="Any",e[e.Boolean=1]="Boolean",e[e.Number=2]="Number",e[e.String=3]="String"}(ut||(ut={}));var bt=function(){function e(){o(this,e),this.items=new Map}return s(e,[{key:"has",value:function(e){return this.items.has(e)||!!this.findParentSchema(e)}},{key:"get",value:function(e){var t=this.items.get(e)||this.findParentSchema(e);if(!t)throw new Error("Cannot get schema for current target");return t}},{key:"create",value:function(e){var t={names:{}},r=this.findParentSchema(e);if(r)for(var n in Object.assign(t,r),t.names={},r.names)t.names[n]=Object.assign({},r.names[n]);return t.target=e,t}},{key:"set",value:function(e,t){return this.items.set(e,t),this}},{key:"findParentSchema",value:function(e){var t=e.__proto__;return t?this.items.get(t)||this.findParentSchema(t):null}}]),e}(),At=new bt,Bt=function(){function e(t){o(this,e),this.pattern=new RegExp(t)}return s(e,[{key:"validate",value:function(e){var t=new RegExp(this.pattern.source,this.pattern.flags);if("string"!=typeof e)throw new gt("Incoming value must be string");if(!t.exec(e))throw new gt("Value doesn't match to pattern '".concat(t.toString(),"'"))}}]),e}(),St=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.MIN_VALUE,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;o(this,e),this.min=t,this.max=r}return s(e,[{key:"validate",value:function(e){if(kt(e,ut.Number),!(this.min<=e&&e<=this.max)){var t=this.min===Number.MIN_VALUE?"MIN":this.min,r=this.max===Number.MAX_VALUE?"MAX":this.max;throw new gt("Value doesn't match to diapason [".concat(t,",").concat(r,"]"))}}}]),e}(),xt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.MIN_VALUE,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;o(this,e),this.min=t,this.max=r}return s(e,[{key:"validate",value:function(e){if(kt(e,ut.Number),!(this.min<e&&e<this.max)){var t=this.min===Number.MIN_VALUE?"MIN":this.min,r=this.max===Number.MAX_VALUE?"MAX":this.max;throw new gt("Value doesn't match to diapason (".concat(t,",").concat(r,")"))}}}]),e}(),Ct=function(){function e(t,r,n){o(this,e),this.length=t,this.minLength=r,this.maxLength=n}return s(e,[{key:"validate",value:function(e){if(void 0===this.length){if(void 0!==this.minLength&&e.length<this.minLength)throw new gt("Value length must be more than ".concat(this.minLength,"."));if(void 0!==this.maxLength&&e.length>this.maxLength)throw new gt("Value length must be less than ".concat(this.maxLength,"."))}else if(e.length!==this.length)throw new gt("Value length must be exactly ".concat(this.length,"."))}}]),e}(),Rt=function(){function e(t){o(this,e),this.enumeration=t}return s(e,[{key:"validate",value:function(e){if(kt(e,ut.String),!this.enumeration.includes(e))throw new gt("Value must be one of ".concat(this.enumeration.map((function(e){return"'".concat(e,"'")})).join(", ")))}}]),e}(),Nt=function(){function e(){o(this,e)}return s(e,null,[{key:"checkValues",value:function(e,t){var r,n=x(Array.isArray(e)?e:[e]);try{for(n.s();!(r=n.n()).done;){var i,a=r.value,o=x(t.validations);try{for(o.s();!(i=o.n()).done;){var u=i.value;u instanceof Ct&&t.repeated?u.validate(e):u.validate(a)}}catch(e){o.e(e)}finally{o.f()}}}catch(e){n.e(e)}finally{n.f()}}},{key:"checkTypes",value:function(e,t){if(t.repeated&&!Array.isArray(e))throw new TypeError("Value must be Array");if("number"==typeof t.type){var r,n=x(Array.isArray(e)?e:[e]);try{for(n.s();!(r=n.n()).done;){kt(r.value,t.type)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"getSchemaByName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return h(h({},e.names.default),e.names[t])}}]),e}(),Et=function(e){f(r,e);var t=w(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,null,[{key:"serialize",value:function(e,t,r,n){var i=this.toJSON(e,t);return JSON.stringify(i,r,n)}},{key:"toJSON",value:function(e){var t,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.targetSchema,o=i.schemaName||"default";if(wt(e))return e.toJSON();if(Array.isArray(e)){t=[];var u,s=x(e);try{for(s.s();!(u=s.n()).done;){var c=u.value;t.push(this.toJSON(c,i))}}catch(e){s.e(e)}finally{s.f()}}else if("object"===n(e)){if(a&&!At.has(a))throw new pt("Cannot get schema for `targetSchema` param");if(a=a||e.constructor,At.has(a)){var l=At.get(a);t={};var h=this.getSchemaByName(l,o);for(var f in h)try{var v=function(){var n=h[f],i=e[f],u=void 0;if(n.optional&&void 0===i||void 0!==n.defaultValue&&i===n.defaultValue)return"continue";if(!n.optional&&void 0===i)throw new mt(a.name,"Property '".concat(f,"' is required."));u="number"==typeof n.type?n.converter?n.repeated?i.map((function(t){return n.converter.toJSON(t,e)})):n.converter.toJSON(i,e):i:n.repeated?i.map((function(e){return r.toJSON(e,{schemaName:o})})):r.toJSON(i,{schemaName:o}),r.checkTypes(u,n),r.checkValues(u,n),t[n.name||f]=u}();if("continue"===v)continue}catch(e){throw e instanceof mt?e:new mt(l.target.name,"Property '".concat(f,"' is wrong. ").concat(e.message),e)}}else for(var p in t={},e)t[p]=this.toJSON(e[p],{schemaName:o})}else t=e;return t}}]),r}(Nt),Kt=function(e){f(r,e);var t=w(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,null,[{key:"parse",value:function(e,t){var r=JSON.parse(e);return this.fromJSON(r,t)}},{key:"fromJSON",value:function(e,t){var n=this,i=t.targetSchema,a=t.schemaName||"default",o=new i;if(wt(o))return o.fromJSON(e);var u=At.get(i),s=this.getSchemaByName(u,a),c={};for(var l in t.strictProperty&&!Array.isArray(e)&&r.checkStrictProperty(e,s,u),s)try{if("continue"===function(){var r=s[l],i=r.name||l,c=e[i];if(void 0===c&&(r.optional||void 0!==r.defaultValue))return"continue";if(!r.optional&&void 0===c)throw new yt(u,"Property '".concat(i,"' is required."));if(n.checkTypes(c,r),n.checkValues(c,r),"number"==typeof r.type)r.converter?r.repeated?o[l]=c.map((function(e){return r.converter.fromJSON(e,o)})):o[l]=r.converter.fromJSON(c,o):o[l]=c;else{var f=h(h({},t),{},{targetSchema:r.type,schemaName:a});r.repeated?o[l]=c.map((function(e){return n.fromJSON(e,f)})):o[l]=n.fromJSON(c,f)}}())continue}catch(e){if(e instanceof yt||(e=new yt(u,"Property '".concat(l,"' is wrong. ").concat(e.message),e)),!t.strictAllKeys)throw e;c[l]=e}var f=Object.keys(c);if(f.length)throw new dt(u,f,c);return o}},{key:"checkStrictProperty",value:function(e,t,r){for(var n=Object.keys(e),i=Object.keys(t),a=[],o=0,u=n;o<u.length;o++){var s=u[o];-1===i.indexOf(s)&&a.push(s)}if(a.length)throw new dt(r,a)}}]),r}(Nt);function Ot(e){var t=[];return e.pattern&&t.push(new Bt(e.pattern)),e.type!==ut.Number&&e.type!==ut.Any||(void 0===e.minInclusive&&void 0===e.maxInclusive||t.push(new St(e.minInclusive,e.maxInclusive)),void 0===e.minExclusive&&void 0===e.maxExclusive||t.push(new xt(e.minExclusive,e.maxExclusive)),void 0!==e.enumeration&&t.push(new Rt(e.enumeration))),(e.type===ut.String||e.repeated||e.type===ut.Any)&&(void 0===e.length&&void 0===e.minLength&&void 0===e.maxLength||t.push(new Ct(e.length,e.minLength,e.maxLength))),t}var Ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,r){var n,i="Cannot set type for ".concat(r," property of ").concat(t.constructor.name," schema");At.has(t.constructor)?(n=At.get(t.constructor)).target!==t.constructor&&(n=At.create(t.constructor),At.set(t.constructor,n)):(n=At.create(t.constructor),At.set(t.constructor,n));var a={type:ut.Any,validations:[]},o=Object.assign(a,e);if(o.validations=Ot(o),"number"!=typeof o.type&&!At.has(o.type)&&!wt(o.type))throw new Error("".concat(i,". Assigning type doesn't have schema."));var u,s=x(Array.isArray(e.schema)?e.schema:[e.schema||"default"]);try{for(s.s();!(u=s.n()).done;){var c=u.value;n.names[c]||(n.names[c]={}),n.names[c][r]=o}}catch(e){s.e(e)}finally{s.f()}}},Ht=function(e){f(r,e);var t=w(r);function r(){return o(this,r),t.apply(this,arguments)}return r}(m(Error)),Lt=function(e){f(r,e);var t=w(r);function r(){return o(this,r),t.apply(this,arguments)}return r}(Ht),It=function(e){f(r,e);var t=w(r);function r(e){return o(this,r),t.call(this,"Unsupported operation: ".concat(e?"".concat(e):""))}return r}(Ht),Pt=function(e){f(r,e);var t=w(r);function r(){return o(this,r),t.apply(this,arguments)}return r}(Ht),Tt=function(e){f(r,e);var t=w(r);function r(e){return o(this,r),t.call(this,"".concat(e,": Missing required property"))}return r}(Ht);function Dt(e){return"object"===n(e)&&"kty"in e}var jt=function(){function e(){o(this,e)}var t,r,n,i,u,c,l,h,f,v,p,y,g,m,d,k,w,b;return s(e,[{key:"digest",value:(b=a(regeneratorRuntime.mark((function e(){var t,r,n,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length,r=new Array(t),n=0;n<t;n++)r[n]=i[n];return this.checkDigest.apply(this,r),e.abrupt("return",this.onDigest.apply(this,r));case 3:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})},{key:"checkDigest",value:function(e,t){this.checkAlgorithmName(e)}},{key:"onDigest",value:(w=a(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new It("digest");case 1:case"end":return e.stop()}}),e)}))),function(e,t){return w.apply(this,arguments)})},{key:"generateKey",value:(k=a(regeneratorRuntime.mark((function e(){var t,r,n,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length,r=new Array(t),n=0;n<t;n++)r[n]=i[n];return this.checkGenerateKey.apply(this,r),e.abrupt("return",this.onGenerateKey.apply(this,r));case 3:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:"checkGenerateKey",value:function(e,t,r){if(this.checkAlgorithmName(e),this.checkGenerateKeyParams(e),!r||!r.length)throw new TypeError("Usages cannot be empty when creating a key.");var n;n=Array.isArray(this.usages)?this.usages:this.usages.privateKey.concat(this.usages.publicKey),this.checkKeyUsages(r,n)}},{key:"checkGenerateKeyParams",value:function(e){}},{key:"onGenerateKey",value:(d=a(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new It("generateKey");case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return d.apply(this,arguments)})},{key:"sign",value:(m=a(regeneratorRuntime.mark((function e(){var t,r,n,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length,r=new Array(t),n=0;n<t;n++)r[n]=i[n];return this.checkSign.apply(this,r),e.abrupt("return",this.onSign.apply(this,r));case 3:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"checkSign",value:function(e,t,r){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,"sign")}},{key:"onSign",value:(g=a(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new It("sign");case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return g.apply(this,arguments)})},{key:"verify",value:(y=a(regeneratorRuntime.mark((function e(){var t,r,n,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length,r=new Array(t),n=0;n<t;n++)r[n]=i[n];return this.checkVerify.apply(this,r),e.abrupt("return",this.onVerify.apply(this,r));case 3:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"checkVerify",value:function(e,t,r,n){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,"verify")}},{key:"onVerify",value:(p=a(regeneratorRuntime.mark((function e(t,r,n,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new It("verify");case 1:case"end":return e.stop()}}),e)}))),function(e,t,r,n){return p.apply(this,arguments)})},{key:"encrypt",value:(v=a(regeneratorRuntime.mark((function e(){var t,r,n,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length,r=new Array(t),n=0;n<t;n++)r[n]=i[n];return this.checkEncrypt.apply(this,r),e.abrupt("return",this.onEncrypt.apply(this,r));case 3:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"checkEncrypt",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,n.keyUsage?"encrypt":void 0)}},{key:"onEncrypt",value:(f=a(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new It("encrypt");case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return f.apply(this,arguments)})},{key:"decrypt",value:(h=a(regeneratorRuntime.mark((function e(){var t,r,n,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length,r=new Array(t),n=0;n<t;n++)r[n]=i[n];return this.checkDecrypt.apply(this,r),e.abrupt("return",this.onDecrypt.apply(this,r));case 3:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"checkDecrypt",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,n.keyUsage?"decrypt":void 0)}},{key:"onDecrypt",value:(l=a(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new It("decrypt");case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return l.apply(this,arguments)})},{key:"deriveBits",value:(c=a(regeneratorRuntime.mark((function e(){var t,r,n,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length,r=new Array(t),n=0;n<t;n++)r[n]=i[n];return this.checkDeriveBits.apply(this,r),e.abrupt("return",this.onDeriveBits.apply(this,r));case 3:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"checkDeriveBits",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,n.keyUsage?"deriveBits":void 0),r%8!=0)throw new Pt("length: Is not multiple of 8")}},{key:"onDeriveBits",value:(u=a(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new It("deriveBits");case 1:case"end":return e.stop()}}),e)}))),function(e,t,r){return u.apply(this,arguments)})},{key:"exportKey",value:(i=a(regeneratorRuntime.mark((function e(){var t,r,n,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length,r=new Array(t),n=0;n<t;n++)r[n]=i[n];return this.checkExportKey.apply(this,r),e.abrupt("return",this.onExportKey.apply(this,r));case 3:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"checkExportKey",value:function(e,t){if(this.checkKeyFormat(e),this.checkCryptoKey(t),!t.extractable)throw new Ht("key: Is not extractable")}},{key:"onExportKey",value:(n=a(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new It("exportKey");case 1:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})},{key:"importKey",value:(r=a(regeneratorRuntime.mark((function e(){var t,r,n,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length,r=new Array(t),n=0;n<t;n++)r[n]=i[n];return this.checkImportKey.apply(this,r),e.abrupt("return",this.onImportKey.apply(this,r));case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"checkImportKey",value:function(e,t,r,n,i){this.checkKeyFormat(e),this.checkKeyData(e,t),this.checkAlgorithmName(r),this.checkImportParams(r),Array.isArray(this.usages)&&this.checkKeyUsages(i,this.usages)}},{key:"onImportKey",value:(t=a(regeneratorRuntime.mark((function e(t,r,n,i,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new It("importKey");case 1:case"end":return e.stop()}}),e)}))),function(e,r,n,i,a){return t.apply(this,arguments)})},{key:"checkAlgorithmName",value:function(e){if(e.name.toLowerCase()!==this.name.toLowerCase())throw new Lt("Unrecognized name")}},{key:"checkAlgorithmParams",value:function(e){}},{key:"checkDerivedKeyParams",value:function(e){}},{key:"checkKeyUsages",value:function(e,t){var r,n=x(e);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(-1===t.indexOf(i))throw new TypeError("Cannot create a key using the specified key usages")}}catch(e){n.e(e)}finally{n.f()}}},{key:"checkCryptoKey",value:function(e,t){if(this.checkAlgorithmName(e.algorithm),t&&-1===e.usages.indexOf(t))throw new Ht("key does not match that of operation")}},{key:"checkRequiredProperty",value:function(e,t){if(!(t in e))throw new Tt(t)}},{key:"checkHashAlgorithm",value:function(e,t){var r,n=x(t);try{for(n.s();!(r=n.n()).done;){if(r.value.toLowerCase()===e.name.toLowerCase())return}}catch(e){n.e(e)}finally{n.f()}throw new Pt("hash: Must be one of ".concat(t.join(", ")))}},{key:"checkImportParams",value:function(e){}},{key:"checkKeyFormat",value:function(e){switch(e){case"raw":case"pkcs8":case"spki":case"jwk":break;default:throw new TypeError("format: Is invalid value. Must be 'jwk', 'raw', 'spki', or 'pkcs8'")}}},{key:"checkKeyData",value:function(e,t){if(!t)throw new TypeError("keyData: Cannot be empty on empty on key importing");if("jwk"===e){if(!Dt(t))throw new TypeError("keyData: Is not JsonWebToken")}else if(!E.isBufferSource(t))throw new TypeError("keyData: Is not ArrayBufferView or ArrayBuffer")}},{key:"prepareData",value:function(e){return E.toArrayBuffer(e)}}]),e}(),_t=function(e){f(r,e);var t=w(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"checkGenerateKeyParams",value:function(e){if(this.checkRequiredProperty(e,"length"),"number"!=typeof e.length)throw new TypeError("length: Is not of type Number");switch(e.length){case 128:case 192:case 256:break;default:throw new TypeError("length: Must be 128, 192, or 256")}}},{key:"checkDerivedKeyParams",value:function(e){this.checkGenerateKeyParams(e)}}]),r}(jt),Vt=function(e){f(r,e);var t=w(r);function r(){var e;return o(this,r),(e=t.apply(this,arguments)).name="AES-CBC",e.usages=["encrypt","decrypt","wrapKey","unwrapKey"],e}return s(r,[{key:"checkAlgorithmParams",value:function(e){if(this.checkRequiredProperty(e,"iv"),!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv)))throw new TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(16!==e.iv.byteLength)throw new TypeError("iv: Must have length 16 bytes")}}]),r}(_t),Jt=function(e){f(r,e);var t=w(r);function r(){var e;return o(this,r),(e=t.apply(this,arguments)).name="AES-CTR",e.usages=["encrypt","decrypt","wrapKey","unwrapKey"],e}return s(r,[{key:"checkAlgorithmParams",value:function(e){if(this.checkRequiredProperty(e,"counter"),!(e.counter instanceof ArrayBuffer||ArrayBuffer.isView(e.counter)))throw new TypeError("counter: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(16!==e.counter.byteLength)throw new TypeError("iv: Must have length 16 bytes");if(this.checkRequiredProperty(e,"length"),"number"!=typeof e.length)throw new TypeError("length: Is not a Number");if(e.length<1)throw new Pt("length: Must be more than 0")}}]),r}(_t),Mt=function(e){f(r,e);var t=w(r);function r(){var e;return o(this,r),(e=t.apply(this,arguments)).name="AES-ECB",e.usages=["encrypt","decrypt","wrapKey","unwrapKey"],e}return r}(_t),Ft=function(e){f(r,e);var t=w(r);function r(){var e;return o(this,r),(e=t.apply(this,arguments)).name="AES-GCM",e.usages=["encrypt","decrypt","wrapKey","unwrapKey"],e}return s(r,[{key:"checkAlgorithmParams",value:function(e){if(this.checkRequiredProperty(e,"iv"),!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv)))throw new TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(e.iv.byteLength<1)throw new Pt("iv: Must have length more than 0 and less than 2^64 - 1");switch("tagLength"in e||(e.tagLength=128),e.tagLength){case 32:case 64:case 96:case 104:case 112:case 120:case 128:break;default:throw new Pt("tagLength: Must be one of 32, 64, 96, 104, 112, 120 or 128")}}}]),r}(_t),zt=function(e){f(r,e);var t=w(r);function r(){var e;return o(this,r),(e=t.apply(this,arguments)).name="AES-KW",e.usages=["wrapKey","unwrapKey"],e}return r}(_t),Gt=function(e){f(r,e);var t=w(r);function r(){var e;return o(this,r),(e=t.apply(this,arguments)).usages=["encrypt","decrypt","wrapKey","unwrapKey"],e}return s(r,[{key:"checkAlgorithmParams",value:function(e){if(this.ivSize){if(this.checkRequiredProperty(e,"iv"),!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv)))throw new TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(e.iv.byteLength!==this.ivSize)throw new TypeError("iv: Must have length ".concat(this.ivSize," bytes"))}}},{key:"checkGenerateKeyParams",value:function(e){if(this.checkRequiredProperty(e,"length"),"number"!=typeof e.length)throw new TypeError("length: Is not of type Number");if(e.length!==this.keySizeBits)throw new Pt("algorith.length: Must be ".concat(this.keySizeBits))}},{key:"checkDerivedKeyParams",value:function(e){this.checkGenerateKeyParams(e)}}]),r}(jt),qt=function(e){f(r,e);var t=w(r);function r(){var e;return o(this,r),(e=t.apply(this,arguments)).hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],e}return s(r,[{key:"checkGenerateKeyParams",value:function(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),this.checkRequiredProperty(e,"publicExponent"),!(e.publicExponent&&e.publicExponent instanceof Uint8Array))throw new TypeError("publicExponent: Missing or not a Uint8Array");var t=N.ToBase64(e.publicExponent);if("Aw=="!==t&&"AQAB"!==t)throw new TypeError("publicExponent: Must be [3] or [1,0,1]");switch(this.checkRequiredProperty(e,"modulusLength"),e.modulusLength){case 1024:case 2048:case 4096:break;default:throw new TypeError("modulusLength: Must be 1024, 2048, or 4096")}}},{key:"checkImportParams",value:function(e){this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}]),r}(jt),Wt=function(e){f(r,e);var t=w(r);function r(){var e;return o(this,r),(e=t.apply(this,arguments)).name="RSASSA-PKCS1-v1_5",e.usages={privateKey:["sign"],publicKey:["verify"]},e}return r}(qt),Zt=function(e){f(r,e);var t=w(r);function r(){var e;return o(this,r),(e=t.apply(this,arguments)).name="RSA-PSS",e.usages={privateKey:["sign"],publicKey:["verify"]},e}return s(r,[{key:"checkAlgorithmParams",value:function(e){if(this.checkRequiredProperty(e,"saltLength"),"number"!=typeof e.saltLength)throw new TypeError("saltLength: Is not a Number");if(e.saltLength<1)throw new RangeError("saltLength: Must be more than 0")}}]),r}(qt),$t=function(e){f(r,e);var t=w(r);function r(){var e;return o(this,r),(e=t.apply(this,arguments)).name="RSA-OAEP",e.usages={privateKey:["decrypt","unwrapKey"],publicKey:["encrypt","wrapKey"]},e}return s(r,[{key:"checkAlgorithmParams",value:function(e){if(e.label&&!(e.label instanceof ArrayBuffer||ArrayBuffer.isView(e.label)))throw new TypeError("label: Is not of type '(ArrayBuffer or ArrayBufferView)'")}}]),r}(qt),Xt=function(e){f(r,e);var t=w(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"checkGenerateKeyParams",value:function(e){this.checkRequiredProperty(e,"namedCurve"),this.checkNamedCurve(e.namedCurve)}},{key:"checkNamedCurve",value:function(e){var t,r=x(this.namedCurves);try{for(r.s();!(t=r.n()).done;){if(t.value.toLowerCase()===e.toLowerCase())return}}catch(e){r.e(e)}finally{r.f()}throw new Pt("namedCurve: Must be one of ".concat(this.namedCurves.join(", ")))}}]),r}(jt),Yt=function(e){f(r,e);var t=w(r);function r(){var e;return o(this,r),(e=t.apply(this,arguments)).name="ECDSA",e.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],e.usages={privateKey:["sign"],publicKey:["verify"]},e.namedCurves=["P-256","P-384","P-521","K-256"],e}return s(r,[{key:"checkAlgorithmParams",value:function(e){this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}]),r}(Xt),Qt=["secret","private","public"],er=function(){function e(){o(this,e)}return s(e,null,[{key:"create",value:function(e,t,r,n){var i=new this;return i.algorithm=e,i.type=t,i.extractable=r,i.usages=n,i}},{key:"isKeyType",value:function(e){return-1!==Qt.indexOf(e)}}]),e}(),tr=function(e){f(r,e);var t=w(r);function r(){var e;return o(this,r),(e=t.apply(this,arguments)).name="ECDH",e.usages={privateKey:["deriveBits","deriveKey"],publicKey:[]},e.namedCurves=["P-256","P-384","P-521","K-256"],e}return s(r,[{key:"checkAlgorithmParams",value:function(e){if(this.checkRequiredProperty(e,"public"),!(e.public instanceof er))throw new TypeError("public: Is not a CryptoKey");if("public"!==e.public.type)throw new Pt("public: Is not a public key");if(e.public.algorithm.name!==this.name)throw new Pt("public: Is not ".concat(this.name," key"))}}]),r}(Xt),rr=function(e){f(r,e);var t=w(r);function r(){var e;return o(this,r),(e=t.apply(this,arguments)).name="HMAC",e.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],e.usages=["sign","verify"],e}return s(r,[{key:"getDefaultLength",value:function(e){switch(e.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":return 512;default:throw new Error("Unknown algorithm name '".concat(e,"'"))}}},{key:"checkGenerateKeyParams",value:function(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),"length"in e){if("number"!=typeof e.length)throw new TypeError("length: Is not a Number");if(e.length<1)throw new RangeError("length: Number is out of range")}}},{key:"checkImportParams",value:function(e){this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}]),r}(jt),nr=function(e){f(r,e);var t=w(r);function r(){var e;return o(this,r),(e=t.apply(this,arguments)).name="PBKDF2",e.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],e.usages=["deriveBits","deriveKey"],e}return s(r,[{key:"checkAlgorithmParams",value:function(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),this.checkRequiredProperty(e,"salt"),!(e.salt instanceof ArrayBuffer||ArrayBuffer.isView(e.salt)))throw new TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(this.checkRequiredProperty(e,"iterations"),"number"!=typeof e.iterations)throw new TypeError("iterations: Is not a Number");if(e.iterations<1)throw new TypeError("iterations: Is less than 1")}},{key:"checkImportKey",value:function(e,t,n,i,a){if(b(v(r.prototype),"checkImportKey",this).call(this,e,t,n,i,a),i)throw new SyntaxError("extractable: Must be False")}}]),r}(jt),ir=function(){function e(){o(this,e),this.items={}}return s(e,[{key:"get",value:function(e){return this.items[e.toLowerCase()]||null}},{key:"set",value:function(e){this.items[e.name.toLowerCase()]=e}},{key:"removeAt",value:function(e){var t=this.get(e.toLowerCase());return t&&delete this.items[e],t}},{key:"has",value:function(e){return!!this.get(e)}},{key:"length",get:function(){return Object.keys(this.items).length}},{key:"algorithms",get:function(){var e=[];for(var t in this.items){var r=this.items[t];e.push(r.name)}return e.sort()}}]),e}(),ar=function(){function e(){o(this,e),this.providers=new ir}var t,r,i,u,c,l,f,v,p,y,g,m;return s(e,[{key:"digest",value:(m=a(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,u,s,c,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=l.length,r=new Array(t),n=0;n<t;n++)r[n]=l[n];return this.checkRequiredArguments(r,2,"digest"),i=r[0],a=r[1],o=this.prepareAlgorithm(i),u=E.toArrayBuffer(a),s=this.getProvider(o.name),e.next=8,s.digest(o,u);case 8:return c=e.sent,e.abrupt("return",c);case 10:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"generateKey",value:(g=a(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,u,s,c,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=l.length,r=new Array(t),n=0;n<t;n++)r[n]=l[n];return this.checkRequiredArguments(r,3,"generateKey"),i=r[0],a=r[1],o=r[2],u=this.prepareAlgorithm(i),s=this.getProvider(u.name),e.next=7,s.generateKey(h(h({},u),{},{name:s.name}),a,o);case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"sign",value:(y=a(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,u,s,c,l,f=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=f.length,r=new Array(t),n=0;n<t;n++)r[n]=f[n];return this.checkRequiredArguments(r,3,"sign"),i=r[0],a=r[1],o=r[2],this.checkCryptoKey(a),u=this.prepareAlgorithm(i),s=E.toArrayBuffer(o),c=this.getProvider(u.name),e.next=9,c.sign(h(h({},u),{},{name:c.name}),a,s);case 9:return l=e.sent,e.abrupt("return",l);case 11:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"verify",value:(p=a(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,u,s,c,l,f,v,p=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=p.length,r=new Array(t),n=0;n<t;n++)r[n]=p[n];return this.checkRequiredArguments(r,4,"verify"),i=r[0],a=r[1],o=r[2],u=r[3],this.checkCryptoKey(a),s=this.prepareAlgorithm(i),c=E.toArrayBuffer(u),l=E.toArrayBuffer(o),f=this.getProvider(s.name),e.next=10,f.verify(h(h({},s),{},{name:f.name}),a,l,c);case 10:return v=e.sent,e.abrupt("return",v);case 12:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"encrypt",value:(v=a(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,u,s,c,l,f=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=f.length,r=new Array(t),n=0;n<t;n++)r[n]=f[n];return this.checkRequiredArguments(r,3,"encrypt"),i=r[0],a=r[1],o=r[2],this.checkCryptoKey(a),u=this.prepareAlgorithm(i),s=E.toArrayBuffer(o),c=this.getProvider(u.name),e.next=9,c.encrypt(h(h({},u),{},{name:c.name}),a,s,{keyUsage:!0});case 9:return l=e.sent,e.abrupt("return",l);case 11:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"decrypt",value:(f=a(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,u,s,c,l,f=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=f.length,r=new Array(t),n=0;n<t;n++)r[n]=f[n];return this.checkRequiredArguments(r,3,"decrypt"),i=r[0],a=r[1],o=r[2],this.checkCryptoKey(a),u=this.prepareAlgorithm(i),s=E.toArrayBuffer(o),c=this.getProvider(u.name),e.next=9,c.decrypt(h(h({},u),{},{name:c.name}),a,s,{keyUsage:!0});case 9:return l=e.sent,e.abrupt("return",l);case 11:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"deriveBits",value:(l=a(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,u,s,c,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=l.length,r=new Array(t),n=0;n<t;n++)r[n]=l[n];return this.checkRequiredArguments(r,3,"deriveBits"),i=r[0],a=r[1],o=r[2],this.checkCryptoKey(a),u=this.prepareAlgorithm(i),s=this.getProvider(u.name),e.next=8,s.deriveBits(h(h({},u),{},{name:s.name}),a,o,{keyUsage:!0});case 8:return c=e.sent,e.abrupt("return",c);case 10:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"deriveKey",value:(c=a(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,u,s,c,l,f,v,p=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=p.length,r=new Array(t),n=0;n<t;n++)r[n]=p[n];return this.checkRequiredArguments(r,5,"deriveKey"),i=r[0],a=r[1],o=r[2],u=r[3],s=r[4],c=this.prepareAlgorithm(o),this.getProvider(c.name).checkDerivedKeyParams(c),l=this.prepareAlgorithm(i),(f=this.getProvider(l.name)).checkCryptoKey(a,"deriveKey"),e.next=11,f.deriveBits(h(h({},l),{},{name:f.name}),a,o.length,{keyUsage:!1});case 11:return v=e.sent,e.abrupt("return",this.importKey("raw",v,o,u,s));case 13:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"exportKey",value:(u=a(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,u,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=s.length,r=new Array(t),n=0;n<t;n++)r[n]=s[n];return this.checkRequiredArguments(r,2,"exportKey"),i=r[0],a=r[1],this.checkCryptoKey(a),o=this.getProvider(a.algorithm.name),e.next=7,o.exportKey(i,a);case 7:return u=e.sent,e.abrupt("return",u);case 9:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"importKey",value:(i=a(regeneratorRuntime.mark((function e(){var t,r,n,i,a,o,u,s,c,l,f,v=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=v.length,r=new Array(t),n=0;n<t;n++)r[n]=v[n];if(this.checkRequiredArguments(r,5,"importKey"),i=r[0],a=r[1],o=r[2],u=r[3],s=r[4],c=this.prepareAlgorithm(o),l=this.getProvider(c.name),-1===["pkcs8","spki","raw"].indexOf(i)){e.next=10;break}return f=E.toArrayBuffer(a),e.abrupt("return",l.importKey(i,f,h(h({},c),{},{name:l.name}),u,s));case 10:if(a.kty){e.next=12;break}throw new TypeError("keyData: Is not JSON");case 12:return e.abrupt("return",l.importKey(i,a,h(h({},c),{},{name:l.name}),u,s));case 13:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"wrapKey",value:(r=a(regeneratorRuntime.mark((function e(t,r,n,i){var a,o,u,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.exportKey(t,r);case 2:return a=e.sent,"jwk"===t&&(o=JSON.stringify(a),a=N.FromUtf8String(o)),u=this.prepareAlgorithm(i),s=E.toArrayBuffer(a),c=this.getProvider(u.name),e.abrupt("return",c.encrypt(h(h({},u),{},{name:c.name}),n,s,{keyUsage:!1}));case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,n,i){return r.apply(this,arguments)})},{key:"unwrapKey",value:(t=a(regeneratorRuntime.mark((function e(t,r,n,i,a,o,u){var s,c,l,f,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=this.prepareAlgorithm(i),c=E.toArrayBuffer(r),l=this.getProvider(s.name),e.next=5,l.decrypt(h(h({},s),{},{name:l.name}),n,c,{keyUsage:!1});case 5:if(f=e.sent,"jwk"!==t){e.next=16;break}e.prev=7,f=JSON.parse(N.ToUtf8String(f)),e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(7),(v=new TypeError("wrappedKey: Is not a JSON")).internal=e.t0,v;case 16:return e.abrupt("return",this.importKey(t,f,a,o,u));case 17:case"end":return e.stop()}}),e,this,[[7,11]])}))),function(e,r,n,i,a,o,u){return t.apply(this,arguments)})},{key:"checkRequiredArguments",value:function(e,t,r){if(e.length!==t)throw new TypeError("Failed to execute '".concat(r,"' on 'SubtleCrypto': ").concat(t," arguments required, but only ").concat(e.length," present"))}},{key:"prepareAlgorithm",value:function(t){if("string"==typeof t)return{name:t};if(e.isHashedAlgorithm(t)){var r=h({},t);return r.hash=this.prepareAlgorithm(t.hash),r}return h({},t)}},{key:"getProvider",value:function(e){var t=this.providers.get(e);if(!t)throw new Lt("Unrecognized name");return t}},{key:"checkCryptoKey",value:function(e){if(!(e instanceof er))throw new TypeError("Key is not of type 'CryptoKey'")}}],[{key:"isHashedAlgorithm",value:function(e){return!!(e&&"object"===n(e)&&"name"in e&&"hash"in e)}}]),e}(),or=function e(t){o(this,e),t&&(this.value=t)};K([lt({type:Je.ObjectIdentifier})],or.prototype,"value",void 0),or=K([ct({type:Ve.Choice})],or);var ur=function e(t){o(this,e),Object.assign(this,t)};K([lt({type:Je.ObjectIdentifier})],ur.prototype,"algorithm",void 0),K([lt({type:Je.Any,optional:!0})],ur.prototype,"parameters",void 0);var sr=function e(){o(this,e),this.version=0,this.privateKeyAlgorithm=new ur,this.privateKey=new ArrayBuffer(0)};K([lt({type:Je.Integer})],sr.prototype,"version",void 0),K([lt({type:ur})],sr.prototype,"privateKeyAlgorithm",void 0),K([lt({type:Je.OctetString})],sr.prototype,"privateKey",void 0),K([lt({type:Je.Any,optional:!0})],sr.prototype,"attributes",void 0);var cr=function e(){o(this,e),this.publicKeyAlgorithm=new ur,this.publicKey=new ArrayBuffer(0)};K([lt({type:ur})],cr.prototype,"publicKeyAlgorithm",void 0),K([lt({type:Je.BitString})],cr.prototype,"publicKey",void 0);var lr={fromJSON:function(e){return N.FromBase64Url(e)},toJSON:function(e){return N.ToBase64Url(new Uint8Array(e))}},hr={fromASN:function(e){var t=e.valueBlock.valueHex;return new Uint8Array(t)[0]?e.valueBlock.valueHex:e.valueBlock.valueHex.slice(1)},toASN:function(e){var t=new Uint8Array(e)[0]>127?Buffer.concat([Buffer.from([0]),Buffer.from(e)]):Buffer.from(e);return new de({valueHex:new Uint8Array(t).buffer})}},fr=function e(){o(this,e),this.version=0,this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),this.privateExponent=new ArrayBuffer(0),this.prime1=new ArrayBuffer(0),this.prime2=new ArrayBuffer(0),this.exponent1=new ArrayBuffer(0),this.exponent2=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0)};K([lt({type:Je.Integer,converter:He})],fr.prototype,"version",void 0),K([lt({type:Je.Integer,converter:hr}),Ut({name:"n",converter:lr})],fr.prototype,"modulus",void 0),K([lt({type:Je.Integer,converter:hr}),Ut({name:"e",converter:lr})],fr.prototype,"publicExponent",void 0),K([lt({type:Je.Integer,converter:hr}),Ut({name:"d",converter:lr})],fr.prototype,"privateExponent",void 0),K([lt({type:Je.Integer,converter:hr}),Ut({name:"p",converter:lr})],fr.prototype,"prime1",void 0),K([lt({type:Je.Integer,converter:hr}),Ut({name:"q",converter:lr})],fr.prototype,"prime2",void 0),K([lt({type:Je.Integer,converter:hr}),Ut({name:"dp",converter:lr})],fr.prototype,"exponent1",void 0),K([lt({type:Je.Integer,converter:hr}),Ut({name:"dq",converter:lr})],fr.prototype,"exponent2",void 0),K([lt({type:Je.Integer,converter:hr}),Ut({name:"qi",converter:lr})],fr.prototype,"coefficient",void 0),K([lt({type:Je.Any,optional:!0})],fr.prototype,"otherPrimeInfos",void 0);var vr=function e(){o(this,e),this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0)};K([lt({type:Je.Integer,converter:hr}),Ut({name:"n",converter:lr})],vr.prototype,"modulus",void 0),K([lt({type:Je.Integer,converter:hr}),Ut({name:"e",converter:lr})],vr.prototype,"publicExponent",void 0);var pr=function(){function e(t){o(this,e),this.value=new ArrayBuffer(0),t&&(this.value=t)}return s(e,[{key:"toJSON",value:function(){var e=new Uint8Array(this.value);if(4!==e[0])throw new Ht("Wrong ECPoint. Current version supports only Uncompressed (0x04) point");var t=(e=new Uint8Array(this.value.slice(1))).length/2;return{x:N.ToBase64Url(e.buffer.slice(0,0+t)),y:N.ToBase64Url(e.buffer.slice(0+t,0+t+t))}}},{key:"fromJSON",value:function(e){if(!("x"in e))throw new Error("x: Missing required property");if(!("y"in e))throw new Error("y: Missing required property");var t=N.FromBase64Url(e.x),r=N.FromBase64Url(e.y),n=Buffer.concat([new Uint8Array([4]),new Uint8Array(t),new Uint8Array(r)]);return this.value=new Uint8Array(n).buffer,this}}]),e}();K([lt({type:Je.OctetString})],pr.prototype,"value",void 0),pr=K([ct({type:Ve.Choice})],pr);var yr=function(){function e(){o(this,e),this.version=1,this.privateKey=new ArrayBuffer(0)}return s(e,[{key:"fromJSON",value:function(e){if(!("d"in e))throw new Error("d: Missing required property");if(this.privateKey=N.FromBase64Url(e.d),"x"in e){var t=new pr;t.fromJSON(e),this.publicKey=vt.toASN(t).valueBlock.valueHex}return this}},{key:"toJSON",value:function(){var e={};return e.d=N.ToBase64Url(this.privateKey),this.publicKey&&Object.assign(e,new pr(this.publicKey).toJSON()),e}}]),e}();K([lt({type:Je.Integer,converter:He})],yr.prototype,"version",void 0),K([lt({type:Je.OctetString})],yr.prototype,"privateKey",void 0),K([lt({context:0,type:Je.Any,optional:!0})],yr.prototype,"parameters",void 0),K([lt({context:1,type:Je.BitString,optional:!0})],yr.prototype,"publicKey",void 0);var gr={fromASN:function(e){var t=new Uint8Array(e.valueBlock.valueHex);return 0===t[0]?t.buffer.slice(1):t.buffer},toASN:function(e){var t=new Uint8Array(e);if(t[0]>127){var r=new Uint8Array(t.length+1);return r.set(t,1),new de({valueHex:r.buffer})}return new de({valueHex:e})}},mr=function(){function e(){o(this,e),this.r=new ArrayBuffer(0),this.s=new ArrayBuffer(0)}return s(e,[{key:"toWebCryptoSignature",value:function(e){e=this.getPointSize();var t=this.addPadding(e,E.toUint8Array(this.r)),r=this.addPadding(e,E.toUint8Array(this.s)),n=new Uint8Array(t.byteLength+r.byteLength);return n.set(t,0),n.set(r,t.length),n.buffer}},{key:"getPointSize",value:function(){switch(Math.max(this.r.byteLength,this.s.byteLength)){case 31:case 32:return 32;case 47:case 48:return 48;case 65:case 66:return 66}throw new Error("Unsupported EC point size")}},{key:"addPadding",value:function(e,t){var r=new Uint8Array(e),n=E.toUint8Array(t);return r.set(n,e-n.length),r}},{key:"removePadding",value:function(e){for(var t=E.toUint8Array(e),r=0;r<t.length;r++)if(t[r])return t.slice(r);return new Uint8Array(0)}}],[{key:"fromWebCryptoSignature",value:function(e){var t=E.toUint8Array(e),r=t.byteLength/2,n=new this;return n.r=n.removePadding(t.slice(0,r)),n.s=n.removePadding(t.slice(r,2*r)),n}}]),e}();K([lt({type:Je.Integer,converter:gr})],mr.prototype,"r",void 0),K([lt({type:Je.Integer,converter:gr})],mr.prototype,"s",void 0);var dr,kr=function(){var e=function e(t){o(this,e),t&&(this.value=t)};return K([lt({type:Je.ObjectIdentifier})],e.prototype,"value",void 0),e=K([ct({type:Ve.Choice})],e)}(),wr=function(){var e=function e(t){o(this,e),Object.assign(this,t)};return K([lt({type:Je.ObjectIdentifier})],e.prototype,"algorithm",void 0),K([lt({type:Je.Any,optional:!0})],e.prototype,"parameters",void 0),e}(),br=function(){var e=function e(){o(this,e),this.version=0,this.privateKeyAlgorithm=new wr,this.privateKey=new ArrayBuffer(0)};return K([lt({type:Je.Integer})],e.prototype,"version",void 0),K([lt({type:wr})],e.prototype,"privateKeyAlgorithm",void 0),K([lt({type:Je.OctetString})],e.prototype,"privateKey",void 0),K([lt({type:Je.Any,optional:!0})],e.prototype,"attributes",void 0),e}(),Ar=function(){var e=function e(){o(this,e),this.publicKeyAlgorithm=new wr,this.publicKey=new ArrayBuffer(0)};return K([lt({type:wr})],e.prototype,"publicKeyAlgorithm",void 0),K([lt({type:Je.BitString})],e.prototype,"publicKey",void 0),e}(),Br={fromJSON:function(e){return N.FromBase64Url(e)},toJSON:function(e){return N.ToBase64Url(new Uint8Array(e))}};function Sr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=new Uint8Array(t.map((function(e){return e.length})).reduce((function(e,t){return e+t}))),i=0;return t.forEach((function(e,t){for(var r=0;r<e.length;r++)n[i+r]=e[r];i+=e.length})),n}!function(e){e.Unknown="Unknown",e.IE="Internet Explorer",e.Safari="Safari",e.Edge="Edge",e.Chrome="Chrome",e.Firefox="Firefox Mozilla",e.Mobile="Mobile"}(dr||(dr={}));var xr={fromASN:function(e){var t=e.valueBlock.valueHex;return new Uint8Array(t)[0]?e.valueBlock.valueHex:e.valueBlock.valueHex.slice(1)},toASN:function(e){var t=new Uint8Array(e)[0]>127?Sr(new Uint8Array([0]),new Uint8Array(e)):new Uint8Array(e);return new de({valueHex:new Uint8Array(t).buffer})}},Cr=function(){var e=function e(){o(this,e),this.version=0,this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),this.privateExponent=new ArrayBuffer(0),this.prime1=new ArrayBuffer(0),this.prime2=new ArrayBuffer(0),this.exponent1=new ArrayBuffer(0),this.exponent2=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0)};return K([lt({type:Je.Integer,converter:He})],e.prototype,"version",void 0),K([lt({type:Je.Integer,converter:xr}),Ut({name:"n",converter:Br})],e.prototype,"modulus",void 0),K([lt({type:Je.Integer,converter:xr}),Ut({name:"e",converter:Br})],e.prototype,"publicExponent",void 0),K([lt({type:Je.Integer,converter:xr}),Ut({name:"d",converter:Br})],e.prototype,"privateExponent",void 0),K([lt({type:Je.Integer,converter:xr}),Ut({name:"p",converter:Br})],e.prototype,"prime1",void 0),K([lt({type:Je.Integer,converter:xr}),Ut({name:"q",converter:Br})],e.prototype,"prime2",void 0),K([lt({type:Je.Integer,converter:xr}),Ut({name:"dp",converter:Br})],e.prototype,"exponent1",void 0),K([lt({type:Je.Integer,converter:xr}),Ut({name:"dq",converter:Br})],e.prototype,"exponent2",void 0),K([lt({type:Je.Integer,converter:xr}),Ut({name:"qi",converter:Br})],e.prototype,"coefficient",void 0),K([lt({type:Je.Any,optional:!0})],e.prototype,"otherPrimeInfos",void 0),e}(),Rr=function(){var e=function e(){o(this,e),this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0)};return K([lt({type:Je.Integer,converter:xr}),Ut({name:"n",converter:Br})],e.prototype,"modulus",void 0),K([lt({type:Je.Integer,converter:xr}),Ut({name:"e",converter:Br})],e.prototype,"publicExponent",void 0),e}(),Nr=function(){var e=function(){function e(t){o(this,e),this.value=new ArrayBuffer(0),t&&(this.value=t)}return s(e,[{key:"toJSON",value:function(){var e=new Uint8Array(this.value);if(4!==e[0])throw new Ht("Wrong ECPoint. Current version supports only Uncompressed (0x04) point");var t=(e=new Uint8Array(this.value.slice(1))).length/2;return{x:N.ToBase64Url(e.buffer.slice(0,0+t)),y:N.ToBase64Url(e.buffer.slice(0+t,0+t+t))}}},{key:"fromJSON",value:function(e){if(!("x"in e))throw new Error("x: Missing required property");if(!("y"in e))throw new Error("y: Missing required property");var t=N.FromBase64Url(e.x),r=N.FromBase64Url(e.y),n=Sr(new Uint8Array([4]),new Uint8Array(t),new Uint8Array(r));return this.value=new Uint8Array(n).buffer,this}}]),e}();return K([lt({type:Je.OctetString})],e.prototype,"value",void 0),e=K([ct({type:Ve.Choice})],e)}(),Er=function(){var e=function(){function e(){o(this,e),this.version=1,this.privateKey=new ArrayBuffer(0)}return s(e,[{key:"fromJSON",value:function(e){if(!("d"in e))throw new Error("d: Missing required property");if(this.privateKey=N.FromBase64Url(e.d),"x"in e){var t=new Nr;t.fromJSON(e),this.publicKey=vt.toASN(t).valueBlock.valueHex}return this}},{key:"toJSON",value:function(){var e={};return e.d=N.ToBase64Url(this.privateKey),this.publicKey&&Object.assign(e,new Nr(this.publicKey).toJSON()),e}}]),e}();return K([lt({type:Je.Integer,converter:He})],e.prototype,"version",void 0),K([lt({type:Je.OctetString})],e.prototype,"privateKey",void 0),K([lt({context:0,type:Je.Any,optional:!0})],e.prototype,"parameters",void 0),K([lt({context:1,type:Je.BitString,optional:!0})],e.prototype,"publicKey",void 0),e}(),Kr={fromASN:function(e){var t=new Uint8Array(e.valueBlock.valueHex);return 0===t[0]?t.buffer.slice(1):t.buffer},toASN:function(e){var t=new Uint8Array(e);if(t[0]>127){var r=new Uint8Array(t.length+1);return r.set(t,1),new de({valueHex:r})}return new de({valueHex:e})}},Or=(function(){var e=function e(){o(this,e),this.r=new ArrayBuffer(0),this.s=new ArrayBuffer(0)};K([lt({type:Je.Integer,converter:Kr})],e.prototype,"r",void 0),K([lt({type:Je.Integer,converter:Kr})],e.prototype,"s",void 0)}(),function(){function e(){o(this,e)}return s(e,null,[{key:"log",value:function(){if(this.enabled){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.log.apply(console,t)}}},{key:"error",value:function(){if(this.enabled){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.error.apply(console,t)}}},{key:"info",value:function(){if(this.enabled){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.info.apply(console,t)}}},{key:"warn",value:function(){if(this.enabled){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.warn.apply(console,t)}}},{key:"trace",value:function(){if(this.enabled){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.trace.apply(console,t)}}},{key:"enabled",get:function(){return"undefined"!=typeof self&&self.PV_WEBCRYPTO_LINER_LOG}}]),e}()),Ur=function(e){f(r,e);var t=w(r);function r(e,n,i,a){var u;return o(this,r),(u=t.call(this)).extractable=n,u.type=i,u.usages=a,u.algorithm=Object.assign({},e),u}return r}(er);function Hr(e,t){return e.name.toUpperCase()===t.toUpperCase()}var Lr=function(e){f(r,e);var t=w(r);function r(e,n,i,a){var u;return o(this,r),(u=t.call(this,e,n,"secret",i)).raw=a,u}return s(r,[{key:"toJSON",value:function(){return{kty:"oct",alg:this.getJwkAlgorithm(),k:N.ToBase64Url(this.raw),ext:this.extractable,key_ops:this.usages}}},{key:"getJwkAlgorithm",value:function(){switch(this.algorithm.name.toUpperCase()){case"AES-CBC":return"A".concat(this.algorithm.length,"CBC");case"AES-CTR":return"A".concat(this.algorithm.length,"CTR");case"AES-GCM":return"A".concat(this.algorithm.length,"GCM");case"AES-ECB":return"A".concat(this.algorithm.length,"ECB");default:throw new Lt("Unsupported algorithm name")}}}]),r}(Ur),Ir=function(){var r=function(){function r(){o(this,r)}return s(r,null,[{key:"checkCryptoKey",value:function(e){if(!(e instanceof Lr))throw new TypeError("key: Is not AesCryptoKey")}},{key:"generateKey",value:function(t,r,n){return O(this,void 0,void 0,regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=e.nativeCrypto.getRandomValues(new Uint8Array(t.length/8)),i.abrupt("return",new Lr(t,r,n,a));case 2:case"end":return i.stop()}}),i)})))}},{key:"encrypt",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.cipher(e,t,E.toUint8Array(r),!0));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"decrypt",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.cipher(e,t,E.toUint8Array(r),!1));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"exportKey",value:function(e,t){return O(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=e,r.next="jwk"===r.t0?3:"raw"===r.t0?4:5;break;case 3:return r.abrupt("return",t.toJSON());case 4:return r.abrupt("return",t.raw.buffer);case 5:throw new Pt("format: Must be 'jwk' or 'raw'");case 6:case"end":return r.stop()}}),r)})))}},{key:"importKey",value:function(e,t,r,n,i){return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Dt(t)?N.FromBase64Url(t.k):E.toArrayBuffer(t),e.t0=a.byteLength<<3,e.next=128===e.t0||192===e.t0||256===e.t0?4:5;break;case 4:return e.abrupt("break",6);case 5:throw new Pt("keyData: Is wrong key length");case 6:return o=new Lr({name:r.name,length:a.byteLength<<3},n,i,new Uint8Array(a)),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})))}},{key:"cipher",value:function(e,n,i,a){return O(this,void 0,void 0,regeneratorRuntime.mark((function o(){var u,s,c,l,h,f;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(u=a?"encrypt":"decrypt",!Hr(e,r.AesCBC)){o.next=6;break}c=E.toUint8Array(e.iv),s=t.AES_CBC[u](i,n.raw,void 0,c),o.next=18;break;case 6:if(!Hr(e,r.AesGCM)){o.next=13;break}l=E.toUint8Array(e.iv),e.additionalData&&(h=E.toArrayBuffer(e.additionalData)),f=(e.tagLength||128)/8,s=t.AES_GCM[u](i,n.raw,l,h,f),o.next=18;break;case 13:if(!Hr(e,r.AesECB)){o.next=17;break}s=t.AES_ECB[u](i,n.raw,!0),o.next=18;break;case 17:throw new Pt("algorithm: Is not recognized");case 18:return o.abrupt("return",E.toArrayBuffer(s));case 19:case"end":return o.stop()}}),o)})))}}]),r}();return r.AesCBC="AES-CBC",r.AesECB="AES-ECB",r.AesGCM="AES-GCM",r}(),Pr=function(e){f(r,e);var t=w(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"onGenerateKey",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Ir.generateKey(e,t,r));case 1:case"end":return n.stop()}}),n)})))}},{key:"onEncrypt",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Ir.encrypt(e,t,r));case 1:case"end":return n.stop()}}),n)})))}},{key:"onDecrypt",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Ir.decrypt(e,t,r));case 1:case"end":return n.stop()}}),n)})))}},{key:"onExportKey",value:function(e,t){return O(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Ir.exportKey(e,t));case 1:case"end":return r.stop()}}),r)})))}},{key:"onImportKey",value:function(e,t,r,n,i){return O(this,void 0,void 0,regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Ir.importKey(e,t,r,n,i));case 1:case"end":return a.stop()}}),a)})))}},{key:"checkCryptoKey",value:function(e,t){b(v(r.prototype),"checkCryptoKey",this).call(this,e,t),Ir.checkCryptoKey(e)}}]),r}(Vt),Tr=function(e){f(r,e);var t=w(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"onGenerateKey",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Ir.generateKey(e,t,r));case 1:case"end":return n.stop()}}),n)})))}},{key:"onEncrypt",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Ir.encrypt(e,t,r));case 1:case"end":return n.stop()}}),n)})))}},{key:"onDecrypt",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Ir.decrypt(e,t,r));case 1:case"end":return n.stop()}}),n)})))}},{key:"onExportKey",value:function(e,t){return O(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Ir.exportKey(e,t));case 1:case"end":return r.stop()}}),r)})))}},{key:"onImportKey",value:function(e,t,r,n,i){return O(this,void 0,void 0,regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Ir.importKey(e,t,r,n,i));case 1:case"end":return a.stop()}}),a)})))}},{key:"checkCryptoKey",value:function(e,t){b(v(r.prototype),"checkCryptoKey",this).call(this,e,t),Ir.checkCryptoKey(e)}}]),r}(Mt),Dr=function(e){f(r,e);var t=w(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"onGenerateKey",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Ir.generateKey(e,t,r));case 1:case"end":return n.stop()}}),n)})))}},{key:"onEncrypt",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Ir.encrypt(e,t,r));case 1:case"end":return n.stop()}}),n)})))}},{key:"onDecrypt",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Ir.decrypt(e,t,r));case 1:case"end":return n.stop()}}),n)})))}},{key:"onExportKey",value:function(e,t){return O(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Ir.exportKey(e,t));case 1:case"end":return r.stop()}}),r)})))}},{key:"onImportKey",value:function(e,t,r,n,i){return O(this,void 0,void 0,regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Ir.importKey(e,t,r,n,i));case 1:case"end":return a.stop()}}),a)})))}},{key:"checkCryptoKey",value:function(e,t){b(v(r.prototype),"checkCryptoKey",this).call(this,e,t),Ir.checkCryptoKey(e)}}]),r}(Ft),jr=function(e){f(n,e);var r=w(n);function n(){return o(this,n),r.apply(this,arguments)}return s(n,[{key:"onEncrypt",value:function(e,r,n){return O(this,void 0,void 0,regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=new t.AES_CTR(r.raw,E.toUint8Array(e.counter)).encrypt(E.toUint8Array(n)),i.abrupt("return",E.toArrayBuffer(a));case 2:case"end":return i.stop()}}),i)})))}},{key:"onDecrypt",value:function(e,r,n){return O(this,void 0,void 0,regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=new t.AES_CTR(r.raw,E.toUint8Array(e.counter)).decrypt(E.toUint8Array(n)),i.abrupt("return",E.toArrayBuffer(a));case 2:case"end":return i.stop()}}),i)})))}},{key:"onGenerateKey",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Ir.generateKey(e,t,r));case 1:case"end":return n.stop()}}),n)})))}},{key:"onExportKey",value:function(e,t){return O(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Ir.exportKey(e,t));case 1:case"end":return r.stop()}}),r)})))}},{key:"onImportKey",value:function(e,t,r,n,i){return O(this,void 0,void 0,regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Ir.importKey(e,t,r,n,i));case 1:case"end":return a.stop()}}),a)})))}},{key:"checkCryptoKey",value:function(e,t){b(v(n.prototype),"checkCryptoKey",this).call(this,e,t),Ir.checkCryptoKey(e)}}]),n}(Jt),_r=function(e){f(r,e);var t=w(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"onEncrypt",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return e.stop()}}),e)})))}},{key:"onDecrypt",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return e.stop()}}),e)})))}},{key:"onGenerateKey",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return e.stop()}}),e)})))}},{key:"onExportKey",value:function(e,t){return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return e.stop()}}),e)})))}},{key:"onImportKey",value:function(e,t,r,n,i){return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return e.stop()}}),e)})))}},{key:"checkCryptoKey",value:function(e,t){b(v(r.prototype),"checkCryptoKey",this).call(this,e,t),Ir.checkCryptoKey(e)}}]),r}(zt),Vr=function(e){f(r,e);var t=w(r);function r(e,n,i,a,u){var s;return o(this,r),(s=t.call(this,e,n,i,a)).data=u,s}return r}(Ur),Jr=function(){var t=function(){function t(){o(this,t)}return s(t,null,[{key:"checkCryptoKey",value:function(e){if(!(e instanceof Vr))throw new TypeError("key: Is not RsaCryptoKey")}},{key:"generateKey",value:function(t,r,n){return O(this,void 0,void 0,regeneratorRuntime.mark((function i(){var a,o,u,s,c,l,h,f=this;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={name:"RSA-PSS",hash:"SHA-256",publicExponent:t.publicExponent,modulusLength:t.modulusLength},i.next=3,e.nativeSubtle.generateKey(a,!0,["sign","verify"]);case 3:return o=i.sent,u=new bi,i.next=7,u.subtle.exportKey("pkcs8",o.privateKey);case 7:return s=i.sent,i.next=10,u.subtle.importKey("pkcs8",s,t,r,n.filter((function(e){return f.privateUsages.includes(e)})));case 10:return c=i.sent,i.next=13,u.subtle.exportKey("spki",o.publicKey);case 13:return l=i.sent,i.next=16,u.subtle.importKey("spki",l,t,!0,n.filter((function(e){return f.publicUsages.includes(e)})));case 16:return h=i.sent,i.abrupt("return",{privateKey:c,publicKey:h});case 18:case"end":return i.stop()}}),i)})))}},{key:"exportKey",value:function(e,t){return O(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=e,r.next="pkcs8"===r.t0?3:"spki"===r.t0?4:"jwk"===r.t0?5:6;break;case 3:return r.abrupt("return",this.exportPkcs8Key(t));case 4:return r.abrupt("return",this.exportSpkiKey(t));case 5:return r.abrupt("return",this.exportJwkKey(t));case 6:throw new Pt("format: Must be 'jwk', 'pkcs8' or 'spki'");case 7:case"end":return r.stop()}}),r,this)})))}},{key:"importKey",value:function(e,t,r,n,i){return O(this,void 0,void 0,regeneratorRuntime.mark((function a(){var o,u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:a.t0=e,a.next="pkcs8"===a.t0?3:"spki"===a.t0?5:"jwk"===a.t0?7:9;break;case 3:return o=this.importPkcs8Key(t),a.abrupt("break",10);case 5:return o=this.importSpkiKey(t),a.abrupt("break",10);case 7:return o=this.importJwkKey(t),a.abrupt("break",10);case 9:throw new Pt("format: Must be 'jwk', 'pkcs8' or 'spki'");case 10:return u=new Vr(Object.assign({publicExponent:1===o[1][1]?o[1].slice(1):o[1].slice(3),modulusLength:o[0].byteLength<<3},r),n,2===o.length?"public":"private",i,o),a.abrupt("return",u);case 12:case"end":return a.stop()}}),a,this)})))}},{key:"randomNonZeroValues",value:function(t){return(t=e.nativeCrypto.getRandomValues(t)).map((function(t){for(;!t;)t=e.nativeCrypto.getRandomValues(new Uint8Array(1))[0];return t}))}},{key:"exportPkcs8Key",value:function(e){var t=new br;return t.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",t.privateKeyAlgorithm.parameters=null,t.privateKey=vt.serialize(this.exportAsmKey(e.data)),vt.serialize(t)}},{key:"importPkcs8Key",value:function(e){var t=ft.parse(e,br),r=ft.parse(t.privateKey,Cr);return this.importAsmKey(r)}},{key:"importSpkiKey",value:function(e){var t=ft.parse(e,Ar),r=ft.parse(t.publicKey,Rr);return this.importAsmKey(r)}},{key:"exportSpkiKey",value:function(e){var t=new Rr;t.modulus=e.data[0].buffer,t.publicExponent=1===e.data[1][1]?e.data[1].buffer.slice(1):e.data[1].buffer.slice(3);var r=new Ar;return r.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",r.publicKeyAlgorithm.parameters=null,r.publicKey=vt.serialize(t),vt.serialize(r)}},{key:"importJwkKey",value:function(e){var t;return t=e.d?Kt.fromJSON(e,{targetSchema:Cr}):Kt.fromJSON(e,{targetSchema:Rr}),this.importAsmKey(t)}},{key:"exportJwkKey",value:function(e){var t=this.exportAsmKey(e.data),r=Et.toJSON(t);return r.ext=!0,r.key_ops=e.usages,r.kty="RSA",r.alg=this.getJwkAlgorithm(e.algorithm),r}},{key:"getJwkAlgorithm",value:function(e){switch(e.name.toUpperCase()){case"RSA-OAEP":var t=/(\d+)$/.exec(e.hash.name)[1];return"RSA-OAEP".concat("1"!==t?"-".concat(t):"");case"RSASSA-PKCS1-V1_5":return"RS".concat(/(\d+)$/.exec(e.hash.name)[1]);case"RSA-PSS":return"PS".concat(/(\d+)$/.exec(e.hash.name)[1]);case"RSAES-PKCS1-V1_5":return"PS1";default:throw new Pt("algorithm: Is not recognized")}}},{key:"exportAsmKey",value:function(e){var t;if(e.length>2){var r=new Cr;r.privateExponent=e[2].buffer,r.prime1=e[3].buffer,r.prime2=e[4].buffer,r.exponent1=e[5].buffer,r.exponent2=e[6].buffer,r.coefficient=e[7].buffer,t=r}else t=new Rr;return t.modulus=e[0].buffer,t.publicExponent=1===e[1][1]?e[1].buffer.slice(1):e[1].buffer.slice(3),t}},{key:"importAsmKey",value:function(e){var t=new Uint8Array(4-e.publicExponent.byteLength),r=[new Uint8Array(e.modulus),Sr(t,new Uint8Array(e.publicExponent))];return e instanceof Cr&&(r.push(new Uint8Array(e.privateExponent)),r.push(new Uint8Array(e.prime1)),r.push(new Uint8Array(e.prime2)),r.push(new Uint8Array(e.exponent1)),r.push(new Uint8Array(e.exponent2)),r.push(new Uint8Array(e.coefficient))),r}}]),t}();return t.RsaSsa="RSASSA-PKCS1-v1_5",t.RsaPss="RSA-PSS",t.RsaOaep="RSA-OAEP",t.privateUsages=["sign","decrypt","unwrapKey"],t.publicUsages=["verify","encrypt","wrapKey"],t}(),Mr=function(){function e(){o(this,e)}return s(e,null,[{key:"getDigest",value:function(e){switch(e){case"SHA-1":return new t.Sha1;case"SHA-256":return new t.Sha256;case"SHA-512":return new t.Sha512;default:throw new Lt("keyAlgorithm.hash: Is not recognized")}}},{key:"digest",value:function(e,t){return O(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=this.getDigest(e.name),i=n.process(E.toUint8Array(t)).finish().result,r.abrupt("return",E.toArrayBuffer(i));case 3:case"end":return r.stop()}}),r,this)})))}}]),e}(),Fr=function(e){f(n,e);var r=w(n);function n(){return o(this,n),r.apply(this,arguments)}return s(n,[{key:"onGenerateKey",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Jr.generateKey(e,t,r));case 1:case"end":return n.stop()}}),n)})))}},{key:"onExportKey",value:function(e,t){return O(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Jr.exportKey(e,t));case 1:case"end":return r.stop()}}),r)})))}},{key:"onImportKey",value:function(e,t,r,n,i){return O(this,void 0,void 0,regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Jr.importKey(e,t,r,n,i));case 1:case"end":return a.stop()}}),a)})))}},{key:"onEncrypt",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.cipher(e,t,r));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"onDecrypt",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.cipher(e,t,r));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"checkCryptoKey",value:function(e,t){b(v(n.prototype),"checkCryptoKey",this).call(this,e,t),Jr.checkCryptoKey(e)}},{key:"cipher",value:function(e,r,n){var i,a=Mr.getDigest(r.algorithm.hash.name);e.label&&(i=E.toUint8Array(e.label));var o,u=new t.RSA_OAEP(r.data,a,i),s=E.toUint8Array(n);return o="public"===r.type?u.encrypt(s):u.decrypt(s),E.toArrayBuffer(o)}}]),n}($t),zr=function(e){f(n,e);var r=w(n);function n(){return o(this,n),r.apply(this,arguments)}return s(n,[{key:"onGenerateKey",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Jr.generateKey(e,t,r));case 1:case"end":return n.stop()}}),n)})))}},{key:"onExportKey",value:function(e,t){return O(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Jr.exportKey(e,t));case 1:case"end":return r.stop()}}),r)})))}},{key:"onImportKey",value:function(e,t,r,n,i){return O(this,void 0,void 0,regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Jr.importKey(e,t,r,n,i));case 1:case"end":return a.stop()}}),a)})))}},{key:"onSign",value:function(e,r,n){return O(this,void 0,void 0,regeneratorRuntime.mark((function i(){var a,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=new t.RSA_PSS(r.data,Mr.getDigest(r.algorithm.hash.name),e.saltLength),o=a.sign(E.toUint8Array(n)),i.abrupt("return",E.toArrayBuffer(o));case 3:case"end":return i.stop()}}),i)})))}},{key:"onVerify",value:function(e,r,n,i){return O(this,void 0,void 0,regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=new t.RSA_PSS(r.data,Mr.getDigest(r.algorithm.hash.name),e.saltLength),a.prev=1,o.verify(E.toUint8Array(n),E.toUint8Array(i)),a.next=8;break;case 5:return a.prev=5,a.t0=a.catch(1),a.abrupt("return",!1);case 8:return a.abrupt("return",!0);case 9:case"end":return a.stop()}}),a,null,[[1,5]])})))}},{key:"checkCryptoKey",value:function(e,t){b(v(n.prototype),"checkCryptoKey",this).call(this,e,t),Jr.checkCryptoKey(e)}}]),n}(Zt),Gr=function(e){f(n,e);var r=w(n);function n(){return o(this,n),r.apply(this,arguments)}return s(n,[{key:"onGenerateKey",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Jr.generateKey(e,t,r));case 1:case"end":return n.stop()}}),n)})))}},{key:"onExportKey",value:function(e,t){return O(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Jr.exportKey(e,t));case 1:case"end":return r.stop()}}),r)})))}},{key:"onImportKey",value:function(e,t,r,n,i){return O(this,void 0,void 0,regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Jr.importKey(e,t,r,n,i));case 1:case"end":return a.stop()}}),a)})))}},{key:"onSign",value:function(e,r,n){return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new t.RSA_PKCS1_v1_5(r.data,Mr.getDigest(r.algorithm.hash.name)),a=i.sign(E.toUint8Array(n)),e.abrupt("return",E.toArrayBuffer(a));case 3:case"end":return e.stop()}}),e)})))}},{key:"onVerify",value:function(e,r,n,i){return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new t.RSA_PKCS1_v1_5(r.data,Mr.getDigest(r.algorithm.hash.name)),e.prev=1,a.verify(E.toUint8Array(n),E.toUint8Array(i)),e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(1),e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,null,[[1,5]])})))}},{key:"checkCryptoKey",value:function(e,t){b(v(n.prototype),"checkCryptoKey",this).call(this,e,t),Jr.checkCryptoKey(e)}}]),n}(Wt),qr=function(e){f(n,e);var r=w(n);function n(){var e;return o(this,n),(e=r.apply(this,arguments)).name="RSAES-PKCS1-v1_5",e.usages={publicKey:["encrypt","wrapKey"],privateKey:["decrypt","unwrapKey"]},e.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],e}return s(n,[{key:"onGenerateKey",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Jr.generateKey(e,t,r));case 1:case"end":return n.stop()}}),n)})))}},{key:"checkGenerateKeyParams",value:function(e){if(this.checkRequiredProperty(e,"publicExponent"),!(e.publicExponent&&e.publicExponent instanceof Uint8Array))throw new TypeError("publicExponent: Missing or not a Uint8Array");var t=N.ToBase64(e.publicExponent);if("Aw=="!==t&&"AQAB"!==t)throw new TypeError("publicExponent: Must be [3] or [1,0,1]");switch(this.checkRequiredProperty(e,"modulusLength"),e.modulusLength){case 1024:case 2048:case 4096:break;default:throw new TypeError("modulusLength: Must be 1024, 2048, or 4096")}}},{key:"onDecrypt",value:function(e,r,n){return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){var i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=new t.RSA(r.data).decrypt(new t.BigNumber(E.toUint8Array(n))).result,a=r.algorithm.modulusLength>>3,n.byteLength===a){e.next=4;break}throw new Ht("Decryption error. Encrypted message size doesn't match to key length");case 4:if(o=0,!i[o++]&&2===i[o++]){e.next=7;break}throw new Ht("Decryption error");case 7:if(0!==i[o++]){e.next=9;break}return e.abrupt("break",10);case 9:if(o<i.length){e.next=7;break}case 10:if(!(o<11)){e.next=12;break}throw new Ht("Decryption error. PS is less than 8 octets.");case 12:if(o!==i.length){e.next=14;break}throw new Ht("Decryption error. There is no octet with hexadecimal value 0x00 to separate PS from M");case 14:return e.abrupt("return",i.buffer.slice(o));case 15:case"end":return e.stop()}}),e)})))}},{key:"onEncrypt",value:function(e,r,n){return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){var i,a,o,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.algorithm.modulusLength>>3,!(n.byteLength>i-11)){e.next=3;break}throw new Ht("Message too long");case 3:return a=i-n.byteLength-3,o=Jr.randomNonZeroValues(new Uint8Array(a)),(u=new Uint8Array(i))[0]=0,u[1]=2,u.set(o,2),u[2+a]=0,u.set(new Uint8Array(n),3+a),s=new t.RSA(r.data).encrypt(new t.BigNumber(u)).result,e.abrupt("return",E.toArrayBuffer(s));case 13:case"end":return e.stop()}}),e)})))}},{key:"onExportKey",value:function(e,t){return O(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Jr.exportKey(e,t));case 1:case"end":return r.stop()}}),r)})))}},{key:"onImportKey",value:function(e,t,r,n,i){return O(this,void 0,void 0,regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Jr.importKey(e,t,Object.assign(Object.assign({},r),{name:this.name}),n,i);case 2:return o=a.sent,a.abrupt("return",o);case 4:case"end":return a.stop()}}),a,this)})))}},{key:"checkCryptoKey",value:function(e,t){b(v(n.prototype),"checkCryptoKey",this).call(this,e,t),Jr.checkCryptoKey(e)}},{key:"prepareSignData",value:function(e,t){return O(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=new bi,r.abrupt("return",n.subtle.digest(e.hash,t));case 2:case"end":return r.stop()}}),r)})))}}]),n}(jt),Wr={"1.2.840.10045.3.1.7":"P-256","P-256":"1.2.840.10045.3.1.7","1.3.132.0.34":"P-384","P-384":"1.3.132.0.34","1.3.132.0.35":"P-521","P-521":"1.3.132.0.35","1.3.132.0.10":"K-256","K-256":"1.3.132.0.10"};function Zr(e){var t=Wr[e];if(!t)throw new Pt("Cannot convert WebCrypto named curve '".concat(e,"' to OID"));return t}var $r=function(e){f(r,e);var t=w(r);function r(e,n,i,a,u){var s;return o(this,r),(s=t.call(this,e,n,i,a)).data=u,s}return r}(Ur),Xr=function(){var e=function(){function e(){o(this,e)}return s(e,null,[{key:"checkLib",value:function(){if(void 0===r)throw new Pt("Cannot implement EC mechanism. Add 'https://peculiarventures.github.io/pv-webcrypto-tests/src/elliptic.js' script to your project")}},{key:"generateKey",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,a,o,u,s=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.checkLib(),i=this.initEcKey(e.namedCurve),(a=i.genKeyPair()).getPublic(),o=new $r(Object.assign({},e),t,"private",r.filter((function(e){return~s.privateUsages.indexOf(e)})),a),u=new $r(Object.assign({},e),!0,"public",r.filter((function(e){return~s.publicUsages.indexOf(e)})),a),n.abrupt("return",{privateKey:o,publicKey:u});case 7:case"end":return n.stop()}}),n,this)})))}},{key:"checkCryptoKey",value:function(e){if(!(e instanceof $r))throw new TypeError("key: Is not EcCryptoKey")}},{key:"concat",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=new Uint8Array(t.map((function(e){return e.length})).reduce((function(e,t){return e+t}))),i=0;return t.forEach((function(e,t){for(var r=0;r<e.length;r++)n[i+r]=e[r];i+=e.length})),n}},{key:"exportKey",value:function(e,t){return O(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:this.checkLib(),r.t0=e,r.next="pkcs8"===r.t0?4:"spki"===r.t0?5:"jwk"===r.t0?6:"raw"===r.t0?7:8;break;case 4:return r.abrupt("return",this.exportPkcs8Key(t));case 5:return r.abrupt("return",this.exportSpkiKey(t));case 6:return r.abrupt("return",this.exportJwkKey(t));case 7:return r.abrupt("return",new Uint8Array(t.data.getPublic("der")).buffer);case 8:throw new Pt("format: Must be 'jwk', 'raw, 'pkcs8' or 'spki'");case 9:case"end":return r.stop()}}),r,this)})))}},{key:"importKey",value:function(e,t,r,n,i){return O(this,void 0,void 0,regeneratorRuntime.mark((function a(){var o,u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:this.checkLib(),a.t0=e,a.next="pkcs8"===a.t0?4:"spki"===a.t0?6:"raw"===a.t0?8:"jwk"===a.t0?10:12;break;case 4:return o=this.importPkcs8Key(t,r.namedCurve),a.abrupt("break",13);case 6:return o=this.importSpkiKey(t,r.namedCurve),a.abrupt("break",13);case 8:return o=this.importEcKey(new Nr(t),r.namedCurve),a.abrupt("break",13);case 10:return o=this.importJwkKey(t),a.abrupt("break",13);case 12:throw new Pt("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'");case 13:return u=new $r(Object.assign({},r),n,o.priv?"private":"public",i,o),a.abrupt("return",u);case 15:case"end":return a.stop()}}),a,this)})))}},{key:"getNamedCurve",value:function(e){var t=e.toUpperCase(),r="";if(["P-256","P-384","P-521"].indexOf(t)>-1)r=t.replace("-","").toLowerCase();else{if("K-256"!==t)throw new Pt("Unsupported named curve '".concat(e,"'"));r="secp256k1"}return r}},{key:"initEcKey",value:function(e){return r.ec(this.getNamedCurve(e))}},{key:"exportPkcs8Key",value:function(e){var t=new br;return t.privateKeyAlgorithm.algorithm=this.ASN_ALGORITHM,t.privateKeyAlgorithm.parameters=vt.serialize(new kr(Zr(e.algorithm.namedCurve))),t.privateKey=vt.serialize(this.exportEcKey(e)),vt.serialize(t)}},{key:"importPkcs8Key",value:function(e,t){var r=ft.parse(e,br),n=ft.parse(r.privateKey,Er);return this.importEcKey(n,t)}},{key:"importSpkiKey",value:function(e,t){var r=ft.parse(e,Ar),n=new Nr(r.publicKey);return this.importEcKey(n,t)}},{key:"exportSpkiKey",value:function(e){var t=new Nr(new Uint8Array(e.data.getPublic("der")).buffer),r=new Ar;return r.publicKeyAlgorithm.algorithm=this.ASN_ALGORITHM,r.publicKeyAlgorithm.parameters=vt.serialize(new kr(Zr(e.algorithm.namedCurve))),r.publicKey=t.value,vt.serialize(r)}},{key:"importJwkKey",value:function(e){var t;return t=e.d?Kt.fromJSON(e,{targetSchema:Er}):Kt.fromJSON(e,{targetSchema:Nr}),this.importEcKey(t,e.crv)}},{key:"exportJwkKey",value:function(e){var t=this.exportEcKey(e),r=Et.toJSON(t);return r.ext=!0,r.key_ops=e.usages,r.crv=e.algorithm.namedCurve,r.kty="EC",r}},{key:"exportEcKey",value:function(e){if("private"===e.type){var t=new Er,r=new Uint8Array(e.data.getPrivate("der").toArray()),n=new Uint8Array(this.getPointSize(e.algorithm.namedCurve)-r.length);return t.privateKey=Sr(n,r),t.publicKey=new Uint8Array(e.data.getPublic("der")),t}if(e.data.pub)return new Nr(new Uint8Array(e.data.getPublic("der")).buffer);throw new Error("Cannot get private or public key")}},{key:"importEcKey",value:function(e,t){var r=this.initEcKey(t);return e instanceof Nr?r.keyFromPublic(new Uint8Array(e.value)):r.keyFromPrivate(new Uint8Array(e.privateKey))}},{key:"getPointSize",value:function(e){switch(e){case"P-256":case"K-256":return 32;case"P-384":return 48;case"P-521":return 66}throw new Error("namedCurve: Is not recognized")}}]),e}();return e.privateUsages=["sign","deriveKey","deriveBits"],e.publicUsages=["verify"],e.ASN_ALGORITHM="1.2.840.10045.2.1",e}(),Yr=function(e){f(r,e);var t=w(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"onGenerateKey",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Xr.generateKey(e,t,r));case 1:case"end":return n.stop()}}),n)})))}},{key:"onExportKey",value:function(e,t){return O(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Xr.exportKey(e,t));case 1:case"end":return r.stop()}}),r)})))}},{key:"onImportKey",value:function(e,t,r,n,i){return O(this,void 0,void 0,regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Xr.importKey(e,t,r,n,i));case 1:case"end":return a.stop()}}),a)})))}},{key:"onDeriveBits",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,a,o,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Xr.checkLib(),i=t.data.derive(e.public.data.getPublic()),a=new Uint8Array(i.toArray()),o=(o=a.length)>32?o>48?66:48:32,a.length<o&&(a=Xr.concat(new Uint8Array(o-a.length),a)),u=a.slice(0,r/8).buffer,n.abrupt("return",u);case 8:case"end":return n.stop()}}),n)})))}},{key:"checkCryptoKey",value:function(e,t){b(v(r.prototype),"checkCryptoKey",this).call(this,e,t),Xr.checkCryptoKey(e)}}]),r}(tr);function Qr(e){for(var t=new Uint8Array(e),r=[],n=0;n<t.length;n++)r.push(t[n]);return r}function en(e,t){e.length%2&&(e="0"+e);for(var r=new Uint8Array(e.length/2),n=0;n<e.length;n++){var i=e.slice(n,1+ ++n);r[(n-1)/2]=parseInt(i,16)}if(t){var a=r.length;a=a>32?a>48?66:48:32,r.length<a&&(r=Xr.concat(new Uint8Array(a-r.length),r))}return r}function tn(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n].toString(16);r+=i.length%2?"0"+i:i}if(t){var a=e.length;a=a>32?a>48?66:48:32,r.length/2<a&&(r=new Array(2*a-r.length+1).join("0")+r)}return r}var rn=function(e){f(r,e);var t=w(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"onGenerateKey",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Xr.generateKey(e,t,r));case 1:case"end":return n.stop()}}),n)})))}},{key:"onExportKey",value:function(e,t){return O(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Xr.exportKey(e,t));case 1:case"end":return r.stop()}}),r)})))}},{key:"onImportKey",value:function(e,t,r,n,i){return O(this,void 0,void 0,regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Xr.importKey(e,t,r,n,i));case 1:case"end":return a.stop()}}),a)})))}},{key:"onSign",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,a,o,u,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Xr.checkLib(),i=new bi,n.next=4,i.subtle.digest(e.hash,r);case 4:return o=n.sent,a=Qr(o),n.next=8,t.data.sign(a);case 8:return u=n.sent,s=tn(u.r.toArray(),!0)+tn(u.s.toArray(),!0),n.abrupt("return",en(s).buffer);case 11:case"end":return n.stop()}}),n)})))}},{key:"onVerify",value:function(e,t,r,n){return O(this,void 0,void 0,regeneratorRuntime.mark((function i(){var a,o,u,s;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return Xr.checkLib(),a=new bi,o={r:new Uint8Array(r.slice(0,r.byteLength/2)),s:new Uint8Array(r.slice(r.byteLength/2))},i.next=5,a.subtle.digest(e.hash,n);case 5:return u=i.sent,s=Qr(u),i.abrupt("return",t.data.verify(s,o));case 8:case"end":return i.stop()}}),i)})))}},{key:"checkCryptoKey",value:function(e,t){b(v(r.prototype),"checkCryptoKey",this).call(this,e,t),Xr.checkCryptoKey(e)}}]),r}(Yt),nn=function(e){f(r,e);var t=w(r);function r(){var e;return o(this,r),(e=t.apply(this,arguments)).name="SHA-1",e.usages=[],e}return s(r,[{key:"onDigest",value:function(e,t){return O(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Mr.digest(e,t));case 1:case"end":return r.stop()}}),r)})))}}]),r}(jt),an=function(e){f(r,e);var t=w(r);function r(){var e;return o(this,r),(e=t.apply(this,arguments)).name="SHA-256",e}return r}(nn),on=function(e){f(r,e);var t=w(r);function r(){var e;return o(this,r),(e=t.apply(this,arguments)).name="SHA-512",e}return r}(nn),un=function(e){f(r,e);var t=w(r);function r(e,n,i,a){var u;return o(this,r),(u=t.call(this,e,n,"secret",i)).raw=a,u}return r}(Ur),sn=function(e){f(n,e);var r=w(n);function n(){return o(this,n),r.apply(this,arguments)}return s(n,[{key:"onImportKey",value:function(e,t,r,n,i){return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new un(r,n,i,E.toUint8Array(t)));case 1:case"end":return e.stop()}}),e)})))}},{key:"onDeriveBits",value:function(e,r,n){return O(this,void 0,void 0,regeneratorRuntime.mark((function i(){var a,o,u;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:o=E.toUint8Array(e.salt),u=r.raw,i.t0=e.hash.name.toUpperCase(),i.next="SHA-1"===i.t0?5:"SHA-256"===i.t0?7:"SHA-512"===i.t0?9:11;break;case 5:return a=t.Pbkdf2HmacSha1(u,o,e.iterations,n>>3),i.abrupt("break",12);case 7:return a=t.Pbkdf2HmacSha256(u,o,e.iterations,n>>3),i.abrupt("break",12);case 9:return a=t.Pbkdf2HmacSha512(u,o,e.iterations,n>>3),i.abrupt("break",12);case 11:throw new Pt("algorithm.hash: '".concat(e.hash.name,"' hash algorithm is not supported"));case 12:return i.abrupt("return",E.toArrayBuffer(a));case 13:case"end":return i.stop()}}),i)})))}},{key:"checkCryptoKey",value:function(e,t){if(b(v(n.prototype),"checkCryptoKey",this).call(this,e,t),!(e instanceof un))throw new TypeError("key: Is not PbkdfCryptoKey")}}]),n}(nr),cn=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24],ln=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11],hn=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7],fn={readUInt32BE:function(e,t){return(e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])>>>0},writeUInt32BE:function(e,t,r){e[0+r]=t>>>24,e[1+r]=t>>>16&255,e[2+r]=t>>>8&255,e[3+r]=255&t},ip:function(e,t,r,n){for(var i=0,a=0,o=6;o>=0;o-=2){for(var u=0;u<=24;u+=8)i<<=1,i|=t>>>u+o&1;for(u=0;u<=24;u+=8)i<<=1,i|=e>>>u+o&1}for(o=6;o>=0;o-=2){for(u=1;u<=25;u+=8)a<<=1,a|=t>>>u+o&1;for(u=1;u<=25;u+=8)a<<=1,a|=e>>>u+o&1}r[n+0]=i>>>0,r[n+1]=a>>>0},rip:function(e,t,r,n){for(var i=0,a=0,o=0;o<4;o++)for(var u=24;u>=0;u-=8)i<<=1,i|=t>>>u+o&1,i<<=1,i|=e>>>u+o&1;for(o=4;o<8;o++)for(u=24;u>=0;u-=8)a<<=1,a|=t>>>u+o&1,a<<=1,a|=e>>>u+o&1;r[n+0]=i>>>0,r[n+1]=a>>>0},pc1:function(e,t,r,n){for(var i=0,a=0,o=7;o>=5;o--){for(var u=0;u<=24;u+=8)i<<=1,i|=t>>u+o&1;for(u=0;u<=24;u+=8)i<<=1,i|=e>>u+o&1}for(u=0;u<=24;u+=8)i<<=1,i|=t>>u+o&1;for(o=1;o<=3;o++){for(u=0;u<=24;u+=8)a<<=1,a|=t>>u+o&1;for(u=0;u<=24;u+=8)a<<=1,a|=e>>u+o&1}for(u=0;u<=24;u+=8)a<<=1,a|=e>>u+o&1;r[n+0]=i>>>0,r[n+1]=a>>>0},r28shl:function(e,t){return e<<t&268435455|e>>>28-t},pc2:function(e,t,r,n){for(var i=0,a=0,o=cn.length>>>1,u=0;u<o;u++)i<<=1,i|=e>>>cn[u]&1;for(u=o;u<cn.length;u++)a<<=1,a|=t>>>cn[u]&1;r[n+0]=i>>>0,r[n+1]=a>>>0},expand:function(e,t,r){var n=0,i=0;n=(1&e)<<5|e>>>27;for(var a=23;a>=15;a-=4)n<<=6,n|=e>>>a&63;for(a=11;a>=3;a-=4)i|=e>>>a&63,i<<=6;i|=(31&e)<<1|e>>>31,t[r+0]=n>>>0,t[r+1]=i>>>0},substitute:function(e,t){for(var r=0,n=0;n<4;n++){r<<=4,r|=ln[64*n+(e>>>18-6*n&63)]}for(n=0;n<4;n++){r<<=4,r|=ln[256+64*n+(t>>>18-6*n&63)]}return r>>>0},permute:function(e){for(var t=0,r=0;r<hn.length;r++)t<<=1,t|=e>>>hn[r]&1;return t>>>0},padSplit:function(e,t,r){for(var n=e.toString(2);n.length<t;)n="0"+n;for(var i=[],a=0;a<t;a+=r)i.push(n.slice(a,a+r));return i.join(" ")}},vn=pn;function pn(e,t){if(!e)throw new Error(t||"Assertion failed")}function yn(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}pn.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var gn=yn;yn.prototype._init=function(){},yn.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},yn.prototype._buffer=function(e,t){for(var r=Math.min(this.buffer.length-this.bufferOff,e.length-t),n=0;n<r;n++)this.buffer[this.bufferOff+n]=e[t+n];return this.bufferOff+=r,r},yn.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},yn.prototype._updateEncrypt=function(e){var t=0,r=0,n=(this.bufferOff+e.length)/this.blockSize|0,i=new Array(n*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(r+=this._flushBuffer(i,r)));for(var a=e.length-(e.length-t)%this.blockSize;t<a;t+=this.blockSize)this._update(e,t,i,r),r+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return i},yn.prototype._updateDecrypt=function(e){for(var t=0,r=0,n=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,i=new Array(n*this.blockSize);n>0;n--)t+=this._buffer(e,t),r+=this._flushBuffer(i,r);return t+=this._buffer(e,t),i},yn.prototype.final=function(e){var t,r;return e&&(t=this.update(e)),r="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(r):r},yn.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},yn.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e},yn.prototype._unpad=function(e){return e},yn.prototype._finalDecrypt=function(){vn.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)};var mn="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},dn=/%[sdj%]/g;function kn(e){if(!Un(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(An(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,a=String(e).replace(dn,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),o=n[r];r<i;o=n[++r])Kn(o)||!In(o)?a+=" "+o:a+=" "+An(o);return a}var wn,bn={};function An(e,t){var r={seen:[],stylize:Sn};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),En(t)?r.showHidden=t:t&&Mn(r,t),Hn(r.showHidden)&&(r.showHidden=!1),Hn(r.depth)&&(r.depth=2),Hn(r.colors)&&(r.colors=!1),Hn(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=Bn),xn(r,e,r.depth)}function Bn(e,t){var r=An.styles[t];return r?"["+An.colors[r][0]+"m"+e+"["+An.colors[r][1]+"m":e}function Sn(e,t){return e}function xn(e,t,r){if(e.customInspect&&t&&Dn(t.inspect)&&t.inspect!==An&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return Un(n)||(n=xn(e,n,r)),n}var i=function(e,t){if(Hn(t))return e.stylize("undefined","undefined");if(Un(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(On(t))return e.stylize(""+t,"number");if(En(t))return e.stylize(""+t,"boolean");if(Kn(t))return e.stylize("null","null")}(e,t);if(i)return i;var a=Object.keys(t),o=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),Tn(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return Cn(t);if(0===a.length){if(Dn(t)){var u=t.name?": "+t.name:"";return e.stylize("[Function"+u+"]","special")}if(Ln(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(Pn(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Tn(t))return Cn(t)}var s,c="",l=!1,h=["{","}"];(Nn(t)&&(l=!0,h=["[","]"]),Dn(t))&&(c=" [Function"+(t.name?": "+t.name:"")+"]");return Ln(t)&&(c=" "+RegExp.prototype.toString.call(t)),Pn(t)&&(c=" "+Date.prototype.toUTCString.call(t)),Tn(t)&&(c=" "+Cn(t)),0!==a.length||l&&0!=t.length?r<0?Ln(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),s=l?function(e,t,r,n,i){for(var a=[],o=0,u=t.length;o<u;++o)Fn(t,String(o))?a.push(Rn(e,t,r,n,String(o),!0)):a.push("");return i.forEach((function(i){i.match(/^\d+$/)||a.push(Rn(e,t,r,n,i,!0))})),a}(e,t,r,o,a):a.map((function(n){return Rn(e,t,r,o,n,l)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(s,c,h)):h[0]+c+h[1]}function Cn(e){return"["+Error.prototype.toString.call(e)+"]"}function Rn(e,t,r,n,i,a){var o,u,s;if((s=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?u=s.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):s.set&&(u=e.stylize("[Setter]","special")),Fn(n,i)||(o="["+i+"]"),u||(e.seen.indexOf(s.value)<0?(u=Kn(r)?xn(e,s.value,null):xn(e,s.value,r-1)).indexOf("\n")>-1&&(u=a?u.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+u.split("\n").map((function(e){return"   "+e})).join("\n")):u=e.stylize("[Circular]","special")),Hn(o)){if(a&&i.match(/^\d+$/))return u;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+u}function Nn(e){return Array.isArray(e)}function En(e){return"boolean"==typeof e}function Kn(e){return null===e}function On(e){return"number"==typeof e}function Un(e){return"string"==typeof e}function Hn(e){return void 0===e}function Ln(e){return In(e)&&"[object RegExp]"===jn(e)}function In(e){return"object"===n(e)&&null!==e}function Pn(e){return In(e)&&"[object Date]"===jn(e)}function Tn(e){return In(e)&&("[object Error]"===jn(e)||e instanceof Error)}function Dn(e){return"function"==typeof e}function jn(e){return Object.prototype.toString.call(e)}function _n(e){return e<10?"0"+e.toString(10):e.toString(10)}An.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},An.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var Vn=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Jn(){var e=new Date,t=[_n(e.getHours()),_n(e.getMinutes()),_n(e.getSeconds())].join(":");return[e.getDate(),Vn[e.getMonth()],t].join(" ")}function Mn(e,t){if(!t||!In(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function Fn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var zn={inherits:mn,_extend:Mn,log:function(){console.log("%s - %s",Jn(),kn.apply(null,arguments))},isBuffer:function(e){return Buffer.isBuffer(e)},isPrimitive:function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===n(e)||void 0===e},isFunction:Dn,isError:Tn,isDate:Pn,isObject:In,isRegExp:Ln,isUndefined:Hn,isSymbol:function(e){return"symbol"===n(e)},isString:Un,isNumber:On,isNullOrUndefined:function(e){return null==e},isNull:Kn,isBoolean:En,isArray:Nn,inspect:An,deprecate:function e(t,r){if(Hn(global.process))return function(){return e(t,r).apply(this,arguments)};var n=!1;return function(){return n||(console.error(r),n=!0),t.apply(this,arguments)}},format:kn,debuglog:function(e){if(Hn(wn)&&(wn=""),e=e.toUpperCase(),!bn[e])if(new RegExp("\\b"+e+"\\b","i").test(wn)){bn[e]=function(){var t=kn.apply(null,arguments);console.error("%s %d: %s",e,0,t)}}else bn[e]=function(){};return bn[e]}},Gn=U((function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}})),qn=U((function(e){try{var t=zn;if("function"!=typeof t.inherits)throw"";e.exports=t.inherits}catch(t){e.exports=Gn}}));function Wn(){this.tmp=new Array(2),this.keys=null}function Zn(e){gn.call(this,e);var t=new Wn;this._desState=t,this.deriveKeys(t,e.key)}qn(Zn,gn);var $n=Zn;Zn.create=function(e){return new Zn(e)};var Xn=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];Zn.prototype.deriveKeys=function(e,t){e.keys=new Array(32),vn.equal(t.length,this.blockSize,"Invalid key length");var r=fn.readUInt32BE(t,0),n=fn.readUInt32BE(t,4);fn.pc1(r,n,e.tmp,0),r=e.tmp[0],n=e.tmp[1];for(var i=0;i<e.keys.length;i+=2){var a=Xn[i>>>1];r=fn.r28shl(r,a),n=fn.r28shl(n,a),fn.pc2(r,n,e.keys,i)}},Zn.prototype._update=function(e,t,r,n){var i=this._desState,a=fn.readUInt32BE(e,t),o=fn.readUInt32BE(e,t+4);fn.ip(a,o,i.tmp,0),a=i.tmp[0],o=i.tmp[1],"encrypt"===this.type?this._encrypt(i,a,o,i.tmp,0):this._decrypt(i,a,o,i.tmp,0),a=i.tmp[0],o=i.tmp[1],fn.writeUInt32BE(r,a,n),fn.writeUInt32BE(r,o,n+4)},Zn.prototype._pad=function(e,t){for(var r=e.length-t,n=t;n<e.length;n++)e[n]=r;return!0},Zn.prototype._unpad=function(e){for(var t=e[e.length-1],r=e.length-t;r<e.length;r++)vn.equal(e[r],t);return e.slice(0,e.length-t)},Zn.prototype._encrypt=function(e,t,r,n,i){for(var a=t,o=r,u=0;u<e.keys.length;u+=2){var s=e.keys[u],c=e.keys[u+1];fn.expand(o,e.tmp,0),s^=e.tmp[0],c^=e.tmp[1];var l=fn.substitute(s,c),h=o;o=(a^fn.permute(l))>>>0,a=h}fn.rip(o,a,n,i)},Zn.prototype._decrypt=function(e,t,r,n,i){for(var a=r,o=t,u=e.keys.length-2;u>=0;u-=2){var s=e.keys[u],c=e.keys[u+1];fn.expand(a,e.tmp,0),s^=e.tmp[0],c^=e.tmp[1];var l=fn.substitute(s,c),h=a;a=(o^fn.permute(l))>>>0,o=h}fn.rip(a,o,n,i)};var Yn={};function Qn(e){vn.equal(e.length,8,"Invalid IV length"),this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}var ei=function(e){function t(t){e.call(this,t),this._cbcInit()}qn(t,e);for(var r=Object.keys(Yn),n=0;n<r.length;n++){var i=r[n];t.prototype[i]=Yn[i]}return t.create=function(e){return new t(e)},t};Yn._cbcInit=function(){var e=new Qn(this.options.iv);this._cbcState=e},Yn._update=function(e,t,r,n){var i=this._cbcState,a=this.constructor.super_.prototype,o=i.iv;if("encrypt"===this.type){for(var u=0;u<this.blockSize;u++)o[u]^=e[t+u];a._update.call(this,o,0,r,n);for(u=0;u<this.blockSize;u++)o[u]=r[n+u]}else{a._update.call(this,e,t,r,n);for(u=0;u<this.blockSize;u++)r[n+u]^=o[u];for(u=0;u<this.blockSize;u++)o[u]=e[t+u]}};var ti={instantiate:ei};function ri(e,t){vn.equal(t.length,24,"Invalid key length");var r=t.slice(0,8),n=t.slice(8,16),i=t.slice(16,24);this.ciphers="encrypt"===e?[$n.create({type:"encrypt",key:r}),$n.create({type:"decrypt",key:n}),$n.create({type:"encrypt",key:i})]:[$n.create({type:"decrypt",key:i}),$n.create({type:"encrypt",key:n}),$n.create({type:"decrypt",key:r})]}function ni(e){gn.call(this,e);var t=new ri(this.type,this.options.key);this._edeState=t}qn(ni,gn);var ii=ni;ni.create=function(e){return new ni(e)},ni.prototype._update=function(e,t,r,n){var i=this._edeState;i.ciphers[0]._update(e,t,r,n),i.ciphers[1]._update(r,n,r,n),i.ciphers[2]._update(r,n,r,n)},ni.prototype._pad=$n.prototype._pad,ni.prototype._unpad=$n.prototype._unpad;var ai,oi=fn,ui=gn,si=$n,ci=ti,li=ii,hi={utils:oi,Cipher:ui,DES:si,CBC:ci,EDE:li},fi=Object.freeze({__proto__:null,default:hi,__moduleExports:hi,utils:oi,Cipher:ui,DES:si,CBC:ci,EDE:li}),vi=function(e){f(r,e);var t=w(r);function r(e,n,i,a){var u;return o(this,r),(u=t.call(this,e,n,"secret",i)).raw=a,u}return s(r,[{key:"toJSON",value:function(){return{kty:"oct",alg:this.getJwkAlgorithm(),k:N.ToBase64Url(this.raw),ext:this.extractable,key_ops:this.usages}}},{key:"getJwkAlgorithm",value:function(){switch(this.algorithm.name.toUpperCase()){case"DES-CBC":return"DES-CBC";case"DES-EDE3-CBC":return"3DES-CBC";default:throw new Lt("Unsupported algorithm name")}}}]),r}(Ur),pi=function(){function t(){o(this,t)}return s(t,null,[{key:"checkLib",value:function(){if(void 0===fi)throw new Pt("Cannot implement DES mechanism. Add 'https://peculiarventures.github.io/pv-webcrypto-tests/src/des.js' script to your project")}},{key:"checkCryptoKey",value:function(e){if(!(e instanceof vi))throw new TypeError("key: Is not DesCryptoKey")}},{key:"generateKey",value:function(t,r,n){return O(this,void 0,void 0,regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return this.checkLib(),a=e.nativeCrypto.getRandomValues(new Uint8Array(t.length/8)),i.abrupt("return",new vi(t,r,n,a));case 3:case"end":return i.stop()}}),i,this)})))}},{key:"exportKey",value:function(e,t){return O(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:this.checkLib(),r.t0=e,r.next="jwk"===r.t0?4:"raw"===r.t0?5:6;break;case 4:return r.abrupt("return",t.toJSON());case 5:return r.abrupt("return",t.raw.buffer);case 6:throw new Pt("format: Must be 'jwk' or 'raw'");case 7:case"end":return r.stop()}}),r,this)})))}},{key:"importKey",value:function(e,t,r,n,i){return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.checkLib(),a=Dt(t)?N.FromBase64Url(t.k):E.toArrayBuffer(t),!("DES-CBC"===r.name&&8!==a.byteLength||"DES-EDE3-CBC"===r.name&&24!==a.byteLength)){e.next=4;break}throw new Pt("keyData: Is wrong key length");case 4:return o=new vi({name:r.name,length:a.byteLength<<3},n,i,new Uint8Array(a)),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"encrypt",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.cipher(e,t,r,!0));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"decrypt",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.cipher(e,t,r,!1));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"cipher",value:function(e,t,r,n){return O(this,void 0,void 0,regeneratorRuntime.mark((function i(){var a,o,u,s;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:this.checkLib(),a=n?"encrypt":"decrypt",u=E.toUint8Array(e.iv),i.t0=e.name.toUpperCase(),i.next="DES-CBC"===i.t0?6:"DES-EDE3-CBC"===i.t0?8:10;break;case 6:return o=ci.instantiate(si).create({key:t.raw,type:a,iv:u}),i.abrupt("break",11);case 8:return o=ci.instantiate(li).create({key:t.raw,type:a,iv:u}),i.abrupt("break",11);case 10:throw new Pt("algorithm: Is not recognized");case 11:return s=o.update(new Uint8Array(r)).concat(o.final()),i.abrupt("return",new Uint8Array(s).buffer);case 13:case"end":return i.stop()}}),i,this)})))}}]),t}(),yi=function(e){f(r,e);var t=w(r);function r(){var e;return o(this,r),(e=t.apply(this,arguments)).keySizeBits=64,e.ivSize=8,e.name="DES-CBC",e}return s(r,[{key:"onGenerateKey",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",pi.generateKey(e,t,r));case 1:case"end":return n.stop()}}),n)})))}},{key:"onExportKey",value:function(e,t){return O(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",pi.exportKey(e,t));case 1:case"end":return r.stop()}}),r)})))}},{key:"onImportKey",value:function(e,t,r,n,i){return O(this,void 0,void 0,regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",pi.importKey(e,t,r,n,i));case 1:case"end":return a.stop()}}),a)})))}},{key:"onEncrypt",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",pi.encrypt(e,t,r));case 1:case"end":return n.stop()}}),n)})))}},{key:"onDecrypt",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",pi.decrypt(e,t,r));case 1:case"end":return n.stop()}}),n)})))}},{key:"checkCryptoKey",value:function(e,t){b(v(r.prototype),"checkCryptoKey",this).call(this,e,t),pi.checkCryptoKey(e)}}]),r}(Gt),gi=function(e){f(r,e);var t=w(r);function r(){var e;return o(this,r),(e=t.apply(this,arguments)).keySizeBits=192,e.ivSize=8,e.name="DES-EDE3-CBC",e}return s(r,[{key:"onGenerateKey",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",pi.generateKey(e,t,r));case 1:case"end":return n.stop()}}),n)})))}},{key:"onExportKey",value:function(e,t){return O(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",pi.exportKey(e,t));case 1:case"end":return r.stop()}}),r)})))}},{key:"onImportKey",value:function(e,t,r,n,i){return O(this,void 0,void 0,regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",pi.importKey(e,t,r,n,i));case 1:case"end":return a.stop()}}),a)})))}},{key:"onEncrypt",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",pi.encrypt(e,t,r));case 1:case"end":return n.stop()}}),n)})))}},{key:"onDecrypt",value:function(e,t,r){return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",pi.decrypt(e,t,r));case 1:case"end":return n.stop()}}),n)})))}},{key:"checkCryptoKey",value:function(e,t){b(v(r.prototype),"checkCryptoKey",this).call(this,e,t),pi.checkCryptoKey(e)}}]),r}(Gt),mi=function(){var e=function(e){f(r,e);var t=w(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"HMAC"},i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Uint8Array(0);return o(this,r),(e=t.call(this,n,i,"secret",a)).kty="oct",e.data=u,e}return s(r,[{key:"alg",get:function(){var e=this.algorithm.hash.name.toUpperCase();return"HS".concat(e.replace("SHA-",""))},set:function(e){}}]),r}(Ur);return K([Ut({name:"ext",type:ut.Boolean,optional:!0})],e.prototype,"extractable",void 0),K([Ut({name:"key_ops",type:ut.String,repeated:!0,optional:!0})],e.prototype,"usages",void 0),K([Ut({name:"k",converter:Br})],e.prototype,"data",void 0),K([Ut({type:ut.String})],e.prototype,"kty",void 0),K([Ut({type:ut.String})],e.prototype,"alg",null),e}(),di=function(r){f(i,r);var n=w(i);function i(){return o(this,i),n.apply(this,arguments)}return s(i,[{key:"onGenerateKey",value:function(t,r,n){return O(this,void 0,void 0,regeneratorRuntime.mark((function i(){var a,o,u;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.length||this.getDefaultLength(t.hash.name),o=e.nativeCrypto.getRandomValues(new Uint8Array(a>>3)),u=new mi(t,r,n,o),i.abrupt("return",u);case 4:case"end":return i.stop()}}),i,this)})))}},{key:"onSign",value:function(e,r,n){return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r.algorithm.hash.name.toUpperCase(),e.next="SHA-1"===e.t0?3:"SHA-256"===e.t0?5:"SHA-512"===e.t0?7:9;break;case 3:return i=t.HmacSha1,e.abrupt("break",10);case 5:return i=t.HmacSha256,e.abrupt("break",10);case 7:return i=t.HmacSha512,e.abrupt("break",10);case 9:throw new Pt("key.algorithm.hash: Is not recognized");case 10:return a=new i(r.data).process(E.toUint8Array(n)).finish().result,e.abrupt("return",E.toArrayBuffer(a));case 12:case"end":return e.stop()}}),e)})))}},{key:"onVerify",value:function(e,t,r,n){return O(this,void 0,void 0,regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.onSign(e,t,n);case 2:return a=i.sent,i.abrupt("return",N.ToHex(a)===N.ToHex(r));case 4:case"end":return i.stop()}}),i,this)})))}},{key:"onImportKey",value:function(e,t,r,n,i){return O(this,void 0,void 0,regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:a.t0=e.toLowerCase(),a.next="jwk"===a.t0?3:"raw"===a.t0?5:9;break;case 3:return o=Kt.fromJSON(t,{targetSchema:mi}),a.abrupt("break",10);case 5:if(E.isBufferSource(t)){a.next=7;break}throw new TypeError("keyData: Is not ArrayBuffer or ArrayBufferView");case 7:return o=new mi(r,n,i,E.toUint8Array(t)),a.abrupt("break",10);case 9:throw new Pt("format: Must be 'jwk' or 'raw'");case 10:return o.algorithm={hash:{name:r.hash.name},name:this.name,length:o.data.length<<3},o.extractable=n,o.usages=i,a.abrupt("return",o);case 14:case"end":return a.stop()}}),a,this)})))}},{key:"onExportKey",value:function(e,t){return O(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=e.toLowerCase(),r.next="jwk"===r.t0?3:"raw"===r.t0?5:6;break;case 3:return n=Et.toJSON(t),r.abrupt("return",n);case 5:return r.abrupt("return",new Uint8Array(t.data).buffer);case 6:throw new Pt("format: Must be 'jwk' or 'raw'");case 7:case"end":return r.stop()}}),r)})))}},{key:"checkCryptoKey",value:function(e,t){if(b(v(i.prototype),"checkCryptoKey",this).call(this,e,t),!(e instanceof mi))throw new TypeError("key: Is not HMAC CryptoKey")}}]),i}(rr),ki=function(e){f(r,e);var t=w(r);function r(e,n,i,a,u){var s;return o(this,r),s=t.call(this,e,n,i,a),ai.set(d(s),void 0),function(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");t.set(e,r)}(d(s),ai,u),s}return s(r,[{key:"getNative",value:function(){return function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(this,ai)}}]),r}(Ur);ai=new WeakMap;var wi=function(){var t=function(t){f(i,t);var r=w(i);function i(){var e;return o(this,i),(e=r.call(this)).browserInfo=function(){var e={name:dr.Unknown,version:"0"};if("undefined"==typeof self)return e;var t,r=self.navigator.userAgent;return(t=/edge\/([\d\.]+)/i.exec(r))?(e.name=dr.Edge,e.version=t[1]):/msie/i.test(r)?(e.name=dr.IE,e.version=/msie ([\d\.]+)/i.exec(r)[1]):/Trident/i.test(r)?(e.name=dr.IE,e.version=/rv:([\d\.]+)/i.exec(r)[1]):/chrome/i.test(r)?(e.name=dr.Chrome,e.version=/chrome\/([\d\.]+)/i.exec(r)[1]):/firefox/i.test(r)?(e.name=dr.Firefox,e.version=/firefox\/([\d\.]+)/i.exec(r)[1]):/mobile/i.test(r)?(e.name=dr.Mobile,e.version=/mobile\/([\w]+)/i.exec(r)[1]):/safari/i.test(r)&&(e.name=dr.Safari,e.version=/version\/([\d\.]+)/i.exec(r)[1]),e}(),e.providers.set(new Pr),e.providers.set(new jr),e.providers.set(new Tr),e.providers.set(new Dr),e.providers.set(new _r),e.providers.set(new yi),e.providers.set(new gi),e.providers.set(new Gr),e.providers.set(new zr),e.providers.set(new Fr),e.providers.set(new qr),e.providers.set(new rn),e.providers.set(new Yr),e.providers.set(new nn),e.providers.set(new an),e.providers.set(new on),e.providers.set(new sn),e.providers.set(new di),e}return s(i,[{key:"digest",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.wrapNative.apply(this,["digest"].concat(t)));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"importKey",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.fixFirefoxEcImportPkcs8(t),e.abrupt("return",this.wrapNative.apply(this,["importKey"].concat(t)));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"exportKey",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fixFirefoxEcExportPkcs8(t);case 2:if(e.t0=e.sent,e.t0){e.next=7;break}return e.next=6,this.wrapNative.apply(this,["exportKey"].concat(t));case 6:e.t0=e.sent;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e,this)})))}},{key:"generateKey",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.wrapNative.apply(this,["generateKey"].concat(t)));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"sign",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.wrapNative.apply(this,["sign"].concat(t)));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"verify",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.wrapNative.apply(this,["verify"].concat(t)));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"encrypt",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.wrapNative.apply(this,["encrypt"].concat(t)));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"decrypt",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.wrapNative.apply(this,["decrypt"].concat(t)));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"wrapKey",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.wrapNative.apply(this,["wrapKey"].concat(t)));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"unwrapKey",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.wrapNative.apply(this,["unwrapKey"].concat(t)));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"deriveBits",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.wrapNative.apply(this,["deriveBits"].concat(t)));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"deriveKey",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.wrapNative.apply(this,["deriveKey"].concat(t)));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"wrapNative",value:function(t){for(var r=this,a=arguments.length,o=new Array(a>1?a-1:0),u=1;u<a;u++)o[u-1]=arguments[u];var s=function(e){return b(v(i.prototype),e,r)};return O(this,void 0,void 0,regeneratorRuntime.mark((function r(){var a,u,c,l,h,f,v,p,y,g,m,d,k,w,b;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(~["generateKey","unwrapKey","deriveKey","importKey"].indexOf(t)&&this.fixAlgorithmName(o),r.prev=1,"digest"===t&&o.some((function(e){return e instanceof Ur}))){r.next=9;break}return a=this.fixNativeArguments(t,o),Or.info("Call native '".concat(t,"' method"),a),r.next=7,e.nativeSubtle[t].apply(e.nativeSubtle,a);case 7:return u=r.sent,r.abrupt("return",this.fixNativeResult(t,o,u));case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(1),Or.warn("Error on native '".concat(t,"' calling. ").concat(r.t0.message),r.t0);case 14:if("wrapKey"!==t){r.next=30;break}return r.prev=15,Or.info("Trying to wrap key by using native functions",o),r.next=19,this.exportKey(o[0],o[1]);case 19:return c=r.sent,l="jwk"===o[0]?N.FromUtf8String(JSON.stringify(c)):c,r.next=23,this.encrypt(o[3],o[2],l);case 23:return h=r.sent,r.abrupt("return",h);case 27:r.prev=27,r.t1=r.catch(15),Or.warn("Cannot wrap key by native functions. ".concat(r.t1.message),r.t1);case 30:if("unwrapKey"!==t){r.next=46;break}return r.prev=31,Or.info("Trying to unwrap key by using native functions",o),r.next=35,this.decrypt(o[3],o[2],o[1]);case 35:return f=r.sent,v="jwk"===o[0]?JSON.parse(N.ToUtf8String(f)):f,r.next=39,this.importKey(o[0],v,o[4],o[5],o[6]);case 39:return p=r.sent,r.abrupt("return",p);case 43:r.prev=43,r.t2=r.catch(31),Or.warn("Cannot unwrap key by native functions. ".concat(r.t2.message),r.t2);case 46:if("deriveKey"!==t){r.next=61;break}return r.prev=47,Or.info("Trying to derive key by using native functions",o),r.next=51,this.deriveBits(o[0],o[1],o[2].length);case 51:return y=r.sent,r.next=54,this.importKey("raw",y,o[2],o[3],o[4]);case 54:return g=r.sent,r.abrupt("return",g);case 58:r.prev=58,r.t3=r.catch(47),Or.warn("Cannot derive key by native functions. ".concat(r.t3.message),r.t3);case 61:if("deriveBits"!==t&&"deriveKey"!==t){r.next=81;break}m=x(o),r.prev=63,m.s();case 65:if((d=m.n()).done){r.next=73;break}if("object"!==n(k=d.value)||!k.public||!i.isAnotherKey(k.public)){r.next=71;break}return r.next=70,this.castKey(k.public);case 70:k.public=r.sent;case 71:r.next=65;break;case 73:r.next=78;break;case 75:r.prev=75,r.t4=r.catch(63),m.e(r.t4);case 78:return r.prev=78,m.f(),r.finish(78);case 81:w=0;case 82:if(!(w<o.length)){r.next=91;break}if(b=o[w],!i.isAnotherKey(b)){r.next=88;break}return r.next=87,this.castKey(b);case 87:o[w]=r.sent;case 88:w++,r.next=82;break;case 91:return r.abrupt("return",s(t).apply(this,o));case 92:case"end":return r.stop()}}),r,this,[[1,11],[15,27],[31,43],[47,58],[63,75,78,81]])})))}},{key:"fixNativeArguments",value:function(e,t){var r,n,i,a,o,u,s,c,l=A(t);if("importKey"===e&&(this.browserInfo.name!==dr.IE||"jwk"!==(null===(n=null===(r=l[0])||void 0===r?void 0:r.toLowerCase)||void 0===n?void 0:n.call(r))||E.isBufferSource(l[1])||(l[1]=N.FromUtf8String(JSON.stringify(l[1])))),this.browserInfo.name===dr.IE&&t[1]instanceof ki)switch(e){case"sign":case"verify":case"encrypt":case"decrypt":l[0]=Object.assign(Object.assign({},this.prepareAlgorithm(l[0])),{hash:null===(o=null===(a=null===(i=l[1])||void 0===i?void 0:i.algorithm)||void 0===a?void 0:a.hash)||void 0===o?void 0:o.name});break;case"wrapKey":case"unwrapKey":l[4]=Object.assign(Object.assign({},this.prepareAlgorithm(l[4])),{hash:null===(c=null===(s=null===(u=l[3])||void 0===u?void 0:u.algorithm)||void 0===s?void 0:s.hash)||void 0===c?void 0:c.name})}for(var h=0;h<l.length;h++){var f=l[h];f instanceof ki&&(l[h]=f.getNative())}return l}},{key:"fixNativeResult",value:function(e,t,r){var n,i;if(this.browserInfo.name===dr.IE){if("exportKey"===e&&"jwk"===(null===(i=null===(n=t[0])||void 0===n?void 0:n.toLowerCase)||void 0===i?void 0:i.call(n))&&r instanceof ArrayBuffer)return JSON.parse(N.ToUtf8String(r));if("privateKey"in r){var a=["sign","decrypt","unwrapKey","deriveKey","deriveBits"],o=["verify","encrypt","wrapKey"];return{privateKey:this.wrapNativeKey(r.privateKey,t[0],t[1],t[2].filter((function(e){return a.includes(e)}))),publicKey:this.wrapNativeKey(r.publicKey,t[0],t[1],t[2].filter((function(e){return o.includes(e)})))}}if("extractable"in r){var u,s;switch(e){case"importKey":u=t[2],s=t[4];break;case"unwrapKey":u=t[4],s=t[6];break;case"generateKey":u=t[0],s=t[2];break;default:throw new Pt("Cannot wrap native key. Unsupported method in use")}return this.wrapNativeKey(r,u,r.extractable,s)}}return r}},{key:"wrapNativeKey",value:function(e,t,r,n){if(this.browserInfo.name===dr.IE){var i=["RSASSA-PKCS1-v1_5","RSA-PSS","RSA-OAEP","AES-CBC","AES-CTR","AES-KW","HMAC"],a=i.map((function(e){return e.toLowerCase()})).indexOf(e.algorithm.name.toLowerCase());if(-1!==a){var o=this.prepareAlgorithm(t),u=Object.assign(Object.assign({},e.algorithm),{name:i[a]});return ar.isHashedAlgorithm(o)&&(u.hash={name:o.hash.name.toUpperCase()}),Or.info("Wrapping ".concat(i[a]," crypto key to WrappedNativeCryptoKey")),new ki(u,r,e.type,n,e)}}return e}},{key:"castKey",value:function(e){return O(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Or.info("Cast native CryptoKey to linter key.",e),e.extractable){t.next=3;break}throw new Error("Cannot cast unextractable crypto key");case 3:return r=this.getProvider(e.algorithm.name),t.next=6,this.exportKey("jwk",e);case 6:return n=t.sent,t.abrupt("return",r.importKey("jwk",n,e.algorithm,!0,e.usages));case 8:case"end":return t.stop()}}),t,this)})))}},{key:"fixAlgorithmName",value:function(e){if(this.browserInfo.name===dr.Edge)for(var t=0;t<e.length;t++){var r=e[0];if("string"==typeof r){var i,a=x(this.providers.algorithms);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(o.toLowerCase()===r.toLowerCase()){e[t]=o;break}}}catch(e){a.e(e)}finally{a.f()}}else if("object"===n(r)&&"string"==typeof r.name){var u,s=x(this.providers.algorithms);try{for(s.s();!(u=s.n()).done;){var c=u.value;c.toLowerCase()===r.name.toLowerCase()&&(r.name=c),("string"==typeof r.hash&&c.toLowerCase()===r.hash.toLowerCase()||"object"===n(r.hash)&&"string"==typeof r.hash.name&&c.toLowerCase()===r.hash.name.toLowerCase())&&(r.hash={name:c})}}catch(e){s.e(e)}finally{s.f()}}}}},{key:"fixFirefoxEcImportPkcs8",value:function(e){var t=this.prepareAlgorithm(e[2]),r=t.name.toUpperCase();if(this.browserInfo.name===dr.Firefox&&"pkcs8"===e[0]&&~["ECDSA","ECDH"].indexOf(r)&&~["P-256","P-384","P-521"].indexOf(t.namedCurve)){if(!E.isBufferSource(e[1]))throw new TypeError("data: Is not ArrayBuffer or ArrayBufferView");var n=E.toArrayBuffer(e[1]),i=ft.parse(n,br),a=ft.parse(i.privateKey,Er),o=Et.toJSON(a);o.ext=!0,o.key_ops=e[4],o.crv=t.namedCurve,o.kty="EC",e[0]="jwk",e[1]=o}}},{key:"fixFirefoxEcExportPkcs8",value:function(e){return O(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r,n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.browserInfo.name!==dr.Firefox||"pkcs8"!==e[0]||!~["ECDSA","ECDH"].indexOf(e[1].algorithm.name)||!~["P-256","P-384","P-521"].indexOf(e[1].algorithm.namedCurve)){t.next=11;break}return t.next=4,this.exportKey("jwk",e[1]);case 4:return r=t.sent,n=Kt.fromJSON(r,{targetSchema:Er}),(i=new br).privateKeyAlgorithm.algorithm=Xr.ASN_ALGORITHM,i.privateKeyAlgorithm.parameters=vt.serialize(new kr(Zr(e[1].algorithm.namedCurve))),i.privateKey=vt.serialize(n),t.abrupt("return",vt.serialize(i));case 11:t.next=17;break;case 13:return t.prev=13,t.t0=t.catch(0),Or.error(t.t0),t.abrupt("return",null);case 17:case"end":return t.stop()}}),t,this,[[0,13]])})))}}],[{key:"isAnotherKey",value:function(e){return"object"===n(e)&&"string"==typeof e.type&&"boolean"==typeof e.extractable&&"object"===n(e.algorithm)&&!(e instanceof Ur)}}]),i}(ar);return t.methods=["digest","importKey","exportKey","sign","verify","generateKey","encrypt","decrypt","deriveBits","deriveKey","wrapKey","unwrapKey"],t}(),bi=function(t){f(n,t);var r=w(n);function n(){var e;return o(this,n),(e=r.apply(this,arguments)).subtle=new wi,e}return s(n,[{key:"getRandomValues",value:function(t){return e.nativeCrypto.getRandomValues(t)}},{key:"nativeCrypto",get:function(){return e.nativeCrypto}}]),n}((function e(){o(this,e)}));function Ai(e,t){var r=e[t];e[t]=function(){var n=arguments;return new Promise((function(i,a){var o=r.apply(e,n);o.oncomplete=function(e){i(e.target.result)},o.onerror=function(e){a("Error on running '".concat(t,"' function"))}}))}}"undefined"!=typeof self&&self.msCrypto&&(Ai(e.nativeSubtle,"generateKey"),Ai(e.nativeSubtle,"digest"),Ai(e.nativeSubtle,"sign"),Ai(e.nativeSubtle,"verify"),Ai(e.nativeSubtle,"encrypt"),Ai(e.nativeSubtle,"decrypt"),Ai(e.nativeSubtle,"importKey"),Ai(e.nativeSubtle,"exportKey"),Ai(e.nativeSubtle,"wrapKey"),Ai(e.nativeSubtle,"unwrapKey"),Ai(e.nativeSubtle,"deriveKey"),Ai(e.nativeSubtle,"deriveBits")),Math.imul||(Math.imul=function(e,t){var r=65535&e,n=65535&t;return r*n+((e>>>16&65535)*n+r*(t>>>16&65535)<<16>>>0)|0});var Bi=self;e.nativeCrypto&&Object.freeze(e.nativeCrypto.getRandomValues);try{delete self.crypto,Bi.crypto=new bi,Object.freeze(Bi.crypto)}catch(e){Or.error(e)}var Si=Bi.crypto;return e.Crypto=bi,e.CryptoKey=Ur,e.crypto=Si,e.setCrypto=function(t){e.nativeCrypto=t,e.nativeSubtle=t.subtle},e}({},self.asmCrypto,self.elliptic);



//////////////////////asdf



/*!
 * protobuf.js v6.8.0 (c) 2016, daniel wirtz
 * compiled fri, 09 jun 2017 21:00:39 utc
 * licensed under the bsd-3-clause license
 * see: https://github.com/dcodeio/protobuf.js for details
 */
!function(t,e){"use strict";!function(e,r,n){function i(t){var n=r[t];return n||e[t][0].call(n=r[t]={exports:{}},i,n,n.exports),n.exports}var o=t.protobuf=i(n[0]);"function"==typeof define&&define.amd&&define(["long"],function(t){return t&&t.isLong&&(o.util.Long=t,o.configure()),o}),"object"==typeof module&&module&&module.exports&&(module.exports=o)}({1:[function(t,e){function r(t,e){for(var r=Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(i,s){r[n]=function(t){if(o)if(o=!1,t)s(t);else{for(var e=Array(arguments.length-1),r=0;r<e.length;)e[r++]=arguments[r];i.apply(null,e)}};try{t.apply(e||null,r)}catch(t){o&&(o=!1,s(t))}})}e.exports=r},{}],2:[function(t,r,n){var i=n;i.length=function(t){var e=t.length;if(!e)return 0;for(var r=0;--e%4>1&&"="===t.charAt(e);)++r;return Math.ceil(3*t.length)/4-r};for(var o=Array(64),s=Array(123),a=0;a<64;)s[o[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;i.encode=function(t,e,r){for(var n,i=null,s=[],a=0,u=0;e<r;){var f=t[e++];switch(u){case 0:s[a++]=o[f>>2],n=(3&f)<<4,u=1;break;case 1:s[a++]=o[n|f>>4],n=(15&f)<<2,u=2;break;case 2:s[a++]=o[n|f>>6],s[a++]=o[63&f],u=0}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),a=0)}return u&&(s[a++]=o[n],s[a++]=61,1===u&&(s[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))};i.decode=function(t,r,n){for(var i,o=n,a=0,u=0;u<t.length;){var f=t.charCodeAt(u++);if(61===f&&a>1)break;if((f=s[f])===e)throw Error("invalid encoding");switch(a){case 0:i=f,a=1;break;case 1:r[n++]=i<<2|(48&f)>>4,i=f,a=2;break;case 2:r[n++]=(15&i)<<4|(60&f)>>2,i=f,a=3;break;case 3:r[n++]=(3&i)<<6|f,a=0}}if(1===a)throw Error("invalid encoding");return n-o},i.test=function(t){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(t)}},{}],3:[function(t,r){function n(t,r){function i(t){if("string"!=typeof t){var e=o();if(n.verbose&&console.log("codegen: "+e),e="return "+e,t){for(var r=Object.keys(t),a=Array(r.length+1),u=Array(r.length),f=0;f<r.length;)a[f]=r[f],u[f]=t[r[f++]];return a[f]=e,Function.apply(null,a).apply(null,u)}return Function(e)()}for(var l=Array(arguments.length-1),p=0;p<l.length;)l[p]=arguments[++p];if(p=0,t=t.replace(/%([%dfijs])/g,function(t,e){var r=l[p++];switch(e){case"d":case"f":return+r+"";case"i":return Math.floor(r)+"";case"j":return JSON.stringify(r);case"s":return r+""}return"%"}),p!==l.length)throw Error("parameter count mismatch");return s.push(t),i}function o(e){return"function "+(e||r||"")+"("+(t&&t.join(",")||"")+"){\n  "+s.join("\n  ")+"\n}"}"string"==typeof t&&(r=t,t=e);var s=[];return i.toString=o,i}r.exports=n,n.verbose=!1},{}],4:[function(t,r){function n(){this.a={}}r.exports=n,n.prototype.on=function(t,e,r){return(this.a[t]||(this.a[t]=[])).push({fn:e,ctx:r||this}),this},n.prototype.off=function(t,r){if(t===e)this.a={};else if(r===e)this.a[t]=[];else for(var n=this.a[t],i=0;i<n.length;)n[i].fn===r?n.splice(i,1):++i;return this},n.prototype.emit=function(t){var e=this.a[t];if(e){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<e.length;)e[n].fn.apply(e[n++].ctx,r)}return this}},{}],5:[function(t,r){function n(t,e,r){return"function"==typeof e?(r=e,e={}):e||(e={}),r?!e.xhr&&s&&s.readFile?s.readFile(t,function(i,o){return i&&"undefined"!=typeof XMLHttpRequest?n.xhr(t,e,r):i?r(i):r(null,e.binary?o:o.toString("utf8"))}):n.xhr(t,e,r):i(n,this,t,e)}r.exports=n;var i=t(1),o=t(7),s=o("fs");n.xhr=function(t,r,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4!==i.readyState)return e;if(0!==i.status&&200!==i.status)return n(Error("status "+i.status));if(r.binary){var t=i.response;if(!t){t=[];for(var o=0;o<i.responseText.length;++o)t.push(255&i.responseText.charCodeAt(o))}return n(null,"undefined"!=typeof Uint8Array?new Uint8Array(t):t)}return n(null,i.responseText)},r.binary&&("overrideMimeType"in i&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.responseType="arraybuffer"),i.open("GET",t),i.send()}},{1:1,7:7}],6:[function(t,e){function r(t){return"undefined"!=typeof Float32Array?function(){function e(t,e,r){o[0]=t,e[r]=s[0],e[r+1]=s[1],e[r+2]=s[2],e[r+3]=s[3]}function r(t,e,r){o[0]=t,e[r]=s[3],e[r+1]=s[2],e[r+2]=s[1],e[r+3]=s[0]}function n(t,e){return s[0]=t[e],s[1]=t[e+1],s[2]=t[e+2],s[3]=t[e+3],o[0]}function i(t,e){return s[3]=t[e],s[2]=t[e+1],s[1]=t[e+2],s[0]=t[e+3],o[0]}var o=new Float32Array([-0]),s=new Uint8Array(o.buffer),a=128===s[3];t.writeFloatLE=a?e:r,t.writeFloatBE=a?r:e,t.readFloatLE=a?n:i,t.readFloatBE=a?i:n}():function(){function e(t,e,r,n){var i=e<0?1:0;if(i&&(e=-e),0===e)t(1/e>0?0:2147483648,r,n);else if(isNaN(e))t(2143289344,r,n);else if(e>3.4028234663852886e38)t((i<<31|2139095040)>>>0,r,n);else if(e<1.1754943508222875e-38)t((i<<31|Math.round(e/1.401298464324817e-45))>>>0,r,n);else{var o=Math.floor(Math.log(e)/Math.LN2),s=8388607&Math.round(e*Math.pow(2,-o)*8388608);t((i<<31|o+127<<23|s)>>>0,r,n)}}function r(t,e,r){var n=t(e,r),i=2*(n>>31)+1,o=n>>>23&255,s=8388607&n;return 255===o?s?NaN:i*(1/0):0===o?1.401298464324817e-45*i*s:i*Math.pow(2,o-150)*(s+8388608)}t.writeFloatLE=e.bind(null,n),t.writeFloatBE=e.bind(null,i),t.readFloatLE=r.bind(null,o),t.readFloatBE=r.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){function e(t,e,r){o[0]=t,e[r]=s[0],e[r+1]=s[1],e[r+2]=s[2],e[r+3]=s[3],e[r+4]=s[4],e[r+5]=s[5],e[r+6]=s[6],e[r+7]=s[7]}function r(t,e,r){o[0]=t,e[r]=s[7],e[r+1]=s[6],e[r+2]=s[5],e[r+3]=s[4],e[r+4]=s[3],e[r+5]=s[2],e[r+6]=s[1],e[r+7]=s[0]}function n(t,e){return s[0]=t[e],s[1]=t[e+1],s[2]=t[e+2],s[3]=t[e+3],s[4]=t[e+4],s[5]=t[e+5],s[6]=t[e+6],s[7]=t[e+7],o[0]}function i(t,e){return s[7]=t[e],s[6]=t[e+1],s[5]=t[e+2],s[4]=t[e+3],s[3]=t[e+4],s[2]=t[e+5],s[1]=t[e+6],s[0]=t[e+7],o[0]}var o=new Float64Array([-0]),s=new Uint8Array(o.buffer),a=128===s[7];t.writeDoubleLE=a?e:r,t.writeDoubleBE=a?r:e,t.readDoubleLE=a?n:i,t.readDoubleBE=a?i:n}():function(){function e(t,e,r,n,i,o){var s=n<0?1:0;if(s&&(n=-n),0===n)t(0,i,o+e),t(1/n>0?0:2147483648,i,o+r);else if(isNaN(n))t(0,i,o+e),t(2146959360,i,o+r);else if(n>1.7976931348623157e308)t(0,i,o+e),t((s<<31|2146435072)>>>0,i,o+r);else{var a;if(n<2.2250738585072014e-308)a=n/5e-324,t(a>>>0,i,o+e),t((s<<31|a/4294967296)>>>0,i,o+r);else{var u=Math.floor(Math.log(n)/Math.LN2);1024===u&&(u=1023),a=n*Math.pow(2,-u),t(4503599627370496*a>>>0,i,o+e),t((s<<31|u+1023<<20|1048576*a&1048575)>>>0,i,o+r)}}}function r(t,e,r,n,i){var o=t(n,i+e),s=t(n,i+r),a=2*(s>>31)+1,u=s>>>20&2047,f=4294967296*(1048575&s)+o;return 2047===u?f?NaN:a*(1/0):0===u?5e-324*a*f:a*Math.pow(2,u-1075)*(f+4503599627370496)}t.writeDoubleLE=e.bind(null,n,0,4),t.writeDoubleBE=e.bind(null,i,4,0),t.readDoubleLE=r.bind(null,o,0,4),t.readDoubleBE=r.bind(null,s,4,0)}(),t}function n(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function i(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=255&t}function o(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function s(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}e.exports=r(r)},{}],7:[function(t,e,r){function n(t){try{var e=eval("quire".replace(/^/,"re"))(t);if(e&&(e.length||Object.keys(e).length))return e}catch(t){}return null}e.exports=n},{}],8:[function(t,e,r){var n=r,i=n.isAbsolute=function(t){return/^(?:\/|\w+:)/.test(t)},o=n.normalize=function(t){t=t.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var e=t.split("/"),r=i(t),n="";r&&(n=e.shift()+"/");for(var o=0;o<e.length;)".."===e[o]?o>0&&".."!==e[o-1]?e.splice(--o,2):r?e.splice(o,1):++o:"."===e[o]?e.splice(o,1):++o;return n+e.join("/")};n.resolve=function(t,e,r){return r||(e=o(e)),i(e)?e:(r||(t=o(t)),(t=t.replace(/(?:\/|^)[^\/]+$/,"")).length?o(t+"/"+e):e)}},{}],9:[function(t,e){function r(t,e,r){var n=r||8192,i=n>>>1,o=null,s=n;return function(r){if(r<1||r>i)return t(r);s+r>n&&(o=t(n),s=0);var a=e.call(o,s,s+=r);return 7&s&&(s=1+(7|s)),a}}e.exports=r},{}],10:[function(t,e,r){var n=r;n.length=function(t){for(var e=0,r=0,n=0;n<t.length;++n)r=t.charCodeAt(n),r<128?e+=1:r<2048?e+=2:55296==(64512&r)&&56320==(64512&t.charCodeAt(n+1))?(++n,e+=4):e+=3;return e},n.read=function(t,e,r){if(r-e<1)return"";for(var n,i=null,o=[],s=0;e<r;)n=t[e++],n<128?o[s++]=n:n>191&&n<224?o[s++]=(31&n)<<6|63&t[e++]:n>239&&n<365?(n=((7&n)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,o[s++]=55296+(n>>10),o[s++]=56320+(1023&n)):o[s++]=(15&n)<<12|(63&t[e++])<<6|63&t[e++],s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))},n.write=function(t,e,r){for(var n,i,o=r,s=0;s<t.length;++s)n=t.charCodeAt(s),n<128?e[r++]=n:n<2048?(e[r++]=n>>6|192,e[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(i=t.charCodeAt(s+1)))?(n=65536+((1023&n)<<10)+(1023&i),++s,e[r++]=n>>18|240,e[r++]=n>>12&63|128,e[r++]=n>>6&63|128,e[r++]=63&n|128):(e[r++]=n>>12|224,e[r++]=n>>6&63|128,e[r++]=63&n|128);return r-o}},{}],11:[function(t,e){function r(t,e){n.test(t)||(t="google/protobuf/"+t+".proto",e={nested:{google:{nested:{protobuf:{nested:e}}}}}),r[t]=e}e.exports=r;var n=/\/|\./;r("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var i;r("duration",{Duration:i={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),r("timestamp",{Timestamp:i}),r("empty",{Empty:{fields:{}}}),r("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),r("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),r.get=function(t){return r[t]||null}},{}],12:[function(t,e,r){function n(t,e,r,n){if(e.resolvedType)if(e.resolvedType instanceof s){t("switch(d%s){",n);for(var i=e.resolvedType.values,o=Object.keys(i),a=0;a<o.length;++a)e.repeated&&i[o[a]]===e.typeDefault&&t("default:"),t("case%j:",o[a])("case %i:",i[o[a]])("m%s=%j",n,i[o[a]])("break");t("}")}else t('if(typeof d%s!=="object")',n)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else{var u=!1;switch(e.type){case"double":case"float":t("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",n,n);break;case"uint64":u=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,u)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,u?"true":"");break;case"bytes":t('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length)",n)("m%s=d%s",n,n);break;case"string":t("m%s=String(d%s)",n,n);break;case"bool":t("m%s=Boolean(d%s)",n,n)}}return t}function i(t,e,r,n){if(e.resolvedType)e.resolvedType instanceof s?t("d%s=o.enums===String?types[%i].values[m%s]:m%s",n,r,n,n):t("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var i=!1;switch(e.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,i?"true":"",n);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:t("d%s=m%s",n,n)}}return t}var o=r,s=t(15),a=t(37);o.fromObject=function(t){var e=t.fieldsArray,r=a.codegen(["d"],t.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!e.length)return r("return new this.ctor");r("var m=new this.ctor");for(var i=0;i<e.length;++i){var o=e[i].resolve(),u=a.safeProp(o.name);o.map?(r("if(d%s){",u)('if(typeof d%s!=="object")',u)("throw TypeError(%j)",o.fullName+": object expected")("m%s={}",u)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",u),n(r,o,i,u+"[ks[i]]")("}")("}")):o.repeated?(r("if(d%s){",u)("if(!Array.isArray(d%s))",u)("throw TypeError(%j)",o.fullName+": array expected")("m%s=[]",u)("for(var i=0;i<d%s.length;++i){",u),n(r,o,i,u+"[i]")("}")("}")):(o.resolvedType instanceof s||r("if(d%s!=null){",u),n(r,o,i,u),o.resolvedType instanceof s||r("}"))}return r("return m")},o.toObject=function(t){var e=t.fieldsArray.slice().sort(a.compareFieldsById);if(!e.length)return a.codegen()("return {}");for(var r=a.codegen(["m","o"],t.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],o=[],s=[],u=0;u<e.length;++u)e[u].partOf||(e[u].resolve().repeated?n:e[u].map?o:s).push(e[u]);var f,l,p=!1;for(u=0;u<e.length;++u){var f=e[u],c=t.b.indexOf(f),l=a.safeProp(f.name);f.map?(p||(p=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",l,l)("d%s={}",l)("for(var j=0;j<ks2.length;++j){"),i(r,f,c,l+"[ks2[j]]")("}")):f.repeated?(r("if(m%s&&m%s.length){",l,l)("d%s=[]",l)("for(var j=0;j<m%s.length;++j){",l),i(r,f,c,l+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",l,f.name),i(r,f,c,l),f.partOf&&r("if(o.oneofs)")("d%s=%j",a.safeProp(f.partOf.name),f.name)),r("}")}return r("return d")}},{15:15,37:37}],13:[function(t,r){function n(t){return"missing required '"+t.name+"'"}function i(t){var r=a.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter(function(t){return t.map}).length?",k":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&r("if((t&7)===4)")("break"),r("switch(t>>>3){");for(var i=0;i<t.fieldsArray.length;++i){var u=t.b[i].resolve(),f=u.resolvedType instanceof o?"int32":u.type,l="m"+a.safeProp(u.name);r("case %i:",u.id),u.map?(r("r.skip().pos++")("if(%s===util.emptyObject)",l)("%s={}",l)("k=r.%s()",u.keyType)("r.pos++"),s.long[u.keyType]!==e?s.basic[f]===e?r('%s[typeof k==="object"?util.longToHash(k):k]=types[%i].decode(r,r.uint32())',l,i):r('%s[typeof k==="object"?util.longToHash(k):k]=r.%s()',l,f):s.basic[f]===e?r("%s[k]=types[%i].decode(r,r.uint32())",l,i):r("%s[k]=r.%s()",l,f)):u.repeated?(r("if(!(%s&&%s.length))",l,l)("%s=[]",l),s.packed[f]!==e&&r("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",l,f)("}else"),s.basic[f]===e?r(u.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",l,i):r("%s.push(r.%s())",l,f)):s.basic[f]===e?r(u.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",l,i):r("%s=r.%s()",l,f),r("break")}for(r("default:")("r.skipType(t&7)")("break")("}")("}"),i=0;i<t.b.length;++i){var p=t.b[i];p.required&&r("if(!m.hasOwnProperty(%j))",p.name)("throw util.ProtocolError(%j,{instance:m})",n(p))}return r("return m")}r.exports=i;var o=t(15),s=t(36),a=t(37)},{15:15,36:36,37:37}],14:[function(t,r){function n(t,e,r,n){return e.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(e.id<<3|2)>>>0)}function i(t){for(var r,i,u=a.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),f=t.fieldsArray.slice().sort(a.compareFieldsById),r=0;r<f.length;++r){var l=f[r].resolve(),p=t.b.indexOf(l),c=l.resolvedType instanceof o?"int32":l.type,h=s.basic[c];i="m"+a.safeProp(l.name),l.map?(u("if(%s!=null&&m.hasOwnProperty(%j)){",i,l.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",i)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(l.id<<3|2)>>>0,8|s.mapKey[l.keyType],l.keyType),h===e?u("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",p,i):u(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,c,i),u("}")("}")):l.repeated?(u("if(%s!=null&&%s.length){",i,i),l.packed&&s.packed[c]!==e?u("w.uint32(%i).fork()",(l.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",i)("w.%s(%s[i])",c,i)("w.ldelim()"):(u("for(var i=0;i<%s.length;++i)",i),h===e?n(u,l,p,i+"[i]"):u("w.uint32(%i).%s(%s[i])",(l.id<<3|h)>>>0,c,i)),u("}")):(l.optional&&u("if(%s!=null&&m.hasOwnProperty(%j))",i,l.name),h===e?n(u,l,p,i):u("w.uint32(%i).%s(%s)",(l.id<<3|h)>>>0,c,i))}return u("return w")}r.exports=i;var o=t(15),s=t(36),a=t(37)},{15:15,36:36,37:37}],15:[function(t,r){function n(t,e,r){if(i.call(this,t,r),e&&"object"!=typeof e)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comments={},e)for(var n=Object.keys(e),o=0;o<n.length;++o)"number"==typeof e[n[o]]&&(this.valuesById[this.values[n[o]]=e[n[o]]]=n[o])}r.exports=n;var i=t(24);((n.prototype=Object.create(i.prototype)).constructor=n).className="Enum";var o=t(37);n.fromJSON=function(t,e){return new n(t,e.values,e.options)},n.prototype.toJSON=function(){return o.toObject(["options",this.options,"values",this.values])},n.prototype.add=function(t,r,n){if(!o.isString(t))throw TypeError("name must be a string");if(!o.isInteger(r))throw TypeError("id must be an integer");if(this.values[t]!==e)throw Error("duplicate name");if(this.valuesById[r]!==e){if(!this.options||!this.options.allow_alias)throw Error("duplicate id");this.values[t]=r}else this.valuesById[this.values[t]=r]=t;return this.comments[t]=n||null,this},n.prototype.remove=function(t){if(!o.isString(t))throw TypeError("name must be a string");var r=this.values[t];if(r===e)throw Error("name does not exist");return delete this.valuesById[r],delete this.values[t],delete this.comments[t],this}},{24:24,37:37}],16:[function(t,r){function n(t,r,n,o,s,l){if(u.isObject(o)?(l=o,o=s=e):u.isObject(s)&&(l=s,s=e),i.call(this,t,l),!u.isInteger(r)||r<0)throw TypeError("id must be a non-negative integer");if(!u.isString(n))throw TypeError("type must be a string");if(o!==e&&!f.test(o=(""+o).toLowerCase()))throw TypeError("rule must be a string rule");if(s!==e&&!u.isString(s))throw TypeError("extend must be a string");this.rule=o&&"optional"!==o?o:e,this.type=n,this.id=r,this.extend=s||e,this.required="required"===o,this.optional=!this.required,this.repeated="repeated"===o,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!u.Long&&a.long[n]!==e,this.bytes="bytes"===n,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.c=null}r.exports=n;var i=t(24);((n.prototype=Object.create(i.prototype)).constructor=n).className="Field";var o,s=t(15),a=t(36),u=t(37),f=/^required|optional|repeated$/;n.fromJSON=function(t,e){return new n(t,e.id,e.type,e.rule,e.extend,e.options)},Object.defineProperty(n.prototype,"packed",{get:function(){return null===this.c&&(this.c=!1!==this.getOption("packed")),this.c}}),n.prototype.setOption=function(t,e,r){return"packed"===t&&(this.c=null),i.prototype.setOption.call(this,t,e,r)},n.prototype.toJSON=function(){return u.toObject(["rule","optional"!==this.rule&&this.rule||e,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options])},n.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=a.defaults[this.type])===e&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof o?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof s&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(this.options.packed===e||!this.resolvedType||this.resolvedType instanceof s)||delete this.options.packed,Object.keys(this.options).length||(this.options=e)),this.long)this.typeDefault=u.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var t;u.base64.test(this.typeDefault)?u.base64.decode(this.typeDefault,t=u.newBuffer(u.base64.length(this.typeDefault)),0):u.utf8.write(this.typeDefault,t=u.newBuffer(u.utf8.length(this.typeDefault)),0),this.typeDefault=t}return this.map?this.defaultValue=u.emptyObject:this.repeated?this.defaultValue=u.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof o&&(this.parent.ctor.prototype[this.name]=this.defaultValue),i.prototype.resolve.call(this)},n.d=function(t,e,r,i){return"function"==typeof e?e=u.decorateType(e).name:e&&"object"==typeof e&&(e=u.decorateEnum(e).name),function(o,s){u.decorateType(o.constructor).add(new n(s,t,e,r,{default:i}))}},n.e=function(t){o=t}},{15:15,24:24,36:36,37:37}],17:[function(t,e){function r(t,e,r){return"function"==typeof e?(r=e,e=new i.Root):e||(e=new i.Root),e.load(t,r)}function n(t,e){return e||(e=new i.Root),e.loadSync(t)}var i=e.exports=t(18);i.build="light",i.load=r,i.loadSync=n,i.encoder=t(14),i.decoder=t(13),i.verifier=t(40),i.converter=t(12),i.ReflectionObject=t(24),i.Namespace=t(23),i.Root=t(29),i.Enum=t(15),i.Type=t(35),i.Field=t(16),i.OneOf=t(25),i.MapField=t(20),i.Service=t(33),i.Method=t(22),i.Message=t(21),i.wrappers=t(41),i.types=t(36),i.util=t(37),i.ReflectionObject.e(i.Root),i.Namespace.e(i.Type,i.Service),i.Root.e(i.Type),i.Field.e(i.Type)},{12:12,13:13,14:14,15:15,16:16,18:18,20:20,21:21,22:22,23:23,24:24,25:25,29:29,33:33,35:35,36:36,37:37,40:40,41:41}],18:[function(t,e,r){function n(){i.Reader.e(i.BufferReader),i.util.e()}var i=r;i.build="minimal",i.Writer=t(42),i.BufferWriter=t(43),i.Reader=t(27),i.BufferReader=t(28),i.util=t(39),i.rpc=t(31),i.roots=t(30),i.configure=n,i.Writer.e(i.BufferWriter),n()},{27:27,28:28,30:30,31:31,39:39,42:42,43:43}],19:[function(t,e){var r=e.exports=t(17);r.build="full",r.tokenize=t(34),r.parse=t(26),r.common=t(11),r.Root.e(r.Type,r.parse,r.common)},{11:11,17:17,26:26,34:34}],20:[function(t,r){function n(t,e,r,n,o){if(i.call(this,t,e,n,o),!s.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}r.exports=n;var i=t(16);((n.prototype=Object.create(i.prototype)).constructor=n).className="MapField";var o=t(36),s=t(37);n.fromJSON=function(t,e){return new n(t,e.id,e.keyType,e.type,e.options)},n.prototype.toJSON=function(){return s.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options])},n.prototype.resolve=function(){if(this.resolved)return this;if(o.mapKey[this.keyType]===e)throw Error("invalid key type: "+this.keyType);return i.prototype.resolve.call(this)},n.d=function(t,e,r){return"function"==typeof r?r=s.decorateType(r).name:r&&"object"==typeof r&&(r=s.decorateEnum(r).name),function(i,o){s.decorateType(i.constructor).add(new n(o,t,e,r))}}},{16:16,36:36,37:37}],21:[function(t,e){function r(t){if(t)for(var e=Object.keys(t),r=0;r<e.length;++r)this[e[r]]=t[e[r]]}e.exports=r;var n=t(39);r.create=function(t){return this.$type.create(t)},r.encode=function(t,e){return this.$type.encode(t,e)},r.encodeDelimited=function(t,e){return this.$type.encodeDelimited(t,e)},r.decode=function(t){return this.$type.decode(t)},r.decodeDelimited=function(t){return this.$type.decodeDelimited(t)},r.verify=function(t){return this.$type.verify(t)},r.fromObject=function(t){return this.$type.fromObject(t)},r.toObject=function(t,e){return this.$type.toObject(t,e)},r.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}},{39:39}],22:[function(t,r){function n(t,r,n,s,a,u,f){if(o.isObject(a)?(f=a,a=u=e):o.isObject(u)&&(f=u,u=e),r!==e&&!o.isString(r))throw TypeError("type must be a string");if(!o.isString(n))throw TypeError("requestType must be a string");if(!o.isString(s))throw TypeError("responseType must be a string");i.call(this,t,f),this.type=r||"rpc",this.requestType=n,this.requestStream=!!a||e,this.responseType=s,this.responseStream=!!u||e,this.resolvedRequestType=null,this.resolvedResponseType=null}r.exports=n;var i=t(24);((n.prototype=Object.create(i.prototype)).constructor=n).className="Method";var o=t(37);n.fromJSON=function(t,e){return new n(t,e.type,e.requestType,e.responseType,e.requestStream,e.responseStream,e.options)},n.prototype.toJSON=function(){return o.toObject(["type","rpc"!==this.type&&this.type||e,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options])},n.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),i.prototype.resolve.call(this))}},{24:24,37:37}],23:[function(t,r){function n(t){if(!t||!t.length)return e;for(var r={},n=0;n<t.length;++n)r[t[n].name]=t[n].toJSON();return r}function i(t,r){s.call(this,t,r),this.nested=e,this.f=null}function o(t){return t.f=null,t}r.exports=i;var s=t(24);((i.prototype=Object.create(s.prototype)).constructor=i).className="Namespace";var a,u,f=t(15),l=t(16),p=t(37);i.fromJSON=function(t,e){return new i(t,e.options).addJSON(e.nested)},i.arrayToJSON=n,Object.defineProperty(i.prototype,"nestedArray",{get:function(){return this.f||(this.f=p.toArray(this.nested))}}),i.prototype.toJSON=function(){return p.toObject(["options",this.options,"nested",n(this.nestedArray)])},i.prototype.addJSON=function(t){var r=this;if(t)for(var n,o=Object.keys(t),s=0;s<o.length;++s)n=t[o[s]],r.add((n.fields!==e?a.fromJSON:n.values!==e?f.fromJSON:n.methods!==e?u.fromJSON:n.id!==e?l.fromJSON:i.fromJSON)(o[s],n));return this},i.prototype.get=function(t){return this.nested&&this.nested[t]||null},i.prototype.getEnum=function(t){if(this.nested&&this.nested[t]instanceof f)return this.nested[t].values;throw Error("no such enum")},i.prototype.add=function(t){if(!(t instanceof l&&t.extend!==e||t instanceof a||t instanceof f||t instanceof u||t instanceof i))throw TypeError("object must be a valid nested object");if(this.nested){var r=this.get(t.name);if(r){if(!(r instanceof i&&t instanceof i)||r instanceof a||r instanceof u)throw Error("duplicate name '"+t.name+"' in "+this);for(var n=r.nestedArray,s=0;s<n.length;++s)t.add(n[s]);this.remove(r),this.nested||(this.nested={}),t.setOptions(r.options,!0)}}else this.nested={};return this.nested[t.name]=t,t.onAdd(this),o(this)},i.prototype.remove=function(t){if(!(t instanceof s))throw TypeError("object must be a ReflectionObject");if(t.parent!==this)throw Error(t+" is not a member of "+this);return delete this.nested[t.name],Object.keys(this.nested).length||(this.nested=e),t.onRemove(this),o(this)},i.prototype.define=function(t,e){if(p.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&""===t[0])throw Error("path must be relative");for(var r=this;t.length>0;){var n=t.shift();if(r.nested&&r.nested[n]){if(!((r=r.nested[n])instanceof i))throw Error("path conflicts with non-namespace objects")}else r.add(r=new i(n))}return e&&r.addJSON(e),r},i.prototype.resolveAll=function(){for(var t=this.nestedArray,e=0;e<t.length;)t[e]instanceof i?t[e++].resolveAll():t[e++].resolve();return this.resolve()},i.prototype.lookup=function(t,r,n){if("boolean"==typeof r?(n=r,r=e):r&&!Array.isArray(r)&&(r=[r]),p.isString(t)&&t.length){if("."===t)return this.root;t=t.split(".")}else if(!t.length)return this;if(""===t[0])return this.root.lookup(t.slice(1),r);var o=this.get(t[0]);if(o){if(1===t.length){if(!r||r.indexOf(o.constructor)>-1)return o}else if(o instanceof i&&(o=o.lookup(t.slice(1),r,!0)))return o}else for(var s=0;s<this.nestedArray.length;++s)if(this.f[s]instanceof i&&(o=this.f[s].lookup(t,r,!0)))return o;return null===this.parent||n?null:this.parent.lookup(t,r)},i.prototype.lookupType=function(t){var e=this.lookup(t,[a]);if(!e)throw Error("no such type");return e},i.prototype.lookupEnum=function(t){var e=this.lookup(t,[f]);if(!e)throw Error("no such Enum '"+t+"' in "+this);return e},i.prototype.lookupTypeOrEnum=function(t){var e=this.lookup(t,[a,f]);if(!e)throw Error("no such Type or Enum '"+t+"' in "+this);return e},i.prototype.lookupService=function(t){var e=this.lookup(t,[u]);if(!e)throw Error("no such Service '"+t+"' in "+this);return e},i.e=function(t,e){a=t,u=e}},{15:15,16:16,24:24,37:37}],24:[function(t,r){function n(t,e){if(!o.isString(t))throw TypeError("name must be a string");if(e&&!o.isObject(e))throw TypeError("options must be an object");this.options=e,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}r.exports=n,n.className="ReflectionObject";var i,o=t(37);Object.defineProperties(n.prototype,{root:{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],e=this.parent;e;)t.unshift(e.name),e=e.parent;return t.join(".")}}}),n.prototype.toJSON=function(){throw Error()},n.prototype.onAdd=function(t){this.parent&&this.parent!==t&&this.parent.remove(this),this.parent=t,this.resolved=!1;var e=t.root;e instanceof i&&e.g(this)},n.prototype.onRemove=function(t){var e=t.root;e instanceof i&&e.h(this),this.parent=null,this.resolved=!1},n.prototype.resolve=function(){return this.resolved?this:(this.root instanceof i&&(this.resolved=!0),this)},n.prototype.getOption=function(t){return this.options?this.options[t]:e},n.prototype.setOption=function(t,r,n){return n&&this.options&&this.options[t]!==e||((this.options||(this.options={}))[t]=r),this},n.prototype.setOptions=function(t,e){if(t)for(var r=Object.keys(t),n=0;n<r.length;++n)this.setOption(r[n],t[r[n]],e);return this},n.prototype.toString=function(){var t=this.constructor.className,e=this.fullName;return e.length?t+" "+e:t},n.e=function(t){i=t}},{37:37}],25:[function(t,r){function n(t,r,n){if(Array.isArray(r)||(n=r,r=e),o.call(this,t,n),r!==e&&!Array.isArray(r))throw TypeError("fieldNames must be an Array");this.oneof=r||[],this.fieldsArray=[]}function i(t){if(t.parent)for(var e=0;e<t.fieldsArray.length;++e)t.fieldsArray[e].parent||t.parent.add(t.fieldsArray[e])}r.exports=n;var o=t(24);((n.prototype=Object.create(o.prototype)).constructor=n).className="OneOf";var s=t(16),a=t(37);n.fromJSON=function(t,e){return new n(t,e.oneof,e.options)},n.prototype.toJSON=function(){return a.toObject(["options",this.options,"oneof",this.oneof])},n.prototype.add=function(t){if(!(t instanceof s))throw TypeError("field must be a Field");return t.parent&&t.parent!==this.parent&&t.parent.remove(t),this.oneof.push(t.name),this.fieldsArray.push(t),t.partOf=this,i(this),this},n.prototype.remove=function(t){if(!(t instanceof s))throw TypeError("field must be a Field");var e=this.fieldsArray.indexOf(t);if(e<0)throw Error(t+" is not a member of "+this);return this.fieldsArray.splice(e,1),e=this.oneof.indexOf(t.name),e>-1&&this.oneof.splice(e,1),t.partOf=null,this},n.prototype.onAdd=function(t){o.prototype.onAdd.call(this,t);for(var e=this,r=0;r<this.oneof.length;++r){var n=t.get(this.oneof[r]);n&&!n.partOf&&(n.partOf=e,e.fieldsArray.push(n))}i(this)},n.prototype.onRemove=function(t){for(var e,r=0;r<this.fieldsArray.length;++r)(e=this.fieldsArray[r]).parent&&e.parent.remove(e);o.prototype.onRemove.call(this,t)},n.d=function(){for(var t=Array(arguments.length),e=0;e<arguments.length;)t[e]=arguments[e++];return function(e,r){a.decorateType(e.constructor).add(new n(r,t)),Object.defineProperty(e,r,{get:a.oneOfGetter(t),set:a.oneOfSetter(t)})}}},{16:16,24:24,37:37}],26:[function(t,r){function n(t,r,A){function S(t,e,r){var i=n.filename;return r||(n.filename=null),Error("illegal "+(e||"token")+" '"+t+"' ("+(i?i+", ":"")+"line "+Y.line+")")}function T(){var t,e=[];do{if('"'!==(t=tt())&&"'"!==t)throw S(t);e.push(tt()),nt(t),t=rt()}while('"'===t||"'"===t);return e.join("")}function E(t){var e=tt();switch(e){case"'":case'"':return et(e),T();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return F(e,!0)}catch(r){if(t&&j.test(e))return e;throw S(e,"value")}}function N(t,e){var r,n;do{!e||'"'!==(r=rt())&&"'"!==r?t.push([n=L(tt()),nt("to",!0)?L(tt()):n]):t.push(T())}while(nt(",",!0));nt(";")}function F(t,e){var r=1;switch("-"===t.charAt(0)&&(r=-1,t=t.substring(1)),t){case"inf":case"INF":case"Inf":return r*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(y.test(t))return r*parseInt(t,10);if(m.test(t))return r*parseInt(t,16);if(b.test(t))return r*parseInt(t,8);if(O.test(t))return r*parseFloat(t);throw S(t,"number",e)}function L(t,e){switch(t){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!e&&"-"===t.charAt(0))throw S(t,"id");if(v.test(t))return parseInt(t,10);if(g.test(t))return parseInt(t,16);if(w.test(t))return parseInt(t,8);throw S(t,"id")}function I(t,e){switch(e){case"option":return z(t,e),nt(";"),!0;case"message":return J(t,e),!0;case"enum":return V(t,e),!0;case"service":return H(t,e),!0;case"extend":return Z(t,e),!0}return!1}function B(t,e,r){var i=Y.line;if(t&&(t.comment=it(),t.filename=n.filename),nt("{",!0)){for(var o;"}"!==(o=tt());)e(o);nt(";",!0)}else r&&r(),nt(";"),t&&"string"!=typeof t.comment&&(t.comment=it(i))}function J(t,e){if(!k.test(e=tt()))throw S(e,"type name");var r=new s(e);B(r,function(t){if(!I(r,t))switch(t){case"map":$(r);break;case"required":case"optional":case"repeated":R(r,t);break;case"oneof":P(r,t);break;case"extensions":N(r.extensions||(r.extensions=[]));break;case"reserved":N(r.reserved||(r.reserved=[]),!0);break;default:if(!st||!j.test(t))throw S(t);et(t),R(r,"optional")}}),t.add(r)}function R(t,r,n){var i=tt();if("group"===i)return void D(t,r);if(!j.test(i))throw S(i,"type");var o=tt();if(!k.test(o))throw S(o,"name");o=ut(o),nt("=");var s=new a(o,L(tt()),i,r,n);B(s,function(t){if("option"!==t)throw S(t);z(s,t),nt(";")},function(){U(s)}),t.add(s),st||!s.repeated||h.packed[i]===e&&h.basic[i]!==e||s.setOption("packed",!1,!0)}function D(t,e){var r=tt();if(!k.test(r))throw S(r,"name");var i=d.lcFirst(r);r===i&&(r=d.ucFirst(r)),nt("=");var o=L(tt()),u=new s(r);u.group=!0;var f=new a(i,o,r,e);f.filename=n.filename,B(u,function(t){switch(t){case"option":z(u,t),nt(";");break;case"required":case"optional":case"repeated":R(u,t);break;default:throw S(t)}}),t.add(u).add(f)}function $(t){nt("<");var r=tt();if(h.mapKey[r]===e)throw S(r,"type");nt(",");var n=tt();if(!j.test(n))throw S(n,"type");nt(">");var i=tt();if(!k.test(i))throw S(i,"name");nt("=");var o=new u(ut(i),L(tt()),r,n);B(o,function(t){if("option"!==t)throw S(t);z(o,t),nt(";")},function(){U(o)}),t.add(o)}function P(t,e){if(!k.test(e=tt()))throw S(e,"name");var r=new f(ut(e));B(r,function(t){"option"===t?(z(r,t),nt(";")):(et(t),R(r,"optional"))}),t.add(r)}function V(t,e){if(!k.test(e=tt()))throw S(e,"name");var r=new l(e);B(r,function(t){"option"===t?(z(r,t),nt(";")):q(r,t)}),t.add(r)}function q(t,e){if(!k.test(e))throw S(e,"name");nt("=");var r=L(tt(),!0),n={};B(n,function(t){if("option"!==t)throw S(t);z(n,t),nt(";")},function(){U(n)}),t.add(e,r,n.comment)}function z(t,e){var r=nt("(",!0);if(!j.test(e=tt()))throw S(e,"name");var n=e;r&&(nt(")"),n="("+n+")",e=rt(),x.test(e)&&(n+=e,tt())),nt("="),C(t,n)}function C(t,e){if(nt("{",!0))do{if(!k.test(Q=tt()))throw S(Q,"name");"{"===rt()?C(t,e+"."+Q):(nt(":"),M(t,e+"."+Q,E(!0)))}while(!nt("}",!0));else M(t,e,E(!0))}function M(t,e,r){t.setOption&&t.setOption(e,r)}function U(t){if(nt("[",!0)){do{z(t,"option")}while(nt(",",!0));nt("]")}return t}function H(t,e){if(!k.test(e=tt()))throw S(e,"service name");var r=new p(e);B(r,function(t){if(!I(r,t)){if("rpc"!==t)throw S(t);_(r,t)}}),t.add(r)}function _(t,e){var r=e;if(!k.test(e=tt()))throw S(e,"name");var n,i,o,s,a=e;if(nt("("),nt("stream",!0)&&(i=!0),!j.test(e=tt()))throw S(e);if(n=e,nt(")"),nt("returns"),nt("("),nt("stream",!0)&&(s=!0),!j.test(e=tt()))throw S(e);o=e,nt(")");var u=new c(a,r,n,o,i,s);B(u,function(t){if("option"!==t)throw S(t);z(u,t),nt(";")}),t.add(u)}function Z(t,e){if(!j.test(e=tt()))throw S(e,"reference");var r=e;B(null,function(e){switch(e){case"required":case"repeated":case"optional":R(t,e,r);break;default:if(!st||!j.test(e))throw S(e);et(e),R(t,"optional",r)}})}r instanceof o||(A=r,r=new o),A||(A=n.defaults);for(var W,K,G,X,Q,Y=i(t),tt=Y.next,et=Y.push,rt=Y.peek,nt=Y.skip,it=Y.cmnt,ot=!0,st=!1,at=r,ut=A.keepCase?function(t){return t}:d.camelCase;null!==(Q=tt());)switch(Q){case"package":if(!ot)throw S(Q);!function(){if(W!==e)throw S("package");if(W=tt(),!j.test(W))throw S(W,"name");at=at.define(W),nt(";")}();break;case"import":if(!ot)throw S(Q);!function(){var t,e=rt();switch(e){case"weak":t=G||(G=[]),tt();break;case"public":tt();default:t=K||(K=[])}e=T(),nt(";"),t.push(e)}();break;case"syntax":if(!ot)throw S(Q);!function(){if(nt("="),X=T(),!(st="proto3"===X)&&"proto2"!==X)throw S(X,"syntax");nt(";")}();break;case"option":if(!ot)throw S(Q);z(at,Q),nt(";");break;default:if(I(at,Q)){ot=!1;continue}throw S(Q)}return n.filename=null,{package:W,imports:K,weakImports:G,syntax:X,root:r}}r.exports=n,n.filename=null,n.defaults={keepCase:!1};var i=t(34),o=t(29),s=t(35),a=t(16),u=t(20),f=t(25),l=t(15),p=t(33),c=t(22),h=t(36),d=t(37),y=/^[1-9][0-9]*$/,v=/^-?[1-9][0-9]*$/,m=/^0[x][0-9a-fA-F]+$/,g=/^-?0[x][0-9a-fA-F]+$/,b=/^0[0-7]+$/,w=/^-?0[0-7]+$/,O=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,k=/^[a-zA-Z_][a-zA-Z_0-9]*$/,j=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,x=/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/},{15:15,16:16,20:20,22:22,25:25,29:29,33:33,34:34,35:35,36:36,37:37}],27:[function(t,e){function r(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function n(t){this.buf=t,this.pos=0,this.len=t.length}function i(){var t=new f(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw r(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw r(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function o(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function s(){if(this.pos+8>this.len)throw r(this,8);return new f(o(this.buf,this.pos+=4),o(this.buf,this.pos+=4))}e.exports=n;var a,u=t(39),f=u.LongBits,l=u.utf8,p="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new n(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new n(t);throw Error("illegal buffer")};n.create=u.Buffer?function(t){return(n.create=function(t){return u.Buffer.isBuffer(t)?new a(t):p(t)})(t)}:p,n.prototype.i=u.Array.prototype.subarray||u.Array.prototype.slice,n.prototype.uint32=function(){var t=4294967295;return function(){if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len)throw this.pos=this.len,r(this,10);return t}}(),n.prototype.int32=function(){return 0|this.uint32()},n.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},n.prototype.bool=function(){return 0!==this.uint32()},n.prototype.fixed32=function(){if(this.pos+4>this.len)throw r(this,4);return o(this.buf,this.pos+=4)},n.prototype.sfixed32=function(){if(this.pos+4>this.len)throw r(this,4);return 0|o(this.buf,this.pos+=4)},n.prototype.float=function(){if(this.pos+4>this.len)throw r(this,4);var t=u.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},n.prototype.double=function(){if(this.pos+8>this.len)throw r(this,4);var t=u.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},n.prototype.bytes=function(){var t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw r(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,n):e===n?new this.buf.constructor(0):this.i.call(this.buf,e,n)},n.prototype.string=function(){var t=this.bytes();return l.read(t,0,t.length)},n.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw r(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw r(this)}while(128&this.buf[this.pos++]);return this},n.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;;){if(4==(t=7&this.uint32()))break;this.skipType(t)}break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},n.e=function(t){a=t;var e=u.Long?"toLong":"toNumber";u.merge(n.prototype,{int64:function(){return i.call(this)[e](!1)},uint64:function(){return i.call(this)[e](!0)},sint64:function(){return i.call(this).zzDecode()[e](!1)},fixed64:function(){return s.call(this)[e](!0)},sfixed64:function(){return s.call(this)[e](!1)}})}},{39:39}],28:[function(t,e){function r(t){n.call(this,t)}e.exports=r;var n=t(27);(r.prototype=Object.create(n.prototype)).constructor=r;var i=t(39);i.Buffer&&(r.prototype.i=i.Buffer.prototype.slice),r.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len))}},{27:27,39:39}],29:[function(t,r){function n(t){s.call(this,"",t),this.deferred=[],this.files=[]}function i(){}function o(t,r){var n=r.parent.lookup(r.extend);if(n){var i=new l(r.fullName,r.id,r.type,r.rule,e,r.options);return i.declaringField=r,r.extensionField=i,n.add(i),!0}return!1}r.exports=n;var s=t(23);((n.prototype=Object.create(s.prototype)).constructor=n).className="Root";var a,u,f,l=t(16),p=t(15),c=t(25),h=t(37);n.fromJSON=function(t,e){return e||(e=new n),t.options&&e.setOptions(t.options),e.addJSON(t.nested)},n.prototype.resolvePath=h.path.resolve,n.prototype.load=function t(r,n,o){function s(t,e){if(o){var r=o;if(o=null,c)throw t;r(t,e)}}function a(t,e){try{if(h.isString(e)&&"{"===e.charAt(0)&&(e=JSON.parse(e)),h.isString(e)){u.filename=t;var r,i=u(e,p,n),o=0;if(i.imports)for(;o<i.imports.length;++o)(r=p.resolvePath(t,i.imports[o]))&&l(r);if(i.weakImports)for(o=0;o<i.weakImports.length;++o)(r=p.resolvePath(t,i.weakImports[o]))&&l(r,!0)}else p.setOptions(e.options).addJSON(e.nested)}catch(t){s(t)}c||d||s(null,p)}function l(t,e){var r=t.lastIndexOf("google/protobuf/");if(r>-1){var n=t.substring(r);n in f&&(t=n)}if(!(p.files.indexOf(t)>-1)){if(p.files.push(t),t in f)return void(c?a(t,f[t]):(++d,setTimeout(function(){--d,a(t,f[t])})));if(c){var i;try{i=h.fs.readFileSync(t).toString("utf8")}catch(t){return void(e||s(t))}a(t,i)}else++d,h.fetch(t,function(r,n){if(--d,o)return r?void(e?d||s(null,p):s(r)):void a(t,n)})}}"function"==typeof n&&(o=n,n=e);var p=this;if(!o)return h.asPromise(t,p,r,n);var c=o===i,d=0;h.isString(r)&&(r=[r]);for(var y,v=0;v<r.length;++v)(y=p.resolvePath("",r[v]))&&l(y);return c?p:(d||s(null,p),e)},n.prototype.loadSync=function(t,e){if(!h.isNode)throw Error("not supported");return this.load(t,e,i)},n.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(t){return"'extend "+t.extend+"' in "+t.parent.fullName}).join(", "));return s.prototype.resolveAll.call(this)};var d=/^[A-Z]/;n.prototype.g=function(t){if(t instanceof l)t.extend===e||t.extensionField||o(this,t)||this.deferred.push(t);else if(t instanceof p)d.test(t.name)&&(t.parent[t.name]=t.values);else if(!(t instanceof c)){if(t instanceof a)for(var r=0;r<this.deferred.length;)o(this,this.deferred[r])?this.deferred.splice(r,1):++r;for(var n=0;n<t.nestedArray.length;++n)this.g(t.f[n]);d.test(t.name)&&(t.parent[t.name]=t)}},n.prototype.h=function(t){if(t instanceof l){if(t.extend!==e)if(t.extensionField)t.extensionField.parent.remove(t.extensionField),t.extensionField=null;else{var r=this.deferred.indexOf(t);r>-1&&this.deferred.splice(r,1)}}else if(t instanceof p)d.test(t.name)&&delete t.parent[t.name];else if(t instanceof s){for(var n=0;n<t.nestedArray.length;++n)this.h(t.f[n]);d.test(t.name)&&delete t.parent[t.name]}},n.e=function(t,e,r){a=t,u=e,f=r}},{15:15,16:16,23:23,25:25,37:37}],30:[function(t,e){e.exports={}},{}],31:[function(t,e,r){r.Service=t(32)},{32:32}],32:[function(t,r){function n(t,e,r){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");i.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=!!e,this.responseDelimited=!!r}r.exports=n;var i=t(39);(n.prototype=Object.create(i.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function t(r,n,o,s,a){if(!s)throw TypeError("request must be specified");var u=this;if(!a)return i.asPromise(t,u,r,n,o,s);if(!u.rpcImpl)return setTimeout(function(){a(Error("already ended"))},0),e;try{return u.rpcImpl(r,n[u.requestDelimited?"encodeDelimited":"encode"](s).finish(),function(t,n){if(t)return u.emit("error",t,r),a(t);if(null===n)return u.end(!0),e;if(!(n instanceof o))try{n=o[u.responseDelimited?"decodeDelimited":"decode"](n)}catch(t){return u.emit("error",t,r),a(t)}return u.emit("data",n,r),a(null,n)})}catch(t){return u.emit("error",t,r),setTimeout(function(){a(t)},0),e}},n.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{39:39}],33:[function(t,r){function n(t,e){o.call(this,t,e),this.methods={},this.j=null}function i(t){return t.j=null,t}r.exports=n;var o=t(23);((n.prototype=Object.create(o.prototype)).constructor=n).className="Service";var s=t(22),a=t(37),u=t(31);n.fromJSON=function(t,e){var r=new n(t,e.options);if(e.methods)for(var i=Object.keys(e.methods),o=0;o<i.length;++o)r.add(s.fromJSON(i[o],e.methods[i[o]]));return e.nested&&r.addJSON(e.nested),r},n.prototype.toJSON=function(){var t=o.prototype.toJSON.call(this);return a.toObject(["options",t&&t.options||e,"methods",o.arrayToJSON(this.methodsArray)||{},"nested",t&&t.nested||e])},Object.defineProperty(n.prototype,"methodsArray",{get:function(){return this.j||(this.j=a.toArray(this.methods))}}),n.prototype.get=function(t){return this.methods[t]||o.prototype.get.call(this,t)},n.prototype.resolveAll=function(){for(var t=this.methodsArray,e=0;e<t.length;++e)t[e].resolve();return o.prototype.resolve.call(this)},n.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);return t instanceof s?(this.methods[t.name]=t,t.parent=this,i(this)):o.prototype.add.call(this,t)},n.prototype.remove=function(t){if(t instanceof s){if(this.methods[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.methods[t.name],t.parent=null,i(this)}return o.prototype.remove.call(this,t)},n.prototype.create=function(t,e,r){for(var n,i=new u.Service(t,e,r),o=0;o<this.methodsArray.length;++o)i[a.lcFirst((n=this.j[o]).resolve().name)]=a.codegen(["r","c"],a.lcFirst(n.name))("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor});return i}},{22:22,23:23,31:31,37:37}],34:[function(t,r){function n(t){return t.replace(p,function(t,e){switch(e){case"\\":case"":return e;default:return c[e]||""}})}function i(t){function r(t){return Error("illegal "+t+" (line "+w+")")}function i(){var e="'"===S?a:s;e.lastIndex=g-1;var i=e.exec(t);if(!i)throw r("string");return g=e.lastIndex,d(S),S=null,n(i[1])}function p(e){return t.charAt(e)}function c(e,r){O=t.charAt(e++),j=w,x=!1;var n,i=e-3;do{if(--i<0||"\n"===(n=t.charAt(i))){x=!0;break}}while(" "===n||"\t"===n);for(var o=t.substring(e,r).split(f),s=0;s<o.length;++s)o[s]=o[s].replace(u,"").trim();k=o.join("\n").trim()}function h(){if(A.length>0)return A.shift();if(S)return i();var e,n,s,a,u;do{if(g===b)return null;for(e=!1;l.test(s=p(g));)if("\n"===s&&++w,++g===b)return null;if("/"===p(g)){if(++g===b)throw r("comment");if("/"===p(g)){for(u="/"===p(a=g+1);"\n"!==p(++g);)if(g===b)return null;++g,u&&c(a,g-1),++w,e=!0}else{if("*"!==(s=p(g)))return"/";u="*"===p(a=g+1);do{if("\n"===s&&++w,++g===b)throw r("comment");n=s,s=p(g)}while("*"!==n||"/"!==s);++g,u&&c(a,g-2),e=!0}}}while(e);var f=g;if(o.lastIndex=0,!o.test(p(f++)))for(;f<b&&!o.test(p(f));)++f;var h=t.substring(g,g=f);return'"'!==h&&"'"!==h||(S=h),h}function d(t){A.push(t)}function y(){if(!A.length){var t=h();if(null===t)return null;d(t)}return A[0]}function v(t,e){var n=y();if(n===t)return h(),!0;if(!e)throw r("token '"+n+"', '"+t+"' expected");return!1}function m(t){var r=null;return t===e?j!==w-1||"*"!==O&&!x||(r=k):(j<t&&y(),j!==t||x||"/"!==O||(r=k)),r}t=""+t;var g=0,b=t.length,w=1,O=null,k=null,j=0,x=!1,A=[],S=null;return Object.defineProperty({next:h,peek:y,push:d,skip:v,cmnt:m},"line",{get:function(){return w}})}r.exports=i;var o=/[\s{}=;:[\],'"()<>]/g,s=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,a=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,u=/^ *[*\/]+ */,f=/\n/g,l=/\s/,p=/\\(.?)/g,c={0:"\0",r:"\r",n:"\n",t:"\t"};i.unescape=n},{}],35:[function(t,r){function n(t,r){o.call(this,t,r),this.fields={},this.oneofs=e,this.extensions=e,this.reserved=e,this.group=e,this.k=null,this.b=null,this.l=null,this.o=null}function i(t){return t.k=t.b=t.l=null,delete t.encode,delete t.decode,delete t.verify,t}r.exports=n;var o=t(23);((n.prototype=Object.create(o.prototype)).constructor=n).className="Type";var s=t(15),a=t(25),u=t(16),f=t(20),l=t(33),p=t(21),c=t(27),h=t(42),d=t(37),y=t(14),v=t(13),m=t(40),g=t(12),b=t(41);Object.defineProperties(n.prototype,{fieldsById:{get:function(){if(this.k)return this.k;this.k={};for(var t=Object.keys(this.fields),e=0;e<t.length;++e){var r=this.fields[t[e]],n=r.id;if(this.k[n])throw Error("duplicate id "+n+" in "+this);this.k[n]=r}return this.k}},fieldsArray:{get:function(){return this.b||(this.b=d.toArray(this.fields))}},oneofsArray:{get:function(){return this.l||(this.l=d.toArray(this.oneofs))}},ctor:{get:function(){return this.o||(this.ctor=n.generateConstructor(this)())},set:function(t){var e=t.prototype;e instanceof p||((t.prototype=new p).constructor=t,d.merge(t.prototype,e)),t.$type=t.prototype.$type=this,d.merge(t,p,!0),this.o=t;for(var r=0;r<this.fieldsArray.length;++r)this.b[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this.l[r].resolve().name]={get:d.oneOfGetter(this.l[r].oneof),set:d.oneOfSetter(this.l[r].oneof)};r&&Object.defineProperties(t.prototype,n)}}}),n.generateConstructor=function(t){for(var e,r=d.codegen(["p"],t.name),n=0;n<t.fieldsArray.length;++n)(e=t.b[n]).map?r("this%s={}",d.safeProp(e.name)):e.repeated&&r("this%s=[]",d.safeProp(e.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},n.fromJSON=function(t,r){var i=new n(t,r.options);i.extensions=r.extensions,i.reserved=r.reserved;for(var p=Object.keys(r.fields),c=0;c<p.length;++c)i.add((e!==r.fields[p[c]].keyType?f.fromJSON:u.fromJSON)(p[c],r.fields[p[c]]));if(r.oneofs)for(p=Object.keys(r.oneofs),c=0;c<p.length;++c)i.add(a.fromJSON(p[c],r.oneofs[p[c]]));if(r.nested)for(p=Object.keys(r.nested),c=0;c<p.length;++c){var h=r.nested[p[c]];i.add((h.id!==e?u.fromJSON:h.fields!==e?n.fromJSON:h.values!==e?s.fromJSON:h.methods!==e?l.fromJSON:o.fromJSON)(p[c],h))}return r.extensions&&r.extensions.length&&(i.extensions=r.extensions),r.reserved&&r.reserved.length&&(i.reserved=r.reserved),r.group&&(i.group=!0),i},n.prototype.toJSON=function(){var t=o.prototype.toJSON.call(this);return d.toObject(["options",t&&t.options||e,"oneofs",o.arrayToJSON(this.oneofsArray),"fields",o.arrayToJSON(this.fieldsArray.filter(function(t){return!t.declaringField}))||{},"extensions",this.extensions&&this.extensions.length?this.extensions:e,"reserved",this.reserved&&this.reserved.length?this.reserved:e,"group",this.group||e,"nested",t&&t.nested||e])},n.prototype.resolveAll=function(){for(var t=this.fieldsArray,e=0;e<t.length;)t[e++].resolve();var r=this.oneofsArray;for(e=0;e<r.length;)r[e++].resolve();return o.prototype.resolveAll.call(this)},n.prototype.get=function(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null},n.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof u&&t.extend===e){if(this.k?this.k[t.id]:this.fieldsById[t.id])throw Error("duplicate id "+t.id+" in "+this);if(this.isReservedId(t.id))throw Error("id "+t.id+" is reserved in "+this);if(this.isReservedName(t.name))throw Error("name '"+t.name+"' is reserved in "+this);return t.parent&&t.parent.remove(t),this.fields[t.name]=t,t.message=this,t.onAdd(this),i(this)}return t instanceof a?(this.oneofs||(this.oneofs={}),this.oneofs[t.name]=t,t.onAdd(this),i(this)):o.prototype.add.call(this,t)},n.prototype.remove=function(t){if(t instanceof u&&t.extend===e){if(!this.fields||this.fields[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.fields[t.name],t.parent=null,t.onRemove(this),i(this)}if(t instanceof a){if(!this.oneofs||this.oneofs[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.oneofs[t.name],t.parent=null,t.onRemove(this),i(this)}return o.prototype.remove.call(this,t)},n.prototype.isReservedId=function(t){if(this.reserved)for(var e=0;e<this.reserved.length;++e)if("string"!=typeof this.reserved[e]&&this.reserved[e][0]<=t&&this.reserved[e][1]>=t)return!0;return!1},n.prototype.isReservedName=function(t){if(this.reserved)for(var e=0;e<this.reserved.length;++e)if(this.reserved[e]===t)return!0;return!1},n.prototype.create=function(t){return new this.ctor(t)},n.prototype.setup=function(){for(var t=this.fullName,e=[],r=0;r<this.fieldsArray.length;++r)e.push(this.b[r].resolve().resolvedType);this.encode=y(this)({Writer:h,types:e,util:d}),this.decode=v(this)({Reader:c,types:e,util:d}),this.verify=m(this)({types:e,util:d}),this.fromObject=g.fromObject(this)({types:e,util:d}),this.toObject=g.toObject(this)({types:e,util:d});var n=b[t];if(n){var i=Object.create(this);i.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(i),i.toObject=this.toObject,this.toObject=n.toObject.bind(i)}return this},n.prototype.encode=function(t,e){return this.setup().encode(t,e)},n.prototype.encodeDelimited=function(t,e){return this.encode(t,e&&e.len?e.fork():e).ldelim()},n.prototype.decode=function(t,e){return this.setup().decode(t,e)},n.prototype.decodeDelimited=function(t){return t instanceof c||(t=c.create(t)),this.decode(t,t.uint32())},n.prototype.verify=function(t){return this.setup().verify(t)},n.prototype.fromObject=function(t){return this.setup().fromObject(t)},n.prototype.toObject=function(t,e){return this.setup().toObject(t,e)},n.d=function(t){return function(e){d.decorateType(e,t)}}},{12:12,13:13,14:14,15:15,16:16,20:20,21:21,23:23,25:25,27:27,33:33,37:37,40:40,41:41,42:42}],36:[function(t,e,r){function n(t,e){var r=0,n={};for(e|=0;r<t.length;)n[s[r+e]]=t[r++];return n}var i=r,o=t(37),s=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];i.basic=n([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),i.defaults=n([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",o.emptyArray,null]),i.long=n([0,0,0,1,1],7),i.mapKey=n([0,0,0,5,5,0,0,0,1,1,0,2],2),i.packed=n([1,5,0,0,0,5,5,0,0,0,1,1,0])},{37:37}],37:[function(t,r){var n,i,o=r.exports=t(39),s=t(30);o.codegen=t(3),o.fetch=t(5),o.path=t(8),o.fs=o.inquire("fs"),o.toArray=function(t){if(t){for(var e=Object.keys(t),r=Array(e.length),n=0;n<e.length;)r[n]=t[e[n++]];return r}return[]},o.toObject=function(t){for(var r={},n=0;n<t.length;){var i=t[n++],o=t[n++];o!==e&&(r[i]=o)}return r};var a=/\\/g,u=/"/g;o.safeProp=function(t){return'["'+t.replace(a,"\\\\").replace(u,'\\"')+'"]'},o.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.substring(1)};var f=/_([a-z])/g;o.camelCase=function(t){return t.substring(0,1)+t.substring(1).replace(f,function(t,e){return e.toUpperCase()})},o.compareFieldsById=function(t,e){return t.id-e.id},o.decorateType=function(e,r){if(e.$type)return r&&e.$type.name!==r&&(o.decorateRoot.remove(e.$type),e.$type.name=r,o.decorateRoot.add(e.$type)),e.$type;n||(n=t(35));var i=new n(r||e.name);return o.decorateRoot.add(i),i.ctor=e,Object.defineProperty(e,"$type",{value:i,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:i,enumerable:!1}),i};var l=0;o.decorateEnum=function(e){if(e.$type)return e.$type;i||(i=t(15));var r=new i("Enum"+l++,e);return o.decorateRoot.add(r),Object.defineProperty(e,"$type",{value:r,enumerable:!1}),r},Object.defineProperty(o,"decorateRoot",{get:function(){return s.decorated||(s.decorated=new(t(29)))}})},{15:15,29:29,3:3,30:30,35:35,39:39,5:5,8:8}],38:[function(t,e){function r(t,e){this.lo=t>>>0,this.hi=e>>>0}e.exports=r;var n=t(39),i=r.zero=new r(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var o=r.zeroHash="\0\0\0\0\0\0\0\0";r.fromNumber=function(t){if(0===t)return i;var e=t<0;e&&(t=-t);var n=t>>>0,o=(t-n)/4294967296>>>0;return e&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new r(n,o)},r.from=function(t){if("number"==typeof t)return r.fromNumber(t);if(n.isString(t)){if(!n.Long)return r.fromNumber(parseInt(t,10));t=n.Long.fromString(t)}return t.low||t.high?new r(t.low>>>0,t.high>>>0):i},r.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,r=~this.hi>>>0;return e||(r=r+1>>>0),-(e+4294967296*r)}return this.lo+4294967296*this.hi},r.prototype.toLong=function(t){return n.Long?new n.Long(0|this.lo,0|this.hi,!!t):{low:0|this.lo,high:0|this.hi,unsigned:!!t}};var s=String.prototype.charCodeAt;r.fromHash=function(t){return t===o?i:new r((s.call(t,0)|s.call(t,1)<<8|s.call(t,2)<<16|s.call(t,3)<<24)>>>0,(s.call(t,4)|s.call(t,5)<<8|s.call(t,6)<<16|s.call(t,7)<<24)>>>0)},r.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},r.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},r.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},r.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:r<128?9:10}},{39:39}],39:[function(r,n,i){function o(t,r,n){for(var i=Object.keys(r),o=0;o<i.length;++o)t[i[o]]!==e&&n||(t[i[o]]=r[i[o]]);return t}function s(t){function e(t,r){if(!(this instanceof e))return new e(t,r);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:Error().stack||""}),r&&o(this,r)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}var a=i;a.asPromise=r(1),a.base64=r(2),a.EventEmitter=r(4),a.float=r(6),a.inquire=r(7),a.utf8=r(10),a.pool=r(9),a.LongBits=r(38),a.emptyArray=Object.freeze?Object.freeze([]):[],a.emptyObject=Object.freeze?Object.freeze({}):{},a.isNode=!!(t.process&&t.process.versions&&t.process.versions.node),a.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},a.isString=function(t){return"string"==typeof t||t instanceof String},a.isObject=function(t){return t&&"object"==typeof t},a.isset=a.isSet=function(t,e){var r=t[e];return!(null==r||!t.hasOwnProperty(e))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},a.Buffer=function(){try{var t=a.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),a.p=null,a.u=null,a.newBuffer=function(t){return"number"==typeof t?a.Buffer?a.u(t):new a.Array(t):a.Buffer?a.p(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},a.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,a.Long=t.dcodeIO&&t.dcodeIO.Long||a.inquire("long"),a.key2Re=/^true|false|0|1$/,a.key32Re=/^-?(?:0|[1-9][0-9]*)$/,a.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,a.longToHash=function(t){return t?a.LongBits.from(t).toHash():a.LongBits.zeroHash},a.longFromHash=function(t,e){var r=a.LongBits.fromHash(t);return a.Long?a.Long.fromBits(r.lo,r.hi,e):r.toNumber(!!e)},a.merge=o,a.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},a.newError=s,a.ProtocolError=s("ProtocolError"),a.oneOfGetter=function(t){for(var r={},n=0;n<t.length;++n)r[t[n]]=1;return function(){for(var t=Object.keys(this),n=t.length-1;n>-1;--n)if(1===r[t[n]]&&this[t[n]]!==e&&null!==this[t[n]])return t[n]}},a.oneOfSetter=function(t){return function(e){for(var r=0;r<t.length;++r)t[r]!==e&&delete this[t[r]]}},a.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},a.e=function(){var t=a.Buffer;if(!t)return void(a.p=a.u=null);a.p=t.from!==Uint8Array.from&&t.from||function(e,r){return new t(e,r)},a.u=t.allocUnsafe||function(e){return new t(e)}}},{1:1,10:10,2:2,38:38,4:4,6:6,7:7,9:9}],40:[function(t,e){function r(t,e){return t.name+": "+e+(t.repeated&&"array"!==e?"[]":t.map&&"object"!==e?"{k:"+t.keyType+"}":"")+" expected"}function n(t,e,n,i){if(e.resolvedType)if(e.resolvedType instanceof s){t("switch(%s){",i)("default:")("return%j",r(e,"enum value"));for(var o=Object.keys(e.resolvedType.values),a=0;a<o.length;++a)t("case %i:",e.resolvedType.values[o[a]]);t("break")("}")}else t((t.hasErrorVar?"":"var ")+"e=types[%i].verify(%s);",n,i)("if(e)")("return%j+e",e.name+"."),t.hasErrorVar=!0;else switch(e.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",i)("return%j",r(e,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",r(e,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',i)("return%j",r(e,"number"));break;case"bool":t('if(typeof %s!=="boolean")',i)("return%j",r(e,"boolean"));break;case"string":t("if(!util.isString(%s))",i)("return%j",r(e,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",r(e,"buffer"))}return t}function i(t,e,n){switch(e.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",n)("return%j",r(e,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",n)("return%j",r(e,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",n)("return%j",r(e,"boolean key"))}return t}function o(t){var e=a.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),o=t.oneofsArray,s={};o.length&&e("var p={}");for(var u=0;u<t.fieldsArray.length;++u){var f=t.b[u].resolve(),l="m"+a.safeProp(f.name);if(f.optional&&e("if(%s!=null&&m.hasOwnProperty(%j)){",l,f.name),f.map)e("if(!util.isObject(%s))",l)("return%j",r(f,"object"))("var k=Object.keys(%s)",l)("for(var i=0;i<k.length;++i){"),i(e,f,"k[i]"),n(e,f,u,l+"[k[i]]")("}");else if(f.repeated)e("if(!Array.isArray(%s))",l)("return%j",r(f,"array"))("for(var i=0;i<%s.length;++i){",l),n(e,f,u,l+"[i]")("}");else{if(f.partOf){var p=a.safeProp(f.partOf.name);1===s[f.partOf.name]&&e("if(p%s===1)",p)("return%j",f.partOf.name+": multiple values"),s[f.partOf.name]=1,e("p%s=1",p)}n(e,f,u,l)}f.optional&&e("}")}return e("return null")}e.exports=o;var s=t(15),a=t(37)},{15:15,37:37}],41:[function(t,e,r){var n=r,i=t(21);n[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var e=this.lookup(t["@type"]);if(e)return this.create({type_url:t["@type"],value:e.encode(t).finish()})}return this.fromObject(t)},toObject:function(t,e){if(e&&e.json&&t.type_url&&t.value){var r=this.lookup(t.type_url);r&&(t=r.decode(t.value))}if(!(t instanceof this.ctor)&&t instanceof i){var n=t.$type.toObject(t,e);return n["@type"]=t.$type.fullName,n}return this.toObject(t,e)}}},{21:21}],42:[function(t,r){function n(t,r,n){this.fn=t,this.len=r,this.next=e,this.val=n}function i(){}function o(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function s(){this.len=0,this.head=new n(i,0,0),this.tail=this.head,this.states=null}function a(t,e,r){e[r]=255&t}function u(t,e,r){for(;t>127;)e[r++]=127&t|128,t>>>=7;e[r]=t}function f(t,r){this.len=t,this.next=e,this.val=r}function l(t,e,r){for(;t.hi;)e[r++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=127&t.lo|128,t.lo=t.lo>>>7;e[r++]=t.lo}function p(t,e,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}r.exports=s;var c,h=t(39),d=h.LongBits,y=h.base64,v=h.utf8;s.create=h.Buffer?function(){return(s.create=function(){return new c})()}:function(){return new s},s.alloc=function(t){return new h.Array(t)},h.Array!==Array&&(s.alloc=h.pool(s.alloc,h.Array.prototype.subarray)),s.prototype.v=function(t,e,r){return this.tail=this.tail.next=new n(t,e,r),this.len+=e,this},f.prototype=Object.create(n.prototype),f.prototype.fn=u,s.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new f((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},s.prototype.int32=function(t){return t<0?this.v(l,10,d.fromNumber(t)):this.uint32(t)},s.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},s.prototype.uint64=function(t){var e=d.from(t);return this.v(l,e.length(),e)},s.prototype.int64=s.prototype.uint64,s.prototype.sint64=function(t){var e=d.from(t).zzEncode();return this.v(l,e.length(),e)},s.prototype.bool=function(t){return this.v(a,1,t?1:0)},s.prototype.fixed32=function(t){return this.v(p,4,t>>>0)},s.prototype.sfixed32=s.prototype.fixed32,s.prototype.fixed64=function(t){var e=d.from(t);return this.v(p,4,e.lo).v(p,4,e.hi)},s.prototype.sfixed64=s.prototype.fixed64,s.prototype.float=function(t){return this.v(h.float.writeFloatLE,4,t)},s.prototype.double=function(t){return this.v(h.float.writeDoubleLE,8,t)};var m=h.Array.prototype.set?function(t,e,r){e.set(t,r)}:function(t,e,r){for(var n=0;n<t.length;++n)e[r+n]=t[n]};s.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this.v(a,1,0);if(h.isString(t)){var r=s.alloc(e=y.length(t));y.decode(t,r,0),t=r}return this.uint32(e).v(m,e,t)},s.prototype.string=function(t){var e=v.length(t);return e?this.uint32(e).v(v.write,e,t):this.v(a,1,0)},s.prototype.fork=function(){return this.states=new o(this),this.head=this.tail=new n(i,0,0),this.len=0,this},s.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new n(i,0,0),this.len=0),this},s.prototype.ldelim=function(){var t=this.head,e=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=t.next,this.tail=e,this.len+=r),this},s.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),r=0;t;)t.fn(t.val,e,r),r+=t.len,t=t.next;return e},s.e=function(t){c=t}},{39:39}],43:[function(t,e){function r(){i.call(this)}function n(t,e,r){t.length<40?o.utf8.write(t,e,r):e.utf8Write(t,r)}e.exports=r;var i=t(42);(r.prototype=Object.create(i.prototype)).constructor=r;var o=t(39),s=o.Buffer;r.alloc=function(t){return(r.alloc=o.u)(t)};var a=s&&s.prototype instanceof Uint8Array&&"set"===s.prototype.set.name?function(t,e,r){e.set(t,r)}:function(t,e,r){if(t.copy)t.copy(e,r,0,t.length);else for(var n=0;n<t.length;)e[r++]=t[n++]};r.prototype.bytes=function(t){o.isString(t)&&(t=o.p(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this.v(a,e,t),this},r.prototype.string=function(t){var e=s.byteLength(t);return this.uint32(e),e&&this.v(n,e,t),this}},{39:39,42:42}]},{},[19])}("object"==typeof window&&window||"object"==typeof self&&self||this);
//# sourceMappingURL=protobuf.min.js.map



//////////////////////asdf


function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(r,e)})(e)}function _construct(e,t,r){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&_setPrototypeOf(a,r.prototype),a}).apply(null,arguments)}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _get5(e,t,r){return(_get5="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=_superPropBase(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function asyncGeneratorStep(e,t,r,n,a,i,o){try{var s=e[i](o),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){asyncGeneratorStep(i,n,a,o,s,"next",e)}function s(e){asyncGeneratorStep(i,n,a,o,s,"throw",e)}o(void 0)}))}}function _createForOfIteratorHelper(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var WebcryptoSocket=function(e,t,r,n){"use strict";function a(e){return e&&"object"===_typeof(e)&&"default"in e?e:{default:e}}var i=a(r),o=a(n);function s(e){return"undefined"!=typeof Buffer&&Buffer.isBuffer(e)?new Uint8Array(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var u=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"ToString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=s(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);default:throw new Error("Unknown type of encoding '".concat(t,"'"))}}},{key:"FromString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);default:throw new Error("Unknown type of encoding '".concat(t,"'"))}}},{key:"ToBase64",value:function(e){var t=s(e);if("undefined"!=typeof btoa){var r=this.ToString(t,"binary");return btoa(r)}return Buffer.from(t).toString("base64")}},{key:"FromBase64",value:function(e){return e=e.replace(/\n/g,"").replace(/\r/g,"").replace(/\t/g,"").replace(/\s/g,""),"undefined"!=typeof atob?this.FromBinary(atob(e)):new Uint8Array(Buffer.from(e,"base64")).buffer}},{key:"FromBase64Url",value:function(e){return this.FromBase64(this.Base64Padding(e.replace(/\-/g,"+").replace(/\_/g,"/")))}},{key:"ToBase64Url",value:function(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}},{key:"FromUtf8String",value:function(e){for(var t=unescape(encodeURIComponent(e)),r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r.buffer}},{key:"ToUtf8String",value:function(e){var t=s(e),r=String.fromCharCode.apply(null,t);return decodeURIComponent(escape(r))}},{key:"FromBinary",value:function(e){for(var t=e.length,r=new Uint8Array(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r.buffer}},{key:"ToBinary",value:function(e){for(var t=s(e),r="",n=t.length,a=0;a<n;a++)r+=String.fromCharCode(t[a]);return r}},{key:"ToHex",value:function(e){for(var t=s(e),r=[],n=t.length,a=0;a<n;a++){var i=t[a].toString(16);r.push(1===i.length?"0"+i:i)}return r.join("")}},{key:"FromHex",value:function(e){for(var t=new Uint8Array(e.length/2),r=0;r<e.length;r+=2){var n=e.slice(r,r+2);t[r/2]=parseInt(n,16)}return t.buffer}},{key:"Base64Padding",value:function(e){var t=4-e.length%4;if(t<4)for(var r=0;r<t;r++)e+="=";return e}}]),e}(),c=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"toArrayBuffer",value:function(e){var t=this.toUint8Array(e);return t.byteOffset||t.length?t.buffer.slice(t.byteOffset,t.byteOffset+t.length):t.buffer}},{key:"toUint8Array",value:function(e){if("undefined"!=typeof Buffer&&Buffer.isBuffer(e))return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}},{key:"isBufferSource",value:function(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e&&e.buffer instanceof ArrayBuffer}}]),e}();function l(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var a=arguments[0],i=1;i<arguments.length;i++){var o=arguments[i];for(var s in o)a[s]=o[s]}return a}function f(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.map((function(e){return e.byteLength})).reduce((function(e,t){return e+t})),a=new Uint8Array(n),i=0;return t.map((function(e){return new Uint8Array(e)})).forEach((function(e){var t,r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;a[i++]=n}}catch(e){r.e(e)}finally{r.f()}})),a.buffer}function h(e,t){if(!e||!t)return!1;if(e.byteLength!==t.byteLength)return!1;for(var r=new Uint8Array(e),n=new Uint8Array(t),a=0;a<e.byteLength;a++)if(r[a]!==n[a])return!1;return!0}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */function p(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}var y=function(){function e(){_classCallCheck(this,e)}var t,r;return _createClass(e,null,[{key:"set",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Uint8Array(t));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"get",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Uint8Array(t).buffer);case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}();function v(e){return function(r){var n=r;n.localName=e.name||n.name||n.toString().match(/^function\s*([^\s(]+)/)[1],n.items=n.items||{},n.target=r,n.items=l({},n.items);var a=new t.Type(n.localName);for(var i in n.items){var o=n.items[i],s=void 0;o.repeated?s="repeated":o.required&&(s="required"),a.add(new t.Field(o.name,o.id,o.type,s))}n.protobuf=a}}function g(e){return function(t,r){var n=t.constructor,a=r;n.items=n.items||{},n.target!==n&&(n.items=l({},n.items),n.target=n),n.items[a]={id:e.id,type:e.type||"bytes",defaultValue:e.defaultValue,converter:e.converter||null,parser:e.parser||null},e.name=e.name||a,n.items[a].name=e.name,n.items[a].required=e.required||!1,n.items[a].repeated=e.repeated||!1,function(e,t,r){var n="_".concat(t),a={set:function(e){this[n]!==e&&(this.raw=null,this[n]=e)},get:function(){if(void 0===this[n]){var e=r.defaultValue;r.parser&&!r.repeated&&(e=new r.parser),this[n]=e}return this[n]},enumerable:!0};Object.defineProperty(e,n,{writable:!0,enumerable:!1}),Object.defineProperty(e,t,a)}(t,a,n.items[a])}}var d=function(){function e(){_classCallCheck(this,e)}var t,r,n,a,i;return _createClass(e,[{key:"isEmpty",value:function(){return void 0===this.raw}},{key:"hasChanged",value:function(){if(null===this.raw)return!0;var e=this.constructor,t=this;for(var r in e.items){var n=e.items[r];if(n.repeated){if(n.parser)return t[r].some((function(e){return e.hasChanged()}))}else if(n.parser&&t[r]&&t[r].hasChanged())return!0}return!1}},{key:"importProto",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function t(r){var n,a,i,o,s,u,c,l,f,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.constructor,a=this,!(r instanceof e)){t.next=8;break}return t.next=5,r.exportProto();case 5:o=t.sent,t.next=9;break;case 8:o=r;case 9:t.prev=9,i=n.protobuf.decode(new Uint8Array(o)),t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(9),new Error("Error: Cannot decode message for ".concat(n.localName,".\n$ProtobufError: ").concat(t.t0.message));case 16:t.t1=regeneratorRuntime.keys(n.items);case 17:if((t.t2=t.t1()).done){t.next=52;break}s=t.t2.value,u=n.items[s],c=i[u.name],ArrayBuffer.isView(c)&&(c=new Uint8Array(c)),Array.isArray(c)||(u.repeated?a[s]=c=[]:c=[c]),u.repeated&&!a[s]&&(a[s]=[]),l=_createForOfIteratorHelper(c),t.prev=25,l.s();case 27:if((f=l.n()).done){t.next=42;break}if(h=f.value,!u.repeated){t.next=37;break}return t.t3=a[s],t.next=33,this.importItem(u,h);case 33:t.t4=t.sent,t.t3.push.call(t.t3,t.t4),t.next=40;break;case 37:return t.next=39,this.importItem(u,h);case 39:a[s]=t.sent;case 40:t.next=27;break;case 42:t.next=47;break;case 44:t.prev=44,t.t5=t.catch(25),l.e(t.t5);case 47:return t.prev=47,l.f(),t.finish(47);case 50:t.next=17;break;case 52:this.raw=o;case 53:case"end":return t.stop()}}),t,this,[[9,13],[25,44,47,50]])}))),function(e){return i.apply(this,arguments)})},{key:"exportProto",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r,n,a,i,o,s,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasChanged()){e.next=2;break}return e.abrupt("return",this.raw);case 2:t=this.constructor,r=this,n={},e.t0=regeneratorRuntime.keys(t.items);case 6:if((e.t1=e.t0()).done){e.next=32;break}a=e.t1.value,i=t.items[a],o=r[a],Array.isArray(o)||(o=void 0===o?[]:[o]),s=_createForOfIteratorHelper(o),e.prev=12,s.s();case 14:if((u=s.n()).done){e.next=22;break}return c=u.value,e.next=18,this.exportItem(i,c);case 18:l=e.sent,i.repeated?(n[i.name]||(n[i.name]=[]),n[i.name].push(l)):n[i.name]=l;case 20:e.next=14;break;case 22:e.next=27;break;case 24:e.prev=24,e.t2=e.catch(12),s.e(e.t2);case 27:return e.prev=27,s.f(),e.finish(27);case 30:e.next=6;break;case 32:return this.raw=new Uint8Array(t.protobuf.encode(n).finish()).buffer,e.abrupt("return",this.raw);case 34:case"end":return e.stop()}}),e,this,[[12,24,27,30]])}))),function(){return a.apply(this,arguments)})},{key:"exportItem",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r){var n,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.constructor,!t.parser){e.next=11;break}return i=r,e.next=5,i.exportProto();case 5:if(o=e.sent,!t.required||o){e.next=8;break}throw new Error("Error: Paramter '".concat(t.name,"' is required in '").concat(n.localName,"' protobuf message."));case 8:o&&(a=new Uint8Array(o)),e.next=22;break;case 11:if(!t.required||void 0!==r){e.next=13;break}throw new Error("Error: Paramter '".concat(t.name,"' is required in '").concat(n.localName,"' protobuf message."));case 13:if(!t.converter){e.next=20;break}if(!r){e.next=18;break}return e.next=17,t.converter.set(r);case 17:a=e.sent;case 18:e.next=22;break;case 20:r instanceof ArrayBuffer&&(r=new Uint8Array(r)),a=r;case 22:return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"importItem",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r){var n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.constructor,!t.parser){e.next=13;break}if(i=t.parser,!r||!r.byteLength){e.next=9;break}return e.next=6,i.importProto(new Uint8Array(r).buffer);case 6:a=e.sent,e.next=11;break;case 9:if(!t.required){e.next=11;break}throw new Error("Error: Parameter '".concat(t.name,"' is required in '").concat(n.localName,"' protobuf message."));case 11:e.next=25;break;case 13:if(!t.converter){e.next=24;break}if(!r||!r.byteLength){e.next=20;break}return e.next=17,t.converter.get(r);case 17:a=e.sent,e.next=22;break;case 20:if(!t.required){e.next=22;break}throw new Error("Error: Parameter '".concat(t.name,"' is required in '").concat(n.localName,"' protobuf message."));case 22:e.next=25;break;case 24:a=r;case 25:return e.abrupt("return",a);case 26:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})}],[{key:"importProto",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new this,e.next=3,r.importProto(t);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();function m(){}function k(){k.init.call(this)}function b(e){return void 0===e._maxListeners?k.defaultMaxListeners:e._maxListeners}function w(e,t,r){if(t)e.call(r);else for(var n=e.length,a=E(e,n),i=0;i<n;++i)a[i].call(r)}function _(e,t,r,n){if(t)e.call(r,n);else for(var a=e.length,i=E(e,a),o=0;o<a;++o)i[o].call(r,n)}function x(e,t,r,n,a){if(t)e.call(r,n,a);else for(var i=e.length,o=E(e,i),s=0;s<i;++s)o[s].call(r,n,a)}function C(e,t,r,n,a,i){if(t)e.call(r,n,a,i);else for(var o=e.length,s=E(e,o),u=0;u<o;++u)s[u].call(r,n,a,i)}function B(e,t,r,n){if(t)e.apply(r,n);else for(var a=e.length,i=E(e,a),o=0;o<a;++o)i[o].apply(r,n)}function S(e,t,r,n){var a,i,o,s;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((i=e._events)?(i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),o=i[t]):(i=e._events=new m,e._eventsCount=0),o){if("function"==typeof o?o=i[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),!o.warned&&(a=b(e))&&a>0&&o.length>a){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,s=u,"function"==typeof console.warn?console.warn(s):console.log(s)}}else o=i[t]=r,++e._eventsCount;return e}function A(e,t,r){var n=!1;function a(){e.removeListener(t,a),n||(n=!0,r.apply(e,arguments))}return a.listener=r,a}function N(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function E(e,t){for(var r=new Array(t);t--;)r[t]=e[t];return r}m.prototype=Object.create(null),k.EventEmitter=k,k.usingDomains=!1,k.prototype.domain=void 0,k.prototype._events=void 0,k.prototype._maxListeners=void 0,k.defaultMaxListeners=10,k.init=function(){this.domain=null,k.usingDomains&&undefined.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new m,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},k.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},k.prototype.getMaxListeners=function(){return b(this)},k.prototype.emit=function(e){var t,r,n,a,i,o,s,u="error"===e;if(o=this._events)u=u&&null==o.error;else if(!u)return!1;if(s=this.domain,u){if(t=arguments[1],!s){if(t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=s,t.domainThrown=!1,s.emit("error",t),!1}if(!(r=o[e]))return!1;var l="function"==typeof r;switch(n=arguments.length){case 1:w(r,l,this);break;case 2:_(r,l,this,arguments[1]);break;case 3:x(r,l,this,arguments[1],arguments[2]);break;case 4:C(r,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(a=new Array(n-1),i=1;i<n;i++)a[i-1]=arguments[i];B(r,l,this,a)}return!0},k.prototype.addListener=function(e,t){return S(this,e,t,!1)},k.prototype.on=k.prototype.addListener,k.prototype.prependListener=function(e,t){return S(this,e,t,!0)},k.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,A(this,e,t)),this},k.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,A(this,e,t)),this},k.prototype.removeListener=function(e,t){var r,n,a,i,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[e]))return this;if(r===t||r.listener&&r.listener===t)0==--this._eventsCount?this._events=new m:(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(a=-1,i=r.length;i-- >0;)if(r[i]===t||r[i].listener&&r[i].listener===t){o=r[i].listener,a=i;break}if(a<0)return this;if(1===r.length){if(r[0]=void 0,0==--this._eventsCount)return this._events=new m,this;delete n[e]}else!function(e,t){for(var r=t,n=r+1,a=e.length;n<a;r+=1,n+=1)e[r]=e[n];e.pop()}(r,a);n.removeListener&&this.emit("removeListener",e,o||t)}return this},k.prototype.removeAllListeners=function(e){var t,r;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=new m,this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=new m:delete r[e]),this;if(0===arguments.length){for(var n,a=Object.keys(r),i=0;i<a.length;++i)"removeListener"!==(n=a[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new m,this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},k.prototype.listeners=function(e){var t,r=this._events;return r&&(t=r[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(t):[]},k.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):N.call(e,t)},k.prototype.listenerCount=N,k.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var I="ECDSA",T="ECDH",R="AES-CBC",O="SHA-256",D="HMAC",U=u.FromBinary("InfoText"),K=u.FromBinary("InfoRatchet"),H=u.FromBinary("InfoMessageKeys"),P=null;function L(){if(!P)throw new Error("WebCrypto engine is empty. Use setEngine to resolve it.");return P}"undefined"!=typeof self&&(P={crypto:self.crypto,name:"WebCrypto"});var X=function(){var e=function(){function e(){_classCallCheck(this,e)}var t,r,n,a;return _createClass(e,null,[{key:"generateKeyPair",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r){var n,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,a="ECDSA"===t?["sign","verify"]:["deriveKey","deriveBits"],e.next=4,L().crypto.subtle.generateKey({name:n,namedCurve:this.NAMED_CURVE},r,a);case 4:return i=e.sent,e.next=7,q.create(i.publicKey);case 7:return o=e.sent,s={privateKey:i.privateKey,publicKey:o},e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"deriveBytes",value:function(e,t){return L().crypto.subtle.deriveBits({name:"ECDH",public:t.key},e,256)}},{key:"verify",value:function(e,t,r){return L().crypto.subtle.verify({name:"ECDSA",hash:this.DIGEST_ALGORITHM},e.key,r,t)}},{key:"sign",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L().crypto.subtle.sign({name:"ECDSA",hash:this.DIGEST_ALGORITHM},t,r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"ecKeyPairToJson",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t.privateKey,e.t1=t.publicKey.key,e.next=4,t.publicKey.thumbprint();case 4:return e.t2=e.sent,e.abrupt("return",{privateKey:e.t0,publicKey:e.t1,thumbprint:e.t2});case 6:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"ecKeyPairFromJson",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t.privateKey,e.next=3,q.create(t.publicKey);case 3:return e.t1=e.sent,e.abrupt("return",{privateKey:e.t0,publicKey:e.t1});case 5:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}();return e.NAMED_CURVE="P-256",e.DIGEST_ALGORITHM="SHA-512",e}(),G={name:"AES-CBC",length:256},F=function(){function e(){_classCallCheck(this,e)}var t,r;return _createClass(e,null,[{key:"randomBytes",value:function(e){var t=new Uint8Array(e);return L().crypto.getRandomValues(t),t.buffer}},{key:"digest",value:function(e,t){return L().crypto.subtle.digest(e,t)}},{key:"encrypt",value:function(e,t,r){return L().crypto.subtle.encrypt({name:R,iv:new Uint8Array(r)},e,t)}},{key:"decrypt",value:function(e,t,r){return L().crypto.subtle.decrypt({name:R,iv:new Uint8Array(r)},e,t)}},{key:"importHMAC",value:function(e){return L().crypto.subtle.importKey("raw",e,{name:D,hash:{name:O}},!1,["sign","verify"])}},{key:"importAES",value:function(e){return L().crypto.subtle.importKey("raw",e,G,!1,["encrypt","decrypt"])}},{key:"sign",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L().crypto.subtle.sign({name:D,hash:O},t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})},{key:"HKDF",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n,a,i,o,s,u,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:1,n=c.length>2?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:new ArrayBuffer(0),n){e.next=7;break}return e.next=6,this.importHMAC(new Uint8Array(32).buffer);case 6:n=e.sent;case 7:return e.next=9,this.sign(n,t);case 9:return i=e.sent,new ArrayBuffer(32+a.byteLength+1),e.next=13,this.importHMAC(i);case 13:o=e.sent,s=[new ArrayBuffer(0)],u=0;case 16:if(!(u<r)){e.next=23;break}return e.next=19,this.sign(o,f(s[u],a,new Uint8Array([u+1]).buffer));case 19:s[u+1]=e.sent;case 20:u++,e.next=16;break;case 23:return e.abrupt("return",s.slice(1));case 24:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),q=function(){function e(){_classCallCheck(this,e)}var t,r,n,a;return _createClass(e,[{key:"serialize",value:function(){return this.serialized}},{key:"thumbprint",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.serialize();case 2:return t=e.sent,e.next=5,F.digest("SHA-256",t);case 5:return r=e.sent,e.abrupt("return",u.ToHex(r));case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"isEqual",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r&&r instanceof e){t.next=2;break}return t.abrupt("return",!1);case 2:return t.abrupt("return",h(this.serialized,r.serialized));case 3:case"end":return t.stop()}}),t,this)}))),function(e){return n.apply(this,arguments)})}],[{key:"create",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new this,"ECDH"===(n=t.algorithm.name.toUpperCase())||"ECDSA"===n){e.next=4;break}throw new Error("Error: Unsupported asymmetric key algorithm.");case 4:if("public"===t.type){e.next=6;break}throw new Error("Error: Expected key type to be public but it was not.");case 6:return r.key=t,e.next=9,L().crypto.subtle.exportKey("jwk",t);case 9:if((a=e.sent).x&&a.y){e.next=12;break}throw new Error("Wrong JWK data for EC public key. Parameters x and y are required.");case 12:return i=u.FromBase64Url(a.x),o=u.FromBase64Url(a.y),s=u.ToBinary(i)+u.ToBinary(o),r.serialized=u.FromBinary(s),e.next=18,r.thumbprint();case 18:return r.id=e.sent,e.abrupt("return",r);case 20:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"importKey",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function t(r,n){var a,i,o,s,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.ToBase64Url(r.slice(0,32)),i=u.ToBase64Url(r.slice(32)),o={crv:X.NAMED_CURVE,kty:"EC",x:a,y:i},s="ECDSA"===n?["verify"]:[],t.next=6,L().crypto.subtle.importKey("jwk",o,{name:n,namedCurve:X.NAMED_CURVE},!0,s);case 6:return c=t.sent,t.next=9,e.create(c);case 9:return l=t.sent,t.abrupt("return",l);case 11:case"end":return t.stop()}}),t)}))),function(e,r){return t.apply(this,arguments)})}]),e}(),j=function(){function e(t,r,n){_classCallCheck(this,e),this.id=t,this.signingKey=r,this.exchangeKey=n,this.preKeys=[],this.signedPreKeys=[]}var t,r,n,a;return _createClass(e,[{key:"toJSON",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r,n,a,i,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=[],n=_createForOfIteratorHelper(this.preKeys),e.prev=3,n.s();case 5:if((a=n.n()).done){e.next=14;break}return i=a.value,e.t0=t,e.next=10,X.ecKeyPairToJson(i);case 10:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 12:e.next=5;break;case 14:e.next=19;break;case 16:e.prev=16,e.t2=e.catch(3),n.e(e.t2);case 19:return e.prev=19,n.f(),e.finish(19);case 22:o=_createForOfIteratorHelper(this.signedPreKeys),e.prev=23,o.s();case 25:if((s=o.n()).done){e.next=34;break}return u=s.value,e.t3=r,e.next=30,X.ecKeyPairToJson(u);case 30:e.t4=e.sent,e.t3.push.call(e.t3,e.t4);case 32:e.next=25;break;case 34:e.next=39;break;case 36:e.prev=36,e.t5=e.catch(23),o.e(e.t5);case 39:return e.prev=39,o.f(),e.finish(39);case 42:return e.t6=this.createdAt.toISOString(),e.next=45,X.ecKeyPairToJson(this.exchangeKey);case 45:return e.t7=e.sent,e.t8=this.id,e.t9=t,e.t10=r,e.next=51,X.ecKeyPairToJson(this.signingKey);case 51:return e.t11=e.sent,e.abrupt("return",{createdAt:e.t6,exchangeKey:e.t7,id:e.t8,preKeys:e.t9,signedPreKeys:e.t10,signingKey:e.t11});case 53:case"end":return e.stop()}}),e,this,[[3,16,19,22],[23,36,39,42]])}))),function(){return a.apply(this,arguments)})},{key:"fromJSON",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.id=t.id,e.next=3,X.ecKeyPairFromJson(t.signingKey);case 3:return this.signingKey=e.sent,e.next=6,X.ecKeyPairFromJson(t.exchangeKey);case 6:this.exchangeKey=e.sent,this.preKeys=[],r=_createForOfIteratorHelper(t.preKeys),e.prev=9,r.s();case 11:if((n=r.n()).done){e.next=20;break}return a=n.value,e.t0=this.preKeys,e.next=16,X.ecKeyPairFromJson(a);case 16:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 18:e.next=11;break;case 20:e.next=25;break;case 22:e.prev=22,e.t2=e.catch(9),r.e(e.t2);case 25:return e.prev=25,r.f(),e.finish(25);case 28:this.signedPreKeys=[],i=_createForOfIteratorHelper(t.signedPreKeys),e.prev=30,i.s();case 32:if((o=i.n()).done){e.next=41;break}return s=o.value,e.t3=this.signedPreKeys,e.next=37,X.ecKeyPairFromJson(s);case 37:e.t4=e.sent,e.t3.push.call(e.t3,e.t4);case 39:e.next=32;break;case 41:e.next=46;break;case 43:e.prev=43,e.t5=e.catch(30),i.e(e.t5);case 46:return e.prev=46,i.f(),e.finish(46);case 49:case"end":return e.stop()}}),e,this,[[9,22,25,28],[30,43,46,49]])}))),function(e){return n.apply(this,arguments)})}],[{key:"fromJSON",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.ecKeyPairFromJson(t.signingKey);case 2:return r=e.sent,e.next=5,X.ecKeyPairFromJson(t.exchangeKey);case 5:return n=e.sent,(a=new this(t.id,r,n)).createdAt=new Date(t.createdAt),e.next=10,a.fromJSON(t);case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"create",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function t(r){var n,a,i,o,s,u,c,l,f=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:0,a=f.length>2&&void 0!==f[2]?f[2]:0,i=f.length>3&&void 0!==f[3]&&f[3],t.next=5,X.generateKeyPair(I,i);case 5:return o=t.sent,t.next=8,X.generateKeyPair(T,i);case 8:s=t.sent,(u=new e(r,o,s)).createdAt=new Date,c=0;case 12:if(!(c<a)){t.next=21;break}return t.t0=u.preKeys,t.next=16,X.generateKeyPair("ECDH",i);case 16:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 18:c++,t.next=12;break;case 21:l=0;case 22:if(!(l<n)){t.next=31;break}return t.t2=u.signedPreKeys,t.next=26,X.generateKeyPair("ECDH",i);case 26:t.t3=t.sent,t.t2.push.call(t.t2,t.t3);case 28:l++,t.next=22;break;case 31:return t.abrupt("return",u);case 32:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})}]),e}(),V=function(){function e(){_classCallCheck(this,e)}var t,r,n;return _createClass(e,[{key:"fill",value:function(e){this.signingKey=e.signingKey,this.exchangeKey=e.exchangeKey,this.signature=e.signature,this.createdAt=e.createdAt}},{key:"verify",value:function(){return X.verify(this.signingKey,this.exchangeKey.serialize(),this.signature)}},{key:"toJSON",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.createdAt.toISOString(),e.next=3,this.exchangeKey.key;case 3:return e.t1=e.sent,e.t2=this.id,e.t3=this.signature,e.next=8,this.signingKey.key;case 8:return e.t4=e.sent,e.next=11,this.signingKey.thumbprint();case 11:return e.t5=e.sent,e.abrupt("return",{createdAt:e.t0,exchangeKey:e.t1,id:e.t2,signature:e.t3,signingKey:e.t4,thumbprint:e.t5});case 13:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"fromJSON",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.id=t.id,this.signature=t.signature,e.next=4,q.create(t.signingKey);case 4:return this.signingKey=e.sent,e.next=7,q.create(t.exchangeKey);case 7:return this.exchangeKey=e.sent,this.createdAt=new Date(t.createdAt),e.next=11,this.verify();case 11:if(e.sent){e.next=14;break}throw new Error("Error: Wrong signature for RemoteIdentity");case 14:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}],[{key:"fill",value:function(t){var r=new e;return r.fill(t),r}},{key:"fromJSON",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new this,e.next=3,r.fromJSON(t);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),J=function(){var e=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(d);return p([g({id:0,type:"uint32",defaultValue:1})],e.prototype,"version",void 0),e=p([v({name:"Base"})],e)}(),M=function(){function e(){_classCallCheck(this,e)}var t,r;return _createClass(e,null,[{key:"set",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Uint8Array(t.serialize()));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"get",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",q.importKey(t.buffer,"ECDSA"));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}(),z=function(){function e(){_classCallCheck(this,e)}var t,r;return _createClass(e,null,[{key:"set",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Uint8Array(t.serialize()));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"get",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",q.importKey(t.buffer,"ECDH"));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}(),W=function(){function e(){_classCallCheck(this,e)}var t,r;return _createClass(e,null,[{key:"set",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Uint8Array(u.FromString(t.toISOString())));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"get",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Date(u.ToString(t)));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}(),Z=function(){var e,t=e=function(t){_inherits(s,t);var r,n,a,i,o=_createSuper(s);function s(){return _classCallCheck(this,s),o.apply(this,arguments)}return _createClass(s,[{key:"sign",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.sign(t,this.exchangeKey.serialize());case 2:this.signature=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"verify",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.verify(this.signingKey,this.exchangeKey.serialize(),this.signature);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"fill",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.signingKey=t.signingKey.publicKey,this.exchangeKey=t.exchangeKey.publicKey,this.createdAt=t.createdAt,e.next=5,this.sign(t.signingKey.privateKey);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}],[{key:"fill",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new e,t.next=3,n.fill(r);case 3:return t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)}))),function(e){return r.apply(this,arguments)})}]),s}(J);return p([g({id:1,converter:M})],t.prototype,"signingKey",void 0),p([g({id:2,converter:z})],t.prototype,"exchangeKey",void 0),p([g({id:3})],t.prototype,"signature",void 0),p([g({id:4,converter:W})],t.prototype,"createdAt",void 0),t=e=p([v({name:"Identity"})],t)}(),Y=function(){var e=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(J);return p([g({id:1,converter:z,required:!0})],e.prototype,"senderRatchetKey",void 0),p([g({id:2,type:"uint32",required:!0})],e.prototype,"counter",void 0),p([g({id:3,type:"uint32",required:!0})],e.prototype,"previousCounter",void 0),p([g({id:4,converter:y,required:!0})],e.prototype,"cipherText",void 0),e=p([v({name:"Message"})],e)}(),$=function(){var e=function(e){_inherits(o,e);var t,r,n,a,i=_createSuper(o);function o(){return _classCallCheck(this,o),i.apply(this,arguments)}return _createClass(o,[{key:"sign",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signHMAC(t);case 2:this.signature=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"verify",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signHMAC(t);case 2:return r=e.sent,e.abrupt("return",h(r,this.signature));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getSignedRaw",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.receiverKey.serialize(),r=this.senderKey.serialize(),e.next=4,this.message.exportProto();case 4:return n=e.sent,a=f(t,r,n),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"signHMAC",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSignedRaw();case 2:return r=e.sent,e.next=5,F.sign(t,r);case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),o}(J);return p([g({id:1,converter:M,required:!0})],e.prototype,"senderKey",void 0),p([g({id:2,parser:Y,required:!0})],e.prototype,"message",void 0),p([g({id:3,required:!0})],e.prototype,"signature",void 0),e=p([v({name:"MessageSigned"})],e)}(),Q=function(){var e=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(J);return p([g({id:1,type:"uint32",required:!0})],e.prototype,"registrationId",void 0),p([g({id:2,type:"uint32"})],e.prototype,"preKeyId",void 0),p([g({id:3,type:"uint32",required:!0})],e.prototype,"preKeySignedId",void 0),p([g({id:4,converter:z,required:!0})],e.prototype,"baseKey",void 0),p([g({id:5,parser:Z,required:!0})],e.prototype,"identity",void 0),p([g({id:6,parser:$,required:!0})],e.prototype,"signedMessage",void 0),e=p([v({name:"PreKeyMessage"})],e)}(),ee=function(){var e=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(J);return p([g({id:1,type:"uint32",required:!0})],e.prototype,"id",void 0),p([g({id:2,converter:z,required:!0})],e.prototype,"key",void 0),e=p([v({name:"PreKey"})],e)}(),te=function(){var e=function(e){_inherits(n,e);var t,r=_createSuper(n);function n(){return _classCallCheck(this,n),r.apply(this,arguments)}return _createClass(n,[{key:"sign",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.sign(t,this.key.serialize());case 2:this.signature=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"verify",value:function(e){return X.verify(e,this.key.serialize(),this.signature)}}]),n}(ee);return p([g({id:3,converter:y,required:!0})],e.prototype,"signature",void 0),e=p([v({name:"PreKeySigned"})],e)}(),re=function(){var e=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(J);return p([g({id:1,type:"uint32",required:!0})],e.prototype,"registrationId",void 0),p([g({id:2,parser:Z,required:!0})],e.prototype,"identity",void 0),p([g({id:3,parser:ee})],e.prototype,"preKey",void 0),p([g({id:4,parser:te,required:!0})],e.prototype,"preKeySigned",void 0),e=p([v({name:"PreKeyBundle"})],e)}(),ne=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;_classCallCheck(this,e),this.items=[],this.maxSize=t}var t,r;return _createClass(e,[{key:"push",value:function(e){this.length===this.maxSize&&(this.items=this.items.slice(1)),this.items.push(e)}},{key:"toJSON",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=_createForOfIteratorHelper(this.items),e.prev=2,r.s();case 4:if((n=r.n()).done){e.next=13;break}return a=n.value,e.t0=t,e.next=9,a.toJSON();case 9:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t2=e.catch(2),r.e(e.t2);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",t);case 22:case"end":return e.stop()}}),e,this,[[2,15,18,21]])}))),function(){return r.apply(this,arguments)})},{key:"fromJSON",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.items=t;case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"length",get:function(){return this.items.length}},{key:"latest",get:function(){return this.items[this.length-1]}}]),e}(),ae=new Uint8Array([1]).buffer,ie=new Uint8Array([2]).buffer,oe=function(){function e(t){_classCallCheck(this,e),this.counter=0,this.rootKey=t}var t,r,n,a,i;return _createClass(e,[{key:"toJSON",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{counter:this.counter,rootKey:this.rootKey});case 1:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"fromJSON",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.counter=t.counter,this.rootKey=t.rootKey;case 2:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"calculateKey",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.sign(t,ae);case 2:return r=e.sent,e.next=5,F.sign(t,ie);case 5:return n=e.sent,e.t0=r,e.next=9,F.importHMAC(n);case 9:return e.t1=e.sent,a={cipher:e.t0,rootKey:e.t1},e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"click",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.rootKey,e.next=3,this.calculateKey(t);case 3:return r=e.sent,this.rootKey=r.rootKey,this.counter++,e.abrupt("return",r.cipher);case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}],[{key:"fromJSON",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new this(t.rootKey)).fromJSON(t),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),se=function(e){_inherits(n,e);var t,r=_createSuper(n);function n(){return _classCallCheck(this,n),r.apply(this,arguments)}return _createClass(n,[{key:"encrypt",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.click();case 2:return r=e.sent,e.next=5,F.HKDF(r,3,void 0,H);case 5:return n=e.sent,e.next=8,F.importAES(n[0]);case 8:return a=e.sent,e.next=11,F.importHMAC(n[1]);case 11:return i=e.sent,o=n[2].slice(0,16),e.next=15,F.encrypt(a,t,o);case 15:return s=e.sent,e.abrupt("return",{cipherText:s,hmacKey:i});case 17:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),n}(oe),ue=function(e){_inherits(o,e);var t,r,n,a,i=_createSuper(o);function o(){var e;return _classCallCheck(this,o),(e=i.apply(this,arguments)).keys=[],e}return _createClass(o,[{key:"toJSON",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_get5(_getPrototypeOf(o.prototype),"toJSON",this).call(this);case 2:return(t=e.sent).keys=this.keys,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"fromJSON",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_get5(_getPrototypeOf(o.prototype),"fromJSON",this).call(this,t);case 2:this.keys=t.keys;case 3:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"decrypt",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r){var n,a,i,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getKey(r);case 2:return n=e.sent,e.next=5,F.HKDF(n,3,void 0,H);case 5:return a=e.sent,e.next=8,F.importAES(a[0]);case 8:return i=e.sent,e.next=11,F.importHMAC(a[1]);case 11:return o=e.sent,s=a[2].slice(0,16),e.next=15,F.decrypt(i,t,s);case 15:return u=e.sent,e.abrupt("return",{cipherText:u,hmacKey:o});case 17:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"getKey",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.counter<=t)){e.next=7;break}return e.next=3,this.click();case 3:r=e.sent,this.keys.push(r),e.next=0;break;case 7:return n=this.keys[t],e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),o}(oe);function ce(e,t,r,n,a){return le.apply(this,arguments)}function le(){return(le=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r,n,a,i){var o,s,u,c,l,h,p,y,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.deriveBytes(t.exchangeKey.privateKey,a);case 2:return o=e.sent,e.next=5,X.deriveBytes(r.privateKey,n);case 5:return s=e.sent,e.next=8,X.deriveBytes(r.privateKey,a);case 8:if(u=e.sent,c=new ArrayBuffer(0),!i){e.next=14;break}return e.next=13,X.deriveBytes(r.privateKey,i);case 13:c=e.sent;case 14:for(l=new Uint8Array(32),h=0;h<l.length;h++)l[h]=255;return p=l.buffer,y=f(p,o,s,u,c),e.next=20,F.HKDF(y,1,void 0,U);case 20:return v=e.sent,e.next=23,F.importHMAC(v[0]);case 23:return e.abrupt("return",e.sent);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e,t,r,n,a){return he.apply(this,arguments)}function he(){return(he=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r,n,a,i){var o,s,u,c,l,h,p,y,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.deriveBytes(r.privateKey,n);case 2:return o=e.sent,e.next=5,X.deriveBytes(t.exchangeKey.privateKey,a);case 5:return s=e.sent,e.next=8,X.deriveBytes(r.privateKey,a);case 8:if(u=e.sent,c=new ArrayBuffer(0),!i){e.next=14;break}return e.next=13,X.deriveBytes(i,a);case 13:c=e.sent;case 14:for(l=new Uint8Array(32),h=0;h<l.length;h++)l[h]=255;return p=l.buffer,y=f(p,o,s,u,c),e.next=20,F.HKDF(y,1,void 0,U);case 20:return v=e.sent,e.next=23,F.importHMAC(v[0]);case 23:return e.abrupt("return",e.sent);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pe=function(e){_inherits(l,e);var t,r,n,a,i,o,s,u,c=_createSuper(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,l),(e=c.call(this)).options=t,e.counter=0,e.currentStep=new ye,e.steps=new ve(20),e.promises={},e}return _createClass(l,[{key:"on",value:function(e,t){return _get5(_getPrototypeOf(l.prototype),"on",this).call(this,e,t)}},{key:"once",value:function(e,t){return _get5(_getPrototypeOf(l.prototype),"once",this).call(this,e,t)}},{key:"decrypt",value:(u=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.queuePromise("encrypt",_asyncToGenerator(regeneratorRuntime.mark((function e(){var n,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.message.senderRatchetKey,a=t.message,!(t.message.previousCounter<r.counter-20)){e.next=4;break}throw new Error("Error: Too old message");case 4:if((i=r.steps.getStep(n))||((o=new ye).remoteRatchetKey=n,r.steps.push(o),r.currentStep=o,i=o),i.receivingChain){e.next=10;break}return e.next=9,r.createChain(r.currentRatchetKey.privateKey,n,ue);case 9:i.receivingChain=e.sent;case 10:return e.next=12,i.receivingChain.decrypt(a.cipherText,a.counter);case 12:return s=e.sent,r.update(),t.senderKey=r.remoteIdentity.signingKey,t.receiverKey=r.identity.signingKey.publicKey,e.next=18,t.verify(s.hmacKey);case 18:if(e.sent){e.next=20;break}throw new Error("Error: The Message did not successfully verify!");case 20:return e.abrupt("return",s.cipherText);case 21:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"encrypt",value:(s=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.queuePromise("encrypt",_asyncToGenerator(regeneratorRuntime.mark((function e(){var n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.currentStep.receivingChain||r.currentStep.sendingChain){e.next=5;break}return r.counter++,e.next=4,r.generateRatchetKey();case 4:r.currentRatchetKey=e.sent;case 5:if(r.currentStep.sendingChain){e.next=11;break}if(r.currentStep.remoteRatchetKey){e.next=8;break}throw new Error("currentStep has empty remoteRatchetKey");case 8:return e.next=10,r.createChain(r.currentRatchetKey.privateKey,r.currentStep.remoteRatchetKey,se);case 10:r.currentStep.sendingChain=e.sent;case 11:return e.next=13,r.currentStep.sendingChain.encrypt(t);case 13:if(n=e.sent,r.update(),0!==r.steps.length||r.currentStep.receivingChain||1!==r.currentStep.sendingChain.counter){e.next=23;break}return(a=new Q).registrationId=r.identity.id,a.preKeyId=r.remotePreKeyId,a.preKeySignedId=r.remotePreKeySignedId,a.baseKey=r.currentRatchetKey.publicKey,e.next=23,a.identity.fill(r.identity);case 23:return(i=new $).receiverKey=r.remoteIdentity.signingKey,i.senderKey=r.identity.signingKey.publicKey,i.message.cipherText=n.cipherText,i.message.counter=r.currentStep.sendingChain.counter-1,i.message.previousCounter=r.counter,i.message.senderRatchetKey=r.currentRatchetKey.publicKey,e.next=32,i.sign(n.hmacKey);case 32:if(!a){e.next=37;break}return a.signedMessage=i,e.abrupt("return",a);case 37:return e.abrupt("return",i);case 38:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"hasRatchetKey",value:(o=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof q){e.next=6;break}return e.next=3,q.create(t);case 3:r=e.sent,e.next=7;break;case 6:r=t;case 7:n=_createForOfIteratorHelper(this.steps.items),e.prev=8,n.s();case 10:if((a=n.n()).done){e.next=18;break}return i=a.value,e.next=14,i.remoteRatchetKey.isEqual(r);case 14:if(!e.sent){e.next=16;break}return e.abrupt("return",!0);case 16:e.next=10;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),n.e(e.t0);case 23:return e.prev=23,n.f(),e.finish(23);case 26:return e.abrupt("return",!1);case 27:case"end":return e.stop()}}),e,this,[[8,20,23,26]])}))),function(e){return o.apply(this,arguments)})},{key:"toJSON",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.counter,e.next=3,X.ecKeyPairToJson(this.currentRatchetKey);case 3:return e.t1=e.sent,e.next=6,this.remoteIdentity.signingKey.thumbprint();case 6:return e.t2=e.sent,e.t3=this.rootKey,e.next=10,this.steps.toJSON();case 10:return e.t4=e.sent,e.abrupt("return",{counter:e.t0,ratchetKey:e.t1,remoteIdentity:e.t2,rootKey:e.t3,steps:e.t4});case 12:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"fromJSON",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.ecKeyPairFromJson(t.ratchetKey);case 2:this.currentRatchetKey=e.sent,this.counter=t.counter,this.rootKey=t.rootKey,r=_createForOfIteratorHelper(t.steps),e.prev=6,r.s();case 8:if((n=r.n()).done){e.next=16;break}return a=n.value,e.next=12,ye.fromJSON(a);case 12:this.currentStep=e.sent,this.steps.push(this.currentStep);case 14:e.next=8;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),r.e(e.t0);case 21:return e.prev=21,r.f(),e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[6,18,21,24]])}))),function(e){return a.apply(this,arguments)})},{key:"update",value:function(){this.emit("update")}},{key:"generateRatchetKey",value:function(){return X.generateKeyPair("ECDH",!!this.options.exportableKeys)}},{key:"createChain",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r,n){var a,i,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.deriveBytes(t,r);case 2:return a=e.sent,e.next=5,F.HKDF(a,2,this.rootKey,K);case 5:return i=e.sent,e.next=8,F.importHMAC(i[0]);case 8:return o=e.sent,e.next=11,F.importHMAC(i[1]);case 11:return s=e.sent,u=new n(s),this.rootKey=o,e.abrupt("return",u);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"queuePromise",value:function(e,t){var r=this,n=this.promises[e]||Promise.resolve(),a=this.promises[e]=n.then(t,t);return a.then((function(){r.promises[e]===a&&delete r.promises[e]})),a}}],[{key:"create",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r){var n,a,i,o,s,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>2&&void 0!==u[2]?u[2]:{},i=new l(n),!(r instanceof re)){e.next=24;break}return e.next=5,r.identity.verify();case 5:if(e.sent){e.next=7;break}throw new Error("Error: Remote client's identity key is invalid.");case 7:return e.next=9,r.preKeySigned.verify(r.identity.signingKey);case 9:if(e.sent){e.next=11;break}throw new Error("Error: Remote client's signed prekey is invalid.");case 11:return e.next=13,i.generateRatchetKey();case 13:return i.currentRatchetKey=e.sent,i.currentStep.remoteRatchetKey=r.preKeySigned.key,i.remoteIdentity=V.fill(r.identity),i.remoteIdentity.id=r.registrationId,i.remotePreKeyId=r.preKey.id,i.remotePreKeySignedId=r.preKeySigned.id,e.next=21,ce(t,i.currentRatchetKey,r.identity.exchangeKey,r.preKeySigned.key,r.preKey.key);case 21:a=e.sent,e.next=37;break;case 24:return e.next=26,r.identity.verify();case 26:if(e.sent){e.next=28;break}throw new Error("Error: Remote client's identity key is invalid.");case 28:if(o=t.signedPreKeys[r.preKeySignedId]){e.next=31;break}throw new Error("Error: PreKey with id ".concat(r.preKeySignedId," not found"));case 31:return void 0!==r.preKeyId&&(s=t.preKeys[r.preKeyId]),i.remoteIdentity=V.fill(r.identity),i.currentRatchetKey=o,e.next=36,fe(t,i.currentRatchetKey,r.identity.exchangeKey,r.signedMessage.message.senderRatchetKey,s&&s.privateKey);case 36:a=e.sent;case 37:return i.identity=t,i.id=t.id,i.rootKey=a,e.abrupt("return",i);case 41:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})},{key:"fromJSON",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r,n){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new l).identity=t,a.remoteIdentity=r,e.next=5,a.fromJSON(n);case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)}))),function(e,r,n){return t.apply(this,arguments)})}]),l}(k),ye=function(){function e(){_classCallCheck(this,e)}var t,r,n;return _createClass(e,[{key:"toJSON",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},this.remoteRatchetKey&&(t.remoteRatchetKey=this.remoteRatchetKey.key),!this.sendingChain){e.next=6;break}return e.next=5,this.sendingChain.toJSON();case 5:t.sendingChain=e.sent;case 6:if(!this.receivingChain){e.next=10;break}return e.next=9,this.receivingChain.toJSON();case 9:t.receivingChain=e.sent;case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"fromJSON",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.remoteRatchetKey){e.next=4;break}return e.next=3,q.create(t.remoteRatchetKey);case 3:this.remoteRatchetKey=e.sent;case 4:if(!t.sendingChain){e.next=8;break}return e.next=7,se.fromJSON(t.sendingChain);case 7:this.sendingChain=e.sent;case 8:if(!t.receivingChain){e.next=12;break}return e.next=11,ue.fromJSON(t.receivingChain);case 11:this.receivingChain=e.sent;case 12:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}],[{key:"fromJSON",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new this,e.next=3,r.fromJSON(t);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),ve=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r,[{key:"getStep",value:function(e){var t;return this.items.some((function(r){return r.remoteRatchetKey.id===e.id&&(t=r),!!t})),t}}]),r}(ne),ge=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"toArrayBuffer",value:function(e){var t=this.toUint8Array(e);return t.byteOffset||t.length?t.buffer.slice(t.byteOffset,t.byteOffset+t.length):t.buffer}},{key:"toUint8Array",value:function(e){if("undefined"!=typeof Buffer&&Buffer.isBuffer(e))return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}},{key:"isBufferSource",value:function(e){return this.isArrayBufferView(e)||e instanceof ArrayBuffer}},{key:"isArrayBufferView",value:function(e){return ArrayBuffer.isView(e)||e&&e.buffer instanceof ArrayBuffer}}]),e}();function de(e){return"undefined"!=typeof Buffer&&Buffer.isBuffer(e)?new Uint8Array(e):ge.isArrayBufferView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var me=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"isHex",value:function(e){return"string"==typeof e&&/^[a-z0-9]+$/i.test(e)}},{key:"isBase64",value:function(e){return"string"==typeof e&&/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},{key:"isBase64Url",value:function(e){return"string"==typeof e&&/^[a-zA-Z0-9-_]+$/i.test(e)}},{key:"ToString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=de(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);default:throw new Error("Unknown type of encoding '".concat(t,"'"))}}},{key:"FromString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";if(!e)return new ArrayBuffer(0);switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);default:throw new Error("Unknown type of encoding '".concat(t,"'"))}}},{key:"ToBase64",value:function(e){var t=de(e);if("undefined"!=typeof btoa){var r=this.ToString(t,"binary");return btoa(r)}return Buffer.from(t).toString("base64")}},{key:"FromBase64",value:function(t){var r=this.formatString(t);if(!r)return new ArrayBuffer(0);if(!e.isBase64(r))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return"undefined"!=typeof atob?this.FromBinary(atob(r)):new Uint8Array(Buffer.from(r,"base64")).buffer}},{key:"FromBase64Url",value:function(t){var r=this.formatString(t);if(!r)return new ArrayBuffer(0);if(!e.isBase64Url(r))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(r.replace(/\-/g,"+").replace(/\_/g,"/")))}},{key:"ToBase64Url",value:function(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}},{key:"FromUtf8String",value:function(e){for(var t=unescape(encodeURIComponent(e)),r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r.buffer}},{key:"ToUtf8String",value:function(e){var t=de(e),r=String.fromCharCode.apply(null,t);return decodeURIComponent(escape(r))}},{key:"FromBinary",value:function(e){for(var t=e.length,r=new Uint8Array(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r.buffer}},{key:"ToBinary",value:function(e){for(var t=de(e),r="",n=t.length,a=0;a<n;a++)r+=String.fromCharCode(t[a]);return r}},{key:"ToHex",value:function(e){for(var t=de(e),r=[],n=t.length,a=0;a<n;a++){var i=t[a].toString(16);r.push(1===i.length?"0"+i:i)}return r.join("")}},{key:"FromHex",value:function(t){var r=this.formatString(t);if(!r)return new ArrayBuffer(0);if(!e.isHex(r))throw new TypeError("Argument 'hexString' is not HEX encoded");r.length%2&&(r="0".concat(r));for(var n=new Uint8Array(r.length/2),a=0;a<r.length;a+=2){var i=r.slice(a,a+2);n[a/2]=parseInt(i,16)}return n.buffer}},{key:"Base64Padding",value:function(e){var t=4-e.length%4;if(t<4)for(var r=0;r<t;r++)e+="=";return e}},{key:"formatString",value:function(e){return(null==e?void 0:e.replace(/[\n\r\t ]/g,""))||""}}]),e}();function ke(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var a=arguments[0],i=1;i<arguments.length;i++){var o=arguments[i];for(var s in o)a[s]=o[s]}return a}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */function be(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}var we,_e,xe,Ce,Be,Se,Ae,Ne,Ee,Ie=function(){function e(){_classCallCheck(this,e)}var t,r;return _createClass(e,null,[{key:"set",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Uint8Array(me.FromUtf8String(t.toISOString())));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"get",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Date(me.ToUtf8String(t)));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}(),Te=function(){function e(){_classCallCheck(this,e)}var t,r;return _createClass(e,null,[{key:"set",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Uint8Array(me.FromHex(t)));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"get",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",me.ToHex(t));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}(),Re=we=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).version=0,e}return r}(d);Re.INDEX=1,be([g({id:we.INDEX++,type:"uint32",required:!0,defaultValue:1})],Re.prototype,"version",void 0);var Oe=_e=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this)).actionId="",e.action=e.constructor.ACTION,e}return r}(Re=we=be([v({name:"BaseMessage"})],Re));Oe.INDEX=Re.INDEX,Oe.ACTION="action",be([g({id:_e.INDEX++,type:"string",required:!0})],Oe.prototype,"action",void 0),be([g({id:_e.INDEX++,type:"string",required:!1})],Oe.prototype,"actionId",void 0),Oe=_e=be([v({name:"Action"})],Oe);var De=xe=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).name="",e}return _createClass(r,[{key:"isEmpty",value:function(){return!this.name}},{key:"toAlgorithm",value:function(){return{name:this.name}}},{key:"fromAlgorithm",value:function(e){this.name=e.name}}]),r}(Re);De.INDEX=Re.INDEX,be([g({id:xe.INDEX++,type:"string",required:!0})],De.prototype,"name",void 0),De=xe=be([v({name:"BaseAlgorithm"})],De);var Ue=Ce=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return _createClass(r,[{key:"toAlgorithm",value:function(){var e={},t=this.constructor;for(var r in t.items)if("version"!==r){var n=this[r];"labelStr"!==r?void 0!==n&&(n instanceof De?n.isEmpty()||(e[r]=n.toAlgorithm()):e[r]=n):e.label=n}return e}},{key:"fromAlgorithm",value:function(e){e instanceof Ce&&(e=e.toAlgorithm());var t=this.constructor;for(var r in e)if(t.items&&r in t.items){var n=t.items[r];if(n.parser)switch(n.parser){case De:this[r].fromAlgorithm(e[r]);break;default:throw new Error("Unsupported parser '".concat(n.parser.name,"'"))}else"label"===r&&"string"==typeof e.label?this.labelStr=e.label:this[r]=e[r]}}}]),r}(De);Ue.INDEX=De.INDEX,be([g({id:Ce.INDEX++,type:"bytes",parser:De})],Ue.prototype,"hash",void 0),be([g({id:Ce.INDEX++,type:"bytes"})],Ue.prototype,"publicExponent",void 0),be([g({id:Ce.INDEX++,type:"uint32"})],Ue.prototype,"modulusLength",void 0),be([g({id:Ce.INDEX++,type:"uint32"})],Ue.prototype,"saltLength",void 0),be([g({id:Ce.INDEX++,type:"bytes"})],Ue.prototype,"label",void 0),be([g({id:Ce.INDEX++,type:"string"})],Ue.prototype,"namedCurve",void 0),be([g({id:Ce.INDEX++,converter:y})],Ue.prototype,"public",void 0),be([g({id:Ce.INDEX++,type:"uint32"})],Ue.prototype,"length",void 0),be([g({id:Ce.INDEX++})],Ue.prototype,"iv",void 0),be([g({id:Ce.INDEX++,type:"bool"})],Ue.prototype,"token",void 0),be([g({id:Ce.INDEX++,type:"bool"})],Ue.prototype,"sensitive",void 0),be([g({id:Ce.INDEX++,type:"string"})],Ue.prototype,"labelStr",void 0),Ue=Ce=be([v({name:"Algorithm"})],Ue);var Ke=Be=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).providerID="",e.id="",e.type="",e}return r}(Re);Ke.INDEX=Re.INDEX,be([g({id:Be.INDEX++,type:"string",required:!0})],Ke.prototype,"providerID",void 0),be([g({id:Be.INDEX++,type:"bytes",required:!0,converter:Te})],Ke.prototype,"id",void 0),be([g({id:Be.INDEX++,type:"string",required:!0})],Ke.prototype,"type",void 0);var He=Se=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).type="secret",e.algorithm=new Ue,e.extractable=!1,e.usages=[],e}return r}(Ke=Be=be([v({name:"CryptoItem"})],Ke));He.INDEX=Ke.INDEX,be([g({id:Se.INDEX++,type:"bytes",required:!0,parser:Ue})],He.prototype,"algorithm",void 0),be([g({id:Se.INDEX++,type:"bool"})],He.prototype,"extractable",void 0),be([g({id:Se.INDEX++,type:"string",repeated:!0})],He.prototype,"usages",void 0),He=Se=be([v({name:"CryptoKey"})],He);var Pe=Ae=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).privateKey=new He,e.publicKey=new He,e}return r}(Re);Pe.INDEX=Re.INDEX,be([g({id:Ae.INDEX++,name:"privateKey",type:"bytes",required:!0,parser:He})],Pe.prototype,"privateKey",void 0),be([g({id:Ae.INDEX++,name:"publicKey",type:"bytes",parser:He})],Pe.prototype,"publicKey",void 0),Pe=Ae=be([v({name:"CryptoKeyPair"})],Pe);var Le=Ne=function(e){_inherits(r,e);var t=_createSuper(r);function r(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"error";return _classCallCheck(this,r),(n=t.call(this)).code=0,n.type="error",n.message="",n.name="Error",n.stack="",e&&(n.message=e,n.code=a,n.type=i),n}return r}(Re);Le.INDEX=Re.INDEX,be([g({id:Ne.INDEX++,type:"uint32",defaultValue:0})],Le.prototype,"code",void 0),be([g({id:Ne.INDEX++,type:"string",defaultValue:"error"})],Le.prototype,"type",void 0),be([g({id:Ne.INDEX++,type:"string",defaultValue:""})],Le.prototype,"message",void 0),be([g({id:Ne.INDEX++,type:"string",defaultValue:"Error"})],Le.prototype,"name",void 0),be([g({id:Ne.INDEX++,type:"string",defaultValue:""})],Le.prototype,"stack",void 0),Le=Ne=be([v({name:"Error"})],Le);var Xe=Ee=function(e){_inherits(r,e);var t=_createSuper(r);function r(e){var n;return _classCallCheck(this,r),(n=t.call(this)).status=!1,e&&(n.actionId=e.actionId,n.action=e.action),n}return r}(Oe);Xe.INDEX=Oe.INDEX,be([g({id:Ee.INDEX++,type:"bool",defaultValue:!1})],Xe.prototype,"status",void 0),be([g({id:Ee.INDEX++,type:"bytes",parser:Le})],Xe.prototype,"error",void 0),be([g({id:Ee.INDEX++,type:"bytes",converter:y})],Xe.prototype,"data",void 0),Xe=Ee=be([v({name:"Result"})],Xe);var Ge=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(Oe);Ge.INDEX=Oe.INDEX,Ge.ACTION="auth",Ge=be([v({name:"AuthRequest"})],Ge);var Fe=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(Oe);Fe.INDEX=Oe.INDEX,Fe.ACTION="server/login",Fe=be([v({})],Fe);var qe,je=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(Oe);je.INDEX=Oe.INDEX,je.ACTION="server/isLoggedIn",je=be([v({})],je);var Ve=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(Oe);Ve.INDEX=Oe.INDEX,Ve.ACTION="cardReader",Ve=be([v({})],Ve);var Je=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(Oe);Je.INDEX=Oe.INDEX,Je.ACTION="cardReader/readers",Je=be([v({})],Je);var Me=qe=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,n){var a;return _classCallCheck(this,r),(a=t.call(this)).reader="",a.atr="",e&&n&&(a.reader=e,a.atr=n),a}return r}(Ve);Me.INDEX=Ve.INDEX,be([g({id:qe.INDEX++,required:!0,type:"string",defaultValue:""})],Me.prototype,"reader",void 0),be([g({id:qe.INDEX++,required:!0,converter:Te})],Me.prototype,"atr",void 0);var ze=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(Me=qe=be([v({})],Me));ze.INDEX=Me.INDEX,ze.ACTION=Me.ACTION+"/insert",ze=be([v({})],ze);var We,Ze=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(Me);Ze.INDEX=Me.INDEX,Ze.ACTION=Me.ACTION+"/remove",Ze=be([v({})],Ze);var Ye=We=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).providerID="",e}return r}(Oe);Ye.INDEX=Oe.INDEX,Ye.ACTION="crypto",be([g({id:We.INDEX++,required:!0,type:"string"})],Ye.prototype,"providerID",void 0);var $e=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(Ye=We=be([v({})],Ye));$e.INDEX=Ye.INDEX,$e.ACTION="crypto/login",$e=be([v({})],$e);var Qe=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(Ye);Qe.INDEX=Ye.INDEX,Qe.ACTION="crypto/logout",Qe=be([v({})],Qe);var et=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(Ye);et.INDEX=Ye.INDEX,et.ACTION="crypto/isLoggedIn",et=be([v({})],et);var tt,rt,nt,at,it,ot,st,ut,ct,lt,ft,ht,pt,yt,vt,gt=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(Ye);gt.INDEX=Ye.INDEX,gt.ACTION="crypto/reset",gt=be([v({})],gt);var dt=tt=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).id="",e.publicKey=new He,e.type="x509",e.label="",e.token=!1,e.sensitive=!1,e}return r}(Ke);dt.INDEX=Ke.INDEX,be([g({id:tt.INDEX++,required:!0,converter:Te})],dt.prototype,"id",void 0),be([g({id:tt.INDEX++,required:!0,parser:He})],dt.prototype,"publicKey",void 0),be([g({id:tt.INDEX++,required:!0,type:"string"})],dt.prototype,"type",void 0),be([g({id:tt.INDEX++,type:"string",defaultValue:""})],dt.prototype,"label",void 0),be([g({id:tt.INDEX++,type:"bool",defaultValue:!1})],dt.prototype,"token",void 0),be([g({id:tt.INDEX++,type:"bool",defaultValue:!1})],dt.prototype,"sensitive",void 0);var mt=rt=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).type="x509",e.serialNumber="",e.issuerName="",e.subjectName="",e.notBefore=new Date,e.notAfter=new Date,e}return r}(dt=tt=be([v({})],dt));mt.INDEX=dt.INDEX,be([g({id:rt.INDEX++,required:!0,converter:Te})],mt.prototype,"serialNumber",void 0),be([g({id:rt.INDEX++,required:!0,type:"string"})],mt.prototype,"issuerName",void 0),be([g({id:rt.INDEX++,required:!0,type:"string"})],mt.prototype,"subjectName",void 0),be([g({id:rt.INDEX++,required:!0,converter:Ie})],mt.prototype,"notBefore",void 0),be([g({id:rt.INDEX++,required:!0,converter:Ie})],mt.prototype,"notAfter",void 0),mt=rt=be([v({})],mt);var kt=nt=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).type="request",e.subjectName="",e}return r}(dt);kt.INDEX=dt.INDEX,be([g({id:nt.INDEX++,required:!0,type:"string"})],kt.prototype,"subjectName",void 0),kt=nt=be([v({})],kt);var bt=at=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).type="",e.value=new ArrayBuffer(0),e}return r}(Re);bt.INDEX=Re.INDEX,be([g({id:at.INDEX++,required:!0,type:"string"})],bt.prototype,"type",void 0),be([g({id:at.INDEX++,required:!0,converter:y})],bt.prototype,"value",void 0),bt=at=be([v({})],bt);var wt=it=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).items=[],e}return r}(Re);wt.INDEX=Re.INDEX,be([g({id:it.INDEX++,required:!0,repeated:!0,parser:bt})],wt.prototype,"items",void 0),wt=it=be([v({})],wt);var _t=ot=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).item=new dt,e}return r}(Ye);_t.INDEX=Ye.INDEX,_t.ACTION="crypto/certificateStorage/setItem",be([g({id:ot.INDEX++,required:!0,parser:dt})],_t.prototype,"item",void 0),_t=ot=be([v({})],_t);var xt=st=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).key="",e.algorithm=new Ue,e.keyUsages=[],e}return r}(Ye);xt.INDEX=Ye.INDEX,xt.ACTION="crypto/certificateStorage/getItem",be([g({id:st.INDEX++,required:!0,type:"string"})],xt.prototype,"key",void 0),be([g({id:st.INDEX++,parser:Ue})],xt.prototype,"algorithm",void 0),be([g({id:st.INDEX++,repeated:!0,type:"string"})],xt.prototype,"keyUsages",void 0),xt=st=be([v({})],xt);var Ct=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(Ye);Ct.INDEX=Ye.INDEX,Ct.ACTION="crypto/certificateStorage/keys",Ct=be([v({})],Ct);var Bt=ut=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).key="",e}return r}(Ye);Bt.INDEX=Ye.INDEX,Bt.ACTION="crypto/certificateStorage/getValue",be([g({id:ut.INDEX++,required:!0,type:"string"})],Bt.prototype,"key",void 0),Bt=ut=be([v({})],Bt);var St=ct=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).key="",e}return r}(Ye);St.INDEX=Ye.INDEX,St.ACTION="crypto/certificateStorage/removeItem",be([g({id:ct.INDEX++,required:!0,type:"string"})],St.prototype,"key",void 0),St=ct=be([v({})],St);var At=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(Ye);At.INDEX=Ye.INDEX,At.ACTION="crypto/certificateStorage/clear",At=be([v({})],At);var Nt=lt=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).format="raw",e.data=new ArrayBuffer(0),e.algorithm=new Ue,e.keyUsages=[],e}return r}(Ye);Nt.INDEX=Ye.INDEX,Nt.ACTION="crypto/certificateStorage/import",be([g({id:lt.INDEX++,required:!0,type:"string"})],Nt.prototype,"format",void 0),be([g({id:lt.INDEX++,required:!0,converter:y})],Nt.prototype,"data",void 0),be([g({id:lt.INDEX++,required:!0,parser:Ue})],Nt.prototype,"algorithm",void 0),be([g({id:lt.INDEX++,repeated:!0,type:"string"})],Nt.prototype,"keyUsages",void 0),Nt=lt=be([v({})],Nt);var Et=ft=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).format="raw",e.item=new dt,e}return r}(Ye);Et.INDEX=Ye.INDEX,Et.ACTION="crypto/certificateStorage/export",be([g({id:ft.INDEX++,required:!0,type:"string"})],Et.prototype,"format",void 0),be([g({id:ft.INDEX++,required:!0,parser:dt})],Et.prototype,"item",void 0),Et=ft=be([v({})],Et);var It=ht=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).item=new dt,e}return r}(Ye);It.INDEX=Ye.INDEX,It.ACTION="crypto/certificateStorage/indexOf",be([g({id:ht.INDEX++,required:!0,parser:dt})],It.prototype,"item",void 0),It=ht=be([v({})],It);var Tt=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).item=new dt,e}return r}(Ye);Tt.INDEX=Ye.INDEX,Tt.ACTION="crypto/certificateStorage/getChain",be([g({id:_t.INDEX++,required:!0,parser:dt})],Tt.prototype,"item",void 0),Tt=be([v({})],Tt);var Rt=pt=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).url="",e}return r}(Ye);Rt.INDEX=Ye.INDEX,Rt.ACTION="crypto/certificateStorage/getCRL",be([g({id:pt.INDEX++,required:!0,type:"string"})],Rt.prototype,"url",void 0),Rt=pt=be([v({})],Rt);var Ot=yt=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).method="get",e}return r}(Re);Ot.INDEX=Re.INDEX,be([g({id:yt.INDEX++,required:!1,type:"string",defaultValue:"get"})],Ot.prototype,"method",void 0),Ot=yt=be([v({})],Ot);var Dt,Ut,Kt,Ht,Pt=vt=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).url="",e.request=new ArrayBuffer(0),e.options=new Ot,e}return r}(Ye);Pt.INDEX=Ye.INDEX,Pt.ACTION="crypto/certificateStorage/getOCSP",be([g({id:vt.INDEX++,required:!0,type:"string"})],Pt.prototype,"url",void 0),be([g({id:vt.INDEX++,required:!0,converter:y})],Pt.prototype,"request",void 0),be([g({id:vt.INDEX++,required:!1,parser:Ot})],Pt.prototype,"options",void 0),Pt=vt=be([v({})],Pt);var Lt=Dt=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).item=new He,e}return r}(Ye);Lt.INDEX=Ye.INDEX,Lt.ACTION="crypto/keyStorage/setItem",be([g({id:Dt.INDEX++,required:!0,parser:He})],Lt.prototype,"item",void 0),Lt=Dt=be([v({})],Lt);var Xt=Ut=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).key="",e.algorithm=new Ue,e.extractable=!1,e.keyUsages=[],e}return r}(Ye);Xt.INDEX=Ye.INDEX,Xt.ACTION="crypto/keyStorage/getItem",be([g({id:Ut.INDEX++,required:!0,type:"string"})],Xt.prototype,"key",void 0),be([g({id:Ut.INDEX++,parser:Ue})],Xt.prototype,"algorithm",void 0),be([g({id:Ut.INDEX++,type:"bool"})],Xt.prototype,"extractable",void 0),be([g({id:Ut.INDEX++,repeated:!0,type:"string"})],Xt.prototype,"keyUsages",void 0),Xt=Ut=be([v({})],Xt);var Gt=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(Ye);Gt.INDEX=Ye.INDEX,Gt.ACTION="crypto/keyStorage/keys",Gt=be([v({})],Gt);var Ft=Kt=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).key="",e}return r}(Ye);Ft.INDEX=Ye.INDEX,Ft.ACTION="crypto/keyStorage/removeItem",be([g({id:Kt.INDEX++,required:!0,type:"string"})],Ft.prototype,"key",void 0),Ft=Kt=be([v({})],Ft);var qt=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(Ye);qt.INDEX=Ye.INDEX,qt.ACTION="crypto/keyStorage/clear",qt=be([v({})],qt);var jt,Vt,Jt,Mt,zt=Ht=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).item=new He,e}return r}(Ye);zt.INDEX=Ye.INDEX,zt.ACTION="crypto/keyStorage/indexOf",be([g({id:Ht.INDEX++,required:!0,parser:He})],zt.prototype,"item",void 0),zt=Ht=be([v({})],zt);var Wt=jt=function(e){_inherits(r,e);var t=_createSuper(r);function r(e){var n;return _classCallCheck(this,r),(n=t.call(this)).id="",n.name="",n.readOnly=!1,n.algorithms=[],n.isRemovable=!1,n.atr="",n.isHardware=!1,n.card="",e&&ke(_assertThisInitialized(n),e),n}return r}(Re);Wt.INDEX=Re.INDEX,be([g({id:jt.INDEX++,required:!0,type:"string"})],Wt.prototype,"id",void 0),be([g({id:jt.INDEX++,required:!0,type:"string"})],Wt.prototype,"name",void 0),be([g({id:jt.INDEX++,type:"bool",defaultValue:!1})],Wt.prototype,"readOnly",void 0),be([g({id:jt.INDEX++,repeated:!0,type:"string"})],Wt.prototype,"algorithms",void 0),be([g({id:jt.INDEX++,type:"bool",defaultValue:!1})],Wt.prototype,"isRemovable",void 0),be([g({id:jt.INDEX++,type:"string"})],Wt.prototype,"atr",void 0),be([g({id:jt.INDEX++,type:"bool",defaultValue:!1})],Wt.prototype,"isHardware",void 0),be([g({id:jt.INDEX++,type:"string"})],Wt.prototype,"card",void 0),Wt=jt=be([v({})],Wt);var Zt=Vt=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).name="",e.providers=[],e}return r}(Re);Zt.INDEX=Re.INDEX,be([g({id:Vt.INDEX++,type:"string",required:!0})],Zt.prototype,"name",void 0),be([g({id:Vt.INDEX++,repeated:!0,parser:Wt})],Zt.prototype,"providers",void 0),Zt=Vt=be([v({})],Zt);var Yt=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(Oe);Yt.INDEX=Oe.INDEX,Yt.ACTION="provider/action/info",Yt=be([v({})],Yt);var $t=Jt=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).cryptoID="",e}return r}(Oe);$t.INDEX=Oe.INDEX,$t.ACTION="provider/action/getCrypto",be([g({id:Jt.INDEX++,required:!0,type:"string"})],$t.prototype,"cryptoID",void 0),$t=Jt=be([v({})],$t);var Qt=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(Oe);Qt.INDEX=Oe.INDEX,Qt.ACTION="provider/event/authorized",Qt=be([v({})],Qt);var er,tr,rr,nr,ar,ir,or,sr,ur,cr,lr=Mt=function(e){_inherits(r,e);var t=_createSuper(r);function r(e){var n;return _classCallCheck(this,r),(n=t.call(this)).added=[],n.removed=[],e&&ke(_assertThisInitialized(n),e),n}return r}(Oe);lr.INDEX=Oe.INDEX,lr.ACTION="provider/event/token",be([g({id:Mt.INDEX++,repeated:!0,parser:Wt})],lr.prototype,"added",void 0),be([g({id:Mt.INDEX++,repeated:!0,parser:Wt})],lr.prototype,"removed",void 0),be([g({id:Mt.INDEX++,type:"bytes",parser:Le})],lr.prototype,"error",void 0),lr=Mt=be([v({name:"ProviderTokenEvent"})],lr);var fr=er=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).algorithm=new Ue,e.data=new ArrayBuffer(0),e}return r}(Ye);fr.INDEX=Ye.INDEX,fr.ACTION="crypto/subtle/digest",be([g({id:er.INDEX++,required:!0,parser:Ue})],fr.prototype,"algorithm",void 0),be([g({id:er.INDEX++,required:!0,converter:y})],fr.prototype,"data",void 0),fr=er=be([v({})],fr);var hr=tr=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).algorithm=new Ue,e.extractable=!1,e.usage=[],e}return r}(Ye);hr.INDEX=Ye.INDEX,hr.ACTION="crypto/subtle/generateKey",be([g({id:tr.INDEX++,type:"bytes",required:!0,parser:Ue})],hr.prototype,"algorithm",void 0),be([g({id:tr.INDEX++,type:"bool",required:!0})],hr.prototype,"extractable",void 0),be([g({id:tr.INDEX++,type:"string",repeated:!0})],hr.prototype,"usage",void 0),hr=tr=be([v({})],hr);var pr=rr=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).algorithm=new Ue,e.key=new He,e.data=new ArrayBuffer(0),e}return r}(Ye);pr.INDEX=Ye.INDEX,pr.ACTION="crypto/subtle/sign",be([g({id:rr.INDEX++,required:!0,parser:Ue})],pr.prototype,"algorithm",void 0),be([g({id:rr.INDEX++,required:!0,parser:He})],pr.prototype,"key",void 0),be([g({id:rr.INDEX++,required:!0,converter:y})],pr.prototype,"data",void 0);var yr=nr=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).signature=new ArrayBuffer(0),e}return r}(pr=rr=be([v({})],pr));yr.INDEX=pr.INDEX,yr.ACTION="crypto/subtle/verify",be([g({id:nr.INDEX++,required:!0,converter:y})],yr.prototype,"signature",void 0),yr=nr=be([v({})],yr);var vr=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(pr);vr.INDEX=pr.INDEX,vr.ACTION="crypto/subtle/encrypt",vr=be([v({})],vr);var gr=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(pr);gr.INDEX=pr.INDEX,gr.ACTION="crypto/subtle/decrypt",gr=be([v({})],gr);var dr=ar=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).algorithm=new Ue,e.key=new He,e.length=0,e}return r}(Ye);dr.INDEX=Ye.INDEX,dr.ACTION="crypto/subtle/deriveBits",be([g({id:ar.INDEX++,required:!0,parser:Ue})],dr.prototype,"algorithm",void 0),be([g({id:ar.INDEX++,required:!0,parser:He})],dr.prototype,"key",void 0),be([g({id:ar.INDEX++,required:!0,type:"uint32"})],dr.prototype,"length",void 0),dr=ar=be([v({})],dr);var mr=ir=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).algorithm=new Ue,e.key=new He,e.derivedKeyType=new Ue,e.extractable=!1,e.usage=[],e}return r}(Ye);mr.INDEX=Ye.INDEX,mr.ACTION="crypto/subtle/deriveKey",be([g({id:ir.INDEX++,required:!0,parser:Ue})],mr.prototype,"algorithm",void 0),be([g({id:ir.INDEX++,required:!0,parser:He})],mr.prototype,"key",void 0),be([g({id:ir.INDEX++,required:!0,parser:Ue})],mr.prototype,"derivedKeyType",void 0),be([g({id:ir.INDEX++,type:"bool"})],mr.prototype,"extractable",void 0),be([g({id:ir.INDEX++,type:"string",repeated:!0})],mr.prototype,"usage",void 0),mr=ir=be([v({})],mr);var kr=or=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).format="",e.wrappedKey=new ArrayBuffer(0),e.unwrappingKey=new He,e.unwrapAlgorithm=new Ue,e.unwrappedKeyAlgorithm=new Ue,e.extractable=!1,e.keyUsage=[],e}return r}(Ye);kr.INDEX=Ye.INDEX,kr.ACTION="crypto/subtle/unwrapKey",be([g({id:or.INDEX++,required:!0,type:"string"})],kr.prototype,"format",void 0),be([g({id:or.INDEX++,required:!0,converter:y})],kr.prototype,"wrappedKey",void 0),be([g({id:or.INDEX++,required:!0,parser:He})],kr.prototype,"unwrappingKey",void 0),be([g({id:or.INDEX++,required:!0,parser:Ue})],kr.prototype,"unwrapAlgorithm",void 0),be([g({id:or.INDEX++,required:!0,parser:Ue})],kr.prototype,"unwrappedKeyAlgorithm",void 0),be([g({id:or.INDEX++,type:"bool"})],kr.prototype,"extractable",void 0),be([g({id:or.INDEX++,type:"string",repeated:!0})],kr.prototype,"keyUsage",void 0),kr=or=be([v({})],kr);var br=sr=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).format="",e.key=new He,e.wrappingKey=new He,e.wrapAlgorithm=new Ue,e}return r}(Ye);br.INDEX=Ye.INDEX,br.ACTION="crypto/subtle/wrapKey",be([g({id:sr.INDEX++,required:!0,type:"string"})],br.prototype,"format",void 0),be([g({id:sr.INDEX++,required:!0,parser:He})],br.prototype,"key",void 0),be([g({id:sr.INDEX++,required:!0,parser:He})],br.prototype,"wrappingKey",void 0),be([g({id:sr.INDEX++,required:!0,parser:Ue})],br.prototype,"wrapAlgorithm",void 0),br=sr=be([v({})],br);var wr=ur=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).format="",e.key=new He,e}return r}(Ye);wr.INDEX=Ye.INDEX,wr.ACTION="crypto/subtle/exportKey",be([g({id:ur.INDEX++,type:"string",required:!0})],wr.prototype,"format",void 0),be([g({id:ur.INDEX++,required:!0,parser:He})],wr.prototype,"key",void 0),wr=ur=be([v({})],wr);var _r=cr=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).format="",e.keyData=new ArrayBuffer(0),e.algorithm=new Ue,e.extractable=!1,e.keyUsages=[],e}return r}(Ye);_r.INDEX=Ye.INDEX,_r.ACTION="crypto/subtle/importKey",be([g({id:cr.INDEX++,type:"string",required:!0})],_r.prototype,"format",void 0),be([g({id:cr.INDEX++,required:!0,converter:y})],_r.prototype,"keyData",void 0),be([g({id:cr.INDEX++,required:!0,parser:Ue})],_r.prototype,"algorithm",void 0),be([g({id:cr.INDEX++,required:!0,type:"bool"})],_r.prototype,"extractable",void 0),be([g({id:cr.INDEX++,type:"string",repeated:!0})],_r.prototype,"keyUsages",void 0),_r=cr=be([v({})],_r);var xr=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"toArrayBuffer",value:function(e){var t=this.toUint8Array(e);return t.byteOffset||t.length?t.buffer.slice(t.byteOffset,t.byteOffset+t.length):t.buffer}},{key:"toUint8Array",value:function(e){if("undefined"!=typeof Buffer&&Buffer.isBuffer(e))return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}},{key:"isBufferSource",value:function(e){return this.isArrayBufferView(e)||e instanceof ArrayBuffer}},{key:"isArrayBufferView",value:function(e){return ArrayBuffer.isView(e)||e&&e.buffer instanceof ArrayBuffer}}]),e}();function Cr(e){return"undefined"!=typeof Buffer&&Buffer.isBuffer(e)?new Uint8Array(e):xr.isArrayBufferView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Br=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"isHex",value:function(e){return"string"==typeof e&&/^[a-z0-9]+$/i.test(e)}},{key:"isBase64",value:function(e){return"string"==typeof e&&/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},{key:"isBase64Url",value:function(e){return"string"==typeof e&&/^[a-zA-Z0-9-_]+$/i.test(e)}},{key:"ToString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=Cr(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);default:throw new Error("Unknown type of encoding '".concat(t,"'"))}}},{key:"FromString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";if(!e)return new ArrayBuffer(0);switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);default:throw new Error("Unknown type of encoding '".concat(t,"'"))}}},{key:"ToBase64",value:function(e){var t=Cr(e);if("undefined"!=typeof btoa){var r=this.ToString(t,"binary");return btoa(r)}return Buffer.from(t).toString("base64")}},{key:"FromBase64",value:function(t){var r=this.formatString(t);if(!r)return new ArrayBuffer(0);if(!e.isBase64(r))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return"undefined"!=typeof atob?this.FromBinary(atob(r)):new Uint8Array(Buffer.from(r,"base64")).buffer}},{key:"FromBase64Url",value:function(t){var r=this.formatString(t);if(!r)return new ArrayBuffer(0);if(!e.isBase64Url(r))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(r.replace(/\-/g,"+").replace(/\_/g,"/")))}},{key:"ToBase64Url",value:function(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}},{key:"FromUtf8String",value:function(e){for(var t=unescape(encodeURIComponent(e)),r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r.buffer}},{key:"ToUtf8String",value:function(e){var t=Cr(e),r=String.fromCharCode.apply(null,t);return decodeURIComponent(escape(r))}},{key:"FromBinary",value:function(e){for(var t=e.length,r=new Uint8Array(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r.buffer}},{key:"ToBinary",value:function(e){for(var t=Cr(e),r="",n=t.length,a=0;a<n;a++)r+=String.fromCharCode(t[a]);return r}},{key:"ToHex",value:function(e){for(var t=Cr(e),r=[],n=t.length,a=0;a<n;a++){var i=t[a].toString(16);r.push(1===i.length?"0"+i:i)}return r.join("")}},{key:"FromHex",value:function(t){var r=this.formatString(t);if(!r)return new ArrayBuffer(0);if(!e.isHex(r))throw new TypeError("Argument 'hexString' is not HEX encoded");r.length%2&&(r="0".concat(r));for(var n=new Uint8Array(r.length/2),a=0;a<r.length;a+=2){var i=r.slice(a,a+2);n[a/2]=parseInt(i,16)}return n.buffer}},{key:"Base64Padding",value:function(e){var t=4-e.length%4;if(t<4)for(var r=0;r<t;r++)e+="=";return e}},{key:"formatString",value:function(e){return(null==e?void 0:e.replace(/[\n\r\t ]/g,""))||""}}]),e}(),Sr=function(e){_inherits(n,e);var t,r=_createSuper(n);function n(e){var t;return _classCallCheck(this,n),(t=r.call(this)).client=e,t.onEvent=t.onEvent.bind(_assertThisInitialized(t)),t.client.on("listening",(function(){t.client.on("event",t.onEvent)})).on("close",(function(){t.client.removeListener("event",t.onEvent)})),t}return _createClass(n,[{key:"readers",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.send(new Je);case 2:return t=e.sent,e.abrupt("return",JSON.parse(Br.ToString(t)));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"on",value:function(e,t){return _get5(_getPrototypeOf(n.prototype),"on",this).call(this,e,t)}},{key:"emit",value:function(e){for(var t,r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return(t=_get5(_getPrototypeOf(n.prototype),"emit",this)).call.apply(t,[this,e].concat(a))}},{key:"onEvent",value:function(e){var t=this;_asyncToGenerator(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=e.action,r.next=r.t0===ze.ACTION?3:r.t0===Ze.ACTION?9:15;break;case 3:return r.t1=t,r.next=6,ze.importProto(e);case 6:return r.t2=r.sent,r.t1.onInsert.call(r.t1,r.t2),r.abrupt("break",15);case 9:return r.t3=t,r.next=12,Ze.importProto(e);case 12:return r.t4=r.sent,r.t3.onRemove.call(r.t3,r.t4),r.abrupt("break",15);case 15:case"end":return r.stop()}}),r)})))().catch((function(e){return t.emit("error",e)}))}},{key:"onInsert",value:function(e){this.emit("insert",e)}},{key:"onRemove",value:function(e){this.emit("remove",e)}}]),n}(k),Ar=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"toArrayBuffer",value:function(e){var t=this.toUint8Array(e);return t.byteOffset||t.length?t.buffer.slice(t.byteOffset,t.byteOffset+t.length):t.buffer}},{key:"toUint8Array",value:function(e){if("undefined"!=typeof Buffer&&Buffer.isBuffer(e))return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}},{key:"isBufferSource",value:function(e){return this.isArrayBufferView(e)||e instanceof ArrayBuffer}},{key:"isArrayBufferView",value:function(e){return ArrayBuffer.isView(e)||e&&e.buffer instanceof ArrayBuffer}}]),e}();function Nr(e){return"undefined"!=typeof Buffer&&Buffer.isBuffer(e)?new Uint8Array(e):Ar.isArrayBufferView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Er=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"isHex",value:function(e){return"string"==typeof e&&/^[a-z0-9]+$/i.test(e)}},{key:"isBase64",value:function(e){return"string"==typeof e&&/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},{key:"isBase64Url",value:function(e){return"string"==typeof e&&/^[a-zA-Z0-9-_]+$/i.test(e)}},{key:"ToString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=Nr(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);default:throw new Error("Unknown type of encoding '".concat(t,"'"))}}},{key:"FromString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";if(!e)return new ArrayBuffer(0);switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);default:throw new Error("Unknown type of encoding '".concat(t,"'"))}}},{key:"ToBase64",value:function(e){var t=Nr(e);if("undefined"!=typeof btoa){var r=this.ToString(t,"binary");return btoa(r)}return Buffer.from(t).toString("base64")}},{key:"FromBase64",value:function(t){var r=this.formatString(t);if(!r)return new ArrayBuffer(0);if(!e.isBase64(r))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return"undefined"!=typeof atob?this.FromBinary(atob(r)):new Uint8Array(Buffer.from(r,"base64")).buffer}},{key:"FromBase64Url",value:function(t){var r=this.formatString(t);if(!r)return new ArrayBuffer(0);if(!e.isBase64Url(r))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(r.replace(/\-/g,"+").replace(/\_/g,"/")))}},{key:"ToBase64Url",value:function(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}},{key:"FromUtf8String",value:function(e){for(var t=unescape(encodeURIComponent(e)),r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r.buffer}},{key:"ToUtf8String",value:function(e){var t=Nr(e),r=String.fromCharCode.apply(null,t);return decodeURIComponent(escape(r))}},{key:"FromBinary",value:function(e){for(var t=e.length,r=new Uint8Array(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r.buffer}},{key:"ToBinary",value:function(e){for(var t=Nr(e),r="",n=t.length,a=0;a<n;a++)r+=String.fromCharCode(t[a]);return r}},{key:"ToHex",value:function(e){for(var t=Nr(e),r=[],n=t.length,a=0;a<n;a++){var i=t[a].toString(16);r.push(1===i.length?"0"+i:i)}return r.join("")}},{key:"FromHex",value:function(t){var r=this.formatString(t);if(!r)return new ArrayBuffer(0);if(!e.isHex(r))throw new TypeError("Argument 'hexString' is not HEX encoded");r.length%2&&(r="0".concat(r));for(var n=new Uint8Array(r.length/2),a=0;a<r.length;a+=2){var i=r.slice(a,a+2);n[a/2]=parseInt(i,16)}return n.buffer}},{key:"Base64Padding",value:function(e){var t=4-e.length%4;if(t<4)for(var r=0;r<t;r++)e+="=";return e}},{key:"formatString",value:function(e){return(null==e?void 0:e.replace(/[\n\r\t ]/g,""))||""}}]),e}();function Ir(e,t){return Tr.apply(this,arguments)}function Tr(){return(Tr=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r){var n,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.thumbprint();case 2:return n=e.sent,e.next=5,r.thumbprint();case 5:return a=e.sent,i=Er.FromHex(n+a),e.next=9,L().crypto.subtle.digest("SHA-256",i);case 9:return o=e.sent,e.abrupt("return",parseInt(Er.ToHex(o),16).toString().substr(2,6));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Rr=function e(t,r){_classCallCheck(this,e),this.target=t,this.event=r},Or=function(e){_inherits(r,_wrapNativeSuper(Error));var t=_createSuper(r);function r(e){var n;return _classCallCheck(this,r),(n=t.call(this,e.message)).name="CryptoServerError",n.code=e.code,n.type=e.type,n}return r}(),Dr=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(Rr),Ur=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,n,a,i){var o;return _classCallCheck(this,r),(o=t.call(this,e,"close")).remoteAddress=n,o.reasonCode=a,o.description=i,o}return r}(Dr),Kr=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,n){var a;return _classCallCheck(this,r),(a=t.call(this,e,"error")).error=n,a}return r}(Dr),Hr=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,n){var a;return _classCallCheck(this,r),(a=t.call(this,e,"listening")).address=n,a}return r}(Dr);function Pr(){return/firefox\/([\w\.-]+)$/i.test(self.navigator.userAgent)}function Lr(){return/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i.test(self.navigator.userAgent)}function Xr(){return/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i.test(self.navigator.userAgent)}var Gr,Fr={name:"ECDH",namedCurve:"P-256"},qr={name:"ECDSA",namedCurve:"P-256"},jr={name:"AES-CBC",iv:new ArrayBuffer(16)};function Vr(e){return Jr.apply(this,arguments)}function Jr(){return(Jr=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n,a,i,o,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ECDH"===(r=t.algorithm.name.toUpperCase())||"ECDSA"===r){e.next=3;break}throw new Error("Error: Unsupported asymmetric key algorithm.");case 3:if("public"===t.type){e.next=5;break}throw new Error("Error: Expected key type to be public but it was not.");case 5:return e.next=7,L().crypto.subtle.exportKey("jwk",t);case 7:if((n=e.sent).x&&n.y){e.next=10;break}throw new Error("Wrong JWK data for EC public key. Parameters x and y are required.");case 10:return a=Br.FromBase64Url(n.x),i=Br.FromBase64Url(n.y),o=Br.ToBinary(a)+Br.ToBinary(i),s=t,u=Br.FromBinary(o),e.t0=Br,e.next=18,L().crypto.subtle.digest("SHA-256",u);case 18:return e.t1=e.sent,c=e.t0.ToHex.call(e.t0,e.t1),e.abrupt("return",{id:c,key:s,serialized:u});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mr(e,t){return zr.apply(this,arguments)}function zr(){return(zr=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vr(r);case 2:n=e.sent,t.id=n.id,t.key=n.key,t.serialized=n.serialized;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(Gr||(Gr={}));var Wr=function(e){_inherits(c,e);var t,r,n,a,s,u=_createSuper(c);function c(e){var t;return _classCallCheck(this,c),(t=u.call(this)).stack={},t.messageCounter=0,t.storage=e,t}return _createClass(c,[{key:"connect",value:function(e,t){var r=this;return this.getServerInfo(e).then((function(n){var a=_slicedToArray(n.version.split(".").map((function(e){return parseInt(e,10)})),3),i=a[0],s=a[1];a[2];if(i<1||1===i&&s<2)throw new Error("Current version of WebCryptoSocket doesn't work with WebCryptoServer v".concat(n.version,". Please update your client to the latest version."));r.serviceInfo=n;var u="wss://".concat(e);r.socket=t?new o.default(u,void 0,t):new o.default(u),r.socket.binaryType="arraybuffer",r.socket.onerror=function(e){r.emit("error",new Kr(r,e.error))},r.socket.onopen=function(){_asyncToGenerator(regeneratorRuntime.mark((function t(){var a,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.storage.loadIdentity();case 2:if(a=t.sent){t.next=9;break}return t.next=6,j.create(1,0,0,Xr()||Lr()||Pr());case 6:return a=t.sent,t.next=9,r.storage.saveIdentity(a);case 9:return i="0",t.next=12,re.importProto(Br.FromBase64(n.preKey));case 12:return o=t.sent,t.next=15,pe.create(a,o);case 15:return r.cipher=t.sent,t.next=18,r.storage.saveRemoteIdentity(i,r.cipher.remoteIdentity);case 18:r.emit("listening",new Hr(r,e));case 19:case"end":return t.stop()}}),t)})))().catch((function(e){return r.emit("error",new Kr(r,e))}))},r.socket.onclose=function(t){for(var n in r.stack){r.stack[n].reject(new Error("Cannot finish operation. Session was closed"))}r.emit("close",new Ur(r,e,t.code,t.reason))},r.socket.onmessage=function(e){e.data instanceof ArrayBuffer&&$.importProto(e.data).then((function(e){if(!r.cipher)throw new Error("Client cipher is not initialized");return r.cipher.decrypt(e)})).then((function(e){r.onMessage(e)})).catch((function(e){r.emit("error",new Kr(r,e))}))}})).catch((function(e){r.emit("error",new Kr(r,e))})),this}},{key:"close",value:function(){this.socket&&this.socket.close()}},{key:"on",value:function(e,t){return _get5(_getPrototypeOf(c.prototype),"on",this).call(this,e,t)}},{key:"once",value:function(e,t){return _get5(_getPrototypeOf(c.prototype),"once",this).call(this,e,t)}},{key:"challenge",value:(s=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.cipher){e.next=2;break}throw new Error("Client cipher is not initialized");case 2:return e.abrupt("return",Ir(this.cipher.remoteIdentity.signingKey,this.cipher.identity.signingKey.publicKey));case 3:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"isLoggedIn",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new je,e.next=3,this.send(t);case 3:return r=e.sent,e.abrupt("return",!!r&&!!new Uint8Array(r)[0]);case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"login",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Fe,e.next=3,this.send(t);case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"send",value:function(e){var t=this;return new Promise((function(r,n){t.checkSocketState(),e||(e=new Oe),e.action=e.action,e.actionId=(t.messageCounter++).toString(),e.exportProto().then((function(e){if(!t.cipher)throw new Error("Client cipher is not initialized");return t.cipher.encrypt(e).then((function(e){return e.exportProto()}))})).then((function(a){if(!t.socket)throw new Error("Client socket is not initialized");t.stack[e.actionId]={resolve:r,reject:n},t.socket.send(a)})).catch(n)}))}},{key:"getServerInfo",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://".concat(t).concat("/.well-known/webcrypto-socket"),e.next=3,i.default(r);case 3:if(200===(n=e.sent).status){e.next=8;break}throw new Error("Cannot get wellknown link");case 8:return e.next=10,n.json();case 10:return a=e.sent,e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"checkSocketState",value:function(){if(this.state!==Gr.open)throw new Error("Socket connection is not open")}},{key:"onMessage",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.importProto(t);case 2:if(r=e.sent,!(n=this.stack[r.actionId])){e.next=16;break}return delete this.stack[r.actionId],e.t0=Xe,e.next=9,r.exportProto();case 9:return e.t1=e.sent,e.next=12,e.t0.importProto.call(e.t0,e.t1);case 12:(a=e.sent).error&&a.error.message?(i=a.error,o=new Or(i),n.reject(o)):n.resolve(a.data),e.next=17;break;case 16:this.emit("event",r);case 17:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"state",get:function(){return this.socket?this.socket.readyState:Gr.closed}}]),c}(k);
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */function Zr(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}function Yr(e,t){return e(t={exports:{}},t.exports),t.exports}function $r(e,t){var r=0;if(1===e.length)return e[0];for(var n=e.length-1;n>=0;n--)r+=e[e.length-1-n]*Math.pow(2,t*n);return r}function Qr(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=r,a=e,i=0,o=Math.pow(2,t),s=1;s<8;s++){if(e<o){var u=void 0;if(n<0)u=new ArrayBuffer(s),i=s;else{if(n<s)return new ArrayBuffer(0);u=new ArrayBuffer(n),i=n}for(var c=new Uint8Array(u),l=s-1;l>=0;l--){var f=Math.pow(2,l*t);c[i-l-1]=Math.floor(a/f),a-=c[i-l-1]*f}return u}o*=Math.pow(2,t)}return new ArrayBuffer(0)}var en="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",tn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";var rn=Math.log(2);var nn,an,on,sn=Object.freeze({__proto__:null,getUTCDate:function(e){return new Date(e.getTime()+6e4*e.getTimezoneOffset())},getParametersValue:function(e,t,r){return e instanceof Object==!1?r:t in e?e[t]:r},bufferToHexCodes:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength-r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i="",o=_createForOfIteratorHelper(new Uint8Array(e,r,n));try{for(o.s();!(t=o.n()).done;){var s=t.value,u=s.toString(16).toUpperCase();1===u.length&&(i+="0"),i+=u,a&&(i+=" ")}}catch(e){o.e(e)}finally{o.f()}return i.trim()},checkBufferParams:function(e,t,r,n){return t instanceof ArrayBuffer==!1?(e.error='Wrong parameter: inputBuffer must be "ArrayBuffer"',!1):0===t.byteLength?(e.error="Wrong parameter: inputBuffer has zero length",!1):r<0?(e.error="Wrong parameter: inputOffset less than zero",!1):n<0?(e.error="Wrong parameter: inputLength less than zero",!1):!(t.byteLength-r-n<0)||(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1)},utilFromBase:$r,utilToBase:Qr,utilConcatBuf:function(){for(var e=0,t=0,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];for(var i=0,o=n;i<o.length;i++){var s=o[i];e+=s.byteLength}for(var u=new ArrayBuffer(e),c=new Uint8Array(u),l=0,f=n;l<f.length;l++){var h=f[l];c.set(new Uint8Array(h),t),t+=h.byteLength}return u},utilConcatView:function(){for(var e=0,t=0,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];for(var i=0,o=n;i<o.length;i++){var s=o[i];e+=s.length}for(var u=new ArrayBuffer(e),c=new Uint8Array(u),l=0,f=n;l<f.length;l++){var h=f[l];c.set(h,t),t+=h.length}return c},utilDecodeTC:function(){var e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){var t=255===e[0]&&128&e[1],r=0===e[0]&&0==(128&e[1]);(t||r)&&this.warnings.push("Needlessly long format")}for(var n=new ArrayBuffer(this.valueHex.byteLength),a=new Uint8Array(n),i=0;i<this.valueHex.byteLength;i++)a[i]=0;a[0]=128&e[0];for(var o=$r(a,8),s=new ArrayBuffer(this.valueHex.byteLength),u=new Uint8Array(s),c=0;c<this.valueHex.byteLength;c++)u[c]=e[c];return u[0]&=127,$r(u,8)-o},utilEncodeTC:function(e){for(var t=e<0?-1*e:e,r=128,n=1;n<8;n++){if(t<=r){if(e<0){var a=Qr(r-t,8,n);return new Uint8Array(a)[0]|=128,a}var i=Qr(t,8,n),o=new Uint8Array(i);if(128&o[0]){var s=i.slice(0),u=new Uint8Array(s);i=new ArrayBuffer(i.byteLength+1),o=new Uint8Array(i);for(var c=0;c<s.byteLength;c++)o[c+1]=u[c];o[0]=0}return i}r*=Math.pow(2,8)}return new ArrayBuffer(0)},isEqualBuffer:function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=new Uint8Array(e),n=new Uint8Array(t),a=0;a<r.length;a++)if(r[a]!==n[a])return!1;return!0},padNumber:function(e,t){var r=e.toString(10);if(t<r.length)return"";for(var n=t-r.length,a=new Array(n),i=0;i<n;i++)a[i]="0";return a.join("").concat(r)},toBase64:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=0,i=0,o=0,s="",u=t?tn:en;if(n){for(var c=0,l=0;l<e.length;l++)if(0!==e.charCodeAt(l)){c=l;break}e=e.slice(c)}for(;a<e.length;){var f=e.charCodeAt(a++);a>=e.length&&(i=1);var h=e.charCodeAt(a++);a>=e.length&&(o=1);var p=e.charCodeAt(a++),y=f>>2,v=(3&f)<<4|h>>4,g=(15&h)<<2|p>>6,d=63&p;1===i?g=d=64:1===o&&(d=64),s+=r?64===g?"".concat(u.charAt(y)).concat(u.charAt(v)):64===d?"".concat(u.charAt(y)).concat(u.charAt(v)).concat(u.charAt(g)):"".concat(u.charAt(y)).concat(u.charAt(v)).concat(u.charAt(g)).concat(u.charAt(d)):"".concat(u.charAt(y)).concat(u.charAt(v)).concat(u.charAt(g)).concat(u.charAt(d))}return s},fromBase64:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t?tn:en;function a(e){for(var t=0;t<64;t++)if(n.charAt(t)===e)return t;return 64}function i(e){return 64===e?0:e}for(var o=0,s="";o<e.length;){var u=a(e.charAt(o++)),c=o>=e.length?0:a(e.charAt(o++)),l=o>=e.length?0:a(e.charAt(o++)),f=o>=e.length?0:a(e.charAt(o++)),h=i(u)<<2|i(c)>>4,p=(15&i(c))<<4|i(l)>>2,y=(3&i(l))<<6|i(f);s+=String.fromCharCode(h),64!==l&&(s+=String.fromCharCode(p)),64!==f&&(s+=String.fromCharCode(y))}if(r){for(var v=s.length,g=-1,d=v-1;d>=0;d--)if(0!==s.charCodeAt(d)){g=d;break}s=-1!==g?s.slice(0,g+1):""}return s},arrayBufferToString:function(e){var t,r="",n=_createForOfIteratorHelper(new Uint8Array(e));try{for(n.s();!(t=n.n()).done;){var a=t.value;r+=String.fromCharCode(a)}}catch(e){n.e(e)}finally{n.f()}return r},stringToArrayBuffer:function(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),a=0;a<t;a++)n[a]=e.charCodeAt(a);return r},nearestPowerOf2:function(e){var t=Math.log(e)/rn,r=Math.floor(t),n=Math.round(t);return r===n?r:n},clearProps:function(e,t){var r,n=_createForOfIteratorHelper(t);try{for(n.s();!(r=n.n()).done;){delete e[r.value]}}catch(e){n.e(e)}finally{n.f()}}}),un=Yr((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.fromBER=ce,t.compareSchema=le,t.verifySchema=function(e,t){if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};var r=ce(e);if(-1===r.offset)return{verified:!1,result:r.result};return le(r.result,r.result,t)},t.fromJSON=function(e){},t.RawData=t.Repeated=t.Any=t.Choice=t.TIME=t.Duration=t.DateTime=t.TimeOfDay=t.DATE=t.GeneralizedTime=t.UTCTime=t.CharacterString=t.GeneralString=t.VisibleString=t.GraphicString=t.IA5String=t.VideotexString=t.TeletexString=t.PrintableString=t.NumericString=t.UniversalString=t.BmpString=t.RelativeObjectIdentifier=t.Utf8String=t.ObjectIdentifier=t.Enumerated=t.Integer=t.BitString=t.OctetString=t.Null=t.Set=t.Sequence=t.Boolean=t.EndOfContent=t.Constructed=t.Primitive=t.BaseBlock=t.ValueBlock=t.HexBlock=void 0;var r=[new Uint8Array([1])],n="0123456789",a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.blockLength=(0,sn.getParametersValue)(t,"blockLength",0),this.error=(0,sn.getParametersValue)(t,"error",""),this.warnings=(0,sn.getParametersValue)(t,"warnings",[]),this.valueBeforeDecode="valueBeforeDecode"in t?t.valueBeforeDecode.slice(0):new ArrayBuffer(0)}return _createClass(e,[{key:"toJSON",value:function(){return{blockName:this.constructor.blockName(),blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:(0,sn.bufferToHexCodes)(this.valueBeforeDecode,0,this.valueBeforeDecode.byteLength)}}}],[{key:"blockName",value:function(){return"baseBlock"}}]),e}(),i=function(e){return function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).isHexOnly=(0,sn.getParametersValue)(n,"isHexOnly",!1),e.valueHex="valueHex"in n?n.valueHex.slice(0):new ArrayBuffer(0),e}return _createClass(r,[{key:"fromBER",value:function(e,t,r){return!1===(0,sn.checkBufferParams)(this,e,t,r)?-1:0===new Uint8Array(e,t,r).length?(this.warnings.push("Zero buffer length"),t):(this.valueHex=e.slice(t,t+r),this.blockLength=r,t+r)}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!0!==this.isHexOnly?(this.error='Flag "isHexOnly" is not set, abort',new ArrayBuffer(0)):!0===e?new ArrayBuffer(this.valueHex.byteLength):this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=_get5(_getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.isHexOnly=this.isHexOnly,e.valueHex=(0,sn.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"hexBlock"}}]),r}(e)};t.HexBlock=i;var o=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),e=t.call(this),"idBlock"in n?(e.isHexOnly=(0,sn.getParametersValue)(n.idBlock,"isHexOnly",!1),e.valueHex=(0,sn.getParametersValue)(n.idBlock,"valueHex",new ArrayBuffer(0)),e.tagClass=(0,sn.getParametersValue)(n.idBlock,"tagClass",-1),e.tagNumber=(0,sn.getParametersValue)(n.idBlock,"tagNumber",-1),e.isConstructed=(0,sn.getParametersValue)(n.idBlock,"isConstructed",!1)):(e.tagClass=-1,e.tagNumber=-1,e.isConstructed=!1),e}return _createClass(r,[{key:"toBER",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=0;switch(this.tagClass){case 1:n|=0;break;case 2:n|=64;break;case 3:n|=128;break;case 4:n|=192;break;default:return this.error="Unknown tag class",new ArrayBuffer(0)}if(this.isConstructed&&(n|=32),this.tagNumber<31&&!this.isHexOnly){if(e=new ArrayBuffer(1),t=new Uint8Array(e),!r){var a=this.tagNumber;n|=a&=31,t[0]=n}return e}if(!1===this.isHexOnly){var i=(0,sn.utilToBase)(this.tagNumber,7),o=new Uint8Array(i),s=i.byteLength;if(e=new ArrayBuffer(s+1),(t=new Uint8Array(e))[0]=31|n,!r){for(var u=0;u<s-1;u++)t[u+1]=128|o[u];t[s]=o[s-1]}return e}if(e=new ArrayBuffer(this.valueHex.byteLength+1),(t=new Uint8Array(e))[0]=31|n,!1===r){for(var c=new Uint8Array(this.valueHex),l=0;l<c.length-1;l++)t[l+1]=128|c[l];t[this.valueHex.byteLength]=c[c.length-1]}return e}},{key:"fromBER",value:function(e,t,r){if(!1===(0,sn.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.error="Zero buffer length",-1;switch(192&n[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=32==(32&n[0]),this.isHexOnly=!1;var a=31&n[0];if(31!==a)this.tagNumber=a,this.blockLength=1;else{var i=1;this.valueHex=new ArrayBuffer(255);for(var o=255,s=new Uint8Array(this.valueHex);128&n[i];){if(s[i-1]=127&n[i],++i>=n.length)return this.error="End of input reached before message was fully decoded",-1;if(i===o){o+=255;for(var u=new ArrayBuffer(o),c=new Uint8Array(u),l=0;l<s.length;l++)c[l]=s[l];this.valueHex=new ArrayBuffer(o),s=new Uint8Array(this.valueHex)}}this.blockLength=i+1,s[i-1]=127&n[i];for(var f=new ArrayBuffer(i),h=new Uint8Array(f),p=0;p<i;p++)h[p]=s[p];this.valueHex=new ArrayBuffer(i),(s=new Uint8Array(this.valueHex)).set(h),this.blockLength<=9?this.tagNumber=(0,sn.utilFromBase)(s,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}},{key:"toJSON",value:function(){var e={};try{e=_get5(_getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.tagClass=this.tagClass,e.tagNumber=this.tagNumber,e.isConstructed=this.isConstructed,e}}],[{key:"blockName",value:function(){return"identificationBlock"}}]),r}(i(a)),s=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),e=t.call(this),"lenBlock"in n?(e.isIndefiniteForm=(0,sn.getParametersValue)(n.lenBlock,"isIndefiniteForm",!1),e.longFormUsed=(0,sn.getParametersValue)(n.lenBlock,"longFormUsed",!1),e.length=(0,sn.getParametersValue)(n.lenBlock,"length",0)):(e.isIndefiniteForm=!1,e.longFormUsed=!1,e.length=0),e}return _createClass(r,[{key:"fromBER",value:function(e,t,r){if(!1===(0,sn.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.error="Zero buffer length",-1;if(255===n[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===n[0],!0===this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&n[0]),!1===this.longFormUsed)return this.length=n[0],this.blockLength=1,t+this.blockLength;var a=127&n[0];if(a>8)return this.error="Too big integer",-1;if(a+1>n.length)return this.error="End of input reached before message was fully decoded",-1;for(var i=new Uint8Array(a),o=0;o<a;o++)i[o]=n[o+1];return 0===i[a-1]&&this.warnings.push("Needlessly long encoded length"),this.length=(0,sn.utilFromBase)(i,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unneccesary usage of long length form"),this.blockLength=a+1,t+this.blockLength}},{key:"toBER",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return e=new ArrayBuffer(1),!1===r&&((t=new Uint8Array(e))[0]=128),e;if(!0===this.longFormUsed){var n=(0,sn.utilToBase)(this.length,8);if(n.byteLength>127)return this.error="Too big length",new ArrayBuffer(0);if(e=new ArrayBuffer(n.byteLength+1),!0===r)return e;var a=new Uint8Array(n);(t=new Uint8Array(e))[0]=128|n.byteLength;for(var i=0;i<n.byteLength;i++)t[i+1]=a[i];return e}return e=new ArrayBuffer(1),!1===r&&((t=new Uint8Array(e))[0]=this.length),e}},{key:"toJSON",value:function(){var e={};try{e=_get5(_getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.isIndefiniteForm=this.isIndefiniteForm,e.longFormUsed=this.longFormUsed,e.length=this.length,e}}],[{key:"blockName",value:function(){return"lengthBlock"}}]),r}(a),u=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),t.call(this,e)}return _createClass(r,[{key:"fromBER",value:function(e,t,r){throw TypeError('User need to make a specific function in a class which extends "ValueBlock"')}},{key:"toBER",value:function(){throw TypeError('User need to make a specific function in a class which extends "ValueBlock"')}}],[{key:"blockName",value:function(){return"valueBlock"}}]),r}(a);t.ValueBlock=u;var c=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;return _classCallCheck(this,r),e=t.call(this,n),"name"in n&&(e.name=n.name),"optional"in n&&(e.optional=n.optional),"primitiveSchema"in n&&(e.primitiveSchema=n.primitiveSchema),e.idBlock=new o(n),e.lenBlock=new s(n),e.valueBlock=new a(n),e}return _createClass(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"toBER",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.idBlock.toBER(t),n=this.valueBlock.toBER(!0);this.lenBlock.length=n.byteLength;var a,i=this.lenBlock.toBER(t);if(e=(0,sn.utilConcatBuf)(r,i),a=!1===t?this.valueBlock.toBER(t):new ArrayBuffer(this.lenBlock.length),e=(0,sn.utilConcatBuf)(e,a),!0===this.lenBlock.isIndefiniteForm){var o=new ArrayBuffer(2);if(!1===t){var s=new Uint8Array(o);s[0]=0,s[1]=0}e=(0,sn.utilConcatBuf)(e,o)}return e}},{key:"toJSON",value:function(){var e={};try{e=_get5(_getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}return e.idBlock=this.idBlock.toJSON(),e.lenBlock=this.lenBlock.toJSON(),e.valueBlock=this.valueBlock.toJSON(),"name"in this&&(e.name=this.name),"optional"in this&&(e.optional=this.optional),"primitiveSchema"in this&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}}],[{key:"blockName",value:function(){return"BaseBlock"}}]),r}(a);t.BaseBlock=c;var l=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).valueHex="valueHex"in n?n.valueHex.slice(0):new ArrayBuffer(0),e.isHexOnly=(0,sn.getParametersValue)(n,"isHexOnly",!0),e}return _createClass(r,[{key:"fromBER",value:function(e,t,r){if(!1===(0,sn.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.warnings.push("Zero buffer length"),t;this.valueHex=new ArrayBuffer(n.length);for(var a=new Uint8Array(this.valueHex),i=0;i<n.length;i++)a[i]=n[i];return this.blockLength=r,t+r}},{key:"toBER",value:function(){return this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=_get5(_getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}return e.valueHex=(0,sn.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e.isHexOnly=this.isHexOnly,e}}],[{key:"blockName",value:function(){return"PrimitiveValueBlock"}}]),r}(u),f=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n,l)).idBlock.isConstructed=!1,e}return _createClass(r,null,[{key:"blockName",value:function(){return"PRIMITIVE"}}]),r}(c);t.Primitive=f;var h=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).value=(0,sn.getParametersValue)(n,"value",[]),e.isIndefiniteForm=(0,sn.getParametersValue)(n,"isIndefiniteForm",!1),e}return _createClass(r,[{key:"fromBER",value:function(e,t,r){var n=t,a=r;if(!1===(0,sn.checkBufferParams)(this,e,t,r))return-1;if(0===new Uint8Array(e,t,r).length)return this.warnings.push("Zero buffer length"),t;for(var i,o,s=t;i=this.isIndefiniteForm,o=r,(!0===i?1:o)>0;){var u=ue(e,s,r);if(-1===u.offset)return this.error=u.result.error,this.warnings.concat(u.result.warnings),-1;if(s=u.offset,this.blockLength+=u.result.blockLength,r-=u.result.blockLength,this.value.push(u.result),!0===this.isIndefiniteForm&&u.result.constructor.blockName()===v.blockName())break}return!0===this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.blockName()===v.blockName()?this.value.pop():this.warnings.push("No EndOfContent block encoded")),this.valueBeforeDecode=e.slice(n,n+a),s}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);t=(0,sn.utilConcatBuf)(t,n)}return t}},{key:"toJSON",value:function(){var e={};try{e=_get5(_getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}e.isIndefiniteForm=this.isIndefiniteForm,e.value=[];for(var t=0;t<this.value.length;t++)e.value.push(this.value[t].toJSON());return e}}],[{key:"blockName",value:function(){return"ConstructedValueBlock"}}]),r}(u),p=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n,h)).idBlock.isConstructed=!0,e}return _createClass(r,[{key:"fromBER",value:function(e,t,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}}],[{key:"blockName",value:function(){return"CONSTRUCTED"}}]),r}(c);t.Constructed=p;var y=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),t.call(this,e)}return _createClass(r,[{key:"fromBER",value:function(e,t,r){return t}},{key:"toBER",value:function(){return new ArrayBuffer(0)}}],[{key:"blockName",value:function(){return"EndOfContentValueBlock"}}]),r}(u),v=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n,y)).idBlock.tagClass=1,e.idBlock.tagNumber=0,e}return _createClass(r,null,[{key:"blockName",value:function(){return"EndOfContent"}}]),r}(c);t.EndOfContent=v;var g=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,r),(e=t.call(this,n)).value=(0,sn.getParametersValue)(n,"value",!1),e.isHexOnly=(0,sn.getParametersValue)(n,"isHexOnly",!1),"valueHex"in n)e.valueHex=n.valueHex.slice(0);else if(e.valueHex=new ArrayBuffer(1),!0===e.value){var a=new Uint8Array(e.valueHex);a[0]=255}return e}return _createClass(r,[{key:"fromBER",value:function(e,t,r){if(!1===(0,sn.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);r>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,this.valueHex=new ArrayBuffer(n.length);for(var a=new Uint8Array(this.valueHex),i=0;i<n.length;i++)a[i]=n[i];return 0!==sn.utilDecodeTC.call(this)?this.value=!0:this.value=!1,this.blockLength=r,t+r}},{key:"toBER",value:function(){return this.valueHex}},{key:"toJSON",value:function(){var e={};try{e=_get5(_getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e.isHexOnly=this.isHexOnly,e.valueHex=(0,sn.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"BooleanValueBlock"}}]),r}(u),d=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n,g)).idBlock.tagClass=1,e.idBlock.tagNumber=1,e}return _createClass(r,null,[{key:"blockName",value:function(){return"Boolean"}}]),r}(c);t.Boolean=d;var m=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=16,e}return _createClass(r,null,[{key:"blockName",value:function(){return"Sequence"}}]),r}(p);t.Sequence=m;var k=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=17,e}return _createClass(r,null,[{key:"blockName",value:function(){return"Set"}}]),r}(p);t.Set=k;var b=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n,a)).idBlock.tagClass=1,e.idBlock.tagNumber=5,e}return _createClass(r,[{key:"fromBER",value:function(e,t,r){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=r,t+r>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+r}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(2);if(!0===e)return t;var r=new Uint8Array(t);return r[0]=5,r[1]=0,t}}],[{key:"blockName",value:function(){return"Null"}}]),r}(c);t.Null=b;var w=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).isConstructed=(0,sn.getParametersValue)(n,"isConstructed",!1),e}return _createClass(r,[{key:"fromBER",value:function(e,t,n){var a=0;if(!0===this.isConstructed){if(this.isHexOnly=!1,-1===(a=h.prototype.fromBER.call(this,e,t,n)))return a;for(var i=0;i<this.value.length;i++){var o=this.value[i].constructor.blockName();if(o===v.blockName()){if(!0===this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(o!==_.blockName())return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,a=_get5(_getPrototypeOf(r.prototype),"fromBER",this).call(this,e,t,n),this.blockLength=n;return a}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===this.isConstructed)return h.prototype.toBER.call(this,e);var t=new ArrayBuffer(this.valueHex.byteLength);return!0===e||0===this.valueHex.byteLength?t:t=this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=_get5(_getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}return e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=(0,sn.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"OctetStringValueBlock"}}]),r}(i(h)),_=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n,w)).idBlock.tagClass=1,e.idBlock.tagNumber=4,e}return _createClass(r,[{key:"fromBER",value:function(e,t,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===n?(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),t):_get5(_getPrototypeOf(r.prototype),"fromBER",this).call(this,e,t,n)}},{key:"isEqual",value:function(e){return e instanceof r!=!1&&JSON.stringify(this)===JSON.stringify(e)}}],[{key:"blockName",value:function(){return"OctetString"}}]),r}(c);t.OctetString=_;var x=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).unusedBits=(0,sn.getParametersValue)(n,"unusedBits",0),e.isConstructed=(0,sn.getParametersValue)(n,"isConstructed",!1),e.blockLength=e.valueHex.byteLength,e}return _createClass(r,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;var n=-1;if(!0===this.isConstructed){if(-1===(n=h.prototype.fromBER.call(this,e,t,r)))return n;for(var a=0;a<this.value.length;a++){var i=this.value[a].constructor.blockName();if(i===v.blockName()){if(!0===this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(i!==C.blockName())return this.error="BIT STRING may consists of BIT STRINGs only",-1;if(this.unusedBits>0&&this.value[a].valueBlock.unusedBits>0)return this.error='Usign of "unused bits" inside constructive BIT STRING allowed for least one only',-1;if(this.unusedBits=this.value[a].valueBlock.unusedBits,this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1}return n}if(!1===(0,sn.checkBufferParams)(this,e,t,r))return-1;var o=new Uint8Array(e,t,r);if(this.unusedBits=o[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;this.valueHex=new ArrayBuffer(o.length-1);for(var s=new Uint8Array(this.valueHex),u=0;u<r-1;u++)s[u]=o[u+1];return this.blockLength=o.length,t+r}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===this.isConstructed)return h.prototype.toBER.call(this,e);if(!0===e)return new ArrayBuffer(this.valueHex.byteLength+1);if(0===this.valueHex.byteLength)return new ArrayBuffer(0);var t=new Uint8Array(this.valueHex),r=new ArrayBuffer(this.valueHex.byteLength+1),n=new Uint8Array(r);n[0]=this.unusedBits;for(var a=0;a<this.valueHex.byteLength;a++)n[a+1]=t[a];return r}},{key:"toJSON",value:function(){var e={};try{e=_get5(_getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}return e.unusedBits=this.unusedBits,e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=(0,sn.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"BitStringValueBlock"}}]),r}(i(h)),C=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n,x)).idBlock.tagClass=1,e.idBlock.tagNumber=3,e}return _createClass(r,[{key:"fromBER",value:function(e,t,n){return 0===n?t:(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,_get5(_getPrototypeOf(r.prototype),"fromBER",this).call(this,e,t,n))}},{key:"isEqual",value:function(e){return e instanceof r!=!1&&JSON.stringify(this)===JSON.stringify(e)}}],[{key:"blockName",value:function(){return"BitString"}}]),r}(c);t.BitString=C;var B=function(e){_inherits(a,e);var t=_createSuper(a);function a(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,a),e=t.call(this,r),"value"in r&&(e.valueDec=r.value),e}return _createClass(a,[{key:"fromDER",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=this.fromBER(e,t,r);if(-1===a)return a;var i=new Uint8Array(this._valueHex);if(0===i[0]&&0!=(128&i[1])){var o=new ArrayBuffer(this._valueHex.byteLength-1),s=new Uint8Array(o);s.set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=o.slice(0)}else if(0!==n&&this._valueHex.byteLength<n){n-this._valueHex.byteLength>1&&(n=this._valueHex.byteLength+1);var u=new ArrayBuffer(n),c=new Uint8Array(u);c.set(i,n-this._valueHex.byteLength),this._valueHex=u.slice(0)}return a}},{key:"toDER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new Uint8Array(this._valueHex);switch(!0){case 0!=(128&t[0]):var r=new ArrayBuffer(this._valueHex.byteLength+1),n=new Uint8Array(r);n[0]=0,n.set(t,1),this._valueHex=r.slice(0);break;case 0===t[0]&&0==(128&t[1]):var a=new ArrayBuffer(this._valueHex.byteLength-1),i=new Uint8Array(a);i.set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=a.slice(0)}return this.toBER(e)}},{key:"fromBER",value:function(e,t,r){var n=_get5(_getPrototypeOf(a.prototype),"fromBER",this).call(this,e,t,r);return-1===n?n:(this.blockLength=r,t+r)}},{key:"toBER",value:function(){return this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=_get5(_getPrototypeOf(a.prototype),"toJSON",this).call(this)}catch(e){}return e.valueDec=this.valueDec,e}},{key:"toString",value:function(){function e(e,t){for(var r=new Uint8Array([0]),n=new Uint8Array(e),a=new Uint8Array(t),i=n.slice(0),o=i.length-1,s=a.slice(0),u=s.length-1,c=0,l=0,f=u<o?o:u;f>=0;f--,l++){switch(!0){case l<s.length:c=i[o-l]+s[u-l]+r[0];break;default:c=i[o-l]+r[0]}switch(r[0]=c/10,!0){case l>=i.length:i=(0,sn.utilConcatView)(new Uint8Array([c%10]),i);break;default:i[o-l]=c%10}}return r[0]>0&&(i=(0,sn.utilConcatView)(r,i)),i.slice(0)}function t(e){if(e>=r.length)for(var t=r.length;t<=e;t++){for(var n=new Uint8Array([0]),a=r[t-1].slice(0),i=a.length-1;i>=0;i--){var o=new Uint8Array([(a[i]<<1)+n[0]]);n[0]=o[0]/10,a[i]=o[0]%10}n[0]>0&&(a=(0,sn.utilConcatView)(n,a)),r.push(a)}return r[e]}function a(e,t){for(var r,n=0,a=new Uint8Array(e),i=new Uint8Array(t),o=a.slice(0),s=o.length-1,u=i.slice(0),c=u.length-1,l=0,f=c;f>=0;f--,l++)switch(r=o[s-l]-u[c-l]-n,!0){case r<0:n=1,o[s-l]=r+10;break;default:n=0,o[s-l]=r}if(n>0)for(var h=s-c+1;h>=0;h--,l++){if(!((r=o[s-l]-n)<0)){n=0,o[s-l]=r;break}n=1,o[s-l]=r+10}return o.slice()}for(var i,o=8*this._valueHex.byteLength-1,s=new Uint8Array(8*this._valueHex.byteLength/3),u=0,c=new Uint8Array(this._valueHex),l="",f=!1,h=this._valueHex.byteLength-1;h>=0;h--){i=c[h];for(var p=0;p<8;p++){if(1==(1&i))switch(u){case o:s=a(t(u),s),l="-";break;default:s=e(s,t(u))}u++,i>>=1}}for(var y=0;y<s.length;y++)s[y]&&(f=!0),f&&(l+=n.charAt(s[y]));return!1===f&&(l+=n.charAt(0)),l}},{key:"valueHex",set:function(e){this._valueHex=e.slice(0),e.byteLength>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,e.byteLength>0&&(this._valueDec=sn.utilDecodeTC.call(this)))},get:function(){return this._valueHex}},{key:"valueDec",set:function(e){this._valueDec=e,this.isHexOnly=!1,this._valueHex=(0,sn.utilEncodeTC)(e)},get:function(){return this._valueDec}}],[{key:"blockName",value:function(){return"IntegerValueBlock"}}]),a}(i(u)),S=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n,B)).idBlock.tagClass=1,e.idBlock.tagNumber=2,e}return _createClass(r,[{key:"isEqual",value:function(e){return e instanceof r?this.valueBlock.isHexOnly&&e.valueBlock.isHexOnly?(0,sn.isEqualBuffer)(this.valueBlock.valueHex,e.valueBlock.valueHex):this.valueBlock.isHexOnly===e.valueBlock.isHexOnly&&this.valueBlock.valueDec===e.valueBlock.valueDec:e instanceof ArrayBuffer&&(0,sn.isEqualBuffer)(this.valueBlock.valueHex,e)}},{key:"convertToDER",value:function(){var e=new r({valueHex:this.valueBlock.valueHex});return e.valueBlock.toDER(),e}},{key:"convertFromDER",value:function(){var e=this.valueBlock.valueHex.byteLength%2?this.valueBlock.valueHex.byteLength+1:this.valueBlock.valueHex.byteLength,t=new r({valueHex:this.valueBlock.valueHex});return t.valueBlock.fromDER(t.valueBlock.valueHex,0,t.valueBlock.valueHex.byteLength,e),t}}],[{key:"blockName",value:function(){return"Integer"}}]),r}(c);t.Integer=S;var A=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=10,e}return _createClass(r,null,[{key:"blockName",value:function(){return"Enumerated"}}]),r}(S);t.Enumerated=A;var N=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).valueDec=(0,sn.getParametersValue)(n,"valueDec",-1),e.isFirstSid=(0,sn.getParametersValue)(n,"isFirstSid",!1),e}return _createClass(r,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;if(!1===(0,sn.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);this.valueHex=new ArrayBuffer(r);for(var a=new Uint8Array(this.valueHex),i=0;i<r&&(a[i]=127&n[i],this.blockLength++,0!=(128&n[i]));i++);for(var o=new ArrayBuffer(this.blockLength),s=new Uint8Array(o),u=0;u<this.blockLength;u++)s[u]=a[u];return this.valueHex=o.slice(0),a=new Uint8Array(this.valueHex),0!=(128&n[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===a[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=(0,sn.utilFromBase)(a,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}},{key:"toBER",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isHexOnly){if(!0===r)return new ArrayBuffer(this.valueHex.byteLength);var n=new Uint8Array(this.valueHex);e=new ArrayBuffer(this.blockLength),t=new Uint8Array(e);for(var a=0;a<this.blockLength-1;a++)t[a]=128|n[a];return t[this.blockLength-1]=n[this.blockLength-1],e}var i=(0,sn.utilToBase)(this.valueDec,7);if(0===i.byteLength)return this.error="Error during encoding SID value",new ArrayBuffer(0);if(e=new ArrayBuffer(i.byteLength),!1===r){var o=new Uint8Array(i);t=new Uint8Array(e);for(var s=0;s<i.byteLength-1;s++)t[s]=128|o[s];t[i.byteLength-1]=o[i.byteLength-1]}return e}},{key:"toString",value:function(){var e="";if(!0===this.isHexOnly)e=(0,sn.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength);else if(this.isFirstSid){var t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}},{key:"toJSON",value:function(){var e={};try{e=_get5(_getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}return e.valueDec=this.valueDec,e.isFirstSid=this.isFirstSid,e}}],[{key:"blockName",value:function(){return"sidBlock"}}]),r}(i(a)),E=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).fromString((0,sn.getParametersValue)(n,"value","")),e}return _createClass(r,[{key:"fromBER",value:function(e,t,r){for(var n=t;r>0;){var a=new N;if(-1===(n=a.fromBER(e,n,r)))return this.blockLength=0,this.error=a.error,n;0===this.value.length&&(a.isFirstSid=!0),this.blockLength+=a.blockLength,r-=a.blockLength,this.value.push(a)}return n}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);if(0===n.byteLength)return this.error=this.value[r].error,new ArrayBuffer(0);t=(0,sn.utilConcatBuf)(t,n)}return t}},{key:"fromString",value:function(e){this.value=[];var t=0,r=0,n="",a=!1;do{if(n=-1===(r=e.indexOf(".",t))?e.substr(t):e.substr(t,r-t),t=r+1,a){var i=this.value[0],o=0;switch(i.valueDec){case 0:break;case 1:o=40;break;case 2:o=80;break;default:return this.value=[],!1}var s=parseInt(n,10);if(isNaN(s))return!0;i.valueDec=s+o,a=!1}else{var u=new N;if(u.valueDec=parseInt(n,10),isNaN(u.valueDec))return!0;0===this.value.length&&(u.isFirstSid=!0,a=!0),this.value.push(u)}}while(-1!==r);return!0}},{key:"toString",value:function(){for(var e="",t=!1,r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;var n=this.value[r].toString();0!==r&&(e="".concat(e,".")),t?(n="{".concat(n,"}"),this.value[r].isFirstSid?e="2.{".concat(n," - 80}"):e+=n):e+=n}return e}},{key:"toJSON",value:function(){var e={};try{e=_get5(_getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}e.value=this.toString(),e.sidArray=[];for(var t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}],[{key:"blockName",value:function(){return"ObjectIdentifierValueBlock"}}]),r}(u),I=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n,E)).idBlock.tagClass=1,e.idBlock.tagNumber=6,e}return _createClass(r,null,[{key:"blockName",value:function(){return"ObjectIdentifier"}}]),r}(c);t.ObjectIdentifier=I;var T=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).isHexOnly=!0,e.value="",e}return _createClass(r,[{key:"toJSON",value:function(){var e={};try{e=_get5(_getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"Utf8StringValueBlock"}}]),r}(i(a)),R=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),e=t.call(this,n,T),"value"in n&&e.fromString(n.value),e.idBlock.tagClass=1,e.idBlock.tagNumber=12,e}return _createClass(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e));try{this.valueBlock.value=decodeURIComponent(escape(this.valueBlock.value))}catch(e){this.warnings.push('Error during "decodeURIComponent": '.concat(e,", using raw string"))}}},{key:"fromString",value:function(e){var t=unescape(encodeURIComponent(e)),r=t.length;this.valueBlock.valueHex=new ArrayBuffer(r);for(var n=new Uint8Array(this.valueBlock.valueHex),a=0;a<r;a++)n[a]=t.charCodeAt(a);this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"Utf8String"}}]),r}(c);t.Utf8String=R;var O=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).valueDec=(0,sn.getParametersValue)(n,"valueDec",-1),e}return _createClass(r,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;if(!1===(0,sn.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);this.valueHex=new ArrayBuffer(r);for(var a=new Uint8Array(this.valueHex),i=0;i<r&&(a[i]=127&n[i],this.blockLength++,0!=(128&n[i]));i++);for(var o=new ArrayBuffer(this.blockLength),s=new Uint8Array(o),u=0;u<this.blockLength;u++)s[u]=a[u];return this.valueHex=o.slice(0),a=new Uint8Array(this.valueHex),0!=(128&n[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===a[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=(0,sn.utilFromBase)(a,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}},{key:"toBER",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isHexOnly){if(!0===r)return new ArrayBuffer(this.valueHex.byteLength);var n=new Uint8Array(this.valueHex);e=new ArrayBuffer(this.blockLength),t=new Uint8Array(e);for(var a=0;a<this.blockLength-1;a++)t[a]=128|n[a];return t[this.blockLength-1]=n[this.blockLength-1],e}var i=(0,sn.utilToBase)(this.valueDec,7);if(0===i.byteLength)return this.error="Error during encoding SID value",new ArrayBuffer(0);if(e=new ArrayBuffer(i.byteLength),!1===r){var o=new Uint8Array(i);t=new Uint8Array(e);for(var s=0;s<i.byteLength-1;s++)t[s]=128|o[s];t[i.byteLength-1]=o[i.byteLength-1]}return e}},{key:"toString",value:function(){return!0===this.isHexOnly?(0,sn.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength):this.valueDec.toString()}},{key:"toJSON",value:function(){var e={};try{e=_get5(_getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}return e.valueDec=this.valueDec,e}}],[{key:"blockName",value:function(){return"relativeSidBlock"}}]),r}(i(a)),D=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).fromString((0,sn.getParametersValue)(n,"value","")),e}return _createClass(r,[{key:"fromBER",value:function(e,t,r){for(var n=t;r>0;){var a=new O;if(-1===(n=a.fromBER(e,n,r)))return this.blockLength=0,this.error=a.error,n;this.blockLength+=a.blockLength,r-=a.blockLength,this.value.push(a)}return n}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);if(0===n.byteLength)return this.error=this.value[r].error,new ArrayBuffer(0);t=(0,sn.utilConcatBuf)(t,n)}return t}},{key:"fromString",value:function(e){this.value=[];var t=0,r=0,n="";do{n=-1===(r=e.indexOf(".",t))?e.substr(t):e.substr(t,r-t),t=r+1;var a=new O;if(a.valueDec=parseInt(n,10),isNaN(a.valueDec))return!0;this.value.push(a)}while(-1!==r);return!0}},{key:"toString",value:function(){for(var e="",t=!1,r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;var n=this.value[r].toString();0!==r&&(e="".concat(e,".")),e+=t?n="{".concat(n,"}"):n}return e}},{key:"toJSON",value:function(){var e={};try{e=_get5(_getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}e.value=this.toString(),e.sidArray=[];for(var t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}],[{key:"blockName",value:function(){return"RelativeObjectIdentifierValueBlock"}}]),r}(u),U=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n,D)).idBlock.tagClass=1,e.idBlock.tagNumber=13,e}return _createClass(r,null,[{key:"blockName",value:function(){return"RelativeObjectIdentifier"}}]),r}(c);t.RelativeObjectIdentifier=U;var K=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).isHexOnly=!0,e.value="",e}return _createClass(r,[{key:"toJSON",value:function(){var e={};try{e=_get5(_getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"BmpStringValueBlock"}}]),r}(i(a)),H=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),e=t.call(this,n,K),"value"in n&&e.fromString(n.value),e.idBlock.tagClass=1,e.idBlock.tagNumber=30,e}return _createClass(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){for(var t=e.slice(0),r=new Uint8Array(t),n=0;n<r.length;n+=2){var a=r[n];r[n]=r[n+1],r[n+1]=a}this.valueBlock.value=String.fromCharCode.apply(null,new Uint16Array(t))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(2*t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++){var a=(0,sn.utilToBase)(e.charCodeAt(n),8),i=new Uint8Array(a);if(!(i.length>2))for(var o=2-i.length,s=i.length-1;s>=0;s--)r[2*n+s+o]=i[s]}this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"BmpString"}}]),r}(c);t.BmpString=H;var P=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).isHexOnly=!0,e.value="",e}return _createClass(r,[{key:"toJSON",value:function(){var e={};try{e=_get5(_getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"UniversalStringValueBlock"}}]),r}(i(a)),L=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),e=t.call(this,n,P),"value"in n&&e.fromString(n.value),e.idBlock.tagClass=1,e.idBlock.tagNumber=28,e}return _createClass(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){for(var t=e.slice(0),r=new Uint8Array(t),n=0;n<r.length;n+=4)r[n]=r[n+3],r[n+1]=r[n+2],r[n+2]=0,r[n+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(4*t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++){var a=(0,sn.utilToBase)(e.charCodeAt(n),8),i=new Uint8Array(a);if(!(i.length>4))for(var o=4-i.length,s=i.length-1;s>=0;s--)r[4*n+s+o]=i[s]}this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"UniversalString"}}]),r}(c);t.UniversalString=L;var X=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).value="",e.isHexOnly=!0,e}return _createClass(r,[{key:"toJSON",value:function(){var e={};try{e=_get5(_getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"SimpleStringValueBlock"}}]),r}(i(a)),G=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),e=t.call(this,n,X),"value"in n&&e.fromString(n.value),e}return _createClass(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++)r[n]=e.charCodeAt(n);this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"SIMPLESTRING"}}]),r}(c),F=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=18,e}return _createClass(r,null,[{key:"blockName",value:function(){return"NumericString"}}]),r}(G);t.NumericString=F;var q=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=19,e}return _createClass(r,null,[{key:"blockName",value:function(){return"PrintableString"}}]),r}(G);t.PrintableString=q;var j=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=20,e}return _createClass(r,null,[{key:"blockName",value:function(){return"TeletexString"}}]),r}(G);t.TeletexString=j;var V=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=21,e}return _createClass(r,null,[{key:"blockName",value:function(){return"VideotexString"}}]),r}(G);t.VideotexString=V;var J=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=22,e}return _createClass(r,null,[{key:"blockName",value:function(){return"IA5String"}}]),r}(G);t.IA5String=J;var M=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=25,e}return _createClass(r,null,[{key:"blockName",value:function(){return"GraphicString"}}]),r}(G);t.GraphicString=M;var z=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=26,e}return _createClass(r,null,[{key:"blockName",value:function(){return"VisibleString"}}]),r}(G);t.VisibleString=z;var W=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=27,e}return _createClass(r,null,[{key:"blockName",value:function(){return"GeneralString"}}]),r}(G);t.GeneralString=W;var Z=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=29,e}return _createClass(r,null,[{key:"blockName",value:function(){return"CharacterString"}}]),r}(G);t.CharacterString=Z;var Y=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,r),(e=t.call(this,n)).year=0,e.month=0,e.day=0,e.hour=0,e.minute=0,e.second=0,"value"in n){e.fromString(n.value),e.valueBlock.valueHex=new ArrayBuffer(n.value.length);for(var a=new Uint8Array(e.valueBlock.valueHex),i=0;i<n.value.length;i++)a[i]=n.value.charCodeAt(i)}return"valueDate"in n&&(e.fromDate(n.valueDate),e.valueBlock.valueHex=e.toBuffer()),e.idBlock.tagClass=1,e.idBlock.tagNumber=23,e}return _createClass(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}},{key:"toBuffer",value:function(){for(var e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t}},{key:"fromDate",value:function(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}},{key:"toDate",value:function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}},{key:"fromString",value:function(e){var t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi.exec(e);if(null!==t){var r=parseInt(t[1],10);this.year=r>=50?1900+r:2e3+r,this.month=parseInt(t[2],10),this.day=parseInt(t[3],10),this.hour=parseInt(t[4],10),this.minute=parseInt(t[5],10),this.second=parseInt(t[6],10)}else this.error="Wrong input string for convertion"}},{key:"toString",value:function(){var e=new Array(7);return e[0]=(0,sn.padNumber)(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=(0,sn.padNumber)(this.month,2),e[2]=(0,sn.padNumber)(this.day,2),e[3]=(0,sn.padNumber)(this.hour,2),e[4]=(0,sn.padNumber)(this.minute,2),e[5]=(0,sn.padNumber)(this.second,2),e[6]="Z",e.join("")}},{key:"toJSON",value:function(){var e={};try{e=_get5(_getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e}}],[{key:"blockName",value:function(){return"UTCTime"}}]),r}(z);t.UTCTime=Y;var $=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,r),(e=t.call(this,n)).year=0,e.month=0,e.day=0,e.hour=0,e.minute=0,e.second=0,e.millisecond=0,"value"in n){e.fromString(n.value),e.valueBlock.valueHex=new ArrayBuffer(n.value.length);for(var a=new Uint8Array(e.valueBlock.valueHex),i=0;i<n.value.length;i++)a[i]=n.value.charCodeAt(i)}return"valueDate"in n&&(e.fromDate(n.valueDate),e.valueBlock.valueHex=e.toBuffer()),e.idBlock.tagClass=1,e.idBlock.tagNumber=24,e}return _createClass(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}},{key:"toBuffer",value:function(){for(var e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t}},{key:"fromDate",value:function(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}},{key:"toDate",value:function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}},{key:"fromString",value:function(e){var t,r=!1,n="",a="",i=0,o=0,s=0;if("Z"===e[e.length-1])n=e.substr(0,e.length-1),r=!0;else{var u=new Number(e[e.length-1]);if(isNaN(u.valueOf()))throw new Error("Wrong input string for convertion");n=e}if(r){if(-1!==n.indexOf("+"))throw new Error("Wrong input string for convertion");if(-1!==n.indexOf("-"))throw new Error("Wrong input string for convertion")}else{var c=1,l=n.indexOf("+"),f="";if(-1===l&&(l=n.indexOf("-"),c=-1),-1!==l){if(f=n.substr(l+1),n=n.substr(0,l),2!==f.length&&4!==f.length)throw new Error("Wrong input string for convertion");var h=new Number(f.substr(0,2));if(isNaN(h.valueOf()))throw new Error("Wrong input string for convertion");if(o=c*h,4===f.length){if(h=new Number(f.substr(2,2)),isNaN(h.valueOf()))throw new Error("Wrong input string for convertion");s=c*h}}}var p=n.indexOf(".");if(-1===p&&(p=n.indexOf(",")),-1!==p){var y=new Number("0".concat(n.substr(p)));if(isNaN(y.valueOf()))throw new Error("Wrong input string for convertion");i=y.valueOf(),a=n.substr(0,p)}else a=n;switch(!0){case 8===a.length:if(t=/(\d{4})(\d{2})(\d{2})/gi,-1!==p)throw new Error("Wrong input string for convertion");break;case 10===a.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,-1!==p){var v=60*i;this.minute=Math.floor(v),v=60*(v-this.minute),this.second=Math.floor(v),v=1e3*(v-this.second),this.millisecond=Math.floor(v)}break;case 12===a.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==p){var g=60*i;this.second=Math.floor(g),g=1e3*(g-this.second),this.millisecond=Math.floor(g)}break;case 14===a.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==p){var d=1e3*i;this.millisecond=Math.floor(d)}break;default:throw new Error("Wrong input string for convertion")}var m=t.exec(a);if(null===m)throw new Error("Wrong input string for convertion");for(var k=1;k<m.length;k++)switch(k){case 1:this.year=parseInt(m[k],10);break;case 2:this.month=parseInt(m[k],10);break;case 3:this.day=parseInt(m[k],10);break;case 4:this.hour=parseInt(m[k],10)+o;break;case 5:this.minute=parseInt(m[k],10)+s;break;case 6:this.second=parseInt(m[k],10);break;default:throw new Error("Wrong input string for convertion")}if(!1===r){var b=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=b.getUTCFullYear(),this.month=b.getUTCMonth(),this.day=b.getUTCDay(),this.hour=b.getUTCHours(),this.minute=b.getUTCMinutes(),this.second=b.getUTCSeconds(),this.millisecond=b.getUTCMilliseconds()}}},{key:"toString",value:function(){var e=[];return e.push((0,sn.padNumber)(this.year,4)),e.push((0,sn.padNumber)(this.month,2)),e.push((0,sn.padNumber)(this.day,2)),e.push((0,sn.padNumber)(this.hour,2)),e.push((0,sn.padNumber)(this.minute,2)),e.push((0,sn.padNumber)(this.second,2)),0!==this.millisecond&&(e.push("."),e.push((0,sn.padNumber)(this.millisecond,3))),e.push("Z"),e.join("")}},{key:"toJSON",value:function(){var e={};try{e=_get5(_getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e.millisecond=this.millisecond,e}}],[{key:"blockName",value:function(){return"GeneralizedTime"}}]),r}(z);t.GeneralizedTime=$;var Q=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=31,e}return _createClass(r,null,[{key:"blockName",value:function(){return"DATE"}}]),r}(R);t.DATE=Q;var ee=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=32,e}return _createClass(r,null,[{key:"blockName",value:function(){return"TimeOfDay"}}]),r}(R);t.TimeOfDay=ee;var te=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=33,e}return _createClass(r,null,[{key:"blockName",value:function(){return"DateTime"}}]),r}(R);t.DateTime=te;var re=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=34,e}return _createClass(r,null,[{key:"blockName",value:function(){return"Duration"}}]),r}(R);t.Duration=re;var ne=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=14,e}return _createClass(r,null,[{key:"blockName",value:function(){return"TIME"}}]),r}(R);t.TIME=ne;var ae=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.value=(0,sn.getParametersValue)(t,"value",[]),this.optional=(0,sn.getParametersValue)(t,"optional",!1)};t.Choice=ae;var ie=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.name=(0,sn.getParametersValue)(t,"name",""),this.optional=(0,sn.getParametersValue)(t,"optional",!1)};t.Any=ie;var oe=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.name=(0,sn.getParametersValue)(t,"name",""),this.optional=(0,sn.getParametersValue)(t,"optional",!1),this.value=(0,sn.getParametersValue)(t,"value",new ie),this.local=(0,sn.getParametersValue)(t,"local",!1)};t.Repeated=oe;var se=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.data=(0,sn.getParametersValue)(t,"data",new ArrayBuffer(0))}return _createClass(e,[{key:"fromBER",value:function(e,t,r){return this.data=e.slice(t,r),t+r}},{key:"toBER",value:function(){return this.data}}]),e}();function ue(e,t,r){var n=t;var i=new c({},Object),o=new a;if(!1===(0,sn.checkBufferParams)(o,e,t,r))return i.error=o.error,{offset:-1,result:i};if(0===new Uint8Array(e,t,r).length)return this.error="Zero buffer length",{offset:-1,result:i};var s=i.idBlock.fromBER(e,t,r);if(i.warnings.concat(i.idBlock.warnings),-1===s)return i.error=i.idBlock.error,{offset:-1,result:i};if(t=s,r-=i.idBlock.blockLength,s=i.lenBlock.fromBER(e,t,r),i.warnings.concat(i.lenBlock.warnings),-1===s)return i.error=i.lenBlock.error,{offset:-1,result:i};if(t=s,r-=i.lenBlock.blockLength,!1===i.idBlock.isConstructed&&!0===i.lenBlock.isIndefiniteForm)return i.error="Indefinite length form used for primitive encoding form",{offset:-1,result:i};var u=c;switch(i.idBlock.tagClass){case 1:if(i.idBlock.tagNumber>=37&&!1===i.idBlock.isHexOnly)return i.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:i};switch(i.idBlock.tagNumber){case 0:if(!0===i.idBlock.isConstructed&&i.lenBlock.length>0)return i.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:i};u=v;break;case 1:u=d;break;case 2:u=S;break;case 3:u=C;break;case 4:u=_;break;case 5:u=b;break;case 6:u=I;break;case 10:u=A;break;case 12:u=R;break;case 13:u=U;break;case 14:u=ne;break;case 15:return i.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:i};case 16:u=m;break;case 17:u=k;break;case 18:u=F;break;case 19:u=q;break;case 20:u=j;break;case 21:u=V;break;case 22:u=J;break;case 23:u=Y;break;case 24:u=$;break;case 25:u=M;break;case 26:u=z;break;case 27:u=W;break;case 28:u=L;break;case 29:u=Z;break;case 30:u=H;break;case 31:u=Q;break;case 32:u=ee;break;case 33:u=te;break;case 34:u=re;break;default:var l;(l=!0===i.idBlock.isConstructed?new p:new f).idBlock=i.idBlock,l.lenBlock=i.lenBlock,l.warnings=i.warnings,s=(i=l).fromBER(e,t,r)}break;case 2:case 3:case 4:default:u=!0===i.idBlock.isConstructed?p:f}return s=(i=function(e,t){if(e instanceof t)return e;var r=new t;return r.idBlock=e.idBlock,r.lenBlock=e.lenBlock,r.warnings=e.warnings,r.valueBeforeDecode=e.valueBeforeDecode.slice(0),r}(i,u)).fromBER(e,t,!0===i.lenBlock.isIndefiniteForm?r:i.lenBlock.length),i.valueBeforeDecode=e.slice(n,n+i.blockLength),{offset:s,result:i}}function ce(e){if(0===e.byteLength){var t=new c({},Object);return t.error="Input buffer has zero length",{offset:-1,result:t}}return ue(e,0,e.byteLength)}function le(e,t,r){if(r instanceof ae){for(var n=0;n<r.value.length;n++){if(!0===le(e,t,r.value[n]).verified)return{verified:!0,result:e}}var a={verified:!1,result:{error:"Wrong values for Choice type"}};return r.hasOwnProperty("name")&&(a.name=r.name),a}if(r instanceof ie)return r.hasOwnProperty("name")&&(e[r.name]=t),{verified:!0,result:e};if(e instanceof Object==!1)return{verified:!1,result:{error:"Wrong root object"}};if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(r instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("idBlock"in r==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("fromBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("toBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var i=r.idBlock.toBER(!1);if(0===i.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(-1===r.idBlock.fromBER(i,0,i.byteLength))return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===r.idBlock.hasOwnProperty("tagClass"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagClass!==t.idBlock.tagClass)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("tagNumber"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagNumber!==t.idBlock.tagNumber)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("isConstructed"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isConstructed!==t.idBlock.isConstructed)return{verified:!1,result:e};if("isHexOnly"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly)return{verified:!1,result:e};if(!0===r.idBlock.isHexOnly){if("valueHex"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var o=new Uint8Array(r.idBlock.valueHex),s=new Uint8Array(t.idBlock.valueHex);if(o.length!==s.length)return{verified:!1,result:e};for(var u=0;u<o.length;u++)if(o[u]!==s[1])return{verified:!1,result:e}}if(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(e[r.name]=t)),!0===r.idBlock.isConstructed){var c=0,l={verified:!1},f=r.valueBlock.value.length;if(f>0&&r.valueBlock.value[0]instanceof oe&&(f=t.valueBlock.value.length),0===f)return{verified:!0,result:e};if(0===t.valueBlock.value.length&&0!==r.valueBlock.value.length){for(var h=!0,p=0;p<r.valueBlock.value.length;p++)h=h&&(r.valueBlock.value[p].optional||!1);return!0===h?{verified:!0,result:e}:(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),e.error="Inconsistent object length",{verified:!1,result:e})}for(var y=0;y<f;y++)if(y-c>=t.valueBlock.value.length){if(!1===r.valueBlock.value[y].optional){var v={verified:!1,result:e};return e.error="Inconsistent length between ASN.1 data and schema",r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],v.name=r.name)),v}}else if(r.valueBlock.value[0]instanceof oe){if(!1===(l=le(e,t.valueBlock.value[y],r.valueBlock.value[0].value)).verified){if(!0!==r.valueBlock.value[0].optional)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),l;c++}if("name"in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){var g={};void 0===(g="local"in r.valueBlock.value[0]&&!0===r.valueBlock.value[0].local?t:e)[r.valueBlock.value[0].name]&&(g[r.valueBlock.value[0].name]=[]),g[r.valueBlock.value[0].name].push(t.valueBlock.value[y])}}else if(!1===(l=le(e,t.valueBlock.value[y-c],r.valueBlock.value[y])).verified){if(!0!==r.valueBlock.value[y].optional)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),l;c++}if(!1===l.verified){var d={verified:!1,result:e};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],d.name=r.name)),d}return{verified:!0,result:e}}if("primitiveSchema"in r&&"valueHex"in t.valueBlock){var m=ce(t.valueBlock.valueHex);if(-1===m.offset){var k={verified:!1,result:m.result};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],k.name=r.name)),k}return le(e,m.result,r.primitiveSchema)}return{verified:!0,result:e}}t.RawData=se})),cn=(nn=un)&&nn.__esModule&&Object.prototype.hasOwnProperty.call(nn,"default")?nn.default:nn,ln=un.fromBER,fn=un.compareSchema,hn=un.verifySchema,pn=un.fromJSON,yn=un.RawData,vn=un.Repeated,gn=un.Any,dn=un.Choice,mn=un.TIME,kn=un.Duration,bn=un.DateTime,wn=un.TimeOfDay,_n=un.DATE,xn=un.GeneralizedTime,Cn=un.UTCTime,Bn=un.CharacterString,Sn=un.GeneralString,An=un.VisibleString,Nn=un.GraphicString,En=un.IA5String,In=un.VideotexString,Tn=un.TeletexString,Rn=un.PrintableString,On=un.NumericString,Dn=un.UniversalString,Un=un.BmpString,Kn=un.RelativeObjectIdentifier,Hn=un.Utf8String,Pn=un.ObjectIdentifier,Ln=un.Enumerated,Xn=un.Integer,Gn=un.BitString,Fn=un.OctetString,qn=un.Null,jn=un.Set,Vn=un.Sequence,Jn=un.Boolean,Mn=un.EndOfContent,zn=un.Constructed,Wn=un.Primitive,Zn=un.BaseBlock,Yn=un.ValueBlock,$n=un.HexBlock,Qn=Object.freeze({__proto__:null,default:cn,__moduleExports:un,fromBER:ln,compareSchema:fn,verifySchema:hn,fromJSON:pn,RawData:yn,Repeated:vn,Any:gn,Choice:dn,TIME:mn,Duration:kn,DateTime:bn,TimeOfDay:wn,DATE:_n,GeneralizedTime:xn,UTCTime:Cn,CharacterString:Bn,GeneralString:Sn,VisibleString:An,GraphicString:Nn,IA5String:En,VideotexString:In,TeletexString:Tn,PrintableString:Rn,NumericString:On,UniversalString:Dn,BmpString:Un,RelativeObjectIdentifier:Kn,Utf8String:Hn,ObjectIdentifier:Pn,Enumerated:Ln,Integer:Xn,BitString:Gn,OctetString:Fn,Null:qn,Set:jn,Sequence:Vn,Boolean:Jn,EndOfContent:Mn,Constructed:zn,Primitive:Wn,BaseBlock:Zn,ValueBlock:Yn,HexBlock:$n});!function(e){e[e.Sequence=0]="Sequence",e[e.Set=1]="Set",e[e.Choice=2]="Choice"}(an||(an={})),function(e){e[e.Any=1]="Any",e[e.Boolean=2]="Boolean",e[e.OctetString=3]="OctetString",e[e.BitString=4]="BitString",e[e.Integer=5]="Integer",e[e.Enumerated=6]="Enumerated",e[e.ObjectIdentifier=7]="ObjectIdentifier",e[e.Utf8String=8]="Utf8String",e[e.BmpString=9]="BmpString",e[e.UniversalString=10]="UniversalString",e[e.NumericString=11]="NumericString",e[e.PrintableString=12]="PrintableString",e[e.TeletexString=13]="TeletexString",e[e.VideotexString=14]="VideotexString",e[e.IA5String=15]="IA5String",e[e.GraphicString=16]="GraphicString",e[e.VisibleString=17]="VisibleString",e[e.GeneralString=18]="GeneralString",e[e.CharacterString=19]="CharacterString",e[e.UTCTime=20]="UTCTime",e[e.GeneralizedTime=21]="GeneralizedTime",e[e.DATE=22]="DATE",e[e.TimeOfDay=23]="TimeOfDay",e[e.DateTime=24]="DateTime",e[e.Duration=25]="Duration",e[e.TIME=26]="TIME",e[e.Null=27]="Null"}(on||(on={}));var ea={fromASN:function(e){return e instanceof qn?null:e.valueBeforeDecode},toASN:function(e){if(null===e)return new qn;var t=ln(e);if(t.result.error)throw new Error(t.result.error);return t.result}},ta={fromASN:function(e){return e.valueBlock.valueHex.byteLength>4?e.valueBlock.toString():e.valueBlock.valueDec},toASN:function(e){return new Xn({value:e})}},ra={fromASN:function(e){return e.valueBlock.valueDec},toASN:function(e){return new Ln({value:e})}},na={fromASN:function(e){return e.valueBlock.valueHex},toASN:function(e){return new Gn({valueHex:e})}},aa={fromASN:function(e){return e.valueBlock.toString()},toASN:function(e){return new Pn({value:e})}},ia={fromASN:function(e){return e.valueBlock.value},toASN:function(e){return new Jn({value:e})}},oa={fromASN:function(e){return e.valueBlock.valueHex},toASN:function(e){return new Fn({valueHex:e})}};function sa(e){return{fromASN:function(e){return e.valueBlock.value},toASN:function(t){return new e({value:t})}}}var ua=sa(Hn),ca=sa(Un),la=sa(Dn),fa=sa(On),ha=sa(Rn),pa=sa(Tn),ya=sa(In),va=sa(En),ga=sa(Nn),da=sa(An),ma=sa(Sn),ka=sa(Bn),ba={fromASN:function(e){return e.toDate()},toASN:function(e){return new Cn({valueDate:e})}},wa={fromASN:function(e){return e.toDate()},toASN:function(e){return new xn({valueDate:e})}},_a={fromASN:function(e){return null},toASN:function(e){return new qn}};function xa(e){switch(e){case on.Any:return ea;case on.BitString:return na;case on.BmpString:return ca;case on.Boolean:return ia;case on.CharacterString:return ka;case on.Enumerated:return ra;case on.GeneralString:return ma;case on.GeneralizedTime:return wa;case on.GraphicString:return ga;case on.IA5String:return va;case on.Integer:return ta;case on.Null:return _a;case on.NumericString:return fa;case on.ObjectIdentifier:return aa;case on.OctetString:return oa;case on.PrintableString:return ha;case on.TeletexString:return pa;case on.UTCTime:return ba;case on.UniversalString:return la;case on.Utf8String:return ua;case on.VideotexString:return ya;case on.VisibleString:return da;default:return null}}function Ca(e){return e&&e.prototype?!(!e.prototype.toASN||!e.prototype.fromASN)||Ca(e.prototype):!!(e&&e.toASN&&e.fromASN)}function Ba(e,t){if(!e||!t)return!1;if(e.byteLength!==t.byteLength)return!1;for(var r=new Uint8Array(e),n=new Uint8Array(t),a=0;a<e.byteLength;a++)if(r[a]!==n[a])return!1;return!0}var Sa,Aa=new(function(){function e(){_classCallCheck(this,e),this.items=new WeakMap}return _createClass(e,[{key:"has",value:function(e){return this.items.has(e)}},{key:"get",value:function(e){var t,r,n,a,i=this.items.get(e);if(!i)throw new Error("Cannot get schema for '".concat(null!==(a=null===(n=null===(r=null===(t=e)||void 0===t?void 0:t.prototype)||void 0===r?void 0:r.constructor)||void 0===n?void 0:n.name)&&void 0!==a?a:e,"' target"));return i}},{key:"cache",value:function(e){var t=this.get(e);t.schema||(t.schema=this.create(e,!0))}},{key:"createDefault",value:function(e){var t={type:an.Sequence,items:{}},r=this.findParentSchema(e);return r&&(Object.assign(t,r),t.items=Object.assign({},t.items,r.items)),t}},{key:"create",value:function(e,t){var r=this.items.get(e)||this.createDefault(e),n=[];for(var a in r.items){var i=r.items[a],o=t?a:"",s=void 0;if("number"==typeof i.type){var u=on[i.type],c=Qn[u];if(!c)throw new Error("Cannot get ASN1 class by name '".concat(u,"'"));s=new c({name:o})}else if(Ca(i.type)){s=(new i.type).toSchema(o)}else if(i.optional){this.get(i.type).type===an.Choice?s=new gn({name:o}):(s=this.create(i.type,!1)).name=o}else s=new gn({name:o});var l=!!i.optional||void 0!==i.defaultValue;if(i.repeated)s.name="",s=new("set"===i.repeated?jn:Vn)({name:"",value:[new vn({name:o,value:s})]});if(null!==i.context&&void 0!==i.context)if(i.implicit)if("number"==typeof i.type||Ca(i.type)){var f=i.repeated?zn:Wn;n.push(new f({name:o,optional:l,idBlock:{tagClass:3,tagNumber:i.context}}))}else{this.cache(i.type);var h=!!i.repeated,p=h?s:this.get(i.type).schema;p=p.valueBlock?p.valueBlock.value:p.value,n.push(new zn({name:h?"":o,optional:l,idBlock:{tagClass:3,tagNumber:i.context},value:p}))}else n.push(new zn({optional:l,idBlock:{tagClass:3,tagNumber:i.context},value:[s]}));else s.optional=l,n.push(s)}switch(r.type){case an.Sequence:return new Vn({value:n,name:""});case an.Set:return new jn({value:n,name:""});case an.Choice:return new dn({value:n,name:""});default:throw new Error("Unsupported ASN1 type in use")}}},{key:"set",value:function(e,t){return this.items.set(e,t),this}},{key:"findParentSchema",value:function(e){var t=e.__proto__;return t?this.items.get(t)||this.findParentSchema(t):null}}]),e}()),Na=function(e){return function(t){var r;Aa.has(t)?r=Aa.get(t):(r=Aa.createDefault(t),Aa.set(t,r)),Object.assign(r,e)}},Ea=function(e){return function(t,r){var n;Aa.has(t.constructor)?n=Aa.get(t.constructor):(n=Aa.createDefault(t.constructor),Aa.set(t.constructor,n));var a=Object.assign({},e);if("number"==typeof a.type&&!a.converter){var i=xa(e.type);if(!i)throw new Error("Cannot get default converter for property '".concat(r,"' of ").concat(t.constructor.name));a.converter=i}n.items[r]=a}},Ia=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"serialize",value:function(e){return e instanceof Zn?e.toBER(!1):this.toASN(e).toBER(!1)}},{key:"toASN",value:function(t){var r=this;if(t&&Ca(t.constructor))return t.toASN();var n=t.constructor,a=Aa.get(n);Aa.cache(n);var i,o=[];if(a.itemType)if("number"==typeof a.itemType){var s=xa(a.itemType);if(!s)throw new Error("Cannot get default converter for array item of ".concat(n.name," ASN1 schema"));o=t.map((function(e){return s.toASN(e)}))}else o=t.map((function(e){return r.toAsnItem({type:a.itemType},"[]",n,e)}));else for(var u in a.items){var c=a.items[u],l=t[u];if(!(void 0===l||c.defaultValue===l||"object"===_typeof(c.defaultValue)&&"object"===_typeof(l)&&Ba(this.serialize(c.defaultValue),this.serialize(l)))){var f=e.toAsnItem(c,u,n,l);if("number"==typeof c.context)if(c.implicit)if(c.repeated||"number"!=typeof c.type&&!Ca(c.type))o.push(new zn({optional:c.optional,idBlock:{tagClass:3,tagNumber:c.context},value:f.valueBlock.value}));else{var h={};h.valueHex=f.valueBlock.toBER(),o.push(new Wn(Object.assign({optional:c.optional,idBlock:{tagClass:3,tagNumber:c.context}},h)))}else o.push(new zn({optional:c.optional,idBlock:{tagClass:3,tagNumber:c.context},value:[f]}));else c.repeated?o=o.concat(f):o.push(f)}}switch(a.type){case an.Sequence:i=new Vn({value:o});break;case an.Set:i=new jn({value:o});break;case an.Choice:if(!o[0])throw new Error("Schema '".concat(n.name,"' has wrong data. Choice cannot be empty."));i=o[0]}return i}},{key:"toAsnItem",value:function(e,t,r,n){var a,i=this;if("number"==typeof e.type){var o=e.converter;if(!o)throw new Error("Property '".concat(t,"' doesn't have converter for type ").concat(on[e.type]," in schema '").concat(r.name,"'"));if(e.repeated){var s=Array.from(n,(function(e){return o.toASN(e)}));a=new("sequence"===e.repeated?Vn:jn)({value:s})}else a=o.toASN(n)}else if(e.repeated){var u=Array.from(n,(function(e){return i.toASN(e)}));a=new("sequence"===e.repeated?Vn:jn)({value:u})}else a=this.toASN(n);return a}}]),e}(),Ta=function(e){_inherits(r,e);var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(function(e){_inherits(r,_wrapNativeSuper(Error));var t=_createSuper(r);function r(e,n){var a;return _classCallCheck(this,r),(a=t.call(this,n?"".concat(e,". See the inner exception for more details."):e)).message=e,a.innerError=n,a}return r}());function Ra(e,t){if(!function(e,t){switch(t){case Sa.Boolean:return"boolean"==typeof e;case Sa.Number:return"number"==typeof e;case Sa.String:return"string"==typeof e}return!0}(e,t))throw new TypeError("Value must be ".concat(Sa[t]))}function Oa(e){return e&&e.prototype?!(!e.prototype.toJSON||!e.prototype.fromJSON)||Oa(e.prototype):!!(e&&e.toJSON&&e.fromJSON)}!function(e){e[e.Any=0]="Any",e[e.Boolean=1]="Boolean",e[e.Number=2]="Number",e[e.String=3]="String"}(Sa||(Sa={}));var Da="default",Ua=new(function(){function e(){_classCallCheck(this,e),this.items=new Map}return _createClass(e,[{key:"has",value:function(e){return this.items.has(e)||!!this.findParentSchema(e)}},{key:"get",value:function(e){var t=this.items.get(e)||this.findParentSchema(e);if(!t)throw new Error("Cannot get schema for current target");return t}},{key:"create",value:function(e){var t={names:{}},r=this.findParentSchema(e);if(r)for(var n in Object.assign(t,r),t.names={},r.names)t.names[n]=Object.assign({},r.names[n]);return t.target=e,t}},{key:"set",value:function(e,t){return this.items.set(e,t),this}},{key:"findParentSchema",value:function(e){var t=e.__proto__;return t?this.items.get(t)||this.findParentSchema(t):null}}]),e}()),Ka=function(){function e(t){_classCallCheck(this,e),this.pattern=new RegExp(t)}return _createClass(e,[{key:"validate",value:function(e){var t=new RegExp(this.pattern.source,this.pattern.flags);if("string"!=typeof e)throw new Ta("Incoming value must be string");if(!t.exec(e))throw new Ta("Value doesn't match to pattern '".concat(t.toString(),"'"))}}]),e}(),Ha=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.MIN_VALUE,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;_classCallCheck(this,e),this.min=t,this.max=r}return _createClass(e,[{key:"validate",value:function(e){if(Ra(e,Sa.Number),!(this.min<=e&&e<=this.max)){var t=this.min===Number.MIN_VALUE?"MIN":this.min,r=this.max===Number.MAX_VALUE?"MAX":this.max;throw new Ta("Value doesn't match to diapason [".concat(t,",").concat(r,"]"))}}}]),e}(),Pa=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.MIN_VALUE,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;_classCallCheck(this,e),this.min=t,this.max=r}return _createClass(e,[{key:"validate",value:function(e){if(Ra(e,Sa.Number),!(this.min<e&&e<this.max)){var t=this.min===Number.MIN_VALUE?"MIN":this.min,r=this.max===Number.MAX_VALUE?"MAX":this.max;throw new Ta("Value doesn't match to diapason (".concat(t,",").concat(r,")"))}}}]),e}(),La=function(){function e(t,r,n){_classCallCheck(this,e),this.length=t,this.minLength=r,this.maxLength=n}return _createClass(e,[{key:"validate",value:function(e){if(void 0===this.length){if(void 0!==this.minLength&&e.length<this.minLength)throw new Ta("Value length must be more than ".concat(this.minLength,"."));if(void 0!==this.maxLength&&e.length>this.maxLength)throw new Ta("Value length must be less than ".concat(this.maxLength,"."))}else if(e.length!==this.length)throw new Ta("Value length must be exactly ".concat(this.length,"."))}}]),e}(),Xa=function(){function e(t){_classCallCheck(this,e),this.enumeration=t}return _createClass(e,[{key:"validate",value:function(e){if(Ra(e,Sa.String),!this.enumeration.includes(e))throw new Ta("Value must be one of ".concat(this.enumeration.map((function(e){return"'".concat(e,"'")})).join(", ")))}}]),e}();function Ga(e){var t=[];return e.pattern&&t.push(new Ka(e.pattern)),e.type!==Sa.Number&&e.type!==Sa.Any||(void 0===e.minInclusive&&void 0===e.maxInclusive||t.push(new Ha(e.minInclusive,e.maxInclusive)),void 0===e.minExclusive&&void 0===e.maxExclusive||t.push(new Pa(e.minExclusive,e.maxExclusive)),void 0!==e.enumeration&&t.push(new Xa(e.enumeration))),(e.type===Sa.String||e.repeated||e.type===Sa.Any)&&(void 0===e.length&&void 0===e.minLength&&void 0===e.maxLength||t.push(new La(e.length,e.minLength,e.maxLength))),t}var Fa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,r){var n,a="Cannot set type for ".concat(r," property of ").concat(t.constructor.name," schema");Ua.has(t.constructor)?(n=Ua.get(t.constructor)).target!==t.constructor&&(n=Ua.create(t.constructor),Ua.set(t.constructor,n)):(n=Ua.create(t.constructor),Ua.set(t.constructor,n));var i={type:Sa.Any,validations:[]},o=Object.assign(i,e);if(o.validations=Ga(o),"number"!=typeof o.type&&!Ua.has(o.type)&&!Oa(o.type))throw new Error("".concat(a,". Assigning type doesn't have schema."));var s,u=_createForOfIteratorHelper(Array.isArray(e.schema)?e.schema:[e.schema||Da]);try{for(u.s();!(s=u.n()).done;){var c=s.value;n.names[c]||(n.names[c]={}),n.names[c][r]=o}}catch(e){u.e(e)}finally{u.f()}}},qa=function(e){_inherits(r,_wrapNativeSuper(Error));var t=_createSuper(r);function r(){return _classCallCheck(this,r),t.apply(this,arguments)}return r}(),ja=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"toArrayBuffer",value:function(e){var t=e.replace(/-{5}(BEGIN|END) .*-{5}/g,"").replace("\r","").replace("\n","");return u.FromBase64(t)}},{key:"toUint8Array",value:function(e){var t=this.toArrayBuffer(e);return new Uint8Array(t)}},{key:"fromBufferSource",value:function(e,t){for(var r,n=u.ToBase64(e),a=0,i=[];(r=n.slice(a,a+=64)).length&&(i.push(r),!(r.length<64)););var o=t.toUpperCase();return"-----BEGIN ".concat(o,"-----\n").concat(i.join("\n"),"\n-----END ").concat(o,"-----")}},{key:"isPEM",value:function(e){return/-----BEGIN .+-----[A-Za-z0-9+\/\+\=\s\n]+-----END .+-----/i.test(e)}},{key:"getTagName",value:function(e){if(!this.isPEM(e))throw new Error("Bad parameter. Incoming data is not right PEM");var t=/-----BEGIN (.+)-----/.exec(e);if(!t)throw new Error("Cannot get tag from PEM");return t[1]}},{key:"hasTagName",value:function(e,t){var r=this.getTagName(e);return t.toLowerCase()===r.toLowerCase()}},{key:"isCertificate",value:function(e){return this.hasTagName(e,"certificate")}},{key:"isCertificateRequest",value:function(e){return this.hasTagName(e,"certificate request")}},{key:"isCRL",value:function(e){return this.hasTagName(e,"x509 crl")}},{key:"isPublicKey",value:function(e){return this.hasTagName(e,"public key")}}]),e}(),Va=function e(t){_classCallCheck(this,e),t&&(this.value=t)};Zr([Ea({type:on.ObjectIdentifier})],Va.prototype,"value",void 0),Va=Zr([Na({type:an.Choice})],Va);var Ja=function e(t){_classCallCheck(this,e),Object.assign(this,t)};Zr([Ea({type:on.ObjectIdentifier})],Ja.prototype,"algorithm",void 0),Zr([Ea({type:on.Any,optional:!0})],Ja.prototype,"parameters",void 0);var Ma=function e(){_classCallCheck(this,e),this.version=0,this.privateKeyAlgorithm=new Ja,this.privateKey=new ArrayBuffer(0)};Zr([Ea({type:on.Integer})],Ma.prototype,"version",void 0),Zr([Ea({type:Ja})],Ma.prototype,"privateKeyAlgorithm",void 0),Zr([Ea({type:on.OctetString})],Ma.prototype,"privateKey",void 0),Zr([Ea({type:on.Any,optional:!0})],Ma.prototype,"attributes",void 0);var za=function e(){_classCallCheck(this,e),this.publicKeyAlgorithm=new Ja,this.publicKey=new ArrayBuffer(0)};Zr([Ea({type:Ja})],za.prototype,"publicKeyAlgorithm",void 0),Zr([Ea({type:on.BitString})],za.prototype,"publicKey",void 0);var Wa={fromJSON:function(e){return u.FromBase64Url(e)},toJSON:function(e){return u.ToBase64Url(new Uint8Array(e))}},Za={fromASN:function(e){var t=e.valueBlock.valueHex;return new Uint8Array(t)[0]?e.valueBlock.valueHex:e.valueBlock.valueHex.slice(1)},toASN:function(e){var t=new Uint8Array(e)[0]>127?Buffer.concat([Buffer.from([0]),Buffer.from(e)]):Buffer.from(e);return new Xn({valueHex:new Uint8Array(t).buffer})}},Ya=Object.freeze({__proto__:null,JsonBase64UrlArrayBufferConverter:Wa,AsnIntegerArrayBufferConverter:Za}),$a=function e(){_classCallCheck(this,e),this.version=0,this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),this.privateExponent=new ArrayBuffer(0),this.prime1=new ArrayBuffer(0),this.prime2=new ArrayBuffer(0),this.exponent1=new ArrayBuffer(0),this.exponent2=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0)};Zr([Ea({type:on.Integer,converter:ta})],$a.prototype,"version",void 0),Zr([Ea({type:on.Integer,converter:Za}),Fa({name:"n",converter:Wa})],$a.prototype,"modulus",void 0),Zr([Ea({type:on.Integer,converter:Za}),Fa({name:"e",converter:Wa})],$a.prototype,"publicExponent",void 0),Zr([Ea({type:on.Integer,converter:Za}),Fa({name:"d",converter:Wa})],$a.prototype,"privateExponent",void 0),Zr([Ea({type:on.Integer,converter:Za}),Fa({name:"p",converter:Wa})],$a.prototype,"prime1",void 0),Zr([Ea({type:on.Integer,converter:Za}),Fa({name:"q",converter:Wa})],$a.prototype,"prime2",void 0),Zr([Ea({type:on.Integer,converter:Za}),Fa({name:"dp",converter:Wa})],$a.prototype,"exponent1",void 0),Zr([Ea({type:on.Integer,converter:Za}),Fa({name:"dq",converter:Wa})],$a.prototype,"exponent2",void 0),Zr([Ea({type:on.Integer,converter:Za}),Fa({name:"qi",converter:Wa})],$a.prototype,"coefficient",void 0),Zr([Ea({type:on.Any,optional:!0})],$a.prototype,"otherPrimeInfos",void 0);var Qa=function e(){_classCallCheck(this,e),this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0)};Zr([Ea({type:on.Integer,converter:Za}),Fa({name:"n",converter:Wa})],Qa.prototype,"modulus",void 0),Zr([Ea({type:on.Integer,converter:Za}),Fa({name:"e",converter:Wa})],Qa.prototype,"publicExponent",void 0);var ei=function(){function e(t){_classCallCheck(this,e),this.value=new ArrayBuffer(0),t&&(this.value=t)}return _createClass(e,[{key:"toJSON",value:function(){var e=new Uint8Array(this.value);if(4!==e[0])throw new qa("Wrong ECPoint. Current version supports only Uncompressed (0x04) point");var t=(e=new Uint8Array(this.value.slice(1))).length/2;return{x:u.ToBase64Url(e.buffer.slice(0,0+t)),y:u.ToBase64Url(e.buffer.slice(0+t,0+t+t))}}},{key:"fromJSON",value:function(e){if(!("x"in e))throw new Error("x: Missing required property");if(!("y"in e))throw new Error("y: Missing required property");var t=u.FromBase64Url(e.x),r=u.FromBase64Url(e.y),n=Buffer.concat([new Uint8Array([4]),new Uint8Array(t),new Uint8Array(r)]);return this.value=new Uint8Array(n).buffer,this}}]),e}();Zr([Ea({type:on.OctetString})],ei.prototype,"value",void 0),ei=Zr([Na({type:an.Choice})],ei);var ti=function(){function e(){_classCallCheck(this,e),this.version=1,this.privateKey=new ArrayBuffer(0)}return _createClass(e,[{key:"fromJSON",value:function(e){if(!("d"in e))throw new Error("d: Missing required property");if(this.privateKey=u.FromBase64Url(e.d),"x"in e){var t=new ei;t.fromJSON(e),this.publicKey=Ia.toASN(t).valueBlock.valueHex}return this}},{key:"toJSON",value:function(){var e={};return e.d=u.ToBase64Url(this.privateKey),this.publicKey&&Object.assign(e,new ei(this.publicKey).toJSON()),e}}]),e}();Zr([Ea({type:on.Integer,converter:ta})],ti.prototype,"version",void 0),Zr([Ea({type:on.OctetString})],ti.prototype,"privateKey",void 0),Zr([Ea({context:0,type:on.Any,optional:!0})],ti.prototype,"parameters",void 0),Zr([Ea({context:1,type:on.BitString,optional:!0})],ti.prototype,"publicKey",void 0);var ri={fromASN:function(e){var t=new Uint8Array(e.valueBlock.valueHex);return 0===t[0]?t.buffer.slice(1):t.buffer},toASN:function(e){var t=new Uint8Array(e);if(t[0]>127){var r=new Uint8Array(t.length+1);return r.set(t,1),new Xn({valueHex:r.buffer})}return new Xn({valueHex:e})}},ni=Object.freeze({__proto__:null,AsnIntegerWithoutPaddingConverter:ri}),ai=function(){function e(){_classCallCheck(this,e),this.r=new ArrayBuffer(0),this.s=new ArrayBuffer(0)}return _createClass(e,[{key:"toWebCryptoSignature",value:function(e){e=this.getPointSize();var t=this.addPadding(e,c.toUint8Array(this.r)),r=this.addPadding(e,c.toUint8Array(this.s)),n=new Uint8Array(t.byteLength+r.byteLength);return n.set(t,0),n.set(r,t.length),n.buffer}},{key:"getPointSize",value:function(){switch(Math.max(this.r.byteLength,this.s.byteLength)){case 31:case 32:return 32;case 47:case 48:return 48;case 65:case 66:return 66}throw new Error("Unsupported EC point size")}},{key:"addPadding",value:function(e,t){var r=new Uint8Array(e),n=c.toUint8Array(t);return r.set(n,e-n.length),r}},{key:"removePadding",value:function(e){for(var t=c.toUint8Array(e),r=0;r<t.length;r++)if(t[r])return t.slice(r);return new Uint8Array(0)}}],[{key:"fromWebCryptoSignature",value:function(e){var t=c.toUint8Array(e),r=t.byteLength/2,n=new this;return n.r=n.removePadding(t.slice(0,r)),n.s=n.removePadding(t.slice(r,2*r)),n}}]),e}();Zr([Ea({type:on.Integer,converter:ri})],ai.prototype,"r",void 0),Zr([Ea({type:on.Integer,converter:ri})],ai.prototype,"s",void 0);Object.freeze({__proto__:null,converters:ni,get ObjectIdentifier(){return Va},AlgorithmIdentifier:Ja,PrivateKeyInfo:Ma,PublicKeyInfo:za,RsaPrivateKey:$a,RsaPublicKey:Qa,EcPrivateKey:ti,get EcPublicKey(){return ei},EcDsaSignature:ai}),Object.freeze({__proto__:null,converters:Ya});function ii(e){if(e instanceof Ue)return e;var t,r=new Ue;if("string"==typeof e)r.fromAlgorithm({name:e});else if((t=e)instanceof Object&&"name"in t&&"hash"in t){var n=_objectSpread({},e);n.hash=ii(e.hash),r.fromAlgorithm(n)}else r.fromAlgorithm(_objectSpread({},e));return r}function oi(e,t){if(!e||"object"!==_typeof(e)&&"string"!=typeof e)throw new TypeError("".concat(t,": Is wrong type. Must be Object or String"));if("object"===_typeof(e)&&!("name"in e))throw new TypeError("".concat(t,": Required property 'name' is missed"))}function si(e,t){if(!function(e){return e instanceof He}(e))throw new TypeError("".concat(t,": Is not type CryptoKey"))}function ui(e,t){if(!function(e){return e instanceof dt}(e))throw new TypeError("".concat(t,": Is not type CryptoCertificate"))}function ci(e,t){if(!c.isBufferSource(e))throw new TypeError("".concat(t,": Is wrong type. Must be ArrayBuffer or ArrayBuffer view"))}function li(e,t){if(!Array.isArray(e))throw new TypeError("".concat(t,": Is not type Array"))}function fi(e,t,r){if(_typeof(e)!==t)throw new TypeError("".concat(r,": Is not type '").concat(t,"'"))}var hi=["raw","pem","x509","request"],pi=function(){function e(t){_classCallCheck(this,e),this.provider=t}var t,r,n,a,i,o,s,u,l,f,h,p,y,v,g;return _createClass(e,[{key:"indexOf",value:(g=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ui(t,"item"),(r=new It).providerID=this.provider.id,r.item=t,e.next=6,this.provider.client.send(r);case 6:return n=e.sent,e.abrupt("return",n?Br.ToUtf8String(n):null);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"hasItem",value:(v=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.indexOf(t);case 2:return r=e.sent,e.abrupt("return",!!r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"exportCert",value:(y=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r){var n,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fi(t,"string","format"),ui(r,"item"),(n=new Et).providerID=this.provider.id,n.format="raw",n.item=r,e.next=8,this.provider.client.send(n);case 8:if(a=e.sent,"raw"!==t){e.next=13;break}return e.abrupt("return",a);case 13:i="",e.t0=r.type,e.next="x509"===e.t0?17:"request"===e.t0?19:21;break;case 17:return i="CERTIFICATE",e.abrupt("break",22);case 19:return i="CERTIFICATE REQUEST",e.abrupt("break",22);case 21:throw new Error("Cannot create PEM for unknown type of certificate item");case 22:return o=ja.fromBufferSource(a,i),e.abrupt("return",o);case 24:case"end":return e.stop()}}),e,this)}))),function(e,t){return y.apply(this,arguments)})},{key:"importCert",value:(p=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r,n,a){var i,o,s,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fi(t,"string","format"),~hi.indexOf(t)){e.next=3;break}throw new TypeError("format: Is invalid value. Must be ".concat(hi.join(", ")));case 3:if("pem"===t?fi(r,"string","data"):ci(r,"data"),oi(n,"algorithm"),li(a,"keyUsages"),i=ii(n),!c.isBufferSource(r)){e.next=11;break}o=c.toArrayBuffer(r),e.next=16;break;case 11:if("string"!=typeof r){e.next=15;break}o=ja.toArrayBuffer(r),e.next=16;break;case 15:throw new TypeError("data: Is not type String, ArrayBuffer or ArrayBufferView");case 16:return(s=new Nt).providerID=this.provider.id,s.format="raw",s.data=o,s.algorithm=i,s.keyUsages=a,e.next=24,this.provider.client.send(s);case 24:return u=e.sent,e.next=27,dt.importProto(u);case 27:if(l=e.sent,"request"!==t&&"x509"!==t||l.type===t){e.next=30;break}throw new TypeError("Imported item is not ".concat(t));case 30:return e.abrupt("return",this.prepareCertItem(l));case 31:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return p.apply(this,arguments)})},{key:"keys",value:(h=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new Ct).providerID=this.provider.id,e.next=4,this.provider.client.send(t);case 4:if(!(r=e.sent)){e.next=8;break}return n=Br.ToUtf8String(r).split(","),e.abrupt("return",n);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"getValue",value:(f=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fi(t,"string","key"),(r=new Bt).providerID=this.provider.id,r.key=t,e.next=6,this.provider.client.send(r);case 6:if(!(n=e.sent)){e.next=9;break}return e.abrupt("return",n);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"getItem",value:(l=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r,n){var a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fi(t,"string","key"),r&&(oi(r,"algorithm"),li(n,"keyUsages")),(a=new xt).providerID=this.provider.id,a.key=t,r&&(a.algorithm=ii(r),a.keyUsages=n),e.next=8,this.provider.client.send(a);case 8:if(!(i=e.sent)||!i.byteLength){e.next=14;break}return e.next=12,dt.importProto(i);case 12:return o=e.sent,e.abrupt("return",this.prepareCertItem(o));case 14:throw new Error("Cannot get CryptoCertificate from storage by index");case 15:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return l.apply(this,arguments)})},{key:"setItem",value:(u=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ui(t,"value"),(r=new _t).providerID=this.provider.id,r.item=t,e.next=6,this.provider.client.send(r);case 6:return n=e.sent,e.abrupt("return",Br.ToUtf8String(n));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"removeItem",value:(s=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fi(t,"string","key"),(r=new St).providerID=this.provider.id,r.key=t,e.next=6,this.provider.client.send(r);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"clear",value:(o=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new At).providerID=this.provider.id,e.next=4,this.provider.client.send(t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"getChain",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ui(t,"value"),(r=new Tt).providerID=this.provider.id,r.item=t,e.next=6,this.provider.client.send(r);case 6:return n=e.sent,e.next=9,wt.importProto(n);case 9:return a=e.sent,e.abrupt("return",a.items);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"getCRL",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fi(t,"string","url"),(r=new Rt).providerID=this.provider.id,r.url=t,e.next=6,this.provider.client.send(r);case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"getOCSP",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r,n){var a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fi(t,"string","url"),ci(r,"request"),(a=new Pt).providerID=this.provider.id,a.url=t,a.request=c.toArrayBuffer(r),n)for(i in n)a.options[i]=n[i];return e.next=9,this.provider.client.send(a);case 9:return o=e.sent,e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"findPrivateKey",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=4;break}e.t0=t,e.next=7;break;case 4:return e.next=6,this.provider.certStorage.indexOf(t);case 6:e.t0=e.sent;case 7:return(r=e.t0)||(r=""),n=r.split("-"),a=_slicedToArray(n,3),i=a[2],e.next=12,this.provider.keyStorage.keys();case 12:if(o=e.sent.find((function(e){var t=_slicedToArray(e.split("-"),3),r=t[0],n=t[2];return"private"===r&&n===i}))){e.next=15;break}return e.abrupt("return",null);case 15:return e.next=17,this.provider.keyStorage.getItem(o);case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"prepareCertItem",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.exportProto();case 2:r=e.sent,e.t0=t.type,e.next="x509"===e.t0?6:"request"===e.t0?10:14;break;case 6:return e.next=8,mt.importProto(r);case 8:return n=e.sent,e.abrupt("break",15);case 10:return e.next=12,kt.importProto(r);case 12:return n=e.sent,e.abrupt("break",15);case 14:throw new Error("Unsupported CertificateItem type '".concat(t.type,"'"));case 15:return n.provider=this.provider,e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}],[{key:"isX509Certificate",value:function(e){return e instanceof mt}},{key:"isCertificateRequest",value:function(e){return e instanceof kt}}]),e}(),yi=function(){function e(t){_classCallCheck(this,e),this.service=t}var t,r,n,a,i,o,s;return _createClass(e,[{key:"keys",value:(s=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new Gt).providerID=this.service.id,e.next=4,this.service.client.send(t);case 4:if(!(r=e.sent)){e.next=8;break}return n=Br.ToUtf8String(r).split(","),e.abrupt("return",n);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"indexOf",value:(o=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return si(t,"item"),(r=new zt).providerID=this.service.id,r.item=t,e.next=6,this.service.client.send(r);case 6:return n=e.sent,e.abrupt("return",n?Br.ToUtf8String(n):null);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"hasItem",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.indexOf(t);case 2:return r=e.sent,e.abrupt("return",!!r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"getItem",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r,n,a){var i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fi(t,"string","key"),r&&(oi(r,"algorithm"),fi(n,"boolean","extractable"),li(a,"usages")),(i=new Xt).providerID=this.service.id,i.key=t,r&&(i.algorithm=ii(r),i.extractable=n,i.keyUsages=a),e.next=8,this.service.client.send(i);case 8:if(!(o=e.sent)||!o.byteLength){e.next=15;break}return e.next=12,He.importProto(o);case 12:s=e.sent,e.next=16;break;case 15:throw new Error("Cannot get CryptoKey from key storage by index");case 16:return e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return a.apply(this,arguments)})},{key:"setItem",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return si(t,"value"),(r=new Lt).providerID=this.service.id,r.item=t,e.next=6,this.service.client.send(r);case 6:return n=e.sent,e.abrupt("return",Br.ToUtf8String(n));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"removeItem",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fi(t,"string","key"),(r=new Ft).providerID=this.service.id,r.key=t,e.next=6,this.service.client.send(r);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"clear",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new qt).providerID=this.service.id,e.next=4,this.service.client.send(t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),vi=function(){function e(t){_classCallCheck(this,e),this.service=t}var t,r,n,a,i,o,s,u,l,f,h,p,y;return _createClass(e,[{key:"encrypt",value:(y=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.encryptData(t,r,n,"encrypt"));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return y.apply(this,arguments)})},{key:"decrypt",value:(p=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.encryptData(t,r,n,"decrypt"));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return p.apply(this,arguments)})},{key:"deriveBits",value:(h=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r,n){var a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oi(t,"algorithm"),si(r,"baseKey"),fi(n,"number","length"),si((a=ii(t)).public,"algorithm.public"),e.next=7,a.public.exportProto();case 7:return a.public=e.sent,(i=new dr).providerID=this.service.id,i.algorithm=a,i.key=r,i.length=n,e.next=15,this.service.client.send(i);case 15:return o=e.sent,e.abrupt("return",o);case 17:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return h.apply(this,arguments)})},{key:"deriveKey",value:(f=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r,n,a,i){var o,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oi(t,"algorithm"),si(r,"baseKey"),oi(n,"algorithm"),fi(a,"boolean","extractable"),li(i,"keyUsages"),si((o=ii(t)).public,"algorithm.public"),e.next=9,o.public.exportProto();case 9:return o.public=e.sent,s=ii(n),(u=new mr).providerID=this.service.id,u.algorithm=o,u.derivedKeyType.fromAlgorithm(s),u.key=r,u.extractable=a,u.usage=i,e.next=20,this.service.client.send(u);case 20:return c=e.sent,e.next=23,He.importProto(c);case 23:return e.abrupt("return",e.sent);case 24:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n,a){return f.apply(this,arguments)})},{key:"digest",value:(l=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L().crypto.subtle.digest(t,r));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return l.apply(this,arguments)})},{key:"generateKey",value:(u=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r,n){var a,i,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oi(t,"algorithm"),fi(r,"boolean","extractable"),li(n,"keyUsages"),a=ii(t),(i=new hr).providerID=this.service.id,i.algorithm=a,i.extractable=r,i.usage=n,e.next=11,this.service.client.send(i);case 11:return o=e.sent,e.prev=12,e.next=15,Pe.importProto(o);case 15:return s=e.sent,e.abrupt("return",s);case 19:return e.prev=19,e.t0=e.catch(12),e.next=23,He.importProto(o);case 23:return u=e.sent,e.abrupt("return",u);case 25:case"end":return e.stop()}}),e,this,[[12,19]])}))),function(e,t,r){return u.apply(this,arguments)})},{key:"exportKey",value:(s=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fi(t,"string","format"),si(r,"key"),(n=new wr).providerID=this.service.id,n.format=t,n.key=r,e.next=8,this.service.client.send(n);case 8:if(a=e.sent,"jwk"!==t){e.next=13;break}return e.abrupt("return",JSON.parse(Br.ToBinary(a)));case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"importKey",value:(o=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r,n,a,i){var o,s,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fi(t,"string","format"),oi(n,"algorithm"),fi(a,"boolean","extractable"),li(i,"keyUsages"),o=ii(n),"jwk"===t?s=Br.FromUtf8String(JSON.stringify(r)):(ci(r,"keyData"),s=c.toArrayBuffer(r)),(u=new _r).providerID=this.service.id,u.algorithm=o,u.keyData=s,u.format=t,u.extractable=a,u.keyUsages=i,e.next=15,this.service.client.send(u);case 15:return l=e.sent,e.next=18,He.importProto(l);case 18:return e.abrupt("return",e.sent);case 19:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n,a){return o.apply(this,arguments)})},{key:"sign",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r,n){var a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oi(t,"algorithm"),si(r,"key"),ci(n,"data"),a=ii(t),i=c.toArrayBuffer(n),(o=new pr).providerID=this.service.id,o.algorithm=a,o.key=r,o.data=i,e.next=12,this.service.client.send(o);case 12:return s=e.sent,e.abrupt("return",s);case 14:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return i.apply(this,arguments)})},{key:"verify",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r,n,a){var i,o,s,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oi(t,"algorithm"),si(r,"key"),ci(n,"signature"),ci(a,"data"),i=ii(t),o=c.toArrayBuffer(n),s=c.toArrayBuffer(a),(u=new yr).providerID=this.service.id,u.algorithm=i,u.key=r,u.data=s,u.signature=o,e.next=15,this.service.client.send(u);case 15:return l=e.sent,e.abrupt("return",!!new Uint8Array(l)[0]);case 17:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return a.apply(this,arguments)})},{key:"wrapKey",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r,n,a){var i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fi(t,"string","format"),si(r,"key"),si(n,"wrappingKey"),oi(a,"wrapAlgorithm"),i=ii(a),(o=new br).providerID=this.service.id,o.wrapAlgorithm=i,o.key=r,o.wrappingKey=n,o.format=t,e.next=13,this.service.client.send(o);case 13:return s=e.sent,e.abrupt("return",s);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t,r,a){return n.apply(this,arguments)})},{key:"unwrapKey",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r,n,a,i,o,s){var u,l,f,h,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fi(t,"string","format"),ci(r,"wrappedKey"),si(n,"unwrappingKey"),oi(a,"unwrapAlgorithm"),oi(i,"unwrappedKeyAlgorithm"),fi(o,"boolean","extractable"),li(s,"keyUsages"),u=ii(a),l=ii(i),f=c.toArrayBuffer(r),(h=new kr).providerID=this.service.id,h.format=t,h.unwrapAlgorithm=u,h.unwrappedKeyAlgorithm=l,h.unwrappingKey=n,h.wrappedKey=f,h.extractable=o,h.keyUsage=s,e.next=21,this.service.client.send(h);case 21:return p=e.sent,e.next=24,He.importProto(p);case 24:return e.abrupt("return",e.sent);case 25:case"end":return e.stop()}}),e,this)}))),function(e,t,n,a,i,o,s){return r.apply(this,arguments)})},{key:"encryptData",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r,n,a){var i,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oi(t,"algorithm"),si(r,"key"),ci(n,"data"),i=ii(t),o=c.toArrayBuffer(n),(s=new("encrypt"===a?vr:gr)).providerID=this.service.id,s.algorithm=i,s.key=r,s.data=o,e.next=13,this.service.client.send(s);case 13:return u=e.sent,e.abrupt("return",u);case 15:case"end":return e.stop()}}),e,this)}))),function(e,r,n,a){return t.apply(this,arguments)})}]),e}(),gi=function(){function e(t,r){_classCallCheck(this,e),this.client=t,this.id=r,this.subtle=new vi(this),this.keyStorage=new yi(this),this.certStorage=new pi(this)}var t,r,n,a;return _createClass(e,[{key:"getRandomValues",value:function(e){return L().crypto.getRandomValues(e)}},{key:"login",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new $e).providerID=this.id,e.abrupt("return",this.client.send(t));case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"logout",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new Qe).providerID=this.id,e.abrupt("return",this.client.send(t));case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"reset",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new gt).providerID=this.id,e.abrupt("return",this.client.send(t));case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"isLoggedIn",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new et).providerID=this.id,e.next=4,this.client.send(t);case 4:return r=e.sent,e.abrupt("return",!!new Uint8Array(r)[0]);case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),di=function(e){_inherits(s,e);var t,r,n,a,i,o=_createSuper(s);function s(e){var t;return _classCallCheck(this,s),(t=o.call(this)).client=new Wr(e.storage),t.cardReader=new Sr(t.client),t}return _createClass(s,[{key:"connect",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.FORTIFY,r=arguments.length>1?arguments[1]:void 0;return this.removeAllListeners(),this.client.connect(t,r).on("error",(function(t){e.emit("error",t.error)})).on("event",(function(t){_asyncToGenerator(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=t.action,r.next=r.t0===lr.ACTION?3:r.t0===Qt.ACTION?11:19;break;case 3:return r.t1=lr,r.next=6,t.exportProto();case 6:return r.t2=r.sent,r.next=9,r.t1.importProto.call(r.t1,r.t2);case 9:n=r.sent,e.emit("token",n);case 11:return r.t3=Qt,r.next=14,t.exportProto();case 14:return r.t4=r.sent,r.next=17,r.t3.importProto.call(r.t3,r.t4);case 17:a=r.sent,e.emit("auth",a);case 19:case"end":return r.stop()}}),r)})))()})).on("listening",(function(r){e.emit("listening",t)})).on("close",(function(t){e.emit("close",t.remoteAddress)})),this}},{key:"close",value:function(){this.client.close()}},{key:"on",value:function(e,t){return console.log("SocketProvider:on",e),_get5(_getPrototypeOf(s.prototype),"on",this).call(this,e,t)}},{key:"once",value:function(e,t){return _get5(_getPrototypeOf(s.prototype),"once",this).call(this,e,t)}},{key:"info",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Yt,e.next=3,this.client.send(t);case 3:return r=e.sent,e.next=6,Zt.importProto(r);case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"challenge",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.client.challenge());case 1:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"isLoggedIn",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.client.isLoggedIn());case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"login",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.client.login());case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getCrypto",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new $t).cryptoID=t,e.next=4,this.client.send(r);case 4:return e.abrupt("return",new gi(this.client,t));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"state",get:function(){return this.client.state}}]),s}(k);di.FORTIFY="127.0.0.1:31337";var mi=function e(){_classCallCheck(this,e)},ki=Yr((function(e){!function(){function t(e){return Array.prototype.slice.call(e)}function r(e){return new Promise((function(t,r){e.onsuccess=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function n(e,t,n){var a,i=new Promise((function(i,o){r(a=e[t].apply(e,n)).then(i,o)}));return i.request=a,i}function a(e,t,r){var a=n(e,t,r);return a.then((function(e){if(e)return new l(e,a.request)}))}function i(e,t,r){r.forEach((function(r){Object.defineProperty(e.prototype,r,{get:function(){return this[t][r]},set:function(e){this[t][r]=e}})}))}function o(e,t,r,a){a.forEach((function(a){a in r.prototype&&(e.prototype[a]=function(){return n(this[t],a,arguments)})}))}function s(e,t,r,n){n.forEach((function(n){n in r.prototype&&(e.prototype[n]=function(){return this[t][n].apply(this[t],arguments)})}))}function u(e,t,r,n){n.forEach((function(n){n in r.prototype&&(e.prototype[n]=function(){return a(this[t],n,arguments)})}))}function c(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function f(e){this._store=e}function h(e){this._tx=e,this.complete=new Promise((function(t,r){e.oncomplete=function(){t()},e.onerror=function(){r(e.error)},e.onabort=function(){r(e.error)}}))}function p(e,t,r){this._db=e,this.oldVersion=t,this.transaction=new h(r)}function y(e){this._db=e}i(c,"_index",["name","keyPath","multiEntry","unique"]),o(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),i(l,"_cursor",["direction","key","primaryKey","value"]),o(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,n=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,n),r(t._request).then((function(e){if(e)return new l(e,t._request)}))}))})})),f.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},f.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},i(f,"_store",["name","keyPath","indexNames","autoIncrement"]),o(f,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(f,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(f,"_store",IDBObjectStore,["deleteIndex"]),h.prototype.objectStore=function(){return new f(this._tx.objectStore.apply(this._tx,arguments))},i(h,"_tx",["objectStoreNames","mode"]),s(h,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new f(this._db.createObjectStore.apply(this._db,arguments))},i(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["deleteObjectStore","close"]),y.prototype.transaction=function(){return new h(this._db.transaction.apply(this._db,arguments))},i(y,"_db",["name","version","objectStoreNames"]),s(y,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[f,c].forEach((function(r){e in r.prototype&&(r.prototype[e.replace("open","iterate")]=function(){var r=t(arguments),n=r[r.length-1],a=this._store||this._index,i=a[e].apply(a,r.slice(0,-1));i.onsuccess=function(){n(i.result)}})}))})),[c,f].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var r=this,n=[];return new Promise((function(a){r.iterateCursor(e,(function(e){e?(n.push(e.value),void 0===t||n.length!=t?e.continue():a(n)):a(n)}))}))})}));var v={open:function(e,t,r){var a=n(indexedDB,"open",[e,t]),i=a.request;return i&&(i.onupgradeneeded=function(e){r&&r(new p(i.result,e.oldVersion,i.transaction))}),a.then((function(e){return new y(e)}))},delete:function(e){return n(indexedDB,"deleteDatabase",[e])}};e.exports=v,e.exports.default=e.exports}()})),bi=Yr((function(e){"undefined"!=typeof indexedDB?e.exports=ki:e.exports={open:function(){return Promise.reject("IDB requires a browser environment")},delete:function(){return Promise.reject("IDB requires a browser environment")}}})),wi=(bi.open,function(e){_inherits(f,e);var t,r,n,a,i,o,s,u,c,l=_createSuper(f);function f(e){var t;return _classCallCheck(this,f),(t=l.call(this)).db=e,t}return _createClass(f,[{key:"loadWrapKey",value:(c=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.transaction(f.IDENTITY_STORAGE).objectStore(f.IDENTITY_STORAGE).get(f.WRAP_KEY);case 2:if(!(t=e.sent)){e.next=11;break}if(jr.iv=t.iv,!(t.key instanceof ArrayBuffer)){e.next=10;break}return e.next=8,L().crypto.subtle.importKey("raw",t.key,{name:jr.name,length:256},!0,["encrypt","decrypt","wrapKey","unwrapKey"]);case 8:return r=e.sent,e.abrupt("return",{key:r,iv:t.iv});case 10:return e.abrupt("return",{key:t.key,iv:t.iv});case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"saveWrapKey",value:(u=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Lr()&&!Xr()){e.next=7;break}return e.next=3,L().crypto.subtle.exportKey("raw",t.key);case 3:n=e.sent,r={key:n,iv:t.iv},e.next=8;break;case 7:r=_objectSpread({},t);case 8:return e.next=10,this.db.transaction(f.IDENTITY_STORAGE,"readwrite").objectStore(f.IDENTITY_STORAGE).put(r,f.WRAP_KEY);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"loadIdentity",value:(s=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.transaction(f.IDENTITY_STORAGE).objectStore(f.IDENTITY_STORAGE).get(f.IDENTITY);case 2:if(t=e.sent,r=null,!t){e.next=26;break}if(!(Pr()||Lr()||Xr())){e.next=23;break}return e.next=8,this.loadWrapKey();case 8:if((n=e.sent)&&n.key.usages.some((function(e){return"encrypt"===e}))&&t.exchangeKey.privateKey instanceof ArrayBuffer){e.next=11;break}return e.abrupt("return",null);case 11:return e.next=13,L().crypto.subtle.unwrapKey("jwk",t.exchangeKey.privateKey,n.key,jr,Fr,!1,["deriveKey","deriveBits"]);case 13:return t.exchangeKey.privateKey=e.sent,e.next=16,L().crypto.subtle.unwrapKey("jwk",t.signingKey.privateKey,n.key,jr,qr,!1,["sign"]);case 16:return t.signingKey.privateKey=e.sent,e.next=19,L().crypto.subtle.unwrapKey("jwk",t.exchangeKey.publicKey,n.key,jr,Fr,!0,[]);case 19:return t.exchangeKey.publicKey=e.sent,e.next=22,L().crypto.subtle.unwrapKey("jwk",t.signingKey.publicKey,n.key,jr,qr,!0,["verify"]);case 22:t.signingKey.publicKey=e.sent;case 23:return e.next=25,j.fromJSON(t);case 25:r=e.sent;case 26:return e.abrupt("return",r);case 27:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"saveIdentity",value:(o=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Pr()||Lr()||Xr())){e.next=20;break}return e.next=3,L().crypto.subtle.generateKey({name:jr.name,length:256},Lr()||Xr(),["wrapKey","unwrapKey","encrypt","decrypt"]);case 3:return e.t0=e.sent,e.t1=L().crypto.getRandomValues(new Uint8Array(jr.iv)).buffer,r={key:e.t0,iv:e.t1},e.next=8,this.saveWrapKey(r);case 8:return e.next=10,L().crypto.subtle.generateKey(t.exchangeKey.privateKey.algorithm,!0,["deriveKey","deriveBits"]);case 10:return n=e.sent,t.exchangeKey.privateKey=n.privateKey,e.next=14,Mr(t.exchangeKey.publicKey,n.publicKey);case 14:return e.next=16,L().crypto.subtle.generateKey(t.signingKey.privateKey.algorithm,!0,["sign","verify"]);case 16:return a=e.sent,t.signingKey.privateKey=a.privateKey,e.next=20,Mr(t.signingKey.publicKey,a.publicKey);case 20:return e.next=22,t.toJSON();case 22:if(i=e.sent,!r){e.next=36;break}return e.next=26,L().crypto.subtle.wrapKey("jwk",t.exchangeKey.privateKey,r.key,jr);case 26:return i.exchangeKey.privateKey=e.sent,e.next=29,L().crypto.subtle.wrapKey("jwk",t.signingKey.privateKey,r.key,jr);case 29:return i.signingKey.privateKey=e.sent,e.next=32,L().crypto.subtle.wrapKey("jwk",t.exchangeKey.publicKey.key,r.key,jr);case 32:return i.exchangeKey.publicKey=e.sent,e.next=35,L().crypto.subtle.wrapKey("jwk",t.signingKey.publicKey.key,r.key,jr);case 35:i.signingKey.publicKey=e.sent;case 36:return e.next=38,this.db.transaction(f.IDENTITY_STORAGE,"readwrite").objectStore(f.IDENTITY_STORAGE).put(i,f.IDENTITY);case 38:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"loadRemoteIdentity",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.transaction(f.REMOTE_STORAGE).objectStore(f.REMOTE_STORAGE).get(t);case 2:if(r=e.sent,n=null,!r){e.next=18;break}return e.next=7,this.loadWrapKey();case 7:if(!(a=e.sent)){e.next=15;break}return e.next=11,L().crypto.subtle.unwrapKey("jwk",r.exchangeKey,a.key,jr,Fr,!0,[]);case 11:return r.exchangeKey=e.sent,e.next=14,L().crypto.subtle.unwrapKey("jwk",r.signingKey,a.key,jr,qr,!0,["verify"]);case 14:r.signingKey=e.sent;case 15:return e.next=17,V.fromJSON(r);case 17:n=e.sent;case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"saveRemoteIdentity",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.toJSON();case 2:return n=e.sent,e.next=5,this.loadWrapKey();case 5:if(!(a=e.sent)){e.next=13;break}return e.next=9,L().crypto.subtle.wrapKey("jwk",n.exchangeKey,a.key,jr);case 9:return n.exchangeKey=e.sent,e.next=12,L().crypto.subtle.wrapKey("jwk",n.signingKey,a.key,jr);case 12:n.signingKey=e.sent;case 13:return e.next=15,this.db.transaction(f.REMOTE_STORAGE,"readwrite").objectStore(f.REMOTE_STORAGE).put(n,t);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"loadSession",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var r,n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.transaction(f.SESSION_STORAGE).objectStore(f.SESSION_STORAGE).get(t);case 2:if(r=e.sent,n=null,!r){e.next=18;break}return e.next=7,this.loadIdentity();case 7:if(a=e.sent){e.next=10;break}throw new Error("Identity is empty");case 10:return e.next=12,this.loadRemoteIdentity(t);case 12:if(i=e.sent){e.next=15;break}throw new Error("Remote identity is not found");case 15:return e.next=17,pe.fromJSON(a,i,r);case 17:n=e.sent;case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"saveSession",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.toJSON();case 2:return n=e.sent,e.next=5,this.db.transaction(f.SESSION_STORAGE,"readwrite").objectStore(f.SESSION_STORAGE).put(n,t);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})}],[{key:"create",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bi.open(this.STORAGE_NAME,2,(function(e){1===e.oldVersion&&(e.deleteObjectStore(r.SESSION_STORAGE),e.deleteObjectStore(r.IDENTITY_STORAGE),e.deleteObjectStore(r.REMOTE_STORAGE)),e.createObjectStore(r.SESSION_STORAGE),e.createObjectStore(r.IDENTITY_STORAGE),e.createObjectStore(r.REMOTE_STORAGE)}));case 2:return t=e.sent,e.abrupt("return",new f(t));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),f}(mi));wi.STORAGE_NAME="webcrypto-remote",wi.IDENTITY_STORAGE="identity",wi.SESSION_STORAGE="sessions",wi.REMOTE_STORAGE="remoteIdentity",wi.WRAP_KEY="wkey",wi.IDENTITY="identity";var _i=function(e){_inherits(u,e);var t,r,n,a,i,o,s=_createSuper(u);function u(){var e;return _classCallCheck(this,u),(e=s.apply(this,arguments)).remoteIdentities={},e.sessions={},e}return _createClass(u,[{key:"loadIdentity",value:(o=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.identity||null);case 1:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"saveIdentity",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.identity=t;case 1:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"loadRemoteIdentity",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.remoteIdentities[t]||null);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"saveRemoteIdentity",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.remoteIdentities[t]=r;case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"loadSession",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.sessions[t]||null);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"saveSession",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.sessions[t]=r;case 1:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),u}(mi);return e.BrowserStorage=wi,e.CertificateStorage=pi,e.CryptoServerError=Or,e.KeyStorage=yi,e.MemoryStorage=_i,e.RatchetStorage=mi,e.SocketCrypto=gi,e.SocketProvider=di,e.getEngine=L,e.setEngine=function(e,t){P={crypto:t,name:e}},e}({},protobuf,fetch.bind(self),WebSocket);





  /////////////////asdf



  (function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
  typeof define === 'function' && define.amd ? define(['exports'], factory) :
  (factory((global.pvtsutils = global.pvtsutils || {})));
}(this, (function (exports) { 'use strict';

function PrepareBuffer(buffer) {
  if (typeof Buffer !== "undefined") {
      return new Uint8Array(buffer);
  }
  else {
      return new Uint8Array(buffer instanceof ArrayBuffer ? buffer : buffer.buffer);
  }
}
var Convert = (function () {
  function Convert() {
  }
  Convert.ToString = function (buffer, enc) {
      if (enc === void 0) { enc = "utf8"; }
      var buf = PrepareBuffer(buffer);
      switch (enc.toLowerCase()) {
          case "utf8":
              return this.ToUtf8String(buf);
          case "binary":
              return this.ToBinary(buf);
          case "hex":
              return this.ToHex(buf);
          case "base64":
              return this.ToBase64(buf);
          case "base64url":
              return this.ToBase64Url(buf);
          default:
              throw new Error("Unknown type of encoding '" + enc + "'");
      }
  };
  Convert.FromString = function (str, enc) {
      if (enc === void 0) { enc = "utf8"; }
      switch (enc.toLowerCase()) {
          case "utf8":
              return this.FromUtf8String(str);
          case "binary":
              return this.FromBinary(str);
          case "hex":
              return this.FromHex(str);
          case "base64":
              return this.FromBase64(str);
          case "base64url":
              return this.FromBase64Url(str);
          default:
              throw new Error("Unknown type of encoding '" + enc + "'");
      }
  };
  Convert.ToBase64 = function (buffer) {
      var buf = PrepareBuffer(buffer);
      if (typeof btoa !== "undefined") {
          var binary = this.ToString(buf, "binary");
          return btoa(binary);
      }
      else {
          return new Buffer(buf).toString("base64");
      }
  };
  Convert.FromBase64 = function (base64Text) {
      base64Text = base64Text.replace(/\n/g, "").replace(/\r/g, "").replace(/\t/g, "").replace(/\s/g, "");
      if (typeof atob !== "undefined") {
          return this.FromBinary(atob(base64Text));
      }
      else {
          return new Uint8Array(new Buffer(base64Text, "base64")).buffer;
      }
  };
  Convert.FromBase64Url = function (base64url) {
      return this.FromBase64(this.Base64Padding(base64url.replace(/\-/g, "+").replace(/\_/g, "/")));
  };
  Convert.ToBase64Url = function (data) {
      return this.ToBase64(data).replace(/\+/g, "-").replace(/\//g, "_").replace(/\=/g, "");
  };
  Convert.FromUtf8String = function (text) {
      var s = unescape(encodeURIComponent(text));
      var uintArray = new Uint8Array(s.length);
      for (var i = 0; i < s.length; i++) {
          uintArray[i] = s.charCodeAt(i);
      }
      return uintArray.buffer;
  };
  Convert.ToUtf8String = function (buffer) {
      var buf = PrepareBuffer(buffer);
      var encodedString = String.fromCharCode.apply(null, buf);
      var decodedString = decodeURIComponent(escape(encodedString));
      return decodedString;
  };
  Convert.FromBinary = function (text) {
      var stringLength = text.length;
      var resultView = new Uint8Array(stringLength);
      for (var i = 0; i < stringLength; i++) {
          resultView[i] = text.charCodeAt(i);
      }
      return resultView.buffer;
  };
  Convert.ToBinary = function (buffer) {
      var buf = PrepareBuffer(buffer);
      var resultString = "";
      var len = buf.length;
      for (var i = 0; i < len; i++) {
          resultString = resultString + String.fromCharCode(buf[i]);
      }
      return resultString;
  };
  Convert.ToHex = function (buffer) {
      var buf = PrepareBuffer(buffer);
      var splitter = "";
      var res = [];
      var len = buf.length;
      for (var i = 0; i < len; i++) {
          var char = buf[i].toString(16);
          res.push(char.length === 1 ? "0" + char : char);
      }
      return res.join(splitter);
  };
  Convert.FromHex = function (hexString) {
      var res = new Uint8Array(hexString.length / 2);
      for (var i = 0; i < hexString.length; i = i + 2) {
          var c = hexString.slice(i, i + 2);
          res[i / 2] = parseInt(c, 16);
      }
      return res.buffer;
  };
  Convert.Base64Padding = function (base64) {
      var padCount = 4 - (base64.length % 4);
      if (padCount < 4) {
          for (var i = 0; i < padCount; i++) {
              base64 += "=";
          }
      }
      return base64;
  };
  return Convert;
}());

function assign(target) {
  var sources = [];
  for (var _i = 1; _i < arguments.length; _i++) {
      sources[_i - 1] = arguments[_i];
  }
  var res = arguments[0];
  for (var i = 1; i < arguments.length; i++) {
      var obj = arguments[i];
      for (var prop in obj) {
          res[prop] = obj[prop];
      }
  }
  return res;
}
function combine() {
  var buf = [];
  for (var _i = 0; _i < arguments.length; _i++) {
      buf[_i] = arguments[_i];
  }
  var totalByteLength = buf.map(function (item) { return item.byteLength; }).reduce(function (prev, cur) { return prev + cur; });
  var res = new Uint8Array(totalByteLength);
  var currentPos = 0;
  buf.map(function (item) { return new Uint8Array(item); }).forEach(function (arr) {
      for (var i = 0; i < arr.length; i++) {
          res[currentPos++] = arr[i];
      }
  });
  return res.buffer;
}
function isEqual(bytes1, bytes2) {
  if (!(bytes1 && bytes2)) {
      return false;
  }
  if (bytes1.byteLength !== bytes2.byteLength) {
      return false;
  }
  var b1 = new Uint8Array(bytes1);
  var b2 = new Uint8Array(bytes2);
  for (var i = 0; i < bytes1.byteLength; i++) {
      if (b1[i] !== b2[i]) {
          return false;
      }
  }
  return true;
}

exports.Convert = Convert;
exports.assign = assign;
exports.combine = combine;
exports.isEqual = isEqual;

Object.defineProperty(exports, '__esModule', { value: true });

})));




////////////////////asdf


"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _get=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var l=i.get;if(void 0!==l)return l.call(n)},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.asn1js=e.asn1js||{})}(this,function(e){function t(e,t,r){return e instanceof Object==!1?r:t in e?e[t]:r}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength,n="",i=!0,o=!1,l=void 0;try{for(var a,s=new Uint8Array(e,t,r)[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var u=a.value.toString(16).toUpperCase();n=n+(1===u.length?"0":"")+u}}catch(e){o=!0,l=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw l}}return n}function n(e,t,r,n){return t instanceof ArrayBuffer==!1?(e.error='Wrong parameter: inputBuffer must be "ArrayBuffer"',!1):0===t.byteLength?(e.error="Wrong parameter: inputBuffer has zero length",!1):r<0?(e.error="Wrong parameter: inputOffset less than zero",!1):n<0?(e.error="Wrong parameter: inputLength less than zero",!1):!(t.byteLength-r-n<0)||(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1)}function i(e,t){for(var r=0,n=e.length-1;n>=0;n--)r+=e[e.length-1-n]*Math.pow(2,t*n);return r}function o(e,t){for(var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)||-1,n=e,i=0,o=Math.pow(2,t),l=1;l<8;l++){if(e<o){var a=void 0;if(r<0)a=new ArrayBuffer(l),i=l;else{if(r<l)return new ArrayBuffer(0);a=new ArrayBuffer(r),i=r}for(var s=new Uint8Array(a),u=l-1;u>=0;u--){var c=Math.pow(2,u*t);s[i-u-1]=Math.floor(n/c),n-=s[i-u-1]*c}return a}o*=Math.pow(2,t)}return new ArrayBuffer(0)}function l(){for(var e=0,t=0,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=!0,l=!1,a=void 0;try{for(var s,u=n[Symbol.iterator]();!(o=(s=u.next()).done);o=!0)e+=s.value.byteLength}catch(e){l=!0,a=e}finally{try{!o&&u.return&&u.return()}finally{if(l)throw a}}var c=new ArrayBuffer(e),h=new Uint8Array(c),f=!0,v=!1,g=void 0;try{for(var k,y=n[Symbol.iterator]();!(f=(k=y.next()).done);f=!0){var d=k.value;h.set(new Uint8Array(d),t),t+=d.byteLength}}catch(e){v=!0,g=e}finally{try{!f&&y.return&&y.return()}finally{if(v)throw g}}return c}function a(){var e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){var t=255===e[0]&&128&e[1],r=0===e[0]&&0==(128&e[1]);(t||r)&&this.warnings.push("Needlessly long format")}for(var n=new ArrayBuffer(this.valueHex.byteLength),o=new Uint8Array(n),l=0;l<this.valueHex.byteLength;l++)o[l]=0;o[0]=128&e[0];for(var a=i(o,8),s=new ArrayBuffer(this.valueHex.byteLength),u=new Uint8Array(s),c=0;c<this.valueHex.byteLength;c++)u[c]=e[c];return u[0]&=127,i(u,8)-a}function s(e){for(var t=e<0?-1*e:e,r=128,n=1;n<8;n++){if(t<=r){if(e<0){var i=o(r-t,8,n);return new Uint8Array(i)[0]|=128,i}var l=o(t,8,n),a=new Uint8Array(l);if(128&a[0]){var s=l.slice(0),u=new Uint8Array(s);l=new ArrayBuffer(l.byteLength+1),a=new Uint8Array(l);for(var c=0;c<s.byteLength;c++)a[c+1]=u[c];a[0]=0}return l}r*=Math.pow(2,8)}return new ArrayBuffer(0)}function u(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=new Uint8Array(e),n=new Uint8Array(t),i=0;i<r.length;i++)if(r[i]!==n[i])return!1;return!0}function c(e,t){for(var r=e.toString(10),n=t-r.length,i=new Array(n),o=0;o<n;o++)i[o]="0";return i.join("").concat(r)}function h(e,t,r){var i=t,o=new p({},Object);if(!1===n(new y,e,t,r))return o.error="Wrong input parameters",{offset:-1,result:o};if(0===new Uint8Array(e,t,r).length)return this.error="Zero buffer length",{offset:-1,result:o};var l=o.idBlock.fromBER(e,t,r);if(o.warnings.concat(o.idBlock.warnings),-1===l)return o.error=o.idBlock.error,{offset:-1,result:o};if(t=l,r-=o.idBlock.blockLength,l=o.lenBlock.fromBER(e,t,r),o.warnings.concat(o.lenBlock.warnings),-1===l)return o.error=o.lenBlock.error,{offset:-1,result:o};if(t=l,r-=o.lenBlock.blockLength,!1===o.idBlock.isConstructed&&!0===o.lenBlock.isIndefiniteForm)return o.error="Indefinite length form used for primitive encoding form",{offset:-1,result:o};var a=p;switch(o.idBlock.tagClass){case 1:if(o.idBlock.tagNumber>=37&&!1===o.idBlock.isHexOnly)return o.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:o};switch(o.idBlock.tagNumber){case 0:if(!0===o.idBlock.isConstructed&&o.lenBlock.length>0)return o.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:o};a=x;break;case 1:a=A;break;case 2:a=T;break;case 3:a=P;break;case 4:a=E;break;case 5:a=R;break;case 6:a=W;break;case 10:a=D;break;case 12:a=V;break;case 14:a=fe;break;case 15:return o.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:o};case 16:a=H;break;case 17:a=L;break;case 18:a=K;break;case 19:a=Q;break;case 20:a=X;break;case 21:a=ee;break;case 22:a=te;break;case 23:a=le;break;case 24:a=ae;break;case 25:a=re;break;case 26:a=ne;break;case 27:a=ie;break;case 28:a=$;break;case 29:a=oe;break;case 30:a=Z;break;case 31:a=se;break;case 32:a=ue;break;case 33:a=ce;break;case 34:a=he;break;default:var s=void 0;(s=!0===o.idBlock.isConstructed?new w:new C).idBlock=o.idBlock,s.lenBlock=o.lenBlock,s.warnings=o.warnings,l=(o=s).fromBER(e,t,r)}break;case 2:case 3:case 4:default:a=!0===o.idBlock.isConstructed?w:C}return o=function(e,t){if(e instanceof t)return e;var r=new t;return r.idBlock=e.idBlock,r.lenBlock=e.lenBlock,r.warnings=e.warnings,r.valueBeforeDecode=e.valueBeforeDecode.slice(0),r}(o,a),l=o.fromBER(e,t,!0===o.lenBlock.isIndefiniteForm?r:o.lenBlock.length),o.valueBeforeDecode=e.slice(i,i+o.blockLength),{offset:l,result:o}}function f(e){if(0===e.byteLength){var t=new p({},Object);return t.error="Input buffer has zero length",{offset:-1,result:t}}return h(e,0,e.byteLength)}function v(e,t,r){if(r instanceof ve){for(var n=0;n<r.value.length;n++)if(!0===v(e,t,r.value[n]).verified)return{verified:!0,result:e};var i={verified:!1,result:{error:"Wrong values for Choice type"}};return r.hasOwnProperty("name")&&(i.name=r.name),i}if(r instanceof ge)return r.hasOwnProperty("name")&&(e[r.name]=t),{verified:!0,result:e};if(e instanceof Object==!1)return{verified:!1,result:{error:"Wrong root object"}};if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(r instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("idBlock"in r==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("fromBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("toBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var o=r.idBlock.toBER(!1);if(0===o.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(-1===r.idBlock.fromBER(o,0,o.byteLength))return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===r.idBlock.hasOwnProperty("tagClass"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagClass!==t.idBlock.tagClass)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("tagNumber"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagNumber!==t.idBlock.tagNumber)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("isConstructed"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isConstructed!==t.idBlock.isConstructed)return{verified:!1,result:e};if("isHexOnly"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly)return{verified:!1,result:e};if(!0===r.idBlock.isHexOnly){if("valueHex"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var l=new Uint8Array(r.idBlock.valueHex),a=new Uint8Array(t.idBlock.valueHex);if(l.length!==a.length)return{verified:!1,result:e};for(var s=0;s<l.length;s++)if(l[s]!==a[1])return{verified:!1,result:e}}if(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(e[r.name]=t)),!0===r.idBlock.isConstructed){var u=0,c={verified:!1},h=r.valueBlock.value.length;if(h>0&&r.valueBlock.value[0]instanceof ke&&(h=t.valueBlock.value.length),0===h)return{verified:!0,result:e};if(0===t.valueBlock.value.length&&0!==r.valueBlock.value.length){for(var g=!0,k=0;k<r.valueBlock.value.length;k++)g=g&&(r.valueBlock.value[k].optional||!1);return!0===g?{verified:!0,result:e}:(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),e.error="Inconsistent object length",{verified:!1,result:e})}for(var y=0;y<h;y++)if(y-u>=t.valueBlock.value.length){if(!1===r.valueBlock.value[y].optional){var d={verified:!1,result:e};return e.error="Inconsistent length between ASN.1 data and schema",r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],d.name=r.name)),d}}else if(r.valueBlock.value[0]instanceof ke){if(!1===(c=v(e,t.valueBlock.value[y],r.valueBlock.value[0].value)).verified){if(!0!==r.valueBlock.value[0].optional)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),c;u++}if("name"in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){var _={};void 0===(_="local"in r.valueBlock.value[0]&&!0===r.valueBlock.value[0].local?t:e)[r.valueBlock.value[0].name]&&(_[r.valueBlock.value[0].name]=[]),_[r.valueBlock.value[0].name].push(t.valueBlock.value[y])}}else if(!1===(c=v(e,t.valueBlock.value[y-u],r.valueBlock.value[y])).verified){if(!0!==r.valueBlock.value[y].optional)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),c;u++}if(!1===c.verified){var b={verified:!1,result:e};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],b.name=r.name)),b}return{verified:!0,result:e}}if("primitiveSchema"in r&&"valueHex"in t.valueBlock){var B=f(t.valueBlock.valueHex);if(-1===B.offset){var p={verified:!1,result:B.result};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],p.name=r.name)),p}return v(e,B.result,r.primitiveSchema)}return{verified:!0,result:e}}function g(e,t){if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};var r=f(e);return-1===r.offset?{verified:!1,result:r.result}:v(r.result,r.result,t)}function k(e){}var y=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.blockLength=t(r,"blockLength",0),this.error=t(r,"error",""),this.warnings=t(r,"warnings",[]),this.valueBeforeDecode="valueBeforeDecode"in r?r.valueBeforeDecode.slice(0):new ArrayBuffer(0)}return _createClass(e,[{key:"toJSON",value:function(){return{blockName:this.constructor.blockName(),blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:r(this.valueBeforeDecode,0,this.valueBeforeDecode.byteLength)}}}],[{key:"blockName",value:function(){return"baseBlock"}}]),e}(),d=function(e){return function(e){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return r.isHexOnly=t(e,"isHexOnly",!1),r.valueHex="valueHex"in e?e.valueHex.slice(0):new ArrayBuffer(0),r}return _inherits(i,e),_createClass(i,[{key:"fromBER",value:function(e,t,r){return!1===n(this,e,t,r)?-1:0===new Uint8Array(e,t,r).length?(this.warnings.push("Zero buffer length"),t):(this.valueHex=e.slice(t,t+r),this.blockLength=r,t+r)}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!0!==this.isHexOnly?(this.error='Flag "isHexOnly" is not set, abort',new ArrayBuffer(0)):!0===e?new ArrayBuffer(this.valueHex.byteLength):this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=_get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.isHexOnly=this.isHexOnly,e.valueHex=r(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"hexBlock"}}]),i}(e)},_=function(e){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,r);var n=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return"idBlock"in e?(n.isHexOnly=t(e.idBlock,"isHexOnly",!1),n.valueHex=t(e.idBlock,"valueHex",new ArrayBuffer(0)),n.tagClass=t(e.idBlock,"tagClass",-1),n.tagNumber=t(e.idBlock,"tagNumber",-1),n.isConstructed=t(e.idBlock,"isConstructed",!1)):(n.tagClass=-1,n.tagNumber=-1,n.isConstructed=!1),n}return _inherits(r,e),_createClass(r,[{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=0,r=void 0,n=void 0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",new ArrayBuffer(0)}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){if(r=new ArrayBuffer(1),n=new Uint8Array(r),!e){var i=this.tagNumber;t|=i&=31,n[0]=t}return r}if(!1===this.isHexOnly){var l=o(this.tagNumber,7),a=new Uint8Array(l),s=l.byteLength;if(r=new ArrayBuffer(s+1),n=new Uint8Array(r),n[0]=31|t,!e){for(var u=0;u<s-1;u++)n[u+1]=128|a[u];n[s]=a[s-1]}return r}if(r=new ArrayBuffer(this.valueHex.byteLength+1),n=new Uint8Array(r),n[0]=31|t,!1===e){for(var c=new Uint8Array(this.valueHex),h=0;h<c.length-1;h++)n[h+1]=128|c[h];n[this.valueHex.byteLength]=c[c.length-1]}return r}},{key:"fromBER",value:function(e,t,r){if(!1===n(this,e,t,r))return-1;var o=new Uint8Array(e,t,r);if(0===o.length)return this.error="Zero buffer length",-1;switch(192&o[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=32==(32&o[0]),this.isHexOnly=!1;var l=31&o[0];if(31!==l)this.tagNumber=l,this.blockLength=1;else{var a=1;this.valueHex=new ArrayBuffer(255);for(var s=255,u=new Uint8Array(this.valueHex);128&o[a];){if(u[a-1]=127&o[a],++a>=o.length)return this.error="End of input reached before message was fully decoded",-1;if(a===s){s+=255;for(var c=new ArrayBuffer(s),h=new Uint8Array(c),f=0;f<u.length;f++)h[f]=u[f];this.valueHex=new ArrayBuffer(s),u=new Uint8Array(this.valueHex)}}this.blockLength=a+1,u[a-1]=127&o[a];for(var v=new ArrayBuffer(a),g=new Uint8Array(v),k=0;k<a;k++)g[k]=u[k];this.valueHex=new ArrayBuffer(a),(u=new Uint8Array(this.valueHex)).set(g),this.blockLength<=9?this.tagNumber=i(u,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}},{key:"toJSON",value:function(){var e={};try{e=_get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.tagClass=this.tagClass,e.tagNumber=this.tagNumber,e.isConstructed=this.isConstructed,e}}],[{key:"blockName",value:function(){return"identificationBlock"}}]),r}(d(y)),b=function(e){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,r);var n=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return"lenBlock"in e?(n.isIndefiniteForm=t(e.lenBlock,"isIndefiniteForm",!1),n.longFormUsed=t(e.lenBlock,"longFormUsed",!1),n.length=t(e.lenBlock,"length",0)):(n.isIndefiniteForm=!1,n.longFormUsed=!1,n.length=0),n}return _inherits(r,e),_createClass(r,[{key:"fromBER",value:function(e,t,r){if(!1===n(this,e,t,r))return-1;var o=new Uint8Array(e,t,r);if(0===o.length)return this.error="Zero buffer length",-1;if(255===o[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===o[0],!0===this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&o[0]),!1===this.longFormUsed)return this.length=o[0],this.blockLength=1,t+this.blockLength;var l=127&o[0];if(l>8)return this.error="Too big integer",-1;if(l+1>o.length)return this.error="End of input reached before message was fully decoded",-1;for(var a=new Uint8Array(l),s=0;s<l;s++)a[s]=o[s+1];return 0===a[l-1]&&this.warnings.push("Needlessly long encoded length"),this.length=i(a,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unneccesary usage of long length form"),this.blockLength=l+1,t+this.blockLength}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=void 0,r=void 0;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),!1===e&&((r=new Uint8Array(t))[0]=128),t;if(!0===this.longFormUsed){var n=o(this.length,8);if(n.byteLength>127)return this.error="Too big length",new ArrayBuffer(0);if(t=new ArrayBuffer(n.byteLength+1),!0===e)return t;var i=new Uint8Array(n);(r=new Uint8Array(t))[0]=128|n.byteLength;for(var l=0;l<n.byteLength;l++)r[l+1]=i[l];return t}return t=new ArrayBuffer(1),!1===e&&((r=new Uint8Array(t))[0]=this.length),t}},{key:"toJSON",value:function(){var e={};try{e=_get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.isIndefiniteForm=this.isIndefiniteForm,e.longFormUsed=this.longFormUsed,e.length=this.length,e}}],[{key:"blockName",value:function(){return"lengthBlock"}}]),r}(y),B=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,t,r){throw TypeError('User need to make a specific function in a class which extends "LocalValueBlock"')}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];throw TypeError('User need to make a specific function in a class which extends "LocalValueBlock"')}}],[{key:"blockName",value:function(){return"valueBlock"}}]),t}(y),p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B;_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return"name"in e&&(n.name=e.name),"optional"in e&&(n.optional=e.optional),"primitiveSchema"in e&&(n.primitiveSchema=e.primitiveSchema),n.idBlock=new _(e),n.lenBlock=new b(e),n.valueBlock=new r(e),n}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=void 0,r=this.idBlock.toBER(e),n=this.valueBlock.toBER(!0);this.lenBlock.length=n.byteLength,t=l(r,this.lenBlock.toBER(e));var i=void 0;if(i=!1===e?this.valueBlock.toBER(e):new ArrayBuffer(this.lenBlock.length),t=l(t,i),!0===this.lenBlock.isIndefiniteForm){var o=new ArrayBuffer(2);if(!1===e){var a=new Uint8Array(o);a[0]=0,a[1]=0}t=l(t,o)}return t}},{key:"toJSON",value:function(){var e={};try{e=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.idBlock=this.idBlock.toJSON(),e.lenBlock=this.lenBlock.toJSON(),e.valueBlock=this.valueBlock.toJSON(),"name"in this&&(e.name=this.name),"optional"in this&&(e.optional=this.optional),"primitiveSchema"in this&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}}],[{key:"blockName",value:function(){return"BaseBlock"}}]),t}(y),m=function(e){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return r.valueHex="valueHex"in e?e.valueHex.slice(0):new ArrayBuffer(0),r.isHexOnly=t(e,"isHexOnly",!0),r}return _inherits(i,e),_createClass(i,[{key:"fromBER",value:function(e,t,r){if(!1===n(this,e,t,r))return-1;var i=new Uint8Array(e,t,r);if(0===i.length)return this.warnings.push("Zero buffer length"),t;this.valueHex=new ArrayBuffer(i.length);for(var o=new Uint8Array(this.valueHex),l=0;l<i.length;l++)o[l]=i[l];return this.blockLength=r,t+r}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=_get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"toJSON",this).call(this)}catch(e){}return e.valueHex=r(this.valueHex,0,this.valueHex.byteLength),e.isHexOnly=this.isHexOnly,e}}],[{key:"blockName",value:function(){return"PrimitiveValueBlock"}}]),i}(B),C=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,m));return r.idBlock.isConstructed=!1,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"PRIMITIVE"}}]),t}(p),O=function(e){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,r);var n=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return n.value=t(e,"value",[]),n.isIndefiniteForm=t(e,"isIndefiniteForm",!1),n}return _inherits(r,e),_createClass(r,[{key:"fromBER",value:function(e,t,r){var i=t,o=r;if(!1===n(this,e,t,r))return-1;if(0===new Uint8Array(e,t,r).length)return this.warnings.push("Zero buffer length"),t;for(var l=t;function(e,t){return!0===e?1:t}(this.isIndefiniteForm,r)>0;){var a=h(e,l,r);if(-1===a.offset)return this.error=a.result.error,this.warnings.concat(a.result.warnings),-1;if(l=a.offset,this.blockLength+=a.result.blockLength,r-=a.result.blockLength,this.value.push(a.result),!0===this.isIndefiniteForm&&a.result.constructor.blockName()===x.blockName())break}return!0===this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.blockName()===x.blockName()?this.value.pop():this.warnings.push("No EndOfContent block encoded")),this.valueBeforeDecode=e.slice(i,i+o),l}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++)t=l(t,this.value[r].toBER(e));return t}},{key:"toJSON",value:function(){var e={};try{e=_get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}e.isIndefiniteForm=this.isIndefiniteForm,e.value=[];for(var t=0;t<this.value.length;t++)e.value.push(this.value[t].toJSON());return e}}],[{key:"blockName",value:function(){return"ConstructedValueBlock"}}]),r}(B),w=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,O));return r.idBlock.isConstructed=!0,r}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,t,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}}],[{key:"blockName",value:function(){return"CONSTRUCTED"}}]),t}(p),N=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,t,r){return t}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new ArrayBuffer(0)}}],[{key:"blockName",value:function(){return"EndOfContentValueBlock"}}]),t}(B),x=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,N));return r.idBlock.tagClass=1,r.idBlock.tagNumber=0,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"EndOfContent"}}]),t}(p),S=function(e){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return r.value=t(e,"value",!1),r.isHexOnly=t(e,"isHexOnly",!1),"valueHex"in e?r.valueHex=e.valueHex.slice(0):(r.valueHex=new ArrayBuffer(1),!0===r.value&&(new Uint8Array(r.valueHex)[0]=255)),r}return _inherits(i,e),_createClass(i,[{key:"fromBER",value:function(e,t,r){if(!1===n(this,e,t,r))return-1;var i=new Uint8Array(e,t,r);r>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.value=0!==i[0],this.isHexOnly=!0,this.valueHex=new ArrayBuffer(i.length);for(var o=new Uint8Array(this.valueHex),l=0;l<i.length;l++)o[l]=i[l];return this.blockLength=r,t+r}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.valueHex}},{key:"toJSON",value:function(){var e={};try{e=_get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e.isHexOnly=this.isHexOnly,e.valueHex=r(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"BooleanValueBlock"}}]),i}(B),A=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,S));return r.idBlock.tagClass=1,r.idBlock.tagNumber=1,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"Boolean"}}]),t}(p),H=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=16,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"Sequence"}}]),t}(w),L=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=17,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"Set"}}]),t}(w),R=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,y));return r.idBlock.tagClass=1,r.idBlock.tagNumber=5,r}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,t,r){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=r,t+r}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(2);if(!0===e)return t;var r=new Uint8Array(t);return r[0]=5,r[1]=0,t}}],[{key:"blockName",value:function(){return"Null"}}]),t}(p),U=function(e){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,n);var r=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return r.isConstructed=t(e,"isConstructed",!1),r}return _inherits(n,e),_createClass(n,[{key:"fromBER",value:function(e,t,r){var i=0;if(!0===this.isConstructed){if(this.isHexOnly=!1,-1===(i=O.prototype.fromBER.call(this,e,t,r)))return i;for(var o=0;o<this.value.length;o++){var l=this.value[o].constructor.blockName();if(l===x.blockName()){if(!0===this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(l!==E.blockName())return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,i=_get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"fromBER",this).call(this,e,t,r),this.blockLength=r;return i}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===this.isConstructed)return O.prototype.toBER.call(this,e);var t=new ArrayBuffer(this.valueHex.byteLength);return!0===e?t:0===this.valueHex.byteLength?t:t=this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=_get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"toJSON",this).call(this)}catch(e){}return e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=r(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"OctetStringValueBlock"}}]),n}(d(O)),E=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,U));return r.idBlock.tagClass=1,r.idBlock.tagNumber=4,r}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,r,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===n?(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),r):_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fromBER",this).call(this,e,r,n)}},{key:"isEqual",value:function(e){return e instanceof t!=!1&&JSON.stringify(this)===JSON.stringify(e)}}],[{key:"blockName",value:function(){return"OctetString"}}]),t}(p),j=function(e){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,i);var r=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return r.unusedBits=t(e,"unusedBits",0),r.isConstructed=t(e,"isConstructed",!1),r.blockLength=r.valueHex.byteLength+1,r}return _inherits(i,e),_createClass(i,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;var i=-1;if(!0===this.isConstructed){if(-1===(i=O.prototype.fromBER.call(this,e,t,r)))return i;for(var o=0;o<this.value.length;o++){var l=this.value[o].constructor.blockName();if(l===x.blockName()){if(!0===this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(l!==P.blockName())return this.error="BIT STRING may consists of BIT STRINGs only",-1;if(this.unusedBits>0&&this.value[o].unusedBits>0)return this.error='Usign of "unused bits" inside constructive BIT STRING allowed for least one only',-1;if(this.unusedBits=this.value[o].unusedBits,this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1}return i}if(!1===n(this,e,t,r))return-1;var a=new Uint8Array(e,t,r);if(this.unusedBits=a[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;this.valueHex=new ArrayBuffer(a.length-1);for(var s=new Uint8Array(this.valueHex),u=0;u<r-1;u++)s[u]=a[u+1];return this.blockLength=a.length,t+r}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===this.isConstructed)return O.prototype.toBER.call(this,e);if(!0===e)return new ArrayBuffer(this.valueHex.byteLength+1);if(0===this.valueHex.byteLength)return new ArrayBuffer(0);var t=new Uint8Array(this.valueHex),r=new ArrayBuffer(this.valueHex.byteLength+1),n=new Uint8Array(r);n[0]=this.unusedBits;for(var i=0;i<this.valueHex.byteLength;i++)n[i+1]=t[i];return r}},{key:"toJSON",value:function(){var e={};try{e=_get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"toJSON",this).call(this)}catch(e){}return e.unusedBits=this.unusedBits,e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=r(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"BitStringValueBlock"}}]),i}(d(O)),P=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,j));return r.idBlock.tagClass=1,r.idBlock.tagNumber=3,r}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,r,n){return 0===n?r:(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fromBER",this).call(this,e,r,n))}},{key:"isEqual",value:function(e){return e instanceof t!=!1&&JSON.stringify(this)===JSON.stringify(e)}}],[{key:"blockName",value:function(){return"BitString"}}]),t}(p),I=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return"value"in e&&(r.valueDec=e.value),r}return _inherits(t,e),_createClass(t,[{key:"fromDER",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=this.fromBER(e,t,r);if(-1===i)return i;var o=new Uint8Array(this._valueHex);if(0===o[0]&&0!=(128&o[1])){var l=new ArrayBuffer(this._valueHex.byteLength-1);new Uint8Array(l).set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=l.slice(0)}else if(0!==n&&this._valueHex.byteLength<n){n-this._valueHex.byteLength>1&&(n=this._valueHex.byteLength+1);var a=new ArrayBuffer(n);new Uint8Array(a).set(o,n-this._valueHex.byteLength),this._valueHex=a.slice(0)}return i}},{key:"toDER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new Uint8Array(this._valueHex);switch(!0){case 0!=(128&t[0]):var r=new ArrayBuffer(this._valueHex.byteLength+1),n=new Uint8Array(r);n[0]=0,n.set(t,1),this._valueHex=r.slice(0);break;case 0===t[0]&&0==(128&t[1]):var i=new ArrayBuffer(this._valueHex.byteLength-1);new Uint8Array(i).set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=i.slice(0)}return this.toBER(e)}},{key:"fromBER",value:function(e,r,n){var i=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fromBER",this).call(this,e,r,n);return-1===i?i:(this.blockLength=n,r+n)}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.valueDec=this.valueDec,e}},{key:"valueHex",set:function(e){this._valueHex=e.slice(0),e.byteLength>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,e.byteLength>0&&(this._valueDec=a.call(this)))},get:function(){return this._valueHex}},{key:"valueDec",set:function(e){this._valueDec=e,this.isHexOnly=!1,this._valueHex=s(e)},get:function(){return this._valueDec}}],[{key:"blockName",value:function(){return"IntegerValueBlock"}}]),t}(d(B)),T=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,I));return r.idBlock.tagClass=1,r.idBlock.tagNumber=2,r}return _inherits(t,e),_createClass(t,[{key:"isEqual",value:function(e){return e instanceof t?this.valueBlock.isHexOnly&&e.valueBlock.isHexOnly?u(this.valueBlock.valueHex,e.valueBlock.valueHex):this.valueBlock.isHexOnly===e.valueBlock.isHexOnly&&this.valueBlock.valueDec===e.valueBlock.valueDec:e instanceof ArrayBuffer&&u(this.valueBlock.valueHex,e)}},{key:"convertToDER",value:function(){var e=new t({valueHex:this.valueBlock.valueHex});return e.valueBlock.toDER(),e}},{key:"convertFromDER",value:function(){var e=this.valueBlock.valueHex.byteLength%2?this.valueBlock.valueHex.byteLength+1:this.valueBlock.valueHex.byteLength,r=new t({valueHex:this.valueBlock.valueHex});return r.valueBlock.fromDER(r.valueBlock.valueHex,0,r.valueBlock.valueHex.byteLength,e),r}}],[{key:"blockName",value:function(){return"Integer"}}]),t}(p),D=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=10,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"Enumerated"}}]),t}(T),F=function(e){function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,l);var r=_possibleConstructorReturn(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e));return r.valueDec=t(e,"valueDec",-1),r.isFirstSid=t(e,"isFirstSid",!1),r}return _inherits(l,e),_createClass(l,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;if(!1===n(this,e,t,r))return-1;var o=new Uint8Array(e,t,r);this.valueHex=new ArrayBuffer(r);for(var l=new Uint8Array(this.valueHex),a=0;a<r&&(l[a]=127&o[a],this.blockLength++,0!=(128&o[a]));a++);for(var s=new ArrayBuffer(this.blockLength),u=new Uint8Array(s),c=0;c<this.blockLength;c++)u[c]=l[c];return this.valueHex=s.slice(0),l=new Uint8Array(this.valueHex),0!=(128&o[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===l[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=i(l,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=void 0,r=void 0;if(this.isHexOnly){if(!0===e)return new ArrayBuffer(this.valueHex.byteLength);var n=new Uint8Array(this.valueHex);t=new ArrayBuffer(this.blockLength),r=new Uint8Array(t);for(var i=0;i<this.blockLength-1;i++)r[i]=128|n[i];return r[this.blockLength-1]=n[this.blockLength-1],t}var l=o(this.valueDec,7);if(0===l.byteLength)return this.error="Error during encoding SID value",new ArrayBuffer(0);if(t=new ArrayBuffer(l.byteLength),!1===e){var a=new Uint8Array(l);r=new Uint8Array(t);for(var s=0;s<l.byteLength-1;s++)r[s]=128|a[s];r[l.byteLength-1]=a[l.byteLength-1]}return t}},{key:"toString",value:function(){var e="";if(!0===this.isHexOnly)e=r(this.valueHex,0,this.valueHex.byteLength);else if(this.isFirstSid){var t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}},{key:"toJSON",value:function(){var e={};try{e=_get(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"toJSON",this).call(this)}catch(e){}return e.valueDec=this.valueDec,e.isFirstSid=this.isFirstSid,e}}],[{key:"blockName",value:function(){return"sidBlock"}}]),l}(d(y)),J=function(e){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,r);var n=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return n.fromString(t(e,"value","")),n}return _inherits(r,e),_createClass(r,[{key:"fromBER",value:function(e,t,r){for(var n=t;r>0;){var i=new F;if(-1===(n=i.fromBER(e,n,r)))return this.blockLength=0,this.error=i.error,n;0===this.value.length&&(i.isFirstSid=!0),this.blockLength+=i.blockLength,r-=i.blockLength,this.value.push(i)}return n}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);if(0===n.byteLength)return this.error=this.value[r].error,new ArrayBuffer(0);t=l(t,n)}return t}},{key:"fromString",value:function(e){this.value=[];var t=0,r=0,n="",i=!1;do{if(r=e.indexOf(".",t),n=-1===r?e.substr(t):e.substr(t,r-t),t=r+1,i){var o=this.value[0],l=0;switch(o.valueDec){case 0:break;case 1:l=40;break;case 2:l=80;break;default:return this.value=[],!1}var a=parseInt(n,10);if(isNaN(a))return!0;o.valueDec=a+l,i=!1}else{var s=new F;if(s.valueDec=parseInt(n,10),isNaN(s.valueDec))return!0;0===this.value.length&&(s.isFirstSid=!0,i=!0),this.value.push(s)}}while(-1!==r);return!0}},{key:"toString",value:function(){for(var e="",t=!1,r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;var n=this.value[r].toString();0!==r&&(e+="."),t?(n="{"+n+"}",this.value[r].isFirstSid?e="2.{"+n+" - 80}":e+=n):e+=n}return e}},{key:"toJSON",value:function(){var e={};try{e=_get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}e.value=this.toString(),e.sidArray=[];for(var t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}],[{key:"blockName",value:function(){return"ObjectIdentifierValueBlock"}}]),r}(B),W=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,J));return r.idBlock.tagClass=1,r.idBlock.tagNumber=6,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"ObjectIdentifier"}}]),t}(p),M=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isHexOnly=!0,r.value="",r}return _inherits(t,e),_createClass(t,[{key:"toJSON",value:function(){var e={};try{e=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"Utf8StringValueBlock"}}]),t}(d(y)),V=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,M));return"value"in e&&r.fromString(e.value),r.idBlock.tagClass=1,r.idBlock.tagNumber=12,r}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e));try{this.valueBlock.value=decodeURIComponent(escape(this.valueBlock.value))}catch(e){this.warnings.push('Error during "decodeURIComponent": '+e+", using raw string")}}},{key:"fromString",value:function(e){var t=unescape(encodeURIComponent(e)),r=t.length;this.valueBlock.valueHex=new ArrayBuffer(r);for(var n=new Uint8Array(this.valueBlock.valueHex),i=0;i<r;i++)n[i]=t.charCodeAt(i);this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"Utf8String"}}]),t}(p),G=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isHexOnly=!0,r.value="",r}return _inherits(t,e),_createClass(t,[{key:"toJSON",value:function(){var e={};try{e=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"BmpStringValueBlock"}}]),t}(d(y)),Z=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,G));return"value"in e&&r.fromString(e.value),r.idBlock.tagClass=1,r.idBlock.tagNumber=30,r}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){for(var t=e.slice(0),r=new Uint8Array(t),n=0;n<r.length;n+=2){var i=r[n];r[n]=r[n+1],r[n+1]=i}this.valueBlock.value=String.fromCharCode.apply(null,new Uint16Array(t))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(2*t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++){var i=o(e.charCodeAt(n),8),l=new Uint8Array(i);if(!(l.length>2))for(var a=2-l.length,s=l.length-1;s>=0;s--)r[2*n+s+a]=l[s]}this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"BmpString"}}]),t}(p),z=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isHexOnly=!0,r.value="",r}return _inherits(t,e),_createClass(t,[{key:"toJSON",value:function(){var e={};try{e=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"UniversalStringValueBlock"}}]),t}(d(y)),$=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,z));return"value"in e&&r.fromString(e.value),r.idBlock.tagClass=1,r.idBlock.tagNumber=28,r}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){for(var t=e.slice(0),r=new Uint8Array(t),n=0;n<r.length;n+=4)r[n]=r[n+3],r[n+1]=r[n+2],r[n+2]=0,r[n+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(4*t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++){var i=o(e.charCodeAt(n),8),l=new Uint8Array(i);if(!(l.length>4))for(var a=4-l.length,s=l.length-1;s>=0;s--)r[4*n+s+a]=l[s]}this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"UniversalString"}}]),t}(p),q=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.value="",r.isHexOnly=!0,r}return _inherits(t,e),_createClass(t,[{key:"toJSON",value:function(){var e={};try{e=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"SimpleStringValueBlock"}}]),t}(d(y)),Y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,q));return"value"in e&&r.fromString(e.value),r}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++)r[n]=e.charCodeAt(n);this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"SIMPLESTRING"}}]),t}(p),K=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=18,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"NumericString"}}]),t}(Y),Q=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=19,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"PrintableString"}}]),t}(Y),X=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=20,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"TeletexString"}}]),t}(Y),ee=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=21,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"VideotexString"}}]),t}(Y),te=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=22,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"IA5String"}}]),t}(Y),re=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=25,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"GraphicString"}}]),t}(Y),ne=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=26,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"VisibleString"}}]),t}(Y),ie=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=27,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"GeneralString"}}]),t}(Y),oe=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=29,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"CharacterString"}}]),t}(Y),le=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(r.year=0,r.month=0,r.day=0,r.hour=0,r.minute=0,r.second=0,"value"in e){r.fromString(e.value),r.valueBlock.valueHex=new ArrayBuffer(e.value.length);for(var n=new Uint8Array(r.valueBlock.valueHex),i=0;i<e.value.length;i++)n[i]=e.value.charCodeAt(i)}return"valueDate"in e&&(r.fromDate(e.valueDate),r.valueBlock.valueHex=r.toBuffer()),r.idBlock.tagClass=1,r.idBlock.tagNumber=23,r}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}},{key:"toBuffer",value:function(){for(var e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t}},{key:"fromDate",value:function(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}},{key:"toDate",value:function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}},{key:"fromString",value:function(e){var t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi.exec(e);if(null!==t){var r=parseInt(t[1],10);this.year=r>=50?1900+r:2e3+r,this.month=parseInt(t[2],10),this.day=parseInt(t[3],10),this.hour=parseInt(t[4],10),this.minute=parseInt(t[5],10),this.second=parseInt(t[6],10)}else this.error="Wrong input string for convertion"}},{key:"toString",value:function(){var e=new Array(7);return e[0]=c(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=c(this.month,2),e[2]=c(this.day,2),e[3]=c(this.hour,2),e[4]=c(this.minute,2),e[5]=c(this.second,2),e[6]="Z",e.join("")}},{key:"toJSON",value:function(){var e={};try{e=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e}}],[{key:"blockName",value:function(){return"UTCTime"}}]),t}(ne),ae=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(r.year=0,r.month=0,r.day=0,r.hour=0,r.minute=0,r.second=0,r.millisecond=0,"value"in e){r.fromString(e.value),r.valueBlock.valueHex=new ArrayBuffer(e.value.length);for(var n=new Uint8Array(r.valueBlock.valueHex),i=0;i<e.value.length;i++)n[i]=e.value.charCodeAt(i)}return"valueDate"in e&&(r.fromDate(e.valueDate),r.valueBlock.valueHex=r.toBuffer()),r.idBlock.tagClass=1,r.idBlock.tagNumber=24,r}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}},{key:"toBuffer",value:function(){for(var e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t}},{key:"fromDate",value:function(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}},{key:"toDate",value:function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}},{key:"fromString",value:function(e){var t=!1,r="",n="",i=0,o=void 0,l=0,a=0;if("Z"===e[e.length-1])r=e.substr(0,e.length-1),t=!0;else{var s=new Number(e[e.length-1]);if(isNaN(s.valueOf()))throw new Error("Wrong input string for convertion");r=e}if(t){if(-1!==r.indexOf("+"))throw new Error("Wrong input string for convertion");if(-1!==r.indexOf("-"))throw new Error("Wrong input string for convertion")}else{var u=1,c=r.indexOf("+"),h="";if(-1===c&&(c=r.indexOf("-"),u=-1),-1!==c){if(h=r.substr(c+1),r=r.substr(0,c),2!==h.length&&4!==h.length)throw new Error("Wrong input string for convertion");var f=new Number(h.substr(0,2));if(isNaN(f.valueOf()))throw new Error("Wrong input string for convertion");if(l=u*f,4===h.length){if(f=new Number(h.substr(2,2)),isNaN(f.valueOf()))throw new Error("Wrong input string for convertion");a=u*f}}}var v=r.indexOf(".");if(-1===v&&(v=r.indexOf(",")),-1!==v){var g=new Number("0"+r.substr(v));if(isNaN(g.valueOf()))throw new Error("Wrong input string for convertion");i=g.valueOf(),n=r.substr(0,v)}else n=r;switch(!0){case 8===n.length:if(o=/(\d{4})(\d{2})(\d{2})/gi,-1!==v)throw new Error("Wrong input string for convertion");break;case 10===n.length:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,-1!==v){var k=60*i;this.minute=Math.floor(k),k=60*(k-this.minute),this.second=Math.floor(k),k=1e3*(k-this.second),this.millisecond=Math.floor(k)}break;case 12===n.length:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==v){var y=60*i;this.second=Math.floor(y),y=1e3*(y-this.second),this.millisecond=Math.floor(y)}break;case 14===n.length:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==v){var d=1e3*i;this.millisecond=Math.floor(d)}break;default:throw new Error("Wrong input string for convertion")}var _=o.exec(n);if(null===_)throw new Error("Wrong input string for convertion");for(var b=1;b<_.length;b++)switch(b){case 1:this.year=parseInt(_[b],10);break;case 2:this.month=parseInt(_[b],10);break;case 3:this.day=parseInt(_[b],10);break;case 4:this.hour=parseInt(_[b],10)+l;break;case 5:this.minute=parseInt(_[b],10)+a;break;case 6:this.second=parseInt(_[b],10);break;default:throw new Error("Wrong input string for convertion")}if(!1===t){var B=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=B.getUTCFullYear(),this.month=B.getUTCMonth(),this.day=B.getUTCDay(),this.hour=B.getUTCHours(),this.minute=B.getUTCMinutes(),this.second=B.getUTCSeconds(),this.millisecond=B.getUTCMilliseconds()}}},{key:"toString",value:function(){var e=[];return e.push(c(this.year,4)),e.push(c(this.month,2)),e.push(c(this.day,2)),e.push(c(this.hour,2)),e.push(c(this.minute,2)),e.push(c(this.second,2)),0!==this.millisecond&&(e.push("."),e.push(c(this.millisecond,3))),e.push("Z"),e.join("")}},{key:"toJSON",value:function(){var e={};try{e=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e.millisecond=this.millisecond,e}}],[{key:"blockName",value:function(){return"GeneralizedTime"}}]),t}(ne),se=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=31,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"DATE"}}]),t}(V),ue=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=32,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"TimeOfDay"}}]),t}(V),ce=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=33,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"DateTime"}}]),t}(V),he=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=34,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"Duration"}}]),t}(V),fe=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=14,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"TIME"}}]),t}(V),ve=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.value=t(r,"value",[]),this.optional=t(r,"optional",!1)},ge=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.name=t(r,"name",""),this.optional=t(r,"optional",!1)},ke=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.name=t(r,"name",""),this.optional=t(r,"optional",!1),this.value=t(r,"value",new ge),this.local=t(r,"local",!1)},ye=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.data=t(r,"data",new ArrayBuffer(0))}return _createClass(e,[{key:"fromBER",value:function(e,t,r){this.data=e.slice(t,r)}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.data}}]),e}();e.BaseBlock=p,e.Primitive=C,e.Constructed=w,e.EndOfContent=x,e.Boolean=A,e.Sequence=H,e.Set=L,e.Null=R,e.OctetString=E,e.BitString=P,e.Integer=T,e.Enumerated=D,e.ObjectIdentifier=W,e.Utf8String=V,e.BmpString=Z,e.UniversalString=$,e.NumericString=K,e.PrintableString=Q,e.TeletexString=X,e.VideotexString=ee,e.IA5String=te,e.GraphicString=re,e.VisibleString=ne,e.GeneralString=ie,e.CharacterString=oe,e.UTCTime=le,e.GeneralizedTime=ae,e.DATE=se,e.TimeOfDay=ue,e.DateTime=ce,e.Duration=he,e.TIME=fe,e.Choice=ve,e.Any=ge,e.Repeated=ke,e.RawData=ye,e.fromBER=f,e.compareSchema=v,e.verifySchema=g,e.fromJSON=k,Object.defineProperty(e,"__esModule",{value:!0})});




/////////////////////////////asdf




"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _slicedToArray=function(){function e(e,t){var r=[],a=!0,n=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);a=!0);}catch(e){n=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_get=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(a)},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.pkijs=e.pkijs||{})}(this,function(e){function t(e,t,r){return e instanceof Object==!1?r:t in e?e[t]:r}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength,a="",n=!0,i=!1,s=void 0;try{for(var o,u=new Uint8Array(e,t,r)[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var l=o.value.toString(16).toUpperCase();a=a+(1===l.length?"0":"")+l}}catch(e){i=!0,s=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw s}}return a}function a(e,t,r,a){return t instanceof ArrayBuffer==!1?(e.error='Wrong parameter: inputBuffer must be "ArrayBuffer"',!1):0===t.byteLength?(e.error="Wrong parameter: inputBuffer has zero length",!1):r<0?(e.error="Wrong parameter: inputOffset less than zero",!1):a<0?(e.error="Wrong parameter: inputLength less than zero",!1):!(t.byteLength-r-a<0)||(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1)}function n(e,t){for(var r=0,a=e.length-1;a>=0;a--)r+=e[e.length-1-a]*Math.pow(2,t*a);return r}function i(e,t){for(var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)||-1,a=e,n=0,i=Math.pow(2,t),s=1;s<8;s++){if(e<i){var o=void 0;if(r<0)o=new ArrayBuffer(s),n=s;else{if(r<s)return new ArrayBuffer(0);o=new ArrayBuffer(r),n=r}for(var u=new Uint8Array(o),l=s-1;l>=0;l--){var c=Math.pow(2,l*t);u[n-l-1]=Math.floor(a/c),a-=u[n-l-1]*c}return o}i*=Math.pow(2,t)}return new ArrayBuffer(0)}function s(){for(var e=0,t=0,r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];var i=!0,s=!1,o=void 0;try{for(var u,l=a[Symbol.iterator]();!(i=(u=l.next()).done);i=!0)e+=u.value.byteLength}catch(e){s=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw o}}var c=new ArrayBuffer(e),h=new Uint8Array(c),m=!0,f=!1,v=void 0;try{for(var d,g=a[Symbol.iterator]();!(m=(d=g.next()).done);m=!0){var y=d.value;h.set(new Uint8Array(y),t),t+=y.byteLength}}catch(e){f=!0,v=e}finally{try{!m&&g.return&&g.return()}finally{if(f)throw v}}return c}function o(){var e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){var t=255===e[0]&&128&e[1],r=0===e[0]&&0==(128&e[1]);(t||r)&&this.warnings.push("Needlessly long format")}for(var a=new ArrayBuffer(this.valueHex.byteLength),i=new Uint8Array(a),s=0;s<this.valueHex.byteLength;s++)i[s]=0;i[0]=128&e[0];for(var o=n(i,8),u=new ArrayBuffer(this.valueHex.byteLength),l=new Uint8Array(u),c=0;c<this.valueHex.byteLength;c++)l[c]=e[c];return l[0]&=127,n(l,8)-o}function u(e){for(var t=e<0?-1*e:e,r=128,a=1;a<8;a++){if(t<=r){if(e<0){var n=i(r-t,8,a);return new Uint8Array(n)[0]|=128,n}var s=i(t,8,a),o=new Uint8Array(s);if(128&o[0]){var u=s.slice(0),l=new Uint8Array(u);s=new ArrayBuffer(s.byteLength+1),o=new Uint8Array(s);for(var c=0;c<u.byteLength;c++)o[c+1]=l[c];o[0]=0}return s}r*=Math.pow(2,8)}return new ArrayBuffer(0)}function l(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=new Uint8Array(e),a=new Uint8Array(t),n=0;n<r.length;n++)if(r[n]!==a[n])return!1;return!0}function c(e,t){for(var r=e.toString(10),a=t-r.length,n=new Array(a),i=0;i<a;i++)n[i]="0";return n.join("").concat(r)}function h(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=0,i=0,s=0,o="",u=t?U:H;if(a){for(var l=0,c=0;c<e.length;c++)if(0!==e.charCodeAt(c)){l=c;break}e=e.slice(l)}for(;n<e.length;){var h=e.charCodeAt(n++);n>=e.length&&(i=1);var m=e.charCodeAt(n++);n>=e.length&&(s=1);var f=e.charCodeAt(n++),v=h>>2,d=(3&h)<<4|m>>4,g=(15&m)<<2|f>>6,y=63&f;1===i?g=y=64:1===s&&(y=64),o+=r?64===g?""+u.charAt(v)+u.charAt(d):64===y?""+u.charAt(v)+u.charAt(d)+u.charAt(g):""+u.charAt(v)+u.charAt(d)+u.charAt(g)+u.charAt(y):""+u.charAt(v)+u.charAt(d)+u.charAt(g)+u.charAt(y)}return o}function m(e){function t(e){for(var t=0;t<64;t++)if(i.charAt(t)===e)return t;return 64}function r(e){return 64===e?0:e}for(var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=a?U:H,s=0,o="";s<e.length;){var u=t(e.charAt(s++)),l=s>=e.length?0:t(e.charAt(s++)),c=s>=e.length?0:t(e.charAt(s++)),h=s>=e.length?0:t(e.charAt(s++)),m=r(u)<<2|r(l)>>4,f=(15&r(l))<<4|r(c)>>2,v=(3&r(c))<<6|r(h);o+=String.fromCharCode(m),64!==c&&(o+=String.fromCharCode(f)),64!==h&&(o+=String.fromCharCode(v))}if(n){for(var d=-1,g=o.length-1;g>=0;g--)if(0!==o.charCodeAt(g)){d=g;break}-1!==d&&(o=o.slice(0,d+1))}return o}function f(e){var t="",r=new Uint8Array(e),a=!0,n=!1,i=void 0;try{for(var s,o=r[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var u=s.value;t+=String.fromCharCode(u)}}catch(e){n=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}return t}function v(e){for(var t=e.length,r=new ArrayBuffer(t),a=new Uint8Array(r),n=0;n<t;n++)a[n]=e.charCodeAt(n);return r}function d(e,t,r){var n=t,i=new F({},Object);if(!1===a(new L,e,t,r))return i.error="Wrong input parameters",{offset:-1,result:i};if(0===new Uint8Array(e,t,r).length)return this.error="Zero buffer length",{offset:-1,result:i};var s=i.idBlock.fromBER(e,t,r);if(i.warnings.concat(i.idBlock.warnings),-1===s)return i.error=i.idBlock.error,{offset:-1,result:i};if(t=s,r-=i.idBlock.blockLength,s=i.lenBlock.fromBER(e,t,r),i.warnings.concat(i.lenBlock.warnings),-1===s)return i.error=i.lenBlock.error,{offset:-1,result:i};if(t=s,r-=i.lenBlock.blockLength,!1===i.idBlock.isConstructed&&!0===i.lenBlock.isIndefiniteForm)return i.error="Indefinite length form used for primitive encoding form",{offset:-1,result:i};var o=F;switch(i.idBlock.tagClass){case 1:if(i.idBlock.tagNumber>=37&&!1===i.idBlock.isHexOnly)return i.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:i};switch(i.idBlock.tagNumber){case 0:if(!0===i.idBlock.isConstructed&&i.lenBlock.length>0)return i.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:i};o=$;break;case 1:o=Y;break;case 2:o=ue;break;case 3:o=se;break;case 4:o=ne;break;case 5:o=re;break;case 6:o=me;break;case 10:o=le;break;case 12:o=ve;break;case 14:o=Re;break;case 15:return i.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:i};case 16:o=ee;break;case 17:o=te;break;case 18:o=we;break;case 19:o=Ce;break;case 20:o=Se;break;case 21:o=Ae;break;case 22:o=Ie;break;case 23:o=xe;break;case 24:o=Oe;break;case 25:o=Be;break;case 26:o=Ne;break;case 27:o=Pe;break;case 28:o=pe;break;case 29:o=Ee;break;case 30:o=ge;break;case 31:o=Ve;break;case 32:o=_e;break;case 33:o=je;break;case 34:o=De;break;default:var u=void 0;(u=!0===i.idBlock.isConstructed?new z:new G).idBlock=i.idBlock,u.lenBlock=i.lenBlock,u.warnings=i.warnings,s=(i=u).fromBER(e,t,r)}break;case 2:case 3:case 4:default:o=!0===i.idBlock.isConstructed?z:G}return i=function(e,t){if(e instanceof t)return e;var r=new t;return r.idBlock=e.idBlock,r.lenBlock=e.lenBlock,r.warnings=e.warnings,r.valueBeforeDecode=e.valueBeforeDecode.slice(0),r}(i,o),s=i.fromBER(e,t,!0===i.lenBlock.isIndefiniteForm?r:i.lenBlock.length),i.valueBeforeDecode=e.slice(n,n+i.blockLength),{offset:s,result:i}}function g(e){if(0===e.byteLength){var t=new F({},Object);return t.error="Input buffer has zero length",{offset:-1,result:t}}return d(e,0,e.byteLength)}function y(e,t,r){if(r instanceof Ke){for(var a=0;a<r.value.length;a++)if(!0===y(e,t,r.value[a]).verified)return{verified:!0,result:e};var n={verified:!1,result:{error:"Wrong values for Choice type"}};return r.hasOwnProperty("name")&&(n.name=r.name),n}if(r instanceof He)return r.hasOwnProperty("name")&&(e[r.name]=t),{verified:!0,result:e};if(e instanceof Object==!1)return{verified:!1,result:{error:"Wrong root object"}};if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(r instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("idBlock"in r==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("fromBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("toBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var i=r.idBlock.toBER(!1);if(0===i.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(-1===r.idBlock.fromBER(i,0,i.byteLength))return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===r.idBlock.hasOwnProperty("tagClass"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagClass!==t.idBlock.tagClass)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("tagNumber"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagNumber!==t.idBlock.tagNumber)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("isConstructed"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isConstructed!==t.idBlock.isConstructed)return{verified:!1,result:e};if("isHexOnly"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly)return{verified:!1,result:e};if(!0===r.idBlock.isHexOnly){if("valueHex"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var s=new Uint8Array(r.idBlock.valueHex),o=new Uint8Array(t.idBlock.valueHex);if(s.length!==o.length)return{verified:!1,result:e};for(var u=0;u<s.length;u++)if(s[u]!==o[1])return{verified:!1,result:e}}if(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(e[r.name]=t)),!0===r.idBlock.isConstructed){var l=0,c={verified:!1},h=r.valueBlock.value.length;if(h>0&&r.valueBlock.value[0]instanceof Ue&&(h=t.valueBlock.value.length),0===h)return{verified:!0,result:e};if(0===t.valueBlock.value.length&&0!==r.valueBlock.value.length){for(var m=!0,f=0;f<r.valueBlock.value.length;f++)m=m&&(r.valueBlock.value[f].optional||!1);return!0===m?{verified:!0,result:e}:(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),e.error="Inconsistent object length",{verified:!1,result:e})}for(var v=0;v<h;v++)if(v-l>=t.valueBlock.value.length){if(!1===r.valueBlock.value[v].optional){var d={verified:!1,result:e};return e.error="Inconsistent length between ASN.1 data and schema",r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],d.name=r.name)),d}}else if(r.valueBlock.value[0]instanceof Ue){if(!1===(c=y(e,t.valueBlock.value[v],r.valueBlock.value[0].value)).verified){if(!0!==r.valueBlock.value[0].optional)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),c;l++}if("name"in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){var p={};void 0===(p="local"in r.valueBlock.value[0]&&!0===r.valueBlock.value[0].local?t:e)[r.valueBlock.value[0].name]&&(p[r.valueBlock.value[0].name]=[]),p[r.valueBlock.value[0].name].push(t.valueBlock.value[v])}}else if(!1===(c=y(e,t.valueBlock.value[v-l],r.valueBlock.value[v])).verified){if(!0!==r.valueBlock.value[v].optional)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),c;l++}if(!1===c.verified){var k={verified:!1,result:e};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],k.name=r.name)),k}return{verified:!0,result:e}}if("primitiveSchema"in r&&"valueHex"in t.valueBlock){var b=g(t.valueBlock.valueHex);if(-1===b.offset){var w={verified:!1,result:b.result};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],w.name=r.name)),w}return y(e,b.result,r.primitiveSchema)}return{verified:!0,result:e}}function p(e,t,r){Xe={name:e,crypto:t,subtle:r}}function k(){return Xe}function b(){if(null!==Xe.subtle)return Xe.subtle}function w(e){if(null!==Xe.crypto)return Xe.crypto.getRandomValues(e);throw new Error("No support for Web Cryptography API")}function C(e){var t="";switch(e.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.113549.1.1.5";break;case"SHA-256":t="1.2.840.113549.1.1.11";break;case"SHA-384":t="1.2.840.113549.1.1.12";break;case"SHA-512":t="1.2.840.113549.1.1.13"}break;case"RSA-PSS":t="1.2.840.113549.1.1.10";break;case"RSA-OAEP":t="1.2.840.113549.1.1.7";break;case"ECDSA":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.10045.4.1";break;case"SHA-256":t="1.2.840.10045.4.3.2";break;case"SHA-384":t="1.2.840.10045.4.3.3";break;case"SHA-512":t="1.2.840.10045.4.3.4"}break;case"ECDH":switch(e.kdf.toUpperCase()){case"SHA-1":t="1.3.133.16.840.63.0.2";break;case"SHA-256":t="1.3.132.1.11.1";break;case"SHA-384":t="1.3.132.1.11.2";break;case"SHA-512":t="1.3.132.1.11.3"}break;case"AES-CTR":break;case"AES-CBC":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.2";break;case 192:t="2.16.840.1.101.3.4.1.22";break;case 256:t="2.16.840.1.101.3.4.1.42"}break;case"AES-CMAC":break;case"AES-GCM":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.6";break;case 192:t="2.16.840.1.101.3.4.1.26";break;case 256:t="2.16.840.1.101.3.4.1.46"}break;case"AES-CFB":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.4";break;case 192:t="2.16.840.1.101.3.4.1.24";break;case 256:t="2.16.840.1.101.3.4.1.44"}break;case"AES-KW":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.5";break;case 192:t="2.16.840.1.101.3.4.1.25";break;case 256:t="2.16.840.1.101.3.4.1.45"}break;case"HMAC":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.113549.2.7";break;case"SHA-256":t="1.2.840.113549.2.9";break;case"SHA-384":t="1.2.840.113549.2.10";break;case"SHA-512":t="1.2.840.113549.2.11"}break;case"DH":t="1.2.840.113549.1.9.16.3.5";break;case"SHA-1":t="1.3.14.3.2.26";break;case"SHA-256":t="2.16.840.1.101.3.4.2.1";break;case"SHA-384":t="2.16.840.1.101.3.4.2.2";break;case"SHA-512":t="2.16.840.1.101.3.4.2.3";break;case"CONCAT":case"HKDF":break;case"PBKDF2":t="1.2.840.113549.1.5.12";break;case"P-256":t="1.2.840.10045.3.1.7";break;case"P-384":t="1.3.132.0.34";break;case"P-521":t="1.3.132.0.35"}return t}function S(e,t){var r={algorithm:{},usages:[]};switch(e.toUpperCase()){case"RSASSA-PKCS1-V1_5":switch(t.toLowerCase()){case"generatekey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["sign","verify"]};break;case"verify":case"sign":case"importkey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSASSA-PKCS1-v1_5"},usages:[]}}break;case"RSA-PSS":switch(t.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"},saltLength:20},usages:["sign","verify"]};break;case"generatekey":r={algorithm:{name:"RSA-PSS",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSA-PSS"},usages:[]}}break;case"RSA-OAEP":switch(t.toLowerCase()){case"encrypt":case"decrypt":r={algorithm:{name:"RSA-OAEP"},usages:["encrypt","decrypt"]};break;case"generatekey":r={algorithm:{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"importkey":r={algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]};break;case"exportkey":default:return{algorithm:{name:"RSA-OAEP"},usages:[]}}break;case"ECDSA":switch(t.toLowerCase()){case"generatekey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["verify"]};break;case"verify":case"sign":r={algorithm:{name:"ECDSA",hash:{name:"SHA-256"}},usages:["sign"]};break;default:return{algorithm:{name:"ECDSA"},usages:[]}}break;case"ECDH":switch(t.toLowerCase()){case"exportkey":case"importkey":case"generatekey":r={algorithm:{name:"ECDH",namedCurve:"P-256"},usages:["deriveKey","deriveBits"]};break;case"derivekey":case"derivebits":r={algorithm:{name:"ECDH",namedCurve:"P-256",public:[]},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"ECDH"},usages:[]}}break;case"AES-CTR":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CTR",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CTR",counter:new Uint8Array(16),length:10},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CTR"},usages:[]}}break;case"AES-CBC":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CBC",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CBC",iv:w(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CBC"},usages:[]}}break;case"AES-GCM":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-GCM",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-GCM",iv:w(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-GCM"},usages:[]}}break;case"AES-KW":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":case"wrapkey":case"unwrapkey":r={algorithm:{name:"AES-KW",length:256},usages:["wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-KW"},usages:[]}}break;case"HMAC":switch(t.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"HMAC"},usages:["sign","verify"]};break;case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"HMAC",length:32,hash:{name:"SHA-256"}},usages:["sign","verify"]};break;default:return{algorithm:{name:"HMAC"},usages:[]}}break;case"HKDF":switch(t.toLowerCase()){case"derivekey":r={algorithm:{name:"HKDF",hash:"SHA-256",salt:new Uint8Array([]),info:new Uint8Array([])},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"HKDF"},usages:[]}}break;case"PBKDF2":switch(t.toLowerCase()){case"derivekey":r={algorithm:{name:"PBKDF2",hash:{name:"SHA-256"},salt:new Uint8Array([]),iterations:1e3},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"PBKDF2"},usages:[]}}}return r}function A(e){if(e.byteLength%2!=0)return new ArrayBuffer(0);var t=e.byteLength/2,r=new ArrayBuffer(t);new Uint8Array(r).set(new Uint8Array(e,0,t));var a=new ue({valueHex:r}),n=new ArrayBuffer(t);new Uint8Array(n).set(new Uint8Array(e,t,t));var i=new ue({valueHex:n});return new ee({value:[a.convertToDER(),i.convertToDER()]}).toBER(!1)}function I(e){var t=e.replace(/^\s+|\s+$/g,"");return t=t.replace(/\s+/g," "),t=t.toLowerCase()}function B(e){if(e instanceof ee==!1)return new ArrayBuffer(0);if(2!==e.valueBlock.value.length)return new ArrayBuffer(0);if(e.valueBlock.value[0]instanceof ue==!1)return new ArrayBuffer(0);if(e.valueBlock.value[1]instanceof ue==!1)return new ArrayBuffer(0);var t=e.valueBlock.value[0].convertFromDER(),r=e.valueBlock.value[1].convertFromDER();return s(t.valueBlock.valueHex,r.valueBlock.valueHex)}function N(e){switch(e){case"1.2.840.113549.1.1.1":case"1.2.840.113549.1.1.5":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case"1.2.840.113549.1.1.11":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"1.2.840.113549.1.1.12":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"1.2.840.113549.1.1.13":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"1.2.840.113549.1.1.10":return{name:"RSA-PSS"};case"1.2.840.113549.1.1.7":return{name:"RSA-OAEP"};case"1.2.840.10045.2.1":case"1.2.840.10045.4.1":return{name:"ECDSA",hash:{name:"SHA-1"}};case"1.2.840.10045.4.3.2":return{name:"ECDSA",hash:{name:"SHA-256"}};case"1.2.840.10045.4.3.3":return{name:"ECDSA",hash:{name:"SHA-384"}};case"1.2.840.10045.4.3.4":return{name:"ECDSA",hash:{name:"SHA-512"}};case"1.3.133.16.840.63.0.2":return{name:"ECDH",kdf:"SHA-1"};case"1.3.132.1.11.1":return{name:"ECDH",kdf:"SHA-256"};case"1.3.132.1.11.2":return{name:"ECDH",kdf:"SHA-384"};case"1.3.132.1.11.3":return{name:"ECDH",kdf:"SHA-512"};case"2.16.840.1.101.3.4.1.2":return{name:"AES-CBC",length:128};case"2.16.840.1.101.3.4.1.22":return{name:"AES-CBC",length:192};case"2.16.840.1.101.3.4.1.42":return{name:"AES-CBC",length:256};case"2.16.840.1.101.3.4.1.6":return{name:"AES-GCM",length:128};case"2.16.840.1.101.3.4.1.26":return{name:"AES-GCM",length:192};case"2.16.840.1.101.3.4.1.46":return{name:"AES-GCM",length:256};case"2.16.840.1.101.3.4.1.4":return{name:"AES-CFB",length:128};case"2.16.840.1.101.3.4.1.24":return{name:"AES-CFB",length:192};case"2.16.840.1.101.3.4.1.44":return{name:"AES-CFB",length:256};case"2.16.840.1.101.3.4.1.5":return{name:"AES-KW",length:128};case"2.16.840.1.101.3.4.1.25":return{name:"AES-KW",length:192};case"2.16.840.1.101.3.4.1.45":return{name:"AES-KW",length:256};case"1.2.840.113549.2.7":return{name:"HMAC",hash:{name:"SHA-1"}};case"1.2.840.113549.2.9":return{name:"HMAC",hash:{name:"SHA-256"}};case"1.2.840.113549.2.10":return{name:"HMAC",hash:{name:"SHA-384"}};case"1.2.840.113549.2.11":return{name:"HMAC",hash:{name:"SHA-512"}};case"1.2.840.113549.1.9.16.3.5":return{name:"DH"};case"1.3.14.3.2.26":return{name:"SHA-1"};case"2.16.840.1.101.3.4.2.1":return{name:"SHA-256"};case"2.16.840.1.101.3.4.2.2":return{name:"SHA-384"};case"2.16.840.1.101.3.4.2.3":return{name:"SHA-512"};case"1.2.840.113549.1.5.12":return{name:"PBKDF2"};case"1.2.840.10045.3.1.7":return{name:"P-256"};case"1.3.132.0.34":return{name:"P-384"};case"1.3.132.0.35":return{name:"P-521"}}return{}}function P(e){var t="";switch(e.algorithmId){case"1.2.840.10045.4.1":case"1.2.840.113549.1.1.5":t="SHA-1";break;case"1.2.840.10045.4.3.2":case"1.2.840.113549.1.1.11":t="SHA-256";break;case"1.2.840.10045.4.3.3":case"1.2.840.113549.1.1.12":t="SHA-384";break;case"1.2.840.10045.4.3.4":case"1.2.840.113549.1.1.13":t="SHA-512";break;case"1.2.840.113549.1.1.10":try{var r=new Je({schema:e.algorithmParams});if("hashAlgorithm"in r){var a=N(r.hashAlgorithm.algorithmId);if("name"in a==!1)return"";t=a.name}else t="SHA-1"}catch(e){}}return t}function E(e,t,r,a){switch(e.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;default:return Promise.reject("Unknown hash function: "+e)}if(t instanceof ArrayBuffer==!1)return Promise.reject('Please set "Zbuffer" as "ArrayBuffer"');if(0===t.byteLength)return Promise.reject('"Zbuffer" has zero length, error');if(a instanceof ArrayBuffer==!1)return Promise.reject('Please set "SharedInfo" as "ArrayBuffer"');if(r>255)return Promise.reject('Please set "Counter" variable to value less or equal to 255');var n=new ArrayBuffer(4),i=new Uint8Array(n);i[0]=0,i[1]=0,i[2]=0,i[3]=r;var o=new ArrayBuffer(0),u=b();return void 0===u?Promise.reject("Unable to create WebCrypto object"):(o=s(o,t),o=s(o,n),o=s(o,a),u.digest({name:e},o).then(function(e){return{counter:r,result:e}}))}function x(e,t,r,a){var n=0,i=1,o=[];switch(e.toUpperCase()){case"SHA-1":n=160;break;case"SHA-256":n=256;break;case"SHA-384":n=384;break;case"SHA-512":n=512;break;default:return Promise.reject("Unknown hash function: "+e)}if(t instanceof ArrayBuffer==!1)return Promise.reject('Please set "Zbuffer" as "ArrayBuffer"');if(0===t.byteLength)return Promise.reject('"Zbuffer" has zero length, error');if(a instanceof ArrayBuffer==!1)return Promise.reject('Please set "SharedInfo" as "ArrayBuffer"');var u=r/n;Math.floor(u)>0&&u-(i=Math.floor(u))>0&&i++;for(var l=1;l<=i;l++)o.push(E(e,t,l,a));return Promise.all(o).then(function(e){for(var t=new ArrayBuffer(0),a=1,n=!0;n;){n=!1;var i=!0,o=!1,u=void 0;try{for(var l,c=e[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var h=l.value;if(h.counter===a){t=s(t,h.result),n=!0;break}}}catch(e){o=!0,u=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw u}}a++}if(r>>=3,t.byteLength>r){for(var m=new ArrayBuffer(r),f=new Uint8Array(m),v=new Uint8Array(t),d=0;d<r;d++)f[d]=v[d];return m}return t})}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t(e,"names",{});return new ee({optional:r,value:[new z({optional:!0,idBlock:{tagClass:2,tagNumber:1},name:a.country_name||"",value:[new Ke({value:[new we,new Ce]})]}),new z({optional:!0,idBlock:{tagClass:2,tagNumber:2},name:a.administration_domain_name||"",value:[new Ke({value:[new we,new Ce]})]}),new G({optional:!0,idBlock:{tagClass:3,tagNumber:0},name:a.network_address||"",isHexOnly:!0}),new G({optional:!0,idBlock:{tagClass:3,tagNumber:1},name:a.terminal_identifier||"",isHexOnly:!0}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:2},name:a.private_domain_name||"",value:[new Ke({value:[new we,new Ce]})]}),new G({optional:!0,idBlock:{tagClass:3,tagNumber:3},name:a.organization_name||"",isHexOnly:!0}),new G({optional:!0,name:a.numeric_user_identifier||"",idBlock:{tagClass:3,tagNumber:4},isHexOnly:!0}),new z({optional:!0,name:a.personal_name||"",idBlock:{tagClass:3,tagNumber:5},value:[new G({idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new G({optional:!0,idBlock:{tagClass:3,tagNumber:1},isHexOnly:!0}),new G({optional:!0,idBlock:{tagClass:3,tagNumber:2},isHexOnly:!0}),new G({optional:!0,idBlock:{tagClass:3,tagNumber:3},isHexOnly:!0})]}),new z({optional:!0,name:a.organizational_unit_names||"",idBlock:{tagClass:3,tagNumber:6},value:[new Ue({value:new Ce})]})]})}function V(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new ee({optional:e,value:[new Ce,new Ce]})}function _(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new te({optional:e,value:[new G({optional:!0,idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new He]})]})}function j(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"tbsCertificate",value:[new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ue({name:e.tbsCertificateVersion||"tbsCertificate.version"})]}),new ue({name:e.tbsCertificateSerialNumber||"tbsCertificate.serialNumber"}),Te.schema(e.signature||{names:{blockName:"tbsCertificate.signature"}}),et.schema(e.issuer||{names:{blockName:"tbsCertificate.issuer"}}),new ee({name:e.tbsCertificateValidity||"tbsCertificate.validity",value:[ht.schema(e.notBefore||{names:{utcTimeName:"tbsCertificate.notBefore",generalTimeName:"tbsCertificate.notBefore"}}),ht.schema(e.notAfter||{names:{utcTimeName:"tbsCertificate.notAfter",generalTimeName:"tbsCertificate.notAfter"}})]}),et.schema(e.subject||{names:{blockName:"tbsCertificate.subject"}}),Fe.schema(e.subjectPublicKeyInfo||{names:{blockName:"tbsCertificate.subjectPublicKeyInfo"}}),new G({name:e.tbsCertificateIssuerUniqueID||"tbsCertificate.issuerUniqueID",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new G({name:e.tbsCertificateSubjectUniqueID||"tbsCertificate.subjectUniqueID",optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[Ot.schema(e.extensions||{names:{blockName:"tbsCertificate.extensions"}})]})]})}function D(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"tbsCertList",value:[new ue({optional:!0,name:e.tbsCertListVersion||"tbsCertList.version",value:2}),Te.schema(e.signature||{names:{blockName:"tbsCertList.signature"}}),et.schema(e.issuer||{names:{blockName:"tbsCertList.issuer"}}),ht.schema(e.tbsCertListThisUpdate||{names:{utcTimeName:"tbsCertList.thisUpdate",generalTimeName:"tbsCertList.thisUpdate"}}),ht.schema(e.tbsCertListNextUpdate||{names:{utcTimeName:"tbsCertList.nextUpdate",generalTimeName:"tbsCertList.nextUpdate"}},!0),new ee({optional:!0,value:[new Ue({name:e.tbsCertListRevokedCertificates||"tbsCertList.revokedCertificates",value:new ee({value:[new ue,ht.schema(),Ot.schema({},!0)]})})]}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[Ot.schema(e.crlExtensions||{names:{blockName:"tbsCertList.extensions"}})]})]})}function R(e){if(!fr(e)){if(!vr(e))throw new Error("Only generator instance of generator function is a valid input");e=e()}return new Promise(function(t,r){var a=function(t){var a=void 0;try{a=e.throw(t)}catch(e){return r(e)}return n(a)},n=function n(i){var s=void 0;try{s=e.next(i)}catch(e){return r(e)}switch(!0){case s.value instanceof Promise:return s.done?t(s.value):s.value.then(n,a);case vr(s.value):case fr(s.value):return s.done?R(s.value).then(function(e){t(e)},a):R(s.value).then(n,a);case"function"==typeof s.value:s.value=s.value();default:return s.done?t(s.value):n(s.value)}};n()})}function K(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.CertificationRequestInfo||"CertificationRequestInfo",value:[new ue({name:e.CertificationRequestInfoVersion||"CertificationRequestInfo.version"}),et.schema(e.subject||{names:{blockName:"CertificationRequestInfo.subject"}}),Fe.schema({names:{blockName:"CertificationRequestInfo.subjectPublicKeyInfo"}}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ue({optional:!0,name:e.CertificationRequestInfoAttributes||"CertificationRequestInfo.attributes",value:Me.schema(e.attributes||{})})]})]})}var H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",L=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.blockLength=t(r,"blockLength",0),this.error=t(r,"error",""),this.warnings=t(r,"warnings",[]),this.valueBeforeDecode="valueBeforeDecode"in r?r.valueBeforeDecode.slice(0):new ArrayBuffer(0)}return _createClass(e,[{key:"toJSON",value:function(){return{blockName:this.constructor.blockName(),blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:r(this.valueBeforeDecode,0,this.valueBeforeDecode.byteLength)}}}],[{key:"blockName",value:function(){return"baseBlock"}}]),e}(),T=function(e){return function(e){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,n);var r=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return r.isHexOnly=t(e,"isHexOnly",!1),r.valueHex="valueHex"in e?e.valueHex.slice(0):new ArrayBuffer(0),r}return _inherits(n,e),_createClass(n,[{key:"fromBER",value:function(e,t,r){return!1===a(this,e,t,r)?-1:0===new Uint8Array(e,t,r).length?(this.warnings.push("Zero buffer length"),t):(this.valueHex=e.slice(t,t+r),this.blockLength=r,t+r)}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!0!==this.isHexOnly?(this.error='Flag "isHexOnly" is not set, abort',new ArrayBuffer(0)):!0===e?new ArrayBuffer(this.valueHex.byteLength):this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=_get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.isHexOnly=this.isHexOnly,e.valueHex=r(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"hexBlock"}}]),n}(e)},J=function(e){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,r);var a=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return"idBlock"in e?(a.isHexOnly=t(e.idBlock,"isHexOnly",!1),a.valueHex=t(e.idBlock,"valueHex",new ArrayBuffer(0)),a.tagClass=t(e.idBlock,"tagClass",-1),a.tagNumber=t(e.idBlock,"tagNumber",-1),a.isConstructed=t(e.idBlock,"isConstructed",!1)):(a.tagClass=-1,a.tagNumber=-1,a.isConstructed=!1),a}return _inherits(r,e),_createClass(r,[{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=0,r=void 0,a=void 0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",new ArrayBuffer(0)}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){if(r=new ArrayBuffer(1),a=new Uint8Array(r),!e){var n=this.tagNumber;t|=n&=31,a[0]=t}return r}if(!1===this.isHexOnly){var s=i(this.tagNumber,7),o=new Uint8Array(s),u=s.byteLength;if(r=new ArrayBuffer(u+1),a=new Uint8Array(r),a[0]=31|t,!e){for(var l=0;l<u-1;l++)a[l+1]=128|o[l];a[u]=o[u-1]}return r}if(r=new ArrayBuffer(this.valueHex.byteLength+1),a=new Uint8Array(r),a[0]=31|t,!1===e){for(var c=new Uint8Array(this.valueHex),h=0;h<c.length-1;h++)a[h+1]=128|c[h];a[this.valueHex.byteLength]=c[c.length-1]}return r}},{key:"fromBER",value:function(e,t,r){if(!1===a(this,e,t,r))return-1;var i=new Uint8Array(e,t,r);if(0===i.length)return this.error="Zero buffer length",-1;switch(192&i[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=32==(32&i[0]),this.isHexOnly=!1;var s=31&i[0];if(31!==s)this.tagNumber=s,this.blockLength=1;else{var o=1;this.valueHex=new ArrayBuffer(255);for(var u=255,l=new Uint8Array(this.valueHex);128&i[o];){if(l[o-1]=127&i[o],++o>=i.length)return this.error="End of input reached before message was fully decoded",-1;if(o===u){u+=255;for(var c=new ArrayBuffer(u),h=new Uint8Array(c),m=0;m<l.length;m++)h[m]=l[m];this.valueHex=new ArrayBuffer(u),l=new Uint8Array(this.valueHex)}}this.blockLength=o+1,l[o-1]=127&i[o];for(var f=new ArrayBuffer(o),v=new Uint8Array(f),d=0;d<o;d++)v[d]=l[d];this.valueHex=new ArrayBuffer(o),(l=new Uint8Array(this.valueHex)).set(v),this.blockLength<=9?this.tagNumber=n(l,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}},{key:"toJSON",value:function(){var e={};try{e=_get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.tagClass=this.tagClass,e.tagNumber=this.tagNumber,e.isConstructed=this.isConstructed,e}}],[{key:"blockName",value:function(){return"identificationBlock"}}]),r}(T(L)),q=function(e){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,r);var a=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return"lenBlock"in e?(a.isIndefiniteForm=t(e.lenBlock,"isIndefiniteForm",!1),a.longFormUsed=t(e.lenBlock,"longFormUsed",!1),a.length=t(e.lenBlock,"length",0)):(a.isIndefiniteForm=!1,a.longFormUsed=!1,a.length=0),a}return _inherits(r,e),_createClass(r,[{key:"fromBER",value:function(e,t,r){if(!1===a(this,e,t,r))return-1;var i=new Uint8Array(e,t,r);if(0===i.length)return this.error="Zero buffer length",-1;if(255===i[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===i[0],!0===this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&i[0]),!1===this.longFormUsed)return this.length=i[0],this.blockLength=1,t+this.blockLength;var s=127&i[0];if(s>8)return this.error="Too big integer",-1;if(s+1>i.length)return this.error="End of input reached before message was fully decoded",-1;for(var o=new Uint8Array(s),u=0;u<s;u++)o[u]=i[u+1];return 0===o[s-1]&&this.warnings.push("Needlessly long encoded length"),this.length=n(o,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unneccesary usage of long length form"),this.blockLength=s+1,t+this.blockLength}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=void 0,r=void 0;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),!1===e&&((r=new Uint8Array(t))[0]=128),t;if(!0===this.longFormUsed){var a=i(this.length,8);if(a.byteLength>127)return this.error="Too big length",new ArrayBuffer(0);if(t=new ArrayBuffer(a.byteLength+1),!0===e)return t;var n=new Uint8Array(a);(r=new Uint8Array(t))[0]=128|a.byteLength;for(var s=0;s<a.byteLength;s++)r[s+1]=n[s];return t}return t=new ArrayBuffer(1),!1===e&&((r=new Uint8Array(t))[0]=this.length),t}},{key:"toJSON",value:function(){var e={};try{e=_get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.isIndefiniteForm=this.isIndefiniteForm,e.longFormUsed=this.longFormUsed,e.length=this.length,e}}],[{key:"blockName",value:function(){return"lengthBlock"}}]),r}(L),W=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,t,r){throw TypeError('User need to make a specific function in a class which extends "LocalValueBlock"')}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];throw TypeError('User need to make a specific function in a class which extends "LocalValueBlock"')}}],[{key:"blockName",value:function(){return"valueBlock"}}]),t}(L),F=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return"name"in e&&(a.name=e.name),"optional"in e&&(a.optional=e.optional),"primitiveSchema"in e&&(a.primitiveSchema=e.primitiveSchema),a.idBlock=new J(e),a.lenBlock=new q(e),a.valueBlock=new r(e),a}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,t,r){var a=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===a?(this.error=this.valueBlock.error,a):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),a)}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=void 0,r=this.idBlock.toBER(e),a=this.valueBlock.toBER(!0);this.lenBlock.length=a.byteLength,t=s(r,this.lenBlock.toBER(e));var n=void 0;if(n=!1===e?this.valueBlock.toBER(e):new ArrayBuffer(this.lenBlock.length),t=s(t,n),!0===this.lenBlock.isIndefiniteForm){var i=new ArrayBuffer(2);if(!1===e){var o=new Uint8Array(i);o[0]=0,o[1]=0}t=s(t,i)}return t}},{key:"toJSON",value:function(){var e={};try{e=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.idBlock=this.idBlock.toJSON(),e.lenBlock=this.lenBlock.toJSON(),e.valueBlock=this.valueBlock.toJSON(),"name"in this&&(e.name=this.name),"optional"in this&&(e.optional=this.optional),"primitiveSchema"in this&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}}],[{key:"blockName",value:function(){return"BaseBlock"}}]),t}(L),M=function(e){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,n);var r=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return r.valueHex="valueHex"in e?e.valueHex.slice(0):new ArrayBuffer(0),r.isHexOnly=t(e,"isHexOnly",!0),r}return _inherits(n,e),_createClass(n,[{key:"fromBER",value:function(e,t,r){if(!1===a(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.warnings.push("Zero buffer length"),t;this.valueHex=new ArrayBuffer(n.length);for(var i=new Uint8Array(this.valueHex),s=0;s<n.length;s++)i[s]=n[s];return this.blockLength=r,t+r}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=_get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"toJSON",this).call(this)}catch(e){}return e.valueHex=r(this.valueHex,0,this.valueHex.byteLength),e.isHexOnly=this.isHexOnly,e}}],[{key:"blockName",value:function(){return"PrimitiveValueBlock"}}]),n}(W),G=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,M));return r.idBlock.isConstructed=!1,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"PRIMITIVE"}}]),t}(F),Q=function(e){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,r);var a=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return a.value=t(e,"value",[]),a.isIndefiniteForm=t(e,"isIndefiniteForm",!1),a}return _inherits(r,e),_createClass(r,[{key:"fromBER",value:function(e,t,r){var n=t,i=r;if(!1===a(this,e,t,r))return-1;if(0===new Uint8Array(e,t,r).length)return this.warnings.push("Zero buffer length"),t;for(var s=t;function(e,t){return!0===e?1:t}(this.isIndefiniteForm,r)>0;){var o=d(e,s,r);if(-1===o.offset)return this.error=o.result.error,this.warnings.concat(o.result.warnings),-1;if(s=o.offset,this.blockLength+=o.result.blockLength,r-=o.result.blockLength,this.value.push(o.result),!0===this.isIndefiniteForm&&o.result.constructor.blockName()===$.blockName())break}return!0===this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.blockName()===$.blockName()?this.value.pop():this.warnings.push("No EndOfContent block encoded")),this.valueBeforeDecode=e.slice(n,n+i),s}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++)t=s(t,this.value[r].toBER(e));return t}},{key:"toJSON",value:function(){var e={};try{e=_get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}e.isIndefiniteForm=this.isIndefiniteForm,e.value=[];for(var t=0;t<this.value.length;t++)e.value.push(this.value[t].toJSON());return e}}],[{key:"blockName",value:function(){return"ConstructedValueBlock"}}]),r}(W),z=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,Q));return r.idBlock.isConstructed=!0,r}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,t,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;var a=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===a?(this.error=this.valueBlock.error,a):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),a)}}],[{key:"blockName",value:function(){return"CONSTRUCTED"}}]),t}(F),Z=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,t,r){return t}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new ArrayBuffer(0)}}],[{key:"blockName",value:function(){return"EndOfContentValueBlock"}}]),t}(W),$=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,Z));return r.idBlock.tagClass=1,r.idBlock.tagNumber=0,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"EndOfContent"}}]),t}(F),X=function(e){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,n);var r=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return r.value=t(e,"value",!1),r.isHexOnly=t(e,"isHexOnly",!1),"valueHex"in e?r.valueHex=e.valueHex.slice(0):(r.valueHex=new ArrayBuffer(1),!0===r.value&&(new Uint8Array(r.valueHex)[0]=255)),r}return _inherits(n,e),_createClass(n,[{key:"fromBER",value:function(e,t,r){if(!1===a(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);r>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.value=0!==n[0],this.isHexOnly=!0,this.valueHex=new ArrayBuffer(n.length);for(var i=new Uint8Array(this.valueHex),s=0;s<n.length;s++)i[s]=n[s];return this.blockLength=r,t+r}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.valueHex}},{key:"toJSON",value:function(){var e={};try{e=_get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e.isHexOnly=this.isHexOnly,e.valueHex=r(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"BooleanValueBlock"}}]),n}(W),Y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,X));return r.idBlock.tagClass=1,r.idBlock.tagNumber=1,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"Boolean"}}]),t}(F),ee=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=16,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"Sequence"}}]),t}(z),te=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=17,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"Set"}}]),t}(z),re=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,L));return r.idBlock.tagClass=1,r.idBlock.tagNumber=5,r}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,t,r){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=r,t+r}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(2);if(!0===e)return t;var r=new Uint8Array(t);return r[0]=5,r[1]=0,t}}],[{key:"blockName",value:function(){return"Null"}}]),t}(F),ae=function(e){function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,a);var r=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return r.isConstructed=t(e,"isConstructed",!1),r}return _inherits(a,e),_createClass(a,[{key:"fromBER",value:function(e,t,r){var n=0;if(!0===this.isConstructed){if(this.isHexOnly=!1,-1===(n=Q.prototype.fromBER.call(this,e,t,r)))return n;for(var i=0;i<this.value.length;i++){var s=this.value[i].constructor.blockName();if(s===$.blockName()){if(!0===this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(s!==ne.blockName())return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,n=_get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"fromBER",this).call(this,e,t,r),this.blockLength=r;return n}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===this.isConstructed)return Q.prototype.toBER.call(this,e);var t=new ArrayBuffer(this.valueHex.byteLength);return!0===e?t:0===this.valueHex.byteLength?t:t=this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=_get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"toJSON",this).call(this)}catch(e){}return e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=r(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"OctetStringValueBlock"}}]),a}(T(Q)),ne=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,ae));return r.idBlock.tagClass=1,r.idBlock.tagNumber=4,r}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,r,a){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===a?(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),r):_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fromBER",this).call(this,e,r,a)}},{key:"isEqual",value:function(e){return e instanceof t!=!1&&JSON.stringify(this)===JSON.stringify(e)}}],[{key:"blockName",value:function(){return"OctetString"}}]),t}(F),ie=function(e){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,n);var r=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return r.unusedBits=t(e,"unusedBits",0),r.isConstructed=t(e,"isConstructed",!1),r.blockLength=r.valueHex.byteLength+1,r}return _inherits(n,e),_createClass(n,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;var n=-1;if(!0===this.isConstructed){if(-1===(n=Q.prototype.fromBER.call(this,e,t,r)))return n;for(var i=0;i<this.value.length;i++){var s=this.value[i].constructor.blockName();if(s===$.blockName()){if(!0===this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(s!==se.blockName())return this.error="BIT STRING may consists of BIT STRINGs only",-1;if(this.unusedBits>0&&this.value[i].unusedBits>0)return this.error='Usign of "unused bits" inside constructive BIT STRING allowed for least one only',-1;if(this.unusedBits=this.value[i].unusedBits,this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1}return n}if(!1===a(this,e,t,r))return-1;var o=new Uint8Array(e,t,r);if(this.unusedBits=o[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;this.valueHex=new ArrayBuffer(o.length-1);for(var u=new Uint8Array(this.valueHex),l=0;l<r-1;l++)u[l]=o[l+1];return this.blockLength=o.length,t+r}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===this.isConstructed)return Q.prototype.toBER.call(this,e);if(!0===e)return new ArrayBuffer(this.valueHex.byteLength+1);if(0===this.valueHex.byteLength)return new ArrayBuffer(0);var t=new Uint8Array(this.valueHex),r=new ArrayBuffer(this.valueHex.byteLength+1),a=new Uint8Array(r);a[0]=this.unusedBits;for(var n=0;n<this.valueHex.byteLength;n++)a[n+1]=t[n];return r}},{key:"toJSON",value:function(){var e={};try{e=_get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"toJSON",this).call(this)}catch(e){}return e.unusedBits=this.unusedBits,e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=r(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"BitStringValueBlock"}}]),n}(T(Q)),se=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,ie));return r.idBlock.tagClass=1,r.idBlock.tagNumber=3,r}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,r,a){return 0===a?r:(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fromBER",this).call(this,e,r,a))}},{key:"isEqual",value:function(e){return e instanceof t!=!1&&JSON.stringify(this)===JSON.stringify(e)}}],[{key:"blockName",value:function(){return"BitString"}}]),t}(F),oe=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return"value"in e&&(r.valueDec=e.value),r}return _inherits(t,e),_createClass(t,[{key:"fromDER",value:function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=this.fromBER(e,t,r);if(-1===n)return n;var i=new Uint8Array(this._valueHex);if(0===i[0]&&0!=(128&i[1])){var s=new ArrayBuffer(this._valueHex.byteLength-1);new Uint8Array(s).set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=s.slice(0)}else if(0!==a&&this._valueHex.byteLength<a){a-this._valueHex.byteLength>1&&(a=this._valueHex.byteLength+1);var o=new ArrayBuffer(a);new Uint8Array(o).set(i,a-this._valueHex.byteLength),this._valueHex=o.slice(0)}return n}},{key:"toDER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new Uint8Array(this._valueHex);switch(!0){case 0!=(128&t[0]):var r=new ArrayBuffer(this._valueHex.byteLength+1),a=new Uint8Array(r);a[0]=0,a.set(t,1),this._valueHex=r.slice(0);break;case 0===t[0]&&0==(128&t[1]):var n=new ArrayBuffer(this._valueHex.byteLength-1);new Uint8Array(n).set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=n.slice(0)}return this.toBER(e)}},{key:"fromBER",value:function(e,r,a){var n=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fromBER",this).call(this,e,r,a);return-1===n?n:(this.blockLength=a,r+a)}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.valueDec=this.valueDec,e}},{key:"valueHex",set:function(e){this._valueHex=e.slice(0),e.byteLength>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,e.byteLength>0&&(this._valueDec=o.call(this)))},get:function(){return this._valueHex}},{key:"valueDec",set:function(e){this._valueDec=e,this.isHexOnly=!1,this._valueHex=u(e)},get:function(){return this._valueDec}}],[{key:"blockName",value:function(){return"IntegerValueBlock"}}]),t}(T(W)),ue=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,oe));return r.idBlock.tagClass=1,r.idBlock.tagNumber=2,r}return _inherits(t,e),_createClass(t,[{key:"isEqual",value:function(e){return e instanceof t?this.valueBlock.isHexOnly&&e.valueBlock.isHexOnly?l(this.valueBlock.valueHex,e.valueBlock.valueHex):this.valueBlock.isHexOnly===e.valueBlock.isHexOnly&&this.valueBlock.valueDec===e.valueBlock.valueDec:e instanceof ArrayBuffer&&l(this.valueBlock.valueHex,e)}},{key:"convertToDER",value:function(){var e=new t({valueHex:this.valueBlock.valueHex});return e.valueBlock.toDER(),e}},{key:"convertFromDER",value:function(){var e=this.valueBlock.valueHex.byteLength%2?this.valueBlock.valueHex.byteLength+1:this.valueBlock.valueHex.byteLength,r=new t({valueHex:this.valueBlock.valueHex});return r.valueBlock.fromDER(r.valueBlock.valueHex,0,r.valueBlock.valueHex.byteLength,e),r}}],[{key:"blockName",value:function(){return"Integer"}}]),t}(F),le=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=10,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"Enumerated"}}]),t}(ue),ce=function(e){function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,s);var r=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return r.valueDec=t(e,"valueDec",-1),r.isFirstSid=t(e,"isFirstSid",!1),r}return _inherits(s,e),_createClass(s,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;if(!1===a(this,e,t,r))return-1;var i=new Uint8Array(e,t,r);this.valueHex=new ArrayBuffer(r);for(var s=new Uint8Array(this.valueHex),o=0;o<r&&(s[o]=127&i[o],this.blockLength++,0!=(128&i[o]));o++);for(var u=new ArrayBuffer(this.blockLength),l=new Uint8Array(u),c=0;c<this.blockLength;c++)l[c]=s[c];return this.valueHex=u.slice(0),s=new Uint8Array(this.valueHex),0!=(128&i[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===s[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=n(s,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=void 0,r=void 0;if(this.isHexOnly){if(!0===e)return new ArrayBuffer(this.valueHex.byteLength);var a=new Uint8Array(this.valueHex);t=new ArrayBuffer(this.blockLength),r=new Uint8Array(t);for(var n=0;n<this.blockLength-1;n++)r[n]=128|a[n];return r[this.blockLength-1]=a[this.blockLength-1],t}var s=i(this.valueDec,7);if(0===s.byteLength)return this.error="Error during encoding SID value",new ArrayBuffer(0);if(t=new ArrayBuffer(s.byteLength),!1===e){var o=new Uint8Array(s);r=new Uint8Array(t);for(var u=0;u<s.byteLength-1;u++)r[u]=128|o[u];r[s.byteLength-1]=o[s.byteLength-1]}return t}},{key:"toString",value:function(){var e="";if(!0===this.isHexOnly)e=r(this.valueHex,0,this.valueHex.byteLength);else if(this.isFirstSid){var t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}},{key:"toJSON",value:function(){var e={};try{e=_get(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"toJSON",this).call(this)}catch(e){}return e.valueDec=this.valueDec,e.isFirstSid=this.isFirstSid,e}}],[{key:"blockName",value:function(){return"sidBlock"}}]),s}(T(L)),he=function(e){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,r);var a=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return a.fromString(t(e,"value","")),a}return _inherits(r,e),_createClass(r,[{key:"fromBER",value:function(e,t,r){for(var a=t;r>0;){var n=new ce;if(-1===(a=n.fromBER(e,a,r)))return this.blockLength=0,this.error=n.error,a;0===this.value.length&&(n.isFirstSid=!0),this.blockLength+=n.blockLength,r-=n.blockLength,this.value.push(n)}return a}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var a=this.value[r].toBER(e);if(0===a.byteLength)return this.error=this.value[r].error,new ArrayBuffer(0);t=s(t,a)}return t}},{key:"fromString",value:function(e){this.value=[];var t=0,r=0,a="",n=!1;do{if(r=e.indexOf(".",t),a=-1===r?e.substr(t):e.substr(t,r-t),t=r+1,n){var i=this.value[0],s=0;switch(i.valueDec){case 0:break;case 1:s=40;break;case 2:s=80;break;default:return this.value=[],!1}var o=parseInt(a,10);if(isNaN(o))return!0;i.valueDec=o+s,n=!1}else{var u=new ce;if(u.valueDec=parseInt(a,10),isNaN(u.valueDec))return!0;0===this.value.length&&(u.isFirstSid=!0,n=!0),this.value.push(u)}}while(-1!==r);return!0}},{key:"toString",value:function(){for(var e="",t=!1,r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;var a=this.value[r].toString();0!==r&&(e+="."),t?(a="{"+a+"}",this.value[r].isFirstSid?e="2.{"+a+" - 80}":e+=a):e+=a}return e}},{key:"toJSON",value:function(){var e={};try{e=_get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"toJSON",this).call(this)}catch(e){}e.value=this.toString(),e.sidArray=[];for(var t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}],[{key:"blockName",value:function(){return"ObjectIdentifierValueBlock"}}]),r}(W),me=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,he));return r.idBlock.tagClass=1,r.idBlock.tagNumber=6,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"ObjectIdentifier"}}]),t}(F),fe=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isHexOnly=!0,r.value="",r}return _inherits(t,e),_createClass(t,[{key:"toJSON",value:function(){var e={};try{e=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"Utf8StringValueBlock"}}]),t}(T(L)),ve=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,fe));return"value"in e&&r.fromString(e.value),r.idBlock.tagClass=1,r.idBlock.tagNumber=12,r}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,t,r){var a=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===a?(this.error=this.valueBlock.error,a):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),a)}},{key:"fromBuffer",value:function(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e));try{this.valueBlock.value=decodeURIComponent(escape(this.valueBlock.value))}catch(e){this.warnings.push('Error during "decodeURIComponent": '+e+", using raw string")}}},{key:"fromString",value:function(e){var t=unescape(encodeURIComponent(e)),r=t.length;this.valueBlock.valueHex=new ArrayBuffer(r);for(var a=new Uint8Array(this.valueBlock.valueHex),n=0;n<r;n++)a[n]=t.charCodeAt(n);this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"Utf8String"}}]),t}(F),de=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isHexOnly=!0,r.value="",r}return _inherits(t,e),_createClass(t,[{key:"toJSON",value:function(){var e={};try{e=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"BmpStringValueBlock"}}]),t}(T(L)),ge=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,de));return"value"in e&&r.fromString(e.value),r.idBlock.tagClass=1,r.idBlock.tagNumber=30,r}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,t,r){var a=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===a?(this.error=this.valueBlock.error,a):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),a)}},{key:"fromBuffer",value:function(e){for(var t=e.slice(0),r=new Uint8Array(t),a=0;a<r.length;a+=2){var n=r[a];r[a]=r[a+1],r[a+1]=n}this.valueBlock.value=String.fromCharCode.apply(null,new Uint16Array(t))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(2*t);for(var r=new Uint8Array(this.valueBlock.valueHex),a=0;a<t;a++){var n=i(e.charCodeAt(a),8),s=new Uint8Array(n);if(!(s.length>2))for(var o=2-s.length,u=s.length-1;u>=0;u--)r[2*a+u+o]=s[u]}this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"BmpString"}}]),t}(F),ye=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.isHexOnly=!0,r.value="",r}return _inherits(t,e),_createClass(t,[{key:"toJSON",value:function(){var e={};try{e=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"UniversalStringValueBlock"}}]),t}(T(L)),pe=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,ye));return"value"in e&&r.fromString(e.value),r.idBlock.tagClass=1,r.idBlock.tagNumber=28,r}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,t,r){var a=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===a?(this.error=this.valueBlock.error,a):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),a)}},{key:"fromBuffer",value:function(e){for(var t=e.slice(0),r=new Uint8Array(t),a=0;a<r.length;a+=4)r[a]=r[a+3],r[a+1]=r[a+2],r[a+2]=0,r[a+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(4*t);for(var r=new Uint8Array(this.valueBlock.valueHex),a=0;a<t;a++){var n=i(e.charCodeAt(a),8),s=new Uint8Array(n);if(!(s.length>4))for(var o=4-s.length,u=s.length-1;u>=0;u--)r[4*a+u+o]=s[u]}this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"UniversalString"}}]),t}(F),ke=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.value="",r.isHexOnly=!0,r}return _inherits(t,e),_createClass(t,[{key:"toJSON",value:function(){var e={};try{e=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"SimpleStringValueBlock"}}]),t}(T(L)),be=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,ke));return"value"in e&&r.fromString(e.value),r}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,t,r){var a=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===a?(this.error=this.valueBlock.error,a):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),a)}},{key:"fromBuffer",value:function(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(t);for(var r=new Uint8Array(this.valueBlock.valueHex),a=0;a<t;a++)r[a]=e.charCodeAt(a);this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"SIMPLESTRING"}}]),t}(F),we=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=18,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"NumericString"}}]),t}(be),Ce=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=19,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"PrintableString"}}]),t}(be),Se=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=20,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"TeletexString"}}]),t}(be),Ae=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=21,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"VideotexString"}}]),t}(be),Ie=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=22,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"IA5String"}}]),t}(be),Be=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=25,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"GraphicString"}}]),t}(be),Ne=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=26,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"VisibleString"}}]),t}(be),Pe=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=27,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"GeneralString"}}]),t}(be),Ee=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=29,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"CharacterString"}}]),t}(be),xe=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(r.year=0,r.month=0,r.day=0,r.hour=0,r.minute=0,r.second=0,"value"in e){r.fromString(e.value),r.valueBlock.valueHex=new ArrayBuffer(e.value.length);for(var a=new Uint8Array(r.valueBlock.valueHex),n=0;n<e.value.length;n++)a[n]=e.value.charCodeAt(n)}return"valueDate"in e&&(r.fromDate(e.valueDate),r.valueBlock.valueHex=r.toBuffer()),r.idBlock.tagClass=1,r.idBlock.tagNumber=23,r}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,t,r){var a=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===a?(this.error=this.valueBlock.error,a):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),a)}},{key:"fromBuffer",value:function(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}},{key:"toBuffer",value:function(){for(var e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),a=0;a<e.length;a++)r[a]=e.charCodeAt(a);return t}},{key:"fromDate",value:function(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}},{key:"toDate",value:function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}},{key:"fromString",value:function(e){var t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi.exec(e);if(null!==t){var r=parseInt(t[1],10);this.year=r>=50?1900+r:2e3+r,this.month=parseInt(t[2],10),this.day=parseInt(t[3],10),this.hour=parseInt(t[4],10),this.minute=parseInt(t[5],10),this.second=parseInt(t[6],10)}else this.error="Wrong input string for convertion"}},{key:"toString",value:function(){var e=new Array(7);return e[0]=c(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=c(this.month,2),e[2]=c(this.day,2),e[3]=c(this.hour,2),e[4]=c(this.minute,2),e[5]=c(this.second,2),e[6]="Z",e.join("")}},{key:"toJSON",value:function(){var e={};try{e=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e}}],[{key:"blockName",value:function(){return"UTCTime"}}]),t}(Ne),Oe=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(r.year=0,r.month=0,r.day=0,r.hour=0,r.minute=0,r.second=0,r.millisecond=0,"value"in e){r.fromString(e.value),r.valueBlock.valueHex=new ArrayBuffer(e.value.length);for(var a=new Uint8Array(r.valueBlock.valueHex),n=0;n<e.value.length;n++)a[n]=e.value.charCodeAt(n)}return"valueDate"in e&&(r.fromDate(e.valueDate),r.valueBlock.valueHex=r.toBuffer()),r.idBlock.tagClass=1,r.idBlock.tagNumber=24,r}return _inherits(t,e),_createClass(t,[{key:"fromBER",value:function(e,t,r){var a=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===a?(this.error=this.valueBlock.error,a):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),a)}},{key:"fromBuffer",value:function(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}},{key:"toBuffer",value:function(){for(var e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),a=0;a<e.length;a++)r[a]=e.charCodeAt(a);return t}},{key:"fromDate",value:function(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}},{key:"toDate",value:function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}},{key:"fromString",value:function(e){var t=!1,r="",a="",n=0,i=void 0,s=0,o=0;if("Z"===e[e.length-1])r=e.substr(0,e.length-1),t=!0;else{var u=new Number(e[e.length-1]);if(isNaN(u.valueOf()))throw new Error("Wrong input string for convertion");r=e}if(t){if(-1!==r.indexOf("+"))throw new Error("Wrong input string for convertion");if(-1!==r.indexOf("-"))throw new Error("Wrong input string for convertion")}else{var l=1,c=r.indexOf("+"),h="";if(-1===c&&(c=r.indexOf("-"),l=-1),-1!==c){if(h=r.substr(c+1),r=r.substr(0,c),2!==h.length&&4!==h.length)throw new Error("Wrong input string for convertion");var m=new Number(h.substr(0,2));if(isNaN(m.valueOf()))throw new Error("Wrong input string for convertion");if(s=l*m,4===h.length){if(m=new Number(h.substr(2,2)),isNaN(m.valueOf()))throw new Error("Wrong input string for convertion");o=l*m}}}var f=r.indexOf(".");if(-1===f&&(f=r.indexOf(",")),-1!==f){var v=new Number("0"+r.substr(f));if(isNaN(v.valueOf()))throw new Error("Wrong input string for convertion");n=v.valueOf(),a=r.substr(0,f)}else a=r;switch(!0){case 8===a.length:if(i=/(\d{4})(\d{2})(\d{2})/gi,-1!==f)throw new Error("Wrong input string for convertion");break;case 10===a.length:if(i=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,-1!==f){var d=60*n;this.minute=Math.floor(d),d=60*(d-this.minute),this.second=Math.floor(d),d=1e3*(d-this.second),this.millisecond=Math.floor(d)}break;case 12===a.length:if(i=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==f){var g=60*n;this.second=Math.floor(g),g=1e3*(g-this.second),this.millisecond=Math.floor(g)}break;case 14===a.length:if(i=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==f){var y=1e3*n;this.millisecond=Math.floor(y)}break;default:throw new Error("Wrong input string for convertion")}var p=i.exec(a);if(null===p)throw new Error("Wrong input string for convertion");for(var k=1;k<p.length;k++)switch(k){case 1:this.year=parseInt(p[k],10);break;case 2:this.month=parseInt(p[k],10);break;case 3:this.day=parseInt(p[k],10);break;case 4:this.hour=parseInt(p[k],10)+s;break;case 5:this.minute=parseInt(p[k],10)+o;break;case 6:this.second=parseInt(p[k],10);break;default:throw new Error("Wrong input string for convertion")}if(!1===t){var b=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=b.getUTCFullYear(),this.month=b.getUTCMonth(),this.day=b.getUTCDay(),this.hour=b.getUTCHours(),this.minute=b.getUTCMinutes(),this.second=b.getUTCSeconds(),this.millisecond=b.getUTCMilliseconds()}}},{key:"toString",value:function(){var e=[];return e.push(c(this.year,4)),e.push(c(this.month,2)),e.push(c(this.day,2)),e.push(c(this.hour,2)),e.push(c(this.minute,2)),e.push(c(this.second,2)),0!==this.millisecond&&(e.push("."),e.push(c(this.millisecond,3))),e.push("Z"),e.join("")}},{key:"toJSON",value:function(){var e={};try{e=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toJSON",this).call(this)}catch(e){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e.millisecond=this.millisecond,e}}],[{key:"blockName",value:function(){return"GeneralizedTime"}}]),t}(Ne),Ve=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=31,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"DATE"}}]),t}(ve),_e=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=32,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"TimeOfDay"}}]),t}(ve),je=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=33,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"DateTime"}}]),t}(ve),De=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=34,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"Duration"}}]),t}(ve),Re=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.idBlock.tagClass=1,r.idBlock.tagNumber=14,r}return _inherits(t,e),_createClass(t,null,[{key:"blockName",value:function(){return"TIME"}}]),t}(ve),Ke=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.value=t(r,"value",[]),this.optional=t(r,"optional",!1)},He=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.name=t(r,"name",""),this.optional=t(r,"optional",!1)},Ue=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.name=t(r,"name",""),this.optional=t(r,"optional",!1),this.value=t(r,"value",new He),this.local=t(r,"local",!1)},Le=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.data=t(r,"data",new ArrayBuffer(0))}return _createClass(e,[{key:"fromBER",value:function(e,t,r){this.data=e.slice(t,r)}},{key:"toBER",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.data}}]),e}(),Te=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.algorithmId=t(r,"algorithmId",e.defaultValues("algorithmId")),"algorithmParams"in r&&(this.algorithmParams=t(r,"algorithmParams",e.defaultValues("algorithmParams"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{algorithmIdentifier:"algorithm",algorithmParams:"params"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for AlgorithmIdentifier");this.algorithmId=r.result.algorithm.valueBlock.toString(),"params"in r.result&&(this.algorithmParams=r.result.params)}},{key:"toSchema",value:function(){var e=[];return e.push(new me({value:this.algorithmId})),"algorithmParams"in this&&this.algorithmParams instanceof He==!1&&e.push(this.algorithmParams),new ee({value:e})}},{key:"toJSON",value:function(){var e={algorithmId:this.algorithmId};return"algorithmParams"in this&&this.algorithmParams instanceof He==!1&&(e.algorithmParams=this.algorithmParams.toJSON()),e}},{key:"isEqual",value:function(t){return t instanceof e!=!1&&(this.algorithmId===t.algorithmId&&("algorithmParams"in this?"algorithmParams"in t&&JSON.stringify(this.algorithmParams)===JSON.stringify(t.algorithmParams):!("algorithmParams"in t)))}}],[{key:"defaultValues",value:function(e){switch(e){case"algorithmId":return"";case"algorithmParams":return new He;default:throw new Error("Invalid member name for AlgorithmIdentifier class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"algorithmId":return""===t;case"algorithmParams":return t instanceof He;default:throw new Error("Invalid member name for AlgorithmIdentifier class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",optional:e.optional||!1,value:[new me({name:e.algorithmIdentifier||""}),new He({name:e.algorithmParams||"",optional:!0})]})}}]),e}(),Je=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.hashAlgorithm=t(r,"hashAlgorithm",e.defaultValues("hashAlgorithm")),this.maskGenAlgorithm=t(r,"maskGenAlgorithm",e.defaultValues("maskGenAlgorithm")),this.saltLength=t(r,"saltLength",e.defaultValues("saltLength")),this.trailerField=t(r,"trailerField",e.defaultValues("trailerField")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{hashAlgorithm:{names:{blockName:"hashAlgorithm"}},maskGenAlgorithm:{names:{blockName:"maskGenAlgorithm"}},saltLength:"saltLength",trailerField:"trailerField"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RSASSA_PSS_params");"hashAlgorithm"in r.result&&(this.hashAlgorithm=new Te({schema:r.result.hashAlgorithm})),"maskGenAlgorithm"in r.result&&(this.maskGenAlgorithm=new Te({schema:r.result.maskGenAlgorithm})),"saltLength"in r.result&&(this.saltLength=r.result.saltLength.valueBlock.valueDec),"trailerField"in r.result&&(this.trailerField=r.result.trailerField.valueBlock.valueDec)}},{key:"toSchema",value:function(){var t=[];return this.hashAlgorithm.isEqual(e.defaultValues("hashAlgorithm"))||t.push(new z({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(e.defaultValues("maskGenAlgorithm"))||t.push(new z({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.saltLength!==e.defaultValues("saltLength")&&t.push(new z({idBlock:{tagClass:3,tagNumber:2},value:[new ue({value:this.saltLength})]})),this.trailerField!==e.defaultValues("trailerField")&&t.push(new z({idBlock:{tagClass:3,tagNumber:3},value:[new ue({value:this.trailerField})]})),new ee({value:t})}},{key:"toJSON",value:function(){var t={};return this.hashAlgorithm.isEqual(e.defaultValues("hashAlgorithm"))||(t.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(e.defaultValues("maskGenAlgorithm"))||(t.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.saltLength!==e.defaultValues("saltLength")&&(t.saltLength=this.saltLength),this.trailerField!==e.defaultValues("trailerField")&&(t.trailerField=this.trailerField),t}}],[{key:"defaultValues",value:function(e){switch(e){case"hashAlgorithm":return new Te({algorithmId:"1.3.14.3.2.26",algorithmParams:new re});case"maskGenAlgorithm":return new Te({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new Te({algorithmId:"1.3.14.3.2.26",algorithmParams:new re}).toSchema()});case"saltLength":return 20;case"trailerField":return 1;default:throw new Error("Invalid member name for RSASSAPSSParams class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new z({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[Te.schema(e.hashAlgorithm||{})]}),new z({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[Te.schema(e.maskGenAlgorithm||{})]}),new z({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[new ue({name:e.saltLength||""})]}),new z({idBlock:{tagClass:3,tagNumber:3},optional:!0,value:[new ue({name:e.trailerField||""})]})]})}}]),e}(),qe=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.x=t(r,"x",e.defaultValues("x")),this.y=t(r,"y",e.defaultValues("y")),this.namedCurve=t(r,"namedCurve",e.defaultValues("namedCurve")),"schema"in r&&this.fromSchema(r.schema),"json"in r&&this.fromJSON(r.json)}return _createClass(e,[{key:"fromSchema",value:function(e){if(e instanceof ArrayBuffer==!1)throw new Error("Object's schema was not verified against input data for ECPublicKey");if(4!==new Uint8Array(e)[0])throw new Error("Object's schema was not verified against input data for ECPublicKey");var t=void 0;switch(this.namedCurve){case"1.2.840.10045.3.1.7":t=32;break;case"1.3.132.0.34":t=48;break;case"1.3.132.0.35":t=66;break;default:throw new Error("Incorrect curve OID: "+this.namedCurve)}if(e.byteLength!==2*t+1)throw new Error("Object's schema was not verified against input data for ECPublicKey");this.x=e.slice(1,t+1),this.y=e.slice(1+t,2*t+1)}},{key:"toSchema",value:function(){return new Le({data:s(new Uint8Array([4]).buffer,this.x,this.y)})}},{key:"toJSON",value:function(){var e="";switch(this.namedCurve){case"1.2.840.10045.3.1.7":e="P-256";break;case"1.3.132.0.34":e="P-384";break;case"1.3.132.0.35":e="P-521"}return{crv:e,x:h(f(this.x),!0,!0,!0),y:h(f(this.y),!0,!0,!0)}}},{key:"fromJSON",value:function(e){var t=0;if(!("crv"in e))throw new Error('Absent mandatory parameter "crv"');switch(e.crv.toUpperCase()){case"P-256":this.namedCurve="1.2.840.10045.3.1.7",t=32;break;case"P-384":this.namedCurve="1.3.132.0.34",t=48;break;case"P-521":this.namedCurve="1.3.132.0.35",t=66}if(!("x"in e))throw new Error('Absent mandatory parameter "x"');if(this.x=v(m(e.x,!0)).slice(0,t),!("y"in e))throw new Error('Absent mandatory parameter "y"');this.y=v(m(e.y,!0)).slice(0,t)}}],[{key:"defaultValues",value:function(e){switch(e){case"x":case"y":return new ArrayBuffer(0);case"namedCurve":return"";default:throw new Error("Invalid member name for ECCPublicKey class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"x":case"y":return l(r,e.defaultValues(t));case"namedCurve":return""===r;default:throw new Error("Invalid member name for ECCPublicKey class: "+t)}}},{key:"schema",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Le}}]),e}(),We=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.modulus=t(r,"modulus",e.defaultValues("modulus")),this.publicExponent=t(r,"publicExponent",e.defaultValues("publicExponent")),"schema"in r&&this.fromSchema(r.schema),"json"in r&&this.fromJSON(r.json)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{modulus:"modulus",publicExponent:"publicExponent"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RSAPublicKey");this.modulus=r.result.modulus.convertFromDER(256),this.publicExponent=r.result.publicExponent}},{key:"toSchema",value:function(){return new ee({value:[this.modulus.convertToDER(),this.publicExponent]})}},{key:"toJSON",value:function(){return{n:h(f(this.modulus.valueBlock.valueHex),!0,!0,!0),e:h(f(this.publicExponent.valueBlock.valueHex),!0,!0,!0)}}},{key:"fromJSON",value:function(e){if(!("n"in e))throw new Error('Absent mandatory parameter "n"');if(this.modulus=new ue({valueHex:v(m(e.n,!0)).slice(0,256)}),!("e"in e))throw new Error('Absent mandatory parameter "e"');this.publicExponent=new ue({valueHex:v(m(e.e,!0)).slice(0,3)})}}],[{key:"defaultValues",value:function(e){switch(e){case"modulus":case"publicExponent":return new ue;default:throw new Error("Invalid member name for RSAPublicKey class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new ue({name:e.modulus||""}),new ue({name:e.publicExponent||""})]})}}]),e}(),Fe=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.algorithm=t(r,"algorithm",e.defaultValues("algorithm")),this.subjectPublicKey=t(r,"subjectPublicKey",e.defaultValues("subjectPublicKey")),"parsedKey"in r&&(this.parsedKey=t(r,"parsedKey",e.defaultValues("parsedKey"))),"schema"in r&&this.fromSchema(r.schema),"json"in r&&this.fromJSON(r.json)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{algorithm:{names:{blockName:"algorithm"}},subjectPublicKey:"subjectPublicKey"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PUBLIC_KEY_INFO");switch(this.algorithm=new Te({schema:r.result.algorithm}),this.subjectPublicKey=r.result.subjectPublicKey,this.algorithm.algorithmId){case"1.2.840.10045.2.1":"algorithmParams"in this.algorithm&&this.algorithm.algorithmParams instanceof me&&(this.parsedKey=new qe({namedCurve:this.algorithm.algorithmParams.valueBlock.toString(),schema:this.subjectPublicKey.valueBlock.valueHex}));break;case"1.2.840.113549.1.1.1":var a=g(this.subjectPublicKey.valueBlock.valueHex);-1!==a.offset&&(this.parsedKey=new We({schema:a.result}))}}},{key:"toSchema",value:function(){return new ee({value:[this.algorithm.toSchema(),this.subjectPublicKey]})}},{key:"toJSON",value:function(){if("parsedKey"in this==!1)return{algorithm:this.algorithm.toJSON(),subjectPublicKey:this.subjectPublicKey.toJSON()};var e={};switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA"}var t=this.parsedKey.toJSON(),r=!0,a=!1,n=void 0;try{for(var i,s=Object.keys(t)[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var o=i.value;e[o]=t[o]}}catch(e){a=!0,n=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw n}}return e}},{key:"fromJSON",value:function(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new qe({json:e}),this.algorithm=new Te({algorithmId:"1.2.840.10045.2.1",algorithmParams:new me({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new We({json:e}),this.algorithm=new Te({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new re});break;default:throw new Error('Invalid value for "kty" parameter: '+e.kty)}this.subjectPublicKey=new se({valueHex:this.parsedKey.toSchema().toBER(!1)})}}},{key:"importKey",value:function(e){var t=Promise.resolve(),r=this;if(void 0===e)return Promise.reject("Need to provide publicKey input parameter");var a=b();return void 0===a?Promise.reject("Unable to create WebCrypto object"):(t=t.then(function(){return a.exportKey("spki",e)}),t=t.then(function(e){var t=g(e);try{r.fromSchema(t.result)}catch(e){return Promise.reject("Error during initializing object from schema")}},function(e){return Promise.reject("Error during exporting public key: "+e)}))}}],[{key:"defaultValues",value:function(e){switch(e){case"algorithm":return new Te;case"subjectPublicKey":return new se;default:throw new Error("Invalid member name for PublicKeyInfo class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[Te.schema(e.algorithm||{}),new se({name:e.subjectPublicKey||""})]})}}]),e}(),Me=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.type=t(r,"type",e.defaultValues("type")),this.values=t(r,"values",e.defaultValues("values")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{type:"type",values:"values"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for ATTRIBUTE");this.type=r.result.type.valueBlock.toString(),this.values=r.result.values}},{key:"toSchema",value:function(){return new ee({value:[new me({value:this.type}),new te({value:this.values})]})}},{key:"toJSON",value:function(){return{type:this.type,values:Array.from(this.values,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return"";case"values":return[];default:throw new Error("Invalid member name for Attribute class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"type":return""===t;case"values":return 0===t.length;default:throw new Error("Invalid member name for Attribute class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new me({name:e.type||""}),new te({name:e.setName||"",value:[new Ue({name:e.values||"",value:new He})]})]})}}]),e}(),Ge=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.version=t(r,"version",e.defaultValues("version")),this.privateKey=t(r,"privateKey",e.defaultValues("privateKey")),"namedCurve"in r&&(this.namedCurve=t(r,"namedCurve",e.defaultValues("namedCurve"))),"publicKey"in r&&(this.publicKey=t(r,"publicKey",e.defaultValues("publicKey"))),"schema"in r&&this.fromSchema(r.schema),"json"in r&&this.fromJSON(r.json)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{version:"version",privateKey:"privateKey",namedCurve:"namedCurve",publicKey:"publicKey"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for ECPrivateKey");if(this.version=r.result.version.valueBlock.valueDec,this.privateKey=r.result.privateKey,"namedCurve"in r.result&&(this.namedCurve=r.result.namedCurve.valueBlock.toString()),"publicKey"in r.result){var a={schema:r.result.publicKey.valueBlock.valueHex};"namedCurve"in this&&(a.namedCurve=this.namedCurve),this.publicKey=new qe(a)}}},{key:"toSchema",value:function(){var e=[new ue({value:this.version}),this.privateKey];return"namedCurve"in this&&e.push(new z({idBlock:{tagClass:3,tagNumber:0},value:[new me({value:this.namedCurve})]})),"publicKey"in this&&e.push(new z({idBlock:{tagClass:3,tagNumber:1},value:[new se({valueHex:this.publicKey.toSchema().toBER(!1)})]})),new ee({value:e})}},{key:"toJSON",value:function(){if("namedCurve"in this==!1||e.compareWithDefault("namedCurve",this.namedCurve))throw new Error('Not enough information for making JSON: absent "namedCurve" value');var t="";switch(this.namedCurve){case"1.2.840.10045.3.1.7":t="P-256";break;case"1.3.132.0.34":t="P-384";break;case"1.3.132.0.35":t="P-521"}var r={crv:t,d:h(f(this.privateKey.valueBlock.valueHex),!0,!0,!0)};if("publicKey"in this){var a=this.publicKey.toJSON();r.x=a.x,r.y=a.y}return r}},{key:"fromJSON",value:function(e){var t=0;if(!("crv"in e))throw new Error('Absent mandatory parameter "crv"');switch(e.crv.toUpperCase()){case"P-256":this.namedCurve="1.2.840.10045.3.1.7",t=32;break;case"P-384":this.namedCurve="1.3.132.0.34",t=48;break;case"P-521":this.namedCurve="1.3.132.0.35",t=66}if(!("d"in e))throw new Error('Absent mandatory parameter "d"');this.privateKey=new ne({valueHex:v(m(e.d,!0)).slice(0,t)}),"x"in e&&"y"in e&&(this.publicKey=new qe({json:e}))}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 1;case"privateKey":return new ne;case"namedCurve":return"";case"publicKey":return new qe;default:throw new Error("Invalid member name for ECCPrivateKey class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues(t);case"privateKey":return r.isEqual(e.defaultValues(t));case"namedCurve":return""===r;case"publicKey":return qe.compareWithDefault("namedCurve",r.namedCurve)&&qe.compareWithDefault("x",r.x)&&qe.compareWithDefault("y",r.y);default:throw new Error("Invalid member name for ECCPrivateKey class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new ue({name:e.version||""}),new ne({name:e.privateKey||""}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new me({name:e.namedCurve||""})]}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new se({name:e.publicKey||""})]})]})}}]),e}(),Qe=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.prime=t(r,"prime",e.defaultValues("prime")),this.exponent=t(r,"exponent",e.defaultValues("exponent")),this.coefficient=t(r,"coefficient",e.defaultValues("coefficient")),"schema"in r&&this.fromSchema(r.schema),"json"in r&&this.fromJSON(r.json)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{prime:"prime",exponent:"exponent",coefficient:"coefficient"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for OtherPrimeInfo");this.prime=r.result.prime.convertFromDER(),this.exponent=r.result.exponent.convertFromDER(),this.coefficient=r.result.coefficient.convertFromDER()}},{key:"toSchema",value:function(){return new ee({value:[this.prime.convertToDER(),this.exponent.convertToDER(),this.coefficient.convertToDER()]})}},{key:"toJSON",value:function(){return{r:h(f(this.prime.valueBlock.valueHex),!0,!0),d:h(f(this.exponent.valueBlock.valueHex),!0,!0),t:h(f(this.coefficient.valueBlock.valueHex),!0,!0)}}},{key:"fromJSON",value:function(e){if(!("r"in e))throw new Error('Absent mandatory parameter "r"');if(this.prime=new ue({valueHex:v(m(e.r,!0))}),!("d"in e))throw new Error('Absent mandatory parameter "d"');if(this.exponent=new ue({valueHex:v(m(e.d,!0))}),!("t"in e))throw new Error('Absent mandatory parameter "t"');this.coefficient=new ue({valueHex:v(m(e.t,!0))})}}],[{key:"defaultValues",value:function(e){switch(e){case"prime":case"exponent":case"coefficient":return new ue;default:throw new Error("Invalid member name for OtherPrimeInfo class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new ue({name:e.prime||""}),new ue({name:e.exponent||""}),new ue({name:e.coefficient||""})]})}}]),e}(),ze=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.version=t(r,"version",e.defaultValues("version")),this.modulus=t(r,"modulus",e.defaultValues("modulus")),this.publicExponent=t(r,"publicExponent",e.defaultValues("publicExponent")),this.privateExponent=t(r,"privateExponent",e.defaultValues("privateExponent")),this.prime1=t(r,"prime1",e.defaultValues("prime1")),this.prime2=t(r,"prime2",e.defaultValues("prime2")),this.exponent1=t(r,"exponent1",e.defaultValues("exponent1")),this.exponent2=t(r,"exponent2",e.defaultValues("exponent2")),this.coefficient=t(r,"coefficient",e.defaultValues("coefficient")),"otherPrimeInfos"in r&&(this.otherPrimeInfos=t(r,"otherPrimeInfos",e.defaultValues("otherPrimeInfos"))),"schema"in r&&this.fromSchema(r.schema),"json"in r&&this.fromJSON(r.json)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{version:"version",modulus:"modulus",publicExponent:"publicExponent",privateExponent:"privateExponent",prime1:"prime1",prime2:"prime2",exponent1:"exponent1",exponent2:"exponent2",coefficient:"coefficient",otherPrimeInfo:{names:{blockName:"otherPrimeInfos"}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RSAPrivateKey");this.version=r.result.version.valueBlock.valueDec,this.modulus=r.result.modulus.convertFromDER(256),this.publicExponent=r.result.publicExponent,this.privateExponent=r.result.privateExponent.convertFromDER(256),this.prime1=r.result.prime1.convertFromDER(128),this.prime2=r.result.prime2.convertFromDER(128),this.exponent1=r.result.exponent1.convertFromDER(128),this.exponent2=r.result.exponent2.convertFromDER(128),this.coefficient=r.result.coefficient.convertFromDER(128),"otherPrimeInfos"in r.result&&(this.otherPrimeInfos=Array.from(r.result.otherPrimeInfos,function(e){return new Qe({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new ue({value:this.version})),e.push(this.modulus.convertToDER()),e.push(this.publicExponent),e.push(this.privateExponent.convertToDER()),e.push(this.prime1.convertToDER()),e.push(this.prime2.convertToDER()),e.push(this.exponent1.convertToDER()),e.push(this.exponent2.convertToDER()),e.push(this.coefficient.convertToDER()),"otherPrimeInfos"in this&&e.push(new ee({value:Array.from(this.otherPrimeInfos,function(e){return e.toSchema()})})),new ee({value:e})}},{key:"toJSON",value:function(){var e={n:h(f(this.modulus.valueBlock.valueHex),!0,!0,!0),e:h(f(this.publicExponent.valueBlock.valueHex),!0,!0,!0),d:h(f(this.privateExponent.valueBlock.valueHex),!0,!0,!0),p:h(f(this.prime1.valueBlock.valueHex),!0,!0,!0),q:h(f(this.prime2.valueBlock.valueHex),!0,!0,!0),dp:h(f(this.exponent1.valueBlock.valueHex),!0,!0,!0),dq:h(f(this.exponent2.valueBlock.valueHex),!0,!0,!0),qi:h(f(this.coefficient.valueBlock.valueHex),!0,!0,!0)};return"otherPrimeInfos"in this&&(e.oth=Array.from(this.otherPrimeInfos,function(e){return e.toJSON()})),e}},{key:"fromJSON",value:function(e){if(!("n"in e))throw new Error('Absent mandatory parameter "n"');if(this.modulus=new ue({valueHex:v(m(e.n,!0,!0))}),!("e"in e))throw new Error('Absent mandatory parameter "e"');if(this.publicExponent=new ue({valueHex:v(m(e.e,!0,!0))}),!("d"in e))throw new Error('Absent mandatory parameter "d"');if(this.privateExponent=new ue({valueHex:v(m(e.d,!0,!0))}),!("p"in e))throw new Error('Absent mandatory parameter "p"');if(this.prime1=new ue({valueHex:v(m(e.p,!0,!0))}),!("q"in e))throw new Error('Absent mandatory parameter "q"');if(this.prime2=new ue({valueHex:v(m(e.q,!0,!0))}),!("dp"in e))throw new Error('Absent mandatory parameter "dp"');if(this.exponent1=new ue({valueHex:v(m(e.dp,!0,!0))}),!("dq"in e))throw new Error('Absent mandatory parameter "dq"');if(this.exponent2=new ue({valueHex:v(m(e.dq,!0,!0))}),!("qi"in e))throw new Error('Absent mandatory parameter "qi"');this.coefficient=new ue({valueHex:v(m(e.qi,!0,!0))}),"oth"in e&&(this.otherPrimeInfos=Array.from(e.oth,function(e){return new Qe({json:e})}))}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"modulus":case"publicExponent":case"privateExponent":case"prime1":case"prime2":case"exponent1":case"exponent2":case"coefficient":return new ue;case"otherPrimeInfos":return[];default:throw new Error("Invalid member name for RSAPrivateKey class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new ue({name:e.version||""}),new ue({name:e.modulus||""}),new ue({name:e.publicExponent||""}),new ue({name:e.privateExponent||""}),new ue({name:e.prime1||""}),new ue({name:e.prime2||""}),new ue({name:e.exponent1||""}),new ue({name:e.exponent2||""}),new ue({name:e.coefficient||""}),new ee({optional:!0,value:[new Ue({name:e.otherPrimeInfosName||"",value:Qe.schema(e.otherPrimeInfo||{})})]})]})}}]),e}(),Ze=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.version=t(r,"version",e.defaultValues("version")),this.privateKeyAlgorithm=t(r,"privateKeyAlgorithm",e.defaultValues("privateKeyAlgorithm")),this.privateKey=t(r,"privateKey",e.defaultValues("privateKey")),"attributes"in r&&(this.attributes=t(r,"attributes",e.defaultValues("attributes"))),"parsedKey"in r&&(this.parsedKey=t(r,"parsedKey",e.defaultValues("parsedKey"))),"schema"in r&&this.fromSchema(r.schema),"json"in r&&this.fromJSON(r.json)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{version:"version",privateKeyAlgorithm:{names:{blockName:"privateKeyAlgorithm"}},privateKey:"privateKey",attributes:"attributes"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PKCS8");switch(this.version=r.result.version.valueBlock.valueDec,this.privateKeyAlgorithm=new Te({schema:r.result.privateKeyAlgorithm}),this.privateKey=r.result.privateKey,"attributes"in r.result&&(this.attributes=Array.from(r.result.attributes,function(e){return new Me({schema:e})})),this.privateKeyAlgorithm.algorithmId){case"1.2.840.113549.1.1.1":var a=g(this.privateKey.valueBlock.valueHex);-1!==a.offset&&(this.parsedKey=new ze({schema:a.result}));break;case"1.2.840.10045.2.1":if("algorithmParams"in this.privateKeyAlgorithm&&this.privateKeyAlgorithm.algorithmParams instanceof me){var n=g(this.privateKey.valueBlock.valueHex);-1!==n.offset&&(this.parsedKey=new Ge({namedCurve:this.privateKeyAlgorithm.algorithmParams.valueBlock.toString(),schema:n.result}))}}}},{key:"toSchema",value:function(){var e=[new ue({value:this.version}),this.privateKeyAlgorithm.toSchema(),this.privateKey];return"attributes"in this&&e.push(new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,function(e){return e.toSchema()})})),new ee({value:e})}},{key:"toJSON",value:function(){if("parsedKey"in this==!1){var e={version:this.version,privateKeyAlgorithm:this.privateKeyAlgorithm.toJSON(),privateKey:this.privateKey.toJSON()};return"attributes"in this&&(e.attributes=Array.from(this.attributes,function(e){return e.toJSON()})),e}var t={};switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.10045.2.1":t.kty="EC";break;case"1.2.840.113549.1.1.1":t.kty="RSA"}var r=this.parsedKey.toJSON(),a=!0,n=!1,i=void 0;try{for(var s,o=Object.keys(r)[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var u=s.value;t[u]=r[u]}}catch(e){n=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}return t}},{key:"fromJSON",value:function(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new Ge({json:e}),this.privateKeyAlgorithm=new Te({algorithmId:"1.2.840.10045.2.1",algorithmParams:new me({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new ze({json:e}),this.privateKeyAlgorithm=new Te({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new re});break;default:throw new Error('Invalid value for "kty" parameter: '+e.kty)}this.privateKey=new ne({valueHex:this.parsedKey.toSchema().toBER(!1)})}}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"privateKeyAlgorithm":return new Te;case"privateKey":return new ne;case"attributes":return[];default:throw new Error("Invalid member name for PrivateKeyInfo class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new ue({name:e.version||""}),Te.schema(e.privateKeyAlgorithm||{}),new ne({name:e.privateKey||""}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ue({name:e.attributes||"",value:Me.schema()})]})]})}}]),e}(),$e=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.crypto=t(r,"crypto",{}),this.name=t(r,"name","")}return _createClass(e,[{key:"importKey",value:function(e,t,r,a,n){var i=this,s={};switch(t instanceof Uint8Array&&(t=t.buffer),e.toLowerCase()){case"raw":return this.crypto.importKey("raw",t,r,a,n);case"spki":var o=g(t);if(-1===o.offset)return Promise.reject("Incorrect keyData");var u=new Fe;try{u.fromSchema(o.result)}catch(e){return Promise.reject("Incorrect keyData")}switch(r.name.toUpperCase()){case"RSA-PSS":switch(r.hash.name.toUpperCase()){case"SHA-1":s.alg="PS1";break;case"SHA-256":s.alg="PS256";break;case"SHA-384":s.alg="PS384";break;case"SHA-512":s.alg="PS512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}case"RSASSA-PKCS1-V1_5":if(n=["verify"],s.kty="RSA",s.ext=a,s.key_ops=n,"1.2.840.113549.1.1.1"!==u.algorithm.algorithmId)return Promise.reject("Incorrect public key algorithm: "+u.algorithm.algorithmId);if("alg"in s==!1)switch(r.hash.name.toUpperCase()){case"SHA-1":s.alg="RS1";break;case"SHA-256":s.alg="RS256";break;case"SHA-384":s.alg="RS384";break;case"SHA-512":s.alg="RS512";break;default:return Promise.reject("Incorrect public key algorithm: "+u.algorithm.algorithmId)}var l=u.toJSON(),c=!0,h=!1,m=void 0;try{for(var f,d=Object.keys(l)[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){var y=f.value;s[y]=l[y]}}catch(e){h=!0,m=e}finally{try{!c&&d.return&&d.return()}finally{if(h)throw m}}break;case"ECDSA":n=["verify"];case"ECDH":if(s={kty:"EC",ext:a,key_ops:n},"1.2.840.10045.2.1"!==u.algorithm.algorithmId)return Promise.reject("Incorrect public key algorithm: "+u.algorithm.algorithmId);var p=u.toJSON(),k=!0,b=!1,w=void 0;try{for(var C,S=Object.keys(p)[Symbol.iterator]();!(k=(C=S.next()).done);k=!0){var A=C.value;s[A]=p[A]}}catch(e){b=!0,w=e}finally{try{!k&&S.return&&S.return()}finally{if(b)throw w}}break;case"RSA-OAEP":if(s.kty="RSA",s.ext=a,s.key_ops=n,"safari"===this.name.toLowerCase())s.alg="RSA-OAEP";else switch(r.hash.name.toUpperCase()){case"SHA-1":s.alg="RSA-OAEP-1";break;case"SHA-256":s.alg="RSA-OAEP-256";break;case"SHA-384":s.alg="RSA-OAEP-384";break;case"SHA-512":s.alg="RSA-OAEP-512";break;default:return Promise.reject("Incorrect public key algorithm: "+u.algorithm.algorithmId)}var I=u.toJSON(),B=!0,N=!1,P=void 0;try{for(var E,x=Object.keys(I)[Symbol.iterator]();!(B=(E=x.next()).done);B=!0){var O=E.value;s[O]=I[O]}}catch(e){N=!0,P=e}finally{try{!B&&x.return&&x.return()}finally{if(N)throw P}}break;default:return Promise.reject("Incorrect algorithm name: "+r.name.toUpperCase())}break;case"pkcs8":var V=new Ze,_=g(t);if(-1===_.offset)return Promise.reject("Incorrect keyData");try{V.fromSchema(_.result)}catch(e){return Promise.reject("Incorrect keyData")}switch(r.name.toUpperCase()){case"RSA-PSS":switch(r.hash.name.toUpperCase()){case"SHA-1":s.alg="PS1";break;case"SHA-256":s.alg="PS256";break;case"SHA-384":s.alg="PS384";break;case"SHA-512":s.alg="PS512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}case"RSASSA-PKCS1-V1_5":if(n=["sign"],s.kty="RSA",s.ext=a,s.key_ops=n,"1.2.840.113549.1.1.1"!==V.privateKeyAlgorithm.algorithmId)return Promise.reject("Incorrect private key algorithm: "+V.privateKeyAlgorithm.algorithmId);if("alg"in s==!1)switch(r.hash.name.toUpperCase()){case"SHA-1":s.alg="RS1";break;case"SHA-256":s.alg="RS256";break;case"SHA-384":s.alg="RS384";break;case"SHA-512":s.alg="RS512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}var j=V.toJSON(),D=!0,R=!1,K=void 0;try{for(var H,U=Object.keys(j)[Symbol.iterator]();!(D=(H=U.next()).done);D=!0){var L=H.value;s[L]=j[L]}}catch(e){R=!0,K=e}finally{try{!D&&U.return&&U.return()}finally{if(R)throw K}}break;case"ECDSA":n=["sign"];case"ECDH":if(s={kty:"EC",ext:a,key_ops:n},"1.2.840.10045.2.1"!==V.privateKeyAlgorithm.algorithmId)return Promise.reject("Incorrect algorithm: "+V.privateKeyAlgorithm.algorithmId);var T=V.toJSON(),J=!0,q=!1,W=void 0;try{for(var F,M=Object.keys(T)[Symbol.iterator]();!(J=(F=M.next()).done);J=!0){var G=F.value;s[G]=T[G]}}catch(e){q=!0,W=e}finally{try{!J&&M.return&&M.return()}finally{if(q)throw W}}break;case"RSA-OAEP":if(s.kty="RSA",s.ext=a,s.key_ops=n,"safari"===this.name.toLowerCase())s.alg="RSA-OAEP";else switch(r.hash.name.toUpperCase()){case"SHA-1":s.alg="RSA-OAEP-1";break;case"SHA-256":s.alg="RSA-OAEP-256";break;case"SHA-384":s.alg="RSA-OAEP-384";break;case"SHA-512":s.alg="RSA-OAEP-512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}var Q=V.toJSON(),z=!0,Z=!1,$=void 0;try{for(var X,Y=Object.keys(Q)[Symbol.iterator]();!(z=(X=Y.next()).done);z=!0){var ee=X.value;s[ee]=Q[ee]}}catch(e){Z=!0,$=e}finally{try{!z&&Y.return&&Y.return()}finally{if(Z)throw $}}break;default:return Promise.reject("Incorrect algorithm name: "+r.name.toUpperCase())}break;case"jwk":s=t;break;default:return Promise.reject("Incorrect format: "+e)}return"safari"===this.name.toLowerCase()?Promise.resolve().then(function(){return i.crypto.importKey("jwk",v(JSON.stringify(s)),r,a,n)}).then(function(e){return e},function(e){return i.crypto.importKey("jwk",s,r,a,n)}):this.crypto.importKey("jwk",s,r,a,n)}},{key:"exportKey",value:function(e,t){var r=this.crypto.exportKey("jwk",t);switch("safari"===this.name.toLowerCase()&&(r=r.then(function(e){return e instanceof ArrayBuffer?JSON.parse(f(e)):e})),e.toLowerCase()){case"raw":return this.crypto.exportKey("raw",t);case"spki":r=r.then(function(e){var t=new Fe;try{t.fromJSON(e)}catch(e){return Promise.reject("Incorrect key data")}return t.toSchema().toBER(!1)});break;case"pkcs8":r=r.then(function(e){var t=new Ze;try{t.fromJSON(e)}catch(e){return Promise.reject("Incorrect key data")}return t.toSchema().toBER(!1)});break;case"jwk":break;default:return Promise.reject("Incorrect format: "+e)}return r}},{key:"convert",value:function(e,t,r,a,n,i){var s=this;switch(e.toLowerCase()){case"raw":switch(t.toLowerCase()){case"raw":return Promise.resolve(r);case"spki":return Promise.resolve().then(function(){return s.importKey("raw",r,a,n,i)}).then(function(e){return s.exportKey("spki",e)});case"pkcs8":return Promise.resolve().then(function(){return s.importKey("raw",r,a,n,i)}).then(function(e){return s.exportKey("pkcs8",e)});case"jwk":return Promise.resolve().then(function(){return s.importKey("raw",r,a,n,i)}).then(function(e){return s.exportKey("jwk",e)});default:return Promise.reject("Incorrect outputFormat: "+t)}case"spki":switch(t.toLowerCase()){case"raw":return Promise.resolve().then(function(){return s.importKey("spki",r,a,n,i)}).then(function(e){return s.exportKey("raw",e)});case"spki":return Promise.resolve(r);case"pkcs8":return Promise.reject("Impossible to convert between SPKI/PKCS8");case"jwk":return Promise.resolve().then(function(){return s.importKey("spki",r,a,n,i)}).then(function(e){return s.exportKey("jwk",e)});default:return Promise.reject("Incorrect outputFormat: "+t)}case"pkcs8":switch(t.toLowerCase()){case"raw":return Promise.resolve().then(function(){return s.importKey("pkcs8",r,a,n,i)}).then(function(e){return s.exportKey("raw",e)});case"spki":return Promise.reject("Impossible to convert between SPKI/PKCS8");case"pkcs8":return Promise.resolve(r);case"jwk":return Promise.resolve().then(function(){return s.importKey("pkcs8",r,a,n,i)}).then(function(e){return s.exportKey("jwk",e)});default:return Promise.reject("Incorrect outputFormat: "+t)}case"jwk":switch(t.toLowerCase()){case"raw":return Promise.resolve().then(function(){return s.importKey("jwk",r,a,n,i)}).then(function(e){return s.exportKey("raw",e)});case"spki":return Promise.resolve().then(function(){return s.importKey("jwk",r,a,n,i)}).then(function(e){return s.exportKey("spki",e)});case"pkcs8":return Promise.resolve().then(function(){return s.importKey("jwk",r,a,n,i)}).then(function(e){return s.exportKey("pkcs8",e)});case"jwk":return Promise.resolve(r);default:return Promise.reject("Incorrect outputFormat: "+t)}default:return Promise.reject("Incorrect inputFormat: "+e)}}},{key:"encrypt",value:function(){var e;return(e=this.crypto).encrypt.apply(e,arguments)}},{key:"decrypt",value:function(){var e;return(e=this.crypto).decrypt.apply(e,arguments)}},{key:"sign",value:function(){var e;return(e=this.crypto).sign.apply(e,arguments)}},{key:"verify",value:function(){var e;return(e=this.crypto).verify.apply(e,arguments)}},{key:"digest",value:function(){var e;return(e=this.crypto).digest.apply(e,arguments)}},{key:"generateKey",value:function(){var e;return(e=this.crypto).generateKey.apply(e,arguments)}},{key:"deriveKey",value:function(){var e;return(e=this.crypto).deriveKey.apply(e,arguments)}},{key:"deriveBits",value:function(){var e;return(e=this.crypto).deriveBits.apply(e,arguments)}},{key:"wrapKey",value:function(){var e;return(e=this.crypto).wrapKey.apply(e,arguments)}},{key:"unwrapKey",value:function(){var e;return(e=this.crypto).unwrapKey.apply(e,arguments)}}]),e}(),Xe={name:"none",crypto:null,subtle:null};!function(){if("undefined"!=typeof self&&"crypto"in self){var e="webcrypto",t=self.crypto,r=null;if("webkitSubtle"in self.crypto){try{r=self.crypto.webkitSubtle}catch(e){r=self.crypto.subtle}e="safari"}"subtle"in self.crypto&&(r=self.crypto.subtle),Xe={name:e,crypto:t,subtle:new $e({name:e,crypto:r})}}}();var Ye=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.type=t(r,"type",e.defaultValues("type")),this.value=t(r,"value",e.defaultValues("value")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{type:"type",value:"typeValue"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for ATTR_TYPE_AND_VALUE");this.type=r.result.type.valueBlock.toString(),this.value=r.result.typeValue}},{key:"toSchema",value:function(){return new ee({value:[new me({value:this.type}),this.value]})}},{key:"toJSON",value:function(){var e={type:this.type};return 0!==Object.keys(this.value).length?e.value=this.value.toJSON():e.value=this.value,e}},{key:"isEqual",value:function(t){if(t instanceof e){if(this.type!==t.type)return!1;if(this.value instanceof ve&&t.value instanceof ve||this.value instanceof ge&&t.value instanceof ge||this.value instanceof pe&&t.value instanceof pe||this.value instanceof we&&t.value instanceof we||this.value instanceof Ce&&t.value instanceof Ce||this.value instanceof Se&&t.value instanceof Se||this.value instanceof Ae&&t.value instanceof Ae||this.value instanceof Ie&&t.value instanceof Ie||this.value instanceof Be&&t.value instanceof Be||this.value instanceof Ne&&t.value instanceof Ne||this.value instanceof Pe&&t.value instanceof Pe||this.value instanceof Ee&&t.value instanceof Ee){var r=I(this.value.valueBlock.value),a=I(t.value.valueBlock.value);if(0!==r.localeCompare(a))return!1}else if(!1===l(this.value.valueBeforeDecode,t.value.valueBeforeDecode))return!1;return!0}return t instanceof ArrayBuffer&&l(this.value.valueBeforeDecode,t)}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return"";case"value":return{};default:throw new Error("Invalid member name for AttributeTypeAndValue class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new me({name:e.type||""}),new He({name:e.value||""})]})}}]),e}(),et=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.typesAndValues=t(r,"typesAndValues",e.defaultValues("typesAndValues")),this.valueBeforeDecode=t(r,"valueBeforeDecode",e.defaultValues("valueBeforeDecode")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{blockName:"RDN",repeatedSet:"typesAndValues"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RDN");"typesAndValues"in r.result&&(this.typesAndValues=Array.from(r.result.typesAndValues,function(e){return new Ye({schema:e})})),this.valueBeforeDecode=r.result.RDN.valueBeforeDecode}},{key:"toSchema",value:function(){return 0===this.valueBeforeDecode.byteLength?new ee({value:[new te({value:Array.from(this.typesAndValues,function(e){return e.toSchema()})})]}):g(this.valueBeforeDecode).result}},{key:"toJSON",value:function(){return{typesAndValues:Array.from(this.typesAndValues,function(e){return e.toJSON()})}}},{key:"isEqual",value:function(t){if(t instanceof e){if(this.typesAndValues.length!==t.typesAndValues.length)return!1;var r=!0,a=!1,n=void 0;try{for(var i,s=this.typesAndValues.entries()[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var o=_slicedToArray(i.value,2),u=o[0];if(!1===o[1].isEqual(t.typesAndValues[u]))return!1}}catch(e){a=!0,n=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw n}}return!0}return t instanceof ArrayBuffer&&l(this.valueBeforeDecode,t)}}],[{key:"defaultValues",value:function(e){switch(e){case"typesAndValues":return[];case"valueBeforeDecode":return new ArrayBuffer(0);default:throw new Error("Invalid member name for RelativeDistinguishedNames class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"typesAndValues":return 0===t.length;case"valueBeforeDecode":return 0===t.byteLength;default:throw new Error("Invalid member name for RelativeDistinguishedNames class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new Ue({name:e.repeatedSequence||"",value:new te({value:[new Ue({name:e.repeatedSet||"",value:Ye.schema(e.typeAndValue||{})})]})})]})}}]),e}(),tt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.type=t(r,"type",e.defaultValues("type")),this.value=t(r,"value",e.defaultValues("value")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{blockName:"blockName",otherName:"otherName",rfc822Name:"rfc822Name",dNSName:"dNSName",x400Address:"x400Address",directoryName:{names:{blockName:"directoryName"}},ediPartyName:"ediPartyName",uniformResourceIdentifier:"uniformResourceIdentifier",iPAddress:"iPAddress",registeredID:"registeredID"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for GENERAL_NAME");switch(this.type=r.result.blockName.idBlock.tagNumber,this.type){case 0:this.value=r.result.blockName;break;case 1:case 2:case 6:var a=r.result.blockName;a.idBlock.tagClass=1,a.idBlock.tagNumber=22;var n=a.toBER(!1);this.value=g(n).result.valueBlock.value;break;case 3:this.value=r.result.blockName;break;case 4:this.value=new et({schema:r.result.directoryName});break;case 5:this.value=r.result.ediPartyName;break;case 7:this.value=new ne({valueHex:r.result.blockName.valueBlock.valueHex});break;case 8:var i=r.result.blockName;i.idBlock.tagClass=1,i.idBlock.tagNumber=6;var s=i.toBER(!1);this.value=g(s).result.valueBlock.toString()}}},{key:"toSchema",value:function(){switch(this.type){case 0:case 3:case 5:return new z({idBlock:{tagClass:3,tagNumber:this.type},value:[this.value]});case 1:case 2:case 6:var t=new Ie({value:this.value});return t.idBlock.tagClass=3,t.idBlock.tagNumber=this.type,t;case 4:return new z({idBlock:{tagClass:3,tagNumber:4},value:[this.value.toSchema()]});case 7:var r=this.value;return r.idBlock.tagClass=3,r.idBlock.tagNumber=this.type,r;case 8:var a=new me({value:this.value});return a.idBlock.tagClass=3,a.idBlock.tagNumber=this.type,a;default:return e.schema()}}},{key:"toJSON",value:function(){var e={type:this.type};return"string"==typeof this.value?e.value=this.value:e.value=this.value.toJSON(),e}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return 9;case"value":return{};default:throw new Error("Invalid member name for GeneralName class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"type":return r===e.defaultValues(t);case"value":return 0===Object.keys(r).length;default:throw new Error("Invalid member name for GeneralName class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new Ke({value:[new z({idBlock:{tagClass:3,tagNumber:0},name:e.blockName||"",value:[new me,new z({idBlock:{tagClass:3,tagNumber:0},value:[new He]})]}),new G({name:e.blockName||"",idBlock:{tagClass:3,tagNumber:1}}),new G({name:e.blockName||"",idBlock:{tagClass:3,tagNumber:2}}),new z({idBlock:{tagClass:3,tagNumber:3},name:e.blockName||"",value:[O(e.builtInStandardAttributes||{},!1),V(!0),_(!0)]}),new z({idBlock:{tagClass:3,tagNumber:4},name:e.blockName||"",value:[et.schema(e.directoryName||{})]}),new z({idBlock:{tagClass:3,tagNumber:5},name:e.blockName||"",value:[new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ke({value:[new Se,new Ce,new pe,new ve,new ge]})]}),new z({idBlock:{tagClass:3,tagNumber:1},value:[new Ke({value:[new Se,new Ce,new pe,new ve,new ge]})]})]}),new G({name:e.blockName||"",idBlock:{tagClass:3,tagNumber:6}}),new G({name:e.blockName||"",idBlock:{tagClass:3,tagNumber:7}}),new G({name:e.blockName||"",idBlock:{tagClass:3,tagNumber:8}})]})}}]),e}(),rt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.accessMethod=t(r,"accessMethod",e.defaultValues("accessMethod")),this.accessLocation=t(r,"accessLocation",e.defaultValues("accessLocation")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{accessMethod:"accessMethod",accessLocation:{names:{blockName:"accessLocation"}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for AccessDescription");this.accessMethod=r.result.accessMethod.valueBlock.toString(),this.accessLocation=new tt({schema:r.result.accessLocation})}},{key:"toSchema",value:function(){return new ee({value:[new me({value:this.accessMethod}),this.accessLocation.toSchema()]})}},{key:"toJSON",value:function(){return{accessMethod:this.accessMethod,accessLocation:this.accessLocation.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"accessMethod":return"";case"accessLocation":return new tt;default:throw new Error("Invalid member name for AccessDescription class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new me({name:e.accessMethod||""}),tt.schema(e.accessLocation||{})]})}}]),e}(),at=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),"seconds"in r&&(this.seconds=t(r,"seconds",e.defaultValues("seconds"))),"millis"in r&&(this.millis=t(r,"millis",e.defaultValues("millis"))),"micros"in r&&(this.micros=t(r,"micros",e.defaultValues("micros"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{seconds:"seconds",millis:"millis",micros:"micros"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for tsp.Accuracy");if("seconds"in r.result&&(this.seconds=r.result.seconds.valueBlock.valueDec),"millis"in r.result){var a=new ue({valueHex:r.result.millis.valueBlock.valueHex});this.millis=a.valueBlock.valueDec}if("micros"in r.result){var n=new ue({valueHex:r.result.micros.valueBlock.valueHex});this.micros=n.valueBlock.valueDec}}},{key:"toSchema",value:function(){var e=[];if("seconds"in this&&e.push(new ue({value:this.seconds})),"millis"in this){var t=new ue({value:this.millis});e.push(new G({idBlock:{tagClass:3,tagNumber:0},valueHex:t.valueBlock.valueHex}))}if("micros"in this){var r=new ue({value:this.micros});e.push(new G({idBlock:{tagClass:3,tagNumber:1},valueHex:r.valueBlock.valueHex}))}return new ee({value:e})}},{key:"toJSON",value:function(){var e={};return"seconds"in this&&(e.seconds=this.seconds),"millis"in this&&(e.millis=this.millis),"micros"in this&&(e.micros=this.micros),e}}],[{key:"defaultValues",value:function(e){switch(e){case"seconds":case"millis":case"micros":return 0;default:throw new Error("Invalid member name for Accuracy class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"seconds":case"millis":case"micros":return r===e.defaultValues(t);default:throw new Error("Invalid member name for Accuracy class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",optional:!0,value:[new ue({optional:!0,name:e.seconds||""}),new G({name:e.millis||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new G({name:e.micros||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}}]),e}(),nt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.altNames=t(r,"altNames",e.defaultValues("altNames")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{altNames:"altNames"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for AltName");"altNames"in r.result&&(this.altNames=Array.from(r.result.altNames,function(e){return new tt({schema:e})}))}},{key:"toSchema",value:function(){return new ee({value:Array.from(this.altNames,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{altNames:Array.from(this.altNames,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"altNames":return[];default:throw new Error("Invalid member name for AltName class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new Ue({name:e.altNames||"",value:tt.schema()})]})}}]),e}(),it=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.contentType=t(r,"contentType",e.defaultValues("contentType")),this.content=t(r,"content",e.defaultValues("content")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CMS_CONTENT_INFO");this.contentType=r.result.contentType.valueBlock.toString(),this.content=r.result.content}},{key:"toSchema",value:function(){return new ee({value:[new me({value:this.contentType}),new z({idBlock:{tagClass:3,tagNumber:0},value:[this.content]})]})}},{key:"toJSON",value:function(){var e={contentType:this.contentType};return this.content instanceof He||(e.content=this.content.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"contentType":return"";case"content":return new He;default:throw new Error("Invalid member name for ContentInfo class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"contentType":return""===t;case"content":return t instanceof He;default:throw new Error("Invalid member name for ContentInfo class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return"optional"in e==!1&&(e.optional=!1),new ee({name:e.blockName||"ContentInfo",optional:e.optional,value:[new me({name:e.contentType||"contentType"}),new z({idBlock:{tagClass:3,tagNumber:0},value:[new He({name:e.content||"content"})]})]})}}]),e}(),st=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,e),this.contentType=t(r,"contentType",e.defaultValues("contentType")),this.contentEncryptionAlgorithm=t(r,"contentEncryptionAlgorithm",e.defaultValues("contentEncryptionAlgorithm")),"encryptedContent"in r&&(this.encryptedContent=r.encryptedContent,1===this.encryptedContent.idBlock.tagClass&&4===this.encryptedContent.idBlock.tagNumber&&!1===this.encryptedContent.idBlock.isConstructed)){for(var a=new ne({idBlock:{isConstructed:!0},isConstructed:!0}),n=0,i=this.encryptedContent.valueBlock.valueHex.byteLength;i>0;){for(var s=new Uint8Array(this.encryptedContent.valueBlock.valueHex,n,n+1024>this.encryptedContent.valueBlock.valueHex.byteLength?this.encryptedContent.valueBlock.valueHex.byteLength-n:1024),o=new ArrayBuffer(s.length),u=new Uint8Array(o),l=0;l<u.length;l++)u[l]=s[l];a.valueBlock.value.push(new ne({valueHex:o})),i-=s.length,n+=s.length}this.encryptedContent=a}"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{contentType:"contentType",contentEncryptionAlgorithm:{names:{blockName:"contentEncryptionAlgorithm"}},encryptedContent:"encryptedContent"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for EncryptedContentInfo");this.contentType=r.result.contentType.valueBlock.toString(),this.contentEncryptionAlgorithm=new Te({schema:r.result.contentEncryptionAlgorithm}),"encryptedContent"in r.result&&(this.encryptedContent=r.result.encryptedContent,this.encryptedContent.idBlock.tagClass=1,this.encryptedContent.idBlock.tagNumber=4)}},{key:"toSchema",value:function(){var e={isIndefiniteForm:!1},t=[];if(t.push(new me({value:this.contentType})),t.push(this.contentEncryptionAlgorithm.toSchema()),"encryptedContent"in this){e.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed;var r=this.encryptedContent;r.idBlock.tagClass=3,r.idBlock.tagNumber=0,r.lenBlock.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed,t.push(r)}return new ee({lenBlock:e,value:t})}},{key:"toJSON",value:function(){var e={contentType:this.contentType,contentEncryptionAlgorithm:this.contentEncryptionAlgorithm.toJSON()};return"encryptedContent"in this&&(e.encryptedContent=this.encryptedContent.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"contentType":return"";case"contentEncryptionAlgorithm":return new Te;case"encryptedContent":return new ne;default:throw new Error("Invalid member name for EncryptedContentInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"contentType":return""===r;case"contentEncryptionAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"encryptedContent":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for EncryptedContentInfo class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new me({name:e.contentType||""}),Te.schema(e.contentEncryptionAlgorithm||{}),new Ke({value:[new z({name:e.encryptedContent||"",idBlock:{tagClass:3,tagNumber:0},value:[new Ue({value:new ne})]}),new G({name:e.encryptedContent||"",idBlock:{tagClass:3,tagNumber:0}})]})]})}}]),e}(),ot=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.salt=t(r,"salt",e.defaultValues("salt")),this.iterationCount=t(r,"iterationCount",e.defaultValues("iterationCount")),this.keyLength=t(r,"keyLength",e.defaultValues("keyLength")),this.prf=t(r,"prf",e.defaultValues("prf")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{saltPrimitive:"salt",saltConstructed:{names:{blockName:"salt"}},iterationCount:"iterationCount",keyLength:"keyLength",prf:{names:{blockName:"prf",optional:!0}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PBKDF2_params");this.salt=r.result.salt,this.iterationCount=r.result.iterationCount.valueBlock.valueDec,"keyLength"in r.result&&(this.keyLength=r.result.keyLength.valueBlock.valueDec),"prf"in r.result&&(this.prf=new Te({schema:r.result.prf}))}},{key:"toSchema",value:function(){var t=[];return t.push(this.salt),t.push(new ue({value:this.iterationCount})),e.defaultValues("keyLength")!==this.keyLength&&t.push(new ue({value:this.keyLength})),!1===e.defaultValues("prf").isEqual(this.prf)&&t.push(this.prf.toSchema()),new ee({value:t})}},{key:"toJSON",value:function(){var t={salt:this.salt.toJSON(),iterationCount:this.iterationCount};return e.defaultValues("keyLength")!==this.keyLength&&(t.keyLength=this.keyLength),!1===e.defaultValues("prf").isEqual(this.prf)&&(t.prf=this.prf.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"salt":return{};case"iterationCount":return-1;case"keyLength":return 0;case"prf":return new Te;default:throw new Error("Invalid member name for PBKDF2Params class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new Ke({value:[new ne({name:e.saltPrimitive||""}),Te.schema(e.saltConstructed||{})]}),new ue({name:e.iterationCount||""}),new ue({name:e.keyLength||"",optional:!0}),Te.schema(e.prf||{names:{optional:!0}})]})}}]),e}(),ut=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.keyDerivationFunc=t(r,"keyDerivationFunc",e.defaultValues("keyDerivationFunc")),this.encryptionScheme=t(r,"encryptionScheme",e.defaultValues("encryptionScheme")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{keyDerivationFunc:{names:{blockName:"keyDerivationFunc"}},encryptionScheme:{names:{blockName:"encryptionScheme"}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PBES2_params");this.keyDerivationFunc=new Te({schema:r.result.keyDerivationFunc}),this.encryptionScheme=new Te({schema:r.result.encryptionScheme})}},{key:"toSchema",value:function(){return new ee({value:[this.keyDerivationFunc.toSchema(),this.encryptionScheme.toSchema()]})}},{key:"toJSON",value:function(){return{keyDerivationFunc:this.keyDerivationFunc.toJSON(),encryptionScheme:this.encryptionScheme.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"keyDerivationFunc":case"encryptionScheme":return new Te;default:throw new Error("Invalid member name for PBES2Params class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[Te.schema(e.keyDerivationFunc||{}),Te.schema(e.encryptionScheme||{})]})}}]),e}(),lt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.version=t(r,"version",e.defaultValues("version")),this.encryptedContentInfo=t(r,"encryptedContentInfo",e.defaultValues("encryptedContentInfo")),"unprotectedAttrs"in r&&(this.unprotectedAttrs=t(r,"unprotectedAttrs",e.defaultValues("unprotectedAttrs"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{version:"version",encryptedContentInfo:{names:{blockName:"encryptedContentInfo"}},unprotectedAttrs:"unprotectedAttrs"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CMS_ENCRYPTED_DATA");this.version=r.result.version.valueBlock.valueDec,this.encryptedContentInfo=new st({schema:r.result.encryptedContentInfo}),"unprotectedAttrs"in r.result&&(this.unprotectedAttrs=Array.from(r.result.unprotectedAttrs,function(e){return new Me({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new ue({value:this.version})),e.push(this.encryptedContentInfo.toSchema()),"unprotectedAttrs"in this&&e.push(new z({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,function(e){return e.toSchema()})})),new ee({value:e})}},{key:"toJSON",value:function(){var e={version:this.version,encryptedContentInfo:this.encryptedContentInfo.toJSON()};return"unprotectedAttrs"in this&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,function(e){return e.toJSON()})),e}},{key:"encrypt",value:function(e){var t=this;if(e instanceof Object==!1)return Promise.reject('Parameters must have type "Object"');if("password"in e==!1)return Promise.reject('Absent mandatory parameter "password"');if("contentEncryptionAlgorithm"in e==!1)return Promise.reject('Absent mandatory parameter "contentEncryptionAlgorithm"');if("hmacHashAlgorithm"in e==!1)return Promise.reject('Absent mandatory parameter "hmacHashAlgorithm"');if("iterationCount"in e==!1)return Promise.reject('Absent mandatory parameter "iterationCount"');if("contentToEncrypt"in e==!1)return Promise.reject('Absent mandatory parameter "contentToEncrypt"');var r=C(e.contentEncryptionAlgorithm);if(""===r)return Promise.reject('Wrong "contentEncryptionAlgorithm" value');var a=C({name:"PBKDF2"});if(""===a)return Promise.reject("Can not find OID for PBKDF2");var n=C({name:"HMAC",hash:{name:e.hmacHashAlgorithm}});if(""===n)return Promise.reject('Incorrect value for "hmacHashAlgorithm": '+e.hmacHashAlgorithm);var i=b();if(void 0===i)return Promise.reject("Unable to create WebCrypto object");var s=Promise.resolve(),o=new ArrayBuffer(16),u=new Uint8Array(o);w(u);var l=new ArrayBuffer(64),c=new Uint8Array(l);w(c);var h=new Uint8Array(e.contentToEncrypt),m=new ot({salt:new ne({valueHex:l}),iterationCount:e.iterationCount,prf:new Te({algorithmId:n,algorithmParams:new re})});return s=s.then(function(){var t=new Uint8Array(e.password);return i.importKey("raw",t,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)}),s=s.then(function(t){return i.deriveKey({name:"PBKDF2",hash:{name:e.hmacHashAlgorithm},salt:c,iterations:e.iterationCount},t,e.contentEncryptionAlgorithm,!1,["encrypt"])},function(e){return Promise.reject(e)}),s=s.then(function(t){return i.encrypt({name:e.contentEncryptionAlgorithm.name,iv:u},t,h)},function(e){return Promise.reject(e)}),s=s.then(function(e){var n=new ut({keyDerivationFunc:new Te({algorithmId:a,algorithmParams:m.toSchema()}),encryptionScheme:new Te({algorithmId:r,algorithmParams:new ne({valueHex:o})})});t.encryptedContentInfo=new st({contentType:"1.2.840.113549.1.7.1",contentEncryptionAlgorithm:new Te({algorithmId:"1.2.840.113549.1.5.13",algorithmParams:n.toSchema()}),encryptedContent:new ne({valueHex:e})})},function(e){return Promise.reject(e)})}},{key:"decrypt",value:function(e){var t=this;if(e instanceof Object==!1)return Promise.reject('Parameters must have type "Object"');if("password"in e==!1)return Promise.reject('Absent mandatory parameter "password"');if("1.2.840.113549.1.5.13"!==this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId)return Promise.reject('Unknown "contentEncryptionAlgorithm": '+this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);var r=b();if(void 0===r)return Promise.reject("Unable to create WebCrypto object");var a=Promise.resolve(),n=void 0;try{n=new ut({schema:this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams})}catch(e){return Promise.reject('Incorrectly encoded "pbes2Parameters"')}var i=void 0;try{i=new ot({schema:n.keyDerivationFunc.algorithmParams})}catch(e){return Promise.reject('Incorrectly encoded "pbkdf2Params"')}var o=N(n.encryptionScheme.algorithmId);if("name"in o==!1)return Promise.reject('Incorrect OID for "contentEncryptionAlgorithm": '+n.encryptionScheme.algorithmId);var u=n.encryptionScheme.algorithmParams.valueBlock.valueHex,l=new Uint8Array(u),c=i.salt.valueBlock.valueHex,h=new Uint8Array(c),m=i.iterationCount,f="SHA-1";if("prf"in i){var v=N(i.prf.algorithmId);if("name"in v==!1)return Promise.reject("Incorrect OID for HMAC hash algorithm");f=v.hash.name}return a=a.then(function(){return r.importKey("raw",e.password,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)}),a=a.then(function(e){return r.deriveKey({name:"PBKDF2",hash:{name:f},salt:h,iterations:m},e,o,!1,["decrypt"])},function(e){return Promise.reject(e)}),a=a.then(function(e){var a=new ArrayBuffer(0);if(!1===t.encryptedContentInfo.encryptedContent.idBlock.isConstructed)a=t.encryptedContentInfo.encryptedContent.valueBlock.valueHex;else{var n=!0,i=!1,u=void 0;try{for(var c,h=t.encryptedContentInfo.encryptedContent.valueBlock.value[Symbol.iterator]();!(n=(c=h.next()).done);n=!0)a=s(a,c.value.valueBlock.valueHex)}catch(e){i=!0,u=e}finally{try{!n&&h.return&&h.return()}finally{if(i)throw u}}}return r.decrypt({name:o.name,iv:l},e,a)},function(e){return Promise.reject(e)})}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"encryptedContentInfo":return new st;case"unprotectedAttrs":return[];default:throw new Error("Invalid member name for EncryptedData class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"version":return 0===t;case"encryptedContentInfo":return st.compareWithDefault("contentType",t.contentType)&&st.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&st.compareWithDefault("encryptedContent",t.encryptedContent);case"unprotectedAttrs":return 0===t.length;default:throw new Error("Invalid member name for EncryptedData class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new ue({name:e.version||""}),st.schema(e.encryptedContentInfo||{}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Ue({name:e.unprotectedAttrs||"",value:Me.schema()})]})]})}}]),e}(),ct=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.encryptionAlgorithm=t(r,"encryptionAlgorithm",e.defaultValues("encryptionAlgorithm")),this.encryptedData=t(r,"encryptedData",e.defaultValues("encryptedData")),"parsedValue"in r&&(this.parsedValue=t(r,"parsedValue",e.defaultValues("parsedValue"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{encryptionAlgorithm:{names:{blockName:"encryptionAlgorithm"}},encryptedData:"encryptedData"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PKCS8ShroudedKeyBag");this.encryptionAlgorithm=new Te({schema:r.result.encryptionAlgorithm}),this.encryptedData=r.result.encryptedData}},{key:"toSchema",value:function(){return new ee({value:[this.encryptionAlgorithm.toSchema(),this.encryptedData]})}},{key:"toJSON",value:function(){return{encryptionAlgorithm:this.encryptionAlgorithm.toJSON(),encryptedData:this.encryptedData.toJSON()}}},{key:"parseInternalValues",value:function(e){var t=this,r=Promise.resolve(),a=new lt({encryptedContentInfo:new st({contentEncryptionAlgorithm:this.encryptionAlgorithm,encryptedContent:this.encryptedData})});return r=r.then(function(){return a.decrypt(e)},function(e){return Promise.reject(e)}),r=r.then(function(e){var r=g(e);if(-1===r.offset)return Promise.reject("Error during parsing ASN.1 data");t.parsedValue=new Ze({schema:r.result})},function(e){return Promise.reject(e)})}},{key:"makeInternalValues",value:function(e){var t=this;if("parsedValue"in this==!1)return Promise.reject('Please initialize "parsedValue" first');var r=Promise.resolve(),a=new lt;return r=r.then(function(){return e.contentToEncrypt=t.parsedValue.toSchema().toBER(!1),a.encrypt(e)},function(e){return Promise.reject(e)}),r=r.then(function(){t.encryptionAlgorithm=a.encryptedContentInfo.contentEncryptionAlgorithm,t.encryptedData=a.encryptedContentInfo.encryptedContent})}}],[{key:"defaultValues",value:function(e){switch(e){case"encryptionAlgorithm":return new Te;case"encryptedData":return new ne;case"parsedValue":return{};default:throw new Error("Invalid member name for PKCS8ShroudedKeyBag class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"encryptionAlgorithm":return Te.compareWithDefault("algorithmId",r.algorithmId)&&"algorithmParams"in r==!1;case"encryptedData":return r.isEqual(e.defaultValues(t));case"parsedValue":return r instanceof Object&&0===Object.keys(r).length;default:throw new Error("Invalid member name for PKCS8ShroudedKeyBag class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[Te.schema(e.encryptionAlgorithm||{names:{blockName:"encryptionAlgorithm"}}),new Ke({value:[new ne({name:e.encryptedData||"encryptedData"}),new ne({idBlock:{isConstructed:!0},name:e.encryptedData||"encryptedData"})]})]})}}]),e}(),ht=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.type=t(r,"type",e.defaultValues("type")),this.value=t(r,"value",e.defaultValues("value")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{utcTimeName:"utcTimeName",generalTimeName:"generalTimeName"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for TIME");"utcTimeName"in r.result&&(this.type=0,this.value=r.result.utcTimeName.toDate()),"generalTimeName"in r.result&&(this.type=1,this.value=r.result.generalTimeName.toDate())}},{key:"toSchema",value:function(){var e={};return 0===this.type&&(e=new xe({valueDate:this.value})),1===this.type&&(e=new Oe({valueDate:this.value})),e}},{key:"toJSON",value:function(){return{type:this.type,value:this.value}}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return 0;case"value":return new Date(0,0,0);default:throw new Error("Invalid member name for Time class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t(e,"names",{});return new Ke({optional:r,value:[new xe({name:a.utcTimeName||""}),new Oe({name:a.generalTimeName||""})]})}}]),e}(),mt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.attributes=t(r,"attributes",e.defaultValues("attributes")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{attributes:"attributes"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for SubjectDirectoryAttributes");this.attributes=Array.from(r.result.attributes,function(e){return new Me({schema:e})})}},{key:"toSchema",value:function(){return new ee({value:Array.from(this.attributes,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{attributes:Array.from(this.attributes,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"attributes":return[];default:throw new Error("Invalid member name for SubjectDirectoryAttributes class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new Ue({name:e.attributes||"",value:Me.schema()})]})}}]),e}(),ft=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),"notBefore"in r&&(this.notBefore=t(r,"notBefore",e.defaultValues("notBefore"))),"notAfter"in r&&(this.notAfter=t(r,"notAfter",e.defaultValues("notAfter"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{notBefore:"notBefore",notAfter:"notAfter"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PrivateKeyUsagePeriod");if("notBefore"in r.result){var a=new Oe;a.fromBuffer(r.result.notBefore.valueBlock.valueHex),this.notBefore=a.toDate()}if("notAfter"in r.result){var n=new Oe({valueHex:r.result.notAfter.valueBlock.valueHex});n.fromBuffer(r.result.notAfter.valueBlock.valueHex),this.notAfter=n.toDate()}}},{key:"toSchema",value:function(){var e=[];return"notBefore"in this&&e.push(new G({idBlock:{tagClass:3,tagNumber:0},valueHex:new Oe({valueDate:this.notBefore}).valueBlock.valueHex})),"notAfter"in this&&e.push(new G({idBlock:{tagClass:3,tagNumber:1},valueHex:new Oe({valueDate:this.notAfter}).valueBlock.valueHex})),new ee({value:e})}},{key:"toJSON",value:function(){var e={};return"notBefore"in this&&(e.notBefore=this.notBefore),"notAfter"in this&&(e.notAfter=this.notAfter),e}}],[{key:"defaultValues",value:function(e){switch(e){case"notBefore":case"notAfter":return new Date;default:throw new Error("Invalid member name for PrivateKeyUsagePeriod class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new G({name:e.notBefore||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new G({name:e.notAfter||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}}]),e}(),vt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.cA=t(r,"cA",!1),"pathLenConstraint"in r&&(this.pathLenConstraint=t(r,"pathLenConstraint",0)),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{cA:"cA",pathLenConstraint:"pathLenConstraint"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for BasicConstraints");"cA"in r.result&&(this.cA=r.result.cA.valueBlock.value),"pathLenConstraint"in r.result&&(r.result.pathLenConstraint.valueBlock.isHexOnly?this.pathLenConstraint=r.result.pathLenConstraint:this.pathLenConstraint=r.result.pathLenConstraint.valueBlock.valueDec)}},{key:"toSchema",value:function(){var t=[];return this.cA!==e.defaultValues("cA")&&t.push(new Y({value:this.cA})),"pathLenConstraint"in this&&(this.pathLenConstraint instanceof ue?t.push(this.pathLenConstraint):t.push(new ue({value:this.pathLenConstraint}))),new ee({value:t})}},{key:"toJSON",value:function(){var t={};return this.cA!==e.defaultValues("cA")&&(t.cA=this.cA),"pathLenConstraint"in this&&(this.pathLenConstraint instanceof ue?t.pathLenConstraint=this.pathLenConstraint.toJSON():t.pathLenConstraint=this.pathLenConstraint),t}}],[{key:"defaultValues",value:function(e){switch(e){case"cA":return!1;default:throw new Error("Invalid member name for BasicConstraints class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new Y({optional:!0,name:e.cA||""}),new ue({optional:!0,name:e.pathLenConstraint||""})]})}}]),e}(),dt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),"distributionPoint"in r&&(this.distributionPoint=t(r,"distributionPoint",e.defaultValues("distributionPoint"))),this.onlyContainsUserCerts=t(r,"onlyContainsUserCerts",e.defaultValues("onlyContainsUserCerts")),this.onlyContainsCACerts=t(r,"onlyContainsCACerts",e.defaultValues("onlyContainsCACerts")),"onlySomeReasons"in r&&(this.onlySomeReasons=t(r,"onlySomeReasons",e.defaultValues("onlySomeReasons"))),this.indirectCRL=t(r,"indirectCRL",e.defaultValues("indirectCRL")),this.onlyContainsAttributeCerts=t(r,"onlyContainsAttributeCerts",e.defaultValues("onlyContainsAttributeCerts")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{distributionPoint:"distributionPoint",distributionPointNames:"distributionPointNames",onlyContainsUserCerts:"onlyContainsUserCerts",onlyContainsCACerts:"onlyContainsCACerts",onlySomeReasons:"onlySomeReasons",indirectCRL:"indirectCRL",onlyContainsAttributeCerts:"onlyContainsAttributeCerts"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for IssuingDistributionPoint");if("distributionPoint"in r.result)switch(!0){case 0===r.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=Array.from(r.result.distributionPointNames,function(e){return new tt({schema:e})});break;case 1===r.result.distributionPoint.idBlock.tagNumber:r.result.distributionPoint.idBlock.tagClass=1,r.result.distributionPoint.idBlock.tagNumber=16,this.distributionPoint=new et({schema:r.result.distributionPoint});break;default:throw new Error("Unknown tagNumber for distributionPoint: {$asn1.result.distributionPoint.idBlock.tagNumber}")}if("onlyContainsUserCerts"in r.result){var a=new Uint8Array(r.result.onlyContainsUserCerts.valueBlock.valueHex);this.onlyContainsUserCerts=0!==a[0]}if("onlyContainsCACerts"in r.result){var n=new Uint8Array(r.result.onlyContainsCACerts.valueBlock.valueHex);this.onlyContainsCACerts=0!==n[0]}if("onlySomeReasons"in r.result){var i=new Uint8Array(r.result.onlySomeReasons.valueBlock.valueHex);this.onlySomeReasons=i[0]}if("indirectCRL"in r.result){var s=new Uint8Array(r.result.indirectCRL.valueBlock.valueHex);this.indirectCRL=0!==s[0]}if("onlyContainsAttributeCerts"in r.result){var o=new Uint8Array(r.result.onlyContainsAttributeCerts.valueBlock.valueHex);this.onlyContainsAttributeCerts=0!==o[0]}}},{key:"toSchema",value:function(){var t=[];if("distributionPoint"in this){var r=void 0;this.distributionPoint instanceof Array?r=new z({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,function(e){return e.toSchema()})}):((r=this.distributionPoint.toSchema()).idBlock.tagClass=3,r.idBlock.tagNumber=1),t.push(r)}if(this.onlyContainsUserCerts!==e.defaultValues("onlyContainsUserCerts")&&t.push(new G({idBlock:{tagClass:3,tagNumber:1},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsCACerts!==e.defaultValues("onlyContainsCACerts")&&t.push(new G({idBlock:{tagClass:3,tagNumber:2},valueHex:new Uint8Array([255]).buffer})),"onlySomeReasons"in this){var a=new ArrayBuffer(1);new Uint8Array(a)[0]=this.onlySomeReasons,t.push(new G({idBlock:{tagClass:3,tagNumber:3},valueHex:a}))}return this.indirectCRL!==e.defaultValues("indirectCRL")&&t.push(new G({idBlock:{tagClass:3,tagNumber:4},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsAttributeCerts!==e.defaultValues("onlyContainsAttributeCerts")&&t.push(new G({idBlock:{tagClass:3,tagNumber:5},valueHex:new Uint8Array([255]).buffer})),new ee({value:t})}},{key:"toJSON",value:function(){var t={};return"distributionPoint"in this&&(this.distributionPoint instanceof Array?t.distributionPoint=Array.from(this.distributionPoint,function(e){return e.toJSON()}):t.distributionPoint=this.distributionPoint.toJSON()),this.onlyContainsUserCerts!==e.defaultValues("onlyContainsUserCerts")&&(t.onlyContainsUserCerts=this.onlyContainsUserCerts),this.onlyContainsCACerts!==e.defaultValues("onlyContainsCACerts")&&(t.onlyContainsCACerts=this.onlyContainsCACerts),"onlySomeReasons"in this&&(t.onlySomeReasons=this.onlySomeReasons),this.indirectCRL!==e.defaultValues("indirectCRL")&&(t.indirectCRL=this.indirectCRL),this.onlyContainsAttributeCerts!==e.defaultValues("onlyContainsAttributeCerts")&&(t.onlyContainsAttributeCerts=this.onlyContainsAttributeCerts),t}}],[{key:"defaultValues",value:function(e){switch(e){case"distributionPoint":return[];case"onlyContainsUserCerts":case"onlyContainsCACerts":return!1;case"onlySomeReasons":return 0;case"indirectCRL":case"onlyContainsAttributeCerts":return!1;default:throw new Error("Invalid member name for IssuingDistributionPoint class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ke({value:[new z({name:e.distributionPoint||"",idBlock:{tagClass:3,tagNumber:0},value:[new Ue({name:e.distributionPointNames||"",value:tt.schema()})]}),new z({name:e.distributionPoint||"",idBlock:{tagClass:3,tagNumber:1},value:et.schema().valueBlock.value})]})]}),new G({name:e.onlyContainsUserCerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new G({name:e.onlyContainsCACerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new G({name:e.onlySomeReasons||"",optional:!0,idBlock:{tagClass:3,tagNumber:3}}),new G({name:e.indirectCRL||"",optional:!0,idBlock:{tagClass:3,tagNumber:4}}),new G({name:e.onlyContainsAttributeCerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:5}})]})}}]),e}(),gt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.names=t(r,"names",e.defaultValues("names")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for GeneralNames");this.names=Array.from(r.result.names,function(e){return new tt({schema:e})})}},{key:"toSchema",value:function(){return new ee({value:Array.from(this.names,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{names:Array.from(this.names,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"names":return[];default:throw new Error("Invalid member name for GeneralNames class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({value:[new Ue({name:e.blockName||"names",value:tt.schema()})]})}}]),e}(),yt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.base=t(r,"base",e.defaultValues("base")),this.minimum=t(r,"minimum",e.defaultValues("minimum")),"maximum"in r&&(this.maximum=t(r,"maximum",e.defaultValues("maximum"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{base:{names:{blockName:"base"}},minimum:"minimum",maximum:"maximum"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for ");this.base=new tt({schema:r.result.base}),"minimum"in r.result&&(r.result.minimum.valueBlock.isHexOnly?this.minimum=r.result.minimum:this.minimum=r.result.minimum.valueBlock.valueDec),"maximum"in r.result&&(r.result.maximum.valueBlock.isHexOnly?this.maximum=r.result.maximum:this.maximum=r.result.maximum.valueBlock.valueDec)}},{key:"toSchema",value:function(){var e=[];if(e.push(this.base.toSchema()),0!==this.minimum){var t=0;t=this.minimum instanceof ue?this.minimum:new ue({value:this.minimum}),e.push(new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if("maximum"in this){var r=0;r=this.maximum instanceof ue?this.maximum:new ue({value:this.maximum}),e.push(new z({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[r]}))}return new ee({value:e})}},{key:"toJSON",value:function(){var e={base:this.base.toJSON()};return 0!==this.minimum&&("number"==typeof this.minimum?e.minimum=this.minimum:e.minimum=this.minimum.toJSON()),"maximum"in this&&("number"==typeof this.maximum?e.maximum=this.maximum:e.maximum=this.maximum.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"base":return new tt;case"minimum":case"maximum":return 0;default:throw new Error("Invalid member name for GeneralSubtree class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[tt.schema(e.base||{}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ue({name:e.minimum||""})]}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new ue({name:e.maximum||""})]})]})}}]),e}(),pt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),"permittedSubtrees"in r&&(this.permittedSubtrees=t(r,"permittedSubtrees",e.defaultValues("permittedSubtrees"))),"excludedSubtrees"in r&&(this.excludedSubtrees=t(r,"excludedSubtrees",e.defaultValues("excludedSubtrees"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{permittedSubtrees:"permittedSubtrees",excludedSubtrees:"excludedSubtrees"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for NameConstraints");"permittedSubtrees"in r.result&&(this.permittedSubtrees=Array.from(r.result.permittedSubtrees,function(e){return new yt({schema:e})})),"excludedSubtrees"in r.result&&(this.excludedSubtrees=Array.from(r.result.excludedSubtrees,function(e){return new yt({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return"permittedSubtrees"in this&&e.push(new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ee({value:Array.from(this.permittedSubtrees,function(e){return e.toSchema()})})]})),"excludedSubtrees"in this&&e.push(new z({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new ee({value:Array.from(this.excludedSubtrees,function(e){return e.toSchema()})})]})),new ee({value:e})}},{key:"toJSON",value:function(){var e={};return"permittedSubtrees"in this&&(e.permittedSubtrees=Array.from(this.permittedSubtrees,function(e){return e.toJSON()})),"excludedSubtrees"in this&&(e.excludedSubtrees=Array.from(this.excludedSubtrees,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"permittedSubtrees":case"excludedSubtrees":return[];default:throw new Error("Invalid member name for NameConstraints class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ue({name:e.permittedSubtrees||"",value:yt.schema()})]}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Ue({name:e.excludedSubtrees||"",value:yt.schema()})]})]})}}]),e}(),kt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),"distributionPoint"in r&&(this.distributionPoint=t(r,"distributionPoint",e.defaultValues("distributionPoint"))),"reasons"in r&&(this.reasons=t(r,"reasons",e.defaultValues("reasons"))),"cRLIssuer"in r&&(this.cRLIssuer=t(r,"cRLIssuer",e.defaultValues("cRLIssuer"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{distributionPoint:"distributionPoint",distributionPointNames:"distributionPointNames",reasons:"reasons",cRLIssuer:"cRLIssuer",cRLIssuerNames:"cRLIssuerNames"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for DistributionPoint");"distributionPoint"in r.result&&(0===r.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=Array.from(r.result.distributionPointNames,function(e){return new tt({schema:e})})),1===r.result.distributionPoint.idBlock.tagNumber&&(r.result.distributionPoint.idBlock.tagClass=1,r.result.distributionPoint.idBlock.tagNumber=16,this.distributionPoint=new et({schema:r.result.distributionPoint}))),"reasons"in r.result&&(this.reasons=new se({valueHex:r.result.reasons.valueBlock.valueHex})),"cRLIssuer"in r.result&&(this.cRLIssuer=Array.from(r.result.cRLIssuerNames,function(e){return new tt({schema:e})}))}},{key:"toSchema",value:function(){var e=[];if("distributionPoint"in this){var t=void 0;t=new z(this.distributionPoint instanceof Array?{idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,function(e){return e.toSchema()})}:{idBlock:{tagClass:3,tagNumber:1},value:[this.distributionPoint.toSchema()]}),e.push(new z({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}return"reasons"in this&&e.push(new G({idBlock:{tagClass:3,tagNumber:1},valueHex:this.reasons.valueBlock.valueHex})),"cRLIssuer"in this&&e.push(new z({idBlock:{tagClass:3,tagNumber:2},value:Array.from(this.cRLIssuer,function(e){return e.toSchema()})})),new ee({value:e})}},{key:"toJSON",value:function(){var e={};return"distributionPoint"in this&&(this.distributionPoint instanceof Array?e.distributionPoint=Array.from(this.distributionPoint,function(e){return e.toJSON()}):e.distributionPoint=this.distributionPoint.toJSON()),"reasons"in this&&(e.reasons=this.reasons.toJSON()),"cRLIssuer"in this&&(e.cRLIssuer=Array.from(this.cRLIssuer,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"distributionPoint":return[];case"reasons":return new se;case"cRLIssuer":return[];default:throw new Error("Invalid member name for DistributionPoint class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ke({value:[new z({name:e.distributionPoint||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ue({name:e.distributionPointNames||"",value:tt.schema()})]}),new z({name:e.distributionPoint||"",optional:!0,idBlock:{tagClass:3,tagNumber:1},value:et.schema().valueBlock.value})]})]}),new G({name:e.reasons||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new z({name:e.cRLIssuer||"",optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[new Ue({name:e.cRLIssuerNames||"",value:tt.schema()})]})]})}}]),e}(),bt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.distributionPoints=t(r,"distributionPoints",e.defaultValues("distributionPoints")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{distributionPoints:"distributionPoints"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CRLDistributionPoints");this.distributionPoints=Array.from(r.result.distributionPoints,function(e){return new kt({schema:e})})}},{key:"toSchema",value:function(){return new ee({value:Array.from(this.distributionPoints,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{distributionPoints:Array.from(this.distributionPoints,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"distributionPoints":return[];default:throw new Error("Invalid member name for CRLDistributionPoints class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new Ue({name:e.distributionPoints||"",value:kt.schema()})]})}}]),e}(),wt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.policyQualifierId=t(r,"policyQualifierId",e.defaultValues("policyQualifierId")),this.qualifier=t(r,"qualifier",e.defaultValues("qualifier")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{policyQualifierId:"policyQualifierId",qualifier:"qualifier"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PolicyQualifierInfo");this.policyQualifierId=r.result.policyQualifierId.valueBlock.toString(),this.qualifier=r.result.qualifier}},{key:"toSchema",value:function(){return new ee({value:[new me({value:this.policyQualifierId}),this.qualifier]})}},{key:"toJSON",value:function(){return{policyQualifierId:this.policyQualifierId,qualifier:this.qualifier.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"policyQualifierId":return"";case"qualifier":return new He;default:throw new Error("Invalid member name for PolicyQualifierInfo class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new me({name:e.policyQualifierId||""}),new He({name:e.qualifier||""})]})}}]),e}(),Ct=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.policyIdentifier=t(r,"policyIdentifier",e.defaultValues("policyIdentifier")),"policyQualifiers"in r&&(this.policyQualifiers=t(r,"policyQualifiers",e.defaultValues("policyQualifiers"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{policyIdentifier:"policyIdentifier",policyQualifiers:"policyQualifiers"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PolicyInformation");this.policyIdentifier=r.result.policyIdentifier.valueBlock.toString(),"policyQualifiers"in r.result&&(this.policyQualifiers=Array.from(r.result.policyQualifiers,function(e){return new wt({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new me({value:this.policyIdentifier})),"policyQualifiers"in this&&e.push(new ee({value:Array.from(this.policyQualifiers,function(e){return e.toSchema()})})),new ee({value:e})}},{key:"toJSON",value:function(){var e={policyIdentifier:this.policyIdentifier};return"policyQualifiers"in this&&(e.policyQualifiers=Array.from(this.policyQualifiers,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"policyIdentifier":return"";case"policyQualifiers":return[];default:throw new Error("Invalid member name for PolicyInformation class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new me({name:e.policyIdentifier||""}),new ee({optional:!0,value:[new Ue({name:e.policyQualifiers||"",value:wt.schema()})]})]})}}]),e}(),St=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.certificatePolicies=t(r,"certificatePolicies",e.defaultValues("certificatePolicies")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{certificatePolicies:"certificatePolicies"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CertificatePolicies");this.certificatePolicies=Array.from(r.result.certificatePolicies,function(e){return new Ct({schema:e})})}},{key:"toSchema",value:function(){return new ee({value:Array.from(this.certificatePolicies,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{certificatePolicies:Array.from(this.certificatePolicies,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"certificatePolicies":return[];default:throw new Error("Invalid member name for CertificatePolicies class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new Ue({name:e.certificatePolicies||"",value:Ct.schema()})]})}}]),e}(),At=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.issuerDomainPolicy=t(r,"issuerDomainPolicy",e.defaultValues("issuerDomainPolicy")),this.subjectDomainPolicy=t(r,"subjectDomainPolicy",e.defaultValues("subjectDomainPolicy")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{issuerDomainPolicy:"issuerDomainPolicy",subjectDomainPolicy:"subjectDomainPolicy"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PolicyMapping");this.issuerDomainPolicy=r.result.issuerDomainPolicy.valueBlock.toString(),this.subjectDomainPolicy=r.result.subjectDomainPolicy.valueBlock.toString()}},{key:"toSchema",value:function(){return new ee({value:[new me({value:this.issuerDomainPolicy}),new me({value:this.subjectDomainPolicy})]})}},{key:"toJSON",value:function(){return{issuerDomainPolicy:this.issuerDomainPolicy,subjectDomainPolicy:this.subjectDomainPolicy}}}],[{key:"defaultValues",value:function(e){switch(e){case"issuerDomainPolicy":case"subjectDomainPolicy":return"";default:throw new Error("Invalid member name for PolicyMapping class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new me({name:e.issuerDomainPolicy||""}),new me({name:e.subjectDomainPolicy||""})]})}}]),e}(),It=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.mappings=t(r,"mappings",e.defaultValues("mappings")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{mappings:"mappings"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PolicyMappings");this.mappings=Array.from(r.result.mappings,function(e){return new At({schema:e})})}},{key:"toSchema",value:function(){return new ee({value:Array.from(this.mappings,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{mappings:Array.from(this.mappings,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"mappings":return[];default:throw new Error("Invalid member name for PolicyMappings class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new Ue({name:e.mappings||"",value:At.schema()})]})}}]),e}(),Bt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),"keyIdentifier"in r&&(this.keyIdentifier=t(r,"keyIdentifier",e.defaultValues("keyIdentifier"))),"authorityCertIssuer"in r&&(this.authorityCertIssuer=t(r,"authorityCertIssuer",e.defaultValues("authorityCertIssuer"))),"authorityCertSerialNumber"in r&&(this.authorityCertSerialNumber=t(r,"authorityCertSerialNumber",e.defaultValues("authorityCertSerialNumber"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{keyIdentifier:"keyIdentifier",authorityCertIssuer:"authorityCertIssuer",authorityCertSerialNumber:"authorityCertSerialNumber"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for AuthorityKeyIdentifier");"keyIdentifier"in r.result&&(r.result.keyIdentifier.idBlock.tagClass=1,r.result.keyIdentifier.idBlock.tagNumber=4,this.keyIdentifier=r.result.keyIdentifier),"authorityCertIssuer"in r.result&&(this.authorityCertIssuer=Array.from(r.result.authorityCertIssuer,function(e){return new tt({schema:e})})),"authorityCertSerialNumber"in r.result&&(r.result.authorityCertSerialNumber.idBlock.tagClass=1,r.result.authorityCertSerialNumber.idBlock.tagNumber=2,this.authorityCertSerialNumber=r.result.authorityCertSerialNumber)}},{key:"toSchema",value:function(){var e=[];if("keyIdentifier"in this){var t=this.keyIdentifier;t.idBlock.tagClass=3,t.idBlock.tagNumber=0,e.push(t)}if("authorityCertIssuer"in this&&e.push(new z({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new ee({value:Array.from(this.authorityCertIssuer,function(e){return e.toSchema()})})]})),"authorityCertSerialNumber"in this){var r=this.authorityCertSerialNumber;r.idBlock.tagClass=3,r.idBlock.tagNumber=2,e.push(r)}return new ee({value:e})}},{key:"toJSON",value:function(){var e={};return"keyIdentifier"in this&&(e.keyIdentifier=this.keyIdentifier.toJSON()),"authorityCertIssuer"in this&&(e.authorityCertIssuer=Array.from(this.authorityCertIssuer,function(e){return e.toJSON()})),"authorityCertSerialNumber"in this&&(e.authorityCertSerialNumber=this.authorityCertSerialNumber.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"keyIdentifier":return new ne;case"authorityCertIssuer":return[];case"authorityCertSerialNumber":return new ue;default:throw new Error("Invalid member name for AuthorityKeyIdentifier class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new G({name:e.keyIdentifier||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Ue({name:e.authorityCertIssuer||"",value:tt.schema()})]}),new G({name:e.authorityCertSerialNumber||"",optional:!0,idBlock:{tagClass:3,tagNumber:2}})]})}}]),e}(),Nt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),"requireExplicitPolicy"in r&&(this.requireExplicitPolicy=t(r,"requireExplicitPolicy",e.defaultValues("requireExplicitPolicy"))),"inhibitPolicyMapping"in r&&(this.inhibitPolicyMapping=t(r,"inhibitPolicyMapping",e.defaultValues("inhibitPolicyMapping"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{requireExplicitPolicy:"requireExplicitPolicy",inhibitPolicyMapping:"inhibitPolicyMapping"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PolicyConstraints");if("requireExplicitPolicy"in r.result){var a=r.result.requireExplicitPolicy;a.idBlock.tagClass=1,a.idBlock.tagNumber=2;var n=g(a.toBER(!1));this.requireExplicitPolicy=n.result.valueBlock.valueDec}if("inhibitPolicyMapping"in r.result){var i=r.result.inhibitPolicyMapping;i.idBlock.tagClass=1,i.idBlock.tagNumber=2;var s=g(i.toBER(!1));this.inhibitPolicyMapping=s.result.valueBlock.valueDec}}},{key:"toSchema",value:function(){var e=[];if("requireExplicitPolicy"in this){var t=new ue({value:this.requireExplicitPolicy});t.idBlock.tagClass=3,t.idBlock.tagNumber=0,e.push(t)}if("inhibitPolicyMapping"in this){var r=new ue({value:this.inhibitPolicyMapping});r.idBlock.tagClass=3,r.idBlock.tagNumber=1,e.push(r)}return new ee({value:e})}},{key:"toJSON",value:function(){var e={};return"requireExplicitPolicy"in this&&(e.requireExplicitPolicy=this.requireExplicitPolicy),"inhibitPolicyMapping"in this&&(e.inhibitPolicyMapping=this.inhibitPolicyMapping),e}}],[{key:"defaultValues",value:function(e){switch(e){case"requireExplicitPolicy":case"inhibitPolicyMapping":return 0;default:throw new Error("Invalid member name for PolicyConstraints class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new G({name:e.requireExplicitPolicy||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new G({name:e.inhibitPolicyMapping||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}}]),e}(),Pt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.keyPurposes=t(r,"keyPurposes",e.defaultValues("keyPurposes")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{keyPurposes:"keyPurposes"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for ExtKeyUsage");this.keyPurposes=Array.from(r.result.keyPurposes,function(e){return e.valueBlock.toString()})}},{key:"toSchema",value:function(){return new ee({value:Array.from(this.keyPurposes,function(e){return new me({value:e})})})}},{key:"toJSON",value:function(){return{keyPurposes:Array.from(this.keyPurposes)}}}],[{key:"defaultValues",value:function(e){switch(e){case"keyPurposes":return[];default:throw new Error("Invalid member name for ExtKeyUsage class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new Ue({name:e.keyPurposes||"",value:new me})]})}}]),e}(),Et=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.accessDescriptions=t(r,"accessDescriptions",e.defaultValues("accessDescriptions")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{accessDescriptions:"accessDescriptions"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for InfoAccess");this.accessDescriptions=Array.from(r.result.accessDescriptions,function(e){return new rt({schema:e})})}},{key:"toSchema",value:function(){return new ee({value:Array.from(this.accessDescriptions,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{accessDescriptions:Array.from(this.accessDescriptions,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"accessDescriptions":return[];default:throw new Error("Invalid member name for InfoAccess class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new Ue({name:e.accessDescriptions||"",value:rt.schema()})]})}}]),e}(),xt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.extnID=t(r,"extnID",e.defaultValues("extnID")),this.critical=t(r,"critical",e.defaultValues("critical")),this.extnValue="extnValue"in r?new ne({valueHex:r.extnValue}):e.defaultValues("extnValue"),"parsedValue"in r&&(this.parsedValue=t(r,"parsedValue",e.defaultValues("parsedValue"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{extnID:"extnID",critical:"critical",extnValue:"extnValue"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for EXTENSION");if(this.extnID=r.result.extnID.valueBlock.toString(),"critical"in r.result&&(this.critical=r.result.critical.valueBlock.value),this.extnValue=r.result.extnValue,-1!==(r=g(this.extnValue.valueBlock.valueHex)).offset)switch(this.extnID){case"2.5.29.9":this.parsedValue=new mt({schema:r.result});break;case"2.5.29.14":case"2.5.29.15":this.parsedValue=r.result;break;case"2.5.29.16":this.parsedValue=new ft({schema:r.result});break;case"2.5.29.17":case"2.5.29.18":this.parsedValue=new nt({schema:r.result});break;case"2.5.29.19":this.parsedValue=new vt({schema:r.result});break;case"2.5.29.20":case"2.5.29.27":case"2.5.29.21":case"2.5.29.24":this.parsedValue=r.result;break;case"2.5.29.28":this.parsedValue=new dt({schema:r.result});break;case"2.5.29.29":this.parsedValue=new gt({schema:r.result});break;case"2.5.29.30":this.parsedValue=new pt({schema:r.result});break;case"2.5.29.31":case"2.5.29.46":this.parsedValue=new bt({schema:r.result});break;case"2.5.29.32":this.parsedValue=new St({schema:r.result});break;case"2.5.29.33":this.parsedValue=new It({schema:r.result});break;case"2.5.29.35":this.parsedValue=new Bt({schema:r.result});break;case"2.5.29.36":this.parsedValue=new Nt({schema:r.result});break;case"2.5.29.37":this.parsedValue=new Pt({schema:r.result});break;case"2.5.29.54":this.parsedValue=r.result;break;case"1.3.6.1.5.5.7.1.1":case"1.3.6.1.5.5.7.1.11":this.parsedValue=new Et({schema:r.result})}}},{key:"toSchema",value:function(){var t=[];return t.push(new me({value:this.extnID})),this.critical!==e.defaultValues("critical")&&t.push(new Y({value:this.critical})),t.push(this.extnValue),new ee({value:t})}},{key:"toJSON",value:function(){var t={extnID:this.extnID,extnValue:this.extnValue.toJSON()};return this.critical!==e.defaultValues("critical")&&(t.critical=this.critical),"parsedValue"in this&&(t.parsedValue=this.parsedValue.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"extnID":return"";case"critical":return!1;case"extnValue":return new ne;case"parsedValue":return{};default:throw new Error("Invalid member name for Extension class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new me({name:e.extnID||""}),new Y({name:e.critical||"",optional:!0}),new ne({name:e.extnValue||""})]})}}]),e}(),Ot=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.extensions=t(r,"extensions",e.defaultValues("extensions")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{extensions:"extensions"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for EXTENSIONS");this.extensions=Array.from(r.result.extensions,function(e){return new xt({schema:e})})}},{key:"toSchema",value:function(){return new ee({value:Array.from(this.extensions,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{extensions:Array.from(this.extensions,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"extensions":return[];default:throw new Error("Invalid member name for Extensions class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t(e,"names",{});return new ee({optional:r,name:a.blockName||"",value:[new Ue({name:a.extensions||"",value:xt.schema(a.extension||{})})]})}}]),e}(),Vt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.tbs=t(r,"tbs",e.defaultValues("tbs")),this.version=t(r,"version",e.defaultValues("version")),this.serialNumber=t(r,"serialNumber",e.defaultValues("serialNumber")),this.signature=t(r,"signature",e.defaultValues("signature")),this.issuer=t(r,"issuer",e.defaultValues("issuer")),this.notBefore=t(r,"notBefore",e.defaultValues("notBefore")),this.notAfter=t(r,"notAfter",e.defaultValues("notAfter")),this.subject=t(r,"subject",e.defaultValues("subject")),this.subjectPublicKeyInfo=t(r,"subjectPublicKeyInfo",e.defaultValues("subjectPublicKeyInfo")),"issuerUniqueID"in r&&(this.issuerUniqueID=t(r,"issuerUniqueID",e.defaultValues("issuerUniqueID"))),"subjectUniqueID"in r&&(this.subjectUniqueID=t(r,"subjectUniqueID",e.defaultValues("subjectUniqueID"))),"extensions"in r&&(this.extensions=t(r,"extensions",e.defaultValues("extensions"))),this.signatureAlgorithm=t(r,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signatureValue=t(r,"signatureValue",e.defaultValues("signatureValue")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{tbsCertificate:{names:{extensions:{names:{extensions:"tbsCertificate.extensions"}}}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CERT");this.tbs=r.result.tbsCertificate.valueBeforeDecode,"tbsCertificate.version"in r.result&&(this.version=r.result["tbsCertificate.version"].valueBlock.valueDec),this.serialNumber=r.result["tbsCertificate.serialNumber"],this.signature=new Te({schema:r.result["tbsCertificate.signature"]}),this.issuer=new et({schema:r.result["tbsCertificate.issuer"]}),this.notBefore=new ht({schema:r.result["tbsCertificate.notBefore"]}),this.notAfter=new ht({schema:r.result["tbsCertificate.notAfter"]}),this.subject=new et({schema:r.result["tbsCertificate.subject"]}),this.subjectPublicKeyInfo=new Fe({schema:r.result["tbsCertificate.subjectPublicKeyInfo"]}),"tbsCertificate.issuerUniqueID"in r.result&&(this.issuerUniqueID=r.result["tbsCertificate.issuerUniqueID"].valueBlock.valueHex),"tbsCertificate.subjectUniqueID"in r.result&&(this.issuerUniqueID=r.result["tbsCertificate.subjectUniqueID"].valueBlock.valueHex),"tbsCertificate.extensions"in r.result&&(this.extensions=Array.from(r.result["tbsCertificate.extensions"],function(e){return new xt({schema:e})})),this.signatureAlgorithm=new Te({schema:r.result.signatureAlgorithm}),this.signatureValue=r.result.signatureValue}},{key:"encodeTBS",value:function(){var t=[];return"version"in this&&this.version!==e.defaultValues("version")&&t.push(new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ue({value:this.version})]})),t.push(this.serialNumber),t.push(this.signature.toSchema()),t.push(this.issuer.toSchema()),t.push(new ee({value:[this.notBefore.toSchema(),this.notAfter.toSchema()]})),t.push(this.subject.toSchema()),t.push(this.subjectPublicKeyInfo.toSchema()),"issuerUniqueID"in this&&t.push(new G({optional:!0,idBlock:{tagClass:3,tagNumber:1},valueHex:this.issuerUniqueID})),"subjectUniqueID"in this&&t.push(new G({optional:!0,idBlock:{tagClass:3,tagNumber:2},valueHex:this.subjectUniqueID})),"subjectUniqueID"in this&&t.push(new G({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[this.extensions.toSchema()]})),"extensions"in this&&t.push(new z({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[new ee({value:Array.from(this.extensions,function(e){return e.toSchema()})})]})),new ee({value:t})}},{key:"toSchema",value:function(){var t={};if(!1===(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){if(0===this.tbs.length)return e.schema().value[0];t=g(this.tbs).result}else t=this.encodeTBS();return new ee({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}},{key:"toJSON",value:function(){var t={tbs:r(this.tbs,0,this.tbs.byteLength),serialNumber:this.serialNumber.toJSON(),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),notBefore:this.notBefore.toJSON(),notAfter:this.notAfter.toJSON(),subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return"version"in this&&this.version!==e.defaultValues("version")&&(t.version=this.version),"issuerUniqueID"in this&&(t.issuerUniqueID=r(this.issuerUniqueID,0,this.issuerUniqueID.byteLength)),"subjectUniqueID"in this&&(t.subjectUniqueID=r(this.subjectUniqueID,0,this.subjectUniqueID.byteLength)),"extensions"in this&&(t.extensions=Array.from(this.extensions,function(e){return e.toJSON()})),t}},{key:"getPublicKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=b();if(void 0===t)return Promise.reject("Unable to create WebCrypto object");if(null===e){e={};var r=P(this.signatureAlgorithm);if(""===r)return Promise.reject("Unsupported signature algorithm: "+this.signatureAlgorithm.algorithmId);var a=N(this.subjectPublicKeyInfo.algorithm.algorithmId);if("name"in a==!1)return Promise.reject("Unsupported public key algorithm: "+this.subjectPublicKeyInfo.algorithm.algorithmId);if(e.algorithm=S(a.name,"importkey"),"hash"in e.algorithm.algorithm&&(e.algorithm.algorithm.hash.name=r),"ECDSA"===a.name){var n=!1;if("algorithmParams"in this.subjectPublicKeyInfo.algorithm==!0&&"idBlock"in this.subjectPublicKeyInfo.algorithm.algorithmParams&&1===this.subjectPublicKeyInfo.algorithm.algorithmParams.idBlock.tagClass&&6===this.subjectPublicKeyInfo.algorithm.algorithmParams.idBlock.tagNumber&&(n=!0),!1===n)return Promise.reject("Incorrect type for ECDSA public key parameters");var i=N(this.subjectPublicKeyInfo.algorithm.algorithmParams.valueBlock.toString());if("name"in i==!1)return Promise.reject("Unsupported named curve algorithm: "+this.subjectPublicKeyInfo.algorithm.algorithmParams.valueBlock.toString());e.algorithm.algorithm.namedCurve=i.name}}var s=this.subjectPublicKeyInfo.toSchema().toBER(!1),o=new Uint8Array(s);return t.importKey("spki",o,e.algorithm.algorithm,!0,e.algorithm.usages)}},{key:"getKeyHash",value:function(){var e=b();return void 0===e?Promise.reject("Unable to create WebCrypto object"):e.digest({name:"sha-1"},new Uint8Array(this.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex))}},{key:"sign",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1";if(""===C({name:r}))return Promise.reject("Unsupported hash algorithm: "+r);var a=S(e.algorithm.name,"sign");switch(a.algorithm.hash.name=r,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.signature.algorithmId=C(a.algorithm),this.signatureAlgorithm.algorithmId=this.signature.algorithmId;break;case"RSA-PSS":switch(r.toUpperCase()){case"SHA-256":a.algorithm.saltLength=32;break;case"SHA-384":a.algorithm.saltLength=48;break;case"SHA-512":a.algorithm.saltLength=64}var n={};if("SHA-1"!==r.toUpperCase()){var i=C({name:r});if(""===i)return Promise.reject("Unsupported hash algorithm: "+r);n.hashAlgorithm=new Te({algorithmId:i,algorithmParams:new re}),n.maskGenAlgorithm=new Te({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:n.hashAlgorithm.toSchema()})}20!==a.algorithm.saltLength&&(n.saltLength=a.algorithm.saltLength);var s=new Je(n);this.signature=new Te({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:s.toSchema()}),this.signatureAlgorithm=this.signature;break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}this.tbs=this.encodeTBS().toBER(!1);var o=b();return void 0===o?Promise.reject("Unable to create WebCrypto object"):o.sign(a.algorithm,e,new Uint8Array(this.tbs)).then(function(e){"ECDSA"===a.algorithm.name&&(e=A(e)),t.signatureValue=new se({valueHex:e})},function(e){return Promise.reject("Signing error: "+e)})}},{key:"verify",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=Promise.resolve(),a={},n=this.signatureValue,i=this.tbs;if(null!==t?a=t.subjectPublicKeyInfo:this.issuer.isEqual(this.subject)&&(a=this.subjectPublicKeyInfo),a instanceof Fe==!1)return Promise.reject("Please provide issuer certificate as a parameter");var s=b();if(void 0===s)return Promise.reject("Unable to create WebCrypto object");var o=P(this.signatureAlgorithm);return""===o?Promise.reject("Unsupported signature algorithm: "+this.signatureAlgorithm.algorithmId):(r=r.then(function(){var t=void 0,r=N(t="1.2.840.113549.1.1.10"===e.signatureAlgorithm.algorithmId?e.signatureAlgorithm.algorithmId:a.algorithm.algorithmId);if("name"in r==!1)return Promise.reject("Unsupported public key algorithm: "+t);var n=S(r.name,"importkey");if("hash"in n.algorithm&&(n.algorithm.hash.name=o),"ECDSA"===r.name){var i=!1;if("algorithmParams"in a.algorithm==!0&&"idBlock"in a.algorithm.algorithmParams&&1===a.algorithm.algorithmParams.idBlock.tagClass&&6===a.algorithm.algorithmParams.idBlock.tagNumber&&(i=!0),!1===i)return Promise.reject("Incorrect type for ECDSA public key parameters");var u=N(a.algorithm.algorithmParams.valueBlock.toString());if("name"in u==!1)return Promise.reject("Unsupported named curve algorithm: "+a.algorithm.algorithmParams.valueBlock.toString());n.algorithm.namedCurve=u.name}var l=a.toSchema().toBER(!1),c=new Uint8Array(l);return s.importKey("spki",c,n.algorithm,!0,n.usages)}),r=r.then(function(t){var r=S(t.algorithm.name,"verify");"hash"in r.algorithm&&(r.algorithm.hash.name=o);var a=n.valueBlock.valueHex;if("ECDSA"===t.algorithm.name&&(a=B(g(a).result)),"RSA-PSS"===t.algorithm.name){var u=void 0;try{u=new Je({schema:e.signatureAlgorithm.algorithmParams})}catch(e){return Promise.reject(e)}r.algorithm.saltLength="saltLength"in u?u.saltLength:20;var l="SHA-1";if("hashAlgorithm"in u){var c=N(u.hashAlgorithm.algorithmId);if("name"in c==!1)return Promise.reject("Unrecognized hash algorithm: "+u.hashAlgorithm.algorithmId);l=c.name}r.algorithm.hash.name=l}return s.verify(r.algorithm,t,new Uint8Array(a),new Uint8Array(i))}))}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 0;case"serialNumber":return new ue;case"signature":return new Te;case"issuer":return new et;case"notBefore":case"notAfter":return new ht;case"subject":return new et;case"subjectPublicKeyInfo":return new Fe;case"issuerUniqueID":case"subjectUniqueID":return new ArrayBuffer(0);case"extensions":return[];case"signatureAlgorithm":return new Te;case"signatureValue":return new se;default:throw new Error("Invalid member name for Certificate class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[j(e.tbsCertificate),Te.schema(e.signatureAlgorithm||{names:{blockName:"signatureAlgorithm"}}),new se({name:e.signatureValue||"signatureValue"})]})}}]),e}(),_t=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.certId=t(r,"certId",e.defaultValues("certId")),this.certValue=t(r,"certValue",e.defaultValues("certValue")),"parsedValue"in r&&(this.parsedValue=t(r,"parsedValue",e.defaultValues("parsedValue"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{id:"certId",value:"certValue"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CertBag");switch(this.certId=r.result.certId.valueBlock.toString(),this.certValue=r.result.certValue,this.certId){case"1.2.840.113549.1.9.22.1":var a=g(this.certValue.valueBlock.valueHex);this.parsedValue=new Vt({schema:a.result});break;case"1.2.840.113549.1.9.22.2":default:throw new Error('Incorrect "certId" value in CertBag: '+this.certId)}}},{key:"toSchema",value:function(){return"parsedValue"in this&&(this.certId="1.2.840.113549.1.9.22.1",this.certValue=new ne({valueHex:this.parsedValue.toSchema().toBER(!1)})),new ee({value:[new me({value:this.certId}),new z({idBlock:{tagClass:3,tagNumber:0},value:["toSchema"in this.certValue?this.certValue.toSchema():this.certValue]})]})}},{key:"toJSON",value:function(){return{certId:this.certId,certValue:this.certValue.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"certId":return"";case"certValue":return new He;case"parsedValue":return{};default:throw new Error("Invalid member name for CertBag class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"certId":return""===t;case"certValue":return t instanceof He;case"parsedValue":return t instanceof Object&&0===Object.keys(t).length;default:throw new Error("Invalid member name for CertBag class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new me({name:e.id||"id"}),new z({idBlock:{tagClass:3,tagNumber:0},value:[new He({name:e.value||"value"})]})]})}}]),e}(),jt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.userCertificate=t(r,"userCertificate",e.defaultValues("userCertificate")),this.revocationDate=t(r,"revocationDate",e.defaultValues("revocationDate")),"crlEntryExtensions"in r&&(this.crlEntryExtensions=t(r,"crlEntryExtensions",e.defaultValues("crlEntryExtensions"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for REV_CERT");this.userCertificate=r.result.userCertificate,this.revocationDate=new ht({schema:r.result.revocationDate}),"crlEntryExtensions"in r.result&&(this.crlEntryExtensions=new Ot({schema:r.result.crlEntryExtensions}))}},{key:"toSchema",value:function(){var e=[this.userCertificate,this.revocationDate.toSchema()];return"crlEntryExtensions"in this&&e.push(this.crlEntryExtensions.toSchema()),new ee({value:e})}},{key:"toJSON",value:function(){var e={userCertificate:this.userCertificate.toJSON(),revocationDate:this.revocationDate.toJSON};return"crlEntryExtensions"in this&&(e.crlEntryExtensions=this.crlEntryExtensions.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"userCertificate":return new ue;case"revocationDate":return new ht;case"crlEntryExtensions":return new Ot;default:throw new Error("Invalid member name for RevokedCertificate class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new ue({name:e.userCertificate||"userCertificate"}),ht.schema({names:{utcTimeName:e.revocationDate||"revocationDate",generalTimeName:e.revocationDate||"revocationDate"}}),Ot.schema({names:{blockName:e.crlEntryExtensions||"crlEntryExtensions"}},!0)]})}}]),e}(),Dt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.tbs=t(r,"tbs",e.defaultValues("tbs")),this.version=t(r,"version",e.defaultValues("version")),this.signature=t(r,"signature",e.defaultValues("signature")),this.issuer=t(r,"issuer",e.defaultValues("issuer")),this.thisUpdate=t(r,"thisUpdate",e.defaultValues("thisUpdate")),"nextUpdate"in r&&(this.nextUpdate=t(r,"nextUpdate",e.defaultValues("nextUpdate"))),"revokedCertificates"in r&&(this.revokedCertificates=t(r,"revokedCertificates",e.defaultValues("revokedCertificates"))),"crlExtensions"in r&&(this.crlExtensions=t(r,"crlExtensions",e.defaultValues("crlExtensions"))),this.signatureAlgorithm=t(r,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signatureValue=t(r,"signatureValue",e.defaultValues("signatureValue")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CRL");this.tbs=r.result.tbsCertList.valueBeforeDecode,"tbsCertList.version"in r.result&&(this.version=r.result["tbsCertList.version"].valueBlock.valueDec),this.signature=new Te({schema:r.result["tbsCertList.signature"]}),this.issuer=new et({schema:r.result["tbsCertList.issuer"]}),this.thisUpdate=new ht({schema:r.result["tbsCertList.thisUpdate"]}),"tbsCertList.nextUpdate"in r.result&&(this.nextUpdate=new ht({schema:r.result["tbsCertList.nextUpdate"]})),"tbsCertList.revokedCertificates"in r.result&&(this.revokedCertificates=Array.from(r.result["tbsCertList.revokedCertificates"],function(e){return new jt({schema:e})})),"tbsCertList.extensions"in r.result&&(this.crlExtensions=new Ot({schema:r.result["tbsCertList.extensions"]})),this.signatureAlgorithm=new Te({schema:r.result.signatureAlgorithm}),this.signatureValue=r.result.signatureValue}},{key:"encodeTBS",value:function(){var t=[];return this.version!==e.defaultValues("version")&&t.push(new ue({value:this.version})),t.push(this.signature.toSchema()),t.push(this.issuer.toSchema()),t.push(this.thisUpdate.toSchema()),"nextUpdate"in this&&t.push(this.nextUpdate.toSchema()),"revokedCertificates"in this&&t.push(new ee({value:Array.from(this.revokedCertificates,function(e){return e.toSchema()})})),"crlExtensions"in this&&t.push(new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.crlExtensions.toSchema()]})),new ee({value:t})}},{key:"toSchema",value:function(){var t=void 0;if(!1===(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){if(0===this.tbs.length)return e.schema();t=g(this.tbs).result}else t=this.encodeTBS();return new ee({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}},{key:"toJSON",value:function(){var t={tbs:r(this.tbs,0,this.tbs.byteLength),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),thisUpdate:this.thisUpdate.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return this.version!==e.defaultValues("version")&&(t.version=this.version),"nextUpdate"in this&&(t.nextUpdate=this.nextUpdate.toJSON()),"revokedCertificates"in this&&(t.revokedCertificates=Array.from(this.revokedCertificates,function(e){return e.toJSON()})),"crlExtensions"in this&&(t.crlExtensions=this.crlExtensions.toJSON()),t}},{key:"isCertificateRevoked",value:function(e){if(!1===this.issuer.isEqual(e.issuer))return!1;if("revokedCertificates"in this==!1)return!1;var t=!0,r=!1,a=void 0;try{for(var n,i=this.revokedCertificates[Symbol.iterator]();!(t=(n=i.next()).done);t=!0)if(n.value.userCertificate.isEqual(e.serialNumber))return!0}catch(e){r=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw a}}return!1}},{key:"sign",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1";if(void 0===e)return Promise.reject("Need to provide a private key for signing");if(""===C({name:r}))return Promise.reject("Unsupported hash algorithm: "+r);var a=S(e.algorithm.name,"sign");switch(a.algorithm.hash.name=r,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.signature.algorithmId=C(a.algorithm),this.signatureAlgorithm.algorithmId=this.signature.algorithmId;break;case"RSA-PSS":switch(r.toUpperCase()){case"SHA-256":a.algorithm.saltLength=32;break;case"SHA-384":a.algorithm.saltLength=48;break;case"SHA-512":a.algorithm.saltLength=64}var n={};if("SHA-1"!==r.toUpperCase()){var i=C({name:r});if(""===i)return Promise.reject("Unsupported hash algorithm: "+r);n.hashAlgorithm=new Te({algorithmId:i,algorithmParams:new re}),n.maskGenAlgorithm=new Te({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:n.hashAlgorithm.toSchema()})}20!==a.algorithm.saltLength&&(n.saltLength=a.algorithm.saltLength);var s=new Je(n);this.signature=new Te({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:s.toSchema()}),this.signatureAlgorithm=this.signature;break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}this.tbs=this.encodeTBS().toBER(!1);var o=b();return void 0===o?Promise.reject("Unable to create WebCrypto object"):o.sign(a.algorithm,e,new Uint8Array(this.tbs)).then(function(e){"ECDSA"===a.algorithm.name&&(e=A(e)),t.signatureValue=new se({valueHex:e})},function(e){return Promise.reject("Signing error: "+e)})}},{key:"verify",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Promise.resolve(),a=this.signatureValue,n=this.tbs,i=-1;if("issuerCertificate"in t&&(i=t.issuerCertificate.subjectPublicKeyInfo,!1===this.issuer.isEqual(t.issuerCertificate.subject)))return Promise.resolve(!1);if("publicKeyInfo"in t&&(i=t.publicKeyInfo),i instanceof Fe==!1)return Promise.reject("Issuer's certificate must be provided as an input parameter");if("crlExtensions"in this){var s=!0,o=!1,u=void 0;try{for(var l,c=this.crlExtensions.extensions[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var h=l.value;if(h.critical&&"parsedValue"in h==!1)return Promise.resolve(!1)}}catch(e){o=!0,u=e}finally{try{!s&&c.return&&c.return()}finally{if(o)throw u}}}var m=b();if(void 0===m)return Promise.reject("Unable to create WebCrypto object");var f=P(this.signatureAlgorithm);return""===f?Promise.reject("Unsupported signature algorithm: "+this.signatureAlgorithm.algorithmId):(r=r.then(function(){var t=N(e.signature.algorithmId);if("name"in t==="")return Promise.reject("Unsupported public key algorithm: "+e.signature.algorithmId);var r=S(t.name,"importkey");if("hash"in r.algorithm&&(r.algorithm.hash.name=f),"ECDSA"===t.name){var a=!1;if("algorithmParams"in i.algorithm==!0&&"idBlock"in i.algorithm.algorithmParams&&1===i.algorithm.algorithmParams.idBlock.tagClass&&6===i.algorithm.algorithmParams.idBlock.tagNumber&&(a=!0),!1===a)return Promise.reject("Incorrect type for ECDSA public key parameters");var n=N(i.algorithm.algorithmParams.valueBlock.toString());if("name"in n==!1)return Promise.reject("Unsupported named curve algorithm: "+i.algorithm.algorithmParams.valueBlock.toString());r.algorithm.namedCurve=n.name}var s=i.toSchema().toBER(!1),o=new Uint8Array(s);return m.importKey("spki",o,r.algorithm,!0,r.usages)}),r=r.then(function(t){var r=S(t.algorithm.name,"verify");"hash"in r.algorithm&&(r.algorithm.hash.name=f);var i=a.valueBlock.valueHex;if("ECDSA"===t.algorithm.name&&(i=B(g(i).result)),"RSA-PSS"===t.algorithm.name){var s=void 0;try{s=new Je({schema:e.signatureAlgorithm.algorithmParams})}catch(e){return Promise.reject(e)}r.algorithm.saltLength="saltLength"in s?s.saltLength:20;var o="SHA-1";if("hashAlgorithm"in s){var u=N(s.hashAlgorithm.algorithmId);if("name"in u==!1)return Promise.reject("Unrecognized hash algorithm: "+s.hashAlgorithm.algorithmId);o=u.name}r.algorithm.hash.name=o}return m.verify(r.algorithm,t,new Uint8Array(i),new Uint8Array(n))}))}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 1;case"signature":return new Te;case"issuer":return new et;case"thisUpdate":case"nextUpdate":return new ht;case"revokedCertificates":return[];case"crlExtensions":return new Ot;case"signatureAlgorithm":return new Te;case"signatureValue":return new se;default:throw new Error("Invalid member name for CertificateRevocationList class: "+e)}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t(e,"names",{});return new ee({name:r.blockName||"CertificateList",value:[D(e),Te.schema(r.signatureAlgorithm||{names:{blockName:"signatureAlgorithm"}}),new se({name:r.signatureValue||"signatureValue"})]})}}]),e}(),Rt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.crlId=t(r,"crlId",e.defaultValues("crlId")),this.crlValue=t(r,"crlValue",e.defaultValues("crlValue")),"parsedValue"in r&&(this.parsedValue=t(r,"parsedValue",e.defaultValues("parsedValue"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{id:"crlId",value:"crlValue"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CRLBag");switch(this.crlId=r.result.crlId.valueBlock.toString(),this.crlValue=r.result.crlValue,this.crlId){case"1.2.840.113549.1.9.23.1":var a=g(this.certValue.valueBlock.valueHex);this.parsedValue=new Dt({schema:a.result});break;default:throw new Error('Incorrect "crlId" value in CertBag: '+this.crlId)}}},{key:"toSchema",value:function(){return"parsedValue"in this&&(this.certId="1.2.840.113549.1.9.23.1",this.certValue=new ne({valueHex:this.parsedValue.toSchema().toBER(!1)})),new ee({value:[new me({value:this.crlId}),new z({idBlock:{tagClass:3,tagNumber:0},value:[this.crlValue.toSchema()]})]})}},{key:"toJSON",value:function(){return{crlId:this.crlId,crlValue:this.crlValue.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"crlId":return"";case"crlValue":return new He;case"parsedValue":return{};default:throw new Error("Invalid member name for CRLBag class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"crlId":return""===t;case"crlValue":return t instanceof He;case"parsedValue":return t instanceof Object&&0===Object.keys(t).length;default:throw new Error("Invalid member name for CRLBag class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new me({name:e.id||"id"}),new z({idBlock:{tagClass:3,tagNumber:0},value:[new He({name:e.value||"value"})]})]})}}]),e}(),Kt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.secretTypeId=t(r,"secretTypeId",e.defaultValues("secretTypeId")),this.secretValue=t(r,"secretValue",e.defaultValues("secretValue")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{id:"secretTypeId",value:"secretValue"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for SecretBag");this.secretTypeId=r.result.secretTypeId.valueBlock.toString(),this.secretValue=r.result.secretValue}},{key:"toSchema",value:function(){return new ee({value:[new me({value:this.secretTypeId}),new z({idBlock:{tagClass:3,tagNumber:0},value:[this.secretValue.toSchema()]})]})}},{key:"toJSON",value:function(){return{secretTypeId:this.secretTypeId,secretValue:this.secretValue.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"secretTypeId":return"";case"secretValue":return new He;default:throw new Error("Invalid member name for SecretBag class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"secretTypeId":return""===t;case"secretValue":return t instanceof He;default:throw new Error("Invalid member name for SecretBag class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new me({name:e.id||"id"}),new z({idBlock:{tagClass:3,tagNumber:0},value:[new He({name:e.value||"value"})]})]})}}]),e}(),Ht=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.bagId=t(r,"bagId",e.defaultValues("bagId")),this.bagValue=t(r,"bagValue",e.defaultValues("bagValue")),"bagAttributes"in r&&(this.bagAttributes=t(r,"bagAttributes",e.defaultValues("bagAttributes"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{bagId:"bagId",bagValue:"bagValue",bagAttributes:"bagAttributes"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for SafeBag");switch(this.bagId=r.result.bagId.valueBlock.toString(),this.bagId){case"1.2.840.113549.1.12.10.1.1":this.bagValue=new Ze({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.2":this.bagValue=new ct({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.3":this.bagValue=new _t({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.4":this.bagValue=new Rt({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.5":this.bagValue=new Kt({schema:r.result.bagValue});break;case"1.2.840.113549.1.12.10.1.6":this.bagValue=new Ut({schema:r.result.bagValue});break;default:throw new Error('Invalid "bagId" for SafeBag: '+this.bagId)}"bagAttributes"in r.result&&(this.bagAttributes=Array.from(r.result.bagAttributes,function(e){return new Me({schema:e})}))}},{key:"toSchema",value:function(){var e=[new me({value:this.bagId}),new z({idBlock:{tagClass:3,tagNumber:0},value:[this.bagValue.toSchema()]})];return"bagAttributes"in this&&e.push(new te({value:Array.from(this.bagAttributes,function(e){return e.toSchema()})})),new ee({value:e})}},{key:"toJSON",value:function(){var e={bagId:this.bagId,bagValue:this.bagValue.toJSON()};return"bagAttributes"in this&&(e.bagAttributes=Array.from(this.bagAttributes,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"bagId":return"";case"bagValue":return new He;case"bagAttributes":return[];default:throw new Error("Invalid member name for SafeBag class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"bagId":return""===t;case"bagValue":return t instanceof He;case"bagAttributes":return 0===t.length;default:throw new Error("Invalid member name for SafeBag class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new me({name:e.bagId||"bagId"}),new z({idBlock:{tagClass:3,tagNumber:0},value:[new He({name:e.bagValue||"bagValue"})]}),new te({optional:!0,value:[new Ue({name:e.bagAttributes||"bagAttributes",value:Me.schema()})]})]})}}]),e}(),Ut=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.safeBags=t(r,"safeBags",e.defaultValues("safeBags")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{safeBags:"safeBags"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for SafeContents");this.safeBags=Array.from(r.result.safeBags,function(e){return new Ht({schema:e})})}},{key:"toSchema",value:function(){return new ee({value:Array.from(this.safeBags,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{safeBags:Array.from(this.safeBags,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"safeBags":return[];default:throw new Error("Invalid member name for SafeContents class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"safeBags":return 0===t.length;default:throw new Error("Invalid member name for SafeContents class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new Ue({name:e.safeBags||"",value:Ht.schema()})]})}}]),e}(),Lt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.certificates=t(r,"certificates",e.defaultValues("certificates")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CMS_CERTIFICATE_SET");this.certificates=Array.from(r.result.certificates,function(e){return 1===e.idBlock.tagClass?new Vt({schema:e}):e})}},{key:"toSchema",value:function(){return new te({value:Array.from(this.certificates,function(e){return e instanceof Vt?e.toSchema():e})})}},{key:"toJSON",value:function(){return{certificates:Array.from(this.certificates,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"certificates":return[];default:throw new Error("Invalid member name for Attribute class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new te({name:e.blockName||"",value:[new Ue({name:e.certificates||"",value:new Ke({value:[Vt.schema(),new z({idBlock:{tagClass:3,tagNumber:1},value:[new He]}),new z({idBlock:{tagClass:3,tagNumber:2},value:[new He]}),new z({idBlock:{tagClass:3,tagNumber:3},value:[new me,new He]})]})})]})}}]),e}(),Tt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.otherRevInfoFormat=t(r,"otherRevInfoFormat",e.defaultValues("otherRevInfoFormat")),this.otherRevInfo=t(r,"otherRevInfo",e.defaultValues("otherRevInfo")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for OtherRevocationInfoFormat");this.otherRevInfoFormat=r.result.otherRevInfoFormat.valueBlock.toString(),this.otherRevInfo=r.result.otherRevInfo}},{key:"toSchema",value:function(){return new ee({value:[new me({value:this.otherRevInfoFormat}),this.otherRevInfo]})}},{key:"toJSON",value:function(){var e={otherRevInfoFormat:this.otherRevInfoFormat};return this.otherRevInfo instanceof He||(e.otherRevInfo=this.otherRevInfo.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"otherRevInfoFormat":return"";case"otherRevInfo":return new He;default:throw new Error("Invalid member name for OtherRevocationInfoFormat class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new me({name:e.otherRevInfoFormat||"otherRevInfoFormat"}),new He({name:e.otherRevInfo||"otherRevInfo"})]})}}]),e}(),Jt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.crls=t(r,"crls",e.defaultValues("crls")),this.otherRevocationInfos=t(r,"otherRevocationInfos",e.defaultValues("otherRevocationInfos")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{crls:"crls"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CSM_REVOCATION_INFO_CHOICES");var a=!0,n=!1,i=void 0;try{for(var s,o=r.result.crls[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var u=s.value;1===u.idBlock.tagClass?this.crls.push(new Dt({schema:u})):this.otherRevocationInfos.push(new Tt({schema:u}))}}catch(e){n=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}}},{key:"toSchema",value:function(){var e=[];return e.push.apply(e,_toConsumableArray(Array.from(this.crls,function(e){return e.toSchema()}))),e.push.apply(e,_toConsumableArray(Array.from(this.otherRevocationInfos,function(e){var t=e.toSchema();return t.idBlock.tagClass=3,t.idBlock.tagNumber=1,t}))),new te({value:e})}},{key:"toJSON",value:function(){return{crls:Array.from(this.crls,function(e){return e.toJSON()}),otherRevocationInfos:Array.from(this.otherRevocationInfos,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"crls":case"otherRevocationInfos":return[];default:throw new Error("Invalid member name for RevocationInfoChoices class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new te({name:e.blockName||"",value:[new Ue({name:e.crls||"",value:new Ke({value:[Dt.schema(),new z({idBlock:{tagClass:3,tagNumber:1},value:[new me,new He]})]})})]})}}]),e}(),qt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.certs=t(r,"certs",e.defaultValues("certs")),this.crls=t(r,"crls",e.defaultValues("crls")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{certs:"certs",crls:"crls"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for OriginatorInfo");r.result.certs.idBlock.tagClass=1,r.result.certs.idBlock.tagNumber=17,this.certs=new Lt({schema:r.result.certs}),r.result.crls.idBlock.tagClass=1,r.result.crls.idBlock.tagNumber=17,this.crls=new Jt({schema:r.result.crls})}},{key:"toSchema",value:function(){return new ee({value:[new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:this.certs.toSchema().valueBlock.value}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:this.crls.toSchema().valueBlock.value})]})}},{key:"toJSON",value:function(){return{certs:this.certs.toJSON(),crls:this.crls.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"certs":return new Lt;case"crls":return new Jt;default:throw new Error("Invalid member name for OriginatorInfo class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"certs":return 0===t.certificates.length;case"crls":return 0===t.crls.length&&0===t.otherRevocationInfos.length;default:throw new Error("Invalid member name for OriginatorInfo class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new z({name:e.certs||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Lt.schema().valueBlock.value}),new z({name:e.crls||"",optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Jt.schema().valueBlock.value})]})}}]),e}(),Wt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.issuer=t(r,"issuer",e.defaultValues("issuer")),this.serialNumber=t(r,"serialNumber",e.defaultValues("serialNumber")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{issuer:{names:{blockName:"issuer"}},serialNumber:"serialNumber"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for IssuerAndSerialNumber");this.issuer=new et({schema:r.result.issuer}),this.serialNumber=r.result.serialNumber}},{key:"toSchema",value:function(){return new ee({value:[this.issuer.toSchema(),this.serialNumber]})}},{key:"toJSON",value:function(){return{issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"issuer":return new et;case"serialNumber":return new ue;default:throw new Error("Invalid member name for IssuerAndSerialNumber class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[et.schema(e.issuer||{}),new ue({name:e.serialNumber||""})]})}}]),e}(),Ft=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.variant=t(r,"variant",e.defaultValues("variant")),"value"in r&&(this.value=t(r,"value",e.defaultValues("value"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{blockName:"blockName"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RecipientIdentifier");1===r.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new Wt({schema:r.result.blockName})):(this.variant=2,this.value=r.result.blockName.valueBlock.value[0])}},{key:"toSchema",value:function(){switch(this.variant){case 1:return this.value.toSchema();case 2:return new z({idBlock:{tagClass:3,tagNumber:0},value:[this.value]});default:return new He}}},{key:"toJSON",value:function(){var e={variant:this.variant};return 1!==this.variant&&2!==this.variant||(e.value=this.value.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"variant":return-1;case"value":return{};default:throw new Error("Invalid member name for RecipientIdentifier class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"variant":return-1===t;case"values":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for RecipientIdentifier class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new Ke({value:[Wt.schema({names:{blockName:e.blockName||""}}),new z({name:e.blockName||"",idBlock:{tagClass:3,tagNumber:0},value:[new ne]})]})}}]),e}(),Mt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.version=t(r,"version",e.defaultValues("version")),this.rid=t(r,"rid",e.defaultValues("rid")),this.keyEncryptionAlgorithm=t(r,"keyEncryptionAlgorithm",e.defaultValues("keyEncryptionAlgorithm")),this.encryptedKey=t(r,"encryptedKey",e.defaultValues("encryptedKey")),this.recipientCertificate=t(r,"recipientCertificate",e.defaultValues("recipientCertificate")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{version:"version",rid:{names:{blockName:"rid"}},keyEncryptionAlgorithm:{names:{blockName:"keyEncryptionAlgorithm"}},encryptedKey:"encryptedKey"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for KeyTransRecipientInfo");this.version=r.result.version.valueBlock.valueDec,3===r.result.rid.idBlock.tagClass?this.rid=r.result.rid.valueBlock.value[0]:this.rid=new Wt({schema:r.result.rid}),this.keyEncryptionAlgorithm=new Te({schema:r.result.keyEncryptionAlgorithm}),this.encryptedKey=r.result.encryptedKey}},{key:"toSchema",value:function(){var e=[];return this.rid instanceof Wt?(this.version=0,e.push(new ue({value:this.version})),e.push(this.rid.toSchema())):(this.version=2,e.push(new ue({value:this.version})),e.push(new z({idBlock:{tagClass:3,tagNumber:0},value:[this.rid]}))),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new ee({value:e})}},{key:"toJSON",value:function(){return{version:this.version,rid:this.rid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return-1;case"rid":return{};case"keyEncryptionAlgorithm":return new Te;case"encryptedKey":return new ne;case"recipientCertificate":return new Vt;default:throw new Error("Invalid member name for KeyTransRecipientInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues("version");case"rid":return 0===Object.keys(r).length;case"keyEncryptionAlgorithm":case"encryptedKey":return r.isEqual(e.defaultValues(t));case"recipientCertificate":return!1;default:throw new Error("Invalid member name for KeyTransRecipientInfo class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new ue({name:e.version||""}),Ft.schema(e.rid||{}),Te.schema(e.keyEncryptionAlgorithm||{}),new ne({name:e.encryptedKey||""})]})}}]),e}(),Gt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.algorithm=t(r,"algorithm",e.defaultValues("algorithm")),this.publicKey=t(r,"publicKey",e.defaultValues("publicKey")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{algorithm:{names:{blockName:"algorithm"}},publicKey:"publicKey"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for OriginatorPublicKey");this.algorithm=new Te({schema:r.result.algorithm}),this.publicKey=r.result.publicKey}},{key:"toSchema",value:function(){return new ee({value:[this.algorithm.toSchema(),this.publicKey]})}},{key:"toJSON",value:function(){return{algorithm:this.algorithm.toJSON(),publicKey:this.publicKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"algorithm":return new Te;case"publicKey":return new se;default:throw new Error("Invalid member name for OriginatorPublicKey class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"algorithm":case"publicKey":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for OriginatorPublicKey class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[Te.schema(e.algorithm||{}),new se({name:e.publicKey||""})]})}}]),e}(),Qt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.variant=t(r,"variant",e.defaultValues("variant")),"value"in r&&(this.value=t(r,"value",e.defaultValues("value"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{blockName:"blockName"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for OriginatorIdentifierOrKey");1===r.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new Wt({schema:r.result.blockName})):0===r.result.blockName.idBlock.tagNumber?(r.result.blockName.idBlock.tagClass=1,r.result.blockName.idBlock.tagNumber=4,this.variant=2,this.value=r.result.blockName):(r.result.blockName.idBlock.tagClass=1,r.result.blockName.idBlock.tagNumber=16,this.variant=3,this.value=new Gt({schema:r.result.blockName}))}},{key:"toSchema",value:function(){switch(this.variant){case 1:return this.value.toSchema();case 2:return this.value.idBlock.tagClass=3,this.value.idBlock.tagNumber=0,this.value;case 3:var e=this.value.toSchema();return e.idBlock.tagClass=3,e.idBlock.tagNumber=1,e;default:return new He}}},{key:"toJSON",value:function(){var e={variant:this.variant};return 1!==this.variant&&2!==this.variant&&3!==this.variant||(e.value=this.value.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"variant":return-1;case"value":return{};default:throw new Error("Invalid member name for OriginatorIdentifierOrKey class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"variant":return-1===t;case"value":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for OriginatorIdentifierOrKey class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new Ke({value:[Wt.schema({names:{blockName:e.blockName||""}}),new G({idBlock:{tagClass:3,tagNumber:0},name:e.blockName||""}),new z({idBlock:{tagClass:3,tagNumber:1},name:e.blockName||"",value:Gt.schema().valueBlock.value})]})}}]),e}(),zt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.keyAttrId=t(r,"keyAttrId",e.defaultValues("keyAttrId")),"keyAttr"in r&&(this.keyAttr=t(r,"keyAttr",e.defaultValues("keyAttr"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{keyAttrId:"keyAttrId",keyAttr:"keyAttr"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for OtherKeyAttribute");this.keyAttrId=r.result.keyAttrId.valueBlock.toString(),"keyAttr"in r.result&&(this.keyAttr=r.result.keyAttr)}},{key:"toSchema",value:function(){var e=[];return e.push(new me({value:this.keyAttrId})),"keyAttr"in this&&e.push(this.keyAttr.toSchema()),new ee({value:e})}},{key:"toJSON",value:function(){var e={keyAttrId:this.keyAttrId};return"keyAttr"in this&&(e.keyAttr=this.keyAttr.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"keyAttrId":return"";case"keyAttr":return{};default:throw new Error("Invalid member name for OtherKeyAttribute class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"keyAttrId":return""===t;case"keyAttr":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for OtherKeyAttribute class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({optional:e.optional||!0,name:e.blockName||"",value:[new me({name:e.keyAttrId||""}),new He({optional:!0,name:e.keyAttr||""})]})}}]),e}(),Zt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.subjectKeyIdentifier=t(r,"subjectKeyIdentifier",e.defaultValues("subjectKeyIdentifier")),"date"in r&&(this.date=t(r,"date",e.defaultValues("date"))),"other"in r&&(this.other=t(r,"other",e.defaultValues("other"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{subjectKeyIdentifier:"subjectKeyIdentifier",date:"date",other:{names:{blockName:"other"}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RecipientKeyIdentifier");this.subjectKeyIdentifier=r.result.subjectKeyIdentifier,"date"in r.result&&(this.date=r.result.date),"other"in r.result&&(this.other=new zt({schema:r.result.other}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.subjectKeyIdentifier),"date"in this&&e.push(this.date),"other"in this&&e.push(this.other.toSchema()),new ee({value:e})}},{key:"toJSON",value:function(){var e={subjectKeyIdentifier:this.subjectKeyIdentifier.toJSON()};return"date"in this&&(e.date=this.date),"other"in this&&(e.other=this.other.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"subjectKeyIdentifier":return new ne;case"date":return new Oe;case"other":return new zt;default:throw new Error("Invalid member name for RecipientKeyIdentifier class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"subjectKeyIdentifier":return r.isEqual(e.defaultValues("subjectKeyIdentifier"));case"date":return 0===r.year&&0===r.month&&0===r.day&&0===r.hour&&0===r.minute&&0===r.second&&0===r.millisecond;case"other":return""===r.keyAttrId&&"keyAttr"in r==!1;default:throw new Error("Invalid member name for RecipientKeyIdentifier class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new ne({name:e.subjectKeyIdentifier||""}),new Oe({optional:!0,name:e.date||""}),zt.schema(e.other||{})]})}}]),e}(),$t=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.variant=t(r,"variant",e.defaultValues("variant")),this.value=t(r,"value",e.defaultValues("value")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{blockName:"blockName"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for KeyAgreeRecipientIdentifier");1===r.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new Wt({schema:r.result.blockName})):(this.variant=2,r.result.blockName.idBlock.tagClass=1,r.result.blockName.idBlock.tagNumber=16,this.value=new Zt({schema:r.result.blockName}))}},{key:"toSchema",value:function(){switch(this.variant){case 1:return this.value.toSchema();case 2:return new z({idBlock:{tagClass:3,tagNumber:0},value:this.value.toSchema().valueBlock.value});default:return new He}}},{key:"toJSON",value:function(){var e={variant:this.variant};return 1!==this.variant&&2!==this.variant||(e.value=this.value.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"variant":return-1;case"value":return{};default:throw new Error("Invalid member name for KeyAgreeRecipientIdentifier class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"variant":return-1===t;case"value":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for KeyAgreeRecipientIdentifier class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new Ke({value:[Wt.schema(e.issuerAndSerialNumber||{names:{blockName:e.blockName||""}}),new z({name:e.blockName||"",idBlock:{tagClass:3,tagNumber:0},value:Zt.schema(e.rKeyId||{names:{blockName:e.blockName||""}}).valueBlock.value})]})}}]),e}(),Xt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.rid=t(r,"rid",e.defaultValues("rid")),this.encryptedKey=t(r,"encryptedKey",e.defaultValues("encryptedKey")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{rid:{names:{blockName:"rid"}},encryptedKey:"encryptedKey"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RecipientEncryptedKey");this.rid=new $t({schema:r.result.rid}),this.encryptedKey=r.result.encryptedKey}},{key:"toSchema",value:function(){return new ee({value:[this.rid.toSchema(),this.encryptedKey]})}},{key:"toJSON",value:function(){return{rid:this.rid.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"rid":return new $t;case"encryptedKey":return new ne;default:throw new Error("Invalid member name for RecipientEncryptedKey class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"rid":return-1===r.variant&&"value"in r==!1;case"encryptedKey":return r.isEqual(e.defaultValues("encryptedKey"));default:throw new Error("Invalid member name for RecipientEncryptedKey class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[$t.schema(e.rid||{}),new ne({name:e.encryptedKey||""})]})}}]),e}(),Yt=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.encryptedKeys=t(r,"encryptedKeys",e.defaultValues("encryptedKeys")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{RecipientEncryptedKeys:"RecipientEncryptedKeys"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RecipientEncryptedKeys");this.encryptedKeys=Array.from(r.result.RecipientEncryptedKeys,function(e){return new Xt({schema:e})})}},{key:"toSchema",value:function(){return new ee({value:Array.from(this.encryptedKeys,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{encryptedKeys:Array.from(this.encryptedKeys,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"encryptedKeys":return[];default:throw new Error("Invalid member name for RecipientEncryptedKeys class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"encryptedKeys":return 0===t.length;default:throw new Error("Invalid member name for RecipientEncryptedKeys class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new Ue({name:e.RecipientEncryptedKeys||"",value:Xt.schema()})]})}}]),e}(),er=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.version=t(r,"version",e.defaultValues("version")),this.originator=t(r,"originator",e.defaultValues("originator")),"ukm"in r&&(this.ukm=t(r,"ukm",e.defaultValues("ukm"))),this.keyEncryptionAlgorithm=t(r,"keyEncryptionAlgorithm",e.defaultValues("keyEncryptionAlgorithm")),this.recipientEncryptedKeys=t(r,"recipientEncryptedKeys",e.defaultValues("recipientEncryptedKeys")),this.recipientCertificate=t(r,"recipientCertificate",e.defaultValues("recipientCertificate")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{version:"version",originator:{names:{blockName:"originator"}},ukm:"ukm",keyEncryptionAlgorithm:{names:{blockName:"keyEncryptionAlgorithm"}},recipientEncryptedKeys:{names:{blockName:"recipientEncryptedKeys"}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for KeyAgreeRecipientInfo");this.version=r.result.version.valueBlock.valueDec,this.originator=new Qt({schema:r.result.originator}),"ukm"in r.result&&(this.ukm=r.result.ukm),this.keyEncryptionAlgorithm=new Te({schema:r.result.keyEncryptionAlgorithm}),this.recipientEncryptedKeys=new Yt({schema:r.result.recipientEncryptedKeys})}},{key:"toSchema",value:function(){var e=[];return e.push(new ue({value:this.version})),e.push(new z({idBlock:{tagClass:3,tagNumber:0},value:[this.originator.toSchema()]})),"ukm"in this&&e.push(new z({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[this.ukm]})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.recipientEncryptedKeys.toSchema()),new ee({value:e})}},{key:"toJSON",value:function(){var e={version:this.version,originator:this.originator.toJSON()};return"ukm"in this&&(e.ukm=this.ukm.toJSON()),e.keyEncryptionAlgorithm=this.keyEncryptionAlgorithm.toJSON(),e.recipientEncryptedKeys=this.recipientEncryptedKeys.toJSON(),e}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"originator":return new Qt;case"ukm":return new ne;case"keyEncryptionAlgorithm":return new Te;case"recipientEncryptedKeys":return new Yt;case"recipientCertificate":return new Vt;default:throw new Error("Invalid member name for KeyAgreeRecipientInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return 0===r;case"originator":return-1===r.variant&&"value"in r==!1;case"ukm":return r.isEqual(e.defaultValues("ukm"));case"keyEncryptionAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"recipientEncryptedKeys":return 0===r.encryptedKeys.length;case"recipientCertificate":return!1;default:throw new Error("Invalid member name for KeyAgreeRecipientInfo class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new ue({name:e.version||""}),new z({idBlock:{tagClass:3,tagNumber:0},value:[Qt.schema(e.originator||{})]}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new ne({name:e.ukm||""})]}),Te.schema(e.keyEncryptionAlgorithm||{}),Yt.schema(e.recipientEncryptedKeys||{})]})}}]),e}(),tr=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.keyIdentifier=t(r,"keyIdentifier",e.defaultValues("keyIdentifier")),"date"in r&&(this.date=t(r,"date",e.defaultValues("date"))),"other"in r&&(this.other=t(r,"other",e.defaultValues("other"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{keyIdentifier:"keyIdentifier",date:"date",other:{names:{blockName:"other"}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for KEKIdentifier");this.keyIdentifier=r.result.keyIdentifier,"date"in r.result&&(this.date=r.result.date),"other"in r.result&&(this.other=new zt({schema:r.result.other}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.keyIdentifier),"date"in this&&e.push(this.date),"other"in this&&e.push(this.other.toSchema()),new ee({value:e})}},{key:"toJSON",value:function(){var e={keyIdentifier:this.keyIdentifier.toJSON()};return"date"in this&&(e.date=this.date),"other"in this&&(e.other=this.other.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"keyIdentifier":return new ne;case"date":return new Oe;case"other":return new zt;default:throw new Error("Invalid member name for KEKIdentifier class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"keyIdentifier":return r.isEqual(e.defaultValues("keyIdentifier"));case"date":return 0===r.year&&0===r.month&&0===r.day&&0===r.hour&&0===r.minute&&0===r.second&&0===r.millisecond;case"other":return r.compareWithDefault("keyAttrId",r.keyAttrId)&&"keyAttr"in r==!1;default:throw new Error("Invalid member name for KEKIdentifier class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new ne({name:e.keyIdentifier||""}),new Oe({optional:!0,name:e.date||""}),zt.schema(e.other||{})]})}}]),e}(),rr=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.version=t(r,"version",e.defaultValues("version")),this.kekid=t(r,"kekid",e.defaultValues("kekid")),this.keyEncryptionAlgorithm=t(r,"keyEncryptionAlgorithm",e.defaultValues("keyEncryptionAlgorithm")),this.encryptedKey=t(r,"encryptedKey",e.defaultValues("encryptedKey")),this.preDefinedKEK=t(r,"preDefinedKEK",e.defaultValues("preDefinedKEK")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{version:"version",kekid:{names:{blockName:"kekid"}},keyEncryptionAlgorithm:{names:{blockName:"keyEncryptionAlgorithm"}},encryptedKey:"encryptedKey"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for KEKRecipientInfo");this.version=r.result.version.valueBlock.valueDec,this.kekid=new tr({schema:r.result.kekid}),this.keyEncryptionAlgorithm=new Te({schema:r.result.keyEncryptionAlgorithm}),this.encryptedKey=r.result.encryptedKey}},{key:"toSchema",value:function(){return new ee({value:[new ue({value:this.version}),this.kekid.toSchema(),this.keyEncryptionAlgorithm.toSchema(),this.encryptedKey]})}},{key:"toJSON",value:function(){return{version:this.version,kekid:this.originator.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"kekid":return new tr;case"keyEncryptionAlgorithm":return new Te;case"encryptedKey":return new ne;case"preDefinedKEK":return new ArrayBuffer(0);default:throw new Error("Invalid member name for KEKRecipientInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"KEKRecipientInfo":return r===e.defaultValues("version");case"kekid":return r.compareWithDefault("keyIdentifier",r.keyIdentifier)&&"date"in r==!1&&"other"in r==!1;case"keyEncryptionAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"encryptedKey":return r.isEqual(e.defaultValues("encryptedKey"));case"preDefinedKEK":return 0===r.byteLength;default:throw new Error("Invalid member name for KEKRecipientInfo class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new ue({name:e.version||""}),tr.schema(e.kekid||{}),Te.schema(e.keyEncryptionAlgorithm||{}),new ne({name:e.encryptedKey||""})]})}}]),e}(),ar=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.version=t(r,"version",e.defaultValues("version")),"keyDerivationAlgorithm"in r&&(this.keyDerivationAlgorithm=t(r,"keyDerivationAlgorithm",e.defaultValues("keyDerivationAlgorithm"))),this.keyEncryptionAlgorithm=t(r,"keyEncryptionAlgorithm",e.defaultValues("keyEncryptionAlgorithm")),this.encryptedKey=t(r,"encryptedKey",e.defaultValues("encryptedKey")),this.password=t(r,"password",e.defaultValues("password")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{version:"version",keyDerivationAlgorithm:"keyDerivationAlgorithm",keyEncryptionAlgorithm:{names:{blockName:"keyEncryptionAlgorithm"}},encryptedKey:"encryptedKey"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PasswordRecipientinfo");this.version=r.result.version.valueBlock.valueDec,"keyDerivationAlgorithm"in r.result&&(r.result.keyDerivationAlgorithm.idBlock.tagClass=1,r.result.keyDerivationAlgorithm.idBlock.tagNumber=16,this.keyDerivationAlgorithm=new Te({schema:r.result.keyDerivationAlgorithm})),this.keyEncryptionAlgorithm=new Te({schema:r.result.keyEncryptionAlgorithm}),this.encryptedKey=r.result.encryptedKey}},{key:"toSchema",value:function(){var e=[];return e.push(new ue({value:this.version})),"keyDerivationAlgorithm"in this&&e.push(new z({idBlock:{tagClass:3,tagNumber:0},value:this.keyDerivationAlgorithm.toSchema().valueBlock.value})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new ee({value:e})}},{key:"toJSON",value:function(){return{version:this.version,keyDerivationAlgorithm:this.keyDerivationAlgorithm.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return-1;case"keyDerivationAlgorithm":case"keyEncryptionAlgorithm":return new Te;case"encryptedKey":return new ne;case"password":return new ArrayBuffer(0);default:throw new Error("Invalid member name for PasswordRecipientinfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return-1===r;case"keyDerivationAlgorithm":case"keyEncryptionAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"encryptedKey":return r.isEqual(e.defaultValues("encryptedKey"));case"password":return 0===r.byteLength;default:throw new Error("Invalid member name for PasswordRecipientinfo class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new ue({name:e.version||""}),new z({name:e.keyDerivationAlgorithm||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Te.schema().valueBlock.value}),Te.schema(e.keyEncryptionAlgorithm||{}),new ne({name:e.encryptedKey||""})]})}}]),e}(),nr=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.oriType=t(r,"oriType",e.defaultValues("oriType")),this.oriValue=t(r,"oriValue",e.defaultValues("oriValue")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{oriType:"oriType",oriValue:"oriValue"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for OtherRecipientInfo");this.oriType=r.result.oriType.valueBlock.toString(),this.oriValue=r.result.oriValue}},{key:"toSchema",value:function(){return new ee({value:[new me({value:this.oriType}),this.oriValue]})}},{key:"toJSON",value:function(){var t={oriType:this.oriType};return!1===e.compareWithDefault("oriValue",this.oriValue)&&(t.oriValue=this.oriValue.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"oriType":return"";case"oriValue":return{};default:throw new Error("Invalid member name for OtherRecipientInfo class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"oriType":return""===t;case"oriValue":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for OtherRecipientInfo class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new me({name:e.oriType||""}),new He({name:e.oriValue||""})]})}}]),e}(),ir=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.variant=t(r,"variant",e.defaultValues("variant")),"value"in r&&(this.value=t(r,"value",e.defaultValues("value"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{blockName:"blockName"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CMS_RECIPIENT_INFO");if(1===r.result.blockName.idBlock.tagClass)this.variant=1,this.value=new Mt({schema:r.result.blockName});else{var a=r.result.blockName.idBlock.tagNumber;switch(r.result.blockName.idBlock.tagClass=1,r.result.blockName.idBlock.tagNumber=16,a){case 1:this.variant=2,this.value=new er({schema:r.result.blockName});break;case 2:this.variant=3,this.value=new rr({schema:r.result.blockName});break;case 3:this.variant=4,this.value=new ar({schema:r.result.blockName});break;case 4:this.variant=5,this.value=new nr({schema:r.result.blockName});break;default:throw new Error("Incorrect structure of RecipientInfo block")}}}},{key:"toSchema",value:function(){var e=this.value.toSchema();switch(this.variant){case 1:return e;case 2:case 3:case 4:return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.variant-1,e;default:return new He}}},{key:"toJSON",value:function(){var e={variant:this.variant};return this.variant>=1&&this.variant<=4&&(e.value=this.value.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"variant":return-1;case"value":return{};default:throw new Error("Invalid member name for RecipientInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"variant":return r===e.defaultValues(t);case"value":return 0===Object.keys(r).length;default:throw new Error("Invalid member name for RecipientInfo class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new Ke({value:[Mt.schema({names:{blockName:e.blockName||""}}),new z({name:e.blockName||"",idBlock:{tagClass:3,tagNumber:1},value:er.schema().valueBlock.value}),new z({name:e.blockName||"",idBlock:{tagClass:3,tagNumber:2},value:rr.schema().valueBlock.value}),new z({name:e.blockName||"",idBlock:{tagClass:3,tagNumber:3},value:ar.schema().valueBlock.value}),new z({name:e.blockName||"",idBlock:{tagClass:3,tagNumber:4},value:nr.schema().valueBlock.value})]})}}]),e}(),sr=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.hashAlgorithm=t(r,"hashAlgorithm",e.defaultValues("hashAlgorithm")),this.maskGenAlgorithm=t(r,"maskGenAlgorithm",e.defaultValues("maskGenAlgorithm")),this.pSourceAlgorithm=t(r,"pSourceAlgorithm",e.defaultValues("pSourceAlgorithm")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{hashAlgorithm:{names:{blockName:"hashAlgorithm"}},maskGenAlgorithm:{names:{blockName:"maskGenAlgorithm"}},pSourceAlgorithm:{names:{blockName:"pSourceAlgorithm"}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RSAESOAEPParams");"hashAlgorithm"in r.result&&(this.hashAlgorithm=new Te({schema:r.result.hashAlgorithm})),"maskGenAlgorithm"in r.result&&(this.maskGenAlgorithm=new Te({schema:r.result.maskGenAlgorithm})),"pSourceAlgorithm"in r.result&&(this.pSourceAlgorithm=new Te({schema:r.result.pSourceAlgorithm}))}},{key:"toSchema",value:function(){var t=[];return this.hashAlgorithm.isEqual(e.defaultValues("hashAlgorithm"))||t.push(new z({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(e.defaultValues("maskGenAlgorithm"))||t.push(new z({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.pSourceAlgorithm.isEqual(e.defaultValues("pSourceAlgorithm"))||t.push(new z({idBlock:{tagClass:3,tagNumber:2},value:[this.pSourceAlgorithm.toSchema()]})),new ee({value:t})}},{key:"toJSON",value:function(){var t={};return this.hashAlgorithm.isEqual(e.defaultValues("hashAlgorithm"))||(t.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(e.defaultValues("maskGenAlgorithm"))||(t.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.pSourceAlgorithm.isEqual(e.defaultValues("pSourceAlgorithm"))||(t.pSourceAlgorithm=this.pSourceAlgorithm.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"hashAlgorithm":return new Te({algorithmId:"1.3.14.3.2.26",algorithmParams:new re});case"maskGenAlgorithm":return new Te({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new Te({algorithmId:"1.3.14.3.2.26",algorithmParams:new re}).toSchema()});case"pSourceAlgorithm":return new Te({algorithmId:"1.2.840.113549.1.1.9",algorithmParams:new ne({valueHex:new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer})});default:throw new Error("Invalid member name for RSAESOAEPParams class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new z({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[Te.schema(e.hashAlgorithm||{})]}),new z({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[Te.schema(e.maskGenAlgorithm||{})]}),new z({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[Te.schema(e.pSourceAlgorithm||{})]})]})}}]),e}(),or=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.keyInfo=t(r,"keyInfo",e.defaultValues("keyInfo")),"entityUInfo"in r&&(this.entityUInfo=t(r,"entityUInfo",e.defaultValues("entityUInfo"))),this.suppPubInfo=t(r,"suppPubInfo",e.defaultValues("suppPubInfo")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{keyInfo:{names:{blockName:"keyInfo"}},entityUInfo:"entityUInfo",suppPubInfo:"suppPubInfo"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for ECC_CMS_SharedInfo");this.keyInfo=new Te({schema:r.result.keyInfo}),"entityUInfo"in r.result&&(this.entityUInfo=r.result.entityUInfo.valueBlock.value[0]),this.suppPubInfo=r.result.suppPubInfo.valueBlock.value[0]}},{key:"toSchema",value:function(){var e=[];return e.push(this.keyInfo.toSchema()),"entityUInfo"in this&&e.push(new z({idBlock:{tagClass:3,tagNumber:0},value:[this.entityUInfo]})),e.push(new z({idBlock:{tagClass:3,tagNumber:2},value:[this.suppPubInfo]})),new ee({value:e})}},{key:"toJSON",value:function(){var e={keyInfo:this.keyInfo.toJSON()};return"entityUInfo"in this&&(e.entityUInfo=this.entityUInfo.toJSON()),e.suppPubInfo=this.suppPubInfo.toJSON(),e}}],[{key:"defaultValues",value:function(e){switch(e){case"keyInfo":return new Te;case"entityUInfo":case"suppPubInfo":return new ne;default:throw new Error("Invalid member name for ECCCMSSharedInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"keyInfo":case"entityUInfo":case"suppPubInfo":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for ECCCMSSharedInfo class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[Te.schema(e.keyInfo||{}),new z({name:e.entityUInfo||"",idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[new ne]}),new z({name:e.suppPubInfo||"",idBlock:{tagClass:3,tagNumber:2},value:[new ne]})]})}}]),e}(),ur=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.version=t(r,"version",e.defaultValues("version")),"originatorInfo"in r&&(this.originatorInfo=t(r,"originatorInfo",e.defaultValues("originatorInfo"))),this.recipientInfos=t(r,"recipientInfos",e.defaultValues("recipientInfos")),this.encryptedContentInfo=t(r,"encryptedContentInfo",e.defaultValues("encryptedContentInfo")),"unprotectedAttrs"in r&&(this.unprotectedAttrs=t(r,"unprotectedAttrs",e.defaultValues("unprotectedAttrs"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{version:"version",originatorInfo:"originatorInfo",recipientInfos:"recipientInfos",encryptedContentInfo:{names:{blockName:"encryptedContentInfo"}},unprotectedAttrs:"unprotectedAttrs"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CMS_ENVELOPED_DATA");this.version=r.result.version.valueBlock.valueDec,"originatorInfo"in r.result&&(r.result.originatorInfo.idBlock.tagClass=1,r.result.originatorInfo.idBlock.tagNumber=16,this.originatorInfo=new qt({schema:r.result.originatorInfo})),this.recipientInfos=Array.from(r.result.recipientInfos,function(e){return new ir({schema:e})}),this.encryptedContentInfo=new st({schema:r.result.encryptedContentInfo}),"unprotectedAttrs"in r.result&&(this.unprotectedAttrs=Array.from(r.result.unprotectedAttrs,function(e){return new Me({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new ue({value:this.version})),"originatorInfo"in this&&e.push(new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:this.originatorInfo.toSchema().valueBlock.value})),e.push(new te({value:Array.from(this.recipientInfos,function(e){return e.toSchema()})})),e.push(this.encryptedContentInfo.toSchema()),"unprotectedAttrs"in this&&e.push(new z({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,function(e){return e.toSchema()})})),new ee({value:e})}},{key:"toJSON",value:function(){var e={version:this.version};return"originatorInfo"in this&&(e.originatorInfo=this.originatorInfo.toJSON()),e.recipientInfos=Array.from(this.recipientInfos,function(e){return e.toJSON()}),e.encryptedContentInfo=this.encryptedContentInfo.toJSON(),"unprotectedAttrs"in this&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,function(e){return e.toJSON()})),e}},{key:"addRecipientByCertificate",value:function(e,t,r){var a=t||{};if(-1!==e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.113549"))r=1;else{if(-1===e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.10045"))throw new Error("Unknown type of certificate's public key: "+e.subjectPublicKeyInfo.algorithm.algorithmId);r=2}switch("oaepHashAlgorithm"in a==!1&&(a.oaepHashAlgorithm="SHA-512"),"kdfAlgorithm"in a==!1&&(a.kdfAlgorithm="SHA-512"),"kekEncryptionLength"in a==!1&&(a.kekEncryptionLength=256),r){case 1:var n=C({name:"RSA-OAEP"});if(""===n)throw new Error("Can not find OID for OAEP");var i=C({name:a.oaepHashAlgorithm});if(""===i)throw new Error("Unknown OAEP hash algorithm: "+a.oaepHashAlgorithm);var s=new Te({algorithmId:i,algorithmParams:new re}),o=new sr({hashAlgorithm:s,maskGenAlgorithm:new Te({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:s.toSchema()})}),u=new Mt({version:0,rid:new Wt({issuer:e.issuer,serialNumber:e.serialNumber}),keyEncryptionAlgorithm:new Te({algorithmId:n,algorithmParams:o.toSchema()}),recipientCertificate:e});this.recipientInfos.push(new ir({variant:1,value:u}));break;case 2:var l=new Xt({rid:new $t({variant:1,value:new Wt({issuer:e.issuer,serialNumber:e.serialNumber})})}),c=C({name:"AES-KW",length:a.kekEncryptionLength});if(""===c)throw new Error("Unknown length for key encryption algorithm: "+a.kekEncryptionLength);var h=new Te({algorithmId:c,algorithmParams:new re}),m=C({name:"ECDH",kdf:a.kdfAlgorithm});if(""===m)throw new Error("Unknown KDF algorithm: "+a.kdfAlgorithm);var f=new ArrayBuffer(64);w(new Uint8Array(f));var v=new er({version:3,ukm:new ne({valueHex:f}),keyEncryptionAlgorithm:new Te({algorithmId:m,algorithmParams:h.toSchema()}),recipientEncryptedKeys:new Yt({encryptedKeys:[l]}),recipientCertificate:e});this.recipientInfos.push(new ir({variant:2,value:v}));break;default:throw new Error('Unknown "variant" value: '+r)}return!0}},{key:"addRecipientByPreDefinedData",value:function(e,t,r){var a=t||{};if(e instanceof ArrayBuffer==!1)throw new Error('Please pass "preDefinedData" in ArrayBuffer type');if(0===e.byteLength)throw new Error("Pre-defined data could have zero length");if("keyIdentifier"in a==!1){var n=new ArrayBuffer(16);w(new Uint8Array(n)),a.keyIdentifier=n}switch("hmacHashAlgorithm"in a==!1&&(a.hmacHashAlgorithm="SHA-512"),"iterationCount"in a==!1&&(a.iterationCount=2048),"keyEncryptionAlgorithm"in a==!1&&(a.keyEncryptionAlgorithm={name:"AES-KW",length:256}),"keyEncryptionAlgorithmParams"in a==!1&&(a.keyEncryptionAlgorithmParams=new re),r){case 1:var i=C(a.keyEncryptionAlgorithm);if(""===i)throw new Error('Incorrect value for "keyEncryptionAlgorithm"');var s=new rr({version:4,kekid:new tr({keyIdentifier:new ne({valueHex:a.keyIdentifier})}),keyEncryptionAlgorithm:new Te({algorithmId:i,algorithmParams:a.keyEncryptionAlgorithmParams}),preDefinedKEK:e});this.recipientInfos.push(new ir({variant:3,value:s}));break;case 2:var o=C({name:"PBKDF2"});if(""===o)throw new Error("Can not find OID for PBKDF2");var u=new ArrayBuffer(64);w(new Uint8Array(u));var l=C({name:"HMAC",hash:{name:a.hmacHashAlgorithm}});if(""===l)throw new Error('Incorrect value for "hmacHashAlgorithm": '+a.hmacHashAlgorithm);var c=new ot({salt:new ne({valueHex:u}),iterationCount:a.iterationCount,prf:new Te({algorithmId:l,algorithmParams:new re})}),h=C(a.keyEncryptionAlgorithm);if(""===h)throw new Error('Incorrect value for "keyEncryptionAlgorithm"');var m=new ar({version:0,keyDerivationAlgorithm:new Te({algorithmId:o,algorithmParams:c.toSchema()}),keyEncryptionAlgorithm:new Te({algorithmId:h,algorithmParams:a.keyEncryptionAlgorithmParams}),password:e});this.recipientInfos.push(new ir({variant:4,value:m}));break;default:throw new Error('Unknown value for "variant": '+r)}}},{key:"encrypt",value:function(e,t){function r(e){var t=Promise.resolve(),r=void 0,a=void 0,n=void 0,i=void 0,s=void 0;return t=t.then(function(){var t=d.recipientInfos[e].value.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(t instanceof me==!1)return Promise.reject('Incorrect "recipientCertificate" for index '+e);switch(t.valueBlock.toString()){case"1.2.840.10045.3.1.7":n="P-256",i=256;break;case"1.3.132.0.34":n="P-384",i=384;break;case"1.3.132.0.35":n="P-521",i=528;break;default:return Promise.reject("Incorrect curve OID for index "+e)}return n},function(e){return Promise.reject(e)}),t=t.then(function(e){return p.generateKey({name:"ECDH",namedCurve:e},!0,["deriveBits"])},function(e){return Promise.reject(e)}),t=t.then(function(e){return r=e.publicKey,a=e.privateKey,p.exportKey("spki",r)},function(e){return Promise.reject(e)}),t=t.then(function(t){return s=t,d.recipientInfos[e].value.recipientCertificate.getPublicKey({algorithm:{algorithm:{name:"ECDH",namedCurve:n},usages:[]}})},function(e){return Promise.reject(e)}),t=t.then(function(e){return p.deriveBits({name:"ECDH",public:e},a,i)},function(e){return Promise.reject(e)}),t=t.then(function(t){var r=new Te({schema:d.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmParams}),a=N(r.algorithmId);if("name"in a==!1)return Promise.reject("Incorrect OID for key encryption algorithm: "+r.algorithmId);for(var n=a.length,i=new ArrayBuffer(4),s=new Uint8Array(i),o=3;o>=0;o--)s[o]=n,n>>=8;var u=new or({keyInfo:new Te({algorithmId:r.algorithmId,algorithmParams:new re}),entityUInfo:d.recipientInfos[e].value.ukm,suppPubInfo:new ne({valueHex:i})}).toSchema().toBER(!1),l=N(d.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId);return"name"in l==!1?Promise.reject("Incorrect OID for key encryption algorithm: "+d.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId):x(l.kdf,t,a.length,u)},function(e){return Promise.reject(e)}),t=t.then(function(e){return p.importKey("raw",e,{name:"AES-KW"},!0,["wrapKey"])},function(e){return Promise.reject(e)}),t=t.then(function(e){return p.wrapKey("raw",h,e,{name:"AES-KW"})},function(e){return Promise.reject(e)}),t=t.then(function(t){var r=g(s),a=new Qt;a.variant=3,a.value=new Gt({schema:r.result}),"algorithmParams"in a.value.algorithm&&delete a.value.algorithm.algorithmParams,d.recipientInfos[e].value.originator=a,d.recipientInfos[e].value.recipientEncryptedKeys.encryptedKeys[0].encryptedKey=new ne({valueHex:t})},function(e){return Promise.reject(e)})}function a(e){var t=Promise.resolve();return t=t.then(function(){var t=d.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmParams,r=new sr({schema:t}),a=N(r.hashAlgorithm.algorithmId);return"name"in a==!1?Promise.reject("Incorrect OID for hash algorithm: "+r.hashAlgorithm.algorithmId):d.recipientInfos[e].value.recipientCertificate.getPublicKey({algorithm:{algorithm:{name:"RSA-OAEP",hash:{name:a.name}},usages:["encrypt","wrapKey"]}})},function(e){return Promise.reject(e)}),t=t.then(function(e){return p.encrypt(e.algorithm,e,f)},function(e){return Promise.reject(e)}),t=t.then(function(t){d.recipientInfos[e].value.encryptedKey=new ne({valueHex:t})},function(e){return Promise.reject(e)})}function n(e){var t=Promise.resolve(),r=void 0;return t=t.then(function(){return r=N(d.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId),"name"in r==!1?Promise.reject('Incorrect OID for "keyEncryptionAlgorithm": '+d.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId):p.importKey("raw",new Uint8Array(d.recipientInfos[e].value.preDefinedKEK),r,!0,["wrapKey"])},function(e){return Promise.reject(e)}),t=t.then(function(e){return p.wrapKey("raw",h,e,r)},function(e){return Promise.reject(e)}),t=t.then(function(t){d.recipientInfos[e].value.encryptedKey=new ne({valueHex:t})},function(e){return Promise.reject(e)})}function i(e){var t=Promise.resolve(),r=void 0,a=void 0;return t=t.then(function(){if("keyDerivationAlgorithm"in d.recipientInfos[e].value==!1)return Promise.reject('Please append encoded "keyDerivationAlgorithm"');if("algorithmParams"in d.recipientInfos[e].value.keyDerivationAlgorithm==!1)return Promise.reject('Incorrectly encoded "keyDerivationAlgorithm"');try{r=new ot({schema:d.recipientInfos[e].value.keyDerivationAlgorithm.algorithmParams})}catch(e){return Promise.reject('Incorrectly encoded "keyDerivationAlgorithm"')}return Promise.resolve()},function(e){return Promise.reject(e)}),t=t.then(function(){var t=new Uint8Array(d.recipientInfos[e].value.password);return p.importKey("raw",t,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)}),t=t.then(function(t){if("name"in(a=N(d.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId))==!1)return Promise.reject('Incorrect OID for "keyEncryptionAlgorithm": '+d.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId);var n="SHA-1";if("prf"in r){var i=N(r.prf.algorithmId);if("name"in i==!1)return Promise.reject("Incorrect OID for HMAC hash algorithm");n=i.hash.name}var s=new Uint8Array(r.salt.valueBlock.valueHex),o=r.iterationCount;return p.deriveKey({name:"PBKDF2",hash:{name:n},salt:s,iterations:o},t,a,!0,["wrapKey"])},function(e){return Promise.reject(e)}),t=t.then(function(e){return p.wrapKey("raw",h,e,a)},function(e){return Promise.reject(e)}),t=t.then(function(t){d.recipientInfos[e].value.encryptedKey=new ne({valueHex:t})},function(e){return Promise.reject(e)})}var s=this,o=Promise.resolve(),u=new ArrayBuffer(16),l=new Uint8Array(u);w(l);var c=new Uint8Array(t),h=void 0,m=void 0,f=void 0,v=[],d=this,y=C(e);if(""===y)return Promise.reject('Wrong "contentEncryptionAlgorithm" value');var p=b();return void 0===p?Promise.reject("Unable to create WebCrypto object"):(o=o.then(function(){return p.generateKey(e,!0,["encrypt"])}),o=o.then(function(t){return h=t,p.encrypt({name:e.name,iv:l},h,c)},function(e){return Promise.reject(e)}),o=o.then(function(e){return m=e,p.exportKey("raw",h)},function(e){return Promise.reject(e)}).then(function(e){return f=e,!0},function(e){return Promise.reject(e)}),o=o.then(function(){s.version=2,s.encryptedContentInfo=new st({contentType:"1.2.840.113549.1.7.1",contentEncryptionAlgorithm:new Te({algorithmId:y,algorithmParams:new ne({valueHex:u})}),encryptedContent:new ne({valueHex:m})})},function(e){return Promise.reject(e)}),o=o.then(function(){for(var e=0;e<s.recipientInfos.length;e++){var t=Promise.resolve();switch(s.recipientInfos[e].variant){case 1:t=a(e);break;case 2:t=r(e);break;case 3:t=n(e);break;case 4:t=i(e);break;default:return Promise.reject("Uknown recipient type in array with index "+e)}v.push(t)}return Promise.all(v)},function(e){return Promise.reject(e)}))}},{key:"decrypt",value:function(e,t){function r(e){var t=Promise.resolve(),r=void 0,a=void 0,n=void 0,i=void 0;return t=t.then(function(){if("recipientCertificate"in l==!1)return Promise.reject('Parameter "recipientCertificate" is mandatory for "KeyAgreeRecipientInfo"');if("recipientPrivateKey"in l==!1)return Promise.reject('Parameter "recipientPrivateKey" is mandatory for "KeyAgreeRecipientInfo"');var t=l.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(t instanceof me==!1)return Promise.reject('Incorrect "recipientCertificate" for index '+e);switch(n=t.valueBlock.toString()){case"1.2.840.10045.3.1.7":r="P-256",a=256;break;case"1.3.132.0.34":r="P-384",a=384;break;case"1.3.132.0.35":r="P-521",a=528;break;default:return Promise.reject("Incorrect curve OID for index "+e)}return h.importKey("pkcs8",l.recipientPrivateKey,{name:"ECDH",namedCurve:r},!0,["deriveBits"])},function(e){return Promise.reject(e)}),t=t.then(function(t){i=t,"algorithmParams"in c.recipientInfos[e].value.originator.value.algorithm==!1&&(c.recipientInfos[e].value.originator.value.algorithm.algorithmParams=new me({value:n}));var a=c.recipientInfos[e].value.originator.value.toSchema().toBER(!1);return h.importKey("spki",a,{name:"ECDH",namedCurve:r},!0,[])},function(e){return Promise.reject(e)}),t=t.then(function(e){return h.deriveBits({name:"ECDH",public:e},i,a)},function(e){return Promise.reject(e)}),t=t.then(function(t){var r=new Te({schema:c.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmParams}),a=N(r.algorithmId);if("name"in a==!1)return Promise.reject("Incorrect OID for key encryption algorithm: "+r.algorithmId);for(var n=a.length,i=new ArrayBuffer(4),s=new Uint8Array(i),o=3;o>=0;o--)s[o]=n,n>>=8;var u=new or({keyInfo:new Te({algorithmId:r.algorithmId,algorithmParams:new re}),entityUInfo:c.recipientInfos[e].value.ukm,suppPubInfo:new ne({valueHex:i})}).toSchema().toBER(!1),l=N(c.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId);return"name"in l==!1?Promise.reject("Incorrect OID for key encryption algorithm: "+c.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId):x(l.kdf,t,a.length,u)},function(e){return Promise.reject(e)}),t=t.then(function(e){return h.importKey("raw",e,{name:"AES-KW"},!0,["unwrapKey"])},function(e){return Promise.reject(e)}),t=t.then(function(t){var r=N(c.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);return"name"in r==!1?Promise.reject('Incorrect "contentEncryptionAlgorithm": '+c.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId):h.unwrapKey("raw",c.recipientInfos[e].value.recipientEncryptedKeys.encryptedKeys[0].encryptedKey.valueBlock.valueHex,t,{name:"AES-KW"},r,!0,["decrypt"])},function(e){return Promise.reject(e)})}function a(e){var t=Promise.resolve();return t=t.then(function(){if("recipientPrivateKey"in l==!1)return Promise.reject('Parameter "recipientPrivateKey" is mandatory for "KeyTransRecipientInfo"');var t=c.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmParams,r=new sr({schema:t}),a=N(r.hashAlgorithm.algorithmId);return"name"in a==!1?Promise.reject("Incorrect OID for hash algorithm: "+r.hashAlgorithm.algorithmId):h.importKey("pkcs8",l.recipientPrivateKey,{name:"RSA-OAEP",hash:{name:a.name}},!0,["decrypt"])},function(e){return Promise.reject(e)}),t=t.then(function(t){return h.decrypt(t.algorithm,t,c.recipientInfos[e].value.encryptedKey.valueBlock.valueHex)},function(e){return Promise.reject(e)}),t=t.then(function(e){var t=N(c.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);return"name"in t==!1?Promise.reject('Incorrect "contentEncryptionAlgorithm": '+c.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId):h.importKey("raw",e,t,!0,["decrypt"])},function(e){return Promise.reject(e)})}function n(e){var t=Promise.resolve(),r=void 0;return t=t.then(function(){return"preDefinedData"in l==!1?Promise.reject('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"'):(r=N(c.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId),"name"in r==!1?Promise.reject('Incorrect OID for "keyEncryptionAlgorithm": '+c.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId):h.importKey("raw",l.preDefinedData,r,!0,["unwrapKey"]))},function(e){return Promise.reject(e)}),t=t.then(function(t){var a=N(c.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);return"name"in a==!1?Promise.reject('Incorrect "contentEncryptionAlgorithm": '+c.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId):h.unwrapKey("raw",c.recipientInfos[e].value.encryptedKey.valueBlock.valueHex,t,r,a,!0,["decrypt"])},function(e){return Promise.reject(e)})}function i(e){var t=Promise.resolve(),r=void 0,a=void 0;return t=t.then(function(){if("preDefinedData"in l==!1)return Promise.reject('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');if("keyDerivationAlgorithm"in c.recipientInfos[e].value==!1)return Promise.reject('Please append encoded "keyDerivationAlgorithm"');if("algorithmParams"in c.recipientInfos[e].value.keyDerivationAlgorithm==!1)return Promise.reject('Incorrectly encoded "keyDerivationAlgorithm"');try{r=new ot({schema:c.recipientInfos[e].value.keyDerivationAlgorithm.algorithmParams})}catch(e){return Promise.reject('Incorrectly encoded "keyDerivationAlgorithm"')}return h.importKey("raw",l.preDefinedData,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)}),t=t.then(function(t){if("name"in(a=N(c.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId))==!1)return Promise.reject('Incorrect OID for "keyEncryptionAlgorithm": '+c.recipientInfos[e].value.keyEncryptionAlgorithm.algorithmId);var n="SHA-1";if("prf"in r){var i=N(r.prf.algorithmId);if("name"in i==!1)return Promise.reject("Incorrect OID for HMAC hash algorithm");n=i.hash.name}var s=new Uint8Array(r.salt.valueBlock.valueHex),o=r.iterationCount;return h.deriveKey({name:"PBKDF2",hash:{name:n},salt:s,iterations:o},t,a,!0,["unwrapKey"])},function(e){return Promise.reject(e)}),t=t.then(function(t){var r=N(c.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);return"name"in r==!1?Promise.reject('Incorrect "contentEncryptionAlgorithm": '+c.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId):h.unwrapKey("raw",c.recipientInfos[e].value.encryptedKey.valueBlock.valueHex,t,a,r,!0,["decrypt"])},function(e){return Promise.reject(e)})}var o=this,u=Promise.resolve(),l=t||{},c=this;if(e+1>this.recipientInfos.length)return Promise.reject('Maximum value for "index" is: '+(this.recipientInfos.length-1));var h=b();return void 0===h?Promise.reject("Unable to create WebCrypto object"):(u=u.then(function(){var t=Promise.resolve();switch(o.recipientInfos[e].variant){case 1:t=a(e);break;case 2:t=r(e);break;case 3:t=n(e);break;case 4:t=i(e);break;default:return Promise.reject("Uknown recipient type in array with index "+e)}return t},function(e){return Promise.reject(e)}),u=u.then(function(e){var t=N(o.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);if("name"in t==!1)return Promise.reject('Incorrect "contentEncryptionAlgorithm": '+o.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);var r=o.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams.valueBlock.valueHex,a=new Uint8Array(r),n=new ArrayBuffer(0);if(!1===o.encryptedContentInfo.encryptedContent.idBlock.isConstructed)n=o.encryptedContentInfo.encryptedContent.valueBlock.valueHex;else{var i=!0,u=!1,l=void 0;try{for(var c,m=o.encryptedContentInfo.encryptedContent.valueBlock.value[Symbol.iterator]();!(i=(c=m.next()).done);i=!0)n=s(n,c.value.valueBlock.valueHex)}catch(e){u=!0,l=e}finally{try{!i&&m.return&&m.return()}finally{if(u)throw l}}}return h.decrypt({name:t.name,iv:a},e,n)},function(e){return Promise.reject(e)}))}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"originatorInfo":return new qt;case"recipientInfos":return[];case"encryptedContentInfo":return new st;case"unprotectedAttrs":return[];default:throw new Error("Invalid member name for EnvelopedData class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues(t);case"originatorInfo":return 0===r.certs.certificates.length&&0===r.crls.crls.length;case"recipientInfos":case"unprotectedAttrs":return 0===r.length;case"encryptedContentInfo":return st.compareWithDefault("contentType",r.contentType)&&st.compareWithDefault("contentEncryptionAlgorithm",r.contentEncryptionAlgorithm)&&st.compareWithDefault("encryptedContent",r.encryptedContent);default:throw new Error("Invalid member name for EnvelopedData class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new ue({name:e.version||""}),new z({name:e.originatorInfo||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:qt.schema().valueBlock.value}),new te({value:[new Ue({name:e.recipientInfos||"",value:ir.schema()})]}),st.schema(e.encryptedContentInfo||{}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Ue({name:e.unprotectedAttrs||"",value:Me.schema()})]})]})}}]),e}(),lr=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.safeContents=t(r,"safeContents",e.defaultValues("safeContents")),"parsedValue"in r&&(this.parsedValue=t(r,"parsedValue",e.defaultValues("parsedValue"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{contentInfos:"contentInfos"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for AuthenticatedSafe");this.safeContents=Array.from(r.result.contentInfos,function(e){return new it({schema:e})})}},{key:"toSchema",value:function(){return new ee({value:Array.from(this.safeContents,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){return{safeContents:Array.from(this.safeContents,function(e){return e.toJSON()})}}},{key:"parseInternalValues",value:function(e){var t=this;if(e instanceof Object==!1)return Promise.reject('The "parameters" must has "Object" type');if("safeContents"in e==!1)return Promise.reject('Absent mandatory parameter "safeContents"');if(e.safeContents instanceof Array==!1)return Promise.reject('The "parameters.safeContents" must has "Array" type');if(e.safeContents.length!==this.safeContents.length)return Promise.reject('Length of "parameters.safeContents" must be equal to "this.safeContents.length"');var r=Promise.resolve();this.parsedValue={safeContents:[]};var a=!0,n=!1,i=void 0;try{for(var s,o=this.safeContents.entries()[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var u=_slicedToArray(s.value,2),l=u[0],c=u[1];switch(c.contentType){case"1.2.840.113549.1.7.1":if(c.content instanceof ne==!1)return Promise.reject('Wrong type of "this.safeContents[j].content"');var h=g(c.content.valueBlock.valueHex);if(-1===h.offset)return Promise.reject('Error during parsing of ASN.1 data inside "content.content"');this.parsedValue.safeContents.push({privacyMode:0,value:new Ut({schema:h.result})});break;case"1.2.840.113549.1.7.3":var m=function(){var a=new ur({schema:c.content});if("recipientCertificate"in e.safeContents[l]==!1)return{v:Promise.reject('Absent mandatory parameter "recipientCertificate" in "parameters.safeContents[j]"')};var n=e.safeContents[l].recipientCertificate;if("recipientKey"in e.safeContents[l]==!1)return{v:Promise.reject('Absent mandatory parameter "recipientKey" in "parameters.safeContents[j]"')};var i=e.safeContents[l].recipientKey;r=r.then(function(){return a.decrypt(0,{recipientCertificate:n,recipientPrivateKey:i})}),r=r.then(function(e){var r=g(e);return-1===r.offset?Promise.reject("Error during parsing of decrypted data"):(t.parsedValue.safeContents.push({privacyMode:2,value:new Ut({schema:r.result})}),Promise.resolve())})}();if("object"===(void 0===m?"undefined":_typeof(m)))return m.v;break;case"1.2.840.113549.1.7.6":var f=function(){var a=new lt({schema:c.content});if("password"in e.safeContents[l]==!1)return{v:Promise.reject('Absent mandatory parameter "password" in "parameters.safeContents[j]"')};var n=e.safeContents[l].password;r=r.then(function(){return a.decrypt({password:n})},function(e){return Promise.reject(e)}),r=r.then(function(e){var r=g(e);return-1===r.offset?Promise.reject("Error during parsing of decrypted data"):(t.parsedValue.safeContents.push({privacyMode:1,value:new Ut({schema:r.result})}),Promise.resolve())},function(e){return Promise.reject(e)})}();if("object"===(void 0===f?"undefined":_typeof(f)))return f.v;break;default:throw new Error('Unknown "contentType" for AuthenticatedSafe: " '+c.contentType)}}}catch(e){n=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}return r}},{key:"makeInternalValues",value:function(e){var t=this;if("parsedValue"in this==!1)return Promise.reject('Please run "parseValues" first or add "parsedValue" manually');if(this.parsedValue instanceof Object==!1)return Promise.reject('The "this.parsedValue" must has "Object" type');if(this.parsedValue.safeContents instanceof Array==!1)return Promise.reject('The "this.parsedValue.safeContents" must has "Array" type');if(e instanceof Object==!1)return Promise.reject('The "parameters" must has "Object" type');if("safeContents"in e==!1)return Promise.reject('Absent mandatory parameter "safeContents"');if(e.safeContents instanceof Array==!1)return Promise.reject('The "parameters.safeContents" must has "Array" type');if(e.safeContents.length!==this.parsedValue.safeContents.length)return Promise.reject('Length of "parameters.safeContents" must be equal to "this.parsedValue.safeContents"');var r=Promise.resolve();this.safeContents=[];var a=!0,n=!1,i=void 0;try{for(var s,o=this.parsedValue.safeContents.entries()[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var u=_slicedToArray(s.value,2),l=u[0],c=u[1];if("privacyMode"in c==!1)return Promise.reject('The "privacyMode" is a mandatory parameter for "content"');if("value"in c==!1)return Promise.reject('The "value" is a mandatory parameter for "content"');if(c.value instanceof Ut==!1)return Promise.reject('The "content.value" must has "SafeContents" type');switch(c.privacyMode){case 0:!function(){var e=c.value.toSchema().toBER(!1);r=r.then(function(){t.safeContents.push(new it({contentType:"1.2.840.113549.1.7.1",content:new ne({valueHex:e})}))})}();break;case 1:!function(){var a=new lt,n=e.safeContents[l];n.contentToEncrypt=c.value.toSchema().toBER(!1),r=r.then(function(){return a.encrypt(n)},function(e){return Promise.reject(e)}),r=r.then(function(){t.safeContents.push(new it({contentType:"1.2.840.113549.1.7.6",content:a.toSchema()}))},function(e){return Promise.reject(e)})}();break;case 2:var h=function(){var a=new ur,n=c.value.toSchema().toBER(!1);if("encryptingCertificate"in e.safeContents[l]==!1)return{v:Promise.reject('Absent mandatory parameter "encryptingCertificate" in "parameters.safeContents[i]"')};if("encryptionAlgorithm"in e.safeContents[l]==!1)return{v:Promise.reject('Absent mandatory parameter "encryptionAlgorithm" in "parameters.safeContents[i]"')};switch(!0){case"aes-cbc"===e.safeContents[l].encryptionAlgorithm.name.toLowerCase():case"aes-gcm"===e.safeContents[l].encryptionAlgorithm.name.toLowerCase():break;default:return{v:Promise.reject('Incorrect parameter "encryptionAlgorithm" in "parameters.safeContents[i]": '+e.safeContents[l].encryptionAlgorithm)}}switch(!0){case 128===e.safeContents[l].encryptionAlgorithm.length:case 192===e.safeContents[l].encryptionAlgorithm.length:case 256===e.safeContents[l].encryptionAlgorithm.length:break;default:return{v:Promise.reject('Incorrect parameter "encryptionAlgorithm.length" in "parameters.safeContents[i]": '+e.safeContents[l].encryptionAlgorithm.length)}}var i=e.safeContents[l].encryptionAlgorithm;a.addRecipientByCertificate(e.safeContents[l].encryptingCertificate),r=r.then(function(){return a.encrypt(i,n)}),r=r.then(function(){t.safeContents.push(new it({contentType:"1.2.840.113549.1.7.3",content:a.toSchema()}))})}();if("object"===(void 0===h?"undefined":_typeof(h)))return h.v;break;default:return Promise.reject('Incorrect value for "content.privacyMode": '+c.privacyMode)}}}catch(e){n=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}return r.then(function(){return t},function(e){return Promise.reject("Error during parsing: "+e)})}}],[{key:"defaultValues",value:function(e){switch(e){case"safeContents":return[];case"parsedValue":return{};default:throw new Error("Invalid member name for AuthenticatedSafe class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"safeContents":return 0===t.length;case"parsedValue":return t instanceof Object&&0===Object.keys(t).length;default:throw new Error("Invalid member name for AuthenticatedSafe class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new Ue({name:e.contentInfos||"",value:it.schema()})]})}}]),e}(),cr=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.hashAlgorithm=t(r,"hashAlgorithm",e.defaultValues("hashAlgorithm")),this.issuerNameHash=t(r,"issuerNameHash",e.defaultValues("issuerNameHash")),this.issuerKeyHash=t(r,"issuerKeyHash",e.defaultValues("issuerKeyHash")),this.serialNumber=t(r,"serialNumber",e.defaultValues("serialNumber")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{hashAlgorithm:"hashAlgorithm",issuerNameHash:"issuerNameHash",issuerKeyHash:"issuerKeyHash",serialNumber:"serialNumber"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CertID");this.hashAlgorithm=new Te({schema:r.result.hashAlgorithm}),this.issuerNameHash=r.result.issuerNameHash,this.issuerKeyHash=r.result.issuerKeyHash,this.serialNumber=r.result.serialNumber}},{key:"toSchema",value:function(){return new ee({value:[this.hashAlgorithm.toSchema(),this.issuerNameHash,this.issuerKeyHash,this.serialNumber]})}},{key:"toJSON",value:function(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),issuerNameHash:this.issuerNameHash.toJSON(),issuerKeyHash:this.issuerKeyHash.toJSON(),serialNumber:this.serialNumber.toJSON()}}},{key:"isEqual",value:function(e){return!this.hashAlgorithm.algorithmId!==e.hashAlgorithm.algorithmId&&(!1!==l(this.issuerNameHash.valueBlock.valueHex,e.issuerNameHash.valueBlock.valueHex)&&(!1!==l(this.issuerKeyHash.valueBlock.valueHex,e.issuerKeyHash.valueBlock.valueHex)&&!!this.serialNumber.isEqual(e.serialNumber)))}},{key:"createForCertificate",value:function(e,t){var r=this,a=Promise.resolve(),n=void 0,i=b();if(void 0===i)return Promise.reject("Unable to create WebCrypto object");if("hashAlgorithm"in t==!1)return Promise.reject('Parameter "hashAlgorithm" is mandatory for "OCSP_REQUEST.createForCertificate"');var s=C({name:t.hashAlgorithm});return""===s?Promise.reject('Incorrect "hashAlgorithm": '+this.hashAlgorithm):(this.hashAlgorithm=new Te({algorithmId:s,algorithmParams:new re}),"issuerCertificate"in t?(n=t.issuerCertificate,this.serialNumber=e.serialNumber,a=a.then(function(){return i.digest({name:t.hashAlgorithm},n.subject.toSchema().toBER(!1))},function(e){return Promise.reject(e)}),a=a.then(function(e){r.issuerNameHash=new ne({valueHex:e});var a=n.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex;return i.digest({name:t.hashAlgorithm},a)},function(e){return Promise.reject(e)}).then(function(e){r.issuerKeyHash=new ne({valueHex:e})},function(e){return Promise.reject(e)})):Promise.reject('Parameter "issuerCertificate" is mandatory for "OCSP_REQUEST.createForCertificate"'))}}],[{key:"defaultValues",value:function(e){switch(e){case"hashAlgorithm":return new Te;case"issuerNameHash":case"issuerKeyHash":return new ne;case"serialNumber":return new ue;default:throw new Error("Invalid member name for CertID class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"hashAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"issuerNameHash":case"issuerKeyHash":case"serialNumber":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for CertID class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[Te.schema(e.hashAlgorithmObject||{names:{blockName:e.hashAlgorithm||""}}),new ne({name:e.issuerNameHash||""}),new ne({name:e.issuerKeyHash||""}),new ue({name:e.serialNumber||""})]})}}]),e}(),hr=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.certID=t(r,"certID",e.defaultValues("certID")),this.certStatus=t(r,"certStatus",e.defaultValues("certStatus")),this.thisUpdate=t(r,"thisUpdate",e.defaultValues("thisUpdate")),"nextUpdate"in r&&(this.nextUpdate=t(r,"nextUpdate",e.defaultValues("nextUpdate"))),"singleExtensions"in r&&(this.singleExtensions=t(r,"singleExtensions",e.defaultValues("singleExtensions"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{certID:{names:{blockName:"certID"}},certStatus:"certStatus",thisUpdate:"thisUpdate",nextUpdate:"nextUpdate",singleExtensions:{names:{blockName:"singleExtensions"}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for SingleResponse");this.certID=new cr({schema:r.result.certID}),this.certStatus=r.result.certStatus,this.thisUpdate=r.result.thisUpdate.toDate(),"nextUpdate"in r.result&&(this.nextUpdate=r.result.nextUpdate.toDate()),"singleExtensions"in r.result&&(this.singleExtensions=Array.from(r.result.singleExtensions.valueBlock.value,function(e){return new xt({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.certID.toSchema()),e.push(this.certStatus),e.push(new Oe({valueDate:this.thisUpdate})),"nextUpdate"in this&&e.push(new Oe({valueDate:this.nextUpdate})),"singleExtensions"in this&&e.push(new ee({value:Array.from(this.singleExtensions,function(e){return e.toSchema()})})),new ee({value:e})}},{key:"toJSON",value:function(){var e={certID:this.certID.toJSON(),certStatus:this.certStatus.toJSON(),thisUpdate:this.thisUpdate};return"nextUpdate"in this&&(e.nextUpdate=this.nextUpdate),"singleExtensions"in this&&(e.singleExtensions=Array.from(this.singleExtensions,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"certID":return new cr;case"certStatus":return{};case"thisUpdate":case"nextUpdate":return new Date(0,0,0);case"singleExtensions":return[];default:throw new Error("Invalid member name for SingleResponse class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"certID":return cr.compareWithDefault("hashAlgorithm",r.hashAlgorithm)&&cr.compareWithDefault("issuerNameHash",r.issuerNameHash)&&cr.compareWithDefault("issuerKeyHash",r.issuerKeyHash)&&cr.compareWithDefault("serialNumber",r.serialNumber);case"certStatus":return 0===Object.keys(r).length;case"thisUpdate":case"nextUpdate":return r===e.defaultValues(t);default:throw new Error("Invalid member name for SingleResponse class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[cr.schema(e.certID||{}),new Ke({value:[new G({name:e.certStatus||"",idBlock:{tagClass:3,tagNumber:0},lenBlockLength:1}),new z({name:e.certStatus||"",idBlock:{tagClass:3,tagNumber:1},value:[new Oe,new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new le]})]}),new G({name:e.certStatus||"",idBlock:{tagClass:3,tagNumber:2},lenBlock:{length:1}})]}),new Oe({name:e.thisUpdate||""}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Oe({name:e.nextUpdate||""})]}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[Ot.schema(e.singleExtensions||{})]})]})}}]),e}(),mr=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.tbs=t(r,"tbs",e.defaultValues("tbs")),this.responderID=t(r,"responderID",e.defaultValues("responderID")),this.producedAt=t(r,"producedAt",e.defaultValues("producedAt")),this.responses=t(r,"responses",e.defaultValues("responses")),"responseExtensions"in r&&(this.responseExtensions=t(r,"responseExtensions",e.defaultValues("responseExtensions"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for ocsp.ResponseData");this.tbs=r.result.ResponseData.valueBeforeDecode,"ResponseData.version"in r.result&&(this.version=r.result["ResponseData.version"].valueBlock.valueDec),1===r.result["ResponseData.responderID"].idBlock.tagNumber?this.responderID=new et({schema:r.result["ResponseData.responderID"].valueBlock.value[0]}):this.responderID=r.result["ResponseData.responderID"].valueBlock.value[0],this.producedAt=r.result["ResponseData.producedAt"].toDate(),this.responses=Array.from(r.result["ResponseData.responses"],function(e){return new hr({schema:e})}),"ResponseData.responseExtensions"in r.result&&(this.responseExtensions=Array.from(r.result["ResponseData.responseExtensions"].valueBlock.value,function(e){return new xt({schema:e})}))}},{key:"toSchema",value:function(){var t=void 0;if(!1===(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){if(0===this.tbs.length)return e.schema();t=g(this.tbs).result}else{var r=[];"version"in this&&r.push(new z({idBlock:{tagClass:3,tagNumber:0},value:[new ue({value:this.version})]})),this.responderID instanceof et?r.push(new z({idBlock:{tagClass:3,tagNumber:1},value:[this.responderID.toSchema()]})):r.push(new z({idBlock:{tagClass:3,tagNumber:2},value:[this.responderID]})),r.push(new Oe({valueDate:this.producedAt})),r.push(new ee({value:Array.from(this.responses,function(e){return e.toSchema()})})),"responseExtensions"in this&&r.push(new ee({value:Array.from(this.responseExtensions,function(e){return e.toSchema()})})),t=new ee({value:r})}return t}},{key:"toJSON",value:function(){var e={};return"version"in this&&(e.version=this.version),"responderID"in this&&(e.responderID=this.responderID),"producedAt"in this&&(e.producedAt=this.producedAt),"responses"in this&&(e.responses=Array.from(this.responses,function(e){return e.toJSON()})),"responseExtensions"in this&&(e.responseExtensions=Array.from(this.responseExtensions,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"responderID":return{};case"producedAt":return new Date(0,0,0);case"responses":case"responseExtensions":return[];default:throw new Error("Invalid member name for ResponseData class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"tbs":return 0===r.byteLength;case"responderID":return 0===Object.keys(r).length;case"producedAt":return r===e.defaultValues(t);case"responses":case"responseExtensions":return 0===r.length;default:throw new Error("Invalid member name for ResponseData class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"ResponseData",value:[new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ue({name:e.version||"ResponseData.version"})]}),new Ke({value:[new z({name:e.responderID||"ResponseData.responderID",idBlock:{tagClass:3,tagNumber:1},value:[et.schema(e.ResponseDataByName||{names:{blockName:"ResponseData.byName"}})]}),new z({name:e.responderID||"ResponseData.responderID",idBlock:{tagClass:3,tagNumber:2},value:[new ne({name:e.ResponseDataByKey||"ResponseData.byKey"})]})]}),new Oe({name:e.producedAt||"ResponseData.producedAt"}),new ee({value:[new Ue({name:"ResponseData.responses",value:hr.schema(e.response||{})})]}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[Ot.schema(e.extensions||{names:{blockName:"ResponseData.responseExtensions"}})]})]})}}]),e}(),fr=function(e){return void 0!==e&&("function"==typeof e.next&&"function"==typeof e.throw)},vr=function(e){if(void 0===e)return!1;var t=e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName||fr(e))},dr=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.trustedCerts=t(r,"trustedCerts",e.defaultValues("trustedCerts")),this.certs=t(r,"certs",e.defaultValues("certs")),this.crls=t(r,"crls",e.defaultValues("crls")),this.ocsps=t(r,"ocsps",e.defaultValues("ocsps")),this.checkDate=t(r,"checkDate",e.defaultValues("checkDate")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"sort",value:function(){function e(e,t){var r,a,n,i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(r=[],!e.subject.isEqual(e.issuer)){s.next=12;break}return s.prev=2,s.next=5,e.verify();case 5:if(!0!==(a=s.sent)){s.next=8;break}return s.abrupt("return",[t]);case 8:s.next=12;break;case 10:s.prev=10,s.t0=s.catch(2);case 12:n=0;case 13:if(!(n<o.length)){s.next=26;break}return s.prev=14,s.next=17,e.verify(o[n]);case 17:!0===(i=s.sent)&&r.push(n),s.next=23;break;case 21:s.prev=21,s.t1=s.catch(14);case 23:n++,s.next=13;break;case 26:return s.abrupt("return",r.length?r:[-1]);case 27:case"end":return s.stop()}},s[0],this,[[2,10],[14,21]])}function t(r,a){var n,i,u,l,c,h,m,f,v,d;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return i=function(e){for(var t=!0,r=0;r<e.length;r++){for(var a=0;a<e.length;a++)if(a!==r&&e[r]===e[a]){t=!1;break}if(!t)break}return t},n=[],s.next=4,e(r,a);case 4:if(1!==(u=s.sent).length||-1!==u[0]){s.next=7;break}throw new Error("Incorrect result");case 7:if(1!==u.length){s.next=17;break}if(u[0]!==a){s.next=11;break}return n.push(u),s.abrupt("return",n);case 11:return s.next=13,t(o[u[0]],u[0]);case 13:for(l=s.sent,c=0;c<l.length;c++)(h=l[c].slice()).splice(0,0,u[0]),i(h)?n.push(h):n.push(l[c]);s.next=29;break;case 17:m=0;case 18:if(!(m<u.length)){s.next=29;break}if(u[m]!==a){s.next=22;break}return n.push([u[m]]),s.abrupt("continue",26);case 22:return s.next=24,t(o[u[m]],u[m]);case 24:for(f=s.sent,v=0;v<f.length;v++)(d=f[v].slice()).splice(0,0,u[m]),i(d)?n.push(d):n.push(f[v]);case 26:m++,s.next=18;break;case 29:return s.abrupt("return",n);case 30:case"end":return s.stop()}},s[1],this)}function r(e){var t,r,a,n,i,l;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t=[],r=[],a=[],t.push.apply(t,_toConsumableArray(o.filter(function(t){return e.issuer.isEqual(t.subject)}))),0!==t.length){s.next=6;break}return s.abrupt("return",{status:1,statusMessage:"No certificate's issuers"});case 6:if(r.push.apply(r,_toConsumableArray(u.crls.filter(function(t){return t.issuer.isEqual(e.issuer)}))),0!==r.length){s.next=9;break}return s.abrupt("return",{status:1,statusMessage:"No CRLs for specific certificate issuer"});case 9:n=0;case 10:if(!(n<r.length)){s.next=32;break}if(!(r[n].nextUpdate.value<u.checkDate)){s.next=13;break}return s.abrupt("continue",29);case 13:i=0;case 14:if(!(i<t.length)){s.next=29;break}return s.prev=15,s.next=18,r[n].verify({issuerCertificate:t[i]});case 18:if(!(l=s.sent)){s.next=22;break}return a.push({crl:r[n],certificate:t[i]}),s.abrupt("break",29);case 22:s.next=26;break;case 24:s.prev=24,s.t0=s.catch(15);case 26:i++,s.next=14;break;case 29:n++,s.next=10;break;case 32:if(!a.length){s.next=34;break}return s.abrupt("return",{status:0,statusMessage:"",result:a});case 34:return s.abrupt("return",{status:1,statusMessage:"No valid CRLs found"});case 35:case"end":return s.stop()}},s[2],this,[[15,24]])}function a(e,t){var r,a,n;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if("name"in(r=N(e.signatureAlgorithm.algorithmId))!=!1){i.next=3;break}return i.abrupt("return",1);case 3:if("hash"in r!=!1){i.next=5;break}return i.abrupt("return",1);case 5:a=0;case 6:if(!(a<u.ocsps.length)){i.next=17;break}return i.next=9,u.ocsps[a].getCertificateStatus(e,t);case 9:if(!(n=i.sent).isForCertificate){i.next=14;break}if(0!==n.status){i.next=13;break}return i.abrupt("return",0);case 13:return i.abrupt("return",1);case 14:a++,i.next=6;break;case 17:return i.abrupt("return",2);case 18:case"end":return i.stop()}},s[3],this)}function n(e){var t,r,a,n,i,o,u=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t=!1,r=!1,a=!1,n=!1,!("extensions"in e)){s.next=20;break}i=0;case 6:if(!(i<e.extensions.length)){s.next=14;break}if(!0!==e.extensions[i].critical||"parsedValue"in e.extensions[i]!=!1){s.next=9;break}return s.abrupt("return",{result:!1,resultCode:6,resultMessage:"Unable to parse critical certificate extension: "+e.extensions[i].extnID});case 9:"2.5.29.15"===e.extensions[i].extnID&&(a=!0,4==(4&(o=new Uint8Array(e.extensions[i].parsedValue.valueBlock.valueHex))[0])&&(r=!0),2==(2&o[0])&&(n=!0)),"2.5.29.19"===e.extensions[i].extnID&&"cA"in e.extensions[i].parsedValue&&!0===e.extensions[i].parsedValue.cA&&(t=!0);case 11:i++,s.next=6;break;case 14:if(!0!==r||!1!==t){s.next=16;break}return s.abrupt("return",{result:!1,resultCode:3,resultMessage:'Unable to build certificate chain - using "keyCertSign" flag set without BasicConstaints'});case 16:if(!0!==a||!0!==t||!1!==r){s.next=18;break}return s.abrupt("return",{result:!1,resultCode:4,resultMessage:'Unable to build certificate chain - "keyCertSign" flag was not set'});case 18:if(!0!==t||!0!==a||!u||!1!==n){s.next=20;break}return s.abrupt("return",{result:!1,resultCode:5,resultMessage:'Unable to build certificate chain - intermediate certificate must have "cRLSign" key usage flag'});case 20:if(!1!==t){s.next=22;break}return s.abrupt("return",{result:!1,resultCode:7,resultMessage:"Unable to build certificate chain - more than one possible end-user certificate"});case 22:return s.abrupt("return",{result:!0,resultCode:0,resultMessage:""});case 23:case"end":return s.stop()}},s[4],this)}function i(e,t){var i,o,l,c,h,m,f,v,d,g;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:i=0;case 1:if(!(i<e.length)){s.next=7;break}if(!(e[i].notBefore.value>t||e[i].notAfter.value<t)){s.next=4;break}return s.abrupt("return",{result:!1,resultCode:8,resultMessage:"Certificate validity period is out of checking date"});case 4:i++,s.next=1;break;case 7:if(!(e.length<2)){s.next=9;break}return s.abrupt("return",{result:!1,resultCode:9,resultMessage:"Too short certificate path"});case 9:o=e.length-2;case 10:if(!(o>=0)){s.next=17;break}if(!1!==e[o].issuer.isEqual(e[o].subject)){s.next=14;break}if(!1!==e[o].issuer.isEqual(e[o+1].subject)){s.next=14;break}return s.abrupt("return",{result:!1,resultCode:10,resultMessage:"Incorrect name chaining"});case 14:o--,s.next=10;break;case 17:if(0===u.crls.length&&0===u.ocsps.length){s.next=58;break}l=0;case 19:if(!(l<e.length-2)){s.next=58;break}if(c=void 0,h=void 0,0===u.ocsps.length){s.next=32;break}return s.next=25,a(e[l],e[l+1]);case 25:c=s.sent,s.t0=c,s.next=0===s.t0?29:1===s.t0?30:2===s.t0?31:32;break;case 29:return s.abrupt("continue",55);case 30:return s.abrupt("return",{result:!1,resultCode:12,resultMessage:"One of certificates was revoked via OCSP response"});case 31:return s.abrupt("break",32);case 32:if(0===u.crls.length){s.next=53;break}return s.next=35,r(e[l]);case 35:if(!(h=s.sent).status){s.next=38;break}throw{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates: "+h.statusMessage};case 38:m=0;case 39:if(!(m<h.result.length)){s.next=51;break}if(!(f=h.result[m].crl.isCertificateRevoked(e[l]))){s.next=43;break}return s.abrupt("return",{result:!1,resultCode:12,resultMessage:"One of certificates had been revoked"});case 43:return s.next=45,n(h.result[m].certificate,!0);case 45:if(!1!==(v=s.sent).result){s.next=48;break}return s.abrupt("return",{result:!1,resultCode:13,resultMessage:"CRL issuer certificate is not a CA certificate or does not have crlSign flag"});case 48:m++,s.next=39;break;case 51:s.next=55;break;case 53:if(2!==c){s.next=55;break}return s.abrupt("return",{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates"});case 55:l++,s.next=19;break;case 58:d=1;case 59:if(!(d<e.length)){s.next=68;break}return s.next=62,n(e[d]);case 62:if(!1!==(g=s.sent).result){s.next=65;break}return s.abrupt("return",{result:!1,resultCode:14,resultMessage:"One of intermediate certificates is not a CA certificate"});case 65:d++,s.next=59;break;case 68:return s.abrupt("return",{result:!0});case 69:case"end":return s.stop()}},s[5],this)}var s=[e,t,r,a,n,i].map(regeneratorRuntime.mark),o=[],u=this;return R(regeneratorRuntime.mark(function e(){var r,a,n,s,c,h,m,f,v,d,g,y,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o.push.apply(o,_toConsumableArray(u.trustedCerts)),o.push.apply(o,_toConsumableArray(u.certs)),r=0;case 3:if(!(r<o.length)){e.next=18;break}a=0;case 5:if(!(a<o.length)){e.next=15;break}if(r!==a){e.next=8;break}return e.abrupt("continue",12);case 8:if(!l(o[r].tbs,o[a].tbs)){e.next=12;break}return o.splice(a,1),r=0,e.abrupt("break",15);case 12:a++,e.next=5;break;case 15:r++,e.next=3;break;case 18:return n=void 0,s=[o[o.length-1]],e.next=22,t(o[o.length-1],o.length-1);case 22:if(0!==(n=e.sent).length){e.next=25;break}return e.abrupt("return",{result:!1,resultCode:60,resultMessage:"Unable to find certificate path"});case 25:c=0;case 26:if(!(c<n.length)){e.next=48;break}h=!1,m=0;case 29:if(!(m<n[c].length)){e.next=44;break}f=o[n[c][m]],v=0;case 32:if(!(v<u.trustedCerts.length)){e.next=39;break}if(!l(f.tbs,u.trustedCerts[v].tbs)){e.next=36;break}return h=!0,e.abrupt("break",39);case 36:v++,e.next=32;break;case 39:if(!h){e.next=41;break}return e.abrupt("break",44);case 41:m++,e.next=29;break;case 44:h||(n.splice(c,1),c=0);case 45:c++,e.next=26;break;case 48:if(0!==n.length){e.next=50;break}throw{result:!1,resultCode:97,resultMessage:"No valid certificate paths found"};case 50:for(d=n[0].length,g=0,y=0;y<n.length;y++)n[y].length<d&&(d=n[y].length,g=y);for(p=0;p<n[g].length;p++)s.push(o[n[g][p]]);return e.next=56,i(s,u.checkDate);case 56:if(!1!==(n=e.sent).result){e.next=59;break}throw n;case 59:return e.abrupt("return",s);case 60:case"end":return e.stop()}},e,this)}))}},{key:"verify",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(0===this.certs.length)return Promise.reject("Empty certificate array");var r=Promise.resolve(),a=[];a.push("2.5.29.32.0");var n=!1,i=!1,s=!1,o=[],u=[],l=[];"initialPolicySet"in t&&(a=t.initialPolicySet),"initialExplicitPolicy"in t&&(n=t.initialExplicitPolicy),"initialPolicyMappingInhibit"in t&&(i=t.initialPolicyMappingInhibit),"initialInhibitPolicy"in t&&(s=t.initialInhibitPolicy),"initialPermittedSubtreesSet"in t&&(o=t.initialPermittedSubtreesSet),"initialExcludedSubtreesSet"in t&&(u=t.initialExcludedSubtreesSet),"initialRequiredNameForms"in t&&(l=t.initialRequiredNameForms);var c=n,h=i,m=s,f=new Array(3);f[0]=!1,f[1]=!1,f[2]=!1;var v=0,d=0,g=0,y=o,p=u,k=l,b=1;return r=this.sort().then(function(t){e.certs=t}),r=r.then(function(){var t=[];t.push("2.5.29.32.0");for(var r=[],n=new Array(e.certs.length-1),i=0;i<e.certs.length-1;i++)n[i]=!0;r.push(n);for(var s=new Array(e.certs.length-1),o=new Array(e.certs.length-1),u=c?e.certs.length-1:-1,l=e.certs.length-2;l>=0;l--,b++)if("extensions"in e.certs[l]){for(var y=0;y<e.certs[l].extensions.length;y++){if("2.5.29.32"===e.certs[l].extensions[y].extnID){o[l]=e.certs[l].extensions[y].parsedValue;for(var p=0;p<t.length;p++)if("2.5.29.32.0"===t[p]){delete r[p][l];break}for(var k=0;k<e.certs[l].extensions[y].parsedValue.certificatePolicies.length;k++){for(var w=-1,C=0;C<t.length;C++)if(e.certs[l].extensions[y].parsedValue.certificatePolicies[k].policyIdentifier===t[C]){w=C;break}if(-1===w){t.push(e.certs[l].extensions[y].parsedValue.certificatePolicies[k].policyIdentifier);var S=new Array(e.certs.length-1);S[l]=!0,r.push(S)}else r[w][l]=!0}}if("2.5.29.33"===e.certs[l].extensions[y].extnID){if(h)return{result:!1,resultCode:98,resultMessage:"Policy mapping prohibited"};s[l]=e.certs[l].extensions[y].parsedValue}"2.5.29.36"===e.certs[l].extensions[y].extnID&&!1===c&&(0===e.certs[l].extensions[y].parsedValue.requireExplicitPolicy?(c=!0,u=l):!1===f[0]?(f[0]=!0,v=e.certs[l].extensions[y].parsedValue.requireExplicitPolicy):v=v>e.certs[l].extensions[y].parsedValue.requireExplicitPolicy?e.certs[l].extensions[y].parsedValue.requireExplicitPolicy:v,0===e.certs[l].extensions[y].parsedValue.inhibitPolicyMapping?h=!0:!1===f[1]?(f[1]=!0,d=e.certs[l].extensions[y].parsedValue.inhibitPolicyMapping+1):d=d>e.certs[l].extensions[y].parsedValue.inhibitPolicyMapping+1?e.certs[l].extensions[y].parsedValue.inhibitPolicyMapping+1:d),"2.5.29.54"===e.certs[l].extensions[y].extnID&&!1===m&&(0===e.certs[l].extensions[y].parsedValue.valueBlock.valueDec?m=!0:!1===f[2]?(f[2]=!0,g=e.certs[l].extensions[y].parsedValue.valueBlock.valueDec):g=g>e.certs[l].extensions[y].parsedValue.valueBlock.valueDec?e.certs[l].extensions[y].parsedValue.valueBlock.valueDec:g)}if(!0===m){for(var A=-1,I=0;I<t.length;I++)if("2.5.29.32.0"===t[I]){A=I;break}-1!==A&&delete r[0][l]}!1===c&&!0===f[0]&&0===--v&&(c=!0,u=l,f[0]=!1),!1===h&&!0===f[1]&&0===--d&&(h=!0,f[1]=!1),!1===m&&!0===f[2]&&0===--g&&(m=!0,f[2]=!1)}for(var B=0;B<e.certs.length-1;B++)if(B<e.certs.length-2&&void 0!==s[B+1])for(var N=0;N<s[B+1].mappings.length;N++){if("2.5.29.32.0"===s[B+1].mappings[N].issuerDomainPolicy||"2.5.29.32.0"===s[B+1].mappings[N].subjectDomainPolicy)return{result:!1,resultCode:99,resultMessage:'The "anyPolicy" should not be a part of policy mapping scheme'};for(var P=-1,E=-1,x=0;x<t.length;x++)t[x]===s[B+1].mappings[N].issuerDomainPolicy&&(P=x),t[x]===s[B+1].mappings[N].subjectDomainPolicy&&(E=x);void 0!==r[P][B]&&delete r[P][B];for(var O=0;O<o[B].certificatePolicies.length;O++)if(s[B+1].mappings[N].subjectDomainPolicy===o[B].certificatePolicies[O].policyIdentifier&&-1!==P&&-1!==E)for(var V=0;V<=B;V++)void 0!==r[E][V]&&(r[P][V]=!0,delete r[E][V])}for(var _=0;_<t.length;_++)if("2.5.29.32.0"===t[_])for(var j=0;j<u;j++)delete r[_][j];for(var D=[],R=0;R<r.length;R++){for(var K=!0,H=0;H<e.certs.length-1;H++){var U=!1;if(H<u&&"2.5.29.32.0"===t[R]&&t.length>1){K=!1;break}if(void 0===r[R][H]){if(H>=u)for(var L=0;L<t.length;L++)if("2.5.29.32.0"===t[L]){!0===r[L][H]&&(U=!0);break}if(!U){K=!1;break}}}!0===K&&D.push(t[R])}var T=[];if(1===a.length&&"2.5.29.32.0"===a[0]&&!1===c)T=a;else if(1===D.length&&"2.5.29.32.0"===D[0])T=a;else for(var J=0;J<D.length;J++)for(var q=0;q<a.length;q++)if(a[q]===D[J]||"2.5.29.32.0"===a[q]){T.push(D[J]);break}return{result:T.length>0,resultCode:0,resultMessage:T.length>0?"":'Zero "userConstrPolicies" array, no intersections with "authConstrPolicies"',authConstrPolicies:D,userConstrPolicies:T,explicitPolicyIndicator:c,policyMappings:s}}),r=r.then(function(t){function r(e,t){var r=I(e),a=I(t),n=r.split("."),i=a.split("."),s=n.length,o=i.length;if(0===s||0===o||s<o)return!1;for(var u=0;u<s;u++)if(0===n[u].length)return!1;for(var l=0;l<o;l++)if(0===i[l].length){if(0===l){if(1===o)return!1;continue}return!1}for(var c=0;c<o;c++)if(0!==i[o-1-c].length&&0!==n[s-1-c].localeCompare(i[o-1-c]))return!1;return!0}function a(e,t){var a=I(e),n=I(t),i=a.split("@"),s=n.split("@");if(0===i.length||0===s.length||i.length<s.length)return!1;if(1===s.length){if(r(i[1],s[0])){var o=i[1].split("."),u=s[0].split(".");return 0===u[0].length||o.length===u.length}return!1}return 0===a.localeCompare(n)}function n(e,t){var a=I(e),n=I(t),i=a.split("/");if(n.split("/").length>1)return!1;if(i.length>1)for(var s=0;s<i.length;s++)if(i[s].length>0&&":"!==i[s].charAt(i[s].length-1)){a=i[s].split(":")[0];break}if(r(a,n)){var o=a.split("."),u=n.split(".");return 0===u[0].length||o.length===u.length}return!1}function i(e,t){var r=new Uint8Array(e.valueBlock.valueHex),a=new Uint8Array(t.valueBlock.valueHex);if(4===r.length&&8===a.length){for(var n=0;n<4;n++)if((r[n]^a[n])&a[n+4])return!1;return!0}if(16===r.length&&32===a.length){for(var i=0;i<16;i++)if((r[i]^a[i])&a[i+16])return!1;return!0}return!1}function s(e,t){if(0===e.typesAndValues.length||0===t.typesAndValues.length)return!0;if(e.typesAndValues.length<t.typesAndValues.length)return!1;for(var r=!0,a=0,n=0;n<t.typesAndValues.length;n++){for(var i=!1,s=a;s<e.typesAndValues.length;s++)if(i=e.typesAndValues[s].isEqual(t.typesAndValues[n]),e.typesAndValues[s].type===t.typesAndValues[n].type&&(r=r&&i),!0===i){if(0===a||a===s){a=s+1;break}return!1}if(!1===i)return!1}return 0!==a&&r}if(!1===t.result)return t;b=1;for(var o=e.certs.length-2;o>=0;o--,b++){var u=[],l=[],c=[];if("extensions"in e.certs[o])for(var h=0;h<e.certs[o].extensions.length;h++)"2.5.29.30"===e.certs[o].extensions[h].extnID&&("permittedSubtrees"in e.certs[o].extensions[h].parsedValue&&(l=l.concat(e.certs[o].extensions[h].parsedValue.permittedSubtrees)),"excludedSubtrees"in e.certs[o].extensions[h].parsedValue&&(c=c.concat(e.certs[o].extensions[h].parsedValue.excludedSubtrees))),"2.5.29.17"===e.certs[o].extensions[h].extnID&&(u=u.concat(e.certs[o].extensions[h].parsedValue.altNames));for(var m=k.length<=0,f=0;f<k.length;f++)switch(k[f].base.type){case 4:if(k[f].base.value.typesAndValues.length!==e.certs[o].subject.typesAndValues.length)continue;m=!0;for(var v=0;v<e.certs[o].subject.typesAndValues.length;v++)if(e.certs[o].subject.typesAndValues[v].type!==k[f].base.value.typesAndValues[v].type){m=!1;break}if(!0===m)break}if(!1===m)return t.result=!1,t.resultCode=21,t.resultMessage="No neccessary name form found",Promise.reject(t);var d=[];d[0]=[],d[1]=[],d[2]=[],d[3]=[],d[4]=[];for(var g=0;g<y.length;g++)switch(y[g].base.type){case 1:d[0].push(y[g]);break;case 2:d[1].push(y[g]);break;case 4:d[2].push(y[g]);break;case 6:d[3].push(y[g]);break;case 7:d[4].push(y[g])}for(var w=0;w<5;w++){for(var C=!1,S=!1,A=d[w],B=0;B<A.length;B++){switch(w){case 0:if(u.length>0)for(var N=0;N<u.length;N++)1===u[N].type&&(S=!0,C=C||a(u[N].value,A[B].base.value));else for(var P=0;P<e.certs[o].subject.typesAndValues.length;P++)"1.2.840.113549.1.9.1"!==e.certs[o].subject.typesAndValues[P].type&&"0.9.2342.19200300.100.1.3"!==e.certs[o].subject.typesAndValues[P].type||(S=!0,C=C||a(e.certs[o].subject.typesAndValues[P].value.valueBlock.value,A[B].base.value));break;case 1:if(u.length>0)for(var E=0;E<u.length;E++)2===u[E].type&&(S=!0,C=C||r(u[E].value,A[B].base.value));break;case 2:S=!0,C=s(e.certs[o].subject,A[B].base.value);break;case 3:if(u.length>0)for(var x=0;x<u.length;x++)6===u[x].type&&(S=!0,C=C||n(u[x].value,A[B].base.value));break;case 4:if(u.length>0)for(var O=0;O<u.length;O++)7===u[O].type&&(S=!0,C=C||i(u[O].value,A[B].base.value))}if(C)break}if(!1===C&&A.length>0&&S)return t.result=!1,t.resultCode=41,t.resultMessage='Failed to meet "permitted sub-trees" name constraint',Promise.reject(t)}for(var V=!1,_=0;_<p.length;_++){switch(p[_].base.type){case 1:if(u.length>=0)for(var j=0;j<u.length;j++)1===u[j].type&&(V=V||a(u[j].value,p[_].base.value));else for(var D=0;D<e.subject.typesAndValues.length;D++)"1.2.840.113549.1.9.1"!==e.subject.typesAndValues[D].type&&"0.9.2342.19200300.100.1.3"!==e.subject.typesAndValues[D].type||(V=V||a(e.subject.typesAndValues[D].value.valueBlock.value,p[_].base.value));break;case 2:if(u.length>0)for(var R=0;R<u.length;R++)2===u[R].type&&(V=V||r(u[R].value,p[_].base.value));break;case 4:V=V||s(e.certs[o].subject,p[_].base.value);break;case 6:if(u.length>0)for(var K=0;K<u.length;K++)6===u[K].type&&(V=V||n(u[K].value,p[_].base.value));break;case 7:if(u.length>0)for(var H=0;H<u.length;H++)7===u[H].type&&(V=V||i(u[H].value,p[_].base.value))}if(V)break}if(!0===V)return t.result=!1,t.resultCode=42,t.resultMessage='Failed to meet "excluded sub-trees" name constraint',Promise.reject(t);y=y.concat(l),p=p.concat(c)}return t}),r=r.then(function(e){return e},function(e){if(e instanceof Object){if("resultMessage"in e)return e;if("message"in e)return{result:!1,resultCode:-1,resultMessage:e.message}}return{result:!1,resultCode:-1,resultMessage:e}})}}],[{key:"defaultValues",value:function(e){switch(e){case"trustedCerts":case"certs":case"crls":case"ocsps":return[];case"checkDate":return new Date;default:throw new Error("Invalid member name for CertificateChainValidationEngine class: "+e)}}}]),e}(),gr=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.tbsResponseData=t(r,"tbsResponseData",e.defaultValues("tbsResponseData")),this.signatureAlgorithm=t(r,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signature=t(r,"signature",e.defaultValues("signature")),"certs"in r&&(this.certs=t(r,"certs",e.defaultValues("certs"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for OCSP_BASIC_RESPONSE");this.tbsResponseData=new mr({schema:r.result["BasicOCSPResponse.tbsResponseData"]}),this.signatureAlgorithm=new Te({schema:r.result["BasicOCSPResponse.signatureAlgorithm"]}),this.signature=r.result["BasicOCSPResponse.signature"],"BasicOCSPResponse.certs"in r.result&&(this.certs=Array.from(r.result["BasicOCSPResponse.certs"],function(e){return new Vt({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.tbsResponseData.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),"certs"in this&&e.push(new z({idBlock:{tagClass:3,tagNumber:0},value:[new ee({value:Array.from(this.certs,function(e){return e.toSchema()})})]})),new ee({value:e})}},{key:"toJSON",value:function(){var e={tbsResponseData:this.tbsResponseData.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return"certs"in this&&(e.certs=Array.from(this.certs,function(e){return e.toJSON()})),e}},{key:"getCertificateStatus",value:function(e,t){var r=this,a=Promise.resolve(),n={isForCertificate:!1,status:2},i={},s=[],o=[],u=!0,l=!1,c=void 0;try{for(var h,m=this.tbsResponseData.responses[Symbol.iterator]();!(u=(h=m.next()).done);u=!0){var f=h.value,v=N(f.certID.hashAlgorithm.algorithmId);if("name"in v==!1)return Promise.reject("Wrong CertID hashing algorithm: "+f.certID.hashAlgorithm.algorithmId);if(v.name in i==!1){i[v.name]=1;var d=new cr;s.push(d),o.push(d.createForCertificate(e,{hashAlgorithm:v.name,issuerCertificate:t}))}}}catch(e){l=!0,c=e}finally{try{!u&&m.return&&m.return()}finally{if(l)throw c}}return a=a.then(function(){return Promise.all(o)}),a=a.then(function(){var e=!0,t=!1,a=void 0;try{for(var i,o=r.tbsResponseData.responses[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var u=i.value,l=!0,c=!1,h=void 0;try{for(var m,f=s[Symbol.iterator]();!(l=(m=f.next()).done);l=!0){var v=m.value;if(u.certID.isEqual(v)){n.isForCertificate=!0;try{switch(u.certStatus.idBlock.isConstructed){case!0:1===u.certStatus.idBlock.tagNumber&&(n.status=1);break;case!1:switch(u.certStatus.idBlock.tagNumber){case 0:n.status=0;break;case 2:n.status=2}}}catch(e){}return n}}}catch(e){c=!0,h=e}finally{try{!l&&f.return&&f.return()}finally{if(c)throw h}}}}catch(e){t=!0,a=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw a}}return n})}},{key:"sign",value:function(e,t){var r=this;if(void 0===e)return Promise.reject("Need to provide a private key for signing");if(void 0===t)t="SHA-1";else if(""===C({name:t}))return Promise.reject("Unsupported hash algorithm: "+t);var a=S(e.algorithm.name,"sign");switch(a.algorithm.hash.name=t,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.signatureAlgorithm.algorithmId=C(a.algorithm);break;case"RSA-PSS":switch(t.toUpperCase()){case"SHA-256":a.algorithm.saltLength=32;break;case"SHA-384":a.algorithm.saltLength=48;break;case"SHA-512":a.algorithm.saltLength=64}var n={};if("SHA-1"!==t.toUpperCase()){var i=C({name:t});if(""===i)return Promise.reject("Unsupported hash algorithm: "+t);n.hashAlgorithm=new Te({algorithmId:i,algorithmParams:new re}),n.maskGenAlgorithm=new Te({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:n.hashAlgorithm.toSchema()})}20!==a.algorithm.saltLength&&(n.saltLength=a.algorithm.saltLength);var s=new Je(n);this.signatureAlgorithm=new Te({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:s.toSchema()});break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}this.tbsResponseData.tbs=this.tbsResponseData.toSchema(!0).toBER(!1);var o=b();return void 0===o?Promise.reject("Unable to create WebCrypto object"):o.sign(a.algorithm,e,new Uint8Array(this.tbsResponseData.tbs)).then(function(e){"ECDSA"===a.algorithm.name&&(e=A(e)),r.signature=new se({valueHex:e})},function(e){return Promise.reject("Signing error: "+e)})}},{key:"verify",value:function(){function e(e){if(!0===e.issuer.isEqual(a.issuer)&&!0===e.serialNumber.isEqual(a.serialNumber))return null;var t=!1,r=!0,n=!1,i=void 0;try{for(var s,o=e.extensions[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value;"2.5.29.19"===u.extnID&&"cA"in u.parsedValue&&!0===u.parsedValue.cA&&(t=!0)}}catch(e){n=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}return t?e:null}var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("certs"in this==!1)return Promise.reject("No certificates attached to the BasicOCSPResponce");var a=null,n=new Uint8Array(this.tbsResponseData.tbs),i=-1,s=Promise.resolve(),o="",u=[];"trustedCerts"in r&&(u=r.trustedCerts);var c=b();if(void 0===c)return Promise.reject("Unable to create WebCrypto object");if(""===(o=P(this.signatureAlgorithm)))return Promise.reject("Unsupported signature algorithm: "+this.signatureAlgorithm.algorithmId);var h=0,m={};if(this.tbsResponseData.responderID instanceof et)h=0,m=this.tbsResponseData.responderID;else{if(!(this.tbsResponseData.responderID instanceof ne))return Promise.reject("Wrong value for responderID");h=1,m=this.tbsResponseData.responderID}return s=0===h?s.then(function(){var e=!0,r=!1,a=void 0;try{for(var n,s=t.certs.entries()[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var o=_slicedToArray(n.value,2),u=o[0];if(o[1].subject.isEqual(m)){i=u;break}}}catch(e){r=!0,a=e}finally{try{!e&&s.return&&s.return()}finally{if(r)throw a}}}):s.then(function(){return Promise.all(Array.from(t.certs,function(e){return c.digest({name:"sha-1"},new Uint8Array(e.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex))})).then(function(e){var r=!0,a=!1,n=void 0;try{for(var s,o=t.certs.entries()[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=_slicedToArray(s.value,2),c=u[0];u[1];if(l(e[c],m.valueBlock.valueHex)){i=c;break}}}catch(e){a=!0,n=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw n}}})}),s=s.then(function(){return-1===i?Promise.reject("Correct certificate was not found in OCSP response"):(a=t.certs[i],Promise.all(Array.from(t.certs,function(t){return e(t)})).then(function(e){var t=[];t.push(a);var r=!0,n=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var l=s.value;null!==l&&t.push(l)}}catch(e){n=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}return new dr({certs:t,trustedCerts:u}).verify().then(function(e){return!0===e.result?Promise.resolve():Promise.reject("Validation of signer's certificate failed")},function(e){return Promise.reject("Validation of signer's certificate failed with error: "+(e instanceof Object?e.resultMessage:e))})},function(e){return Promise.reject("Error during checking certificates for CA flag: "+e)}))}),s=s.then(function(){var e=void 0,r=N(e="1.2.840.113549.1.1.10"===t.certs[i].signatureAlgorithm.algorithmId?t.certs[i].signatureAlgorithm.algorithmId:t.certs[i].subjectPublicKeyInfo.algorithm.algorithmId);if("name"in r==!1)return Promise.reject("Unsupported public key algorithm: "+e);var a=r.name,n=S(a,"importkey");if("hash"in n.algorithm&&(n.algorithm.hash.name=o),"ECDSA"===a){if(t.certs[i].subjectPublicKeyInfo.algorithm.algorithmParams instanceof me==!1)return Promise.reject("Incorrect type for ECDSA public key parameters");var s=N(t.certs[i].subjectPublicKeyInfo.algorithm.algorithmParams.valueBlock.toString());if("name"in s==!1)return Promise.reject("Unsupported named curve algorithm: "+t.certs[i].subjectPublicKeyInfo.algorithm.algorithmParams.valueBlock.toString());n.algorithm.namedCurve=s.name}var u=t.certs[i].subjectPublicKeyInfo.toSchema().toBER(!1),l=new Uint8Array(u);return c.importKey("spki",l,n.algorithm,!0,n.usages)}),s=s.then(function(e){var r=S(e.algorithm.name,"verify");"hash"in r.algorithm&&(r.algorithm.hash.name=o);var a=t.signature.valueBlock.valueHex;if("ECDSA"===e.algorithm.name&&(a=B(g(a).result)),"RSA-PSS"===e.algorithm.name){var i=void 0;try{i=new Je({schema:t.signatureAlgorithm.algorithmParams})}catch(e){return Promise.reject(e)}r.algorithm.saltLength="saltLength"in i?i.saltLength:20;var s="SHA-1";if("hashAlgorithm"in i){var u=N(i.hashAlgorithm.algorithmId);if("name"in u==!1)return Promise.reject("Unrecognized hash algorithm: "+i.hashAlgorithm.algorithmId);s=u.name}r.algorithm.hash.name=s}return c.verify(r.algorithm,e,new Uint8Array(a),n)})}}],[{key:"defaultValues",value:function(e){switch(e){case"tbsResponseData":return new mr;case"signatureAlgorithm":return new Te;case"signature":return new se;case"certs":return[];default:throw new Error("Invalid member name for BasicOCSPResponse class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"type":var a=mr.compareWithDefault("tbs",r.tbs)&&mr.compareWithDefault("responderID",r.responderID)&&mr.compareWithDefault("producedAt",r.producedAt)&&mr.compareWithDefault("responses",r.responses);return"responseExtensions"in r&&(a=a&&mr.compareWithDefault("responseExtensions",r.responseExtensions)),a;case"signatureAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"signature":return r.isEqual(e.defaultValues(t));case"certs":return 0===r.length;default:throw new Error("Invalid member name for BasicOCSPResponse class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"BasicOCSPResponse",value:[mr.schema(e.tbsResponseData||{names:{blockName:"BasicOCSPResponse.tbsResponseData"}}),Te.schema(e.signatureAlgorithm||{names:{blockName:"BasicOCSPResponse.signatureAlgorithm"}}),new se({name:e.signature||"BasicOCSPResponse.signature"}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ee({value:[new Ue({name:"BasicOCSPResponse.certs",value:Vt.schema(e.certs||{})})]})]})]})}}]),e}(),yr=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.tbs=t(r,"tbs",e.defaultValues("tbs")),this.version=t(r,"version",e.defaultValues("version")),this.subject=t(r,"subject",e.defaultValues("subject")),this.subjectPublicKeyInfo=t(r,"subjectPublicKeyInfo",e.defaultValues("subjectPublicKeyInfo")),"attributes"in r&&(this.attributes=t(r,"attributes",e.defaultValues("attributes"))),this.signatureAlgorithm=t(r,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signatureValue=t(r,"signatureValue",e.defaultValues("signatureValue")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PKCS10");this.tbs=r.result.CertificationRequestInfo.valueBeforeDecode,this.version=r.result["CertificationRequestInfo.version"].valueBlock.valueDec,this.subject=new et({schema:r.result["CertificationRequestInfo.subject"]}),this.subjectPublicKeyInfo=new Fe({schema:r.result["CertificationRequestInfo.subjectPublicKeyInfo"]}),"CertificationRequestInfo.attributes"in r.result&&(this.attributes=Array.from(r.result["CertificationRequestInfo.attributes"],function(e){return new Me({schema:e})})),this.signatureAlgorithm=new Te({schema:r.result.signatureAlgorithm}),this.signatureValue=r.result.signatureValue}},{key:"encodeTBS",value:function(){var e=[new ue({value:this.version}),this.subject.toSchema(),this.subjectPublicKeyInfo.toSchema()];return"attributes"in this&&e.push(new z({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,function(e){return e.toSchema()})})),new ee({value:e})}},{key:"toSchema",value:function(){var t=void 0;if(!1===(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){if(0===this.tbs.length)return e.schema();t=g(this.tbs).result}else t=this.encodeTBS();return new ee({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}},{key:"toJSON",value:function(){var e={tbs:r(this.tbs,0,this.tbs.byteLength),version:this.version,subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return"attributes"in this&&(e.attributes=Array.from(this.attributes,function(e){return e.toJSON()})),e}},{key:"sign",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1";if(void 0===e)return Promise.reject("Need to provide a private key for signing");if(""===C({name:r}))return Promise.reject("Unsupported hash algorithm: {$hashAlgorithm}");var a=S(e.algorithm.name,"sign");switch(a.algorithm.hash.name=r,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.signatureAlgorithm.algorithmId=C(a.algorithm);break;case"RSA-PSS":switch(r.toUpperCase()){case"SHA-256":a.algorithm.saltLength=32;break;case"SHA-384":a.algorithm.saltLength=48;break;case"SHA-512":a.algorithm.saltLength=64}var n={};if("SHA-1"!==r.toUpperCase()){var i=C({name:r});if(""===i)return Promise.reject("Unsupported hash algorithm: "+r);n.hashAlgorithm=new Te({algorithmId:i,algorithmParams:new re}),n.maskGenAlgorithm=new Te({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:n.hashAlgorithm.toSchema()})}20!==a.algorithm.saltLength&&(n.saltLength=a.algorithm.saltLength);var s=new Je(n);this.signatureAlgorithm=new Te({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:s.toSchema()});break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}this.tbs=this.encodeTBS().toBER(!1);var o=b();return void 0===o?Promise.reject("Unable to create WebCrypto object"):o.sign(a.algorithm,e,new Uint8Array(this.tbs)).then(function(e){"ECDSA"===a.algorithm.name&&(e=A(e)),t.signatureValue=new se({valueHex:e})},function(e){return Promise.reject("Signing error: "+e)})}},{key:"verify",value:function(){var e=this,t=Promise.resolve(),r=this.subjectPublicKeyInfo,a=this.signatureValue,n=this.tbs,i=b();if(void 0===i)return Promise.reject("Unable to create WebCrypto object");var s=P(this.signatureAlgorithm);return""===s?Promise.reject("Unsupported signature algorithm: "+this.signatureAlgorithm.algorithmId):(t=t.then(function(){var t=void 0,a=N(t="1.2.840.113549.1.1.10"===e.signatureAlgorithm.algorithmId?e.signatureAlgorithm.algorithmId:e.subjectPublicKeyInfo.algorithm.algorithmId);if("name"in a==!1)return Promise.reject("Unsupported public key algorithm: "+t);var n=S(a.name,"importkey");if("hash"in n.algorithm&&(n.algorithm.hash.name=s),"ECDSA"===a.name){var o=!1;if("algorithmParams"in r.algorithm==!0&&"idBlock"in r.algorithm.algorithmParams&&1===r.algorithm.algorithmParams.idBlock.tagClass&&6===r.algorithm.algorithmParams.idBlock.tagNumber&&(o=!0),!1===o)return Promise.reject("Incorrect type for ECDSA public key parameters");var u=N(r.algorithm.algorithmParams.valueBlock.toString());if("name"in u==!1)return Promise.reject("Unsupported named curve algorithm: "+r.algorithm.algorithmParams.valueBlock.toString());n.algorithm.namedCurve=u.name}var l=r.toSchema().toBER(!1),c=new Uint8Array(l);return i.importKey("spki",c,n.algorithm,!0,n.usages)}),t=t.then(function(t){var r=S(t.algorithm.name,"verify");"hash"in r.algorithm&&(r.algorithm.hash.name=s);var o=a.valueBlock.valueHex;if("ECDSA"===t.algorithm.name&&(o=B(g(o).result)),"RSA-PSS"===t.algorithm.name){var u=void 0;try{u=new Je({schema:e.signatureAlgorithm.algorithmParams})}catch(e){return Promise.reject(e)}r.algorithm.saltLength="saltLength"in u?u.saltLength:20;var l="SHA-1";if("hashAlgorithm"in u){var c=N(u.hashAlgorithm.algorithmId);if("name"in c==!1)return Promise.reject("Unrecognized hash algorithm: "+u.hashAlgorithm.algorithmId);l=c.name}r.algorithm.hash.name=l}return i.verify(r.algorithm,t,new Uint8Array(o),new Uint8Array(n))}))}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 0;case"subject":return new et;case"subjectPublicKeyInfo":return new Fe;case"attributes":return[];case"signatureAlgorithm":return new Te;case"signatureValue":return new se;default:throw new Error("Invalid member name for CertificationRequest class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({value:[K(e.certificationRequestInfo||{}),new ee({name:e.signatureAlgorithm||"signatureAlgorithm",value:[new me,new He({optional:!0})]}),new se({name:e.signatureValue||"signatureValue"})]})}}]),e}(),pr=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.digestAlgorithm=t(r,"digestAlgorithm",e.defaultValues("digestAlgorithm")),this.digest=t(r,"digest",e.defaultValues("digest")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{digestAlgorithm:{names:{blockName:"digestAlgorithm"}},digest:"digest"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for DigestInfo");this.digestAlgorithm=new Te({schema:r.result.digestAlgorithm}),this.digest=r.result.digest}},{key:"toSchema",value:function(){return new ee({value:[this.digestAlgorithm.toSchema(),this.digest]})}},{key:"toJSON",value:function(){return{digestAlgorithm:this.digestAlgorithm.toJSON(),digest:this.digest.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"digestAlgorithm":return new Te;case"digest":return new ne;default:throw new Error("Invalid member name for DigestInfo class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"digestAlgorithm":return Te.compareWithDefault("algorithmId",t.algorithmId)&&"algorithmParams"in t==!1;case"digest":return t.isEqual(this.constructor.defaultValues(e));default:throw new Error("Invalid member name for DigestInfo class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[Te.schema(e.digestAlgorithm||{names:{blockName:"digestAlgorithm"}}),new ne({name:e.digest||"digest"})]})}}]),e}(),kr=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,e),this.eContentType=t(r,"eContentType",e.defaultValues("eContentType")),"eContent"in r&&(this.eContent=t(r,"eContent",e.defaultValues("eContent")),1===this.eContent.idBlock.tagClass&&4===this.eContent.idBlock.tagNumber&&!1===this.eContent.idBlock.isConstructed)){for(var a=new ne({idBlock:{isConstructed:!0},isConstructed:!0}),n=0,i=this.eContent.valueBlock.valueHex.byteLength;i>0;){for(var s=new Uint8Array(this.eContent.valueBlock.valueHex,n,n+65536>this.eContent.valueBlock.valueHex.byteLength?this.eContent.valueBlock.valueHex.byteLength-n:65536),o=new ArrayBuffer(s.length),u=new Uint8Array(o),l=0;l<u.length;l++)u[l]=s[l];a.valueBlock.value.push(new ne({valueHex:o})),i-=s.length,n+=s.length}this.eContent=a}"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{eContentType:"eContentType",eContent:"eContent"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for EncapsulatedContentInfo");this.eContentType=r.result.eContentType.valueBlock.toString(),"eContent"in r.result&&(this.eContent=r.result.eContent)}},{key:"toSchema",value:function(){var t=[];return t.push(new me({value:this.eContentType})),"eContent"in this&&!1===e.compareWithDefault("eContent",this.eContent)&&t.push(new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.eContent]})),new ee({value:t})}},{key:"toJSON",value:function(){var t={eContentType:this.eContentType};return"eContent"in this&&!1===e.compareWithDefault("eContent",this.eContent)&&(t.eContent=this.eContent.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"eContentType":return"";case"eContent":return new ne;default:throw new Error("Invalid member name for EncapsulatedContentInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"eContentType":return""===r;case"eContent":return r.isEqual(e.defaultValues("eContent"));default:throw new Error("Invalid member name for EncapsulatedContentInfo class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new me({name:e.eContentType||""}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new He({name:e.eContent||""})]})]})}}]),e}(),br=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,e),t}(Ze),wr=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.mac=t(r,"mac",e.defaultValues("mac")),this.macSalt=t(r,"macSalt",e.defaultValues("macSalt")),"iterations"in r&&(this.iterations=t(r,"iterations",e.defaultValues("iterations"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{mac:{names:{blockName:"mac"}},macSalt:"macSalt",iterations:"iterations"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for MacData");this.mac=new pr({schema:r.result.mac}),this.macSalt=r.result.macSalt,"iterations"in r.result&&(this.iterations=r.result.iterations.valueBlock.valueDec)}},{key:"toSchema",value:function(){var e=[this.mac.toSchema(),this.macSalt];return"iterations"in this&&e.push(new ue({value:this.iterations})),new ee({value:e})}},{key:"toJSON",value:function(){var e={mac:this.mac.toJSON(),macSalt:this.macSalt.toJSON()};return"iterations"in this&&(e.iterations=this.iterations.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"mac":return new pr;case"macSalt":return new ne;case"iterations":return 1;default:throw new Error("Invalid member name for MacData class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"mac":return pr.compareWithDefault("digestAlgorithm",r.digestAlgorithm)&&pr.compareWithDefault("digest",r.digest);case"macSalt":return r.isEqual(e.defaultValues(t));case"iterations":return r===e.defaultValues(t);default:throw new Error("Invalid member name for MacData class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",optional:e.optional||!0,value:[pr.schema(e.mac||{names:{blockName:"mac"}}),new ne({name:e.macSalt||"macSalt"}),new ue({optional:!0,name:e.iterations||"iterations"})]})}}]),e}(),Cr=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.hashAlgorithm=t(r,"hashAlgorithm",e.defaultValues("hashAlgorithm")),this.hashedMessage=t(r,"hashedMessage",e.defaultValues("hashedMessage")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{hashAlgorithm:{names:{blockName:"hashAlgorithm"}},hashedMessage:"hashedMessage"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for MessageImprint");this.hashAlgorithm=new Te({schema:r.result.hashAlgorithm}),this.hashedMessage=r.result.hashedMessage}},{key:"toSchema",value:function(){return new ee({value:[this.hashAlgorithm.toSchema(),this.hashedMessage]})}},{key:"toJSON",value:function(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),hashedMessage:this.hashedMessage.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"hashAlgorithm":return new Te;case"hashedMessage":return new ne;default:throw new Error("Invalid member name for MessageImprint class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"hashAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"hashedMessage":return 0===r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for MessageImprint class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[Te.schema(e.hashAlgorithm||{}),new ne({name:e.hashedMessage||""})]})}}]),e}(),Sr=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.reqCert=t(r,"reqCert",e.defaultValues("reqCert")),"singleRequestExtensions"in r&&(this.singleRequestExtensions=t(r,"singleRequestExtensions",e.defaultValues("singleRequestExtensions"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{reqCert:{names:{blockName:"reqCert"}},singleRequestExtensions:{names:{blockName:"singleRequestExtensions"}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for Request");this.reqCert=new cr({schema:r.result.reqCert}),"singleRequestExtensions"in r.result&&(this.singleRequestExtensions=Array.from(r.result.singleRequestExtensions.valueBlock.value,function(e){return new xt({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.reqCert.toSchema()),"singleRequestExtensions"in this&&e.push(new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ee({value:Array.from(this.singleRequestExtensions,function(e){return e.toSchema()})})]})),new ee({value:e})}},{key:"toJSON",value:function(){var e={reqCert:this.reqCert.toJSON()};return"singleRequestExtensions"in this&&(e.singleRequestExtensions=Array.from(this.singleRequestExtensions,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"reqCert":return new cr;case"singleRequestExtensions":return[];default:throw new Error("Invalid member name for Request class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"reqCert":return r.isEqual(e.defaultValues(t));case"singleRequestExtensions":return 0===r.length;default:throw new Error("Invalid member name for Request class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[cr.schema(e.reqCert||{}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[xt.schema(e.extensions||{names:{blockName:e.singleRequestExtensions||""}})]})]})}}]),e}(),Ar=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.tbs=t(r,"tbs",e.defaultValues("tbs")),"version"in r&&(this.version=t(r,"version",e.defaultValues("version"))),"requestorName"in r&&(this.requestorName=t(r,"requestorName",e.defaultValues("requestorName"))),this.requestList=t(r,"requestList",e.defaultValues("requestList")),"requestExtensions"in r&&(this.requestExtensions=t(r,"requestExtensions",e.defaultValues("requestExtensions"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for TBSRequest");this.tbs=r.result.TBSRequest.valueBeforeDecode,"TBSRequest.version"in r.result&&(this.version=r.result["TBSRequest.version"].valueBlock.valueDec),"TBSRequest.requestorName"in r.result&&(this.requestorName=new tt({schema:r.result["TBSRequest.requestorName"]})),this.requestList=Array.from(r.result["TBSRequest.requests"],function(e){return new Sr({schema:e})}),"TBSRequest.requestExtensions"in r.result&&(this.requestExtensions=Array.from(r.result["TBSRequest.requestExtensions"].valueBlock.value,function(e){return new xt({schema:e})}))}},{key:"toSchema",value:function(){var t=void 0;if(!1===(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){if(0===this.tbs.byteLength)return e.schema();t=g(this.tbs).result}else{var r=[];"version"in this&&r.push(new z({idBlock:{tagClass:3,tagNumber:0},value:[new ue({value:this.version})]})),"requestorName"in this&&r.push(new z({idBlock:{tagClass:3,tagNumber:1},value:[this.requestorName.toSchema()]})),r.push(new ee({value:Array.from(this.requestList,function(e){return e.toSchema()})})),"requestExtensions"in this&&r.push(new z({idBlock:{tagClass:3,tagNumber:2},value:[new ee({value:Array.from(this.requestExtensions,function(e){return e.toSchema()})})]})),t=new ee({value:r})}return t}},{key:"toJSON",value:function(){var e={};return"version"in this&&(e.version=this.version),"requestorName"in this&&(e.requestorName=this.requestorName.toJSON()),e.requestList=Array.from(this.requestList,function(e){return e.toJSON()}),"requestExtensions"in this&&(e.requestExtensions=Array.from(this.requestExtensions,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 0;case"requestorName":return new tt;case"requestList":case"requestExtensions":return[];default:throw new Error("Invalid member name for TBSRequest class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"tbs":return 0===r.byteLength;case"version":return r===e.defaultValues(t);case"requestorName":return r.type===tt.defaultValues("type")&&0===Object.keys(r.value).length;case"requestList":case"requestExtensions":return 0===r.length;default:throw new Error("Invalid member name for TBSRequest class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"TBSRequest",value:[new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ue({name:e.TBSRequestVersion||"TBSRequest.version"})]}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[tt.schema(e.requestorName||{names:{blockName:"TBSRequest.requestorName"}})]}),new ee({name:e.requestList||"TBSRequest.requestList",value:[new Ue({name:e.requests||"TBSRequest.requests",value:Sr.schema(e.requestNames||{})})]}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[Ot.schema(e.extensions||{names:{blockName:e.requestExtensions||"TBSRequest.requestExtensions"}})]})]})}}]),e}(),Ir=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.signatureAlgorithm=t(r,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signature=t(r,"signature",e.defaultValues("signature")),"certs"in r&&(this.certs=t(r,"certs",e.defaultValues("certs"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{signatureAlgorithm:{names:{blockName:"signatureAlgorithm"}},signature:"signature",certs:"certs"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for ocsp.Signature");this.signatureAlgorithm=new Te({schema:r.result.signatureAlgorithm}),this.signature=r.result.signature,"certs"in r.result&&(this.certs=Array.from(r.result.certs,function(e){return new Vt({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),"certs"in this&&e.push(new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ee({value:Array.from(this.certs,function(e){return e.toSchema()})})]})),new ee({value:e})}},{key:"toJSON",value:function(){var e={signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return"certs"in this&&(e.certs=Array.from(this.certs,function(e){return e.toJSON()})),e}}],[{key:"defaultValues",value:function(e){switch(e){case"signatureAlgorithm":return new Te;case"signature":return new se;case"certs":return[];default:throw new Error("Invalid member name for Signature class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"signatureAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"signature":return r.isEqual(e.defaultValues(t));case"certs":return 0===r.length;default:throw new Error("Invalid member name for Signature class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[Te.schema(e.signatureAlgorithm||{}),new se({name:e.signature||""}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ee({value:[new Ue({name:e.certs||"",value:Vt.schema(e.certs||{})})]})]})]})}}]),e}(),Br=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.tbsRequest=t(r,"tbsRequest",e.defaultValues("tbsRequest")),"optionalSignature"in r&&(this.optionalSignature=t(r,"optionalSignature",e.defaultValues("optionalSignature"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for OCSP_REQUEST");this.tbsRequest=new Ar({schema:r.result.tbsRequest}),"optionalSignature"in r.result&&(this.optionalSignature=new Ir({schema:r.result.optionalSignature}))}},{key:"toSchema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return t.push(this.tbsRequest.toSchema(e)),"optionalSignature"in this&&t.push(this.optionalSignature.toSchema()),new ee({value:t})}},{key:"toJSON",value:function(){var e={tbsRequest:this.tbsRequest.toJSON()};return"optionalSignature"in this&&(e.optionalSignature=this.optionalSignature.toJSON()),e}},{key:"createForCertificate",value:function(e,t){var r=this,a=Promise.resolve(),n=new cr;return a=a.then(function(){return n.createForCertificate(e,t)}),a=a.then(function(){r.tbsRequest=new Ar({requestList:[new Sr({reqCert:n})]})},function(e){return Promise.reject(e)})}},{key:"sign",value:function(e,t){var r=this;if(void 0===e)return Promise.reject("Need to provide a private key for signing");if(void 0===t)t="SHA-1";else if(""===C({name:t}))return Promise.reject("Unsupported hash algorithm: "+t);if("optionalSignature"in this==!1)return Promise.reject('Need to create "optionalSignature" field before signing');var a=S(e.algorithm.name,"sign");switch(a.algorithm.hash.name=t,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.optionalSignature.signatureAlgorithm.algorithmId=C(a.algorithm);break;case"RSA-PSS":switch(t.toUpperCase()){case"SHA-256":a.algorithm.saltLength=32;break;case"SHA-384":a.algorithm.saltLength=48;break;case"SHA-512":a.algorithm.saltLength=64}var n={};if("SHA-1"!==t.toUpperCase()){var i=C({name:t});if(""===i)return Promise.reject("Unsupported hash algorithm: "+t);n.hashAlgorithm=new Te({algorithmId:i,algorithmParams:new re}),n.maskGenAlgorithm=new Te({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:n.hashAlgorithm.toSchema()})}20!==a.algorithm.saltLength&&(n.saltLength=a.algorithm.saltLength);var s=new Je(n);this.optionalSignature.signatureAlgorithm=new Te({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:s.toSchema()});break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}var o=this.tbsRequest.toSchema(!0).toBER(!1),u=b();return void 0===u?Promise.reject("Unable to create WebCrypto object"):u.sign(a.algorithm,e,new Uint8Array(o)).then(function(e){"ECDSA"===a.algorithm.name&&(e=A(e)),r.optionalSignature.signature=new se({valueHex:e})},function(e){return Promise.reject("Signing error: "+e)})}},{key:"verify",value:function(){}}],[{key:"defaultValues",value:function(e){switch(e){case"tbsRequest":return new Ar;case"optionalSignature":return new Ir;default:throw new Error("Invalid member name for OCSPRequest class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"tbsRequest":return Ar.compareWithDefault("tbs",t.tbs)&&Ar.compareWithDefault("version",t.version)&&Ar.compareWithDefault("requestorName",t.requestorName)&&Ar.compareWithDefault("requestList",t.requestList)&&Ar.compareWithDefault("requestExtensions",t.requestExtensions);case"optionalSignature":return Ir.compareWithDefault("signatureAlgorithm",t.signatureAlgorithm)&&Ir.compareWithDefault("signature",t.signature)&&Ir.compareWithDefault("certs",t.certs);default:throw new Error("Invalid member name for OCSPRequest class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"OCSPRequest",value:[Ar.schema(e.tbsRequest||{names:{blockName:"tbsRequest"}}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[Ir.schema(e.optionalSignature||{names:{blockName:"optionalSignature"}})]})]})}}]),e}(),Nr=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.responseType=t(r,"responseType",e.defaultValues("responseType")),this.response=t(r,"response",e.defaultValues("response")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{responseType:"responseType",response:"response"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for ResponseBytes");this.responseType=r.result.responseType.valueBlock.toString(),this.response=r.result.response}},{key:"toSchema",value:function(){return new ee({value:[new me({value:this.responseType}),this.response]})}},{key:"toJSON",value:function(){return{responseType:this.responseType,response:this.response.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"responseType":return"";case"response":return new ne;default:throw new Error("Invalid member name for ResponseBytes class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"responseType":return""===r;case"response":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for ResponseBytes class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new me({name:e.responseType||""}),new ne({name:e.response||""})]})}}]),e}(),Pr=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.responseStatus=t(r,"responseStatus",e.defaultValues("responseStatus")),"responseBytes"in r&&(this.responseBytes=t(r,"responseBytes",e.defaultValues("responseBytes"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for OCSP_RESPONSE");this.responseStatus=r.result.responseStatus,"responseBytes"in r.result&&(this.responseBytes=new Nr({schema:r.result.responseBytes}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.responseStatus),"responseBytes"in this&&e.push(new z({idBlock:{tagClass:3,tagNumber:0},value:[this.responseBytes.toSchema()]})),new ee({value:e})}},{key:"toJSON",value:function(){var e={responseStatus:this.responseStatus.toJSON()};return"responseBytes"in this&&(e.responseBytes=this.responseBytes.toJSON()),e}},{key:"getCertificateStatus",value:function(e,t){var r=void 0,a={isForCertificate:!1,status:2};if("responseBytes"in this==!1)return a;if("1.3.6.1.5.5.7.48.1.1"!==this.responseBytes.responseType)return a;try{var n=g(this.responseBytes.response.valueBlock.valueHex);r=new gr({schema:n.result})}catch(e){return a}return r.getCertificateStatus(e,t)}},{key:"sign",value:function(e,t){if("1.3.6.1.5.5.7.48.1.1"===this.responseBytes.responseType){var r=g(this.responseBytes.response.valueBlock.valueHex);return new gr({schema:r.result}).sign(e,t)}return Promise.reject("Unknown ResponseBytes type: "+this.responseBytes.responseType)}},{key:"verify",value:function(){if("responseBytes"in this==!1)return Promise.reject("Empty ResponseBytes field");if("1.3.6.1.5.5.7.48.1.1"===this.responseBytes.responseType){var e=g(this.responseBytes.response.valueBlock.valueHex);return new gr({schema:e.result}).verify()}return Promise.reject("Unknown ResponseBytes type: "+this.responseBytes.responseType)}}],[{key:"defaultValues",value:function(e){switch(e){case"responseStatus":return new le;case"responseBytes":return new Nr;default:throw new Error("Invalid member name for OCSPResponse class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"responseStatus":return r.isEqual(e.defaultValues(t));case"responseBytes":return Nr.compareWithDefault("responseType",r.responseType)&&Nr.compareWithDefault("response",r.response);default:throw new Error("Invalid member name for OCSPResponse class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"OCSPResponse",value:[new le({name:e.responseStatus||"responseStatus"}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[Nr.schema(e.responseBytes||{names:{blockName:"responseBytes"}})]})]})}}]),e}(),Er=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.otherCertFormat=t(r,"otherCertFormat",e.defaultValues("otherCertFormat")),this.otherCert=t(r,"otherCert",e.defaultValues("otherCert")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for OtherCertificateFormat");this.otherCertFormat=r.result.otherCertFormat.valueBlock.toString(),this.otherCert=r.result.otherCert}},{key:"toSchema",value:function(){return new ee({value:[new me({value:this.otherCertFormat}),this.otherCert]})}},{key:"toJSON",value:function(){var e={otherCertFormat:this.otherCertFormat};return this.otherCert instanceof He||(e.otherCert=this.otherCert.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"otherCertFormat":return"";case"otherCert":return new He;default:throw new Error("Invalid member name for OtherCertificateFormat class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new me({name:e.otherCertFormat||"otherCertFormat"}),new He({name:e.otherCert||"otherCert"})]})}}]),e}(),xr=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.type=t(r,"type",e.defaultValues("type")),this.attributes=t(r,"attributes",e.defaultValues("attributes")),this.encodedValue=t(r,"encodedValue",e.defaultValues("encodedValue")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{tagNumber:this.type,attributes:"attributes"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for SignedUnsignedAttributes");if(this.type=r.result.idBlock.tagNumber,this.encodedValue=r.result.valueBeforeDecode,new Uint8Array(this.encodedValue)[0]=49,"attributes"in r.result!=!1)this.attributes=Array.from(r.result.attributes,function(e){return new Me({schema:e})});else if(0===this.type)throw new Error("Wrong structure of SignedUnsignedAttributes")}},{key:"toSchema",value:function(){if(e.compareWithDefault("type",this.type)||e.compareWithDefault("attributes",this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return new z({optional:!0,idBlock:{tagClass:3,tagNumber:this.type},value:Array.from(this.attributes,function(e){return e.toSchema()})})}},{key:"toJSON",value:function(){if(e.compareWithDefault("type",this.type)||e.compareWithDefault("attributes",this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return{type:this.type,attributes:Array.from(this.attributes,function(e){return e.toJSON()})}}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return-1;case"attributes":return[];case"encodedValue":return new ArrayBuffer(0);default:throw new Error("Invalid member name for SignedAndUnsignedAttributes class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"type":return r===e.defaultValues("type");case"attributes":return 0===r.length;case"encodedValue":return 0===r.byteLength;default:throw new Error("Invalid member name for SignedAndUnsignedAttributes class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new z({name:e.blockName||"",optional:!0,idBlock:{tagClass:3,tagNumber:e.tagNumber},value:[new Ue({name:e.attributes||"",value:Me.schema()})]})}}]),e}(),Or=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.version=t(r,"version",e.defaultValues("version")),this.sid=t(r,"sid",e.defaultValues("sid")),this.digestAlgorithm=t(r,"digestAlgorithm",e.defaultValues("digestAlgorithm")),"signedAttrs"in r&&(this.signedAttrs=t(r,"signedAttrs",e.defaultValues("signedAttrs"))),this.signatureAlgorithm=t(r,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signature=t(r,"signature",e.defaultValues("signature")),"unsignedAttrs"in r&&(this.unsignedAttrs=t(r,"unsignedAttrs",e.defaultValues("unsignedAttrs"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CMS_SIGNER_INFO");this.version=r.result["SignerInfo.version"].valueBlock.valueDec;var a=r.result["SignerInfo.sid"];1===a.idBlock.tagClass?this.sid=new Wt({schema:a}):this.sid=a,this.digestAlgorithm=new Te({schema:r.result["SignerInfo.digestAlgorithm"]}),"SignerInfo.signedAttrs"in r.result&&(this.signedAttrs=new xr({type:0,schema:r.result["SignerInfo.signedAttrs"]})),this.signatureAlgorithm=new Te({schema:r.result["SignerInfo.signatureAlgorithm"]}),this.signature=r.result["SignerInfo.signature"],"SignerInfo.unsignedAttrs"in r.result&&(this.unsignedAttrs=new xr({type:1,schema:r.result["SignerInfo.unsignedAttrs"]}))}},{key:"toSchema",value:function(){if(e.compareWithDefault("sid",this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');var t=[];return t.push(new ue({value:this.version})),this.sid instanceof Wt?t.push(this.sid.toSchema()):t.push(this.sid),t.push(this.digestAlgorithm.toSchema()),"signedAttrs"in this&&!1===e.compareWithDefault("signedAttrs",this.signedAttrs)&&t.push(this.signedAttrs.toSchema()),t.push(this.signatureAlgorithm.toSchema()),t.push(this.signature),"unsignedAttrs"in this&&!1===e.compareWithDefault("unsignedAttrs",this.unsignedAttrs)&&t.push(this.unsignedAttrs.toSchema()),new ee({value:t})}},{key:"toJSON",value:function(){if(e.compareWithDefault("sid",this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');var t={version:this.version};return this.sid instanceof He||(t.sid=this.sid.toJSON()),t.digestAlgorithm=this.digestAlgorithm.toJSON(),!1===e.compareWithDefault("signedAttrs",this.signedAttrs)&&(t.signedAttrs=this.signedAttrs.toJSON()),t.signatureAlgorithm=this.signatureAlgorithm.toJSON(),t.signature=this.signature.toJSON(),!1===e.compareWithDefault("unsignedAttrs",this.unsignedAttrs)&&(t.unsignedAttrs=this.unsignedAttrs.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"sid":return new He;case"digestAlgorithm":return new Te;case"signedAttrs":return new xr({type:0});case"signatureAlgorithm":return new Te;case"signature":return new ne;case"unsignedAttrs":return new xr({type:1});default:throw new Error("Invalid member name for SignerInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return e.defaultValues("version")===r;case"sid":return r instanceof He;case"digestAlgorithm":return r instanceof Te!=!1&&r.isEqual(e.defaultValues("digestAlgorithm"));case"signedAttrs":return xr.compareWithDefault("type",r.type)&&xr.compareWithDefault("attributes",r.attributes)&&xr.compareWithDefault("encodedValue",r.encodedValue);case"signatureAlgorithm":return r instanceof Te!=!1&&r.isEqual(e.defaultValues("signatureAlgorithm"));case"signature":case"unsignedAttrs":return xr.compareWithDefault("type",r.type)&&xr.compareWithDefault("attributes",r.attributes)&&xr.compareWithDefault("encodedValue",r.encodedValue);default:throw new Error("Invalid member name for SignerInfo class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:"SignerInfo",value:[new ue({name:e.version||"SignerInfo.version"}),new Ke({value:[Wt.schema(e.sid||{names:{blockName:"SignerInfo.sid"}}),new z({optional:!0,name:e.sid||"SignerInfo.sid",idBlock:{tagClass:3,tagNumber:0},value:[new ne]})]}),Te.schema(e.digestAlgorithm||{names:{blockName:"SignerInfo.digestAlgorithm"}}),xr.schema(e.signedAttrs||{names:{blockName:"SignerInfo.signedAttrs",tagNumber:0}}),Te.schema(e.signatureAlgorithm||{names:{blockName:"SignerInfo.signatureAlgorithm"}}),new ne({name:e.signature||"SignerInfo.signature"}),xr.schema(e.unsignedAttrs||{names:{blockName:"SignerInfo.unsignedAttrs",tagNumber:1}})]})}}]),e}(),Vr=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.version=t(r,"version",e.defaultValues("version")),this.policy=t(r,"policy",e.defaultValues("policy")),this.messageImprint=t(r,"messageImprint",e.defaultValues("messageImprint")),this.serialNumber=t(r,"serialNumber",e.defaultValues("serialNumber")),this.genTime=t(r,"genTime",e.defaultValues("genTime")),"accuracy"in r&&(this.accuracy=t(r,"accuracy",e.defaultValues("accuracy"))),"ordering"in r&&(this.ordering=t(r,"ordering",e.defaultValues("ordering"))),"nonce"in r&&(this.nonce=t(r,"nonce",e.defaultValues("nonce"))),"tsa"in r&&(this.tsa=t(r,"tsa",e.defaultValues("tsa"))),"extensions"in r&&(this.extensions=t(r,"extensions",e.defaultValues("extensions"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for TST_INFO");this.version=r.result["TSTInfo.version"].valueBlock.valueDec,this.policy=r.result["TSTInfo.policy"].valueBlock.toString(),this.messageImprint=new Cr({schema:r.result["TSTInfo.messageImprint"]}),this.serialNumber=r.result["TSTInfo.serialNumber"],this.genTime=r.result["TSTInfo.genTime"].toDate(),"TSTInfo.accuracy"in r.result&&(this.accuracy=new at({schema:r.result["TSTInfo.accuracy"]})),"TSTInfo.ordering"in r.result&&(this.ordering=r.result["TSTInfo.ordering"].valueBlock.value),"TSTInfo.nonce"in r.result&&(this.nonce=r.result["TSTInfo.nonce"]),"TSTInfo.tsa"in r.result&&(this.tsa=new tt({schema:r.result["TSTInfo.tsa"]})),"TSTInfo.extensions"in r.result&&(this.extensions=Array.from(r.result["TSTInfo.extensions"],function(e){return new xt({schema:e})}))}},{key:"toSchema",value:function(){var e=[];return e.push(new ue({value:this.version})),e.push(new me({value:this.policy})),e.push(this.messageImprint.toSchema()),e.push(this.serialNumber),e.push(new Oe({valueDate:this.genTime})),"accuracy"in this&&e.push(this.accuracy.toSchema()),"ordering"in this&&e.push(new Y({value:this.ordering})),"nonce"in this&&e.push(this.nonce),"tsa"in this&&e.push(new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.tsa.toSchema()]})),"extensions"in this&&e.push(new z({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.extensions,function(e){return e.toSchema()})})),new ee({value:e})}},{key:"toJSON",value:function(){var e={version:this.version,policy:this.policy,messageImprint:this.messageImprint.toJSON(),serialNumber:this.serialNumber.toJSON(),genTime:this.genTime};return"accuracy"in this&&(e.accuracy=this.accuracy.toJSON()),"ordering"in this&&(e.ordering=this.ordering),"nonce"in this&&(e.nonce=this.nonce.toJSON()),"tsa"in this&&(e.tsa=this.tsa.toJSON()),"extensions"in this&&(e.extensions=Array.from(this.extensions,function(e){return e.toJSON()})),e}},{key:"verify",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Promise.resolve(),a=void 0,n=b();if(void 0===n)return Promise.reject("Unable to create WebCrypto object");if(!("data"in t))return Promise.reject('"data" is a mandatory attribute for TST_INFO verification');a=t.data,"notBefore"in t&&t.notBefore,"notAfter"in t&&t.notAfter;var i=N(this.messageImprint.hashAlgorithm.algorithmId);return"name"in i==!1?Promise.reject("Unsupported signature algorithm: "+this.messageImprint.hashAlgorithm.algorithmId):r=r.then(function(){return n.digest(i.name,new Uint8Array(a))}).then(function(t){return l(t,e.messageImprint.hashedMessage.valueBlock.valueHex)})}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"policy":return"";case"messageImprint":return new Cr;case"serialNumber":return new ue;case"genTime":return new Date(0,0,0);case"accuracy":return new at;case"ordering":return!1;case"nonce":return new ue;case"tsa":return new tt;case"extensions":return[];default:throw new Error("Invalid member name for TSTInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":case"policy":case"genTime":case"ordering":return r===e.defaultValues(t);case"messageImprint":return Cr.compareWithDefault("hashAlgorithm",r.hashAlgorithm)&&Cr.compareWithDefault("hashedMessage",r.hashedMessage);case"serialNumber":case"nonce":return r.isEqual(e.defaultValues(t));case"accuracy":return at.compareWithDefault("seconds",r.seconds)&&at.compareWithDefault("millis",r.millis)&&at.compareWithDefault("micros",r.micros);case"tsa":return tt.compareWithDefault("type",r.type)&&tt.compareWithDefault("value",r.value);case"extensions":return 0===r.length;default:throw new Error("Invalid member name for TSTInfo class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"TSTInfo",value:[new ue({name:e.version||"TSTInfo.version"}),new me({name:e.policy||"TSTInfo.policy"}),Cr.schema(e.messageImprint||{names:{blockName:"TSTInfo.messageImprint"}}),new ue({name:e.serialNumber||"TSTInfo.serialNumber"}),new Oe({name:e.genTime||"TSTInfo.genTime"}),at.schema(e.accuracy||{names:{blockName:"TSTInfo.accuracy"}}),new Y({name:e.ordering||"TSTInfo.ordering",optional:!0}),new ue({name:e.nonce||"TSTInfo.nonce",optional:!0}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[tt.schema(e.tsa||{names:{blockName:"TSTInfo.tsa"}})]}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Ue({name:e.extensions||"TSTInfo.extensions",value:xt.schema(e.extension||{})})]})]})}}]),e}(),_r=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.version=t(r,"version",e.defaultValues("version")),this.digestAlgorithms=t(r,"digestAlgorithms",e.defaultValues("digestAlgorithms")),this.encapContentInfo=t(r,"encapContentInfo",e.defaultValues("encapContentInfo")),"certificates"in r&&(this.certificates=t(r,"certificates",e.defaultValues("certificates"))),"crls"in r&&(this.crls=t(r,"crls",e.defaultValues("crls"))),this.signerInfos=t(r,"signerInfos",e.defaultValues("signerInfos")),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CMS_SIGNED_DATA");this.version=r.result["SignedData.version"].valueBlock.valueDec,"SignedData.digestAlgorithms"in r.result&&(this.digestAlgorithms=Array.from(r.result["SignedData.digestAlgorithms"],function(e){return new Te({schema:e})})),this.encapContentInfo=new kr({schema:r.result["SignedData.encapContentInfo"]}),"SignedData.certificates"in r.result&&(this.certificates=Array.from(r.result["SignedData.certificates"],function(e){return 1===e.idBlock.tagClass?new Vt({schema:e}):3===e.idBlock.tagClass&&3===e.idBlock.tagNumber?(e.idBlock.tagClass=1,e.idBlock.tagNumber=16,new Er({schema:e})):new Vt})),"SignedData.crls"in r.result&&(this.crls=Array.from(r.result["SignedData.crls"],function(e){return 1===e.idBlock.tagClass?new Dt({schema:e}):(e.idBlock.tagClass=1,e.idBlock.tagNumber=16,new Tt({schema:e}))})),"SignedData.signerInfos"in r.result&&(this.signerInfos=Array.from(r.result["SignedData.signerInfos"],function(e){return new Or({schema:e})}))}},{key:"toSchema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return t.push(new ue({value:this.version})),t.push(new te({value:Array.from(this.digestAlgorithms,function(t){return t.toSchema(e)})})),t.push(this.encapContentInfo.toSchema()),"certificates"in this&&t.push(new z({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.certificates,function(t){if(t instanceof Er){var r=t.toSchema(e);return r.idBlock.tagClass=3,r.idBlock.tagNumber=3,r}return t.toSchema(e)})})),"crls"in this&&t.push(new z({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.crls,function(t){if(t instanceof Tt){var r=t.toSchema(e);return r.idBlock.tagClass=3,r.idBlock.tagNumber=1,r}return t.toSchema(e)})})),t.push(new te({value:Array.from(this.signerInfos,function(t){return t.toSchema(e)})})),new ee({value:t})}},{key:"toJSON",value:function(){var e={version:this.version,digestAlgorithms:Array.from(this.digestAlgorithms,function(e){return e.toJSON()}),encapContentInfo:this.encapContentInfo.toJSON()};return"certificates"in this&&(e.certificates=Array.from(this.certificates,function(e){return e.toJSON()})),"crls"in this&&(e.crls=Array.from(this.crls,function(e){return e.toJSON()})),e.signerInfos=Array.from(this.signerInfos,function(e){return e.toJSON()}),e}},{key:"verify",value:function(){function e(e){if(!0===e.issuer.isEqual(A.issuer)&&!0===e.serialNumber.isEqual(A.serialNumber))return null;var t=!1,r=!0,a=!1,n=void 0;try{for(var i,s=e.extensions[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var o=i.value;"2.5.29.19"===o.extnID&&"cA"in o.parsedValue&&!0===o.parsedValue.cA&&(t=!0)}}catch(e){a=!0,n=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw n}}return t?e:null}var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.signer,n=void 0===a?-1:a,i=r.data,o=void 0===i?new ArrayBuffer(0):i,u=r.trustedCerts,c=void 0===u?[]:u,h=r.checkDate,m=void 0===h?new Date:h,f=r.checkChain,v=void 0!==f&&f,d=(r.includeSignerCertificate,r.extendedMode),y=void 0!==d&&d,p=Promise.resolve(),k=new ArrayBuffer(0),w=void 0,C="",A={},I=b();return void 0===I?Promise.reject("Unable to create WebCrypto object"):-1===n?y?Promise.reject({date:m,code:1,message:"Unable to get signer index from input parameters",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}):Promise.reject("Unable to get signer index from input parameters"):"certificates"in this==!1?y?Promise.reject({date:m,code:2,message:"No certificates attached to this signed data",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}):Promise.reject("No certificates attached to this signed data"):(p=this.signerInfos[n].sid instanceof Wt?p.then(function(){var e=!0,r=!1,a=void 0;try{for(var i,s=t.certificates[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var o=i.value;if(o instanceof Vt!=!1&&(o.issuer.isEqual(t.signerInfos[n].sid.issuer)&&o.serialNumber.isEqual(t.signerInfos[n].sid.serialNumber)))return A=o,Promise.resolve()}}catch(e){r=!0,a=e}finally{try{!e&&s.return&&s.return()}finally{if(r)throw a}}return y?Promise.reject({date:m,code:3,message:"Unable to find signer certificate",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}):Promise.reject("Unable to find signer certificate")}):p.then(function(){return Promise.all(Array.from(t.certificates.filter(function(e){return e instanceof Vt}),function(e){return I.digest({name:"sha-1"},new Uint8Array(e.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex))})).then(function(e){var r=!0,a=!1,i=void 0;try{for(var s,o=t.certificates.entries()[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=_slicedToArray(s.value,2),c=u[0],h=u[1];if(h instanceof Vt!=!1&&l(e[c],t.signerInfos[n].sid.valueBlock.valueHex))return A=h,Promise.resolve()}}catch(e){a=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw i}}return y?Promise.reject({date:m,code:3,message:"Unable to find signer certificate",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}):Promise.reject("Unable to find signer certificate")},function(){return y?Promise.reject({date:m,code:3,message:"Unable to find signer certificate",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}):Promise.reject("Unable to find signer certificate")})}),p=p.then(function(){if("1.2.840.113549.1.9.16.1.4"===t.encapContentInfo.eContentType){if("eContent"in t.encapContentInfo==!1)return!1;var e=g(t.encapContentInfo.eContent.valueBlock.valueHex),r=void 0;try{r=new Vr({schema:e.result})}catch(e){return!1}return 0===o.byteLength?y?Promise.reject({date:m,code:4,message:"Missed detached data input array",signatureVerified:null,signerCertificate:A,signerCertificateVerified:null}):Promise.reject("Missed detached data input array"):r.verify({data:o})}return!0}),v&&(p=p.then(function(r){return!1!==r&&Promise.all(Array.from(t.certificates.filter(function(e){return e instanceof Vt}),function(t){return e(t)})).then(function(e){var r,a=new dr({checkDate:m,certs:Array.from(e.filter(function(e){return null!==e})),trustedCerts:c});if(a.certs.push(A),"crls"in t){var n=!0,i=!1,s=void 0;try{for(var o,u=t.crls[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var l=o.value;l instanceof Dt?a.crls.push(l):"1.3.6.1.5.5.7.48.1.1"===l.otherRevInfoFormat&&a.ocsps.push(new gr({schema:l.otherRevInfo}))}}catch(e){i=!0,s=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw s}}}return"ocsps"in t&&(r=a.ocsps).push.apply(r,_toConsumableArray(t.ocsps)),a.verify().then(function(e){return!0===e.result?Promise.resolve(!0):y?Promise.reject({date:m,code:5,message:"Validation of signer's certificate failed: "+e.resultMessage,signatureVerified:null,signerCertificate:A,signerCertificateVerified:!1}):Promise.reject("Validation of signer's certificate failed")},function(e){return y?Promise.reject({date:m,code:5,message:"Validation of signer's certificate failed with error: "+(e instanceof Object?e.resultMessage:e),signatureVerified:null,signerCertificate:A,signerCertificateVerified:!1}):Promise.reject("Validation of signer's certificate failed with error: "+(e instanceof Object?e.resultMessage:e))})},function(e){return y?Promise.reject({date:m,code:6,message:"Error during checking certificates for CA flag: "+e,signatureVerified:null,signerCertificate:A,signerCertificateVerified:null}):Promise.reject("Error during checking certificates for CA flag: "+e)})})),p=p.then(function(e){if(!1===e)return!1;var r=N(t.signerInfos[n].digestAlgorithm.algorithmId);return"name"in r==!1?y?Promise.reject({date:m,code:7,message:"Unsupported signature algorithm: "+t.signerInfos[n].digestAlgorithm.algorithmId,signatureVerified:null,signerCertificate:A,signerCertificateVerified:!0}):Promise.reject("Unsupported signature algorithm: "+t.signerInfos[n].digestAlgorithm.algorithmId):(C=r.name,!0)}),p=p.then(function(e){if(!1===e)return!1;if("eContent"in t.encapContentInfo)if(1===t.encapContentInfo.eContent.idBlock.tagClass&&4===t.encapContentInfo.eContent.idBlock.tagNumber)if(!1===t.encapContentInfo.eContent.idBlock.isConstructed)o=t.encapContentInfo.eContent.valueBlock.valueHex;else{var r=!0,a=!1,i=void 0;try{for(var u,l=t.encapContentInfo.eContent.valueBlock.value[Symbol.iterator]();!(r=(u=l.next()).done);r=!0){var c=u.value;o=s(o,c.valueBlock.valueHex)}}catch(e){a=!0,i=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw i}}}else o=t.encapContentInfo.eContent.valueBlock.valueHex;else if(0===o.byteLength)return y?Promise.reject({date:m,code:8,message:"Missed detached data input array",signatureVerified:null,signerCertificate:A,signerCertificateVerified:!0}):Promise.reject("Missed detached data input array");if("signedAttrs"in t.signerInfos[n]){var h=!1,f=!1,v=!0,d=!1,g=void 0;try{for(var p,b=t.signerInfos[n].signedAttrs.attributes[Symbol.iterator]();!(v=(p=b.next()).done);v=!0){var w=p.value;if("1.2.840.113549.1.9.3"===w.type&&(h=!0),"1.2.840.113549.1.9.4"===w.type&&(f=!0,k=w.values[0].valueBlock.valueHex),h&&f)break}}catch(e){d=!0,g=e}finally{try{!v&&b.return&&b.return()}finally{if(d)throw g}}if(!1===h)return y?Promise.reject({date:m,code:9,message:'Attribute "content-type" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:A,signerCertificateVerified:!0}):Promise.reject('Attribute "content-type" is a mandatory attribute for "signed attributes"');if(!1===f)return y?Promise.reject({date:m,code:10,message:'Attribute "message-digest" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:A,signerCertificateVerified:!0}):Promise.reject('Attribute "message-digest" is a mandatory attribute for "signed attributes"')}return!0}),p=p.then(function(e){if(!1===e)return!1;var t=void 0,r=N(t="1.2.840.113549.1.1.10"===A.signatureAlgorithm.algorithmId?A.signatureAlgorithm.algorithmId:A.subjectPublicKeyInfo.algorithm.algorithmId);if("name"in r==!1)return y?Promise.reject({date:m,code:11,message:"Unsupported public key algorithm: "+t,signatureVerified:null,signerCertificate:A,signerCertificateVerified:!0}):Promise.reject("Unsupported public key algorithm: "+t);var a=S(r.name,"importkey");if("hash"in a.algorithm&&(a.algorithm.hash.name=C),"ECDSA"===r.name){var n=!1;if("algorithmParams"in A.subjectPublicKeyInfo.algorithm==!0&&"idBlock"in A.subjectPublicKeyInfo.algorithm.algorithmParams&&1===A.subjectPublicKeyInfo.algorithm.algorithmParams.idBlock.tagClass&&6===A.subjectPublicKeyInfo.algorithm.algorithmParams.idBlock.tagNumber&&(n=!0),!1===n)return Promise.reject("Incorrect type for ECDSA public key parameters");var i=N(A.subjectPublicKeyInfo.algorithm.algorithmParams.valueBlock.toString());if("name"in i==!1)return Promise.reject("Unsupported named curve algorithm: "+A.subjectPublicKeyInfo.algorithm.algorithmParams.valueBlock.toString());a.algorithm.namedCurve=i.name}var s=A.subjectPublicKeyInfo.toSchema().toBER(!1),o=new Uint8Array(s);return I.importKey("spki",o,a.algorithm,!0,a.usages)}),p=p.then(function(e){return"boolean"!=typeof e&&(w=e,!("signedAttrs"in t.signerInfos[n])||I.digest(C,new Uint8Array(o)))}).then(function(e){return!1!==e&&(!("signedAttrs"in t.signerInfos[n])||!!l(e,k)&&(o=t.signerInfos[n].signedAttrs.encodedValue,!0))}).then(function(e){if(!1===e)return!1;var r=S(w.algorithm.name,"verify");if("hash"in r.algorithm&&(r.algorithm.hash.name=C),"RSA-PSS"===w.algorithm.name){var a=void 0;try{a=new Je({schema:t.signerInfos[n].signatureAlgorithm.algorithmParams})}catch(e){return y?Promise.reject({date:m,code:12,message:e,signatureVerified:null,signerCertificate:A,signerCertificateVerified:!0}):Promise.reject(e)}r.algorithm.saltLength="saltLength"in a?a.saltLength:20;var i="SHA-1";if("hashAlgorithm"in a){var s=N(a.hashAlgorithm.algorithmId);if("name"in s==!1)return y?Promise.reject({date:m,code:13,message:"Unrecognized hash algorithm: "+a.hashAlgorithm.algorithmId,signatureVerified:null,signerCertificate:A,signerCertificateVerified:!0}):Promise.reject("Unrecognized hash algorithm: "+a.hashAlgorithm.algorithmId);i=s.name}r.algorithm.hash.name=i}var u=t.signerInfos[n].signature.valueBlock.valueHex;return"ECDSA"===w.algorithm.name&&(u=B(g(u).result)),I.verify(r.algorithm,w,new Uint8Array(u),new Uint8Array(o))}),p=p.then(function(e){return y?{date:m,code:14,message:"",signatureVerified:e,signerCertificate:A,signerCertificateVerified:!0}:e},function(e){return y?"code"in e?Promise.reject(e):Promise.reject({date:m,code:15,message:"Error during verification: "+e.message,signatureVerified:null,signerCertificate:A,signerCertificateVerified:!0}):Promise.reject(e)}))}},{key:"sign",value:function(e,t,r,a){var n=this;a=a||new ArrayBuffer(0);var i="";if(void 0===e)return Promise.reject("Need to provide a private key for signing");if(void 0===r&&(r="SHA-1"),""===(i=C({name:r})))return Promise.reject("Unsupported hash algorithm: "+r);0===this.digestAlgorithms.filter(function(e){return e.algorithmId===i}).length&&this.digestAlgorithms.push(new Te({algorithmId:i,algorithmParams:new re})),this.signerInfos[t].digestAlgorithm=new Te({algorithmId:i,algorithmParams:new re});var o=S(e.algorithm.name,"sign");switch(o.algorithm.hash.name=r,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":this.signerInfos[t].signatureAlgorithm.algorithmId=C(o.algorithm);break;case"RSA-PSS":switch(r.toUpperCase()){case"SHA-256":o.algorithm.saltLength=32;break;case"SHA-384":o.algorithm.saltLength=48;break;case"SHA-512":o.algorithm.saltLength=64}var u={};if("SHA-1"!==r.toUpperCase()){if(""===(i=C({name:r})))return Promise.reject("Unsupported hash algorithm: "+r);u.hashAlgorithm=new Te({algorithmId:i,algorithmParams:new re}),u.maskGenAlgorithm=new Te({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:u.hashAlgorithm.toSchema()})}20!==o.algorithm.saltLength&&(u.saltLength=o.algorithm.saltLength);var l=new Je(u);this.signerInfos[t].signatureAlgorithm=new Te({algorithmId:"1.2.840.113549.1.1.10",algorithmParams:l.toSchema()});break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}if("signedAttrs"in this.signerInfos[t])0!==this.signerInfos[t].signedAttrs.encodedValue.byteLength?a=this.signerInfos[t].signedAttrs.encodedValue:(a=this.signerInfos[t].signedAttrs.toSchema(!0).toBER(!1),new Uint8Array(a)[0]=49);else if("eContent"in this.encapContentInfo)if(1===this.encapContentInfo.eContent.idBlock.tagClass&&4===this.encapContentInfo.eContent.idBlock.tagNumber)if(!1===this.encapContentInfo.eContent.idBlock.isConstructed)a=this.encapContentInfo.eContent.valueBlock.valueHex;else{var c=!0,h=!1,m=void 0;try{for(var f,v=this.encapContentInfo.eContent.valueBlock.value[Symbol.iterator]();!(c=(f=v.next()).done);c=!0)a=s(a,f.value.valueBlock.valueHex)}catch(e){h=!0,m=e}finally{try{!c&&v.return&&v.return()}finally{if(h)throw m}}}else a=this.encapContentInfo.eContent.valueBlock.valueHex;else if(0===a.byteLength)return Promise.reject("Missed detached data input array");var d=b();return void 0===d?Promise.reject("Unable to create WebCrypto object"):d.sign(o.algorithm,e,new Uint8Array(a)).then(function(e){return"ECDSA"===o.algorithm.name&&(e=A(e)),n.signerInfos[t].signature=new ne({valueHex:e}),e},function(e){return Promise.reject("Signing error: "+e)})}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"digestAlgorithms":return[];case"encapContentInfo":return new kr;case"certificates":case"crls":case"signerInfos":return[];default:throw new Error("Invalid member name for SignedData class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues("version");case"encapContentInfo":return new kr;case"digestAlgorithms":case"certificates":case"crls":case"signerInfos":return 0===r.length;default:throw new Error("Invalid member name for SignedData class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return"optional"in e==!1&&(e.optional=!1),new ee({name:e.blockName||"SignedData",optional:e.optional,value:[new ue({name:e.version||"SignedData.version"}),new te({value:[new Ue({name:e.digestAlgorithms||"SignedData.digestAlgorithms",value:Te.schema()})]}),kr.schema(e.encapContentInfo||{names:{blockName:"SignedData.encapContentInfo"}}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Lt.schema(e.certificates||{names:{certificates:"SignedData.certificates"}}).valueBlock.value}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Jt.schema(e.crls||{names:{crls:"SignedData.crls"}}).valueBlock.value}),new te({value:[new Ue({name:e.signerInfos||"SignedData.signerInfos",value:Or.schema()})]})]})}}]),e}(),jr=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.version=t(r,"version",e.defaultValues("version")),this.authSafe=t(r,"authSafe",e.defaultValues("authSafe")),"macData"in r&&(this.macData=t(r,"macData",e.defaultValues("macData"))),"parsedValue"in r&&(this.parsedValue=t(r,"parsedValue",e.defaultValues("parsedValue"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{version:"version",authSafe:{names:{blockName:"authSafe"}},macData:{names:{blockName:"macData"}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PFX");this.version=r.result.version.valueBlock.valueDec,this.authSafe=new it({schema:r.result.authSafe}),"macData"in r.result&&(this.macData=new wr({schema:r.result.macData}))}},{key:"toSchema",value:function(){var e=[new ue({value:this.version}),this.authSafe.toSchema()];return"macData"in this&&e.push(this.macData.toSchema()),new ee({value:e})}},{key:"toJSON",value:function(){var e={version:this.version,authSafe:this.authSafe.toJSON()};return"macData"in this&&(e.macData=this.macData.toJSON()),e}},{key:"makeInternalValues",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t instanceof Object==!1)return Promise.reject('The "parameters" must has "Object" type');if("parsedValue"in this==!1)return Promise.reject('Please call "parseValues" function first in order to make "parsedValue" data');if("integrityMode"in this.parsedValue==!1)return Promise.reject('Absent mandatory parameter "integrityMode" inside "parsedValue"');var r=Promise.resolve(),a=b();if(void 0===a)return Promise.reject("Unable to create WebCrypto object");if("authenticatedSafe"in this.parsedValue==!1)return Promise.reject('Absent mandatory parameter "authenticatedSafe" in "parsedValue"');switch(this.parsedValue.integrityMode){case 0:if("iterations"in t==!1)return Promise.reject('Absent mandatory parameter "iterations"');if("pbkdf2HashAlgorithm"in t==!1)return Promise.reject('Absent mandatory parameter "pbkdf2HashAlgorithm"');if("hmacHashAlgorithm"in t==!1)return Promise.reject('Absent mandatory parameter "hmacHashAlgorithm"');if("password"in t==!1)return Promise.reject('Absent mandatory parameter "password"');var n=new ArrayBuffer(64),i=new Uint8Array(n);w(i);var s=void 0;switch(t.hmacHashAlgorithm.toLowerCase()){case"sha-1":s=160;break;case"sha-256":s=256;break;case"sha-384":s=384;break;case"sha-512":s=512;break;default:return Promise.reject('Incorrect "parameters.hmacHashAlgorithm" parameter: '+t.hmacHashAlgorithm)}var o={name:"HMAC",length:s,hash:{name:t.hmacHashAlgorithm}};r=(r=(r=(r=r.then(function(){var e=new Uint8Array(t.password);return a.importKey("raw",e,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)})).then(function(e){return a.deriveKey({name:"PBKDF2",hash:{name:t.pbkdf2HashAlgorithm},salt:i,iterations:t.iterations},e,o,!1,["sign"])},function(e){return Promise.reject(e)})).then(function(t){e.authSafe=new it({contentType:"1.2.840.113549.1.7.1",content:new ne({valueHex:e.parsedValue.authenticatedSafe.toSchema().toBER(!1)})});var r=e.authSafe.content.toBER(!1),n=new Uint8Array(r);return a.sign(o,t,n)},function(e){return Promise.reject(e)})).then(function(r){e.macData=new wr({mac:new pr({digestAlgorithm:new Te({algorithmId:C({name:t.hmacHashAlgorithm})}),digest:new ne({valueHex:r})}),macSalt:new ne({valueHex:n}),iterations:t.iterations})},function(e){return Promise.reject(e)});break;case 1:if("signingCertificate"in t==!1)return Promise.reject('Absent mandatory parameter "signingCertificate"');if("privateKey"in t==!1)return Promise.reject('Absent mandatory parameter "privateKey"');if("hashAlgorithm"in t==!1)return Promise.reject('Absent mandatory parameter "hashAlgorithm"');var u=this.parsedValue.authenticatedSafe.toSchema().toBER(!1),l=new _r({version:1,encapContentInfo:new kr({eContentType:"1.2.840.113549.1.7.1",eContent:new ne({valueHex:u})}),certificates:[t.signingCertificate]});r=(r=(r=(r=r.then(function(){return a.digest({name:t.hashAlgorithm},new Uint8Array(u))})).then(function(e){var r=[];r.push(new Me({type:"1.2.840.113549.1.9.3",values:[new me({value:"1.2.840.113549.1.7.1"})]})),r.push(new Me({type:"1.2.840.113549.1.9.5",values:[new xe({valueDate:new Date})]})),r.push(new Me({type:"1.2.840.113549.1.9.4",values:[new ne({valueHex:e})]})),l.signerInfos.push(new Or({version:1,sid:new Wt({issuer:t.signingCertificate.issuer,serialNumber:t.signingCertificate.serialNumber}),signedAttrs:new xr({type:0,attributes:r})}))},function(e){return Promise.reject("Error during making digest for message: "+e)})).then(function(){return l.sign(t.privateKey,0,t.hashAlgorithm)})).then(function(){e.authSafe=new it({contentType:"1.2.840.113549.1.7.2",content:l.toSchema(!0)})},function(e){return Promise.reject("Error during making signature: "+e)});break;default:return Promise.reject('Parameter "integrityMode" has unknown value: '+t.integrityMode)}return r}},{key:"parseInternalValues",value:function(e){var t=this;if(e instanceof Object==!1)return Promise.reject('The "parameters" must has "Object" type');"checkIntegrity"in e==!1&&(e.checkIntegrity=!0);var r=Promise.resolve(),a=b();if(void 0===a)return Promise.reject("Unable to create WebCrypto object");switch(this.parsedValue={},this.authSafe.contentType){case"1.2.840.113549.1.7.1":if("password"in e==!1)return Promise.reject('Absent mandatory parameter "password"');if(this.parsedValue.integrityMode=0,this.authSafe.content instanceof ne==!1)return Promise.reject('Wrong type of "this.authSafe.content"');var n=g(this.authSafe.content.valueBlock.valueHex);if(-1===n.offset)return Promise.reject('Error during parsing of ASN.1 data inside "this.authSafe.content"');if(this.parsedValue.authenticatedSafe=new lr({schema:n.result}),e.checkIntegrity){if("macData"in this==!1)return Promise.reject('Absent "macData" value, can not check PKCS# data integrity');var i=N(this.macData.mac.digestAlgorithm.algorithmId);if("name"in i==!1)return Promise.reject("Unsupported digest algorithm: "+this.macData.mac.digestAlgorithm.algorithmId);var o=void 0;switch(i.name.toLowerCase()){case"sha-1":o=160;break;case"sha-256":o=256;break;case"sha-384":o=384;break;case"sha-512":o=512;break;default:return Promise.reject('Incorrect "hashAlgorithm": '+i.name)}var u={name:"HMAC",length:o,hash:{name:i.name}};r=(r=(r=(r=r.then(function(){var t=new Uint8Array(e.password);return a.importKey("raw",t,"PBKDF2",!1,["deriveKey"])},function(e){return Promise.reject(e)})).then(function(e){return a.deriveKey({name:"PBKDF2",hash:{name:i.name},salt:new Uint8Array(t.macData.macSalt.valueBlock.valueHex),iterations:t.macData.iterations},e,u,!1,["verify"])},function(e){return Promise.reject(e)})).then(function(e){var r=t.authSafe.content.toBER(!1),n=new Uint8Array(r);return a.verify(u,e,new Uint8Array(t.macData.mac.digest.valueBlock.valueHex),n)},function(e){return Promise.reject(e)})).then(function(e){if(!1===e)return Promise.reject("Integrity for the PKCS#12 data is broken!")},function(e){return Promise.reject(e)})}break;case"1.2.840.113549.1.7.2":this.parsedValue.integrityMode=1;var l=new _r({schema:this.authSafe.content});if("eContent"in l.encapContentInfo==!1)return Promise.reject('Absent of attached data in "cmsSigned.encapContentInfo"');if(l.encapContentInfo.eContent instanceof ne==!1)return Promise.reject('Wrong type of "cmsSigned.encapContentInfo.eContent"');var c=new ArrayBuffer(0);if(!1===l.encapContentInfo.eContent.idBlock.isConstructed)c=l.encapContentInfo.eContent.valueBlock.valueHex;else for(var h=0;h<l.encapContentInfo.eContent.valueBlock.value.length;h++)c=s(c,l.encapContentInfo.eContent.valueBlock.value[h].valueBlock.valueHex);var m=g(c);if(-1===m.offset)return Promise.reject('Error during parsing of ASN.1 data inside "this.authSafe.content"');this.parsedValue.authenticatedSafe=new lr({schema:m.result}),r=r.then(function(){return l.verify({signer:0,checkChain:!1})}).then(function(e){if(!1===e)return Promise.reject("Integrity for the PKCS#12 data is broken!")},function(e){return Promise.reject("Error during integrity verification: "+e)});break;default:return Promise.reject('Incorrect value for "this.authSafe.contentType": '+this.authSafe.contentType)}return r.then(function(){return t},function(e){return Promise.reject("Error during parsing: "+e)})}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 3;case"authSafe":return new it;case"macData":return new wr;case"parsedValue":return{};default:throw new Error("Invalid member name for PFX class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues(t);case"authSafe":return it.compareWithDefault("contentType",r.contentType)&&it.compareWithDefault("content",r.content);case"macData":return wr.compareWithDefault("mac",r.mac)&&wr.compareWithDefault("macSalt",r.macSalt)&&wr.compareWithDefault("iterations",r.iterations);case"parsedValue":return r instanceof Object&&0===Object.keys(r).length;default:throw new Error("Invalid member name for PFX class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new ue({name:e.version||"version"}),it.schema(e.authSafe||{names:{blockName:"authSafe"}}),wr.schema(e.macData||{names:{blockName:"macData",optional:!0}})]})}}]),e}(),Dr=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.status=t(r,"status",e.defaultValues("status")),"statusStrings"in r&&(this.statusStrings=t(r,"statusStrings",e.defaultValues("statusStrings"))),"failInfo"in r&&(this.failInfo=t(r,"failInfo",e.defaultValues("failInfo"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema({names:{status:"status",statusStrings:"statusStrings",failInfo:"failInfo"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PKIStatusInfo");var a=r.result.status;if(!0===a.valueBlock.isHexOnly||a.valueBlock.valueDec<0||a.valueBlock.valueDec>5)throw new Error('PKIStatusInfo "status" has invalid value');this.status=a.valueBlock.valueDec,"statusStrings"in r.result&&(this.statusStrings=r.result.statusStrings),"failInfo"in r.result&&(this.failInfo=r.result.failInfo)}},{key:"toSchema",value:function(){var e=[];return e.push(new ue({value:this.status})),"statusStrings"in this&&e.push(new ee({optional:!0,value:this.statusStrings})),"failInfo"in this&&e.push(this.failInfo),new ee({value:e})}},{key:"toJSON",value:function(){var e={status:this.status};return"statusStrings"in this&&(e.statusStrings=Array.from(this.statusStrings,function(e){return e.toJSON()})),"failInfo"in this&&(e.failInfo=this.failInfo.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"status":return 2;case"statusStrings":return[];case"failInfo":return new se;default:throw new Error("Invalid member name for PKIStatusInfo class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"status":return r===e.defaultValues(t);case"statusStrings":return 0===r.length;case"failInfo":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for PKIStatusInfo class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"",value:[new ue({name:e.status||""}),new ee({optional:!0,value:[new Ue({name:e.statusStrings||"",value:new ve})]}),new se({name:e.failInfo||"",optional:!0})]})}}]),e}(),Rr=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.version=t(r,"version",e.defaultValues("version")),this.messageImprint=t(r,"messageImprint",e.defaultValues("messageImprint")),"reqPolicy"in r&&(this.reqPolicy=t(r,"reqPolicy",e.defaultValues("reqPolicy"))),"nonce"in r&&(this.nonce=t(r,"nonce",e.defaultValues("nonce"))),"certReq"in r&&(this.certReq=t(r,"certReq",e.defaultValues("certReq"))),"extensions"in r&&(this.extensions=t(r,"extensions",e.defaultValues("extensions"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for TSP_REQUEST");this.version=r.result["TimeStampReq.version"].valueBlock.valueDec,this.messageImprint=new Cr({schema:r.result["TimeStampReq.messageImprint"]}),"TimeStampReq.reqPolicy"in r.result&&(this.reqPolicy=r.result["TimeStampReq.reqPolicy"].valueBlock.toString()),"TimeStampReq.nonce"in r.result&&(this.nonce=r.result["TimeStampReq.nonce"]),"TimeStampReq.certReq"in r.result&&(this.certReq=r.result["TimeStampReq.certReq"].valueBlock.value),"TimeStampReq.extensions"in r.result&&(this.extensions=Array.from(r.result["TimeStampReq.extensions"],function(e){return new xt({schema:e})}))}},{key:"toSchema",value:function(){var t=[];return t.push(new ue({value:this.version})),t.push(this.messageImprint.toSchema()),"reqPolicy"in this&&t.push(new me({value:this.reqPolicy})),"nonce"in this&&t.push(this.nonce),"certReq"in this&&!1===e.compareWithDefault("certReq",this.certReq)&&t.push(new Y({value:this.certReq})),"extensions"in this&&t.push(new z({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.extensions,function(e){return e.toSchema()})})),new ee({value:t})}},{key:"toJSON",value:function(){var t={version:this.version,messageImprint:this.messageImprint.toJSON()};return"reqPolicy"in this&&(t.reqPolicy=this.reqPolicy),"nonce"in this&&(t.nonce=this.nonce.toJSON()),"certReq"in this&&!1===e.compareWithDefault("certReq",this.certReq)&&(t.certReq=this.certReq),"extensions"in this&&(t.extensions=Array.from(this.extensions,function(e){return e.toJSON()})),t}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"messageImprint":return new Cr;case"reqPolicy":return"";case"nonce":return new ue;case"certReq":return!1;case"extensions":return[];default:throw new Error("Invalid member name for TimeStampReq class: "+e)}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":case"reqPolicy":case"certReq":return r===e.defaultValues(t);case"messageImprint":return Cr.compareWithDefault("hashAlgorithm",r.hashAlgorithm)&&Cr.compareWithDefault("hashedMessage",r.hashedMessage);case"nonce":return r.isEqual(e.defaultValues(t));case"extensions":return 0===r.length;default:throw new Error("Invalid member name for TimeStampReq class: "+t)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"TimeStampReq",value:[new ue({name:e.version||"TimeStampReq.version"}),Cr.schema(e.messageImprint||{names:{blockName:"TimeStampReq.messageImprint"}}),new me({name:e.reqPolicy||"TimeStampReq.reqPolicy",optional:!0}),new ue({name:e.nonce||"TimeStampReq.nonce",optional:!0}),new Y({name:e.certReq||"TimeStampReq.certReq",optional:!0}),new z({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ue({name:e.extensions||"TimeStampReq.extensions",value:xt.schema()})]})]})}}]),e}(),Kr=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.status=t(r,"status",e.defaultValues("status")),"timeStampToken"in r&&(this.timeStampToken=t(r,"timeStampToken",e.defaultValues("timeStampToken"))),"schema"in r&&this.fromSchema(r.schema)}return _createClass(e,[{key:"fromSchema",value:function(t){var r=y(t,t,e.schema());if(!1===r.verified)throw new Error("Object's schema was not verified against input data for TSP_RESPONSE");this.status=new Dr({schema:r.result["TimeStampResp.status"]}),"TimeStampResp.timeStampToken"in r.result&&(this.timeStampToken=new it({schema:r.result["TimeStampResp.timeStampToken"]}))}},{key:"toSchema",value:function(){var e=[];return e.push(this.status.toSchema()),"timeStampToken"in this&&e.push(this.timeStampToken.toSchema()),new ee({value:e})}},{key:"toJSON",value:function(){var e={status:this.status};return"timeStampToken"in this&&(e.timeStampToken=this.timeStampToken.toJSON()),e}},{key:"sign",value:function(e,t){return"timeStampToken"in this==!1?Promise.reject("timeStampToken is absent in TSP response"):"1.2.840.113549.1.7.2"!==this.timeStampToken.contentType?Promise.reject("Wrong format of timeStampToken: "+this.timeStampToken.contentType):new it({schema:this.timeStampToken.content}).sign(e,0,t)}},{key:"verify",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{signer:0,trustedCerts:[],data:new ArrayBuffer(0)};return"timeStampToken"in this==!1?Promise.reject("timeStampToken is absent in TSP response"):"1.2.840.113549.1.7.2"!==this.timeStampToken.contentType?Promise.reject("Wrong format of timeStampToken: "+this.timeStampToken.contentType):new _r({schema:this.timeStampToken.content}).verify(e)}}],[{key:"defaultValues",value:function(e){switch(e){case"status":return new Dr;case"timeStampToken":return new it;default:throw new Error("Invalid member name for TimeStampResp class: "+e)}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"status":return Dr.compareWithDefault("status",t.status)&&"statusStrings"in t==!1&&"failInfo"in t==!1;case"timeStampToken":return""===t.contentType&&t.content instanceof He;default:throw new Error("Invalid member name for TimeStampResp class: "+e)}}},{key:"schema",value:function(){var e=t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},"names",{});return new ee({name:e.blockName||"TimeStampResp",value:[Dr.schema(e.status||{names:{blockName:"TimeStampResp.status"}}),it.schema(e.timeStampToken||{names:{blockName:"TimeStampResp.timeStampToken",optional:!0}})]})}}]),e}();e.setEngine=p,e.getEngine=k,e.getCrypto=b,e.getRandomValues=w,e.getOIDByAlgorithm=C,e.getAlgorithmParameters=S,e.createCMSECDSASignature=A,e.stringPrep=I,e.createECDSASignatureFromCMS=B,e.getAlgorithmByOID=N,e.getHashAlgorithm=P,e.kdfWithCounter=E,e.kdf=x,e.AccessDescription=rt,e.Accuracy=at,e.AlgorithmIdentifier=Te,e.AltName=nt,e.Attribute=Me,e.AttributeTypeAndValue=Ye,e.AuthenticatedSafe=lr,e.AuthorityKeyIdentifier=Bt,e.BasicConstraints=vt,e.BasicOCSPResponse=gr,e.CRLBag=Rt,e.CRLDistributionPoints=bt,e.CertBag=_t,e.CertID=cr,e.Certificate=Vt,e.CertificateChainValidationEngine=dr,e.CertificatePolicies=St,e.CertificateRevocationList=Dt,e.CertificateSet=Lt,e.CertificationRequest=yr,e.ContentInfo=it,e.CryptoEngine=$e,e.DigestInfo=pr,e.DistributionPoint=kt,e.ECCCMSSharedInfo=or,e.ECPrivateKey=Ge,e.ECPublicKey=qe,e.EncapsulatedContentInfo=kr,e.EncryptedContentInfo=st,e.EncryptedData=lt,e.EnvelopedData=ur,e.ExtKeyUsage=Pt,e.Extension=xt,e.Extensions=Ot,e.GeneralName=tt,e.GeneralNames=gt,e.GeneralSubtree=yt,e.GeneratorsDriver=R,e.InfoAccess=Et,e.IssuerAndSerialNumber=Wt,e.IssuingDistributionPoint=dt,e.KEKIdentifier=tr,e.KEKRecipientInfo=rr,e.KeyAgreeRecipientIdentifier=$t,e.KeyAgreeRecipientInfo=er,e.KeyBag=br,e.KeyTransRecipientInfo=Mt,e.MacData=wr,e.MessageImprint=Cr,e.NameConstraints=pt,e.OCSPRequest=Br,e.OCSPResponse=Pr,e.OriginatorIdentifierOrKey=Qt,e.OriginatorInfo=qt,e.OriginatorPublicKey=Gt,e.OtherCertificateFormat=Er,e.OtherKeyAttribute=zt,e.OtherPrimeInfo=Qe,e.OtherRecipientInfo=nr,e.OtherRevocationInfoFormat=Tt,e.PBES2Params=ut,e.PBKDF2Params=ot,e.PFX=jr,e.PKCS8ShroudedKeyBag=ct,e.PKIStatusInfo=Dr,e.PasswordRecipientinfo=ar,e.PolicyConstraints=Nt,e.PolicyInformation=Ct,e.PolicyMapping=At,e.PolicyMappings=It,e.PolicyQualifierInfo=wt,e.PrivateKeyInfo=Ze,e.PrivateKeyUsagePeriod=ft,e.PublicKeyInfo=Fe,e.RSAESOAEPParams=sr,e.RSAPrivateKey=ze,e.RSAPublicKey=We,e.RSASSAPSSParams=Je,e.RecipientEncryptedKey=Xt,e.RecipientEncryptedKeys=Yt,e.RecipientIdentifier=Ft,e.RecipientInfo=ir,e.RecipientKeyIdentifier=Zt,e.RelativeDistinguishedNames=et,e.Request=Sr,e.ResponseBytes=Nr,e.ResponseData=mr,e.RevocationInfoChoices=Jt,e.RevokedCertificate=jt,e.SafeBag=Ht,e.SafeContents=Ut,e.SecretBag=Kt,e.Signature=Ir,e.SignedAndUnsignedAttributes=xr,e.SignedData=_r,e.SignerInfo=Or,e.SingleResponse=hr,e.SubjectDirectoryAttributes=mt,e.TBSRequest=Ar,e.TSTInfo=Vr,e.Time=ht,e.TimeStampReq=Rr,e.TimeStampResp=Kr,Object.defineProperty(e,"__esModule",{value:!0})});




////////////////asdf



function errorCallback(e) {
  alert("Uncaught exception. See console logs for more details.")
}

self.addEventListener("error", errorCallback);
self.addEventListener("unhandledrejection", errorCallback);

/**
 * Select element by id
 * 
 * @param {string} id 
 * @returns 
 */
function $(id) {
    const result = document.getElementById(id);
    if (!result) {
      throw new Error("Cannot get element by id '" + id + "'");
    }
    return result;
  }
  
  /**
   * Generates <option> for given <select> element
   * Gets list of providers from Fortify
   * 
   * @param {Element} domSelect
   * @returns 
   */
  async function FillProviderSelect(domSelect) {
    const info = await ws.info();
    let first = false;
  
    if (!info.providers.length) {
      const $option = document.createElement("option");
      $option.textContent = "No providers";
      $option.setAttribute("value", "");
      $option.setAttribute("disabled", true);
      $option.setAttribute("selected", true);
      domSelect.appendChild($option);
    }
  
    for (const provider of info.providers) {
      // TODO: check provider.atr to filter pkcs#11 modules
  
      const $option = document.createElement("option");
      $option.setAttribute("value", provider.id);
      $option.textContent = provider.name;
      if (!first) {
        // select first item
        $option.setAttribute("selected", true);
        first = true;
      }
  
      domSelect.appendChild($option);
    }
  }
  
  /**
   * Generates <option> for given <select> element
   * Gets list of certificate for provider. Shows only certificates which have private key
   * @param {*} crypto 
   * @param {*} domSelect 
   */
  async function fillCertificateSelect(provider, domSelect) {
    if (! await provider.isLoggedIn()) {
      await provider.login();
    }
  
    let certIDs = await provider.certStorage.keys();
    certIDs = certIDs.filter((id) => {
      const parts = id.split("-");
      return parts[0] === "x509";
    });
  
    let keyIDs = await provider.keyStorage.keys()
    keyIDs = keyIDs.filter(function (id) {
      const parts = id.split("-");
      return parts[0] === "private";
    });
  
    const certs = [];
    for (const certID of certIDs) {
      for (const keyID of keyIDs) {
        if (keyID.split("-")[2] === certID.split("-")[2]) {
          try {
            const cert = await provider.certStorage.getItem(certID);
  
            certs.push({
              id: certID,
              item: cert,
            });
          } catch (e) {
            console.error(`Cannot get certificate ${certID} from CertificateStorage. ${e.message}`);
          }
        }
      }
    }
  
    domSelect.textContent = "";
  
    certs
      .map((cert) => {
        return {
          id: cert.id,
          name: GetCommonName(cert.item.subjectName),
        }
      })
      .sort((a, b) => {
        if (a.name.toLowerCase() > b.name.toLowerCase()) {
          return 1;
        } else if (a.name.toLowerCase() < b.name.toLowerCase()) {
          return -1
        }
        return 0;
      })
      .forEach((item, index) => {
        const $option = document.createElement("option");
        $option.setAttribute("value", item.id);
        $option.textContent = item.name;
        if (!index) {
          // select first item
          $option.setAttribute("selected", true);
        }
  
        domSelect.appendChild($option);
      });
  }
  
  /**
   * Converts DER to PEM
   * 
   * @param {BufferSource} buffer incoming DER
   * @param {string} name name for BEGIN | END blocks
   * @returns 
   */
  function DerToPem(buffer, name) {
    let base64 = pvtsutils.Convert.ToBase64(buffer);
  
    const res = [];
    res.push("-----BEGIN " + name.toUpperCase() + "-----");
    while (base64.length > 64) {
      res.push(base64.substr(0, 64))
      base64 = base64.substr(64);
    }
    res.push(base64);
    res.push("-----END " + name.toUpperCase() + "-----");
    return res.join("\r\n");
  }
  
  /**
   * Converts PEM string to DER
   * 
   * @param {string} pemString PEM string
   * @returns 
   */
  function PemToDer(pemString) {
    var b64 = pemString.replace(/-----([\w\d\s]+)-----/gi, "").replace(/\n/g, "").replace(/\r/g, "");
    var der = pvtsutils.Convert.FromBase64(b64);
    return der;
  }
  
  /**
   * Gets CommonName from normalized name of certificate
   * 
   * @param {any} name 
   * @returns 
   */
  function GetCommonName(name) {
    var reg = /CN=(.+),?/i;
    var res = reg.exec(name);
    return res ? res[1] : "Unknown";
  }
  
  async function GetCertificateKey(type, provider, certID) {
    const keyIDs = await provider.keyStorage.keys()
    for (const keyID of keyIDs) {
      const parts = keyID.split("-");
  
      if (parts[0] === type && parts[2] === certID.split("-")[2]) {
        const key = await provider.keyStorage.getItem(keyID);
        if (key) {
          return key;
        }
      }
    }
    if (type === "public") {
      const cert = await provider.certStorage.getItem(certID);
      if (cert) {
        return cert.publicKey;
      }
    }
    return null;
  }
  
  /**
   * Fix RDNs for PKIjs.
   * `RDNs = [RDN[attr],RDN[attr],...]`
   * @param {any} name 
   */
  function fixDN(name) {
    if (name.typesAndValues) {
      const schema = (new asn1js.Sequence({
        value: name.typesAndValues.map(function (element) {
          return new asn1js.Set({
            value: [element.toSchema()]
          })
        })
      }));
      const der = schema.toBER()
      name.fromSchema(asn1js.fromBER(der).result);
    }
  }



  ////////////////////////asdf



  var XAdES=function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,r,n,a,i,s){try{var o=e[i](s),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,a)}function n(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var s=e.apply(t,n);function o(e){r(s,a,i,o,u,"next",e)}function u(e){r(s,a,i,o,u,"throw",e)}o(void 0)}))}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return function(){var t,r=u(e);if(c()){var n=u(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return h(this,t)}}function m(e,t,r){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=d(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function k(e,r,n,a){var i,s=arguments.length,o=s<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,n):a;if("object"===("undefined"==typeof Reflect?"undefined":t(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,r,n,a);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(o=(s<3?i(o):s>3?i(r,n,o):i(r,n))||o);return s>3&&o&&Object.defineProperty(r,n,o),o}function b(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var a=arguments[0],i=1;i<arguments.length;i++){var s=arguments[i];for(var o in s)s.hasOwnProperty(o)&&(a[o]=s[o])}return a}function w(e){return function(t){var r=t;r.localName=e.localName||r.name,r.namespaceURI=e.namespaceURI||r.namespaceURI||null,r.prefix=e.prefix||r.prefix||null,r.parser=e.parser||r.parser,r.target!==r&&(r.items=b({},r.items)),r.target=t}}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,r){var n=t.constructor,a=r;n.items||(n.items={}),n.target!==n&&(n.items=b({},n.items)),n.target=t,e.parser?n.items[a]={parser:e.parser,required:e.required||!1,maxOccurs:e.maxOccurs||1e9,minOccurs:void 0===e.minOccurs?0:e.minOccurs,noRoot:e.noRoot||!1}:n.items[a]={namespaceURI:e.namespaceURI||null,required:e.required||!1,prefix:e.prefix||null,defaultValue:e.defaultValue,converter:e.converter},e.localName=e.localName||e.parser&&e.parser.localName||a,n.items[a].namespaceURI=e.namespaceURI||e.parser&&e.parser.namespaceURI||null,n.items[a].prefix=e.prefix||e.parser&&e.parser.prefix||null,n.items[a].localName=e.localName,n.items[a].type="element",B(t,a,e)}}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{required:!1,namespaceURI:null};return function(t,r){var n=t.constructor,a=r;e.localName||(e.localName=r),n.items||(n.items={}),n.target!==n&&(n.items=b({},n.items)),n.target=t,n.items[r]=e,n.items[r].type="attribute",B(t,a,e)}}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{required:!1};return function(t,r){var n=t.constructor,a=r;n.items||(n.items={}),n.target!==n&&(n.items=b({},n.items)),n.target=t,n.items[r]=e,n.items[r].type="content",B(t,a,e)}}function B(e,t,r){var n="_".concat(t),a={set:function(e){this[n]!==e&&(this.element=null,this[n]=e)},get:function(){if(void 0===this[n]){var e=r.defaultValue;r.parser&&((e=new r.parser).localName=r.localName),this[n]=e}return this[n]}};Object.defineProperty(e,n,{writable:!0,enumerable:!1}),Object.defineProperty(e,t,a)}var C=function(){function e(t){a(this,e),this.items=new Array,t&&(this.items=t)}return s(e,[{key:"Item",value:function(e){return this.items[e]||null}},{key:"Add",value:function(e){this.items.push(e)}},{key:"Pop",value:function(){return this.items.pop()}},{key:"RemoveAt",value:function(e){this.items=this.items.filter((function(t,r){return r!==e}))}},{key:"Clear",value:function(){this.items=new Array}},{key:"GetIterator",value:function(){return this.items}},{key:"ForEach",value:function(e){this.GetIterator().forEach(e)}},{key:"Map",value:function(t){return new e(this.GetIterator().map(t))}},{key:"Filter",value:function(t){return new e(this.GetIterator().filter(t))}},{key:"Sort",value:function(t){return new e(this.GetIterator().sort(t))}},{key:"Every",value:function(e){return this.GetIterator().every(e)}},{key:"Some",value:function(e){return this.GetIterator().some(e)}},{key:"IsEmpty",value:function(){return 0===this.Count}},{key:"Count",get:function(){return this.items.length}}]),e}();function x(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var a=e,i=/[^%](%\d+)/g,s=null,o=[];s=i.exec(a);)o.push({arg:s[1],index:s.index});for(var u=o.length-1;u>=0;u--){var l=o[u],c=l.arg.substring(1),h=l.index+1;a=a.substring(0,h)+arguments[+c]+a.substring(h+1+c.length)}return a=a.replace("%%","%")}function I(e,t){for(var r=e+"";r.length<t;)r="0"+r;return r}var E,P=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];a(this,e),this.prefix="XMLJS",this.code=t,this.name=this.constructor.name,arguments[0]=R[t];var s=x.apply(this,arguments);this.message="".concat(this.prefix).concat(I(t,4),": ").concat(s),this.stack=new Error(this.message).stack};!function(e){e[e.NONE=0]="NONE",e[e.NULL_REFERENCE=1]="NULL_REFERENCE",e[e.NULL_PARAM=2]="NULL_PARAM",e[e.DECORATOR_NULL_PARAM=3]="DECORATOR_NULL_PARAM",e[e.COLLECTION_LIMIT=4]="COLLECTION_LIMIT",e[e.METHOD_NOT_IMPLEMENTED=5]="METHOD_NOT_IMPLEMENTED",e[e.METHOD_NOT_SUPPORTED=6]="METHOD_NOT_SUPPORTED",e[e.PARAM_REQUIRED=7]="PARAM_REQUIRED",e[e.CONVERTER_UNSUPPORTED=8]="CONVERTER_UNSUPPORTED",e[e.ELEMENT_MALFORMED=9]="ELEMENT_MALFORMED",e[e.ELEMENT_MISSING=10]="ELEMENT_MISSING",e[e.ATTRIBUTE_MISSING=11]="ATTRIBUTE_MISSING",e[e.CONTENT_MISSING=12]="CONTENT_MISSING",e[e.CRYPTOGRAPHIC=13]="CRYPTOGRAPHIC",e[e.CRYPTOGRAPHIC_NO_MODULE=14]="CRYPTOGRAPHIC_NO_MODULE",e[e.CRYPTOGRAPHIC_UNKNOWN_TRANSFORM=15]="CRYPTOGRAPHIC_UNKNOWN_TRANSFORM",e[e.ALGORITHM_NOT_SUPPORTED=16]="ALGORITHM_NOT_SUPPORTED",e[e.ALGORITHM_WRONG_NAME=17]="ALGORITHM_WRONG_NAME",e[e.XML_EXCEPTION=18]="XML_EXCEPTION"}(E||(E={}));var R={};R[E.NONE]="No description",R[E.NULL_REFERENCE]="Null reference",R[E.NULL_PARAM]="'%1' has empty '%2' object",R[E.DECORATOR_NULL_PARAM]="Decorator '%1' has empty '%2' parameter",R[E.COLLECTION_LIMIT]="Collection of '%1' in element '%2' has wrong amount of items",R[E.METHOD_NOT_IMPLEMENTED]="Method is not implemented",R[E.METHOD_NOT_SUPPORTED]="Method is not supported",R[E.PARAM_REQUIRED]="Required parameter is missing '%1'",R[E.CONVERTER_UNSUPPORTED]="Converter is not supported",R[E.ELEMENT_MALFORMED]="Malformed element '%1'",R[E.ELEMENT_MISSING]="Element '%1' is missing in '%2'",R[E.ATTRIBUTE_MISSING]="Attribute '%1' is missing in '%2'",R[E.CONTENT_MISSING]="Content is missing in '%1'",R[E.CRYPTOGRAPHIC]="Cryptographic error: %1",R[E.CRYPTOGRAPHIC_NO_MODULE]="WebCrypto module is not found",R[E.CRYPTOGRAPHIC_UNKNOWN_TRANSFORM]="Unknown transform %1",R[E.ALGORITHM_NOT_SUPPORTED]="Algorithm is not supported '%1'",R[E.ALGORITHM_WRONG_NAME]="Algorithm wrong name in use '%1'",R[E.XML_EXCEPTION]="XML exception: %1";var L,O=function(){function e(){a(this,e)}return s(e,null,[{key:"ToString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=new Uint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);default:throw new P(E.CONVERTER_UNSUPPORTED)}}},{key:"FromString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);default:throw new P(E.CONVERTER_UNSUPPORTED)}}},{key:"ToBase64",value:function(e){if("undefined"!=typeof btoa){var t=this.ToString(e,"binary");return btoa(t)}if("undefined"!=typeof Buffer)return Buffer.from(e).toString("base64");throw new P(E.CONVERTER_UNSUPPORTED)}},{key:"FromBase64",value:function(e){if(e=e.replace(/\n/g,"").replace(/\r/g,"").replace(/\t/g,"").replace(/\s/g,""),"undefined"!=typeof atob)return this.FromBinary(atob(e));if("undefined"!=typeof Buffer)return new Uint8Array(Buffer.from(e,"base64"));throw new P(E.CONVERTER_UNSUPPORTED)}},{key:"FromBase64Url",value:function(e){return this.FromBase64(this.Base64Padding(e.replace(/\-/g,"+").replace(/\_/g,"/")))}},{key:"ToBase64Url",value:function(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}},{key:"FromUtf8String",value:function(e){for(var t=unescape(encodeURIComponent(e)),r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}},{key:"ToUtf8String",value:function(e){var t=String.fromCharCode.apply(null,e);return decodeURIComponent(escape(t))}},{key:"FromBinary",value:function(e){for(var t=e.length,r=new Uint8Array(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r}},{key:"ToBinary",value:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}},{key:"ToHex",value:function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r].toString(16);t.push(1===n.length?"0"+n:n)}return t.join("")}},{key:"FromHex",value:function(e){for(var t=new Uint8Array(e.length/2),r=0;r<e.length;r+=2){var n=e.slice(r,r+2);t[r/2]=parseInt(n,16)}return t}},{key:"ToDateTime",value:function(e){return new Date(e)}},{key:"FromDateTime",value:function(e){return e.toISOString()}},{key:"Base64Padding",value:function(e){var t=4-e.length%4;if(t<4)for(var r=0;r<t;r++)e+="=";return e}}]),e}();!function(e){e[e.None=0]="None",e[e.Element=1]="Element",e[e.Attribute=2]="Attribute",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.EntityReference=5]="EntityReference",e[e.Entity=6]="Entity",e[e.ProcessingInstruction=7]="ProcessingInstruction",e[e.Comment=8]="Comment",e[e.Document=9]="Document",e[e.DocumentType=10]="DocumentType",e[e.DocumentFragment=11]="DocumentFragment",e[e.Notation=12]="Notation",e[e.Whitespace=13]="Whitespace",e[e.SignificantWhitespace=14]="SignificantWhitespace",e[e.EndElement=15]="EndElement",e[e.EndEntity=16]="EndEntity",e[e.XmlDeclaration=17]="XmlDeclaration"}(L||(L={}));var U,D=function(e,t){throw new Error("Not implemented")};if("undefined"==typeof self){U=global;var T=require("xmldom-alpha");D=require("xpath.js"),U.XMLSerializer=T.XMLSerializer,U.DOMParser=T.DOMParser,U.DOMImplementation=T.DOMImplementation,U.document=(new DOMImplementation).createDocument("http://www.w3.org/1999/xhtml","html",null)}else U=self;var H="undefined"!=typeof self?function(e,t){for(var r,n=null==e.ownerDocument?e:e.ownerDocument,a=document.createNSResolver(null==e.ownerDocument?e.documentElement:e.ownerDocument.documentElement),i=n.evaluate(t,e,a,XPathResult.ANY_TYPE,null),s=[];r=i.iterateNext();)s.push(r);return s}:D;function V(e){return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),(new DOMParser).parseFromString(e,"application/xml")}function _(e,t){var r=H(e,t);return r&&r.length>0?r[0]:null}function j(e){var t={};return function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t&&t.nodeType===L.Element){var n=t;n.namespaceURI&&"http://www.w3.org/XML/1998/namespace"!==n.namespaceURI&&!r[n.prefix||""]&&(r[n.prefix?n.prefix:""]=t.namespaceURI);for(var a=0;a<t.childNodes.length;a++){var i=t.childNodes.item(a);i&&i.nodeType===L.Element&&e(i,r)}}}(e,t),t}function M(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var a=arguments[0],i=1;i<arguments.length;i++){var s=arguments[i];for(var o in s)s.hasOwnProperty(o)&&(a[o]=s[o])}return a}function K(e,t){return e&&e.nodeType===t}function F(e){return K(e,L.Element)}function X(e){return K(e,L.Document)}var G={get:function(e){if(e)return O.ToBase64(e)},set:function(e){return O.FromBase64(e)}},J={get:function(e){return e?e.toString():"0"},set:function(e){return Number(e)}},q=function(){function e(){a(this,e),this.prefix=this.GetStatic().prefix||null,this.localName=this.GetStatic().localName,this.namespaceURI=this.GetStatic().namespaceURI}return s(e,[{key:"HasChanged",value:function(){var e=this.GetStatic();if(e.items)for(var t in e.items)if(e.items.hasOwnProperty(t)){var r=e.items[t],n=this[t];if(r.parser&&n&&n.HasChanged())return!0}return null===this.element}},{key:"GetXml",value:function(e){if(!e&&!this.HasChanged())return this.element||null;var t=this.CreateDocument(),r=this.CreateElement(),n=this.GetStatic(),a=this.localName;if(n.items)for(var i in n.items)if(n.items.hasOwnProperty(i)){var s=this[i],o=n.items[i];switch(o.type){case"content":var u=o,l=u.converter?u.converter.get(s):s;if(u.required&&null==l)throw new P(E.CONTENT_MISSING,a);(u.defaultValue!==s||u.required)&&(r.textContent=l);break;case"attribute":var c=o,h=c.converter?c.converter.get(s):s;if(c.required&&null==h)throw new P(E.ATTRIBUTE_MISSING,c.localName,a);(c.defaultValue!==s||c.required)&&(c.namespaceURI?r.setAttributeNS(c.namespaceURI,c.localName,h):r.setAttribute(c.localName,h));break;case"element":var f=o,m=null;if(f.parser){if(f.required&&!s||f.minOccurs&&!s.Count)throw new P(E.ELEMENT_MISSING,s.localName,a);s&&(m=s.GetXml(void 0===s.element&&(f.required||s.Count)))}else{var v=f.converter?f.converter.get(s):s;if(f.required&&void 0===v)throw new P(E.ELEMENT_MISSING,f.localName,a);(s!==f.defaultValue||f.required)&&((m=f.namespaceURI?t.createElementNS(f.namespaceURI,"".concat(f.prefix?f.prefix+":":"").concat(f.localName)):t.createElement("".concat(f.prefix?f.prefix+":":"").concat(f.localName))).textContent=v)}if(m)if(f.noRoot){for(var g=[],d=0;d<m.childNodes.length;d++){var p=m.childNodes.item(d);F(p)&&g.push(p)}if(g.length<f.minOccurs||g.length>f.maxOccurs)throw new P(E.COLLECTION_LIMIT,s.localName,n.localName);g.forEach((function(e){return r.appendChild(e.cloneNode(!0))}))}else{if(m.childNodes.length<f.minOccurs||m.childNodes.length>f.maxOccurs)throw new P(E.COLLECTION_LIMIT,s.localName,n.localName);r.appendChild(m)}}}return this.OnGetXml(r),this.element=r,r}},{key:"LoadXml",value:function(e){var t;"string"==typeof e?t=V(e).documentElement:t=e;if(!t)throw new P(E.PARAM_REQUIRED,"element");var r=this.GetStatic(),n=this.localName;if(t.localName!==n||t.namespaceURI!=this.NamespaceURI)throw new P(E.ELEMENT_MALFORMED,n);if(r.items)for(var a in r.items)if(r.items.hasOwnProperty(a)){var i=r.items[a];switch(i.type){case"content":var s=i;if(s.required&&!t.textContent)throw new P(E.CONTENT_MISSING,n);if(t.textContent){var o=s.converter?s.converter.set(t.textContent):t.textContent;this[a]=o}else this[a]=s.defaultValue;break;case"attribute":var u=i,l=void 0,c=void 0;if(!u.localName)throw new P(E.PARAM_REQUIRED,"localName");if(u.namespaceURI?(l=t.hasAttributeNS.bind(t,u.namespaceURI,u.localName),c=t.getAttributeNS.bind(t,u.namespaceURI,u.localName)):(l=t.hasAttribute.bind(t,u.localName),c=t.getAttribute.bind(t,u.localName)),u.required&&!l())throw new P(E.ATTRIBUTE_MISSING,u.localName,n);if(l()){var h=u.converter?u.converter.set(c()):c();this[a]=h}else this[a]=u.defaultValue;break;case"element":var f=i;if(f.noRoot){if(!f.parser)throw new P(E.XML_EXCEPTION,"Schema for '".concat(f.localName,"' with flag noRoot must have 'parser'"));var m=new f.parser;if(!(m instanceof W))throw new P(E.XML_EXCEPTION,"Schema for '".concat(f.localName,"' with flag noRoot must have 'parser' like instance of XmlCollection"));if(m.OnLoadXml(t),delete m.element,m.Count<f.minOccurs||m.Count>f.maxOccurs)throw new P(E.COLLECTION_LIMIT,f.parser.localName,n);this[a]=m;continue}for(var v=null,g=0;g<t.childNodes.length;g++){var d=t.childNodes.item(g);if(F(d)){var p=d;if(p.localName===f.localName&&p.namespaceURI==f.namespaceURI){v=p;break}}}if(f.required&&!v)throw new P(E.ELEMENT_MISSING,f.parser?f.parser.localName:f.localName,n);if(f.parser){if(v){var y=new f.parser;y.localName=f.localName,y.namespaceURI=f.namespaceURI,this[a]=y,y.LoadXml(v)}}else if(v){var k=f.converter?f.converter.set(v.textContent):v.textContent;this[a]=k}else this[a]=f.defaultValue}}this.OnLoadXml(t),this.prefix=t.prefix||"",this.element=t}},{key:"toString",value:function(){var e=this.GetXml();return e?(new XMLSerializer).serializeToString(e):""}},{key:"GetElement",value:function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.element)throw new P(E.NULL_PARAM,this.localName);return e.GetElement(this.element,t,r)}},{key:"GetChildren",value:function(t,r){if(!this.element)throw new P(E.NULL_PARAM,this.localName);return e.GetChildren(this.element,t,r||this.NamespaceURI||void 0)}},{key:"GetChild",value:function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.element)throw new P(E.NULL_PARAM,this.localName);return e.GetChild(this.element,t,this.NamespaceURI||void 0,r)}},{key:"GetFirstChild",value:function(t,r){if(!this.element)throw new P(E.NULL_PARAM,this.localName);return e.GetFirstChild(this.element,t,r)}},{key:"GetAttribute",value:function(t,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!this.element)throw new P(E.NULL_PARAM,this.localName);return e.GetAttribute(this.element,t,r,n)}},{key:"IsEmpty",value:function(){return void 0===this.Element}},{key:"OnLoadXml",value:function(e){}},{key:"GetStatic",value:function(){return this.constructor}},{key:"GetPrefix",value:function(){return this.Prefix?this.prefix+":":""}},{key:"OnGetXml",value:function(e){}},{key:"CreateElement",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e||(e=this.CreateDocument()),t=t||this.localName,r=r||this.NamespaceURI,n=n||this.prefix;var a=e.createElementNS(this.NamespaceURI,(n?"".concat(n,":"):"")+t);return e.importNode(a,!0),a}},{key:"CreateDocument",value:function(){return e.CreateDocument(this.localName,this.NamespaceURI,this.Prefix)}},{key:"Element",get:function(){return this.element}},{key:"Prefix",get:function(){return this.prefix},set:function(e){this.prefix=e}},{key:"LocalName",get:function(){return this.localName}},{key:"NamespaceURI",get:function(){return this.namespaceURI||null}}],[{key:"LoadXml",value:function(e){var t=new this;return t.LoadXml(e),t}},{key:"GetElement",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=e.getElementsByTagName(t);if(r&&0===n.length)throw new P(E.ELEMENT_MISSING,t,e.localName);return n[0]||null}},{key:"GetAttribute",value:function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e.hasAttribute(t))return e.getAttribute(t);if(n)throw new P(E.ATTRIBUTE_MISSING,t,e.localName);return r}},{key:"GetElementById",value:function(e,t){if(null==e||null==t)return null;var r=null;return X(e)&&(r=e.getElementById(t)),null==r&&null==(r=_(e,"//*[@Id='".concat(t,"']")))&&null==(r=_(e,"//*[@ID='".concat(t,"']")))&&(r=_(e,"//*[@id='".concat(t,"']"))),r}},{key:"CreateDocument",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"xml_root",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n="",a="",i="";r&&(n=r+":",a=":"+r),t&&(i=" xmlns".concat(a,'="').concat(t,'"'));var s="".concat(n).concat(e),o=(new DOMParser).parseFromString("<".concat(s).concat(i,"></").concat(s,">"),"application/xml");return o}},{key:"GetChildren",value:function(e,t,r){e=X(e)?e.documentElement:e;for(var n=[],a=0;a<e.childNodes.length;a++){var i=e.childNodes[a];!F(i)||i.localName!==t||i.namespaceURI!==r&&r||n.push(i)}return n}},{key:"GetFirstChild",value:function(e,t,r){e=X(e)?e.documentElement:e;for(var n=0;n<e.childNodes.length;n++){var a=e.childNodes[n];if(F(a)&&a.localName===t&&(a.namespaceURI===r||!r))return a}return null}},{key:"GetChild",value:function(e,t,r){for(var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=0;a<e.childNodes.length;a++){var i=e.childNodes[a];if(F(i)&&i.localName===t&&(i.namespaceURI===r||!r))return i}if(n)throw new P(E.ELEMENT_MISSING,t,e.localName);return null}}]),e}(),W=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).MaxOccurs=Number.MAX_VALUE,e.MinOccurs=0,e.items=[],e}return s(r,[{key:"HasChanged",value:function(){var e=m(u(r.prototype),"HasChanged",this).call(this),t=this.Some((function(e){return e.HasChanged()}));return e||t}},{key:"Item",value:function(e){return this.items[e]||null}},{key:"Add",value:function(e){this.items.push(e),this.element=null}},{key:"Pop",value:function(){return this.element=null,this.items.pop()}},{key:"RemoveAt",value:function(e){this.items=this.items.filter((function(t,r){return r!==e})),this.element=null}},{key:"Clear",value:function(){this.items=new Array,this.element=null}},{key:"GetIterator",value:function(){return this.items}},{key:"ForEach",value:function(e){this.GetIterator().forEach(e)}},{key:"Map",value:function(e){return new C(this.GetIterator().map(e))}},{key:"Filter",value:function(e){return new C(this.GetIterator().filter(e))}},{key:"Sort",value:function(e){return new C(this.GetIterator().sort(e))}},{key:"Every",value:function(e){return this.GetIterator().every(e)}},{key:"Some",value:function(e){return this.GetIterator().some(e)}},{key:"IsEmpty",value:function(){return 0===this.Count}},{key:"OnGetXml",value:function(e){var t,r=y(this.GetIterator());try{for(r.s();!(t=r.n()).done;){var n=t.value.GetXml();n&&e.appendChild(n)}}catch(e){r.e(e)}finally{r.f()}}},{key:"OnLoadXml",value:function(e){var t=this.GetStatic();if(!t.parser)throw new P(E.XML_EXCEPTION,"".concat(t.localName," doesn't have required 'parser' in @XmlElement"));for(var r=0;r<e.childNodes.length;r++){var n=e.childNodes.item(r);if(F(n)&&n.localName===t.parser.localName&&n.namespaceURI==t.namespaceURI){var a=n,i=new t.parser;i.LoadXml(a),this.Add(i)}}}},{key:"Count",get:function(){return this.items.length}}]),r}(q),Q=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"Add",value:function(e){e.prefix=e.prefix||"",e.namespace=e.namespace||"",m(u(r.prototype),"Add",this).call(this,e)}},{key:"GetPrefix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.Count-1,r=this.Count-1;e=e||"",t>r&&(t=r);for(var n=t;n>=0;n--){var a=this.items[n];if(a.prefix===e)return a}return null}},{key:"GetNamespace",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.Count-1,r=this.Count-1;e=e||"",t>r&&(t=r);for(var n=t;n>=0;n--){var a=this.items[n];if(a.namespace===e)return a}return null}}]),r}(C),z={DefaultPrefix:"xades",NamespaceURI:"http://uri.etsi.org/01903/v1.3.2#",SignedPropertiesType:"http://uri.etsi.org/01903/v1.3.2#SignedProperties",ElementNames:{Any:"Any",ByName:"ByName",ByKey:"ByKey",AttrAuthoritiesCertValues:"AttrAuthoritiesCertValues",AttributeRevocationValues:"AttributeRevocationValues",AttributeCertificateRefs:"AttributeCertificateRefs",AttributeRevocationRefs:"AttributeRevocationRefs",QualifyingProperties:"QualifyingProperties",QualifyingPropertiesReference:"QualifyingPropertiesReference",SignedProperties:"SignedProperties",SignedSignatureProperties:"SignedSignatureProperties",SignedDataObjectProperties:"SignedDataObjectProperties",UnsignedProperties:"UnsignedProperties",UnsignedSignatureProperties:"UnsignedSignatureProperties",UnsignedDataObjectProperties:"UnsignedDataObjectProperties",UnsignedDataObjectProperty:"UnsignedDataObjectProperty",SigningTime:"SigningTime",SigningCertificate:"SigningCertificate",SignaturePolicyIdentifier:"SignaturePolicyIdentifier",SignatureProductionPlace:"SignatureProductionPlace",SignerRole:"SignerRole",Cert:"Cert",CertDigest:"CertDigest",IssuerSerial:"IssuerSerial",DataObjectFormat:"DataObjectFormat",CommitmentTypeIndication:"CommitmentTypeIndication",AllDataObjectsTimeStamp:"AllDataObjectsTimeStamp",IndividualDataObjectsTimeStamp:"IndividualDataObjectsTimeStamp",HashDataInfo:"HashDataInfo",EncapsulatedTimeStamp:"EncapsulatedTimeStamp",XMLTimeStamp:"XMLTimeStamp",XAdESTimeStamp:"XAdESTimeStamp",OtherTimeStamp:"OtherTimeStamp",Description:"Description",ObjectIdentifier:"ObjectIdentifier",MimeType:"MimeType",Encoding:"Encoding",Identifier:"Identifier",DocumentationReferences:"DocumentationReferences",DocumentationReference:"DocumentationReference",CommitmentTypeId:"CommitmentTypeId",ObjectReference:"ObjectReference",CommitmentTypeQualifiers:"CommitmentTypeQualifiers",AllSignedDataObjects:"AllSignedDataObjects",CommitmentTypeQualifier:"CommitmentTypeQualifier",SignaturePolicyId:"SignaturePolicyId",SignaturePolicyImplied:"SignaturePolicyImplied",SigPolicyId:"SigPolicyId",SigPolicyHash:"SigPolicyHash",SigPolicyQualifier:"SigPolicyQualifier",SigPolicyQualifiers:"SigPolicyQualifiers",SPURI:"SPURI",SPUserNotice:"SPUserNotice",NoticeRef:"NoticeRef",ExplicitText:"ExplicitText",ClaimedRoles:"ClaimedRoles",ClaimedRole:"ClaimedRole",CertifiedRoles:"CertifiedRoles",CertifiedRole:"CertifiedRole",Organization:"Organization",NoticeNumbers:"NoticeNumbers",Int:"int",City:"City",PostalCode:"PostalCode",StateOrProvince:"StateOrProvince",CountryName:"CountryName",CounterSignature:"CounterSignature",SignatureTimeStamp:"SignatureTimeStamp",CompleteCertificateRefs:"CompleteCertificateRefs",CompleteRevocationRefs:"CompleteRevocationRefs",SigAndRefsTimeStamp:"SigAndRefsTimeStamp",RefsOnlyTimeStamp:"RefsOnlyTimeStamp",CertificateValues:"CertificateValues",RevocationValues:"RevocationValues",ArchiveTimeStamp:"ArchiveTimeStamp",CertRefs:"CertRefs",CRLRefs:"CRLRefs",CRLRef:"CRLRef",OCSPRefs:"OCSPRefs",OtherRefs:"OtherRefs",OtherRef:"OtherRef",DigestAlgAndValue:"DigestAlgAndValue",CRLIdentifier:"CRLIdentifier",Issuer:"Issuer",IssueTime:"IssueTime",Number:"Number",OCSPRef:"OCSPRef",OCSPIdentifier:"OCSPIdentifier",ResponderID:"ResponderID",ProducedAt:"ProducedAt",EncapsulatedX509Certificate:"EncapsulatedX509Certificate",OtherCertificate:"OtherCertificate",CRLValues:"CRLValues",OCSPValues:"OCSPValues",OtherValues:"OtherValues",OtherValue:"OtherValue",EncapsulatedCRLValue:"EncapsulatedCRLValue",EncapsulatedOCSPValue:"EncapsulatedOCSPValue",ReferenceInfo:"ReferenceInfo",Include:"Include"},AttributeNames:{Id:"Id",Encoding:"Encoding",Target:"Target",ObjectReference:"ObjectReference",Qualifier:"Qualifier",Uri:"uri",URI:"URI",ReferencedData:"referencedData"}},Y=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(q);Y=k([w({localName:"xades",namespaceURI:z.NamespaceURI,prefix:z.DefaultPrefix})],Y);var Z=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(W);Z=k([w({localName:"xades_collection",namespaceURI:z.NamespaceURI,prefix:z.DefaultPrefix})],Z);var $=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([A()],$.prototype,"Value",void 0),$=k([w({localName:z.ElementNames.Any})],$);var ee=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z);ee=k([w({localName:z.ElementNames.Any})],ee);var te=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([N({localName:z.AttributeNames.Id,defaultValue:""})],te.prototype,"Id",void 0),k([N({localName:z.AttributeNames.Encoding,defaultValue:null,converter:{get:function(e){switch(e){case"der":case"ber":case"cer":case"per":case"xer":return"http://uri.etsi.org/01903/v1.2.2#".concat(e.toUpperCase())}},set:function(e){var t=/#(\w+)$/.exec(e);return t?t[1].toLowerCase():null}}})],te.prototype,"Encoding",void 0),k([A({required:!0,converter:G})],te.prototype,"Value",void 0),te=k([w({localName:"EncapsulatedPKIData"})],te);var re=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}($);re=k([w({localName:z.ElementNames.OtherCertificate})],re);var ne=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z);ne=k([w({localName:"OtherCertificateCollection",parser:re})],ne);var ae=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(te);ae=k([w({localName:z.ElementNames.EncapsulatedX509Certificate})],ae);var ie=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z);ie=k([w({localName:"EncapsulatedX509CertificateCollection",parser:ae})],ie);var se=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([N({localName:z.AttributeNames.Id,defaultValue:""})],se.prototype,"Id",void 0),k([S({parser:ie,noRoot:!0})],se.prototype,"EncapsulatedX509Certificates",void 0),k([S({parser:ne,noRoot:!0})],se.prototype,"OtherCertificates",void 0),se=k([w({localName:z.ElementNames.CertificateValues})],se);var oe=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([N({localName:z.AttributeNames.Qualifier})],oe.prototype,"Qualifier",void 0),k([A({defaultValue:"",required:!0})],oe.prototype,"Value",void 0),oe=k([w({localName:z.ElementNames.Identifier})],oe);var ue=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"OnLoadXml",value:function(e){e.textContent&&(this.Uri=e.textContent)}},{key:"OnGetXml",value:function(e){this.Uri&&(e.textContent=this.Uri)}}]),r}(Y);k([A({defaultValue:"",required:!0})],ue.prototype,"Uri",void 0),ue=k([w({localName:z.ElementNames.DocumentationReference})],ue);var le=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z);le=k([w({localName:z.ElementNames.DocumentationReferences,parser:ue})],le);var ce=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([S({parser:oe,required:!0})],ce.prototype,"Identifier",void 0),k([S({localName:z.ElementNames.Description,namespaceURI:z.NamespaceURI,prefix:z.DefaultPrefix,defaultValue:""})],ce.prototype,"Description",void 0),k([S({parser:le})],ce.prototype,"DocumentationReferences",void 0),ce=k([w({localName:z.ElementNames.ObjectIdentifier})],ce);var he=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}($);he=k([w({localName:z.ElementNames.CommitmentTypeQualifier})],he);var fe=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z);fe=k([w({localName:z.ElementNames.CommitmentTypeQualifiers,parser:he})],fe);var me=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([A({required:!0})],me.prototype,"Value",void 0),me=k([w({localName:z.ElementNames.ObjectReference})],me);var ve=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z);ve=k([w({localName:"ObjectReferences",parser:me})],ve);var ge=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);function de(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function pe(e,t){return e(t={exports:{}},t.exports),t.exports}function ye(e,t,r){return e instanceof Object==!1?r:t in e?e[t]:r}function ke(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength-r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i="",s=y(new Uint8Array(e,r,n));try{for(s.s();!(t=s.n()).done;){var o=t.value,u=o.toString(16).toUpperCase();1===u.length&&(i+="0"),i+=u,a&&(i+=" ")}}catch(e){s.e(e)}finally{s.f()}return i.trim()}function be(e,t){var r=0;if(1===e.length)return e[0];for(var n=e.length-1;n>=0;n--)r+=e[e.length-1-n]*Math.pow(2,t*n);return r}function we(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=r,a=e,i=0,s=Math.pow(2,t),o=1;o<8;o++){if(e<s){var u=void 0;if(n<0)u=new ArrayBuffer(o),i=o;else{if(n<o)return new ArrayBuffer(0);u=new ArrayBuffer(n),i=n}for(var l=new Uint8Array(u),c=o-1;c>=0;c--){var h=Math.pow(2,c*t);l[i-c-1]=Math.floor(a/h),a-=l[i-c-1]*h}return u}s*=Math.pow(2,t)}return new ArrayBuffer(0)}function Se(){for(var e=0,t=0,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];for(var i=0,s=n;i<s.length;i++){var o=s[i];e+=o.byteLength}for(var u=new ArrayBuffer(e),l=new Uint8Array(u),c=0,h=n;c<h.length;c++){var f=h[c];l.set(new Uint8Array(f),t),t+=f.byteLength}return u}function Ne(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=new Uint8Array(e),n=new Uint8Array(t),a=0;a<r.length;a++)if(r[a]!==n[a])return!1;return!0}k([S({localName:z.ElementNames.CommitmentTypeId,required:!0,namespaceURI:z.NamespaceURI,prefix:z.DefaultPrefix,parser:ce})],ge.prototype,"CommitmentTypeId",void 0),k([S({parser:ve,noRoot:!0})],ge.prototype,"ObjectReference",void 0),k([S({localName:z.ElementNames.AllSignedDataObjects,namespaceURI:z.NamespaceURI,prefix:z.DefaultPrefix,converter:{set:function(e){return!0},get:function(e){}},defaultValue:!1})],ge.prototype,"AllSignedDataObjects",void 0),k([S({localName:z.ElementNames.CommitmentTypeQualifiers,parser:he})],ge.prototype,"CommitmentTypeQualifiers",void 0),ge=k([w({localName:z.ElementNames.CommitmentTypeIndication})],ge);var Ae="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Be="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";function Ce(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=0,i=0,s=0,o="",u=t?Be:Ae;if(n){for(var l=0,c=0;c<e.length;c++)if(0!==e.charCodeAt(c)){l=c;break}e=e.slice(l)}for(;a<e.length;){var h=e.charCodeAt(a++);a>=e.length&&(i=1);var f=e.charCodeAt(a++);a>=e.length&&(s=1);var m=e.charCodeAt(a++),v=h>>2,g=(3&h)<<4|f>>4,d=(15&f)<<2|m>>6,p=63&m;1===i?d=p=64:1===s&&(p=64),o+=r?64===d?"".concat(u.charAt(v)).concat(u.charAt(g)):64===p?"".concat(u.charAt(v)).concat(u.charAt(g)).concat(u.charAt(d)):"".concat(u.charAt(v)).concat(u.charAt(g)).concat(u.charAt(d)).concat(u.charAt(p)):"".concat(u.charAt(v)).concat(u.charAt(g)).concat(u.charAt(d)).concat(u.charAt(p))}return o}function xe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t?Be:Ae;function a(e){for(var t=0;t<64;t++)if(n.charAt(t)===e)return t;return 64}function i(e){return 64===e?0:e}for(var s=0,o="";s<e.length;){var u=a(e.charAt(s++)),l=s>=e.length?0:a(e.charAt(s++)),c=s>=e.length?0:a(e.charAt(s++)),h=s>=e.length?0:a(e.charAt(s++)),f=i(u)<<2|i(l)>>4,m=(15&i(l))<<4|i(c)>>2,v=(3&i(c))<<6|i(h);o+=String.fromCharCode(f),64!==c&&(o+=String.fromCharCode(m)),64!==h&&(o+=String.fromCharCode(v))}if(r){for(var g=o.length,d=-1,p=g-1;p>=0;p--)if(0!==o.charCodeAt(p)){d=p;break}o=-1!==d?o.slice(0,d+1):""}return o}function Ie(e){var t,r="",n=y(new Uint8Array(e));try{for(n.s();!(t=n.n()).done;){var a=t.value;r+=String.fromCharCode(a)}}catch(e){n.e(e)}finally{n.f()}return r}function Ee(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),a=0;a<t;a++)n[a]=e.charCodeAt(a);return r}var Pe=Math.log(2);function Re(e){var t=Math.log(e)/Pe,r=Math.floor(t),n=Math.round(t);return r===n?r:n}function Le(e,t){var r,n=y(t);try{for(n.s();!(r=n.n()).done;){delete e[r.value]}}catch(e){n.e(e)}finally{n.f()}}var Oe=Object.freeze({__proto__:null,getUTCDate:function(e){return new Date(e.getTime()+6e4*e.getTimezoneOffset())},getParametersValue:ye,bufferToHexCodes:ke,checkBufferParams:function(e,t,r,n){return t instanceof ArrayBuffer==!1?(e.error='Wrong parameter: inputBuffer must be "ArrayBuffer"',!1):0===t.byteLength?(e.error="Wrong parameter: inputBuffer has zero length",!1):r<0?(e.error="Wrong parameter: inputOffset less than zero",!1):n<0?(e.error="Wrong parameter: inputLength less than zero",!1):!(t.byteLength-r-n<0)||(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1)},utilFromBase:be,utilToBase:we,utilConcatBuf:Se,utilConcatView:function(){for(var e=0,t=0,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];for(var i=0,s=n;i<s.length;i++){var o=s[i];e+=o.length}for(var u=new ArrayBuffer(e),l=new Uint8Array(u),c=0,h=n;c<h.length;c++){var f=h[c];l.set(f,t),t+=f.length}return l},utilDecodeTC:function(){var e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){var t=255===e[0]&&128&e[1],r=0===e[0]&&0==(128&e[1]);(t||r)&&this.warnings.push("Needlessly long format")}for(var n=new ArrayBuffer(this.valueHex.byteLength),a=new Uint8Array(n),i=0;i<this.valueHex.byteLength;i++)a[i]=0;a[0]=128&e[0];for(var s=be(a,8),o=new ArrayBuffer(this.valueHex.byteLength),u=new Uint8Array(o),l=0;l<this.valueHex.byteLength;l++)u[l]=e[l];return u[0]&=127,be(u,8)-s},utilEncodeTC:function(e){for(var t=e<0?-1*e:e,r=128,n=1;n<8;n++){if(t<=r){if(e<0){var a=we(r-t,8,n);return new Uint8Array(a)[0]|=128,a}var i=we(t,8,n),s=new Uint8Array(i);if(128&s[0]){var o=i.slice(0),u=new Uint8Array(o);i=new ArrayBuffer(i.byteLength+1),s=new Uint8Array(i);for(var l=0;l<o.byteLength;l++)s[l+1]=u[l];s[0]=0}return i}r*=Math.pow(2,8)}return new ArrayBuffer(0)},isEqualBuffer:Ne,padNumber:function(e,t){var r=e.toString(10);if(t<r.length)return"";for(var n=t-r.length,a=new Array(n),i=0;i<n;i++)a[i]="0";return a.join("").concat(r)},toBase64:Ce,fromBase64:xe,arrayBufferToString:Ie,stringToArrayBuffer:Ee,nearestPowerOf2:Re,clearProps:Le}),Ue=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.fromBER=ve,t.compareSchema=ge,t.verifySchema=function(e,t){if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};var r=ve(e);if(-1===r.offset)return{verified:!1,result:r.result};return ge(r.result,r.result,t)},t.fromJSON=function(e){},t.RawData=t.Repeated=t.Any=t.Choice=t.TIME=t.Duration=t.DateTime=t.TimeOfDay=t.DATE=t.GeneralizedTime=t.UTCTime=t.CharacterString=t.GeneralString=t.VisibleString=t.GraphicString=t.IA5String=t.VideotexString=t.TeletexString=t.PrintableString=t.NumericString=t.UniversalString=t.BmpString=t.RelativeObjectIdentifier=t.Utf8String=t.ObjectIdentifier=t.Enumerated=t.Integer=t.BitString=t.OctetString=t.Null=t.Set=t.Sequence=t.Boolean=t.EndOfContent=t.Constructed=t.Primitive=t.BaseBlock=t.ValueBlock=t.HexBlock=void 0;var r=[new Uint8Array([1])],n=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.blockLength=(0,Oe.getParametersValue)(t,"blockLength",0),this.error=(0,Oe.getParametersValue)(t,"error",""),this.warnings=(0,Oe.getParametersValue)(t,"warnings",[]),this.valueBeforeDecode="valueBeforeDecode"in t?t.valueBeforeDecode.slice(0):new ArrayBuffer(0)}return s(e,[{key:"toJSON",value:function(){return{blockName:this.constructor.blockName(),blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:(0,Oe.bufferToHexCodes)(this.valueBeforeDecode,0,this.valueBeforeDecode.byteLength)}}}],[{key:"blockName",value:function(){return"baseBlock"}}]),e}(),i=function(e){return function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).isHexOnly=(0,Oe.getParametersValue)(n,"isHexOnly",!1),e.valueHex="valueHex"in n?n.valueHex.slice(0):new ArrayBuffer(0),e}return s(r,[{key:"fromBER",value:function(e,t,r){return!1===(0,Oe.checkBufferParams)(this,e,t,r)?-1:0===new Uint8Array(e,t,r).length?(this.warnings.push("Zero buffer length"),t):(this.valueHex=e.slice(t,t+r),this.blockLength=r,t+r)}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!0!==this.isHexOnly?(this.error='Flag "isHexOnly" is not set, abort',new ArrayBuffer(0)):!0===e?new ArrayBuffer(this.valueHex.byteLength):this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.isHexOnly=this.isHexOnly,e.valueHex=(0,Oe.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"hexBlock"}}]),r}(e)};t.HexBlock=i;var l=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),e=t.call(this),"idBlock"in n?(e.isHexOnly=(0,Oe.getParametersValue)(n.idBlock,"isHexOnly",!1),e.valueHex=(0,Oe.getParametersValue)(n.idBlock,"valueHex",new ArrayBuffer(0)),e.tagClass=(0,Oe.getParametersValue)(n.idBlock,"tagClass",-1),e.tagNumber=(0,Oe.getParametersValue)(n.idBlock,"tagNumber",-1),e.isConstructed=(0,Oe.getParametersValue)(n.idBlock,"isConstructed",!1)):(e.tagClass=-1,e.tagNumber=-1,e.isConstructed=!1),e}return s(r,[{key:"toBER",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=0;switch(this.tagClass){case 1:n|=0;break;case 2:n|=64;break;case 3:n|=128;break;case 4:n|=192;break;default:return this.error="Unknown tag class",new ArrayBuffer(0)}if(this.isConstructed&&(n|=32),this.tagNumber<31&&!this.isHexOnly){if(e=new ArrayBuffer(1),t=new Uint8Array(e),!r){var a=this.tagNumber;n|=a&=31,t[0]=n}return e}if(!1===this.isHexOnly){var i=(0,Oe.utilToBase)(this.tagNumber,7),s=new Uint8Array(i),o=i.byteLength;if(e=new ArrayBuffer(o+1),(t=new Uint8Array(e))[0]=31|n,!r){for(var u=0;u<o-1;u++)t[u+1]=128|s[u];t[o]=s[o-1]}return e}if(e=new ArrayBuffer(this.valueHex.byteLength+1),(t=new Uint8Array(e))[0]=31|n,!1===r){for(var l=new Uint8Array(this.valueHex),c=0;c<l.length-1;c++)t[c+1]=128|l[c];t[this.valueHex.byteLength]=l[l.length-1]}return e}},{key:"fromBER",value:function(e,t,r){if(!1===(0,Oe.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.error="Zero buffer length",-1;switch(192&n[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=32==(32&n[0]),this.isHexOnly=!1;var a=31&n[0];if(31!==a)this.tagNumber=a,this.blockLength=1;else{var i=1;this.valueHex=new ArrayBuffer(255);for(var s=255,o=new Uint8Array(this.valueHex);128&n[i];){if(o[i-1]=127&n[i],++i>=n.length)return this.error="End of input reached before message was fully decoded",-1;if(i===s){s+=255;for(var u=new ArrayBuffer(s),l=new Uint8Array(u),c=0;c<o.length;c++)l[c]=o[c];this.valueHex=new ArrayBuffer(s),o=new Uint8Array(this.valueHex)}}this.blockLength=i+1,o[i-1]=127&n[i];for(var h=new ArrayBuffer(i),f=new Uint8Array(h),m=0;m<i;m++)f[m]=o[m];this.valueHex=new ArrayBuffer(i),(o=new Uint8Array(this.valueHex)).set(f),this.blockLength<=9?this.tagNumber=(0,Oe.utilFromBase)(o,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.tagClass=this.tagClass,e.tagNumber=this.tagNumber,e.isConstructed=this.isConstructed,e}}],[{key:"blockName",value:function(){return"identificationBlock"}}]),r}(i(n)),c=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),e=t.call(this),"lenBlock"in n?(e.isIndefiniteForm=(0,Oe.getParametersValue)(n.lenBlock,"isIndefiniteForm",!1),e.longFormUsed=(0,Oe.getParametersValue)(n.lenBlock,"longFormUsed",!1),e.length=(0,Oe.getParametersValue)(n.lenBlock,"length",0)):(e.isIndefiniteForm=!1,e.longFormUsed=!1,e.length=0),e}return s(r,[{key:"fromBER",value:function(e,t,r){if(!1===(0,Oe.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.error="Zero buffer length",-1;if(255===n[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===n[0],!0===this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&n[0]),!1===this.longFormUsed)return this.length=n[0],this.blockLength=1,t+this.blockLength;var a=127&n[0];if(a>8)return this.error="Too big integer",-1;if(a+1>n.length)return this.error="End of input reached before message was fully decoded",-1;for(var i=new Uint8Array(a),s=0;s<a;s++)i[s]=n[s+1];return 0===i[a-1]&&this.warnings.push("Needlessly long encoded length"),this.length=(0,Oe.utilFromBase)(i,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unneccesary usage of long length form"),this.blockLength=a+1,t+this.blockLength}},{key:"toBER",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return e=new ArrayBuffer(1),!1===r&&((t=new Uint8Array(e))[0]=128),e;if(!0===this.longFormUsed){var n=(0,Oe.utilToBase)(this.length,8);if(n.byteLength>127)return this.error="Too big length",new ArrayBuffer(0);if(e=new ArrayBuffer(n.byteLength+1),!0===r)return e;var a=new Uint8Array(n);(t=new Uint8Array(e))[0]=128|n.byteLength;for(var i=0;i<n.byteLength;i++)t[i+1]=a[i];return e}return e=new ArrayBuffer(1),!1===r&&((t=new Uint8Array(e))[0]=this.length),e}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.isIndefiniteForm=this.isIndefiniteForm,e.longFormUsed=this.longFormUsed,e.length=this.length,e}}],[{key:"blockName",value:function(){return"lengthBlock"}}]),r}(n),h=function(e){o(r,e);var t=f(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),t.call(this,e)}return s(r,[{key:"fromBER",value:function(e,t,r){throw TypeError('User need to make a specific function in a class which extends "ValueBlock"')}},{key:"toBER",value:function(){throw TypeError('User need to make a specific function in a class which extends "ValueBlock"')}}],[{key:"blockName",value:function(){return"valueBlock"}}]),r}(n);t.ValueBlock=h;var v=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;return a(this,r),e=t.call(this,n),"name"in n&&(e.name=n.name),"optional"in n&&(e.optional=n.optional),"primitiveSchema"in n&&(e.primitiveSchema=n.primitiveSchema),e.idBlock=new l(n),e.lenBlock=new c(n),e.valueBlock=new i(n),e}return s(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"toBER",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.idBlock.toBER(t),n=this.valueBlock.toBER(!0);this.lenBlock.length=n.byteLength;var a,i=this.lenBlock.toBER(t);if(e=(0,Oe.utilConcatBuf)(r,i),a=!1===t?this.valueBlock.toBER(t):new ArrayBuffer(this.lenBlock.length),e=(0,Oe.utilConcatBuf)(e,a),!0===this.lenBlock.isIndefiniteForm){var s=new ArrayBuffer(2);if(!1===t){var o=new Uint8Array(s);o[0]=0,o[1]=0}e=(0,Oe.utilConcatBuf)(e,s)}return e}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.idBlock=this.idBlock.toJSON(),e.lenBlock=this.lenBlock.toJSON(),e.valueBlock=this.valueBlock.toJSON(),"name"in this&&(e.name=this.name),"optional"in this&&(e.optional=this.optional),"primitiveSchema"in this&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}}],[{key:"blockName",value:function(){return"BaseBlock"}}]),r}(n);t.BaseBlock=v;var g=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).valueHex="valueHex"in n?n.valueHex.slice(0):new ArrayBuffer(0),e.isHexOnly=(0,Oe.getParametersValue)(n,"isHexOnly",!0),e}return s(r,[{key:"fromBER",value:function(e,t,r){if(!1===(0,Oe.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.warnings.push("Zero buffer length"),t;this.valueHex=new ArrayBuffer(n.length);for(var a=new Uint8Array(this.valueHex),i=0;i<n.length;i++)a[i]=n[i];return this.blockLength=r,t+r}},{key:"toBER",value:function(){return this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.valueHex=(0,Oe.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e.isHexOnly=this.isHexOnly,e}}],[{key:"blockName",value:function(){return"PrimitiveValueBlock"}}]),r}(h),d=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n,g)).idBlock.isConstructed=!1,e}return s(r,null,[{key:"blockName",value:function(){return"PRIMITIVE"}}]),r}(v);t.Primitive=d;var p=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).value=(0,Oe.getParametersValue)(n,"value",[]),e.isIndefiniteForm=(0,Oe.getParametersValue)(n,"isIndefiniteForm",!1),e}return s(r,[{key:"fromBER",value:function(e,t,r){var n=t,a=r;if(!1===(0,Oe.checkBufferParams)(this,e,t,r))return-1;if(0===new Uint8Array(e,t,r).length)return this.warnings.push("Zero buffer length"),t;for(var i,s,o=t;i=this.isIndefiniteForm,s=r,(!0===i?1:s)>0;){var u=me(e,o,r);if(-1===u.offset)return this.error=u.result.error,this.warnings.concat(u.result.warnings),-1;if(o=u.offset,this.blockLength+=u.result.blockLength,r-=u.result.blockLength,this.value.push(u.result),!0===this.isIndefiniteForm&&u.result.constructor.blockName()===b.blockName())break}return!0===this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.blockName()===b.blockName()?this.value.pop():this.warnings.push("No EndOfContent block encoded")),this.valueBeforeDecode=e.slice(n,n+a),o}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);t=(0,Oe.utilConcatBuf)(t,n)}return t}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}e.isIndefiniteForm=this.isIndefiniteForm,e.value=[];for(var t=0;t<this.value.length;t++)e.value.push(this.value[t].toJSON());return e}}],[{key:"blockName",value:function(){return"ConstructedValueBlock"}}]),r}(h),y=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n,p)).idBlock.isConstructed=!0,e}return s(r,[{key:"fromBER",value:function(e,t,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}}],[{key:"blockName",value:function(){return"CONSTRUCTED"}}]),r}(v);t.Constructed=y;var k=function(e){o(r,e);var t=f(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),t.call(this,e)}return s(r,[{key:"fromBER",value:function(e,t,r){return t}},{key:"toBER",value:function(){return new ArrayBuffer(0)}}],[{key:"blockName",value:function(){return"EndOfContentValueBlock"}}]),r}(h),b=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n,k)).idBlock.tagClass=1,e.idBlock.tagNumber=0,e}return s(r,null,[{key:"blockName",value:function(){return"EndOfContent"}}]),r}(v);t.EndOfContent=b;var w=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(a(this,r),(e=t.call(this,n)).value=(0,Oe.getParametersValue)(n,"value",!1),e.isHexOnly=(0,Oe.getParametersValue)(n,"isHexOnly",!1),"valueHex"in n)e.valueHex=n.valueHex.slice(0);else if(e.valueHex=new ArrayBuffer(1),!0===e.value){var i=new Uint8Array(e.valueHex);i[0]=255}return e}return s(r,[{key:"fromBER",value:function(e,t,r){if(!1===(0,Oe.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);r>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,this.valueHex=new ArrayBuffer(n.length);for(var a=new Uint8Array(this.valueHex),i=0;i<n.length;i++)a[i]=n[i];return 0!==Oe.utilDecodeTC.call(this)?this.value=!0:this.value=!1,this.blockLength=r,t+r}},{key:"toBER",value:function(){return this.valueHex}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e.isHexOnly=this.isHexOnly,e.valueHex=(0,Oe.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"BooleanValueBlock"}}]),r}(h),S=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n,w)).idBlock.tagClass=1,e.idBlock.tagNumber=1,e}return s(r,null,[{key:"blockName",value:function(){return"Boolean"}}]),r}(v);t.Boolean=S;var N=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=16,e}return s(r,null,[{key:"blockName",value:function(){return"Sequence"}}]),r}(y);t.Sequence=N;var A=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=17,e}return s(r,null,[{key:"blockName",value:function(){return"Set"}}]),r}(y);t.Set=A;var B=function(e){o(r,e);var t=f(r);function r(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,i,n)).idBlock.tagClass=1,e.idBlock.tagNumber=5,e}return s(r,[{key:"fromBER",value:function(e,t,r){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=r,t+r>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+r}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(2);if(!0===e)return t;var r=new Uint8Array(t);return r[0]=5,r[1]=0,t}}],[{key:"blockName",value:function(){return"Null"}}]),r}(v);t.Null=B;var C=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).isConstructed=(0,Oe.getParametersValue)(n,"isConstructed",!1),e}return s(r,[{key:"fromBER",value:function(e,t,n){var a=0;if(!0===this.isConstructed){if(this.isHexOnly=!1,-1===(a=p.prototype.fromBER.call(this,e,t,n)))return a;for(var i=0;i<this.value.length;i++){var s=this.value[i].constructor.blockName();if(s===b.blockName()){if(!0===this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(s!==x.blockName())return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,a=m(u(r.prototype),"fromBER",this).call(this,e,t,n),this.blockLength=n;return a}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===this.isConstructed)return p.prototype.toBER.call(this,e);var t=new ArrayBuffer(this.valueHex.byteLength);return!0===e||0===this.valueHex.byteLength?t:t=this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=(0,Oe.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"OctetStringValueBlock"}}]),r}(i(p)),x=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n,C)).idBlock.tagClass=1,e.idBlock.tagNumber=4,e}return s(r,[{key:"fromBER",value:function(e,t,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===n?(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),t):m(u(r.prototype),"fromBER",this).call(this,e,t,n)}},{key:"isEqual",value:function(e){return e instanceof r!=!1&&JSON.stringify(this)===JSON.stringify(e)}}],[{key:"blockName",value:function(){return"OctetString"}}]),r}(v);t.OctetString=x;var I=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).unusedBits=(0,Oe.getParametersValue)(n,"unusedBits",0),e.isConstructed=(0,Oe.getParametersValue)(n,"isConstructed",!1),e.blockLength=e.valueHex.byteLength,e}return s(r,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;var n=-1;if(!0===this.isConstructed){if(-1===(n=p.prototype.fromBER.call(this,e,t,r)))return n;for(var a=0;a<this.value.length;a++){var i=this.value[a].constructor.blockName();if(i===b.blockName()){if(!0===this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(i!==E.blockName())return this.error="BIT STRING may consists of BIT STRINGs only",-1;if(this.unusedBits>0&&this.value[a].valueBlock.unusedBits>0)return this.error='Usign of "unused bits" inside constructive BIT STRING allowed for least one only',-1;if(this.unusedBits=this.value[a].valueBlock.unusedBits,this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1}return n}if(!1===(0,Oe.checkBufferParams)(this,e,t,r))return-1;var s=new Uint8Array(e,t,r);if(this.unusedBits=s[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;this.valueHex=new ArrayBuffer(s.length-1);for(var o=new Uint8Array(this.valueHex),u=0;u<r-1;u++)o[u]=s[u+1];return this.blockLength=s.length,t+r}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===this.isConstructed)return p.prototype.toBER.call(this,e);if(!0===e)return new ArrayBuffer(this.valueHex.byteLength+1);if(0===this.valueHex.byteLength)return new ArrayBuffer(0);var t=new Uint8Array(this.valueHex),r=new ArrayBuffer(this.valueHex.byteLength+1),n=new Uint8Array(r);n[0]=this.unusedBits;for(var a=0;a<this.valueHex.byteLength;a++)n[a+1]=t[a];return r}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.unusedBits=this.unusedBits,e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=(0,Oe.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"BitStringValueBlock"}}]),r}(i(p)),E=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n,I)).idBlock.tagClass=1,e.idBlock.tagNumber=3,e}return s(r,[{key:"fromBER",value:function(e,t,n){return 0===n?t:(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,m(u(r.prototype),"fromBER",this).call(this,e,t,n))}},{key:"isEqual",value:function(e){return e instanceof r!=!1&&JSON.stringify(this)===JSON.stringify(e)}}],[{key:"blockName",value:function(){return"BitString"}}]),r}(v);t.BitString=E;var P=function(e){o(n,e);var t=f(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,n),e=t.call(this,r),"value"in r&&(e.valueDec=r.value),e}return s(n,[{key:"fromDER",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=this.fromBER(e,t,r);if(-1===a)return a;var i=new Uint8Array(this._valueHex);if(0===i[0]&&0!=(128&i[1])){var s=new ArrayBuffer(this._valueHex.byteLength-1),o=new Uint8Array(s);o.set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=s.slice(0)}else if(0!==n&&this._valueHex.byteLength<n){n-this._valueHex.byteLength>1&&(n=this._valueHex.byteLength+1);var u=new ArrayBuffer(n),l=new Uint8Array(u);l.set(i,n-this._valueHex.byteLength),this._valueHex=u.slice(0)}return a}},{key:"toDER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new Uint8Array(this._valueHex);switch(!0){case 0!=(128&t[0]):var r=new ArrayBuffer(this._valueHex.byteLength+1),n=new Uint8Array(r);n[0]=0,n.set(t,1),this._valueHex=r.slice(0);break;case 0===t[0]&&0==(128&t[1]):var a=new ArrayBuffer(this._valueHex.byteLength-1),i=new Uint8Array(a);i.set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=a.slice(0)}return this.toBER(e)}},{key:"fromBER",value:function(e,t,r){var a=m(u(n.prototype),"fromBER",this).call(this,e,t,r);return-1===a?a:(this.blockLength=r,t+r)}},{key:"toBER",value:function(){return this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=m(u(n.prototype),"toJSON",this).call(this)}catch(e){}return e.valueDec=this.valueDec,e}},{key:"toString",value:function(){function e(e,t){for(var r=new Uint8Array([0]),n=new Uint8Array(e),a=new Uint8Array(t),i=n.slice(0),s=i.length-1,o=a.slice(0),u=o.length-1,l=0,c=0,h=u<s?s:u;h>=0;h--,c++){switch(!0){case c<o.length:l=i[s-c]+o[u-c]+r[0];break;default:l=i[s-c]+r[0]}switch(r[0]=l/10,!0){case c>=i.length:i=(0,Oe.utilConcatView)(new Uint8Array([l%10]),i);break;default:i[s-c]=l%10}}return r[0]>0&&(i=(0,Oe.utilConcatView)(r,i)),i.slice(0)}function t(e){if(e>=r.length)for(var t=r.length;t<=e;t++){for(var n=new Uint8Array([0]),a=r[t-1].slice(0),i=a.length-1;i>=0;i--){var s=new Uint8Array([(a[i]<<1)+n[0]]);n[0]=s[0]/10,a[i]=s[0]%10}n[0]>0&&(a=(0,Oe.utilConcatView)(n,a)),r.push(a)}return r[e]}function n(e,t){for(var r,n=0,a=new Uint8Array(e),i=new Uint8Array(t),s=a.slice(0),o=s.length-1,u=i.slice(0),l=u.length-1,c=0,h=l;h>=0;h--,c++)switch(r=s[o-c]-u[l-c]-n,!0){case r<0:n=1,s[o-c]=r+10;break;default:n=0,s[o-c]=r}if(n>0)for(var f=o-l+1;f>=0;f--,c++){if(!((r=s[o-c]-n)<0)){n=0,s[o-c]=r;break}n=1,s[o-c]=r+10}return s.slice()}for(var a,i=8*this._valueHex.byteLength-1,s=new Uint8Array(8*this._valueHex.byteLength/3),o=0,u=new Uint8Array(this._valueHex),l="",c=!1,h=this._valueHex.byteLength-1;h>=0;h--){a=u[h];for(var f=0;f<8;f++){if(1==(1&a))switch(o){case i:s=n(t(o),s),l="-";break;default:s=e(s,t(o))}o++,a>>=1}}for(var m=0;m<s.length;m++)s[m]&&(c=!0),c&&(l+="0123456789".charAt(s[m]));return!1===c&&(l+="0123456789".charAt(0)),l}},{key:"valueHex",set:function(e){this._valueHex=e.slice(0),e.byteLength>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,e.byteLength>0&&(this._valueDec=Oe.utilDecodeTC.call(this)))},get:function(){return this._valueHex}},{key:"valueDec",set:function(e){this._valueDec=e,this.isHexOnly=!1,this._valueHex=(0,Oe.utilEncodeTC)(e)},get:function(){return this._valueDec}}],[{key:"blockName",value:function(){return"IntegerValueBlock"}}]),n}(i(h)),R=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n,P)).idBlock.tagClass=1,e.idBlock.tagNumber=2,e}return s(r,[{key:"isEqual",value:function(e){return e instanceof r?this.valueBlock.isHexOnly&&e.valueBlock.isHexOnly?(0,Oe.isEqualBuffer)(this.valueBlock.valueHex,e.valueBlock.valueHex):this.valueBlock.isHexOnly===e.valueBlock.isHexOnly&&this.valueBlock.valueDec===e.valueBlock.valueDec:e instanceof ArrayBuffer&&(0,Oe.isEqualBuffer)(this.valueBlock.valueHex,e)}},{key:"convertToDER",value:function(){var e=new r({valueHex:this.valueBlock.valueHex});return e.valueBlock.toDER(),e}},{key:"convertFromDER",value:function(){var e=this.valueBlock.valueHex.byteLength%2?this.valueBlock.valueHex.byteLength+1:this.valueBlock.valueHex.byteLength,t=new r({valueHex:this.valueBlock.valueHex});return t.valueBlock.fromDER(t.valueBlock.valueHex,0,t.valueBlock.valueHex.byteLength,e),t}}],[{key:"blockName",value:function(){return"Integer"}}]),r}(v);t.Integer=R;var L=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=10,e}return s(r,null,[{key:"blockName",value:function(){return"Enumerated"}}]),r}(R);t.Enumerated=L;var O=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).valueDec=(0,Oe.getParametersValue)(n,"valueDec",-1),e.isFirstSid=(0,Oe.getParametersValue)(n,"isFirstSid",!1),e}return s(r,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;if(!1===(0,Oe.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);this.valueHex=new ArrayBuffer(r);for(var a=new Uint8Array(this.valueHex),i=0;i<r&&(a[i]=127&n[i],this.blockLength++,0!=(128&n[i]));i++);for(var s=new ArrayBuffer(this.blockLength),o=new Uint8Array(s),u=0;u<this.blockLength;u++)o[u]=a[u];return this.valueHex=s.slice(0),a=new Uint8Array(this.valueHex),0!=(128&n[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===a[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=(0,Oe.utilFromBase)(a,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}},{key:"toBER",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isHexOnly){if(!0===r)return new ArrayBuffer(this.valueHex.byteLength);var n=new Uint8Array(this.valueHex);e=new ArrayBuffer(this.blockLength),t=new Uint8Array(e);for(var a=0;a<this.blockLength-1;a++)t[a]=128|n[a];return t[this.blockLength-1]=n[this.blockLength-1],e}var i=(0,Oe.utilToBase)(this.valueDec,7);if(0===i.byteLength)return this.error="Error during encoding SID value",new ArrayBuffer(0);if(e=new ArrayBuffer(i.byteLength),!1===r){var s=new Uint8Array(i);t=new Uint8Array(e);for(var o=0;o<i.byteLength-1;o++)t[o]=128|s[o];t[i.byteLength-1]=s[i.byteLength-1]}return e}},{key:"toString",value:function(){var e="";if(!0===this.isHexOnly)e=(0,Oe.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength);else if(this.isFirstSid){var t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.valueDec=this.valueDec,e.isFirstSid=this.isFirstSid,e}}],[{key:"blockName",value:function(){return"sidBlock"}}]),r}(i(n)),U=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).fromString((0,Oe.getParametersValue)(n,"value","")),e}return s(r,[{key:"fromBER",value:function(e,t,r){for(var n=t;r>0;){var a=new O;if(-1===(n=a.fromBER(e,n,r)))return this.blockLength=0,this.error=a.error,n;0===this.value.length&&(a.isFirstSid=!0),this.blockLength+=a.blockLength,r-=a.blockLength,this.value.push(a)}return n}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);if(0===n.byteLength)return this.error=this.value[r].error,new ArrayBuffer(0);t=(0,Oe.utilConcatBuf)(t,n)}return t}},{key:"fromString",value:function(e){this.value=[];var t=0,r=0,n="",a=!1;do{if(n=-1===(r=e.indexOf(".",t))?e.substr(t):e.substr(t,r-t),t=r+1,a){var i=this.value[0],s=0;switch(i.valueDec){case 0:break;case 1:s=40;break;case 2:s=80;break;default:return this.value=[],!1}var o=parseInt(n,10);if(isNaN(o))return!0;i.valueDec=o+s,a=!1}else{var u=new O;if(u.valueDec=parseInt(n,10),isNaN(u.valueDec))return!0;0===this.value.length&&(u.isFirstSid=!0,a=!0),this.value.push(u)}}while(-1!==r);return!0}},{key:"toString",value:function(){for(var e="",t=!1,r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;var n=this.value[r].toString();0!==r&&(e="".concat(e,".")),t?(n="{".concat(n,"}"),this.value[r].isFirstSid?e="2.{".concat(n," - 80}"):e+=n):e+=n}return e}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}e.value=this.toString(),e.sidArray=[];for(var t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}],[{key:"blockName",value:function(){return"ObjectIdentifierValueBlock"}}]),r}(h),D=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n,U)).idBlock.tagClass=1,e.idBlock.tagNumber=6,e}return s(r,null,[{key:"blockName",value:function(){return"ObjectIdentifier"}}]),r}(v);t.ObjectIdentifier=D;var T=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).isHexOnly=!0,e.value="",e}return s(r,[{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"Utf8StringValueBlock"}}]),r}(i(n)),H=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),e=t.call(this,n,T),"value"in n&&e.fromString(n.value),e.idBlock.tagClass=1,e.idBlock.tagNumber=12,e}return s(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e));try{this.valueBlock.value=decodeURIComponent(escape(this.valueBlock.value))}catch(e){this.warnings.push('Error during "decodeURIComponent": '.concat(e,", using raw string"))}}},{key:"fromString",value:function(e){var t=unescape(encodeURIComponent(e)),r=t.length;this.valueBlock.valueHex=new ArrayBuffer(r);for(var n=new Uint8Array(this.valueBlock.valueHex),a=0;a<r;a++)n[a]=t.charCodeAt(a);this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"Utf8String"}}]),r}(v);t.Utf8String=H;var V=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).valueDec=(0,Oe.getParametersValue)(n,"valueDec",-1),e}return s(r,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;if(!1===(0,Oe.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);this.valueHex=new ArrayBuffer(r);for(var a=new Uint8Array(this.valueHex),i=0;i<r&&(a[i]=127&n[i],this.blockLength++,0!=(128&n[i]));i++);for(var s=new ArrayBuffer(this.blockLength),o=new Uint8Array(s),u=0;u<this.blockLength;u++)o[u]=a[u];return this.valueHex=s.slice(0),a=new Uint8Array(this.valueHex),0!=(128&n[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===a[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=(0,Oe.utilFromBase)(a,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}},{key:"toBER",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isHexOnly){if(!0===r)return new ArrayBuffer(this.valueHex.byteLength);var n=new Uint8Array(this.valueHex);e=new ArrayBuffer(this.blockLength),t=new Uint8Array(e);for(var a=0;a<this.blockLength-1;a++)t[a]=128|n[a];return t[this.blockLength-1]=n[this.blockLength-1],e}var i=(0,Oe.utilToBase)(this.valueDec,7);if(0===i.byteLength)return this.error="Error during encoding SID value",new ArrayBuffer(0);if(e=new ArrayBuffer(i.byteLength),!1===r){var s=new Uint8Array(i);t=new Uint8Array(e);for(var o=0;o<i.byteLength-1;o++)t[o]=128|s[o];t[i.byteLength-1]=s[i.byteLength-1]}return e}},{key:"toString",value:function(){return!0===this.isHexOnly?(0,Oe.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength):this.valueDec.toString()}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.valueDec=this.valueDec,e}}],[{key:"blockName",value:function(){return"relativeSidBlock"}}]),r}(i(n)),_=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).fromString((0,Oe.getParametersValue)(n,"value","")),e}return s(r,[{key:"fromBER",value:function(e,t,r){for(var n=t;r>0;){var a=new V;if(-1===(n=a.fromBER(e,n,r)))return this.blockLength=0,this.error=a.error,n;this.blockLength+=a.blockLength,r-=a.blockLength,this.value.push(a)}return n}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);if(0===n.byteLength)return this.error=this.value[r].error,new ArrayBuffer(0);t=(0,Oe.utilConcatBuf)(t,n)}return t}},{key:"fromString",value:function(e){this.value=[];var t=0,r=0,n="";do{n=-1===(r=e.indexOf(".",t))?e.substr(t):e.substr(t,r-t),t=r+1;var a=new V;if(a.valueDec=parseInt(n,10),isNaN(a.valueDec))return!0;this.value.push(a)}while(-1!==r);return!0}},{key:"toString",value:function(){for(var e="",t=!1,r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;var n=this.value[r].toString();0!==r&&(e="".concat(e,".")),e+=t?n="{".concat(n,"}"):n}return e}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}e.value=this.toString(),e.sidArray=[];for(var t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}],[{key:"blockName",value:function(){return"RelativeObjectIdentifierValueBlock"}}]),r}(h),j=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n,_)).idBlock.tagClass=1,e.idBlock.tagNumber=13,e}return s(r,null,[{key:"blockName",value:function(){return"RelativeObjectIdentifier"}}]),r}(v);t.RelativeObjectIdentifier=j;var M=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).isHexOnly=!0,e.value="",e}return s(r,[{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"BmpStringValueBlock"}}]),r}(i(n)),K=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),e=t.call(this,n,M),"value"in n&&e.fromString(n.value),e.idBlock.tagClass=1,e.idBlock.tagNumber=30,e}return s(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){for(var t=e.slice(0),r=new Uint8Array(t),n=0;n<r.length;n+=2){var a=r[n];r[n]=r[n+1],r[n+1]=a}this.valueBlock.value=String.fromCharCode.apply(null,new Uint16Array(t))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(2*t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++){var a=(0,Oe.utilToBase)(e.charCodeAt(n),8),i=new Uint8Array(a);if(!(i.length>2))for(var s=2-i.length,o=i.length-1;o>=0;o--)r[2*n+o+s]=i[o]}this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"BmpString"}}]),r}(v);t.BmpString=K;var F=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).isHexOnly=!0,e.value="",e}return s(r,[{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"UniversalStringValueBlock"}}]),r}(i(n)),X=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),e=t.call(this,n,F),"value"in n&&e.fromString(n.value),e.idBlock.tagClass=1,e.idBlock.tagNumber=28,e}return s(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){for(var t=e.slice(0),r=new Uint8Array(t),n=0;n<r.length;n+=4)r[n]=r[n+3],r[n+1]=r[n+2],r[n+2]=0,r[n+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(4*t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++){var a=(0,Oe.utilToBase)(e.charCodeAt(n),8),i=new Uint8Array(a);if(!(i.length>4))for(var s=4-i.length,o=i.length-1;o>=0;o--)r[4*n+o+s]=i[o]}this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"UniversalString"}}]),r}(v);t.UniversalString=X;var G=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).value="",e.isHexOnly=!0,e}return s(r,[{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"SimpleStringValueBlock"}}]),r}(i(n)),J=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),e=t.call(this,n,G),"value"in n&&e.fromString(n.value),e}return s(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++)r[n]=e.charCodeAt(n);this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"SIMPLESTRING"}}]),r}(v),q=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=18,e}return s(r,null,[{key:"blockName",value:function(){return"NumericString"}}]),r}(J);t.NumericString=q;var W=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=19,e}return s(r,null,[{key:"blockName",value:function(){return"PrintableString"}}]),r}(J);t.PrintableString=W;var Q=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=20,e}return s(r,null,[{key:"blockName",value:function(){return"TeletexString"}}]),r}(J);t.TeletexString=Q;var z=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=21,e}return s(r,null,[{key:"blockName",value:function(){return"VideotexString"}}]),r}(J);t.VideotexString=z;var Y=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=22,e}return s(r,null,[{key:"blockName",value:function(){return"IA5String"}}]),r}(J);t.IA5String=Y;var Z=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=25,e}return s(r,null,[{key:"blockName",value:function(){return"GraphicString"}}]),r}(J);t.GraphicString=Z;var $=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=26,e}return s(r,null,[{key:"blockName",value:function(){return"VisibleString"}}]),r}(J);t.VisibleString=$;var ee=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=27,e}return s(r,null,[{key:"blockName",value:function(){return"GeneralString"}}]),r}(J);t.GeneralString=ee;var te=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=29,e}return s(r,null,[{key:"blockName",value:function(){return"CharacterString"}}]),r}(J);t.CharacterString=te;var re=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(a(this,r),(e=t.call(this,n)).year=0,e.month=0,e.day=0,e.hour=0,e.minute=0,e.second=0,"value"in n){e.fromString(n.value),e.valueBlock.valueHex=new ArrayBuffer(n.value.length);for(var i=new Uint8Array(e.valueBlock.valueHex),s=0;s<n.value.length;s++)i[s]=n.value.charCodeAt(s)}return"valueDate"in n&&(e.fromDate(n.valueDate),e.valueBlock.valueHex=e.toBuffer()),e.idBlock.tagClass=1,e.idBlock.tagNumber=23,e}return s(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}},{key:"toBuffer",value:function(){for(var e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t}},{key:"fromDate",value:function(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}},{key:"toDate",value:function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}},{key:"fromString",value:function(e){var t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi.exec(e);if(null!==t){var r=parseInt(t[1],10);this.year=r>=50?1900+r:2e3+r,this.month=parseInt(t[2],10),this.day=parseInt(t[3],10),this.hour=parseInt(t[4],10),this.minute=parseInt(t[5],10),this.second=parseInt(t[6],10)}else this.error="Wrong input string for convertion"}},{key:"toString",value:function(){var e=new Array(7);return e[0]=(0,Oe.padNumber)(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=(0,Oe.padNumber)(this.month,2),e[2]=(0,Oe.padNumber)(this.day,2),e[3]=(0,Oe.padNumber)(this.hour,2),e[4]=(0,Oe.padNumber)(this.minute,2),e[5]=(0,Oe.padNumber)(this.second,2),e[6]="Z",e.join("")}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e}}],[{key:"blockName",value:function(){return"UTCTime"}}]),r}($);t.UTCTime=re;var ne=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(a(this,r),(e=t.call(this,n)).year=0,e.month=0,e.day=0,e.hour=0,e.minute=0,e.second=0,e.millisecond=0,"value"in n){e.fromString(n.value),e.valueBlock.valueHex=new ArrayBuffer(n.value.length);for(var i=new Uint8Array(e.valueBlock.valueHex),s=0;s<n.value.length;s++)i[s]=n.value.charCodeAt(s)}return"valueDate"in n&&(e.fromDate(n.valueDate),e.valueBlock.valueHex=e.toBuffer()),e.idBlock.tagClass=1,e.idBlock.tagNumber=24,e}return s(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}},{key:"toBuffer",value:function(){for(var e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t}},{key:"fromDate",value:function(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}},{key:"toDate",value:function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}},{key:"fromString",value:function(e){var t,r=!1,n="",a="",i=0,s=0,o=0;if("Z"===e[e.length-1])n=e.substr(0,e.length-1),r=!0;else{var u=new Number(e[e.length-1]);if(isNaN(u.valueOf()))throw new Error("Wrong input string for convertion");n=e}if(r){if(-1!==n.indexOf("+"))throw new Error("Wrong input string for convertion");if(-1!==n.indexOf("-"))throw new Error("Wrong input string for convertion")}else{var l=1,c=n.indexOf("+"),h="";if(-1===c&&(c=n.indexOf("-"),l=-1),-1!==c){if(h=n.substr(c+1),n=n.substr(0,c),2!==h.length&&4!==h.length)throw new Error("Wrong input string for convertion");var f=new Number(h.substr(0,2));if(isNaN(f.valueOf()))throw new Error("Wrong input string for convertion");if(s=l*f,4===h.length){if(f=new Number(h.substr(2,2)),isNaN(f.valueOf()))throw new Error("Wrong input string for convertion");o=l*f}}}var m=n.indexOf(".");if(-1===m&&(m=n.indexOf(",")),-1!==m){var v=new Number("0".concat(n.substr(m)));if(isNaN(v.valueOf()))throw new Error("Wrong input string for convertion");i=v.valueOf(),a=n.substr(0,m)}else a=n;switch(!0){case 8===a.length:if(t=/(\d{4})(\d{2})(\d{2})/gi,-1!==m)throw new Error("Wrong input string for convertion");break;case 10===a.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,-1!==m){var g=60*i;this.minute=Math.floor(g),g=60*(g-this.minute),this.second=Math.floor(g),g=1e3*(g-this.second),this.millisecond=Math.floor(g)}break;case 12===a.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==m){var d=60*i;this.second=Math.floor(d),d=1e3*(d-this.second),this.millisecond=Math.floor(d)}break;case 14===a.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==m){var p=1e3*i;this.millisecond=Math.floor(p)}break;default:throw new Error("Wrong input string for convertion")}var y=t.exec(a);if(null===y)throw new Error("Wrong input string for convertion");for(var k=1;k<y.length;k++)switch(k){case 1:this.year=parseInt(y[k],10);break;case 2:this.month=parseInt(y[k],10);break;case 3:this.day=parseInt(y[k],10);break;case 4:this.hour=parseInt(y[k],10)+s;break;case 5:this.minute=parseInt(y[k],10)+o;break;case 6:this.second=parseInt(y[k],10);break;default:throw new Error("Wrong input string for convertion")}if(!1===r){var b=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=b.getUTCFullYear(),this.month=b.getUTCMonth(),this.day=b.getUTCDay(),this.hour=b.getUTCHours(),this.minute=b.getUTCMinutes(),this.second=b.getUTCSeconds(),this.millisecond=b.getUTCMilliseconds()}}},{key:"toString",value:function(){var e=[];return e.push((0,Oe.padNumber)(this.year,4)),e.push((0,Oe.padNumber)(this.month,2)),e.push((0,Oe.padNumber)(this.day,2)),e.push((0,Oe.padNumber)(this.hour,2)),e.push((0,Oe.padNumber)(this.minute,2)),e.push((0,Oe.padNumber)(this.second,2)),0!==this.millisecond&&(e.push("."),e.push((0,Oe.padNumber)(this.millisecond,3))),e.push("Z"),e.join("")}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e.millisecond=this.millisecond,e}}],[{key:"blockName",value:function(){return"GeneralizedTime"}}]),r}($);t.GeneralizedTime=ne;var ae=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=31,e}return s(r,null,[{key:"blockName",value:function(){return"DATE"}}]),r}(H);t.DATE=ae;var ie=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=32,e}return s(r,null,[{key:"blockName",value:function(){return"TimeOfDay"}}]),r}(H);t.TimeOfDay=ie;var se=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=33,e}return s(r,null,[{key:"blockName",value:function(){return"DateTime"}}]),r}(H);t.DateTime=se;var oe=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=34,e}return s(r,null,[{key:"blockName",value:function(){return"Duration"}}]),r}(H);t.Duration=oe;var ue=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=14,e}return s(r,null,[{key:"blockName",value:function(){return"TIME"}}]),r}(H);t.TIME=ue;var le=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.value=(0,Oe.getParametersValue)(t,"value",[]),this.optional=(0,Oe.getParametersValue)(t,"optional",!1)};t.Choice=le;var ce=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.name=(0,Oe.getParametersValue)(t,"name",""),this.optional=(0,Oe.getParametersValue)(t,"optional",!1)};t.Any=ce;var he=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.name=(0,Oe.getParametersValue)(t,"name",""),this.optional=(0,Oe.getParametersValue)(t,"optional",!1),this.value=(0,Oe.getParametersValue)(t,"value",new ce),this.local=(0,Oe.getParametersValue)(t,"local",!1)};t.Repeated=he;var fe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.data=(0,Oe.getParametersValue)(t,"data",new ArrayBuffer(0))}return s(e,[{key:"fromBER",value:function(e,t,r){return this.data=e.slice(t,r),t+r}},{key:"toBER",value:function(){return this.data}}]),e}();function me(e,t,r){var a=t;var i=new v({},Object),s=new n;if(!1===(0,Oe.checkBufferParams)(s,e,t,r))return i.error=s.error,{offset:-1,result:i};if(0===new Uint8Array(e,t,r).length)return this.error="Zero buffer length",{offset:-1,result:i};var o=i.idBlock.fromBER(e,t,r);if(i.warnings.concat(i.idBlock.warnings),-1===o)return i.error=i.idBlock.error,{offset:-1,result:i};if(t=o,r-=i.idBlock.blockLength,o=i.lenBlock.fromBER(e,t,r),i.warnings.concat(i.lenBlock.warnings),-1===o)return i.error=i.lenBlock.error,{offset:-1,result:i};if(t=o,r-=i.lenBlock.blockLength,!1===i.idBlock.isConstructed&&!0===i.lenBlock.isIndefiniteForm)return i.error="Indefinite length form used for primitive encoding form",{offset:-1,result:i};var u=v;switch(i.idBlock.tagClass){case 1:if(i.idBlock.tagNumber>=37&&!1===i.idBlock.isHexOnly)return i.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:i};switch(i.idBlock.tagNumber){case 0:if(!0===i.idBlock.isConstructed&&i.lenBlock.length>0)return i.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:i};u=b;break;case 1:u=S;break;case 2:u=R;break;case 3:u=E;break;case 4:u=x;break;case 5:u=B;break;case 6:u=D;break;case 10:u=L;break;case 12:u=H;break;case 13:u=j;break;case 14:u=ue;break;case 15:return i.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:i};case 16:u=N;break;case 17:u=A;break;case 18:u=q;break;case 19:u=W;break;case 20:u=Q;break;case 21:u=z;break;case 22:u=Y;break;case 23:u=re;break;case 24:u=ne;break;case 25:u=Z;break;case 26:u=$;break;case 27:u=ee;break;case 28:u=X;break;case 29:u=te;break;case 30:u=K;break;case 31:u=ae;break;case 32:u=ie;break;case 33:u=se;break;case 34:u=oe;break;default:var l;(l=!0===i.idBlock.isConstructed?new y:new d).idBlock=i.idBlock,l.lenBlock=i.lenBlock,l.warnings=i.warnings,o=(i=l).fromBER(e,t,r)}break;case 2:case 3:case 4:default:u=!0===i.idBlock.isConstructed?y:d}return o=(i=function(e,t){if(e instanceof t)return e;var r=new t;return r.idBlock=e.idBlock,r.lenBlock=e.lenBlock,r.warnings=e.warnings,r.valueBeforeDecode=e.valueBeforeDecode.slice(0),r}(i,u)).fromBER(e,t,!0===i.lenBlock.isIndefiniteForm?r:i.lenBlock.length),i.valueBeforeDecode=e.slice(a,a+i.blockLength),{offset:o,result:i}}function ve(e){if(0===e.byteLength){var t=new v({},Object);return t.error="Input buffer has zero length",{offset:-1,result:t}}return me(e,0,e.byteLength)}function ge(e,t,r){if(r instanceof le){for(var n=0;n<r.value.length;n++){if(!0===ge(e,t,r.value[n]).verified)return{verified:!0,result:e}}var a={verified:!1,result:{error:"Wrong values for Choice type"}};return r.hasOwnProperty("name")&&(a.name=r.name),a}if(r instanceof ce)return r.hasOwnProperty("name")&&(e[r.name]=t),{verified:!0,result:e};if(e instanceof Object==!1)return{verified:!1,result:{error:"Wrong root object"}};if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(r instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("idBlock"in r==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("fromBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("toBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var i=r.idBlock.toBER(!1);if(0===i.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(-1===r.idBlock.fromBER(i,0,i.byteLength))return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===r.idBlock.hasOwnProperty("tagClass"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagClass!==t.idBlock.tagClass)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("tagNumber"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagNumber!==t.idBlock.tagNumber)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("isConstructed"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isConstructed!==t.idBlock.isConstructed)return{verified:!1,result:e};if("isHexOnly"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly)return{verified:!1,result:e};if(!0===r.idBlock.isHexOnly){if("valueHex"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var s=new Uint8Array(r.idBlock.valueHex),o=new Uint8Array(t.idBlock.valueHex);if(s.length!==o.length)return{verified:!1,result:e};for(var u=0;u<s.length;u++)if(s[u]!==o[1])return{verified:!1,result:e}}if(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(e[r.name]=t)),!0===r.idBlock.isConstructed){var l=0,c={verified:!1},h=r.valueBlock.value.length;if(h>0&&r.valueBlock.value[0]instanceof he&&(h=t.valueBlock.value.length),0===h)return{verified:!0,result:e};if(0===t.valueBlock.value.length&&0!==r.valueBlock.value.length){for(var f=!0,m=0;m<r.valueBlock.value.length;m++)f=f&&(r.valueBlock.value[m].optional||!1);return!0===f?{verified:!0,result:e}:(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),e.error="Inconsistent object length",{verified:!1,result:e})}for(var v=0;v<h;v++)if(v-l>=t.valueBlock.value.length){if(!1===r.valueBlock.value[v].optional){var g={verified:!1,result:e};return e.error="Inconsistent length between ASN.1 data and schema",r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],g.name=r.name)),g}}else if(r.valueBlock.value[0]instanceof he){if(!1===(c=ge(e,t.valueBlock.value[v],r.valueBlock.value[0].value)).verified){if(!0!==r.valueBlock.value[0].optional)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),c;l++}if("name"in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){var d={};void 0===(d="local"in r.valueBlock.value[0]&&!0===r.valueBlock.value[0].local?t:e)[r.valueBlock.value[0].name]&&(d[r.valueBlock.value[0].name]=[]),d[r.valueBlock.value[0].name].push(t.valueBlock.value[v])}}else if(!1===(c=ge(e,t.valueBlock.value[v-l],r.valueBlock.value[v])).verified){if(!0!==r.valueBlock.value[v].optional)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),c;l++}if(!1===c.verified){var p={verified:!1,result:e};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],p.name=r.name)),p}return{verified:!0,result:e}}if("primitiveSchema"in r&&"valueHex"in t.valueBlock){var y=ve(t.valueBlock.valueHex);if(-1===y.offset){var k={verified:!1,result:y.result};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],k.name=r.name)),k}return ge(e,y.result,r.primitiveSchema)}return{verified:!0,result:e}}t.RawData=fe}));de(Ue);var De=Ue.fromBER,Te=Ue.compareSchema,He=(Ue.verifySchema,Ue.fromJSON,Ue.RawData),Ve=Ue.Repeated,_e=Ue.Any,je=Ue.Choice,Me=(Ue.TIME,Ue.Duration,Ue.DateTime,Ue.TimeOfDay,Ue.DATE,Ue.GeneralizedTime),Ke=Ue.UTCTime,Fe=Ue.CharacterString,Xe=Ue.GeneralString,Ge=Ue.VisibleString,Je=Ue.GraphicString,qe=Ue.IA5String,We=Ue.VideotexString,Qe=Ue.TeletexString,ze=Ue.PrintableString,Ye=Ue.NumericString,Ze=Ue.UniversalString,$e=Ue.BmpString,et=(Ue.RelativeObjectIdentifier,Ue.Utf8String),tt=Ue.ObjectIdentifier,rt=(Ue.Enumerated,Ue.Integer),nt=Ue.BitString,at=Ue.OctetString,it=Ue.Null,st=Ue.Set,ot=Ue.Sequence,ut=Ue.Boolean,lt=(Ue.EndOfContent,Ue.Constructed),ct=Ue.Primitive,ht=(Ue.BaseBlock,Ue.ValueBlock,Ue.HexBlock,function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.algorithmId=ye(t,"algorithmId",e.defaultValues("algorithmId")),"algorithmParams"in t&&(this.algorithmParams=ye(t,"algorithmParams",e.defaultValues("algorithmParams"))),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["algorithm","params"]);var r=Te(t,t,e.schema({names:{algorithmIdentifier:"algorithm",algorithmParams:"params"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for AlgorithmIdentifier");this.algorithmId=r.result.algorithm.valueBlock.toString(),"params"in r.result&&(this.algorithmParams=r.result.params)}},{key:"toSchema",value:function(){var e=[];return e.push(new tt({value:this.algorithmId})),"algorithmParams"in this&&this.algorithmParams instanceof _e==!1&&e.push(this.algorithmParams),new ot({value:e})}},{key:"toJSON",value:function(){var e={algorithmId:this.algorithmId};return"algorithmParams"in this&&this.algorithmParams instanceof _e==!1&&(e.algorithmParams=this.algorithmParams.toJSON()),e}},{key:"isEqual",value:function(t){return t instanceof e!=!1&&(this.algorithmId===t.algorithmId&&("algorithmParams"in this?"algorithmParams"in t&&JSON.stringify(this.algorithmParams)===JSON.stringify(t.algorithmParams):!("algorithmParams"in t)))}}],[{key:"defaultValues",value:function(e){switch(e){case"algorithmId":return"";case"algorithmParams":return new _e;default:throw new Error("Invalid member name for AlgorithmIdentifier class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"algorithmId":return""===t;case"algorithmParams":return t instanceof _e;default:throw new Error("Invalid member name for AlgorithmIdentifier class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",optional:t.optional||!1,value:[new tt({name:t.algorithmIdentifier||""}),new _e({name:t.algorithmParams||"",optional:!0})]})}}]),e}()),ft=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.x=ye(t,"x",e.defaultValues("x")),this.y=ye(t,"y",e.defaultValues("y")),this.namedCurve=ye(t,"namedCurve",e.defaultValues("namedCurve")),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return s(e,[{key:"fromSchema",value:function(e){if(e instanceof ArrayBuffer==!1)throw new Error("Object's schema was not verified against input data for ECPublicKey");var t;if(4!==new Uint8Array(e)[0])throw new Error("Object's schema was not verified against input data for ECPublicKey");switch(this.namedCurve){case"1.2.840.10045.3.1.7":t=32;break;case"1.3.132.0.34":t=48;break;case"1.3.132.0.35":t=66;break;default:throw new Error("Incorrect curve OID: ".concat(this.namedCurve))}if(e.byteLength!==2*t+1)throw new Error("Object's schema was not verified against input data for ECPublicKey");this.x=e.slice(1,t+1),this.y=e.slice(1+t,2*t+1)}},{key:"toSchema",value:function(){return new He({data:Se(new Uint8Array([4]).buffer,this.x,this.y)})}},{key:"toJSON",value:function(){var e="";switch(this.namedCurve){case"1.2.840.10045.3.1.7":e="P-256";break;case"1.3.132.0.34":e="P-384";break;case"1.3.132.0.35":e="P-521"}return{crv:e,x:Ce(Ie(this.x),!0,!0,!1),y:Ce(Ie(this.y),!0,!0,!1)}}},{key:"fromJSON",value:function(e){var t=0;if(!("crv"in e))throw new Error('Absent mandatory parameter "crv"');switch(e.crv.toUpperCase()){case"P-256":this.namedCurve="1.2.840.10045.3.1.7",t=32;break;case"P-384":this.namedCurve="1.3.132.0.34",t=48;break;case"P-521":this.namedCurve="1.3.132.0.35",t=66}if(!("x"in e))throw new Error('Absent mandatory parameter "x"');var r=Ee(xe(e.x,!0));if(r.byteLength<t){this.x=new ArrayBuffer(t);var n=new Uint8Array(this.x),a=new Uint8Array(r);n.set(a,1)}else this.x=r.slice(0,t);if(!("y"in e))throw new Error('Absent mandatory parameter "y"');var i=Ee(xe(e.y,!0));if(i.byteLength<t){this.y=new ArrayBuffer(t);var s=new Uint8Array(this.y),o=new Uint8Array(i);s.set(o,1)}else this.y=i.slice(0,t)}}],[{key:"defaultValues",value:function(e){switch(e){case"x":case"y":return new ArrayBuffer(0);case"namedCurve":return"";default:throw new Error("Invalid member name for ECCPublicKey class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"x":case"y":return Ne(r,e.defaultValues(t));case"namedCurve":return""===r;default:throw new Error("Invalid member name for ECCPublicKey class: ".concat(t))}}},{key:"schema",value:function(){return new He}}]),e}(),mt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.modulus=ye(t,"modulus",e.defaultValues("modulus")),this.publicExponent=ye(t,"publicExponent",e.defaultValues("publicExponent")),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["modulus","publicExponent"]);var r=Te(t,t,e.schema({names:{modulus:"modulus",publicExponent:"publicExponent"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RSAPublicKey");this.modulus=r.result.modulus.convertFromDER(256),this.publicExponent=r.result.publicExponent}},{key:"toSchema",value:function(){return new ot({value:[this.modulus.convertToDER(),this.publicExponent]})}},{key:"toJSON",value:function(){return{n:Ce(Ie(this.modulus.valueBlock.valueHex),!0,!0,!0),e:Ce(Ie(this.publicExponent.valueBlock.valueHex),!0,!0,!0)}}},{key:"fromJSON",value:function(e){if(!("n"in e))throw new Error('Absent mandatory parameter "n"');var t=Ee(xe(e.n,!0));if(this.modulus=new rt({valueHex:t.slice(0,Math.pow(2,Re(t.byteLength)))}),!("e"in e))throw new Error('Absent mandatory parameter "e"');this.publicExponent=new rt({valueHex:Ee(xe(e.e,!0)).slice(0,3)})}}],[{key:"defaultValues",value:function(e){switch(e){case"modulus":case"publicExponent":return new rt;default:throw new Error("Invalid member name for RSAPublicKey class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new rt({name:t.modulus||""}),new rt({name:t.publicExponent||""})]})}}]),e}(),vt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.algorithm=ye(t,"algorithm",e.defaultValues("algorithm")),this.subjectPublicKey=ye(t,"subjectPublicKey",e.defaultValues("subjectPublicKey")),"parsedKey"in t&&(this.parsedKey=ye(t,"parsedKey",e.defaultValues("parsedKey"))),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["algorithm","subjectPublicKey"]);var r=Te(t,t,e.schema({names:{algorithm:{names:{blockName:"algorithm"}},subjectPublicKey:"subjectPublicKey"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PublicKeyInfo");switch(this.algorithm=new ht({schema:r.result.algorithm}),this.subjectPublicKey=r.result.subjectPublicKey,this.algorithm.algorithmId){case"1.2.840.10045.2.1":if("algorithmParams"in this.algorithm&&this.algorithm.algorithmParams.constructor.blockName()===tt.blockName())try{this.parsedKey=new ft({namedCurve:this.algorithm.algorithmParams.valueBlock.toString(),schema:this.subjectPublicKey.valueBlock.valueHex})}catch(e){}break;case"1.2.840.113549.1.1.1":var n=De(this.subjectPublicKey.valueBlock.valueHex);if(-1!==n.offset)try{this.parsedKey=new mt({schema:n.result})}catch(e){}}}},{key:"toSchema",value:function(){return new ot({value:[this.algorithm.toSchema(),this.subjectPublicKey]})}},{key:"toJSON",value:function(){if("parsedKey"in this==!1)return{algorithm:this.algorithm.toJSON(),subjectPublicKey:this.subjectPublicKey.toJSON()};var e={};switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA"}for(var t=this.parsedKey.toJSON(),r=0,n=Object.keys(t);r<n.length;r++){var a=n[r];e[a]=t[a]}return e}},{key:"fromJSON",value:function(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new ft({json:e}),this.algorithm=new ht({algorithmId:"1.2.840.10045.2.1",algorithmParams:new tt({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new mt({json:e}),this.algorithm=new ht({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new it});break;default:throw new Error('Invalid value for "kty" parameter: '.concat(e.kty))}this.subjectPublicKey=new nt({valueHex:this.parsedKey.toSchema().toBER(!1)})}}},{key:"importKey",value:function(e){var t=Promise.resolve(),r=this;if(void 0===e)return Promise.reject("Need to provide publicKey input parameter");var n=Et();return void 0===n?Promise.reject("Unable to create WebCrypto object"):t=(t=t.then((function(){return n.exportKey("spki",e)}))).then((function(e){var t=De(e);try{r.fromSchema(t.result)}catch(e){return Promise.reject("Error during initializing object from schema")}}),(function(e){return Promise.reject("Error during exporting public key: ".concat(e))}))}}],[{key:"defaultValues",value:function(e){switch(e){case"algorithm":return new ht;case"subjectPublicKey":return new nt;default:throw new Error("Invalid member name for PublicKeyInfo class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[ht.schema(t.algorithm||{}),new nt({name:t.subjectPublicKey||""})]})}}]),e}(),gt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.type=ye(t,"type",e.defaultValues("type")),this.values=ye(t,"values",e.defaultValues("values")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["type","values"]);var r=Te(t,t,e.schema({names:{type:"type",values:"values"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for Attribute");this.type=r.result.type.valueBlock.toString(),this.values=r.result.values}},{key:"toSchema",value:function(){return new ot({value:[new tt({value:this.type}),new st({value:this.values})]})}},{key:"toJSON",value:function(){return{type:this.type,values:Array.from(this.values,(function(e){return e.toJSON()}))}}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return"";case"values":return[];default:throw new Error("Invalid member name for Attribute class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"type":return""===t;case"values":return 0===t.length;default:throw new Error("Invalid member name for Attribute class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new tt({name:t.type||""}),new st({name:t.setName||"",value:[new Ve({name:t.values||"",value:new _e})]})]})}}]),e}(),dt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=ye(t,"version",e.defaultValues("version")),this.privateKey=ye(t,"privateKey",e.defaultValues("privateKey")),"namedCurve"in t&&(this.namedCurve=ye(t,"namedCurve",e.defaultValues("namedCurve"))),"publicKey"in t&&(this.publicKey=ye(t,"publicKey",e.defaultValues("publicKey"))),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["version","privateKey","namedCurve","publicKey"]);var r=Te(t,t,e.schema({names:{version:"version",privateKey:"privateKey",namedCurve:"namedCurve",publicKey:"publicKey"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for ECPrivateKey");if(this.version=r.result.version.valueBlock.valueDec,this.privateKey=r.result.privateKey,"namedCurve"in r.result&&(this.namedCurve=r.result.namedCurve.valueBlock.toString()),"publicKey"in r.result){var n={schema:r.result.publicKey.valueBlock.valueHex};"namedCurve"in this&&(n.namedCurve=this.namedCurve),this.publicKey=new ft(n)}}},{key:"toSchema",value:function(){var e=[new rt({value:this.version}),this.privateKey];return"namedCurve"in this&&e.push(new lt({idBlock:{tagClass:3,tagNumber:0},value:[new tt({value:this.namedCurve})]})),"publicKey"in this&&e.push(new lt({idBlock:{tagClass:3,tagNumber:1},value:[new nt({valueHex:this.publicKey.toSchema().toBER(!1)})]})),new ot({value:e})}},{key:"toJSON",value:function(){if("namedCurve"in this==!1||e.compareWithDefault("namedCurve",this.namedCurve))throw new Error('Not enough information for making JSON: absent "namedCurve" value');var t="";switch(this.namedCurve){case"1.2.840.10045.3.1.7":t="P-256";break;case"1.3.132.0.34":t="P-384";break;case"1.3.132.0.35":t="P-521"}var r={crv:t,d:Ce(Ie(this.privateKey.valueBlock.valueHex),!0,!0,!1)};if("publicKey"in this){var n=this.publicKey.toJSON();r.x=n.x,r.y=n.y}return r}},{key:"fromJSON",value:function(e){var t=0;if(!("crv"in e))throw new Error('Absent mandatory parameter "crv"');switch(e.crv.toUpperCase()){case"P-256":this.namedCurve="1.2.840.10045.3.1.7",t=32;break;case"P-384":this.namedCurve="1.3.132.0.34",t=48;break;case"P-521":this.namedCurve="1.3.132.0.35",t=66}if(!("d"in e))throw new Error('Absent mandatory parameter "d"');var r=Ee(xe(e.d,!0));if(r.byteLength<t){var n=new ArrayBuffer(t),a=new Uint8Array(n),i=new Uint8Array(r);a.set(i,1),this.privateKey=new at({valueHex:n})}else this.privateKey=new at({valueHex:r.slice(0,t)});"x"in e&&"y"in e&&(this.publicKey=new ft({json:e}))}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 1;case"privateKey":return new at;case"namedCurve":return"";case"publicKey":return new ft;default:throw new Error("Invalid member name for ECCPrivateKey class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"version":return r===e.defaultValues(t);case"privateKey":return r.isEqual(e.defaultValues(t));case"namedCurve":return""===r;case"publicKey":return ft.compareWithDefault("namedCurve",r.namedCurve)&&ft.compareWithDefault("x",r.x)&&ft.compareWithDefault("y",r.y);default:throw new Error("Invalid member name for ECCPrivateKey class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new rt({name:t.version||""}),new at({name:t.privateKey||""}),new lt({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new tt({name:t.namedCurve||""})]}),new lt({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new nt({name:t.publicKey||""})]})]})}}]),e}(),pt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.prime=ye(t,"prime",e.defaultValues("prime")),this.exponent=ye(t,"exponent",e.defaultValues("exponent")),this.coefficient=ye(t,"coefficient",e.defaultValues("coefficient")),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["prime","exponent","coefficient"]);var r=Te(t,t,e.schema({names:{prime:"prime",exponent:"exponent",coefficient:"coefficient"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for OtherPrimeInfo");this.prime=r.result.prime.convertFromDER(),this.exponent=r.result.exponent.convertFromDER(),this.coefficient=r.result.coefficient.convertFromDER()}},{key:"toSchema",value:function(){return new ot({value:[this.prime.convertToDER(),this.exponent.convertToDER(),this.coefficient.convertToDER()]})}},{key:"toJSON",value:function(){return{r:Ce(Ie(this.prime.valueBlock.valueHex),!0,!0),d:Ce(Ie(this.exponent.valueBlock.valueHex),!0,!0),t:Ce(Ie(this.coefficient.valueBlock.valueHex),!0,!0)}}},{key:"fromJSON",value:function(e){if(!("r"in e))throw new Error('Absent mandatory parameter "r"');if(this.prime=new rt({valueHex:Ee(xe(e.r,!0))}),!("d"in e))throw new Error('Absent mandatory parameter "d"');if(this.exponent=new rt({valueHex:Ee(xe(e.d,!0))}),!("t"in e))throw new Error('Absent mandatory parameter "t"');this.coefficient=new rt({valueHex:Ee(xe(e.t,!0))})}}],[{key:"defaultValues",value:function(e){switch(e){case"prime":case"exponent":case"coefficient":return new rt;default:throw new Error("Invalid member name for OtherPrimeInfo class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new rt({name:t.prime||""}),new rt({name:t.exponent||""}),new rt({name:t.coefficient||""})]})}}]),e}(),yt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=ye(t,"version",e.defaultValues("version")),this.modulus=ye(t,"modulus",e.defaultValues("modulus")),this.publicExponent=ye(t,"publicExponent",e.defaultValues("publicExponent")),this.privateExponent=ye(t,"privateExponent",e.defaultValues("privateExponent")),this.prime1=ye(t,"prime1",e.defaultValues("prime1")),this.prime2=ye(t,"prime2",e.defaultValues("prime2")),this.exponent1=ye(t,"exponent1",e.defaultValues("exponent1")),this.exponent2=ye(t,"exponent2",e.defaultValues("exponent2")),this.coefficient=ye(t,"coefficient",e.defaultValues("coefficient")),"otherPrimeInfos"in t&&(this.otherPrimeInfos=ye(t,"otherPrimeInfos",e.defaultValues("otherPrimeInfos"))),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["version","modulus","publicExponent","privateExponent","prime1","prime2","exponent1","exponent2","coefficient","otherPrimeInfos"]);var r=Te(t,t,e.schema({names:{version:"version",modulus:"modulus",publicExponent:"publicExponent",privateExponent:"privateExponent",prime1:"prime1",prime2:"prime2",exponent1:"exponent1",exponent2:"exponent2",coefficient:"coefficient",otherPrimeInfo:{names:{blockName:"otherPrimeInfos"}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RSAPrivateKey");this.version=r.result.version.valueBlock.valueDec,this.modulus=r.result.modulus.convertFromDER(256),this.publicExponent=r.result.publicExponent,this.privateExponent=r.result.privateExponent.convertFromDER(256),this.prime1=r.result.prime1.convertFromDER(128),this.prime2=r.result.prime2.convertFromDER(128),this.exponent1=r.result.exponent1.convertFromDER(128),this.exponent2=r.result.exponent2.convertFromDER(128),this.coefficient=r.result.coefficient.convertFromDER(128),"otherPrimeInfos"in r.result&&(this.otherPrimeInfos=Array.from(r.result.otherPrimeInfos,(function(e){return new pt({schema:e})})))}},{key:"toSchema",value:function(){var e=[];return e.push(new rt({value:this.version})),e.push(this.modulus.convertToDER()),e.push(this.publicExponent),e.push(this.privateExponent.convertToDER()),e.push(this.prime1.convertToDER()),e.push(this.prime2.convertToDER()),e.push(this.exponent1.convertToDER()),e.push(this.exponent2.convertToDER()),e.push(this.coefficient.convertToDER()),"otherPrimeInfos"in this&&e.push(new ot({value:Array.from(this.otherPrimeInfos,(function(e){return e.toSchema()}))})),new ot({value:e})}},{key:"toJSON",value:function(){var e={n:Ce(Ie(this.modulus.valueBlock.valueHex),!0,!0,!0),e:Ce(Ie(this.publicExponent.valueBlock.valueHex),!0,!0,!0),d:Ce(Ie(this.privateExponent.valueBlock.valueHex),!0,!0,!0),p:Ce(Ie(this.prime1.valueBlock.valueHex),!0,!0,!0),q:Ce(Ie(this.prime2.valueBlock.valueHex),!0,!0,!0),dp:Ce(Ie(this.exponent1.valueBlock.valueHex),!0,!0,!0),dq:Ce(Ie(this.exponent2.valueBlock.valueHex),!0,!0,!0),qi:Ce(Ie(this.coefficient.valueBlock.valueHex),!0,!0,!0)};return"otherPrimeInfos"in this&&(e.oth=Array.from(this.otherPrimeInfos,(function(e){return e.toJSON()}))),e}},{key:"fromJSON",value:function(e){if(!("n"in e))throw new Error('Absent mandatory parameter "n"');if(this.modulus=new rt({valueHex:Ee(xe(e.n,!0,!0))}),!("e"in e))throw new Error('Absent mandatory parameter "e"');if(this.publicExponent=new rt({valueHex:Ee(xe(e.e,!0,!0))}),!("d"in e))throw new Error('Absent mandatory parameter "d"');if(this.privateExponent=new rt({valueHex:Ee(xe(e.d,!0,!0))}),!("p"in e))throw new Error('Absent mandatory parameter "p"');if(this.prime1=new rt({valueHex:Ee(xe(e.p,!0,!0))}),!("q"in e))throw new Error('Absent mandatory parameter "q"');if(this.prime2=new rt({valueHex:Ee(xe(e.q,!0,!0))}),!("dp"in e))throw new Error('Absent mandatory parameter "dp"');if(this.exponent1=new rt({valueHex:Ee(xe(e.dp,!0,!0))}),!("dq"in e))throw new Error('Absent mandatory parameter "dq"');if(this.exponent2=new rt({valueHex:Ee(xe(e.dq,!0,!0))}),!("qi"in e))throw new Error('Absent mandatory parameter "qi"');this.coefficient=new rt({valueHex:Ee(xe(e.qi,!0,!0))}),"oth"in e&&(this.otherPrimeInfos=Array.from(e.oth,(function(e){return new pt({json:e})})))}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"modulus":case"publicExponent":case"privateExponent":case"prime1":case"prime2":case"exponent1":case"exponent2":case"coefficient":return new rt;case"otherPrimeInfos":return[];default:throw new Error("Invalid member name for RSAPrivateKey class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new rt({name:t.version||""}),new rt({name:t.modulus||""}),new rt({name:t.publicExponent||""}),new rt({name:t.privateExponent||""}),new rt({name:t.prime1||""}),new rt({name:t.prime2||""}),new rt({name:t.exponent1||""}),new rt({name:t.exponent2||""}),new rt({name:t.coefficient||""}),new ot({optional:!0,value:[new Ve({name:t.otherPrimeInfosName||"",value:pt.schema(t.otherPrimeInfo||{})})]})]})}}]),e}(),kt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=ye(t,"version",e.defaultValues("version")),this.privateKeyAlgorithm=ye(t,"privateKeyAlgorithm",e.defaultValues("privateKeyAlgorithm")),this.privateKey=ye(t,"privateKey",e.defaultValues("privateKey")),"attributes"in t&&(this.attributes=ye(t,"attributes",e.defaultValues("attributes"))),"parsedKey"in t&&(this.parsedKey=ye(t,"parsedKey",e.defaultValues("parsedKey"))),"schema"in t&&this.fromSchema(t.schema),"json"in t&&this.fromJSON(t.json)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["version","privateKeyAlgorithm","privateKey","attributes"]);var r=Te(t,t,e.schema({names:{version:"version",privateKeyAlgorithm:{names:{blockName:"privateKeyAlgorithm"}},privateKey:"privateKey",attributes:"attributes"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PrivateKeyInfo");switch(this.version=r.result.version.valueBlock.valueDec,this.privateKeyAlgorithm=new ht({schema:r.result.privateKeyAlgorithm}),this.privateKey=r.result.privateKey,"attributes"in r.result&&(this.attributes=Array.from(r.result.attributes,(function(e){return new gt({schema:e})}))),this.privateKeyAlgorithm.algorithmId){case"1.2.840.113549.1.1.1":var n=De(this.privateKey.valueBlock.valueHex);-1!==n.offset&&(this.parsedKey=new yt({schema:n.result}));break;case"1.2.840.10045.2.1":if("algorithmParams"in this.privateKeyAlgorithm&&this.privateKeyAlgorithm.algorithmParams instanceof tt){var a=De(this.privateKey.valueBlock.valueHex);-1!==a.offset&&(this.parsedKey=new dt({namedCurve:this.privateKeyAlgorithm.algorithmParams.valueBlock.toString(),schema:a.result}))}}}},{key:"toSchema",value:function(){var e=[new rt({value:this.version}),this.privateKeyAlgorithm.toSchema(),this.privateKey];return"attributes"in this&&e.push(new lt({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,(function(e){return e.toSchema()}))})),new ot({value:e})}},{key:"toJSON",value:function(){if("parsedKey"in this==!1){var e={version:this.version,privateKeyAlgorithm:this.privateKeyAlgorithm.toJSON(),privateKey:this.privateKey.toJSON()};return"attributes"in this&&(e.attributes=Array.from(this.attributes,(function(e){return e.toJSON()}))),e}var t={};switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.10045.2.1":t.kty="EC";break;case"1.2.840.113549.1.1.1":t.kty="RSA"}for(var r=this.parsedKey.toJSON(),n=0,a=Object.keys(r);n<a.length;n++){var i=a[n];t[i]=r[i]}return t}},{key:"fromJSON",value:function(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new dt({json:e}),this.privateKeyAlgorithm=new ht({algorithmId:"1.2.840.10045.2.1",algorithmParams:new tt({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new yt({json:e}),this.privateKeyAlgorithm=new ht({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new it});break;default:throw new Error('Invalid value for "kty" parameter: '.concat(e.kty))}this.privateKey=new at({valueHex:this.parsedKey.toSchema().toBER(!1)})}}}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"privateKeyAlgorithm":return new ht;case"privateKey":return new at;case"attributes":return[];case"parsedKey":return{};default:throw new Error("Invalid member name for PrivateKeyInfo class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new rt({name:t.version||""}),ht.schema(t.privateKeyAlgorithm||{}),new at({name:t.privateKey||""}),new lt({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ve({name:t.attributes||"",value:gt.schema()})]})]})}}]),e}(),bt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(a(this,e),this.contentType=ye(t,"contentType",e.defaultValues("contentType")),this.contentEncryptionAlgorithm=ye(t,"contentEncryptionAlgorithm",e.defaultValues("contentEncryptionAlgorithm")),"encryptedContent"in t&&(this.encryptedContent=t.encryptedContent,1===this.encryptedContent.idBlock.tagClass&&4===this.encryptedContent.idBlock.tagNumber&&!1===this.encryptedContent.idBlock.isConstructed)){for(var r=new at({idBlock:{isConstructed:!0},isConstructed:!0}),n=0,i=this.encryptedContent.valueBlock.valueHex.byteLength;i>0;){for(var s=new Uint8Array(this.encryptedContent.valueBlock.valueHex,n,n+1024>this.encryptedContent.valueBlock.valueHex.byteLength?this.encryptedContent.valueBlock.valueHex.byteLength-n:1024),o=new ArrayBuffer(s.length),u=new Uint8Array(o),l=0;l<u.length;l++)u[l]=s[l];r.valueBlock.value.push(new at({valueHex:o})),i-=s.length,n+=s.length}this.encryptedContent=r}"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["contentType","contentEncryptionAlgorithm","encryptedContent"]);var r=Te(t,t,e.schema({names:{contentType:"contentType",contentEncryptionAlgorithm:{names:{blockName:"contentEncryptionAlgorithm"}},encryptedContent:"encryptedContent"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for EncryptedContentInfo");this.contentType=r.result.contentType.valueBlock.toString(),this.contentEncryptionAlgorithm=new ht({schema:r.result.contentEncryptionAlgorithm}),"encryptedContent"in r.result&&(this.encryptedContent=r.result.encryptedContent,this.encryptedContent.idBlock.tagClass=1,this.encryptedContent.idBlock.tagNumber=4)}},{key:"toSchema",value:function(){var e={isIndefiniteForm:!1},t=[];if(t.push(new tt({value:this.contentType})),t.push(this.contentEncryptionAlgorithm.toSchema()),"encryptedContent"in this){e.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed;var r=this.encryptedContent;r.idBlock.tagClass=3,r.idBlock.tagNumber=0,r.lenBlock.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed,t.push(r)}return new ot({lenBlock:e,value:t})}},{key:"toJSON",value:function(){var e={contentType:this.contentType,contentEncryptionAlgorithm:this.contentEncryptionAlgorithm.toJSON()};return"encryptedContent"in this&&(e.encryptedContent=this.encryptedContent.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"contentType":return"";case"contentEncryptionAlgorithm":return new ht;case"encryptedContent":return new at;default:throw new Error("Invalid member name for EncryptedContentInfo class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"contentType":return""===r;case"contentEncryptionAlgorithm":return""===r.algorithmId&&"algorithmParams"in r==!1;case"encryptedContent":return r.isEqual(e.defaultValues(t));default:throw new Error("Invalid member name for EncryptedContentInfo class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new tt({name:t.contentType||""}),ht.schema(t.contentEncryptionAlgorithm||{}),new je({value:[new lt({name:t.encryptedContent||"",idBlock:{tagClass:3,tagNumber:0},value:[new Ve({value:new at})]}),new ct({name:t.encryptedContent||"",idBlock:{tagClass:3,tagNumber:0}})]})]})}}]),e}(),wt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.hashAlgorithm=ye(t,"hashAlgorithm",e.defaultValues("hashAlgorithm")),this.maskGenAlgorithm=ye(t,"maskGenAlgorithm",e.defaultValues("maskGenAlgorithm")),this.saltLength=ye(t,"saltLength",e.defaultValues("saltLength")),this.trailerField=ye(t,"trailerField",e.defaultValues("trailerField")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["hashAlgorithm","maskGenAlgorithm","saltLength","trailerField"]);var r=Te(t,t,e.schema({names:{hashAlgorithm:{names:{blockName:"hashAlgorithm"}},maskGenAlgorithm:{names:{blockName:"maskGenAlgorithm"}},saltLength:"saltLength",trailerField:"trailerField"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RSASSAPSSParams");"hashAlgorithm"in r.result&&(this.hashAlgorithm=new ht({schema:r.result.hashAlgorithm})),"maskGenAlgorithm"in r.result&&(this.maskGenAlgorithm=new ht({schema:r.result.maskGenAlgorithm})),"saltLength"in r.result&&(this.saltLength=r.result.saltLength.valueBlock.valueDec),"trailerField"in r.result&&(this.trailerField=r.result.trailerField.valueBlock.valueDec)}},{key:"toSchema",value:function(){var t=[];return this.hashAlgorithm.isEqual(e.defaultValues("hashAlgorithm"))||t.push(new lt({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(e.defaultValues("maskGenAlgorithm"))||t.push(new lt({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.saltLength!==e.defaultValues("saltLength")&&t.push(new lt({idBlock:{tagClass:3,tagNumber:2},value:[new rt({value:this.saltLength})]})),this.trailerField!==e.defaultValues("trailerField")&&t.push(new lt({idBlock:{tagClass:3,tagNumber:3},value:[new rt({value:this.trailerField})]})),new ot({value:t})}},{key:"toJSON",value:function(){var t={};return this.hashAlgorithm.isEqual(e.defaultValues("hashAlgorithm"))||(t.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(e.defaultValues("maskGenAlgorithm"))||(t.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.saltLength!==e.defaultValues("saltLength")&&(t.saltLength=this.saltLength),this.trailerField!==e.defaultValues("trailerField")&&(t.trailerField=this.trailerField),t}}],[{key:"defaultValues",value:function(e){switch(e){case"hashAlgorithm":return new ht({algorithmId:"1.3.14.3.2.26",algorithmParams:new it});case"maskGenAlgorithm":return new ht({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new ht({algorithmId:"1.3.14.3.2.26",algorithmParams:new it}).toSchema()});case"saltLength":return 20;case"trailerField":return 1;default:throw new Error("Invalid member name for RSASSAPSSParams class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new lt({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[ht.schema(t.hashAlgorithm||{})]}),new lt({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[ht.schema(t.maskGenAlgorithm||{})]}),new lt({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[new rt({name:t.saltLength||""})]}),new lt({idBlock:{tagClass:3,tagNumber:3},optional:!0,value:[new rt({name:t.trailerField||""})]})]})}}]),e}(),St=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.salt=ye(t,"salt",e.defaultValues("salt")),this.iterationCount=ye(t,"iterationCount",e.defaultValues("iterationCount")),"keyLength"in t&&(this.keyLength=ye(t,"keyLength",e.defaultValues("keyLength"))),"prf"in t&&(this.prf=ye(t,"prf",e.defaultValues("prf"))),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["salt","iterationCount","keyLength","prf"]);var r=Te(t,t,e.schema({names:{saltPrimitive:"salt",saltConstructed:{names:{blockName:"salt"}},iterationCount:"iterationCount",keyLength:"keyLength",prf:{names:{blockName:"prf",optional:!0}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PBKDF2Params");this.salt=r.result.salt,this.iterationCount=r.result.iterationCount.valueBlock.valueDec,"keyLength"in r.result&&(this.keyLength=r.result.keyLength.valueBlock.valueDec),"prf"in r.result&&(this.prf=new ht({schema:r.result.prf}))}},{key:"toSchema",value:function(){var t=[];return t.push(this.salt),t.push(new rt({value:this.iterationCount})),"keyLength"in this&&e.defaultValues("keyLength")!==this.keyLength&&t.push(new rt({value:this.keyLength})),"prf"in this&&!1===e.defaultValues("prf").isEqual(this.prf)&&t.push(this.prf.toSchema()),new ot({value:t})}},{key:"toJSON",value:function(){var t={salt:this.salt.toJSON(),iterationCount:this.iterationCount};return"keyLength"in this&&e.defaultValues("keyLength")!==this.keyLength&&(t.keyLength=this.keyLength),"prf"in this&&!1===e.defaultValues("prf").isEqual(this.prf)&&(t.prf=this.prf.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"salt":return{};case"iterationCount":return-1;case"keyLength":return 0;case"prf":return new ht({algorithmId:"1.3.14.3.2.26",algorithmParams:new it});default:throw new Error("Invalid member name for PBKDF2Params class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new je({value:[new at({name:t.saltPrimitive||""}),ht.schema(t.saltConstructed||{})]}),new rt({name:t.iterationCount||""}),new rt({name:t.keyLength||"",optional:!0}),ht.schema(t.prf||{names:{optional:!0}})]})}}]),e}(),Nt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.keyDerivationFunc=ye(t,"keyDerivationFunc",e.defaultValues("keyDerivationFunc")),this.encryptionScheme=ye(t,"encryptionScheme",e.defaultValues("encryptionScheme")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["keyDerivationFunc","encryptionScheme"]);var r=Te(t,t,e.schema({names:{keyDerivationFunc:{names:{blockName:"keyDerivationFunc"}},encryptionScheme:{names:{blockName:"encryptionScheme"}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PBES2Params");this.keyDerivationFunc=new ht({schema:r.result.keyDerivationFunc}),this.encryptionScheme=new ht({schema:r.result.encryptionScheme})}},{key:"toSchema",value:function(){return new ot({value:[this.keyDerivationFunc.toSchema(),this.encryptionScheme.toSchema()]})}},{key:"toJSON",value:function(){return{keyDerivationFunc:this.keyDerivationFunc.toJSON(),encryptionScheme:this.encryptionScheme.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"keyDerivationFunc":case"encryptionScheme":return new ht;default:throw new Error("Invalid member name for PBES2Params class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[ht.schema(t.keyDerivationFunc||{}),ht.schema(t.encryptionScheme||{})]})}}]),e}();function At(e,t,r,n,a,i){var s,o,u=[];switch(t.toUpperCase()){case"SHA-1":s=20,o=64;break;case"SHA-256":s=32,o=64;break;case"SHA-384":s=48,o=128;break;case"SHA-512":s=64,o=128;break;default:throw new Error("Unsupported hashing algorithm")}for(var l=new Uint8Array(n),c=new ArrayBuffer(2*n.byteLength+2),h=new Uint8Array(c),f=0;f<l.length;f++)h[2*f]=0,h[2*f+1]=l[f];h[h.length-2]=0,h[h.length-1]=0,n=c.slice(0);for(var m=new ArrayBuffer(o),v=new Uint8Array(m),d=0;d<m.byteLength;d++)v[d]=3;for(var p=a.byteLength,y=o*Math.ceil(p/o),k=new ArrayBuffer(y),b=new Uint8Array(k),w=new Uint8Array(a),S=0;S<y;S++)b[S]=w[S%p];for(var N=n.byteLength,A=o*Math.ceil(N/o),B=new ArrayBuffer(A),C=new Uint8Array(B),x=new Uint8Array(n),I=0;I<A;I++)C[I]=x[I%N];var E=k.byteLength+B.byteLength,P=new ArrayBuffer(E),R=new Uint8Array(P);R.set(b),R.set(C,b.length);for(var L=Math.ceil((r>>3)/s),O=Promise.resolve(P),U=0;U<=L;U++){O=O.then((function(e){var t=new ArrayBuffer(m.byteLength+e.byteLength),r=new Uint8Array(t);return r.set(v),r.set(R,v.length),t}));for(var D=0;D<i;D++)O=O.then((function(r){return e.digest({name:t},new Uint8Array(r))}));O=O.then((function(e){for(var t=new ArrayBuffer(o),r=new Uint8Array(t),n=0;n<t.byteLength;n++)r[n]=e[n%e.length];for(var a=Math.ceil(p/o)+Math.ceil(N/o),i=[],s=0,l=o,c=0;c<a;c++){var h=Array.from(new Uint8Array(P.slice(s,s+l)));(s+=o)+o>P.byteLength&&(l=P.byteLength-s);for(var f=511,m=t.byteLength-1;m>=0;m--)f>>=8,f+=r[m]+h[m],h[m]=255&f;i.push.apply(i,g(h))}return P=new ArrayBuffer(i.length),(R=new Uint8Array(P)).set(i),u.push.apply(u,g(new Uint8Array(e))),P}))}return O=O.then((function(){var e=new ArrayBuffer(r>>3);return new Uint8Array(e).set(new Uint8Array(u).slice(0,r>>3)),e}))}var Bt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.crypto=ye(t,"crypto",{}),this.subtle=ye(t,"subtle",{}),this.name=ye(t,"name","")}return s(e,[{key:"importKey",value:function(e,t,r,n,a){var i=this,s={};switch(t instanceof Uint8Array&&(t=t.buffer),e.toLowerCase()){case"raw":return this.subtle.importKey("raw",t,r,n,a);case"spki":var o=De(t);if(-1===o.offset)return Promise.reject("Incorrect keyData");var u=new vt;try{u.fromSchema(o.result)}catch(e){return Promise.reject("Incorrect keyData")}switch(r.name.toUpperCase()){case"RSA-PSS":switch(r.hash.name.toUpperCase()){case"SHA-1":s.alg="PS1";break;case"SHA-256":s.alg="PS256";break;case"SHA-384":s.alg="PS384";break;case"SHA-512":s.alg="PS512";break;default:return Promise.reject("Incorrect hash algorithm: ".concat(r.hash.name.toUpperCase()))}case"RSASSA-PKCS1-V1_5":if(a=["verify"],s.kty="RSA",s.ext=n,s.key_ops=a,"1.2.840.113549.1.1.1"!==u.algorithm.algorithmId)return Promise.reject("Incorrect public key algorithm: ".concat(u.algorithm.algorithmId));if("alg"in s==!1)switch(r.hash.name.toUpperCase()){case"SHA-1":s.alg="RS1";break;case"SHA-256":s.alg="RS256";break;case"SHA-384":s.alg="RS384";break;case"SHA-512":s.alg="RS512";break;default:return Promise.reject("Incorrect hash algorithm: ".concat(r.hash.name.toUpperCase()))}for(var l=u.toJSON(),c=0,h=Object.keys(l);c<h.length;c++){var f=h[c];s[f]=l[f]}break;case"ECDSA":a=["verify"];case"ECDH":if(s={kty:"EC",ext:n,key_ops:a},"1.2.840.10045.2.1"!==u.algorithm.algorithmId)return Promise.reject("Incorrect public key algorithm: ".concat(u.algorithm.algorithmId));for(var m=u.toJSON(),v=0,g=Object.keys(m);v<g.length;v++){var d=g[v];s[d]=m[d]}break;case"RSA-OAEP":if(s.kty="RSA",s.ext=n,s.key_ops=a,"safari"===this.name.toLowerCase())s.alg="RSA-OAEP";else switch(r.hash.name.toUpperCase()){case"SHA-1":s.alg="RSA-OAEP";break;case"SHA-256":s.alg="RSA-OAEP-256";break;case"SHA-384":s.alg="RSA-OAEP-384";break;case"SHA-512":s.alg="RSA-OAEP-512";break;default:return Promise.reject("Incorrect hash algorithm: ".concat(r.hash.name.toUpperCase()))}for(var p=u.toJSON(),y=0,k=Object.keys(p);y<k.length;y++){var b=k[y];s[b]=p[b]}break;default:return Promise.reject("Incorrect algorithm name: ".concat(r.name.toUpperCase()))}break;case"pkcs8":var w=new kt,S=De(t);if(-1===S.offset)return Promise.reject("Incorrect keyData");try{w.fromSchema(S.result)}catch(e){return Promise.reject("Incorrect keyData")}if("parsedKey"in w==!1)return Promise.reject("Incorrect keyData");switch(r.name.toUpperCase()){case"RSA-PSS":switch(r.hash.name.toUpperCase()){case"SHA-1":s.alg="PS1";break;case"SHA-256":s.alg="PS256";break;case"SHA-384":s.alg="PS384";break;case"SHA-512":s.alg="PS512";break;default:return Promise.reject("Incorrect hash algorithm: ".concat(r.hash.name.toUpperCase()))}case"RSASSA-PKCS1-V1_5":if(a=["sign"],s.kty="RSA",s.ext=n,s.key_ops=a,"1.2.840.113549.1.1.1"!==w.privateKeyAlgorithm.algorithmId)return Promise.reject("Incorrect private key algorithm: ".concat(w.privateKeyAlgorithm.algorithmId));if("alg"in s==!1)switch(r.hash.name.toUpperCase()){case"SHA-1":s.alg="RS1";break;case"SHA-256":s.alg="RS256";break;case"SHA-384":s.alg="RS384";break;case"SHA-512":s.alg="RS512";break;default:return Promise.reject("Incorrect hash algorithm: ".concat(r.hash.name.toUpperCase()))}for(var N=w.toJSON(),A=0,B=Object.keys(N);A<B.length;A++){var C=B[A];s[C]=N[C]}break;case"ECDSA":a=["sign"];case"ECDH":if(s={kty:"EC",ext:n,key_ops:a},"1.2.840.10045.2.1"!==w.privateKeyAlgorithm.algorithmId)return Promise.reject("Incorrect algorithm: ".concat(w.privateKeyAlgorithm.algorithmId));for(var x=w.toJSON(),I=0,E=Object.keys(x);I<E.length;I++){var P=E[I];s[P]=x[P]}break;case"RSA-OAEP":if(s.kty="RSA",s.ext=n,s.key_ops=a,"safari"===this.name.toLowerCase())s.alg="RSA-OAEP";else switch(r.hash.name.toUpperCase()){case"SHA-1":s.alg="RSA-OAEP";break;case"SHA-256":s.alg="RSA-OAEP-256";break;case"SHA-384":s.alg="RSA-OAEP-384";break;case"SHA-512":s.alg="RSA-OAEP-512";break;default:return Promise.reject("Incorrect hash algorithm: ".concat(r.hash.name.toUpperCase()))}for(var R=w.toJSON(),L=0,O=Object.keys(R);L<O.length;L++){var U=O[L];s[U]=R[U]}break;default:return Promise.reject("Incorrect algorithm name: ".concat(r.name.toUpperCase()))}break;case"jwk":s=t;break;default:return Promise.reject("Incorrect format: ".concat(e))}return"safari"===this.name.toLowerCase()?Promise.resolve().then((function(){return i.subtle.importKey("jwk",Ee(JSON.stringify(s)),r,n,a)})).then((function(e){return e}),(function(){return i.subtle.importKey("jwk",s,r,n,a)})):this.subtle.importKey("jwk",s,r,n,a)}},{key:"exportKey",value:function(e,t){var r=this.subtle.exportKey("jwk",t);switch("safari"===this.name.toLowerCase()&&(r=r.then((function(e){return e instanceof ArrayBuffer?JSON.parse(Ie(e)):e}))),e.toLowerCase()){case"raw":return this.subtle.exportKey("raw",t);case"spki":r=r.then((function(e){var t=new vt;try{t.fromJSON(e)}catch(e){return Promise.reject("Incorrect key data")}return t.toSchema().toBER(!1)}));break;case"pkcs8":r=r.then((function(e){var t=new kt;try{t.fromJSON(e)}catch(e){return Promise.reject("Incorrect key data")}return t.toSchema().toBER(!1)}));break;case"jwk":break;default:return Promise.reject("Incorrect format: ".concat(e))}return r}},{key:"convert",value:function(e,t,r,n,a,i){var s=this;switch(e.toLowerCase()){case"raw":switch(t.toLowerCase()){case"raw":return Promise.resolve(r);case"spki":return Promise.resolve().then((function(){return s.importKey("raw",r,n,a,i)})).then((function(e){return s.exportKey("spki",e)}));case"pkcs8":return Promise.resolve().then((function(){return s.importKey("raw",r,n,a,i)})).then((function(e){return s.exportKey("pkcs8",e)}));case"jwk":return Promise.resolve().then((function(){return s.importKey("raw",r,n,a,i)})).then((function(e){return s.exportKey("jwk",e)}));default:return Promise.reject("Incorrect outputFormat: ".concat(t))}case"spki":switch(t.toLowerCase()){case"raw":return Promise.resolve().then((function(){return s.importKey("spki",r,n,a,i)})).then((function(e){return s.exportKey("raw",e)}));case"spki":return Promise.resolve(r);case"pkcs8":return Promise.reject("Impossible to convert between SPKI/PKCS8");case"jwk":return Promise.resolve().then((function(){return s.importKey("spki",r,n,a,i)})).then((function(e){return s.exportKey("jwk",e)}));default:return Promise.reject("Incorrect outputFormat: ".concat(t))}case"pkcs8":switch(t.toLowerCase()){case"raw":return Promise.resolve().then((function(){return s.importKey("pkcs8",r,n,a,i)})).then((function(e){return s.exportKey("raw",e)}));case"spki":return Promise.reject("Impossible to convert between SPKI/PKCS8");case"pkcs8":return Promise.resolve(r);case"jwk":return Promise.resolve().then((function(){return s.importKey("pkcs8",r,n,a,i)})).then((function(e){return s.exportKey("jwk",e)}));default:return Promise.reject("Incorrect outputFormat: ".concat(t))}case"jwk":switch(t.toLowerCase()){case"raw":return Promise.resolve().then((function(){return s.importKey("jwk",r,n,a,i)})).then((function(e){return s.exportKey("raw",e)}));case"spki":return Promise.resolve().then((function(){return s.importKey("jwk",r,n,a,i)})).then((function(e){return s.exportKey("spki",e)}));case"pkcs8":return Promise.resolve().then((function(){return s.importKey("jwk",r,n,a,i)})).then((function(e){return s.exportKey("pkcs8",e)}));case"jwk":return Promise.resolve(r);default:return Promise.reject("Incorrect outputFormat: ".concat(t))}default:return Promise.reject("Incorrect inputFormat: ".concat(e))}}},{key:"encrypt",value:function(){var e;return(e=this.subtle).encrypt.apply(e,arguments)}},{key:"decrypt",value:function(){var e;return(e=this.subtle).decrypt.apply(e,arguments)}},{key:"sign",value:function(){var e;return(e=this.subtle).sign.apply(e,arguments)}},{key:"verify",value:function(){var e;return(e=this.subtle).verify.apply(e,arguments)}},{key:"digest",value:function(){var e;return(e=this.subtle).digest.apply(e,arguments)}},{key:"generateKey",value:function(){var e;return(e=this.subtle).generateKey.apply(e,arguments)}},{key:"deriveKey",value:function(){var e;return(e=this.subtle).deriveKey.apply(e,arguments)}},{key:"deriveBits",value:function(){var e;return(e=this.subtle).deriveBits.apply(e,arguments)}},{key:"wrapKey",value:function(){var e;return(e=this.subtle).wrapKey.apply(e,arguments)}},{key:"unwrapKey",value:function(){var e;return(e=this.subtle).unwrapKey.apply(e,arguments)}},{key:"getRandomValues",value:function(e){if("getRandomValues"in this.crypto==!1)throw new Error("No support for getRandomValues");return this.crypto.getRandomValues(e)}},{key:"getAlgorithmByOID",value:function(e){switch(e){case"1.2.840.113549.1.1.1":case"1.2.840.113549.1.1.5":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case"1.2.840.113549.1.1.11":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"1.2.840.113549.1.1.12":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"1.2.840.113549.1.1.13":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"1.2.840.113549.1.1.10":return{name:"RSA-PSS"};case"1.2.840.113549.1.1.7":return{name:"RSA-OAEP"};case"1.2.840.10045.2.1":case"1.2.840.10045.4.1":return{name:"ECDSA",hash:{name:"SHA-1"}};case"1.2.840.10045.4.3.2":return{name:"ECDSA",hash:{name:"SHA-256"}};case"1.2.840.10045.4.3.3":return{name:"ECDSA",hash:{name:"SHA-384"}};case"1.2.840.10045.4.3.4":return{name:"ECDSA",hash:{name:"SHA-512"}};case"1.3.133.16.840.63.0.2":return{name:"ECDH",kdf:"SHA-1"};case"1.3.132.1.11.1":return{name:"ECDH",kdf:"SHA-256"};case"1.3.132.1.11.2":return{name:"ECDH",kdf:"SHA-384"};case"1.3.132.1.11.3":return{name:"ECDH",kdf:"SHA-512"};case"2.16.840.1.101.3.4.1.2":return{name:"AES-CBC",length:128};case"2.16.840.1.101.3.4.1.22":return{name:"AES-CBC",length:192};case"2.16.840.1.101.3.4.1.42":return{name:"AES-CBC",length:256};case"2.16.840.1.101.3.4.1.6":return{name:"AES-GCM",length:128};case"2.16.840.1.101.3.4.1.26":return{name:"AES-GCM",length:192};case"2.16.840.1.101.3.4.1.46":return{name:"AES-GCM",length:256};case"2.16.840.1.101.3.4.1.4":return{name:"AES-CFB",length:128};case"2.16.840.1.101.3.4.1.24":return{name:"AES-CFB",length:192};case"2.16.840.1.101.3.4.1.44":return{name:"AES-CFB",length:256};case"2.16.840.1.101.3.4.1.5":return{name:"AES-KW",length:128};case"2.16.840.1.101.3.4.1.25":return{name:"AES-KW",length:192};case"2.16.840.1.101.3.4.1.45":return{name:"AES-KW",length:256};case"1.2.840.113549.2.7":return{name:"HMAC",hash:{name:"SHA-1"}};case"1.2.840.113549.2.9":return{name:"HMAC",hash:{name:"SHA-256"}};case"1.2.840.113549.2.10":return{name:"HMAC",hash:{name:"SHA-384"}};case"1.2.840.113549.2.11":return{name:"HMAC",hash:{name:"SHA-512"}};case"1.2.840.113549.1.9.16.3.5":return{name:"DH"};case"1.3.14.3.2.26":return{name:"SHA-1"};case"2.16.840.1.101.3.4.2.1":return{name:"SHA-256"};case"2.16.840.1.101.3.4.2.2":return{name:"SHA-384"};case"2.16.840.1.101.3.4.2.3":return{name:"SHA-512"};case"1.2.840.113549.1.5.12":return{name:"PBKDF2"};case"1.2.840.10045.3.1.7":return{name:"P-256"};case"1.3.132.0.34":return{name:"P-384"};case"1.3.132.0.35":return{name:"P-521"}}return{}}},{key:"getOIDByAlgorithm",value:function(e){var t="";switch(e.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.113549.1.1.5";break;case"SHA-256":t="1.2.840.113549.1.1.11";break;case"SHA-384":t="1.2.840.113549.1.1.12";break;case"SHA-512":t="1.2.840.113549.1.1.13"}break;case"RSA-PSS":t="1.2.840.113549.1.1.10";break;case"RSA-OAEP":t="1.2.840.113549.1.1.7";break;case"ECDSA":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.10045.4.1";break;case"SHA-256":t="1.2.840.10045.4.3.2";break;case"SHA-384":t="1.2.840.10045.4.3.3";break;case"SHA-512":t="1.2.840.10045.4.3.4"}break;case"ECDH":switch(e.kdf.toUpperCase()){case"SHA-1":t="1.3.133.16.840.63.0.2";break;case"SHA-256":t="1.3.132.1.11.1";break;case"SHA-384":t="1.3.132.1.11.2";break;case"SHA-512":t="1.3.132.1.11.3"}break;case"AES-CTR":break;case"AES-CBC":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.2";break;case 192:t="2.16.840.1.101.3.4.1.22";break;case 256:t="2.16.840.1.101.3.4.1.42"}break;case"AES-CMAC":break;case"AES-GCM":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.6";break;case 192:t="2.16.840.1.101.3.4.1.26";break;case 256:t="2.16.840.1.101.3.4.1.46"}break;case"AES-CFB":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.4";break;case 192:t="2.16.840.1.101.3.4.1.24";break;case 256:t="2.16.840.1.101.3.4.1.44"}break;case"AES-KW":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.5";break;case 192:t="2.16.840.1.101.3.4.1.25";break;case 256:t="2.16.840.1.101.3.4.1.45"}break;case"HMAC":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.113549.2.7";break;case"SHA-256":t="1.2.840.113549.2.9";break;case"SHA-384":t="1.2.840.113549.2.10";break;case"SHA-512":t="1.2.840.113549.2.11"}break;case"DH":t="1.2.840.113549.1.9.16.3.5";break;case"SHA-1":t="1.3.14.3.2.26";break;case"SHA-256":t="2.16.840.1.101.3.4.2.1";break;case"SHA-384":t="2.16.840.1.101.3.4.2.2";break;case"SHA-512":t="2.16.840.1.101.3.4.2.3";break;case"CONCAT":case"HKDF":break;case"PBKDF2":t="1.2.840.113549.1.5.12";break;case"P-256":t="1.2.840.10045.3.1.7";break;case"P-384":t="1.3.132.0.34";break;case"P-521":t="1.3.132.0.35"}return t}},{key:"getAlgorithmParameters",value:function(e,t){var r={algorithm:{},usages:[]};switch(e.toUpperCase()){case"RSASSA-PKCS1-V1_5":switch(t.toLowerCase()){case"generatekey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["sign","verify"]};break;case"verify":case"sign":case"importkey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSASSA-PKCS1-v1_5"},usages:[]}}break;case"RSA-PSS":switch(t.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"},saltLength:20},usages:["sign","verify"]};break;case"generatekey":r={algorithm:{name:"RSA-PSS",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSA-PSS"},usages:[]}}break;case"RSA-OAEP":switch(t.toLowerCase()){case"encrypt":case"decrypt":r={algorithm:{name:"RSA-OAEP"},usages:["encrypt","decrypt"]};break;case"generatekey":r={algorithm:{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"importkey":r={algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]};break;case"exportkey":default:return{algorithm:{name:"RSA-OAEP"},usages:[]}}break;case"ECDSA":switch(t.toLowerCase()){case"generatekey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["verify"]};break;case"verify":case"sign":r={algorithm:{name:"ECDSA",hash:{name:"SHA-256"}},usages:["sign"]};break;default:return{algorithm:{name:"ECDSA"},usages:[]}}break;case"ECDH":switch(t.toLowerCase()){case"exportkey":case"importkey":case"generatekey":r={algorithm:{name:"ECDH",namedCurve:"P-256"},usages:["deriveKey","deriveBits"]};break;case"derivekey":case"derivebits":r={algorithm:{name:"ECDH",namedCurve:"P-256",public:[]},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"ECDH"},usages:[]}}break;case"AES-CTR":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CTR",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CTR",counter:new Uint8Array(16),length:10},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CTR"},usages:[]}}break;case"AES-CBC":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CBC",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CBC",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CBC"},usages:[]}}break;case"AES-GCM":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-GCM",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-GCM",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-GCM"},usages:[]}}break;case"AES-KW":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":case"wrapkey":case"unwrapkey":r={algorithm:{name:"AES-KW",length:256},usages:["wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-KW"},usages:[]}}break;case"HMAC":switch(t.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"HMAC"},usages:["sign","verify"]};break;case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"HMAC",length:32,hash:{name:"SHA-256"}},usages:["sign","verify"]};break;default:return{algorithm:{name:"HMAC"},usages:[]}}break;case"HKDF":switch(t.toLowerCase()){case"derivekey":r={algorithm:{name:"HKDF",hash:"SHA-256",salt:new Uint8Array([]),info:new Uint8Array([])},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"HKDF"},usages:[]}}break;case"PBKDF2":switch(t.toLowerCase()){case"derivekey":r={algorithm:{name:"PBKDF2",hash:{name:"SHA-256"},salt:new Uint8Array([]),iterations:1e4},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"PBKDF2"},usages:[]}}}return r}},{key:"getHashAlgorithm",value:function(e){var t="";switch(e.algorithmId){case"1.2.840.10045.4.1":case"1.2.840.113549.1.1.5":t="SHA-1";break;case"1.2.840.10045.4.3.2":case"1.2.840.113549.1.1.11":t="SHA-256";break;case"1.2.840.10045.4.3.3":case"1.2.840.113549.1.1.12":t="SHA-384";break;case"1.2.840.10045.4.3.4":case"1.2.840.113549.1.1.13":t="SHA-512";break;case"1.2.840.113549.1.1.10":try{var r=new wt({schema:e.algorithmParams});if("hashAlgorithm"in r){var n=this.getAlgorithmByOID(r.hashAlgorithm.algorithmId);if("name"in n==!1)return"";t=n.name}else t="SHA-1"}catch(e){}}return t}},{key:"encryptEncryptedContentInfo",value:function(e){var t=this;if(e instanceof Object==!1)return Promise.reject('Parameters must have type "Object"');if("password"in e==!1)return Promise.reject('Absent mandatory parameter "password"');if("contentEncryptionAlgorithm"in e==!1)return Promise.reject('Absent mandatory parameter "contentEncryptionAlgorithm"');if("hmacHashAlgorithm"in e==!1)return Promise.reject('Absent mandatory parameter "hmacHashAlgorithm"');if("iterationCount"in e==!1)return Promise.reject('Absent mandatory parameter "iterationCount"');if("contentToEncrypt"in e==!1)return Promise.reject('Absent mandatory parameter "contentToEncrypt"');if("contentType"in e==!1)return Promise.reject('Absent mandatory parameter "contentType"');var r=this.getOIDByAlgorithm(e.contentEncryptionAlgorithm);if(""===r)return Promise.reject('Wrong "contentEncryptionAlgorithm" value');var n=this.getOIDByAlgorithm({name:"PBKDF2"});if(""===n)return Promise.reject("Can not find OID for PBKDF2");var a=this.getOIDByAlgorithm({name:"HMAC",hash:{name:e.hmacHashAlgorithm}});if(""===a)return Promise.reject('Incorrect value for "hmacHashAlgorithm": '.concat(e.hmacHashAlgorithm));var i=Promise.resolve(),s=new ArrayBuffer(16),o=new Uint8Array(s);this.getRandomValues(o);var u=new ArrayBuffer(64),l=new Uint8Array(u);this.getRandomValues(l);var c=new Uint8Array(e.contentToEncrypt),h=new St({salt:new at({valueHex:u}),iterationCount:e.iterationCount,prf:new ht({algorithmId:a,algorithmParams:new it})});return i=(i=(i=(i=i.then((function(){var r=new Uint8Array(e.password);return t.importKey("raw",r,"PBKDF2",!1,["deriveKey"])}),(function(e){return Promise.reject(e)}))).then((function(r){return t.deriveKey({name:"PBKDF2",hash:{name:e.hmacHashAlgorithm},salt:l,iterations:e.iterationCount},r,e.contentEncryptionAlgorithm,!1,["encrypt"])}),(function(e){return Promise.reject(e)}))).then((function(r){return t.encrypt({name:e.contentEncryptionAlgorithm.name,iv:o},r,c)}),(function(e){return Promise.reject(e)}))).then((function(t){var a=new Nt({keyDerivationFunc:new ht({algorithmId:n,algorithmParams:h.toSchema()}),encryptionScheme:new ht({algorithmId:r,algorithmParams:new at({valueHex:s})})});return new bt({contentType:e.contentType,contentEncryptionAlgorithm:new ht({algorithmId:"1.2.840.113549.1.5.13",algorithmParams:a.toSchema()}),encryptedContent:new at({valueHex:t})})}),(function(e){return Promise.reject(e)}))}},{key:"decryptEncryptedContentInfo",value:function(e){var t=this;if(e instanceof Object==!1)return Promise.reject('Parameters must have type "Object"');if("password"in e==!1)return Promise.reject('Absent mandatory parameter "password"');if("encryptedContentInfo"in e==!1)return Promise.reject('Absent mandatory parameter "encryptedContentInfo"');if("1.2.840.113549.1.5.13"!==e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId)return Promise.reject('Unknown "contentEncryptionAlgorithm": '.concat(e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId));var r,n,a=Promise.resolve();try{r=new Nt({schema:e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams})}catch(e){return Promise.reject('Incorrectly encoded "pbes2Parameters"')}try{n=new St({schema:r.keyDerivationFunc.algorithmParams})}catch(e){return Promise.reject('Incorrectly encoded "pbkdf2Params"')}var i=this.getAlgorithmByOID(r.encryptionScheme.algorithmId);if("name"in i==!1)return Promise.reject('Incorrect OID for "contentEncryptionAlgorithm": '.concat(r.encryptionScheme.algorithmId));var s=r.encryptionScheme.algorithmParams.valueBlock.valueHex,o=new Uint8Array(s),u=n.salt.valueBlock.valueHex,l=new Uint8Array(u),c=n.iterationCount,h="SHA-1";if("prf"in n){var f=this.getAlgorithmByOID(n.prf.algorithmId);if("name"in f==!1)return Promise.reject("Incorrect OID for HMAC hash algorithm");h=f.hash.name}return a=(a=(a=a.then((function(){return t.importKey("raw",e.password,"PBKDF2",!1,["deriveKey"])}),(function(e){return Promise.reject(e)}))).then((function(e){return t.deriveKey({name:"PBKDF2",hash:{name:h},salt:l,iterations:c},e,i,!1,["decrypt"])}),(function(e){return Promise.reject(e)}))).then((function(r){var n=new ArrayBuffer(0);if(!1===e.encryptedContentInfo.encryptedContent.idBlock.isConstructed)n=e.encryptedContentInfo.encryptedContent.valueBlock.valueHex;else{var a,s=y(e.encryptedContentInfo.encryptedContent.valueBlock.value);try{for(s.s();!(a=s.n()).done;){n=Se(n,a.value.valueBlock.valueHex)}}catch(e){s.e(e)}finally{s.f()}}return t.decrypt({name:i.name,iv:o},r,n)}),(function(e){return Promise.reject(e)}))}},{key:"stampDataWithPassword",value:function(e){var t,r=this;if(e instanceof Object==!1)return Promise.reject('Parameters must have type "Object"');if("password"in e==!1)return Promise.reject('Absent mandatory parameter "password"');if("hashAlgorithm"in e==!1)return Promise.reject('Absent mandatory parameter "hashAlgorithm"');if("salt"in e==!1)return Promise.reject('Absent mandatory parameter "iterationCount"');if("iterationCount"in e==!1)return Promise.reject('Absent mandatory parameter "salt"');if("contentToStamp"in e==!1)return Promise.reject('Absent mandatory parameter "contentToStamp"');switch(e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:return Promise.reject('Incorrect "parameters.hashAlgorithm" parameter: '.concat(e.hashAlgorithm))}var n=Promise.resolve(),a={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}};return n=(n=(n=n.then((function(){return At(r,e.hashAlgorithm,t,e.password,e.salt,e.iterationCount)}))).then((function(e){return r.importKey("raw",new Uint8Array(e),a,!1,["sign"])}))).then((function(t){return r.sign(a,t,new Uint8Array(e.contentToStamp))}),(function(e){return Promise.reject(e)}))}},{key:"verifyDataStampedWithPassword",value:function(e){var t,r=this;if(e instanceof Object==!1)return Promise.reject('Parameters must have type "Object"');if("password"in e==!1)return Promise.reject('Absent mandatory parameter "password"');if("hashAlgorithm"in e==!1)return Promise.reject('Absent mandatory parameter "hashAlgorithm"');if("salt"in e==!1)return Promise.reject('Absent mandatory parameter "iterationCount"');if("iterationCount"in e==!1)return Promise.reject('Absent mandatory parameter "salt"');if("contentToVerify"in e==!1)return Promise.reject('Absent mandatory parameter "contentToVerify"');if("signatureToVerify"in e==!1)return Promise.reject('Absent mandatory parameter "signatureToVerify"');switch(e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:return Promise.reject('Incorrect "parameters.hashAlgorithm" parameter: '.concat(e.hashAlgorithm))}var n=Promise.resolve(),a={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}};return n=(n=(n=n.then((function(){return At(r,e.hashAlgorithm,t,e.password,e.salt,e.iterationCount)}))).then((function(e){return r.importKey("raw",new Uint8Array(e),a,!1,["verify"])}))).then((function(t){return r.verify(a,t,new Uint8Array(e.signatureToVerify),new Uint8Array(e.contentToVerify))}),(function(e){return Promise.reject(e)}))}},{key:"getSignatureParameters",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1",r=this.getOIDByAlgorithm({name:t});if(""===r)return Promise.reject("Unsupported hash algorithm: ".concat(t));var n=new ht,a=this.getAlgorithmParameters(e.algorithm.name,"sign");switch(a.algorithm.hash.name=t,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":n.algorithmId=this.getOIDByAlgorithm(a.algorithm);break;case"RSA-PSS":switch(t.toUpperCase()){case"SHA-256":a.algorithm.saltLength=32;break;case"SHA-384":a.algorithm.saltLength=48;break;case"SHA-512":a.algorithm.saltLength=64}var i={};if("SHA-1"!==t.toUpperCase()){var s=this.getOIDByAlgorithm({name:t});if(""===s)return Promise.reject("Unsupported hash algorithm: ".concat(t));i.hashAlgorithm=new ht({algorithmId:s,algorithmParams:new it}),i.maskGenAlgorithm=new ht({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:i.hashAlgorithm.toSchema()})}20!==a.algorithm.saltLength&&(i.saltLength=a.algorithm.saltLength);var o=new wt(i);n.algorithmId="1.2.840.113549.1.1.10",n.algorithmParams=o.toSchema();break;default:return Promise.reject("Unsupported signature algorithm: ".concat(e.algorithm.name))}return Promise.resolve().then((function(){return{signatureAlgorithm:n,parameters:a}}))}},{key:"signWithPrivateKey",value:function(e,t,r){return this.sign(r.algorithm,t,new Uint8Array(e)).then((function(e){return"ECDSA"===r.algorithm.name&&(e=function(e){if(e.byteLength%2!=0)return new ArrayBuffer(0);var t=e.byteLength/2,r=new ArrayBuffer(t);new Uint8Array(r).set(new Uint8Array(e,0,t));var n=new rt({valueHex:r}),a=new ArrayBuffer(t);new Uint8Array(a).set(new Uint8Array(e,t,t));var i=new rt({valueHex:a});return new ot({value:[n.convertToDER(),i.convertToDER()]}).toBER(!1)}(e)),e}),(function(e){return Promise.reject("Signing error: ".concat(e))}))}},{key:"fillPublicKeyParameters",value:function(e,t){var r,n={},a=this.getHashAlgorithm(t);if(""===a)return Promise.reject("Unsupported signature algorithm: ".concat(t.algorithmId));r="1.2.840.113549.1.1.10"===t.algorithmId?t.algorithmId:e.algorithm.algorithmId;var i=this.getAlgorithmByOID(r);if("name"in i==="")return Promise.reject("Unsupported public key algorithm: ".concat(t.algorithmId));if(n.algorithm=this.getAlgorithmParameters(i.name,"importkey"),"hash"in n.algorithm.algorithm&&(n.algorithm.algorithm.hash.name=a),"ECDSA"===i.name){var s=!1;if("algorithmParams"in e.algorithm==!0&&"idBlock"in e.algorithm.algorithmParams&&1===e.algorithm.algorithmParams.idBlock.tagClass&&6===e.algorithm.algorithmParams.idBlock.tagNumber&&(s=!0),!1===s)return Promise.reject("Incorrect type for ECDSA public key parameters");var o=this.getAlgorithmByOID(e.algorithm.algorithmParams.valueBlock.toString());if("name"in o==!1)return Promise.reject("Unsupported named curve algorithm: ".concat(e.algorithm.algorithmParams.valueBlock.toString()));n.algorithm.algorithm.namedCurve=o.name}return n}},{key:"getPublicKey",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===r&&(r=this.fillPublicKeyParameters(e,t));var n=e.toSchema(),a=n.toBER(!1),i=new Uint8Array(a);return this.importKey("spki",i,r.algorithm.algorithm,!0,r.algorithm.usages)}},{key:"verifyWithPublicKey",value:function(e,t,r,n){var a=this,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=Promise.resolve();if(null===i){if(""===(i=this.getHashAlgorithm(n)))return Promise.reject("Unsupported signature algorithm: ".concat(n.algorithmId));s=s.then((function(){return a.getPublicKey(r,n)}))}else{var o,u={};o="1.2.840.113549.1.1.10"===n.algorithmId?n.algorithmId:r.algorithm.algorithmId;var l=this.getAlgorithmByOID(o);if("name"in l==="")return Promise.reject("Unsupported public key algorithm: ".concat(n.algorithmId));if(u.algorithm=this.getAlgorithmParameters(l.name,"importkey"),"hash"in u.algorithm.algorithm&&(u.algorithm.algorithm.hash.name=i),"ECDSA"===l.name){var c=!1;if("algorithmParams"in r.algorithm==!0&&"idBlock"in r.algorithm.algorithmParams&&1===r.algorithm.algorithmParams.idBlock.tagClass&&6===r.algorithm.algorithmParams.idBlock.tagNumber&&(c=!0),!1===c)return Promise.reject("Incorrect type for ECDSA public key parameters");var h=this.getAlgorithmByOID(r.algorithm.algorithmParams.valueBlock.toString());if("name"in h==!1)return Promise.reject("Unsupported named curve algorithm: ".concat(r.algorithm.algorithmParams.valueBlock.toString()));u.algorithm.algorithm.namedCurve=h.name}s=s.then((function(){return a.getPublicKey(r,null,u)}))}return s=s.then((function(r){var s=a.getAlgorithmParameters(r.algorithm.name,"verify");"hash"in s.algorithm&&(s.algorithm.hash.name=i);var o=t.valueBlock.valueHex;"ECDSA"===r.algorithm.name&&(o=Rt(De(o).result));if("RSA-PSS"===r.algorithm.name){var u;try{u=new wt({schema:n.algorithmParams})}catch(e){return Promise.reject(e)}s.algorithm.saltLength="saltLength"in u?u.saltLength:20;var l="SHA-1";if("hashAlgorithm"in u){var c=a.getAlgorithmByOID(u.hashAlgorithm.algorithmId);if("name"in c==!1)return Promise.reject("Unrecognized hash algorithm: ".concat(u.hashAlgorithm.algorithmId));l=c.name}s.algorithm.hash.name=l}return a.verify(s.algorithm,r,new Uint8Array(o),new Uint8Array(e))}))}}]),e}(),Ct={name:"none",crypto:null,subtle:null};function xt(e,r,n){if("undefined"!=typeof process&&"pid"in process&&"undefined"!=typeof global&&"undefined"==typeof window){if(void 0===global[process.pid])global[process.pid]={};else if("object"!==t(global[process.pid]))throw new Error("Name global.".concat(process.pid," already exists and it is not an object"));if(void 0===global[process.pid].pkijs)global[process.pid].pkijs={};else if("object"!==t(global[process.pid].pkijs))throw new Error("Name global.".concat(process.pid,".pkijs already exists and it is not an object"));global[process.pid].pkijs.engine={name:e,crypto:r,subtle:n}}else Ct={name:e,crypto:r,subtle:n}}function It(){if("undefined"!=typeof process&&"pid"in process&&"undefined"!=typeof global&&"undefined"==typeof window){var e;try{e=global[process.pid].pkijs.engine}catch(e){throw new Error('Please call "setEngine" before call to "getEngine"')}return e}return Ct}function Et(){var e=It();if(null!==e.subtle)return e.subtle}function Pt(e){for(var t=!1,r="",n=e.trim(),a=0;a<n.length;a++)32===n.charCodeAt(a)?!1===t&&(t=!0):(t&&(r+=" ",t=!1),r+=n[a]);return r.toLowerCase()}function Rt(e){if(e instanceof ot==!1)return new ArrayBuffer(0);if(2!==e.valueBlock.value.length)return new ArrayBuffer(0);if(e.valueBlock.value[0]instanceof rt==!1)return new ArrayBuffer(0);if(e.valueBlock.value[1]instanceof rt==!1)return new ArrayBuffer(0);var t=e.valueBlock.value[0].convertFromDER(),r=e.valueBlock.value[1].convertFromDER();switch(!0){case t.valueBlock.valueHex.byteLength<r.valueBlock.valueHex.byteLength:if(r.valueBlock.valueHex.byteLength-t.valueBlock.valueHex.byteLength!=1)throw new Error("Incorrect DER integer decoding");var n=r.valueBlock.valueHex.byteLength,a=new Uint8Array(t.valueBlock.valueHex),i=new ArrayBuffer(n),s=new Uint8Array(i);return s.set(a,1),s[0]=0,Se(i,r.valueBlock.valueHex);case t.valueBlock.valueHex.byteLength>r.valueBlock.valueHex.byteLength:if(t.valueBlock.valueHex.byteLength-r.valueBlock.valueHex.byteLength!=1)throw new Error("Incorrect DER integer decoding");var o=t.valueBlock.valueHex.byteLength,u=new Uint8Array(r.valueBlock.valueHex),l=new ArrayBuffer(o),c=new Uint8Array(l);return c.set(u,1),c[0]=0,Se(t.valueBlock.valueHex,l);default:if(t.valueBlock.valueHex.byteLength%2){var h=t.valueBlock.valueHex.byteLength+1,f=new Uint8Array(t.valueBlock.valueHex),m=new ArrayBuffer(h),v=new Uint8Array(m);v.set(f,1),v[0]=0;var g=new Uint8Array(r.valueBlock.valueHex),d=new ArrayBuffer(h),p=new Uint8Array(d);return p.set(g,1),p[0]=0,Se(m,d)}}return Se(t.valueBlock.valueHex,r.valueBlock.valueHex)}!function(){if("undefined"!=typeof self&&"crypto"in self){var e,t="webcrypto",r=self.crypto;if("webkitSubtle"in self.crypto){try{e=self.crypto.webkitSubtle}catch(t){e=self.crypto.subtle}t="safari"}"subtle"in self.crypto&&(e=self.crypto.subtle),Ct=void 0===e?{name:t,crypto:r,subtle:null}:{name:t,crypto:r,subtle:new Bt({name:t,crypto:self.crypto,subtle:e})}}xt(Ct.name,Ct.crypto,Ct.subtle)}();var Lt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.type=ye(t,"type",e.defaultValues("type")),this.value=ye(t,"value",e.defaultValues("value")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["type","typeValue"]);var r=Te(t,t,e.schema({names:{type:"type",value:"typeValue"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for AttributeTypeAndValue");this.type=r.result.type.valueBlock.toString(),this.value=r.result.typeValue}},{key:"toSchema",value:function(){return new ot({value:[new tt({value:this.type}),this.value]})}},{key:"toJSON",value:function(){var e={type:this.type};return 0!==Object.keys(this.value).length?e.value=this.value.toJSON():e.value=this.value,e}},{key:"isEqual",value:function(t){var r=[et.blockName(),$e.blockName(),Ze.blockName(),Ye.blockName(),ze.blockName(),Qe.blockName(),We.blockName(),qe.blockName(),Je.blockName(),Ge.blockName(),Xe.blockName(),Fe.blockName()];if(t.constructor.blockName()===e.blockName()){if(this.type!==t.type)return!1;var n=!1,a=this.value.constructor.blockName();if(a===t.value.constructor.blockName()){var i,s=y(r);try{for(s.s();!(i=s.n()).done;){if(a===i.value){n=!0;break}}}catch(e){s.e(e)}finally{s.f()}}if(n){var o=Pt(this.value.valueBlock.value),u=Pt(t.value.valueBlock.value);if(0!==o.localeCompare(u))return!1}else if(!1===Ne(this.value.valueBeforeDecode,t.value.valueBeforeDecode))return!1;return!0}return t instanceof ArrayBuffer&&Ne(this.value.valueBeforeDecode,t)}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return"";case"value":return{};default:throw new Error("Invalid member name for AttributeTypeAndValue class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new tt({name:t.type||""}),new _e({name:t.value||""})]})}},{key:"blockName",value:function(){return"AttributeTypeAndValue"}}]),e}(),Ot=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.typesAndValues=ye(t,"typesAndValues",e.defaultValues("typesAndValues")),this.valueBeforeDecode=ye(t,"valueBeforeDecode",e.defaultValues("valueBeforeDecode")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["RDN","typesAndValues"]);var r=Te(t,t,e.schema({names:{blockName:"RDN",repeatedSet:"typesAndValues"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for RelativeDistinguishedNames");"typesAndValues"in r.result&&(this.typesAndValues=Array.from(r.result.typesAndValues,(function(e){return new Lt({schema:e})}))),this.valueBeforeDecode=r.result.RDN.valueBeforeDecode}},{key:"toSchema",value:function(){return 0===this.valueBeforeDecode.byteLength?new ot({value:[new st({value:Array.from(this.typesAndValues,(function(e){return e.toSchema()}))})]}):De(this.valueBeforeDecode).result}},{key:"toJSON",value:function(){return{typesAndValues:Array.from(this.typesAndValues,(function(e){return e.toJSON()}))}}},{key:"isEqual",value:function(t){if(t instanceof e){if(this.typesAndValues.length!==t.typesAndValues.length)return!1;var r,n=y(this.typesAndValues.entries());try{for(n.s();!(r=n.n()).done;){var a=v(r.value,2),i=a[0];if(!1===a[1].isEqual(t.typesAndValues[i]))return!1}}catch(e){n.e(e)}finally{n.f()}return!0}return t instanceof ArrayBuffer&&Ne(this.valueBeforeDecode,t)}}],[{key:"defaultValues",value:function(e){switch(e){case"typesAndValues":return[];case"valueBeforeDecode":return new ArrayBuffer(0);default:throw new Error("Invalid member name for RelativeDistinguishedNames class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"typesAndValues":return 0===t.length;case"valueBeforeDecode":return 0===t.byteLength;default:throw new Error("Invalid member name for RelativeDistinguishedNames class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new Ve({name:t.repeatedSequence||"",value:new st({value:[new Ve({name:t.repeatedSet||"",value:Lt.schema(t.typeAndValue||{})})]})})]})}}]),e}();function Ut(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=ye(e,"names",{});return new ot({optional:t,value:[new lt({optional:!0,idBlock:{tagClass:2,tagNumber:1},name:r.country_name||"",value:[new je({value:[new Ye,new ze]})]}),new lt({optional:!0,idBlock:{tagClass:2,tagNumber:2},name:r.administration_domain_name||"",value:[new je({value:[new Ye,new ze]})]}),new ct({optional:!0,idBlock:{tagClass:3,tagNumber:0},name:r.network_address||"",isHexOnly:!0}),new ct({optional:!0,idBlock:{tagClass:3,tagNumber:1},name:r.terminal_identifier||"",isHexOnly:!0}),new lt({optional:!0,idBlock:{tagClass:3,tagNumber:2},name:r.private_domain_name||"",value:[new je({value:[new Ye,new ze]})]}),new ct({optional:!0,idBlock:{tagClass:3,tagNumber:3},name:r.organization_name||"",isHexOnly:!0}),new ct({optional:!0,name:r.numeric_user_identifier||"",idBlock:{tagClass:3,tagNumber:4},isHexOnly:!0}),new lt({optional:!0,name:r.personal_name||"",idBlock:{tagClass:3,tagNumber:5},value:[new ct({idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new ct({optional:!0,idBlock:{tagClass:3,tagNumber:1},isHexOnly:!0}),new ct({optional:!0,idBlock:{tagClass:3,tagNumber:2},isHexOnly:!0}),new ct({optional:!0,idBlock:{tagClass:3,tagNumber:3},isHexOnly:!0})]}),new lt({optional:!0,name:r.organizational_unit_names||"",idBlock:{tagClass:3,tagNumber:6},value:[new Ve({value:new ze})]})]})}function Dt(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new ot({optional:e,value:[new ze,new ze]})}function Tt(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new st({optional:e,value:[new ct({optional:!0,idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new lt({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new _e]})]})}var Ht=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.type=ye(t,"type",e.defaultValues("type")),this.value=ye(t,"value",e.defaultValues("value")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["blockName","otherName","rfc822Name","dNSName","x400Address","directoryName","ediPartyName","uniformResourceIdentifier","iPAddress","registeredID"]);var r=Te(t,t,e.schema({names:{blockName:"blockName",otherName:"otherName",rfc822Name:"rfc822Name",dNSName:"dNSName",x400Address:"x400Address",directoryName:{names:{blockName:"directoryName"}},ediPartyName:"ediPartyName",uniformResourceIdentifier:"uniformResourceIdentifier",iPAddress:"iPAddress",registeredID:"registeredID"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for GeneralName");switch(this.type=r.result.blockName.idBlock.tagNumber,this.type){case 0:this.value=r.result.blockName;break;case 1:case 2:case 6:var n=r.result.blockName;n.idBlock.tagClass=1,n.idBlock.tagNumber=22;var a=n.toBER(!1);this.value=De(a).result.valueBlock.value;break;case 3:this.value=r.result.blockName;break;case 4:this.value=new Ot({schema:r.result.directoryName});break;case 5:this.value=r.result.ediPartyName;break;case 7:this.value=new at({valueHex:r.result.blockName.valueBlock.valueHex});break;case 8:var i=r.result.blockName;i.idBlock.tagClass=1,i.idBlock.tagNumber=6;var s=i.toBER(!1);this.value=De(s).result.valueBlock.toString()}}},{key:"toSchema",value:function(){switch(this.type){case 0:case 3:case 5:return new lt({idBlock:{tagClass:3,tagNumber:this.type},value:[this.value]});case 1:case 2:case 6:var t=new qe({value:this.value});return t.idBlock.tagClass=3,t.idBlock.tagNumber=this.type,t;case 4:return new lt({idBlock:{tagClass:3,tagNumber:4},value:[this.value.toSchema()]});case 7:var r=this.value;return r.idBlock.tagClass=3,r.idBlock.tagNumber=this.type,r;case 8:var n=new tt({value:this.value});return n.idBlock.tagClass=3,n.idBlock.tagNumber=this.type,n;default:return e.schema()}}},{key:"toJSON",value:function(){var e={type:this.type,value:""};if("string"==typeof this.value)e.value=this.value;else try{e.value=this.value.toJSON()}catch(e){}return e}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return 9;case"value":return{};default:throw new Error("Invalid member name for GeneralName class: ".concat(e))}}},{key:"compareWithDefault",value:function(t,r){switch(t){case"type":return r===e.defaultValues(t);case"value":return 0===Object.keys(r).length;default:throw new Error("Invalid member name for GeneralName class: ".concat(t))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new je({value:[new lt({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||"",value:[new tt,new lt({idBlock:{tagClass:3,tagNumber:0},value:[new _e]})]}),new ct({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:1}}),new ct({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:2}}),new lt({idBlock:{tagClass:3,tagNumber:3},name:t.blockName||"",value:[Ut(t.builtInStandardAttributes||{},!1),Dt(!0),Tt(!0)]}),new lt({idBlock:{tagClass:3,tagNumber:4},name:t.blockName||"",value:[Ot.schema(t.directoryName||{})]}),new lt({idBlock:{tagClass:3,tagNumber:5},name:t.blockName||"",value:[new lt({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new je({value:[new Qe,new ze,new Ze,new et,new $e]})]}),new lt({idBlock:{tagClass:3,tagNumber:1},value:[new je({value:[new Qe,new ze,new Ze,new et,new $e]})]})]}),new ct({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:6}}),new ct({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:7}}),new ct({name:t.blockName||"",idBlock:{tagClass:3,tagNumber:8}})]})}}]),e}(),Vt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.accessMethod=ye(t,"accessMethod",e.defaultValues("accessMethod")),this.accessLocation=ye(t,"accessLocation",e.defaultValues("accessLocation")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["accessMethod","accessLocation"]);var r=Te(t,t,e.schema({names:{accessMethod:"accessMethod",accessLocation:{names:{blockName:"accessLocation"}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for AccessDescription");this.accessMethod=r.result.accessMethod.valueBlock.toString(),this.accessLocation=new Ht({schema:r.result.accessLocation})}},{key:"toSchema",value:function(){return new ot({value:[new tt({value:this.accessMethod}),this.accessLocation.toSchema()]})}},{key:"toJSON",value:function(){return{accessMethod:this.accessMethod,accessLocation:this.accessLocation.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"accessMethod":return"";case"accessLocation":return new Ht;default:throw new Error("Invalid member name for AccessDescription class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new tt({name:t.accessMethod||""}),Ht.schema(t.accessLocation||{})]})}}]),e}(),_t=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.altNames=ye(t,"altNames",e.defaultValues("altNames")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["altNames"]);var r=Te(t,t,e.schema({names:{altNames:"altNames"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for AltName");"altNames"in r.result&&(this.altNames=Array.from(r.result.altNames,(function(e){return new Ht({schema:e})})))}},{key:"toSchema",value:function(){return new ot({value:Array.from(this.altNames,(function(e){return e.toSchema()}))})}},{key:"toJSON",value:function(){return{altNames:Array.from(this.altNames,(function(e){return e.toJSON()}))}}}],[{key:"defaultValues",value:function(e){switch(e){case"altNames":return[];default:throw new Error("Invalid member name for AltName class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new Ve({name:t.altNames||"",value:Ht.schema()})]})}}]),e}(),jt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.type=ye(t,"type",e.defaultValues("type")),this.value=ye(t,"value",e.defaultValues("value")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["utcTimeName","generalTimeName"]);var r=Te(t,t,e.schema({names:{utcTimeName:"utcTimeName",generalTimeName:"generalTimeName"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for Time");"utcTimeName"in r.result&&(this.type=0,this.value=r.result.utcTimeName.toDate()),"generalTimeName"in r.result&&(this.type=1,this.value=r.result.generalTimeName.toDate())}},{key:"toSchema",value:function(){var e={};return 0===this.type&&(e=new Ke({valueDate:this.value})),1===this.type&&(e=new Me({valueDate:this.value})),e}},{key:"toJSON",value:function(){return{type:this.type,value:this.value}}}],[{key:"defaultValues",value:function(e){switch(e){case"type":return 0;case"value":return new Date(0,0,0);default:throw new Error("Invalid member name for Time class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=ye(e,"names",{});return new je({optional:t,value:[new Ke({name:r.utcTimeName||""}),new Me({name:r.generalTimeName||""})]})}}]),e}(),Mt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.attributes=ye(t,"attributes",e.defaultValues("attributes")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["attributes"]);var r=Te(t,t,e.schema({names:{attributes:"attributes"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for SubjectDirectoryAttributes");this.attributes=Array.from(r.result.attributes,(function(e){return new gt({schema:e})}))}},{key:"toSchema",value:function(){return new ot({value:Array.from(this.attributes,(function(e){return e.toSchema()}))})}},{key:"toJSON",value:function(){return{attributes:Array.from(this.attributes,(function(e){return e.toJSON()}))}}}],[{key:"defaultValues",value:function(e){switch(e){case"attributes":return[];default:throw new Error("Invalid member name for SubjectDirectoryAttributes class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new Ve({name:t.attributes||"",value:gt.schema()})]})}}]),e}(),Kt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),"notBefore"in t&&(this.notBefore=ye(t,"notBefore",e.defaultValues("notBefore"))),"notAfter"in t&&(this.notAfter=ye(t,"notAfter",e.defaultValues("notAfter"))),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["notBefore","notAfter"]);var r=Te(t,t,e.schema({names:{notBefore:"notBefore",notAfter:"notAfter"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PrivateKeyUsagePeriod");if("notBefore"in r.result){var n=new Me;n.fromBuffer(r.result.notBefore.valueBlock.valueHex),this.notBefore=n.toDate()}if("notAfter"in r.result){var a=new Me({valueHex:r.result.notAfter.valueBlock.valueHex});a.fromBuffer(r.result.notAfter.valueBlock.valueHex),this.notAfter=a.toDate()}}},{key:"toSchema",value:function(){var e=[];return"notBefore"in this&&e.push(new ct({idBlock:{tagClass:3,tagNumber:0},valueHex:new Me({valueDate:this.notBefore}).valueBlock.valueHex})),"notAfter"in this&&e.push(new ct({idBlock:{tagClass:3,tagNumber:1},valueHex:new Me({valueDate:this.notAfter}).valueBlock.valueHex})),new ot({value:e})}},{key:"toJSON",value:function(){var e={};return"notBefore"in this&&(e.notBefore=this.notBefore),"notAfter"in this&&(e.notAfter=this.notAfter),e}}],[{key:"defaultValues",value:function(e){switch(e){case"notBefore":case"notAfter":return new Date;default:throw new Error("Invalid member name for PrivateKeyUsagePeriod class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new ct({name:t.notBefore||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new ct({name:t.notAfter||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}}]),e}(),Ft=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.cA=ye(t,"cA",!1),"pathLenConstraint"in t&&(this.pathLenConstraint=ye(t,"pathLenConstraint",0)),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["cA","pathLenConstraint"]);var r=Te(t,t,e.schema({names:{cA:"cA",pathLenConstraint:"pathLenConstraint"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for BasicConstraints");"cA"in r.result&&(this.cA=r.result.cA.valueBlock.value),"pathLenConstraint"in r.result&&(r.result.pathLenConstraint.valueBlock.isHexOnly?this.pathLenConstraint=r.result.pathLenConstraint:this.pathLenConstraint=r.result.pathLenConstraint.valueBlock.valueDec)}},{key:"toSchema",value:function(){var t=[];return this.cA!==e.defaultValues("cA")&&t.push(new ut({value:this.cA})),"pathLenConstraint"in this&&(this.pathLenConstraint instanceof rt?t.push(this.pathLenConstraint):t.push(new rt({value:this.pathLenConstraint}))),new ot({value:t})}},{key:"toJSON",value:function(){var t={};return this.cA!==e.defaultValues("cA")&&(t.cA=this.cA),"pathLenConstraint"in this&&(this.pathLenConstraint instanceof rt?t.pathLenConstraint=this.pathLenConstraint.toJSON():t.pathLenConstraint=this.pathLenConstraint),t}}],[{key:"defaultValues",value:function(e){switch(e){case"cA":return!1;default:throw new Error("Invalid member name for BasicConstraints class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new ut({optional:!0,name:t.cA||""}),new rt({optional:!0,name:t.pathLenConstraint||""})]})}}]),e}(),Xt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),"distributionPoint"in t&&(this.distributionPoint=ye(t,"distributionPoint",e.defaultValues("distributionPoint"))),this.onlyContainsUserCerts=ye(t,"onlyContainsUserCerts",e.defaultValues("onlyContainsUserCerts")),this.onlyContainsCACerts=ye(t,"onlyContainsCACerts",e.defaultValues("onlyContainsCACerts")),"onlySomeReasons"in t&&(this.onlySomeReasons=ye(t,"onlySomeReasons",e.defaultValues("onlySomeReasons"))),this.indirectCRL=ye(t,"indirectCRL",e.defaultValues("indirectCRL")),this.onlyContainsAttributeCerts=ye(t,"onlyContainsAttributeCerts",e.defaultValues("onlyContainsAttributeCerts")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["distributionPoint","distributionPointNames","onlyContainsUserCerts","onlyContainsCACerts","onlySomeReasons","indirectCRL","onlyContainsAttributeCerts"]);var r=Te(t,t,e.schema({names:{distributionPoint:"distributionPoint",distributionPointNames:"distributionPointNames",onlyContainsUserCerts:"onlyContainsUserCerts",onlyContainsCACerts:"onlyContainsCACerts",onlySomeReasons:"onlySomeReasons",indirectCRL:"indirectCRL",onlyContainsAttributeCerts:"onlyContainsAttributeCerts"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for IssuingDistributionPoint");if("distributionPoint"in r.result)switch(!0){case 0===r.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=Array.from(r.result.distributionPointNames,(function(e){return new Ht({schema:e})}));break;case 1===r.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=new Ot({schema:new ot({value:r.result.distributionPoint.valueBlock.value})});break;default:throw new Error("Unknown tagNumber for distributionPoint: {$asn1.result.distributionPoint.idBlock.tagNumber}")}if("onlyContainsUserCerts"in r.result){var n=new Uint8Array(r.result.onlyContainsUserCerts.valueBlock.valueHex);this.onlyContainsUserCerts=0!==n[0]}if("onlyContainsCACerts"in r.result){var a=new Uint8Array(r.result.onlyContainsCACerts.valueBlock.valueHex);this.onlyContainsCACerts=0!==a[0]}if("onlySomeReasons"in r.result){var i=new Uint8Array(r.result.onlySomeReasons.valueBlock.valueHex);this.onlySomeReasons=i[0]}if("indirectCRL"in r.result){var s=new Uint8Array(r.result.indirectCRL.valueBlock.valueHex);this.indirectCRL=0!==s[0]}if("onlyContainsAttributeCerts"in r.result){var o=new Uint8Array(r.result.onlyContainsAttributeCerts.valueBlock.valueHex);this.onlyContainsAttributeCerts=0!==o[0]}}},{key:"toSchema",value:function(){var t,r=[];"distributionPoint"in this&&(this.distributionPoint instanceof Array?t=new lt({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,(function(e){return e.toSchema()}))}):((t=this.distributionPoint.toSchema()).idBlock.tagClass=3,t.idBlock.tagNumber=1),r.push(new lt({idBlock:{tagClass:3,tagNumber:0},value:[t]})));if(this.onlyContainsUserCerts!==e.defaultValues("onlyContainsUserCerts")&&r.push(new ct({idBlock:{tagClass:3,tagNumber:1},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsCACerts!==e.defaultValues("onlyContainsCACerts")&&r.push(new ct({idBlock:{tagClass:3,tagNumber:2},valueHex:new Uint8Array([255]).buffer})),"onlySomeReasons"in this){var n=new ArrayBuffer(1);new Uint8Array(n)[0]=this.onlySomeReasons,r.push(new ct({idBlock:{tagClass:3,tagNumber:3},valueHex:n}))}return this.indirectCRL!==e.defaultValues("indirectCRL")&&r.push(new ct({idBlock:{tagClass:3,tagNumber:4},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsAttributeCerts!==e.defaultValues("onlyContainsAttributeCerts")&&r.push(new ct({idBlock:{tagClass:3,tagNumber:5},valueHex:new Uint8Array([255]).buffer})),new ot({value:r})}},{key:"toJSON",value:function(){var t={};return"distributionPoint"in this&&(this.distributionPoint instanceof Array?t.distributionPoint=Array.from(this.distributionPoint,(function(e){return e.toJSON()})):t.distributionPoint=this.distributionPoint.toJSON()),this.onlyContainsUserCerts!==e.defaultValues("onlyContainsUserCerts")&&(t.onlyContainsUserCerts=this.onlyContainsUserCerts),this.onlyContainsCACerts!==e.defaultValues("onlyContainsCACerts")&&(t.onlyContainsCACerts=this.onlyContainsCACerts),"onlySomeReasons"in this&&(t.onlySomeReasons=this.onlySomeReasons),this.indirectCRL!==e.defaultValues("indirectCRL")&&(t.indirectCRL=this.indirectCRL),this.onlyContainsAttributeCerts!==e.defaultValues("onlyContainsAttributeCerts")&&(t.onlyContainsAttributeCerts=this.onlyContainsAttributeCerts),t}}],[{key:"defaultValues",value:function(e){switch(e){case"distributionPoint":return[];case"onlyContainsUserCerts":case"onlyContainsCACerts":return!1;case"onlySomeReasons":return 0;case"indirectCRL":case"onlyContainsAttributeCerts":return!1;default:throw new Error("Invalid member name for IssuingDistributionPoint class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new lt({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new je({value:[new lt({name:t.distributionPoint||"",idBlock:{tagClass:3,tagNumber:0},value:[new Ve({name:t.distributionPointNames||"",value:Ht.schema()})]}),new lt({name:t.distributionPoint||"",idBlock:{tagClass:3,tagNumber:1},value:Ot.schema().valueBlock.value})]})]}),new ct({name:t.onlyContainsUserCerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new ct({name:t.onlyContainsCACerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new ct({name:t.onlySomeReasons||"",optional:!0,idBlock:{tagClass:3,tagNumber:3}}),new ct({name:t.indirectCRL||"",optional:!0,idBlock:{tagClass:3,tagNumber:4}}),new ct({name:t.onlyContainsAttributeCerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:5}})]})}}]),e}(),Gt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.names=ye(t,"names",e.defaultValues("names")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["names","generalNames"]);var r=Te(t,t,e.schema({names:{blockName:"names",generalNames:"generalNames"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for GeneralNames");this.names=Array.from(r.result.generalNames,(function(e){return new Ht({schema:e})}))}},{key:"toSchema",value:function(){return new ot({value:Array.from(this.names,(function(e){return e.toSchema()}))})}},{key:"toJSON",value:function(){return{names:Array.from(this.names,(function(e){return e.toJSON()}))}}}],[{key:"defaultValues",value:function(e){switch(e){case"names":return[];default:throw new Error("Invalid member name for GeneralNames class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=ye(e,"names",{});return new ot({optional:t,name:r.blockName||"",value:[new Ve({name:r.generalNames||"",value:Ht.schema()})]})}}]),e}(),Jt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.base=ye(t,"base",e.defaultValues("base")),this.minimum=ye(t,"minimum",e.defaultValues("minimum")),"maximum"in t&&(this.maximum=ye(t,"maximum",e.defaultValues("maximum"))),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["base","minimum","maximum"]);var r=Te(t,t,e.schema({names:{base:{names:{blockName:"base"}},minimum:"minimum",maximum:"maximum"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for GeneralSubtree");this.base=new Ht({schema:r.result.base}),"minimum"in r.result&&(r.result.minimum.valueBlock.isHexOnly?this.minimum=r.result.minimum:this.minimum=r.result.minimum.valueBlock.valueDec),"maximum"in r.result&&(r.result.maximum.valueBlock.isHexOnly?this.maximum=r.result.maximum:this.maximum=r.result.maximum.valueBlock.valueDec)}},{key:"toSchema",value:function(){var e=[];if(e.push(this.base.toSchema()),0!==this.minimum){var t=0;t=this.minimum instanceof rt?this.minimum:new rt({value:this.minimum}),e.push(new lt({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if("maximum"in this){var r=0;r=this.maximum instanceof rt?this.maximum:new rt({value:this.maximum}),e.push(new lt({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[r]}))}return new ot({value:e})}},{key:"toJSON",value:function(){var e={base:this.base.toJSON()};return 0!==this.minimum&&("number"==typeof this.minimum?e.minimum=this.minimum:e.minimum=this.minimum.toJSON()),"maximum"in this&&("number"==typeof this.maximum?e.maximum=this.maximum:e.maximum=this.maximum.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"base":return new Ht;case"minimum":case"maximum":return 0;default:throw new Error("Invalid member name for GeneralSubtree class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[Ht.schema(t.base||{}),new lt({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new rt({name:t.minimum||""})]}),new lt({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new rt({name:t.maximum||""})]})]})}}]),e}(),qt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),"permittedSubtrees"in t&&(this.permittedSubtrees=ye(t,"permittedSubtrees",e.defaultValues("permittedSubtrees"))),"excludedSubtrees"in t&&(this.excludedSubtrees=ye(t,"excludedSubtrees",e.defaultValues("excludedSubtrees"))),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["permittedSubtrees","excludedSubtrees"]);var r=Te(t,t,e.schema({names:{permittedSubtrees:"permittedSubtrees",excludedSubtrees:"excludedSubtrees"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for NameConstraints");"permittedSubtrees"in r.result&&(this.permittedSubtrees=Array.from(r.result.permittedSubtrees,(function(e){return new Jt({schema:e})}))),"excludedSubtrees"in r.result&&(this.excludedSubtrees=Array.from(r.result.excludedSubtrees,(function(e){return new Jt({schema:e})})))}},{key:"toSchema",value:function(){var e=[];return"permittedSubtrees"in this&&e.push(new lt({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.permittedSubtrees,(function(e){return e.toSchema()}))})),"excludedSubtrees"in this&&e.push(new lt({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.excludedSubtrees,(function(e){return e.toSchema()}))})),new ot({value:e})}},{key:"toJSON",value:function(){var e={};return"permittedSubtrees"in this&&(e.permittedSubtrees=Array.from(this.permittedSubtrees,(function(e){return e.toJSON()}))),"excludedSubtrees"in this&&(e.excludedSubtrees=Array.from(this.excludedSubtrees,(function(e){return e.toJSON()}))),e}}],[{key:"defaultValues",value:function(e){switch(e){case"permittedSubtrees":case"excludedSubtrees":return[];default:throw new Error("Invalid member name for NameConstraints class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new lt({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ve({name:t.permittedSubtrees||"",value:Jt.schema()})]}),new lt({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Ve({name:t.excludedSubtrees||"",value:Jt.schema()})]})]})}}]),e}(),Wt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),"distributionPoint"in t&&(this.distributionPoint=ye(t,"distributionPoint",e.defaultValues("distributionPoint"))),"reasons"in t&&(this.reasons=ye(t,"reasons",e.defaultValues("reasons"))),"cRLIssuer"in t&&(this.cRLIssuer=ye(t,"cRLIssuer",e.defaultValues("cRLIssuer"))),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["distributionPoint","distributionPointNames","reasons","cRLIssuer","cRLIssuerNames"]);var r=Te(t,t,e.schema({names:{distributionPoint:"distributionPoint",distributionPointNames:"distributionPointNames",reasons:"reasons",cRLIssuer:"cRLIssuer",cRLIssuerNames:"cRLIssuerNames"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for DistributionPoint");"distributionPoint"in r.result&&(0===r.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=Array.from(r.result.distributionPointNames,(function(e){return new Ht({schema:e})}))),1===r.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=new Ot({schema:new ot({value:r.result.distributionPoint.valueBlock.value})}))),"reasons"in r.result&&(this.reasons=new nt({valueHex:r.result.reasons.valueBlock.valueHex})),"cRLIssuer"in r.result&&(this.cRLIssuer=Array.from(r.result.cRLIssuerNames,(function(e){return new Ht({schema:e})})))}},{key:"toSchema",value:function(){var e,t=[];"distributionPoint"in this&&(e=this.distributionPoint instanceof Array?new lt({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,(function(e){return e.toSchema()}))}):new lt({idBlock:{tagClass:3,tagNumber:1},value:[this.distributionPoint.toSchema()]}),t.push(new lt({idBlock:{tagClass:3,tagNumber:0},value:[e]})));return"reasons"in this&&t.push(new ct({idBlock:{tagClass:3,tagNumber:1},valueHex:this.reasons.valueBlock.valueHex})),"cRLIssuer"in this&&t.push(new lt({idBlock:{tagClass:3,tagNumber:2},value:Array.from(this.cRLIssuer,(function(e){return e.toSchema()}))})),new ot({value:t})}},{key:"toJSON",value:function(){var e={};return"distributionPoint"in this&&(this.distributionPoint instanceof Array?e.distributionPoint=Array.from(this.distributionPoint,(function(e){return e.toJSON()})):e.distributionPoint=this.distributionPoint.toJSON()),"reasons"in this&&(e.reasons=this.reasons.toJSON()),"cRLIssuer"in this&&(e.cRLIssuer=Array.from(this.cRLIssuer,(function(e){return e.toJSON()}))),e}}],[{key:"defaultValues",value:function(e){switch(e){case"distributionPoint":return[];case"reasons":return new nt;case"cRLIssuer":return[];default:throw new Error("Invalid member name for DistributionPoint class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new lt({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new je({value:[new lt({name:t.distributionPoint||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ve({name:t.distributionPointNames||"",value:Ht.schema()})]}),new lt({name:t.distributionPoint||"",optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Ot.schema().valueBlock.value})]})]}),new ct({name:t.reasons||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new lt({name:t.cRLIssuer||"",optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[new Ve({name:t.cRLIssuerNames||"",value:Ht.schema()})]})]})}}]),e}(),Qt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.distributionPoints=ye(t,"distributionPoints",e.defaultValues("distributionPoints")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["distributionPoints"]);var r=Te(t,t,e.schema({names:{distributionPoints:"distributionPoints"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CRLDistributionPoints");this.distributionPoints=Array.from(r.result.distributionPoints,(function(e){return new Wt({schema:e})}))}},{key:"toSchema",value:function(){return new ot({value:Array.from(this.distributionPoints,(function(e){return e.toSchema()}))})}},{key:"toJSON",value:function(){return{distributionPoints:Array.from(this.distributionPoints,(function(e){return e.toJSON()}))}}}],[{key:"defaultValues",value:function(e){switch(e){case"distributionPoints":return[];default:throw new Error("Invalid member name for CRLDistributionPoints class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new Ve({name:t.distributionPoints||"",value:Wt.schema()})]})}}]),e}(),zt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.policyQualifierId=ye(t,"policyQualifierId",e.defaultValues("policyQualifierId")),this.qualifier=ye(t,"qualifier",e.defaultValues("qualifier")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["policyQualifierId","qualifier"]);var r=Te(t,t,e.schema({names:{policyQualifierId:"policyQualifierId",qualifier:"qualifier"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PolicyQualifierInfo");this.policyQualifierId=r.result.policyQualifierId.valueBlock.toString(),this.qualifier=r.result.qualifier}},{key:"toSchema",value:function(){return new ot({value:[new tt({value:this.policyQualifierId}),this.qualifier]})}},{key:"toJSON",value:function(){return{policyQualifierId:this.policyQualifierId,qualifier:this.qualifier.toJSON()}}}],[{key:"defaultValues",value:function(e){switch(e){case"policyQualifierId":return"";case"qualifier":return new _e;default:throw new Error("Invalid member name for PolicyQualifierInfo class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new tt({name:t.policyQualifierId||""}),new _e({name:t.qualifier||""})]})}}]),e}(),Yt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.policyIdentifier=ye(t,"policyIdentifier",e.defaultValues("policyIdentifier")),"policyQualifiers"in t&&(this.policyQualifiers=ye(t,"policyQualifiers",e.defaultValues("policyQualifiers"))),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["policyIdentifier","policyQualifiers"]);var r=Te(t,t,e.schema({names:{policyIdentifier:"policyIdentifier",policyQualifiers:"policyQualifiers"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PolicyInformation");this.policyIdentifier=r.result.policyIdentifier.valueBlock.toString(),"policyQualifiers"in r.result&&(this.policyQualifiers=Array.from(r.result.policyQualifiers,(function(e){return new zt({schema:e})})))}},{key:"toSchema",value:function(){var e=[];return e.push(new tt({value:this.policyIdentifier})),"policyQualifiers"in this&&e.push(new ot({value:Array.from(this.policyQualifiers,(function(e){return e.toSchema()}))})),new ot({value:e})}},{key:"toJSON",value:function(){var e={policyIdentifier:this.policyIdentifier};return"policyQualifiers"in this&&(e.policyQualifiers=Array.from(this.policyQualifiers,(function(e){return e.toJSON()}))),e}}],[{key:"defaultValues",value:function(e){switch(e){case"policyIdentifier":return"";case"policyQualifiers":return[];default:throw new Error("Invalid member name for PolicyInformation class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new tt({name:t.policyIdentifier||""}),new ot({optional:!0,value:[new Ve({name:t.policyQualifiers||"",value:zt.schema()})]})]})}}]),e}(),Zt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.certificatePolicies=ye(t,"certificatePolicies",e.defaultValues("certificatePolicies")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["certificatePolicies"]);var r=Te(t,t,e.schema({names:{certificatePolicies:"certificatePolicies"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CertificatePolicies");this.certificatePolicies=Array.from(r.result.certificatePolicies,(function(e){return new Yt({schema:e})}))}},{key:"toSchema",value:function(){return new ot({value:Array.from(this.certificatePolicies,(function(e){return e.toSchema()}))})}},{key:"toJSON",value:function(){return{certificatePolicies:Array.from(this.certificatePolicies,(function(e){return e.toJSON()}))}}}],[{key:"defaultValues",value:function(e){switch(e){case"certificatePolicies":return[];default:throw new Error("Invalid member name for CertificatePolicies class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new Ve({name:t.certificatePolicies||"",value:Yt.schema()})]})}}]),e}(),$t=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.issuerDomainPolicy=ye(t,"issuerDomainPolicy",e.defaultValues("issuerDomainPolicy")),this.subjectDomainPolicy=ye(t,"subjectDomainPolicy",e.defaultValues("subjectDomainPolicy")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["issuerDomainPolicy","subjectDomainPolicy"]);var r=Te(t,t,e.schema({names:{issuerDomainPolicy:"issuerDomainPolicy",subjectDomainPolicy:"subjectDomainPolicy"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PolicyMapping");this.issuerDomainPolicy=r.result.issuerDomainPolicy.valueBlock.toString(),this.subjectDomainPolicy=r.result.subjectDomainPolicy.valueBlock.toString()}},{key:"toSchema",value:function(){return new ot({value:[new tt({value:this.issuerDomainPolicy}),new tt({value:this.subjectDomainPolicy})]})}},{key:"toJSON",value:function(){return{issuerDomainPolicy:this.issuerDomainPolicy,subjectDomainPolicy:this.subjectDomainPolicy}}}],[{key:"defaultValues",value:function(e){switch(e){case"issuerDomainPolicy":case"subjectDomainPolicy":return"";default:throw new Error("Invalid member name for PolicyMapping class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new tt({name:t.issuerDomainPolicy||""}),new tt({name:t.subjectDomainPolicy||""})]})}}]),e}(),er=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.mappings=ye(t,"mappings",e.defaultValues("mappings")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["mappings"]);var r=Te(t,t,e.schema({names:{mappings:"mappings"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PolicyMappings");this.mappings=Array.from(r.result.mappings,(function(e){return new $t({schema:e})}))}},{key:"toSchema",value:function(){return new ot({value:Array.from(this.mappings,(function(e){return e.toSchema()}))})}},{key:"toJSON",value:function(){return{mappings:Array.from(this.mappings,(function(e){return e.toJSON()}))}}}],[{key:"defaultValues",value:function(e){switch(e){case"mappings":return[];default:throw new Error("Invalid member name for PolicyMappings class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new Ve({name:t.mappings||"",value:$t.schema()})]})}}]),e}(),tr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),"keyIdentifier"in t&&(this.keyIdentifier=ye(t,"keyIdentifier",e.defaultValues("keyIdentifier"))),"authorityCertIssuer"in t&&(this.authorityCertIssuer=ye(t,"authorityCertIssuer",e.defaultValues("authorityCertIssuer"))),"authorityCertSerialNumber"in t&&(this.authorityCertSerialNumber=ye(t,"authorityCertSerialNumber",e.defaultValues("authorityCertSerialNumber"))),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["keyIdentifier","authorityCertIssuer","authorityCertSerialNumber"]);var r=Te(t,t,e.schema({names:{keyIdentifier:"keyIdentifier",authorityCertIssuer:"authorityCertIssuer",authorityCertSerialNumber:"authorityCertSerialNumber"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for AuthorityKeyIdentifier");"keyIdentifier"in r.result&&(this.keyIdentifier=new at({valueHex:r.result.keyIdentifier.valueBlock.valueHex})),"authorityCertIssuer"in r.result&&(this.authorityCertIssuer=Array.from(r.result.authorityCertIssuer,(function(e){return new Ht({schema:e})}))),"authorityCertSerialNumber"in r.result&&(this.authorityCertSerialNumber=new rt({valueHex:r.result.authorityCertSerialNumber.valueBlock.valueHex}))}},{key:"toSchema",value:function(){var e=[];return"keyIdentifier"in this&&e.push(new ct({idBlock:{tagClass:3,tagNumber:0},valueHex:this.keyIdentifier.valueBlock.valueHex})),"authorityCertIssuer"in this&&e.push(new lt({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.authorityCertIssuer,(function(e){return e.toSchema()}))})),"authorityCertSerialNumber"in this&&e.push(new ct({idBlock:{tagClass:3,tagNumber:2},valueHex:this.authorityCertSerialNumber.valueBlock.valueHex})),new ot({value:e})}},{key:"toJSON",value:function(){var e={};return"keyIdentifier"in this&&(e.keyIdentifier=this.keyIdentifier.toJSON()),"authorityCertIssuer"in this&&(e.authorityCertIssuer=Array.from(this.authorityCertIssuer,(function(e){return e.toJSON()}))),"authorityCertSerialNumber"in this&&(e.authorityCertSerialNumber=this.authorityCertSerialNumber.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"keyIdentifier":return new at;case"authorityCertIssuer":return[];case"authorityCertSerialNumber":return new rt;default:throw new Error("Invalid member name for AuthorityKeyIdentifier class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new ct({name:t.keyIdentifier||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new lt({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Ve({name:t.authorityCertIssuer||"",value:Ht.schema()})]}),new ct({name:t.authorityCertSerialNumber||"",optional:!0,idBlock:{tagClass:3,tagNumber:2}})]})}}]),e}(),rr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),"requireExplicitPolicy"in t&&(this.requireExplicitPolicy=ye(t,"requireExplicitPolicy",e.defaultValues("requireExplicitPolicy"))),"inhibitPolicyMapping"in t&&(this.inhibitPolicyMapping=ye(t,"inhibitPolicyMapping",e.defaultValues("inhibitPolicyMapping"))),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["requireExplicitPolicy","inhibitPolicyMapping"]);var r=Te(t,t,e.schema({names:{requireExplicitPolicy:"requireExplicitPolicy",inhibitPolicyMapping:"inhibitPolicyMapping"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for PolicyConstraints");if("requireExplicitPolicy"in r.result){var n=r.result.requireExplicitPolicy;n.idBlock.tagClass=1,n.idBlock.tagNumber=2;var a=n.toBER(!1),i=De(a);this.requireExplicitPolicy=i.result.valueBlock.valueDec}if("inhibitPolicyMapping"in r.result){var s=r.result.inhibitPolicyMapping;s.idBlock.tagClass=1,s.idBlock.tagNumber=2;var o=s.toBER(!1),u=De(o);this.inhibitPolicyMapping=u.result.valueBlock.valueDec}}},{key:"toSchema",value:function(){var e=[];if("requireExplicitPolicy"in this){var t=new rt({value:this.requireExplicitPolicy});t.idBlock.tagClass=3,t.idBlock.tagNumber=0,e.push(t)}if("inhibitPolicyMapping"in this){var r=new rt({value:this.inhibitPolicyMapping});r.idBlock.tagClass=3,r.idBlock.tagNumber=1,e.push(r)}return new ot({value:e})}},{key:"toJSON",value:function(){var e={};return"requireExplicitPolicy"in this&&(e.requireExplicitPolicy=this.requireExplicitPolicy),"inhibitPolicyMapping"in this&&(e.inhibitPolicyMapping=this.inhibitPolicyMapping),e}}],[{key:"defaultValues",value:function(e){switch(e){case"requireExplicitPolicy":case"inhibitPolicyMapping":return 0;default:throw new Error("Invalid member name for PolicyConstraints class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new ct({name:t.requireExplicitPolicy||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new ct({name:t.inhibitPolicyMapping||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}}]),e}(),nr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.keyPurposes=ye(t,"keyPurposes",e.defaultValues("keyPurposes")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["keyPurposes"]);var r=Te(t,t,e.schema({names:{keyPurposes:"keyPurposes"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for ExtKeyUsage");this.keyPurposes=Array.from(r.result.keyPurposes,(function(e){return e.valueBlock.toString()}))}},{key:"toSchema",value:function(){return new ot({value:Array.from(this.keyPurposes,(function(e){return new tt({value:e})}))})}},{key:"toJSON",value:function(){return{keyPurposes:Array.from(this.keyPurposes)}}}],[{key:"defaultValues",value:function(e){switch(e){case"keyPurposes":return[];default:throw new Error("Invalid member name for ExtKeyUsage class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new Ve({name:t.keyPurposes||"",value:new tt})]})}}]),e}(),ar=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.accessDescriptions=ye(t,"accessDescriptions",e.defaultValues("accessDescriptions")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["accessDescriptions"]);var r=Te(t,t,e.schema({names:{accessDescriptions:"accessDescriptions"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for InfoAccess");this.accessDescriptions=Array.from(r.result.accessDescriptions,(function(e){return new Vt({schema:e})}))}},{key:"toSchema",value:function(){return new ot({value:Array.from(this.accessDescriptions,(function(e){return e.toSchema()}))})}},{key:"toJSON",value:function(){return{accessDescriptions:Array.from(this.accessDescriptions,(function(e){return e.toJSON()}))}}}],[{key:"defaultValues",value:function(e){switch(e){case"accessDescriptions":return[];default:throw new Error("Invalid member name for InfoAccess class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new Ve({name:t.accessDescriptions||"",value:Vt.schema()})]})}}]),e}(),ir=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.clear();for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];switch(i){case"length":this.length=t.length;break;case"stub":for(var s=0;s<this._view.length;s++)this._view[s]=t.stub;break;case"view":this.fromUint8Array(t.view);break;case"buffer":this.fromArrayBuffer(t.buffer);break;case"string":this.fromString(t.string);break;case"hexstring":this.fromHexString(t.hexstring)}}}return s(e,[{key:"clear",value:function(){this._buffer=new ArrayBuffer(0),this._view=new Uint8Array(this._buffer)}},{key:"fromArrayBuffer",value:function(e){this.buffer=e}},{key:"fromUint8Array",value:function(e){this._buffer=new ArrayBuffer(e.length),this._view=new Uint8Array(this._buffer),this._view.set(e)}},{key:"fromString",value:function(e){var t=e.length;this.length=t;for(var r=0;r<t;r++)this.view[r]=e.charCodeAt(r)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.view.length-e,r="";(e>=this.view.length||e<0)&&(e=0),(t>=this.view.length||t<0)&&(t=this.view.length-e);for(var n=e;n<e+t;n++)r+=String.fromCharCode(this.view[n]);return r}},{key:"fromHexString",value:function(e){var t=e.length;this.buffer=new ArrayBuffer(t>>1),this.view=new Uint8Array(this.buffer);var r=new Map;r.set("0",0),r.set("1",1),r.set("2",2),r.set("3",3),r.set("4",4),r.set("5",5),r.set("6",6),r.set("7",7),r.set("8",8),r.set("9",9),r.set("A",10),r.set("a",10),r.set("B",11),r.set("b",11),r.set("C",12),r.set("c",12),r.set("D",13),r.set("d",13),r.set("E",14),r.set("e",14),r.set("F",15),r.set("f",15);for(var n=0,a=0,i=0;i<t;i++)i%2?(a|=r.get(e.charAt(i)),this.view[n]=a,n++):a=r.get(e.charAt(i))<<4}},{key:"toHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.view.length-e,r="";(e>=this.view.length||e<0)&&(e=0),(t>=this.view.length||t<0)&&(t=this.view.length-e);for(var n=e;n<e+t;n++){var a=this.view[n].toString(16).toUpperCase();r=r+(1==a.length?"0":"")+a}return r}},{key:"copy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._buffer.byteLength-t;if(0===t&&0===this._buffer.byteLength)return new e;if(t<0||t>this._buffer.byteLength-1)throw new Error("Wrong start position: ".concat(t));var n=new e;return n._buffer=this._buffer.slice(t,t+r),n._view=new Uint8Array(n._buffer),n}},{key:"slice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._buffer.byteLength;if(0===t&&0===this._buffer.byteLength)return new e;if(t<0||t>this._buffer.byteLength-1)throw new Error("Wrong start position: ".concat(t));var n=new e;return n._buffer=this._buffer.slice(t,r),n._view=new Uint8Array(n._buffer),n}},{key:"realloc",value:function(e){var t=new ArrayBuffer(e),r=new Uint8Array(t);e>this._view.length?r.set(this._view):r.set(new Uint8Array(this._buffer,0,e)),this._buffer=t.slice(0),this._view=new Uint8Array(this._buffer)}},{key:"append",value:function(e){var t=this._buffer.byteLength,r=e._buffer.byteLength,n=e._view.slice();this.realloc(t+r),this._view.set(n,t)}},{key:"insert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._buffer.byteLength-t;return!(t>this._buffer.byteLength-1)&&(r>this._buffer.byteLength-t&&(r=this._buffer.byteLength-t),r>e._buffer.byteLength&&(r=e._buffer.byteLength),r==e._buffer.byteLength?this._view.set(e._view,t):this._view.set(e._view.slice(0,r),t),!0)}},{key:"isEqual",value:function(e){if(this._buffer.byteLength!=e._buffer.byteLength)return!1;for(var t=0;t<e._buffer.byteLength;t++)if(this.view[t]!=e.view[t])return!1;return!0}},{key:"isEqualView",value:function(e){if(e.length!=this.view.length)return!1;for(var t=0;t<e.length;t++)if(this.view[t]!=e[t])return!1;return!0}},{key:"findPattern",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];null==t&&(t=n?this.buffer.byteLength:0),t>this.buffer.byteLength&&(t=this.buffer.byteLength),n?(null==r&&(r=t),r>t&&(r=t)):(null==r&&(r=this.buffer.byteLength-t),r>this.buffer.byteLength-t&&(r=this.buffer.byteLength-t));var a=e.buffer.byteLength;if(a>r)return-1;for(var i=[],s=0;s<a;s++)i.push(e.view[s]);for(var o=0;o<=r-a;o++){for(var u=!0,l=n?t-a-o:t+o,c=0;c<a;c++)if(this.view[c+l]!=i[c]){u=!1;break}if(u)return n?t-a-o:t+a+o}return-1}},{key:"findFirstIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];null==t&&(t=n?this.buffer.byteLength:0),t>this.buffer.byteLength&&(t=this.buffer.byteLength),n?(null==r&&(r=t),r>t&&(r=t)):(null==r&&(r=this.buffer.byteLength-t),r>this.buffer.byteLength-t&&(r=this.buffer.byteLength-t));for(var a={id:-1,position:n?0:t+r,length:0},i=0;i<e.length;i++){var s=this.findPattern(e[i],t,r,n);if(-1!=s){var o=!1,u=e[i].length;n?s-u>=a.position-a.length&&(o=!0):s-u<=a.position-a.length&&(o=!0),o&&(a.position=s,a.id=i,a.length=u)}}return a}},{key:"findAllIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.buffer.byteLength-t,n=[];if(null==t&&(t=0),t>this.buffer.byteLength-1)return n;null==r&&(r=this.buffer.byteLength-t),r>this.buffer.byteLength-t&&(r=this.buffer.byteLength-t);for(var a={id:-1,position:t};;){var i=a.position;if(-1==(a=this.findFirstIn(e,a.position,r)).id)break;r-=a.position-i,n.push({id:a.id,position:a.position})}return n}},{key:"findAllPatternIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.buffer.byteLength-t;null==t&&(t=0),t>this.buffer.byteLength&&(t=this.buffer.byteLength),null==r&&(r=this.buffer.byteLength-t),r>this.buffer.byteLength-t&&(r=this.buffer.byteLength-t);var n=[],a=e.buffer.byteLength;if(a>r)return-1;for(var i=Array.from(e.view),s=0;s<=r-a;s++){for(var o=!0,u=t+s,l=0;l<a;l++)if(this.view[l+u]!=i[l]){o=!1;break}o&&(n.push(t+a+s),s+=a-1)}return n}},{key:"findFirstNotIn",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];null==r&&(r=a?this.buffer.byteLength:0),r>this.buffer.byteLength&&(r=this.buffer.byteLength),a?(null==n&&(n=r),n>r&&(n=r)):(null==n&&(n=this.buffer.byteLength-r),n>this.buffer.byteLength-r&&(n=this.buffer.byteLength-r));for(var i={left:{id:-1,position:r},right:{id:-1,position:0},value:new e},s=n;s>0;){if(i.right=this.findFirstIn(t,a?r-n+s:r+n-s,s,a),-1==i.right.id){n=s,a?r-=n:r=i.left.position,i.value=new e,i.value._buffer=this._buffer.slice(r,r+n),i.value._view=new Uint8Array(i.value._buffer);break}if(i.right.position!=(a?i.left.position-t[i.right.id].buffer.byteLength:i.left.position+t[i.right.id].buffer.byteLength)){a?(r=i.right.position+t[i.right.id].buffer.byteLength,n=i.left.position-i.right.position-t[i.right.id].buffer.byteLength):(r=i.left.position,n=i.right.position-i.left.position-t[i.right.id].buffer.byteLength),i.value=new e,i.value._buffer=this._buffer.slice(r,r+n),i.value._view=new Uint8Array(i.value._buffer);break}i.left=i.right,s-=t[i.right.id]._buffer.byteLength}if(a){var o=i.right;i.right=i.left,i.left=o}return i}},{key:"findAllNotIn",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=[];if(null==r&&(r=0),r>this.buffer.byteLength-1)return a;null==n&&(n=this.buffer.byteLength-r),n>this.buffer.byteLength-r&&(n=this.buffer.byteLength-r);var i={left:{id:-1,position:r},right:{id:-1,position:r},value:new e};do{var s=i.right.position;n-=(i=this.findFirstNotIn(t,i.right.position,n)).right.position-s,a.push({left:{id:i.left.id,position:i.left.position},right:{id:i.right.id,position:i.right.position},value:i.value})}while(-1!=i.right.id);return a}},{key:"findFirstSequence",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];null==r&&(r=a?this.buffer.byteLength:0),r>this.buffer.byteLength&&(r=this.buffer.byteLength),a?(null==n&&(n=r),n>r&&(n=r)):(null==n&&(n=this.buffer.byteLength-r),n>this.buffer.byteLength-r&&(n=this.buffer.byteLength-r));var i=this.skipNotPatterns(t,r,n,a);if(-1==i)return{position:-1,value:new e};var s=this.skipPatterns(t,i,n-(a?r-i:i-r),a);a?(r=s,n=i-s):(r=i,n=s-i);var o=new e;return o._buffer=this._buffer.slice(r,r+n),o._view=new Uint8Array(o._buffer),{position:s,value:o}}},{key:"findAllSequences",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=[];if(null==r&&(r=0),r>this.buffer.byteLength-1)return a;null==n&&(n=this.buffer.byteLength-r),n>this.buffer.byteLength-r&&(n=this.buffer.byteLength-r);var i={position:r,value:new e};do{var s=i.position;-1!=(i=this.findFirstSequence(t,i.position,n)).position&&(n-=i.position-s,a.push({position:i.position,value:i.value}))}while(-1!=i.position);return a}},{key:"findPairedPatterns",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=[];if(e.isEqual(t))return a;if(null==r&&(r=0),r>this.buffer.byteLength-1)return a;null==n&&(n=this.buffer.byteLength-r),n>this.buffer.byteLength-r&&(n=this.buffer.byteLength-r);var i=0,s=this.findAllPatternIn(e,r,n);if(0==s.length)return a;var o=this.findAllPatternIn(t,r,n);if(0==o.length)return a;for(;i<s.length&&0!=o.length;)if(s[0]!=o[0]){if(s[i]>o[0])break;for(;s[i]<o[0]&&!(++i>=s.length););a.push({left:s[i-1],right:o[0]}),s.splice(i-1,1),o.splice(0,1),i=0}else a.push({left:s[0],right:o[0]}),s.splice(0,1),o.splice(0,1);return a.sort((function(e,t){return e.left-t.left})),a}},{key:"findPairedArrays",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=[];if(null==r&&(r=0),r>this.buffer.byteLength-1)return a;null==n&&(n=this.buffer.byteLength-r),n>this.buffer.byteLength-r&&(n=this.buffer.byteLength-r);var i=0,s=this.findAllIn(e,r,n);if(0==s.length)return a;var o=this.findAllIn(t,r,n);if(0==o.length)return a;for(;i<s.length&&0!=o.length;)if(s[0].position!=o[0].position){if(s[i].position>o[0].position)break;for(;s[i].position<o[0].position&&!(++i>=s.length););a.push({left:s[i-1],right:o[0]}),s.splice(i-1,1),o.splice(0,1),i=0}else a.push({left:s[0],right:o[0]}),s.splice(0,1),o.splice(0,1);return a.sort((function(e,t){return e.left.position-t.left.position})),a}},{key:"replacePattern",value:function(e,t){var r,n,a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u={status:-1,searchPatternPositions:[],replacePatternPositions:[]};if(null==i&&(i=0),i>this.buffer.byteLength-1)return!1;if(null==s&&(s=this.buffer.byteLength-i),s>this.buffer.byteLength-i&&(s=this.buffer.byteLength-i),null==o){if(0==(n=this.findAllIn([e],i,s)).length)return u}else n=o;(r=u.searchPatternPositions).push.apply(r,g(Array.from(n,(function(e){return e.position}))));var l=e.buffer.byteLength-t.buffer.byteLength,c=new ArrayBuffer(this.view.length-n.length*l),h=new Uint8Array(c);for(h.set(new Uint8Array(this.buffer,0,i)),a=0;a<n.length;a++){var f=0==a?i:n[a-1].position;h.set(new Uint8Array(this.buffer,f,n[a].position-e.buffer.byteLength-f),f-a*l),h.set(t.view,n[a].position-e.buffer.byteLength-a*l),u.replacePatternPositions.push(n[a].position-e.buffer.byteLength-a*l)}return a--,h.set(new Uint8Array(this.buffer,n[a].position,this.buffer.byteLength-n[a].position),n[a].position-e.buffer.byteLength+t.buffer.byteLength-a*l),this.buffer=c,this.view=new Uint8Array(this.buffer),u.status=1,u}},{key:"skipPatterns",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];null==t&&(t=n?this.buffer.byteLength:0),t>this.buffer.byteLength&&(t=this.buffer.byteLength),n?(null==r&&(r=t),r>t&&(r=t)):(null==r&&(r=this.buffer.byteLength-t),r>this.buffer.byteLength-t&&(r=this.buffer.byteLength-t));for(var a=t,i=0;i<e.length;i++){for(var s=e[i].buffer.byteLength,o=n?a-s:a,u=!0,l=0;l<s;l++)if(this.view[l+o]!=e[i].view[l]){u=!1;break}if(u)if(i=-1,n){if((a-=s)<=0)return a}else if((a+=s)>=t+r)return a}return a}},{key:"skipNotPatterns",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];null==t&&(t=n?this.buffer.byteLength:0),t>this.buffer.byteLength&&(t=this.buffer.byteLength),n?(null==r&&(r=t),r>t&&(r=t)):(null==r&&(r=this.buffer.byteLength-t),r>this.buffer.byteLength-t&&(r=this.buffer.byteLength-t));for(var a=-1,i=0;i<r;i++){for(var s=0;s<e.length;s++){for(var o=e[s].buffer.byteLength,u=n?t-i-o:t+i,l=!0,c=0;c<o;c++)if(this.view[c+u]!=e[s].view[c]){l=!1;break}if(l){a=n?t-i:t+i;break}}if(-1!=a)break}return a}},{key:"buffer",set:function(e){this._buffer=e.slice(0),this._view=new Uint8Array(this._buffer)},get:function(){return this._buffer}},{key:"view",set:function(e){this._buffer=new ArrayBuffer(e.length),this._view=new Uint8Array(this._buffer),this._view.set(e)},get:function(){return this._view}},{key:"length",get:function(){return this._buffer.byteLength},set:function(e){this._buffer=new ArrayBuffer(e),this._view=new Uint8Array(this._buffer)}}]),e}(),sr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.stream=new ir,this._length=0,this.backward=!1,this._start=0,this.appendBlock=0,this.prevLength=0,this.prevStart=0;for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];switch(i){case"stream":this.stream=t.stream;break;case"backward":this.backward=t.backward,this._start=this.stream.buffer.byteLength;break;case"length":this._length=t.length;break;case"start":this._start=t.start;break;case"appendBlock":this.appendBlock=t.appendBlock;break;case"view":this.stream=new ir({view:t.view});break;case"buffer":this.stream=new ir({buffer:t.buffer});break;case"string":this.stream=new ir({string:t.string});break;case"hexstring":this.stream=new ir({hexstring:t.hexstring})}}}return s(e,[{key:"resetPosition",value:function(){this._start=this.prevStart,this._length=this.prevLength}},{key:"findPattern",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(null==t||t>this.length)&&(t=this.length);var r=this.stream.findPattern(e,this.start,this.length,this.backward);if(-1==r)return r;if(this.backward){if(r<this.start-e.buffer.byteLength-t)return-1}else if(r>this.start+e.buffer.byteLength+t)return-1;return this.start=r,r}},{key:"findFirstIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(null==t||t>this.length)&&(t=this.length);var r=this.stream.findFirstIn(e,this.start,this.length,this.backward);if(-1==r.id)return r;if(this.backward){if(r.position<this.start-e[r.id].buffer.byteLength-t)return{id:-1,position:this.backward?0:this.start+this.length}}else if(r.position>this.start+e[r.id].buffer.byteLength+t)return{id:-1,position:this.backward?0:this.start+this.length};return this.start=r.position,r}},{key:"findAllIn",value:function(e){var t=this.backward?this.start-this.length:this.start;return this.stream.findAllIn(e,t,this.length)}},{key:"findFirstNotIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(null==t||t>this._length)&&(t=this._length);var r=this._stream.findFirstNotIn(e,this._start,this._length,this.backward);if(-1==r.left.id&&-1==r.right.id)return r;if(this.backward){if(-1!=r.right.id&&r.right.position<this._start-e[r.right.id]._buffer.byteLength-t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new ir}}else if(-1!=r.left.id&&r.left.position>this._start+e[r.left.id]._buffer.byteLength+t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new ir};return this.backward?-1==r.left.id?this.start=0:this.start=r.left.position:-1==r.right.id?this.start=this._start+this._length:this.start=r.right.position,r}},{key:"findAllNotIn",value:function(e){var t=this.backward?this._start-this._length:this._start;return this._stream.findAllNotIn(e,t,this._length)}},{key:"findFirstSequence",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(null==t||t>this._length)&&(t=this._length),(null==r||r>t)&&(r=t);var n=this._stream.findFirstSequence(e,this._start,t,this.backward);if(0==n.value.buffer.byteLength)return n;if(this.backward){if(n.position<this._start-n.value._buffer.byteLength-r)return{position:-1,value:new ir}}else if(n.position>this._start+n.value._buffer.byteLength+r)return{position:-1,value:new ir};return this.start=n.position,n}},{key:"findAllSequences",value:function(e){var t=this.backward?this.start-this.length:this.start;return this.stream.findAllSequences(e,t,this.length)}},{key:"findPairedPatterns",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(null==r||r>this.length)&&(r=this.length);var n=this.backward?this.start-this.length:this.start,a=this.stream.findPairedPatterns(e,t,n,this.length);if(a.length)if(this.backward){if(a[0].right<this.start-t.buffer.byteLength-r)return[]}else if(a[0].left>this.start+e.buffer.byteLength+r)return[];return a}},{key:"findPairedArrays",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(null==r||r>this.length)&&(r=this.length);var n=this.backward?this.start-this.length:this.start,a=this.stream.findPairedArrays(e,t,n,this.length);if(a.length)if(this.backward){if(a[0].right.position<this.start-t[a[0].right.id].buffer.byteLength-r)return[]}else if(a[0].left.position>this.start+e[a[0].left.id].buffer.byteLength+r)return[];return a}},{key:"replacePattern",value:function(e,t){var r=this.backward?this.start-this.length:this.start;return this.stream.replacePattern(e,t,r,this.length)}},{key:"skipPatterns",value:function(e){var t=this.stream.skipPatterns(e,this.start,this.length,this.backward);return this.start=t,t}},{key:"skipNotPatterns",value:function(e){var t=this.stream.skipNotPatterns(e,this.start,this.length,this.backward);return-1==t?-1:(this.start=t,t)}},{key:"append",value:function(e){this._start+e._buffer.byteLength>this._stream._buffer.byteLength&&(e._buffer.byteLength>this.appendBlock&&(this.appendBlock=e._buffer.byteLength+1e3),this._stream.realloc(this._stream._buffer.byteLength+this.appendBlock)),this._stream._view.set(e._view,this._start),this._length+=2*e._buffer.byteLength,this.start=this._start+e._buffer.byteLength,this.prevLength-=2*e._buffer.byteLength}},{key:"appendView",value:function(e){this._start+e.length>this._stream._buffer.byteLength&&(e.length>this.appendBlock&&(this.appendBlock=e.length+1e3),this._stream.realloc(this._stream._buffer.byteLength+this.appendBlock)),this._stream._view.set(e,this._start),this._length+=2*e.length,this.start=this._start+e.length,this.prevLength-=2*e.length}},{key:"appendChar",value:function(e){this._start+1>this._stream._buffer.byteLength&&(1>this.appendBlock&&(this.appendBlock=1e3),this._stream.realloc(this._stream._buffer.byteLength+this.appendBlock)),this._stream._view[this._start]=e,this._length+=2,this.start=this._start+1,this.prevLength-=2}},{key:"appendUint16",value:function(e){this._start+2>this._stream._buffer.byteLength&&(2>this.appendBlock&&(this.appendBlock=1e3),this._stream.realloc(this._stream._buffer.byteLength+this.appendBlock));var t=new Uint16Array([e]),r=new Uint8Array(t.buffer);this._stream._view[this._start]=r[1],this._stream._view[this._start+1]=r[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}},{key:"appendUint24",value:function(e){this._start+3>this._stream._buffer.byteLength&&(3>this.appendBlock&&(this.appendBlock=1e3),this._stream.realloc(this._stream._buffer.byteLength+this.appendBlock));var t=new Uint32Array([e]),r=new Uint8Array(t.buffer);this._stream._view[this._start]=r[2],this._stream._view[this._start+1]=r[1],this._stream._view[this._start+2]=r[0],this._length+=6,this.start=this._start+3,this.prevLength-=6}},{key:"appendUint32",value:function(e){this._start+4>this._stream._buffer.byteLength&&(4>this.appendBlock&&(this.appendBlock=1e3),this._stream.realloc(this._stream._buffer.byteLength+this.appendBlock));var t=new Uint32Array([e]),r=new Uint8Array(t.buffer);this._stream._view[this._start]=r[3],this._stream._view[this._start+1]=r[2],this._stream._view[this._start+2]=r[1],this._stream._view[this._start+3]=r[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}},{key:"getBlock",value:function(e){var t,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._length<=0)return[];if(this._length<e&&(e=this._length),this.backward){var n=this._stream._buffer.slice(this._length-e,this._length),a=new Uint8Array(n);t=new Array(e);for(var i=0;i<e;i++)t[e-1-i]=a[i]}else{var s=this._stream._buffer.slice(this._start,this._start+e);t=Array.from(new Uint8Array(s))}return r&&(this.start+=this.backward?-1*e:e),t}},{key:"getUint16",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.getBlock(2,e);if(t.length<2)return 0;var r=new Uint16Array(1),n=new Uint8Array(r.buffer);return n[0]=t[1],n[1]=t[0],r[0]}},{key:"getInt16",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.getBlock(2,e);if(t.length<2)return 0;var r=new Int16Array(1),n=new Uint8Array(r.buffer);return n[0]=t[1],n[1]=t[0],r[0]}},{key:"getUint24",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.getBlock(3,e);if(t.length<3)return 0;for(var r=new Uint32Array(1),n=new Uint8Array(r.buffer),a=3;a>=1;a--)n[3-a]=t[a-1];return r[0]}},{key:"getUint32",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.getBlock(4,e);if(t.length<4)return 0;for(var r=new Uint32Array(1),n=new Uint8Array(r.buffer),a=3;a>=0;a--)n[3-a]=t[a];return r[0]}},{key:"getInt32",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.getBlock(4,e);if(t.length<4)return 0;for(var r=new Int32Array(1),n=new Uint8Array(r.buffer),a=3;a>=0;a--)n[3-a]=t[a];return r[0]}},{key:"stream",set:function(e){this._stream=e,this.prevLength=this._length,this._length=e._buffer.byteLength,this.prevStart=this._start,this._start=0},get:function(){return this._stream}},{key:"length",set:function(e){this.prevLength=this._length,this._length=e},get:function(){return this.appendBlock?this.start:this._length}},{key:"start",set:function(e){e>this.stream.buffer.byteLength||(this.prevStart=this._start,this.prevLength=this._length,this._length-=this.backward?this._start-e:e-this._start,this._start=e)},get:function(){return this._start}},{key:"buffer",get:function(){return this._stream._buffer.slice(0,this._length)}}]),e}(),or=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.version=ye(t,"version",e.defaultValues("version")),this.logID=ye(t,"logID",e.defaultValues("logID")),this.timestamp=ye(t,"timestamp",e.defaultValues("timestamp")),this.extensions=ye(t,"extensions",e.defaultValues("extensions")),this.hashAlgorithm=ye(t,"hashAlgorithm",e.defaultValues("hashAlgorithm")),this.signatureAlgorithm=ye(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signature=ye(t,"signature",e.defaultValues("signature")),"schema"in t&&this.fromSchema(t.schema),"stream"in t&&this.fromStream(t.stream)}var t;return s(e,[{key:"fromSchema",value:function(e){if(e instanceof He==!1)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestamp");var t=new sr({stream:new ir({buffer:e.data})});this.fromStream(t)}},{key:"fromStream",value:function(e){var t=e.getUint16();if(this.version=e.getBlock(1)[0],0===this.version){this.logID=new Uint8Array(e.getBlock(32)).buffer.slice(0),this.timestamp=new Date(be(new Uint8Array(e.getBlock(8)),8));var r=e.getUint16();switch(this.extensions=new Uint8Array(e.getBlock(r)).buffer.slice(0),e.getBlock(1)[0]){case 0:this.hashAlgorithm="none";break;case 1:this.hashAlgorithm="md5";break;case 2:this.hashAlgorithm="sha1";break;case 3:this.hashAlgorithm="sha224";break;case 4:this.hashAlgorithm="sha256";break;case 5:this.hashAlgorithm="sha384";break;case 6:this.hashAlgorithm="sha512";break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}switch(e.getBlock(1)[0]){case 0:this.signatureAlgorithm="anonymous";break;case 1:this.signatureAlgorithm="rsa";break;case 2:this.signatureAlgorithm="dsa";break;case 3:this.signatureAlgorithm="ecdsa";break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}var n=e.getUint16(),a=new Uint8Array(e.getBlock(n)).buffer.slice(0),i=De(a);if(-1===i.offset)throw new Error("Object's stream was not correct for SignedCertificateTimestamp");if(this.signature=i.result,t!==47+r+n)throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}}},{key:"toSchema",value:function(){var e=this.toStream();return new He({data:e.stream.buffer})}},{key:"toStream",value:function(){var e=new sr;e.appendUint16(47+this.extensions.byteLength+this.signature.valueBeforeDecode.byteLength),e.appendChar(this.version),e.appendView(new Uint8Array(this.logID));var t,r,n=new ArrayBuffer(8),a=new Uint8Array(n),i=we(this.timestamp.valueOf(),8);switch(a.set(new Uint8Array(i),8-i.byteLength),e.appendView(a),e.appendUint16(this.extensions.byteLength),this.extensions.byteLength&&e.appendView(new Uint8Array(this.extensions)),this.hashAlgorithm.toLowerCase()){case"none":t=0;break;case"md5":t=1;break;case"sha1":t=2;break;case"sha224":t=3;break;case"sha256":t=4;break;case"sha384":t=5;break;case"sha512":t=6;break;default:throw new Error("Incorrect data for hashAlgorithm: ".concat(this.hashAlgorithm))}switch(e.appendChar(t),this.signatureAlgorithm.toLowerCase()){case"anonymous":r=0;break;case"rsa":r=1;break;case"dsa":r=2;break;case"ecdsa":r=3;break;default:throw new Error("Incorrect data for signatureAlgorithm: ".concat(this.signatureAlgorithm))}e.appendChar(r);var s=this.signature.toBER(!1);return e.appendUint16(s.byteLength),e.appendView(new Uint8Array(s)),e}},{key:"toJSON",value:function(){return{version:this.version,logID:ke(this.logID),timestamp:this.timestamp,extensions:ke(this.extensions),hashAlgorithm:this.hashAlgorithm,signatureAlgorithm:this.signatureAlgorithm,signature:this.signature.toJSON()}}},{key:"verify",value:(t=n(regeneratorRuntime.mark((function e(t,r){var n,a,i,s,o,u,l,c,h,f,m,v,g=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=g.length>2&&void 0!==g[2]?g[2]:0,a=Ce(Ie(this.logID)),i=null,o=new sr,u=y(t),e.prev=5,u.s();case 7:if((l=u.n()).done){e.next=14;break}if((c=l.value).log_id!==a){e.next=12;break}return i=c.key,e.abrupt("break",14);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),u.e(e.t0);case 19:return e.prev=19,u.f(),e.finish(19);case 22:if(null!==i){e.next=24;break}throw new Error("Public key not found for CT with logId: ".concat(a));case 24:if(-1!==(h=De(Ee(xe(i)))).offset){e.next=27;break}throw new Error("Incorrect key value for CT Log with logId: ".concat(a));case 27:return s=new vt({schema:h.result}),o.appendChar(0),o.appendChar(0),f=new ArrayBuffer(8),m=new Uint8Array(f),v=we(this.timestamp.valueOf(),8),m.set(new Uint8Array(v),8-v.byteLength),o.appendView(m),o.appendUint16(n),0===n&&o.appendUint24(r.byteLength),o.appendView(new Uint8Array(r)),o.appendUint16(this.extensions.byteLength),0!==this.extensions.byteLength&&o.appendView(new Uint8Array(this.extensions)),e.abrupt("return",It().subtle.verifyWithPublicKey(o._stream._buffer.slice(0,o._length),{valueBlock:{valueHex:this.signature.toBER(!1)}},s,{algorithmId:""},"SHA-256"));case 41:case"end":return e.stop()}}),e,this,[[5,16,19,22]])}))),function(e,r){return t.apply(this,arguments)})}],[{key:"defaultValues",value:function(e){switch(e){case"version":return 0;case"logID":case"extensions":return new ArrayBuffer(0);case"timestamp":return new Date(0);case"hashAlgorithm":case"signatureAlgorithm":return"";case"signature":return new _e;default:throw new Error("Invalid member name for SignedCertificateTimestamp class: ".concat(e))}}}]),e}(),ur=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.timestamps=ye(t,"timestamps",e.defaultValues("timestamps")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(e){if(e instanceof at==!1)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");var t=new sr({stream:new ir({buffer:e.valueBlock.valueHex})});if(t.getUint16()!==t.length)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");for(;t.length;)this.timestamps.push(new or({stream:t}))}},{key:"toSchema",value:function(){var e,t=new sr,r=0,n=[],a=y(this.timestamps);try{for(a.s();!(e=a.n()).done;){var i=e.value.toStream();n.push(i),r+=i.stream.buffer.byteLength}}catch(e){a.e(e)}finally{a.f()}t.appendUint16(r);for(var s=0,o=n;s<o.length;s++){var u=o[s];t.appendView(u.stream.view)}return new at({valueHex:t.stream.buffer.slice(0)})}},{key:"toJSON",value:function(){return{timestamps:Array.from(this.timestamps,(function(e){return e.toJSON()}))}}}],[{key:"defaultValues",value:function(e){switch(e){case"timestamps":return[];default:throw new Error("Invalid member name for SignedCertificateTimestampList class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"timestamps":return 0===t.length;default:throw new Error("Invalid member name for SignedCertificateTimestampList class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return"optional"in t==!1&&(t.optional=!1),new at({name:t.blockName||"SignedCertificateTimestampList",optional:t.optional})}}]),e}(),lr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.templateID=ye(t,"templateID",e.defaultValues("templateID")),"templateMajorVersion"in t&&(this.templateMajorVersion=ye(t,"templateMajorVersion",e.defaultValues("templateMajorVersion"))),"templateMinorVersion"in t&&(this.templateMinorVersion=ye(t,"templateMinorVersion",e.defaultValues("templateMinorVersion"))),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["templateID","templateMajorVersion","templateMinorVersion"]);var r=Te(t,t,e.schema({names:{templateID:"templateID",templateMajorVersion:"templateMajorVersion",templateMinorVersion:"templateMinorVersion"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for CertificateTemplate");this.templateID=r.result.templateID.valueBlock.toString(),"templateMajorVersion"in r.result&&(this.templateMajorVersion=r.result.templateMajorVersion.valueBlock.valueDec),"templateMinorVersion"in r.result&&(this.templateMinorVersion=r.result.templateMinorVersion.valueBlock.valueDec)}},{key:"toSchema",value:function(){var e=[];return e.push(new tt({value:this.templateID})),"templateMajorVersion"in this&&e.push(new rt({value:this.templateMajorVersion})),"templateMinorVersion"in this&&e.push(new rt({value:this.templateMinorVersion})),new ot({value:e})}},{key:"toJSON",value:function(){var e={extnID:this.templateID};return"templateMajorVersion"in this&&(e.templateMajorVersion=this.templateMajorVersion),"templateMinorVersion"in this&&(e.templateMinorVersion=this.templateMinorVersion),e}}],[{key:"defaultValues",value:function(e){switch(e){case"templateID":return"";case"templateMajorVersion":case"templateMinorVersion":return 0;default:throw new Error("Invalid member name for CertificateTemplate class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new tt({name:t.templateID||""}),new rt({name:t.templateMajorVersion||"",optional:!0}),new rt({name:t.templateMinorVersion||"",optional:!0})]})}}]),e}(),cr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.certificateIndex=ye(t,"certificateIndex",e.defaultValues("certificateIndex")),this.keyIndex=ye(t,"keyIndex",e.defaultValues("keyIndex")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(e){if(e.constructor.blockName()!==rt.blockName())throw new Error("Object's schema was not verified against input data for CAVersion");var t=e.valueBlock.valueHex.slice(0),r=new Uint8Array(t);switch(!0){case t.byteLength<4:var n=new ArrayBuffer(4);new Uint8Array(n).set(r,4-t.byteLength),t=n.slice(0);break;case t.byteLength>4:var a=new ArrayBuffer(4);new Uint8Array(a).set(r.slice(0,4)),t=a.slice(0)}var i=t.slice(0,2),s=new Uint8Array(i),o=s[0];s[0]=s[1],s[1]=o;var u=new Uint16Array(i);this.keyIndex=u[0];var l=t.slice(2),c=new Uint8Array(l);o=c[0],c[0]=c[1],c[1]=o;var h=new Uint16Array(l);this.certificateIndex=h[0]}},{key:"toSchema",value:function(){var e=new ArrayBuffer(2);new Uint16Array(e)[0]=this.certificateIndex;var t=new Uint8Array(e),r=t[0];t[0]=t[1],t[1]=r;var n=new ArrayBuffer(2);new Uint16Array(n)[0]=this.keyIndex;var a=new Uint8Array(n);return r=a[0],a[0]=a[1],a[1]=r,new rt({valueHex:Se(n,e)})}},{key:"toJSON",value:function(){return{certificateIndex:this.certificateIndex,keyIndex:this.keyIndex}}}],[{key:"defaultValues",value:function(e){switch(e){case"certificateIndex":case"keyIndex":return 0;default:throw new Error("Invalid member name for CAVersion class: ".concat(e))}}},{key:"schema",value:function(){return new rt}}]),e}(),hr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.id=ye(t,"id",e.defaultValues("id")),"type"in t&&(this.type=ye(t,"type",e.defaultValues("type"))),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["id","type"]);var r=Te(t,t,e.schema({names:{id:"id",type:"type"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for QCStatement");this.id=r.result.id.valueBlock.toString(),"type"in r.result&&(this.type=r.result.type)}},{key:"toSchema",value:function(){var e=[new tt({value:this.id})];return"type"in this&&e.push(this.type),new ot({value:e})}},{key:"toJSON",value:function(){var e={id:this.id};return"type"in this&&(e.type=this.type.toJSON()),e}}],[{key:"defaultValues",value:function(e){switch(e){case"id":return"";case"type":return new it;default:throw new Error("Invalid member name for QCStatement class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"id":return""===t;case"type":return t instanceof it;default:throw new Error("Invalid member name for QCStatement class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new tt({name:t.id||""}),new _e({name:t.type||"",optional:!0})]})}}]),e}(),fr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.values=ye(t,"values",e.defaultValues("values")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["values"]);var r=Te(t,t,e.schema({names:{values:"values"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for QCStatements");this.values=Array.from(r.result.values,(function(e){return new hr({schema:e})}))}},{key:"toSchema",value:function(){return new ot({value:Array.from(this.values,(function(e){return e.toSchema()}))})}},{key:"toJSON",value:function(){return{extensions:Array.from(this.values,(function(e){return e.toJSON()}))}}}],[{key:"defaultValues",value:function(e){switch(e){case"values":return[];default:throw new Error("Invalid member name for QCStatements class: ".concat(e))}}},{key:"compareWithDefault",value:function(e,t){switch(e){case"values":return 0===t.length;default:throw new Error("Invalid member name for QCStatements class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new Ve({name:t.values||"",value:hr.schema(t.value||{})})]})}}]),e}(),mr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.extnID=ye(t,"extnID",e.defaultValues("extnID")),this.critical=ye(t,"critical",e.defaultValues("critical")),this.extnValue="extnValue"in t?new at({valueHex:t.extnValue}):e.defaultValues("extnValue"),"parsedValue"in t&&(this.parsedValue=ye(t,"parsedValue",e.defaultValues("parsedValue"))),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["extnID","critical","extnValue"]);var r=Te(t,t,e.schema({names:{extnID:"extnID",critical:"critical",extnValue:"extnValue"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for Extension");if(this.extnID=r.result.extnID.valueBlock.toString(),"critical"in r.result&&(this.critical=r.result.critical.valueBlock.value),this.extnValue=r.result.extnValue,-1!==(r=De(this.extnValue.valueBlock.valueHex)).offset)switch(this.extnID){case"2.5.29.9":try{this.parsedValue=new Mt({schema:r.result})}catch(e){this.parsedValue=new Mt,this.parsedValue.parsingError="Incorrectly formated SubjectDirectoryAttributes"}break;case"2.5.29.14":case"2.5.29.15":this.parsedValue=r.result;break;case"2.5.29.16":try{this.parsedValue=new Kt({schema:r.result})}catch(e){this.parsedValue=new Kt,this.parsedValue.parsingError="Incorrectly formated PrivateKeyUsagePeriod"}break;case"2.5.29.17":case"2.5.29.18":try{this.parsedValue=new _t({schema:r.result})}catch(e){this.parsedValue=new _t,this.parsedValue.parsingError="Incorrectly formated AltName"}break;case"2.5.29.19":try{this.parsedValue=new Ft({schema:r.result})}catch(e){this.parsedValue=new Ft,this.parsedValue.parsingError="Incorrectly formated BasicConstraints"}break;case"2.5.29.20":case"2.5.29.27":case"2.5.29.21":case"2.5.29.24":this.parsedValue=r.result;break;case"2.5.29.28":try{this.parsedValue=new Xt({schema:r.result})}catch(e){this.parsedValue=new Xt,this.parsedValue.parsingError="Incorrectly formated IssuingDistributionPoint"}break;case"2.5.29.29":try{this.parsedValue=new Gt({schema:r.result})}catch(e){this.parsedValue=new Gt,this.parsedValue.parsingError="Incorrectly formated GeneralNames"}break;case"2.5.29.30":try{this.parsedValue=new qt({schema:r.result})}catch(e){this.parsedValue=new qt,this.parsedValue.parsingError="Incorrectly formated NameConstraints"}break;case"2.5.29.31":case"2.5.29.46":try{this.parsedValue=new Qt({schema:r.result})}catch(e){this.parsedValue=new Qt,this.parsedValue.parsingError="Incorrectly formated CRLDistributionPoints"}break;case"2.5.29.32":case"1.3.6.1.4.1.311.21.10":try{this.parsedValue=new Zt({schema:r.result})}catch(e){this.parsedValue=new Zt,this.parsedValue.parsingError="Incorrectly formated CertificatePolicies"}break;case"2.5.29.33":try{this.parsedValue=new er({schema:r.result})}catch(e){this.parsedValue=new er,this.parsedValue.parsingError="Incorrectly formated CertificatePolicies"}break;case"2.5.29.35":try{this.parsedValue=new tr({schema:r.result})}catch(e){this.parsedValue=new tr,this.parsedValue.parsingError="Incorrectly formated AuthorityKeyIdentifier"}break;case"2.5.29.36":try{this.parsedValue=new rr({schema:r.result})}catch(e){this.parsedValue=new rr,this.parsedValue.parsingError="Incorrectly formated PolicyConstraints"}break;case"2.5.29.37":try{this.parsedValue=new nr({schema:r.result})}catch(e){this.parsedValue=new nr,this.parsedValue.parsingError="Incorrectly formated ExtKeyUsage"}break;case"2.5.29.54":this.parsedValue=r.result;break;case"1.3.6.1.5.5.7.1.1":case"1.3.6.1.5.5.7.1.11":try{this.parsedValue=new ar({schema:r.result})}catch(e){this.parsedValue=new ar,this.parsedValue.parsingError="Incorrectly formated InfoAccess"}break;case"1.3.6.1.4.1.11129.2.4.2":try{this.parsedValue=new ur({schema:r.result})}catch(e){this.parsedValue=new ur,this.parsedValue.parsingError="Incorrectly formated SignedCertificateTimestampList"}break;case"1.3.6.1.4.1.311.20.2":case"1.3.6.1.4.1.311.21.2":this.parsedValue=r.result;break;case"1.3.6.1.4.1.311.21.7":try{this.parsedValue=new lr({schema:r.result})}catch(e){this.parsedValue=new lr,this.parsedValue.parsingError="Incorrectly formated CertificateTemplate"}break;case"1.3.6.1.4.1.311.21.1":try{this.parsedValue=new cr({schema:r.result})}catch(e){this.parsedValue=new cr,this.parsedValue.parsingError="Incorrectly formated CAVersion"}break;case"1.3.6.1.5.5.7.1.3":try{this.parsedValue=new fr({schema:r.result})}catch(e){this.parsedValue=new fr,this.parsedValue.parsingError="Incorrectly formated QCStatements"}}}},{key:"toSchema",value:function(){var t=[];return t.push(new tt({value:this.extnID})),this.critical!==e.defaultValues("critical")&&t.push(new ut({value:this.critical})),t.push(this.extnValue),new ot({value:t})}},{key:"toJSON",value:function(){var t={extnID:this.extnID,extnValue:this.extnValue.toJSON()};return this.critical!==e.defaultValues("critical")&&(t.critical=this.critical),"parsedValue"in this&&"toJSON"in this.parsedValue&&(t.parsedValue=this.parsedValue.toJSON()),t}}],[{key:"defaultValues",value:function(e){switch(e){case"extnID":return"";case"critical":return!1;case"extnValue":return new at;case"parsedValue":return{};default:throw new Error("Invalid member name for Extension class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[new tt({name:t.extnID||""}),new ut({name:t.critical||"",optional:!0}),new at({name:t.extnValue||""})]})}}]),e}(),vr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.extensions=ye(t,"extensions",e.defaultValues("extensions")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["extensions"]);var r=Te(t,t,e.schema({names:{extensions:"extensions"}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for Extensions");this.extensions=Array.from(r.result.extensions,(function(e){return new mr({schema:e})}))}},{key:"toSchema",value:function(){return new ot({value:Array.from(this.extensions,(function(e){return e.toSchema()}))})}},{key:"toJSON",value:function(){return{extensions:Array.from(this.extensions,(function(e){return e.toJSON()}))}}}],[{key:"defaultValues",value:function(e){switch(e){case"extensions":return[];default:throw new Error("Invalid member name for Extensions class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=ye(e,"names",{});return new ot({optional:t,name:r.blockName||"",value:[new Ve({name:r.extensions||"",value:mr.schema(r.extension||{})})]})}}]),e}();function gr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"tbsCertificate",value:[new lt({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new rt({name:t.tbsCertificateVersion||"tbsCertificate.version"})]}),new rt({name:t.tbsCertificateSerialNumber||"tbsCertificate.serialNumber"}),ht.schema(t.signature||{names:{blockName:"tbsCertificate.signature"}}),Ot.schema(t.issuer||{names:{blockName:"tbsCertificate.issuer"}}),new ot({name:t.tbsCertificateValidity||"tbsCertificate.validity",value:[jt.schema(t.notBefore||{names:{utcTimeName:"tbsCertificate.notBefore",generalTimeName:"tbsCertificate.notBefore"}}),jt.schema(t.notAfter||{names:{utcTimeName:"tbsCertificate.notAfter",generalTimeName:"tbsCertificate.notAfter"}})]}),Ot.schema(t.subject||{names:{blockName:"tbsCertificate.subject"}}),vt.schema(t.subjectPublicKeyInfo||{names:{blockName:"tbsCertificate.subjectPublicKeyInfo"}}),new ct({name:t.tbsCertificateIssuerUniqueID||"tbsCertificate.issuerUniqueID",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new ct({name:t.tbsCertificateSubjectUniqueID||"tbsCertificate.subjectUniqueID",optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new lt({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[vr.schema(t.extensions||{names:{blockName:"tbsCertificate.extensions"}})]})]})}var dr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.tbs=ye(t,"tbs",e.defaultValues("tbs")),this.version=ye(t,"version",e.defaultValues("version")),this.serialNumber=ye(t,"serialNumber",e.defaultValues("serialNumber")),this.signature=ye(t,"signature",e.defaultValues("signature")),this.issuer=ye(t,"issuer",e.defaultValues("issuer")),this.notBefore=ye(t,"notBefore",e.defaultValues("notBefore")),this.notAfter=ye(t,"notAfter",e.defaultValues("notAfter")),this.subject=ye(t,"subject",e.defaultValues("subject")),this.subjectPublicKeyInfo=ye(t,"subjectPublicKeyInfo",e.defaultValues("subjectPublicKeyInfo")),"issuerUniqueID"in t&&(this.issuerUniqueID=ye(t,"issuerUniqueID",e.defaultValues("issuerUniqueID"))),"subjectUniqueID"in t&&(this.subjectUniqueID=ye(t,"subjectUniqueID",e.defaultValues("subjectUniqueID"))),"extensions"in t&&(this.extensions=ye(t,"extensions",e.defaultValues("extensions"))),this.signatureAlgorithm=ye(t,"signatureAlgorithm",e.defaultValues("signatureAlgorithm")),this.signatureValue=ye(t,"signatureValue",e.defaultValues("signatureValue")),"schema"in t&&this.fromSchema(t.schema)}return s(e,[{key:"fromSchema",value:function(t){Le(t,["tbsCertificate","tbsCertificate.extensions","tbsCertificate.version","tbsCertificate.serialNumber","tbsCertificate.signature","tbsCertificate.issuer","tbsCertificate.notBefore","tbsCertificate.notAfter","tbsCertificate.subject","tbsCertificate.subjectPublicKeyInfo","tbsCertificate.issuerUniqueID","tbsCertificate.subjectUniqueID","signatureAlgorithm","signatureValue"]);var r=Te(t,t,e.schema({names:{tbsCertificate:{names:{extensions:{names:{extensions:"tbsCertificate.extensions"}}}}}}));if(!1===r.verified)throw new Error("Object's schema was not verified against input data for Certificate");this.tbs=r.result.tbsCertificate.valueBeforeDecode,"tbsCertificate.version"in r.result&&(this.version=r.result["tbsCertificate.version"].valueBlock.valueDec),this.serialNumber=r.result["tbsCertificate.serialNumber"],this.signature=new ht({schema:r.result["tbsCertificate.signature"]}),this.issuer=new Ot({schema:r.result["tbsCertificate.issuer"]}),this.notBefore=new jt({schema:r.result["tbsCertificate.notBefore"]}),this.notAfter=new jt({schema:r.result["tbsCertificate.notAfter"]}),this.subject=new Ot({schema:r.result["tbsCertificate.subject"]}),this.subjectPublicKeyInfo=new vt({schema:r.result["tbsCertificate.subjectPublicKeyInfo"]}),"tbsCertificate.issuerUniqueID"in r.result&&(this.issuerUniqueID=r.result["tbsCertificate.issuerUniqueID"].valueBlock.valueHex),"tbsCertificate.subjectUniqueID"in r.result&&(this.subjectUniqueID=r.result["tbsCertificate.subjectUniqueID"].valueBlock.valueHex),"tbsCertificate.extensions"in r.result&&(this.extensions=Array.from(r.result["tbsCertificate.extensions"],(function(e){return new mr({schema:e})}))),this.signatureAlgorithm=new ht({schema:r.result.signatureAlgorithm}),this.signatureValue=r.result.signatureValue}},{key:"encodeTBS",value:function(){var t=[];return"version"in this&&this.version!==e.defaultValues("version")&&t.push(new lt({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new rt({value:this.version})]})),t.push(this.serialNumber),t.push(this.signature.toSchema()),t.push(this.issuer.toSchema()),t.push(new ot({value:[this.notBefore.toSchema(),this.notAfter.toSchema()]})),t.push(this.subject.toSchema()),t.push(this.subjectPublicKeyInfo.toSchema()),"issuerUniqueID"in this&&t.push(new ct({optional:!0,idBlock:{tagClass:3,tagNumber:1},valueHex:this.issuerUniqueID})),"subjectUniqueID"in this&&t.push(new ct({optional:!0,idBlock:{tagClass:3,tagNumber:2},valueHex:this.subjectUniqueID})),"extensions"in this&&t.push(new lt({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[new ot({value:Array.from(this.extensions,(function(e){return e.toSchema()}))})]})),new ot({value:t})}},{key:"toSchema",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r={};if(!1===t){if(0===this.tbs.length)return e.schema().value[0];r=De(this.tbs).result}else r=this.encodeTBS();return new ot({value:[r,this.signatureAlgorithm.toSchema(),this.signatureValue]})}},{key:"toJSON",value:function(){var t={tbs:ke(this.tbs,0,this.tbs.byteLength),serialNumber:this.serialNumber.toJSON(),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),notBefore:this.notBefore.toJSON(),notAfter:this.notAfter.toJSON(),subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return"version"in this&&this.version!==e.defaultValues("version")&&(t.version=this.version),"issuerUniqueID"in this&&(t.issuerUniqueID=ke(this.issuerUniqueID,0,this.issuerUniqueID.byteLength)),"subjectUniqueID"in this&&(t.subjectUniqueID=ke(this.subjectUniqueID,0,this.subjectUniqueID.byteLength)),"extensions"in this&&(t.extensions=Array.from(this.extensions,(function(e){return e.toJSON()}))),t}},{key:"getPublicKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return It().subtle.getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,e)}},{key:"getKeyHash",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SHA-1",t=Et();return void 0===t?Promise.reject("Unable to create WebCrypto object"):t.digest({name:e},new Uint8Array(this.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex))}},{key:"sign",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1";if(void 0===e)return Promise.reject("Need to provide a private key for signing");var n,a=Promise.resolve(),i=It();return a=(a=(a=(a=(a=a.then((function(){return i.subtle.getSignatureParameters(e,r)}))).then((function(e){n=e.parameters,t.signature=e.signatureAlgorithm,t.signatureAlgorithm=e.signatureAlgorithm}))).then((function(){t.tbs=t.encodeTBS().toBER(!1)}))).then((function(){return i.subtle.signWithPrivateKey(t.tbs,e,n)}))).then((function(e){t.signatureValue=new nt({valueHex:e})}))}},{key:"verify",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={};return null!==e?t=e.subjectPublicKeyInfo:this.issuer.isEqual(this.subject)&&(t=this.subjectPublicKeyInfo),t instanceof vt==!1?Promise.reject("Please provide issuer certificate as a parameter"):It().subtle.verifyWithPublicKey(this.tbs,this.signatureValue,t,this.signatureAlgorithm)}}],[{key:"defaultValues",value:function(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 0;case"serialNumber":return new rt;case"signature":return new ht;case"issuer":return new Ot;case"notBefore":case"notAfter":return new jt;case"subject":return new Ot;case"subjectPublicKeyInfo":return new vt;case"issuerUniqueID":case"subjectUniqueID":return new ArrayBuffer(0);case"extensions":return[];case"signatureAlgorithm":return new ht;case"signatureValue":return new nt;default:throw new Error("Invalid member name for Certificate class: ".concat(e))}}},{key:"schema",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ye(e,"names",{});return new ot({name:t.blockName||"",value:[gr(t.tbsCertificate),ht.schema(t.signatureAlgorithm||{names:{blockName:"signatureAlgorithm"}}),new nt({name:t.signatureValue||"signatureValue"})]})}}]),e}(),pr=pe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.fromBER=ve,t.compareSchema=ge,t.verifySchema=function(e,t){if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};var r=ve(e);if(-1===r.offset)return{verified:!1,result:r.result};return ge(r.result,r.result,t)},t.fromJSON=function(e){},t.RawData=t.Repeated=t.Any=t.Choice=t.TIME=t.Duration=t.DateTime=t.TimeOfDay=t.DATE=t.GeneralizedTime=t.UTCTime=t.CharacterString=t.GeneralString=t.VisibleString=t.GraphicString=t.IA5String=t.VideotexString=t.TeletexString=t.PrintableString=t.NumericString=t.UniversalString=t.BmpString=t.RelativeObjectIdentifier=t.Utf8String=t.ObjectIdentifier=t.Enumerated=t.Integer=t.BitString=t.OctetString=t.Null=t.Set=t.Sequence=t.Boolean=t.EndOfContent=t.Constructed=t.Primitive=t.BaseBlock=t.ValueBlock=t.HexBlock=void 0;var r=[new Uint8Array([1])],n=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.blockLength=(0,Oe.getParametersValue)(t,"blockLength",0),this.error=(0,Oe.getParametersValue)(t,"error",""),this.warnings=(0,Oe.getParametersValue)(t,"warnings",[]),this.valueBeforeDecode="valueBeforeDecode"in t?t.valueBeforeDecode.slice(0):new ArrayBuffer(0)}return s(e,[{key:"toJSON",value:function(){return{blockName:this.constructor.blockName(),blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:(0,Oe.bufferToHexCodes)(this.valueBeforeDecode,0,this.valueBeforeDecode.byteLength)}}}],[{key:"blockName",value:function(){return"baseBlock"}}]),e}(),i=function(e){return function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).isHexOnly=(0,Oe.getParametersValue)(n,"isHexOnly",!1),e.valueHex="valueHex"in n?n.valueHex.slice(0):new ArrayBuffer(0),e}return s(r,[{key:"fromBER",value:function(e,t,r){return!1===(0,Oe.checkBufferParams)(this,e,t,r)?-1:0===new Uint8Array(e,t,r).length?(this.warnings.push("Zero buffer length"),t):(this.valueHex=e.slice(t,t+r),this.blockLength=r,t+r)}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!0!==this.isHexOnly?(this.error='Flag "isHexOnly" is not set, abort',new ArrayBuffer(0)):!0===e?new ArrayBuffer(this.valueHex.byteLength):this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.isHexOnly=this.isHexOnly,e.valueHex=(0,Oe.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"hexBlock"}}]),r}(e)};t.HexBlock=i;var l=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),e=t.call(this),"idBlock"in n?(e.isHexOnly=(0,Oe.getParametersValue)(n.idBlock,"isHexOnly",!1),e.valueHex=(0,Oe.getParametersValue)(n.idBlock,"valueHex",new ArrayBuffer(0)),e.tagClass=(0,Oe.getParametersValue)(n.idBlock,"tagClass",-1),e.tagNumber=(0,Oe.getParametersValue)(n.idBlock,"tagNumber",-1),e.isConstructed=(0,Oe.getParametersValue)(n.idBlock,"isConstructed",!1)):(e.tagClass=-1,e.tagNumber=-1,e.isConstructed=!1),e}return s(r,[{key:"toBER",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=0;switch(this.tagClass){case 1:n|=0;break;case 2:n|=64;break;case 3:n|=128;break;case 4:n|=192;break;default:return this.error="Unknown tag class",new ArrayBuffer(0)}if(this.isConstructed&&(n|=32),this.tagNumber<31&&!this.isHexOnly){if(e=new ArrayBuffer(1),t=new Uint8Array(e),!r){var a=this.tagNumber;n|=a&=31,t[0]=n}return e}if(!1===this.isHexOnly){var i=(0,Oe.utilToBase)(this.tagNumber,7),s=new Uint8Array(i),o=i.byteLength;if(e=new ArrayBuffer(o+1),(t=new Uint8Array(e))[0]=31|n,!r){for(var u=0;u<o-1;u++)t[u+1]=128|s[u];t[o]=s[o-1]}return e}if(e=new ArrayBuffer(this.valueHex.byteLength+1),(t=new Uint8Array(e))[0]=31|n,!1===r){for(var l=new Uint8Array(this.valueHex),c=0;c<l.length-1;c++)t[c+1]=128|l[c];t[this.valueHex.byteLength]=l[l.length-1]}return e}},{key:"fromBER",value:function(e,t,r){if(!1===(0,Oe.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.error="Zero buffer length",-1;switch(192&n[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=32==(32&n[0]),this.isHexOnly=!1;var a=31&n[0];if(31!==a)this.tagNumber=a,this.blockLength=1;else{var i=1;this.valueHex=new ArrayBuffer(255);for(var s=255,o=new Uint8Array(this.valueHex);128&n[i];){if(o[i-1]=127&n[i],++i>=n.length)return this.error="End of input reached before message was fully decoded",-1;if(i===s){s+=255;for(var u=new ArrayBuffer(s),l=new Uint8Array(u),c=0;c<o.length;c++)l[c]=o[c];this.valueHex=new ArrayBuffer(s),o=new Uint8Array(this.valueHex)}}this.blockLength=i+1,o[i-1]=127&n[i];for(var h=new ArrayBuffer(i),f=new Uint8Array(h),m=0;m<i;m++)f[m]=o[m];this.valueHex=new ArrayBuffer(i),(o=new Uint8Array(this.valueHex)).set(f),this.blockLength<=9?this.tagNumber=(0,Oe.utilFromBase)(o,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.tagClass=this.tagClass,e.tagNumber=this.tagNumber,e.isConstructed=this.isConstructed,e}}],[{key:"blockName",value:function(){return"identificationBlock"}}]),r}(i(n)),c=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),e=t.call(this),"lenBlock"in n?(e.isIndefiniteForm=(0,Oe.getParametersValue)(n.lenBlock,"isIndefiniteForm",!1),e.longFormUsed=(0,Oe.getParametersValue)(n.lenBlock,"longFormUsed",!1),e.length=(0,Oe.getParametersValue)(n.lenBlock,"length",0)):(e.isIndefiniteForm=!1,e.longFormUsed=!1,e.length=0),e}return s(r,[{key:"fromBER",value:function(e,t,r){if(!1===(0,Oe.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.error="Zero buffer length",-1;if(255===n[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===n[0],!0===this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&n[0]),!1===this.longFormUsed)return this.length=n[0],this.blockLength=1,t+this.blockLength;var a=127&n[0];if(a>8)return this.error="Too big integer",-1;if(a+1>n.length)return this.error="End of input reached before message was fully decoded",-1;for(var i=new Uint8Array(a),s=0;s<a;s++)i[s]=n[s+1];return 0===i[a-1]&&this.warnings.push("Needlessly long encoded length"),this.length=(0,Oe.utilFromBase)(i,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unneccesary usage of long length form"),this.blockLength=a+1,t+this.blockLength}},{key:"toBER",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return e=new ArrayBuffer(1),!1===r&&((t=new Uint8Array(e))[0]=128),e;if(!0===this.longFormUsed){var n=(0,Oe.utilToBase)(this.length,8);if(n.byteLength>127)return this.error="Too big length",new ArrayBuffer(0);if(e=new ArrayBuffer(n.byteLength+1),!0===r)return e;var a=new Uint8Array(n);(t=new Uint8Array(e))[0]=128|n.byteLength;for(var i=0;i<n.byteLength;i++)t[i+1]=a[i];return e}return e=new ArrayBuffer(1),!1===r&&((t=new Uint8Array(e))[0]=this.length),e}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.blockName=this.constructor.blockName(),e.isIndefiniteForm=this.isIndefiniteForm,e.longFormUsed=this.longFormUsed,e.length=this.length,e}}],[{key:"blockName",value:function(){return"lengthBlock"}}]),r}(n),h=function(e){o(r,e);var t=f(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),t.call(this,e)}return s(r,[{key:"fromBER",value:function(e,t,r){throw TypeError('User need to make a specific function in a class which extends "ValueBlock"')}},{key:"toBER",value:function(){throw TypeError('User need to make a specific function in a class which extends "ValueBlock"')}}],[{key:"blockName",value:function(){return"valueBlock"}}]),r}(n);t.ValueBlock=h;var v=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;return a(this,r),e=t.call(this,n),"name"in n&&(e.name=n.name),"optional"in n&&(e.optional=n.optional),"primitiveSchema"in n&&(e.primitiveSchema=n.primitiveSchema),e.idBlock=new l(n),e.lenBlock=new c(n),e.valueBlock=new i(n),e}return s(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"toBER",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.idBlock.toBER(t),n=this.valueBlock.toBER(!0);this.lenBlock.length=n.byteLength;var a,i=this.lenBlock.toBER(t);if(e=(0,Oe.utilConcatBuf)(r,i),a=!1===t?this.valueBlock.toBER(t):new ArrayBuffer(this.lenBlock.length),e=(0,Oe.utilConcatBuf)(e,a),!0===this.lenBlock.isIndefiniteForm){var s=new ArrayBuffer(2);if(!1===t){var o=new Uint8Array(s);o[0]=0,o[1]=0}e=(0,Oe.utilConcatBuf)(e,s)}return e}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.idBlock=this.idBlock.toJSON(),e.lenBlock=this.lenBlock.toJSON(),e.valueBlock=this.valueBlock.toJSON(),"name"in this&&(e.name=this.name),"optional"in this&&(e.optional=this.optional),"primitiveSchema"in this&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}}],[{key:"blockName",value:function(){return"BaseBlock"}}]),r}(n);t.BaseBlock=v;var g=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).valueHex="valueHex"in n?n.valueHex.slice(0):new ArrayBuffer(0),e.isHexOnly=(0,Oe.getParametersValue)(n,"isHexOnly",!0),e}return s(r,[{key:"fromBER",value:function(e,t,r){if(!1===(0,Oe.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);if(0===n.length)return this.warnings.push("Zero buffer length"),t;this.valueHex=new ArrayBuffer(n.length);for(var a=new Uint8Array(this.valueHex),i=0;i<n.length;i++)a[i]=n[i];return this.blockLength=r,t+r}},{key:"toBER",value:function(){return this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.valueHex=(0,Oe.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e.isHexOnly=this.isHexOnly,e}}],[{key:"blockName",value:function(){return"PrimitiveValueBlock"}}]),r}(h),d=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n,g)).idBlock.isConstructed=!1,e}return s(r,null,[{key:"blockName",value:function(){return"PRIMITIVE"}}]),r}(v);t.Primitive=d;var p=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).value=(0,Oe.getParametersValue)(n,"value",[]),e.isIndefiniteForm=(0,Oe.getParametersValue)(n,"isIndefiniteForm",!1),e}return s(r,[{key:"fromBER",value:function(e,t,r){var n=t,a=r;if(!1===(0,Oe.checkBufferParams)(this,e,t,r))return-1;if(0===new Uint8Array(e,t,r).length)return this.warnings.push("Zero buffer length"),t;for(var i,s,o=t;i=this.isIndefiniteForm,s=r,(!0===i?1:s)>0;){var u=me(e,o,r);if(-1===u.offset)return this.error=u.result.error,this.warnings.concat(u.result.warnings),-1;if(o=u.offset,this.blockLength+=u.result.blockLength,r-=u.result.blockLength,this.value.push(u.result),!0===this.isIndefiniteForm&&u.result.constructor.blockName()===b.blockName())break}return!0===this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.blockName()===b.blockName()?this.value.pop():this.warnings.push("No EndOfContent block encoded")),this.valueBeforeDecode=e.slice(n,n+a),o}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);t=(0,Oe.utilConcatBuf)(t,n)}return t}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}e.isIndefiniteForm=this.isIndefiniteForm,e.value=[];for(var t=0;t<this.value.length;t++)e.value.push(this.value[t].toJSON());return e}}],[{key:"blockName",value:function(){return"ConstructedValueBlock"}}]),r}(h),y=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n,p)).idBlock.isConstructed=!0,e}return s(r,[{key:"fromBER",value:function(e,t,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}}],[{key:"blockName",value:function(){return"CONSTRUCTED"}}]),r}(v);t.Constructed=y;var k=function(e){o(r,e);var t=f(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),t.call(this,e)}return s(r,[{key:"fromBER",value:function(e,t,r){return t}},{key:"toBER",value:function(){return new ArrayBuffer(0)}}],[{key:"blockName",value:function(){return"EndOfContentValueBlock"}}]),r}(h),b=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n,k)).idBlock.tagClass=1,e.idBlock.tagNumber=0,e}return s(r,null,[{key:"blockName",value:function(){return"EndOfContent"}}]),r}(v);t.EndOfContent=b;var w=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(a(this,r),(e=t.call(this,n)).value=(0,Oe.getParametersValue)(n,"value",!1),e.isHexOnly=(0,Oe.getParametersValue)(n,"isHexOnly",!1),"valueHex"in n)e.valueHex=n.valueHex.slice(0);else if(e.valueHex=new ArrayBuffer(1),!0===e.value){var i=new Uint8Array(e.valueHex);i[0]=255}return e}return s(r,[{key:"fromBER",value:function(e,t,r){if(!1===(0,Oe.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);r>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,this.valueHex=new ArrayBuffer(n.length);for(var a=new Uint8Array(this.valueHex),i=0;i<n.length;i++)a[i]=n[i];return 0!==Oe.utilDecodeTC.call(this)?this.value=!0:this.value=!1,this.blockLength=r,t+r}},{key:"toBER",value:function(){return this.valueHex}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e.isHexOnly=this.isHexOnly,e.valueHex=(0,Oe.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"BooleanValueBlock"}}]),r}(h),S=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n,w)).idBlock.tagClass=1,e.idBlock.tagNumber=1,e}return s(r,null,[{key:"blockName",value:function(){return"Boolean"}}]),r}(v);t.Boolean=S;var N=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=16,e}return s(r,null,[{key:"blockName",value:function(){return"Sequence"}}]),r}(y);t.Sequence=N;var A=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=17,e}return s(r,null,[{key:"blockName",value:function(){return"Set"}}]),r}(y);t.Set=A;var B=function(e){o(r,e);var t=f(r);function r(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,i,n)).idBlock.tagClass=1,e.idBlock.tagNumber=5,e}return s(r,[{key:"fromBER",value:function(e,t,r){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=r,t+r>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+r}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(2);if(!0===e)return t;var r=new Uint8Array(t);return r[0]=5,r[1]=0,t}}],[{key:"blockName",value:function(){return"Null"}}]),r}(v);t.Null=B;var C=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).isConstructed=(0,Oe.getParametersValue)(n,"isConstructed",!1),e}return s(r,[{key:"fromBER",value:function(e,t,n){var a=0;if(!0===this.isConstructed){if(this.isHexOnly=!1,-1===(a=p.prototype.fromBER.call(this,e,t,n)))return a;for(var i=0;i<this.value.length;i++){var s=this.value[i].constructor.blockName();if(s===b.blockName()){if(!0===this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(s!==x.blockName())return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,a=m(u(r.prototype),"fromBER",this).call(this,e,t,n),this.blockLength=n;return a}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===this.isConstructed)return p.prototype.toBER.call(this,e);var t=new ArrayBuffer(this.valueHex.byteLength);return!0===e||0===this.valueHex.byteLength?t:t=this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=(0,Oe.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"OctetStringValueBlock"}}]),r}(i(p)),x=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n,C)).idBlock.tagClass=1,e.idBlock.tagNumber=4,e}return s(r,[{key:"fromBER",value:function(e,t,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===n?(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),t):m(u(r.prototype),"fromBER",this).call(this,e,t,n)}},{key:"isEqual",value:function(e){return e instanceof r!=!1&&JSON.stringify(this)===JSON.stringify(e)}}],[{key:"blockName",value:function(){return"OctetString"}}]),r}(v);t.OctetString=x;var I=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).unusedBits=(0,Oe.getParametersValue)(n,"unusedBits",0),e.isConstructed=(0,Oe.getParametersValue)(n,"isConstructed",!1),e.blockLength=e.valueHex.byteLength,e}return s(r,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;var n=-1;if(!0===this.isConstructed){if(-1===(n=p.prototype.fromBER.call(this,e,t,r)))return n;for(var a=0;a<this.value.length;a++){var i=this.value[a].constructor.blockName();if(i===b.blockName()){if(!0===this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(i!==E.blockName())return this.error="BIT STRING may consists of BIT STRINGs only",-1;if(this.unusedBits>0&&this.value[a].valueBlock.unusedBits>0)return this.error='Usign of "unused bits" inside constructive BIT STRING allowed for least one only',-1;if(this.unusedBits=this.value[a].valueBlock.unusedBits,this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1}return n}if(!1===(0,Oe.checkBufferParams)(this,e,t,r))return-1;var s=new Uint8Array(e,t,r);if(this.unusedBits=s[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;this.valueHex=new ArrayBuffer(s.length-1);for(var o=new Uint8Array(this.valueHex),u=0;u<r-1;u++)o[u]=s[u+1];return this.blockLength=s.length,t+r}},{key:"toBER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===this.isConstructed)return p.prototype.toBER.call(this,e);if(!0===e)return new ArrayBuffer(this.valueHex.byteLength+1);if(0===this.valueHex.byteLength)return new ArrayBuffer(0);var t=new Uint8Array(this.valueHex),r=new ArrayBuffer(this.valueHex.byteLength+1),n=new Uint8Array(r);n[0]=this.unusedBits;for(var a=0;a<this.valueHex.byteLength;a++)n[a+1]=t[a];return r}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.unusedBits=this.unusedBits,e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=(0,Oe.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength),e}}],[{key:"blockName",value:function(){return"BitStringValueBlock"}}]),r}(i(p)),E=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n,I)).idBlock.tagClass=1,e.idBlock.tagNumber=3,e}return s(r,[{key:"fromBER",value:function(e,t,n){return 0===n?t:(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,m(u(r.prototype),"fromBER",this).call(this,e,t,n))}},{key:"isEqual",value:function(e){return e instanceof r!=!1&&JSON.stringify(this)===JSON.stringify(e)}}],[{key:"blockName",value:function(){return"BitString"}}]),r}(v);t.BitString=E;var P=function(e){o(n,e);var t=f(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,n),e=t.call(this,r),"value"in r&&(e.valueDec=r.value),e}return s(n,[{key:"fromDER",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=this.fromBER(e,t,r);if(-1===a)return a;var i=new Uint8Array(this._valueHex);if(0===i[0]&&0!=(128&i[1])){var s=new ArrayBuffer(this._valueHex.byteLength-1),o=new Uint8Array(s);o.set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=s.slice(0)}else if(0!==n&&this._valueHex.byteLength<n){n-this._valueHex.byteLength>1&&(n=this._valueHex.byteLength+1);var u=new ArrayBuffer(n),l=new Uint8Array(u);l.set(i,n-this._valueHex.byteLength),this._valueHex=u.slice(0)}return a}},{key:"toDER",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new Uint8Array(this._valueHex);switch(!0){case 0!=(128&t[0]):var r=new ArrayBuffer(this._valueHex.byteLength+1),n=new Uint8Array(r);n[0]=0,n.set(t,1),this._valueHex=r.slice(0);break;case 0===t[0]&&0==(128&t[1]):var a=new ArrayBuffer(this._valueHex.byteLength-1),i=new Uint8Array(a);i.set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=a.slice(0)}return this.toBER(e)}},{key:"fromBER",value:function(e,t,r){var a=m(u(n.prototype),"fromBER",this).call(this,e,t,r);return-1===a?a:(this.blockLength=r,t+r)}},{key:"toBER",value:function(){return this.valueHex.slice(0)}},{key:"toJSON",value:function(){var e={};try{e=m(u(n.prototype),"toJSON",this).call(this)}catch(e){}return e.valueDec=this.valueDec,e}},{key:"toString",value:function(){function e(e,t){for(var r=new Uint8Array([0]),n=new Uint8Array(e),a=new Uint8Array(t),i=n.slice(0),s=i.length-1,o=a.slice(0),u=o.length-1,l=0,c=0,h=u<s?s:u;h>=0;h--,c++){switch(!0){case c<o.length:l=i[s-c]+o[u-c]+r[0];break;default:l=i[s-c]+r[0]}switch(r[0]=l/10,!0){case c>=i.length:i=(0,Oe.utilConcatView)(new Uint8Array([l%10]),i);break;default:i[s-c]=l%10}}return r[0]>0&&(i=(0,Oe.utilConcatView)(r,i)),i.slice(0)}function t(e){if(e>=r.length)for(var t=r.length;t<=e;t++){for(var n=new Uint8Array([0]),a=r[t-1].slice(0),i=a.length-1;i>=0;i--){var s=new Uint8Array([(a[i]<<1)+n[0]]);n[0]=s[0]/10,a[i]=s[0]%10}n[0]>0&&(a=(0,Oe.utilConcatView)(n,a)),r.push(a)}return r[e]}function n(e,t){for(var r,n=0,a=new Uint8Array(e),i=new Uint8Array(t),s=a.slice(0),o=s.length-1,u=i.slice(0),l=u.length-1,c=0,h=l;h>=0;h--,c++)switch(r=s[o-c]-u[l-c]-n,!0){case r<0:n=1,s[o-c]=r+10;break;default:n=0,s[o-c]=r}if(n>0)for(var f=o-l+1;f>=0;f--,c++){if(!((r=s[o-c]-n)<0)){n=0,s[o-c]=r;break}n=1,s[o-c]=r+10}return s.slice()}for(var a,i=8*this._valueHex.byteLength-1,s=new Uint8Array(8*this._valueHex.byteLength/3),o=0,u=new Uint8Array(this._valueHex),l="",c=!1,h=this._valueHex.byteLength-1;h>=0;h--){a=u[h];for(var f=0;f<8;f++){if(1==(1&a))switch(o){case i:s=n(t(o),s),l="-";break;default:s=e(s,t(o))}o++,a>>=1}}for(var m=0;m<s.length;m++)s[m]&&(c=!0),c&&(l+="0123456789".charAt(s[m]));return!1===c&&(l+="0123456789".charAt(0)),l}},{key:"valueHex",set:function(e){this._valueHex=e.slice(0),e.byteLength>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,e.byteLength>0&&(this._valueDec=Oe.utilDecodeTC.call(this)))},get:function(){return this._valueHex}},{key:"valueDec",set:function(e){this._valueDec=e,this.isHexOnly=!1,this._valueHex=(0,Oe.utilEncodeTC)(e)},get:function(){return this._valueDec}}],[{key:"blockName",value:function(){return"IntegerValueBlock"}}]),n}(i(h)),R=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n,P)).idBlock.tagClass=1,e.idBlock.tagNumber=2,e}return s(r,[{key:"isEqual",value:function(e){return e instanceof r?this.valueBlock.isHexOnly&&e.valueBlock.isHexOnly?(0,Oe.isEqualBuffer)(this.valueBlock.valueHex,e.valueBlock.valueHex):this.valueBlock.isHexOnly===e.valueBlock.isHexOnly&&this.valueBlock.valueDec===e.valueBlock.valueDec:e instanceof ArrayBuffer&&(0,Oe.isEqualBuffer)(this.valueBlock.valueHex,e)}},{key:"convertToDER",value:function(){var e=new r({valueHex:this.valueBlock.valueHex});return e.valueBlock.toDER(),e}},{key:"convertFromDER",value:function(){var e=this.valueBlock.valueHex.byteLength%2?this.valueBlock.valueHex.byteLength+1:this.valueBlock.valueHex.byteLength,t=new r({valueHex:this.valueBlock.valueHex});return t.valueBlock.fromDER(t.valueBlock.valueHex,0,t.valueBlock.valueHex.byteLength,e),t}}],[{key:"blockName",value:function(){return"Integer"}}]),r}(v);t.Integer=R;var L=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=10,e}return s(r,null,[{key:"blockName",value:function(){return"Enumerated"}}]),r}(R);t.Enumerated=L;var O=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).valueDec=(0,Oe.getParametersValue)(n,"valueDec",-1),e.isFirstSid=(0,Oe.getParametersValue)(n,"isFirstSid",!1),e}return s(r,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;if(!1===(0,Oe.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);this.valueHex=new ArrayBuffer(r);for(var a=new Uint8Array(this.valueHex),i=0;i<r&&(a[i]=127&n[i],this.blockLength++,0!=(128&n[i]));i++);for(var s=new ArrayBuffer(this.blockLength),o=new Uint8Array(s),u=0;u<this.blockLength;u++)o[u]=a[u];return this.valueHex=s.slice(0),a=new Uint8Array(this.valueHex),0!=(128&n[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===a[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=(0,Oe.utilFromBase)(a,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}},{key:"toBER",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isHexOnly){if(!0===r)return new ArrayBuffer(this.valueHex.byteLength);var n=new Uint8Array(this.valueHex);e=new ArrayBuffer(this.blockLength),t=new Uint8Array(e);for(var a=0;a<this.blockLength-1;a++)t[a]=128|n[a];return t[this.blockLength-1]=n[this.blockLength-1],e}var i=(0,Oe.utilToBase)(this.valueDec,7);if(0===i.byteLength)return this.error="Error during encoding SID value",new ArrayBuffer(0);if(e=new ArrayBuffer(i.byteLength),!1===r){var s=new Uint8Array(i);t=new Uint8Array(e);for(var o=0;o<i.byteLength-1;o++)t[o]=128|s[o];t[i.byteLength-1]=s[i.byteLength-1]}return e}},{key:"toString",value:function(){var e="";if(!0===this.isHexOnly)e=(0,Oe.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength);else if(this.isFirstSid){var t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.valueDec=this.valueDec,e.isFirstSid=this.isFirstSid,e}}],[{key:"blockName",value:function(){return"sidBlock"}}]),r}(i(n)),U=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).fromString((0,Oe.getParametersValue)(n,"value","")),e}return s(r,[{key:"fromBER",value:function(e,t,r){for(var n=t;r>0;){var a=new O;if(-1===(n=a.fromBER(e,n,r)))return this.blockLength=0,this.error=a.error,n;0===this.value.length&&(a.isFirstSid=!0),this.blockLength+=a.blockLength,r-=a.blockLength,this.value.push(a)}return n}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);if(0===n.byteLength)return this.error=this.value[r].error,new ArrayBuffer(0);t=(0,Oe.utilConcatBuf)(t,n)}return t}},{key:"fromString",value:function(e){this.value=[];var t=0,r=0,n="",a=!1;do{if(n=-1===(r=e.indexOf(".",t))?e.substr(t):e.substr(t,r-t),t=r+1,a){var i=this.value[0],s=0;switch(i.valueDec){case 0:break;case 1:s=40;break;case 2:s=80;break;default:return this.value=[],!1}var o=parseInt(n,10);if(isNaN(o))return!0;i.valueDec=o+s,a=!1}else{var u=new O;if(u.valueDec=parseInt(n,10),isNaN(u.valueDec))return!0;0===this.value.length&&(u.isFirstSid=!0,a=!0),this.value.push(u)}}while(-1!==r);return!0}},{key:"toString",value:function(){for(var e="",t=!1,r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;var n=this.value[r].toString();0!==r&&(e="".concat(e,".")),t?(n="{".concat(n,"}"),this.value[r].isFirstSid?e="2.{".concat(n," - 80}"):e+=n):e+=n}return e}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}e.value=this.toString(),e.sidArray=[];for(var t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}],[{key:"blockName",value:function(){return"ObjectIdentifierValueBlock"}}]),r}(h),D=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n,U)).idBlock.tagClass=1,e.idBlock.tagNumber=6,e}return s(r,null,[{key:"blockName",value:function(){return"ObjectIdentifier"}}]),r}(v);t.ObjectIdentifier=D;var T=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).isHexOnly=!0,e.value="",e}return s(r,[{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"Utf8StringValueBlock"}}]),r}(i(n)),H=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),e=t.call(this,n,T),"value"in n&&e.fromString(n.value),e.idBlock.tagClass=1,e.idBlock.tagNumber=12,e}return s(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e));try{this.valueBlock.value=decodeURIComponent(escape(this.valueBlock.value))}catch(e){this.warnings.push('Error during "decodeURIComponent": '.concat(e,", using raw string"))}}},{key:"fromString",value:function(e){var t=unescape(encodeURIComponent(e)),r=t.length;this.valueBlock.valueHex=new ArrayBuffer(r);for(var n=new Uint8Array(this.valueBlock.valueHex),a=0;a<r;a++)n[a]=t.charCodeAt(a);this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"Utf8String"}}]),r}(v);t.Utf8String=H;var V=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).valueDec=(0,Oe.getParametersValue)(n,"valueDec",-1),e}return s(r,[{key:"fromBER",value:function(e,t,r){if(0===r)return t;if(!1===(0,Oe.checkBufferParams)(this,e,t,r))return-1;var n=new Uint8Array(e,t,r);this.valueHex=new ArrayBuffer(r);for(var a=new Uint8Array(this.valueHex),i=0;i<r&&(a[i]=127&n[i],this.blockLength++,0!=(128&n[i]));i++);for(var s=new ArrayBuffer(this.blockLength),o=new Uint8Array(s),u=0;u<this.blockLength;u++)o[u]=a[u];return this.valueHex=s.slice(0),a=new Uint8Array(this.valueHex),0!=(128&n[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===a[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=(0,Oe.utilFromBase)(a,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}},{key:"toBER",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isHexOnly){if(!0===r)return new ArrayBuffer(this.valueHex.byteLength);var n=new Uint8Array(this.valueHex);e=new ArrayBuffer(this.blockLength),t=new Uint8Array(e);for(var a=0;a<this.blockLength-1;a++)t[a]=128|n[a];return t[this.blockLength-1]=n[this.blockLength-1],e}var i=(0,Oe.utilToBase)(this.valueDec,7);if(0===i.byteLength)return this.error="Error during encoding SID value",new ArrayBuffer(0);if(e=new ArrayBuffer(i.byteLength),!1===r){var s=new Uint8Array(i);t=new Uint8Array(e);for(var o=0;o<i.byteLength-1;o++)t[o]=128|s[o];t[i.byteLength-1]=s[i.byteLength-1]}return e}},{key:"toString",value:function(){return!0===this.isHexOnly?(0,Oe.bufferToHexCodes)(this.valueHex,0,this.valueHex.byteLength):this.valueDec.toString()}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.valueDec=this.valueDec,e}}],[{key:"blockName",value:function(){return"relativeSidBlock"}}]),r}(i(n)),_=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).fromString((0,Oe.getParametersValue)(n,"value","")),e}return s(r,[{key:"fromBER",value:function(e,t,r){for(var n=t;r>0;){var a=new V;if(-1===(n=a.fromBER(e,n,r)))return this.blockLength=0,this.error=a.error,n;this.blockLength+=a.blockLength,r-=a.blockLength,this.value.push(a)}return n}},{key:"toBER",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);if(0===n.byteLength)return this.error=this.value[r].error,new ArrayBuffer(0);t=(0,Oe.utilConcatBuf)(t,n)}return t}},{key:"fromString",value:function(e){this.value=[];var t=0,r=0,n="";do{n=-1===(r=e.indexOf(".",t))?e.substr(t):e.substr(t,r-t),t=r+1;var a=new V;if(a.valueDec=parseInt(n,10),isNaN(a.valueDec))return!0;this.value.push(a)}while(-1!==r);return!0}},{key:"toString",value:function(){for(var e="",t=!1,r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;var n=this.value[r].toString();0!==r&&(e="".concat(e,".")),e+=t?n="{".concat(n,"}"):n}return e}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}e.value=this.toString(),e.sidArray=[];for(var t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}],[{key:"blockName",value:function(){return"RelativeObjectIdentifierValueBlock"}}]),r}(h),j=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n,_)).idBlock.tagClass=1,e.idBlock.tagNumber=13,e}return s(r,null,[{key:"blockName",value:function(){return"RelativeObjectIdentifier"}}]),r}(v);t.RelativeObjectIdentifier=j;var M=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).isHexOnly=!0,e.value="",e}return s(r,[{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"BmpStringValueBlock"}}]),r}(i(n)),K=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),e=t.call(this,n,M),"value"in n&&e.fromString(n.value),e.idBlock.tagClass=1,e.idBlock.tagNumber=30,e}return s(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){for(var t=e.slice(0),r=new Uint8Array(t),n=0;n<r.length;n+=2){var a=r[n];r[n]=r[n+1],r[n+1]=a}this.valueBlock.value=String.fromCharCode.apply(null,new Uint16Array(t))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(2*t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++){var a=(0,Oe.utilToBase)(e.charCodeAt(n),8),i=new Uint8Array(a);if(!(i.length>2))for(var s=2-i.length,o=i.length-1;o>=0;o--)r[2*n+o+s]=i[o]}this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"BmpString"}}]),r}(v);t.BmpString=K;var F=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).isHexOnly=!0,e.value="",e}return s(r,[{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"UniversalStringValueBlock"}}]),r}(i(n)),X=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),e=t.call(this,n,F),"value"in n&&e.fromString(n.value),e.idBlock.tagClass=1,e.idBlock.tagNumber=28,e}return s(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){for(var t=e.slice(0),r=new Uint8Array(t),n=0;n<r.length;n+=4)r[n]=r[n+3],r[n+1]=r[n+2],r[n+2]=0,r[n+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(4*t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++){var a=(0,Oe.utilToBase)(e.charCodeAt(n),8),i=new Uint8Array(a);if(!(i.length>4))for(var s=4-i.length,o=i.length-1;o>=0;o--)r[4*n+o+s]=i[o]}this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"UniversalString"}}]),r}(v);t.UniversalString=X;var G=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).value="",e.isHexOnly=!0,e}return s(r,[{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.value=this.value,e}}],[{key:"blockName",value:function(){return"SimpleStringValueBlock"}}]),r}(i(n)),J=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),e=t.call(this,n,G),"value"in n&&e.fromString(n.value),e}return s(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e))}},{key:"fromString",value:function(e){var t=e.length;this.valueBlock.valueHex=new ArrayBuffer(t);for(var r=new Uint8Array(this.valueBlock.valueHex),n=0;n<t;n++)r[n]=e.charCodeAt(n);this.valueBlock.value=e}}],[{key:"blockName",value:function(){return"SIMPLESTRING"}}]),r}(v),q=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=18,e}return s(r,null,[{key:"blockName",value:function(){return"NumericString"}}]),r}(J);t.NumericString=q;var W=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=19,e}return s(r,null,[{key:"blockName",value:function(){return"PrintableString"}}]),r}(J);t.PrintableString=W;var Q=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=20,e}return s(r,null,[{key:"blockName",value:function(){return"TeletexString"}}]),r}(J);t.TeletexString=Q;var z=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=21,e}return s(r,null,[{key:"blockName",value:function(){return"VideotexString"}}]),r}(J);t.VideotexString=z;var Y=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=22,e}return s(r,null,[{key:"blockName",value:function(){return"IA5String"}}]),r}(J);t.IA5String=Y;var Z=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=25,e}return s(r,null,[{key:"blockName",value:function(){return"GraphicString"}}]),r}(J);t.GraphicString=Z;var $=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=26,e}return s(r,null,[{key:"blockName",value:function(){return"VisibleString"}}]),r}(J);t.VisibleString=$;var ee=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=27,e}return s(r,null,[{key:"blockName",value:function(){return"GeneralString"}}]),r}(J);t.GeneralString=ee;var te=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=29,e}return s(r,null,[{key:"blockName",value:function(){return"CharacterString"}}]),r}(J);t.CharacterString=te;var re=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(a(this,r),(e=t.call(this,n)).year=0,e.month=0,e.day=0,e.hour=0,e.minute=0,e.second=0,"value"in n){e.fromString(n.value),e.valueBlock.valueHex=new ArrayBuffer(n.value.length);for(var i=new Uint8Array(e.valueBlock.valueHex),s=0;s<n.value.length;s++)i[s]=n.value.charCodeAt(s)}return"valueDate"in n&&(e.fromDate(n.valueDate),e.valueBlock.valueHex=e.toBuffer()),e.idBlock.tagClass=1,e.idBlock.tagNumber=23,e}return s(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}},{key:"toBuffer",value:function(){for(var e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t}},{key:"fromDate",value:function(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}},{key:"toDate",value:function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}},{key:"fromString",value:function(e){var t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi.exec(e);if(null!==t){var r=parseInt(t[1],10);this.year=r>=50?1900+r:2e3+r,this.month=parseInt(t[2],10),this.day=parseInt(t[3],10),this.hour=parseInt(t[4],10),this.minute=parseInt(t[5],10),this.second=parseInt(t[6],10)}else this.error="Wrong input string for convertion"}},{key:"toString",value:function(){var e=new Array(7);return e[0]=(0,Oe.padNumber)(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=(0,Oe.padNumber)(this.month,2),e[2]=(0,Oe.padNumber)(this.day,2),e[3]=(0,Oe.padNumber)(this.hour,2),e[4]=(0,Oe.padNumber)(this.minute,2),e[5]=(0,Oe.padNumber)(this.second,2),e[6]="Z",e.join("")}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e}}],[{key:"blockName",value:function(){return"UTCTime"}}]),r}($);t.UTCTime=re;var ne=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(a(this,r),(e=t.call(this,n)).year=0,e.month=0,e.day=0,e.hour=0,e.minute=0,e.second=0,e.millisecond=0,"value"in n){e.fromString(n.value),e.valueBlock.valueHex=new ArrayBuffer(n.value.length);for(var i=new Uint8Array(e.valueBlock.valueHex),s=0;s<n.value.length;s++)i[s]=n.value.charCodeAt(s)}return"valueDate"in n&&(e.fromDate(n.valueDate),e.valueBlock.valueHex=e.toBuffer()),e.idBlock.tagClass=1,e.idBlock.tagNumber=24,e}return s(r,[{key:"fromBER",value:function(e,t,r){var n=this.valueBlock.fromBER(e,t,!0===this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),n)}},{key:"fromBuffer",value:function(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}},{key:"toBuffer",value:function(){for(var e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t}},{key:"fromDate",value:function(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}},{key:"toDate",value:function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}},{key:"fromString",value:function(e){var t,r=!1,n="",a="",i=0,s=0,o=0;if("Z"===e[e.length-1])n=e.substr(0,e.length-1),r=!0;else{var u=new Number(e[e.length-1]);if(isNaN(u.valueOf()))throw new Error("Wrong input string for convertion");n=e}if(r){if(-1!==n.indexOf("+"))throw new Error("Wrong input string for convertion");if(-1!==n.indexOf("-"))throw new Error("Wrong input string for convertion")}else{var l=1,c=n.indexOf("+"),h="";if(-1===c&&(c=n.indexOf("-"),l=-1),-1!==c){if(h=n.substr(c+1),n=n.substr(0,c),2!==h.length&&4!==h.length)throw new Error("Wrong input string for convertion");var f=new Number(h.substr(0,2));if(isNaN(f.valueOf()))throw new Error("Wrong input string for convertion");if(s=l*f,4===h.length){if(f=new Number(h.substr(2,2)),isNaN(f.valueOf()))throw new Error("Wrong input string for convertion");o=l*f}}}var m=n.indexOf(".");if(-1===m&&(m=n.indexOf(",")),-1!==m){var v=new Number("0".concat(n.substr(m)));if(isNaN(v.valueOf()))throw new Error("Wrong input string for convertion");i=v.valueOf(),a=n.substr(0,m)}else a=n;switch(!0){case 8===a.length:if(t=/(\d{4})(\d{2})(\d{2})/gi,-1!==m)throw new Error("Wrong input string for convertion");break;case 10===a.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,-1!==m){var g=60*i;this.minute=Math.floor(g),g=60*(g-this.minute),this.second=Math.floor(g),g=1e3*(g-this.second),this.millisecond=Math.floor(g)}break;case 12===a.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==m){var d=60*i;this.second=Math.floor(d),d=1e3*(d-this.second),this.millisecond=Math.floor(d)}break;case 14===a.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==m){var p=1e3*i;this.millisecond=Math.floor(p)}break;default:throw new Error("Wrong input string for convertion")}var y=t.exec(a);if(null===y)throw new Error("Wrong input string for convertion");for(var k=1;k<y.length;k++)switch(k){case 1:this.year=parseInt(y[k],10);break;case 2:this.month=parseInt(y[k],10);break;case 3:this.day=parseInt(y[k],10);break;case 4:this.hour=parseInt(y[k],10)+s;break;case 5:this.minute=parseInt(y[k],10)+o;break;case 6:this.second=parseInt(y[k],10);break;default:throw new Error("Wrong input string for convertion")}if(!1===r){var b=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=b.getUTCFullYear(),this.month=b.getUTCMonth(),this.day=b.getUTCDay(),this.hour=b.getUTCHours(),this.minute=b.getUTCMinutes(),this.second=b.getUTCSeconds(),this.millisecond=b.getUTCMilliseconds()}}},{key:"toString",value:function(){var e=[];return e.push((0,Oe.padNumber)(this.year,4)),e.push((0,Oe.padNumber)(this.month,2)),e.push((0,Oe.padNumber)(this.day,2)),e.push((0,Oe.padNumber)(this.hour,2)),e.push((0,Oe.padNumber)(this.minute,2)),e.push((0,Oe.padNumber)(this.second,2)),0!==this.millisecond&&(e.push("."),e.push((0,Oe.padNumber)(this.millisecond,3))),e.push("Z"),e.join("")}},{key:"toJSON",value:function(){var e={};try{e=m(u(r.prototype),"toJSON",this).call(this)}catch(e){}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e.millisecond=this.millisecond,e}}],[{key:"blockName",value:function(){return"GeneralizedTime"}}]),r}($);t.GeneralizedTime=ne;var ae=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=31,e}return s(r,null,[{key:"blockName",value:function(){return"DATE"}}]),r}(H);t.DATE=ae;var ie=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=32,e}return s(r,null,[{key:"blockName",value:function(){return"TimeOfDay"}}]),r}(H);t.TimeOfDay=ie;var se=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=33,e}return s(r,null,[{key:"blockName",value:function(){return"DateTime"}}]),r}(H);t.DateTime=se;var oe=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=34,e}return s(r,null,[{key:"blockName",value:function(){return"Duration"}}]),r}(H);t.Duration=oe;var ue=function(e){o(r,e);var t=f(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,r),(e=t.call(this,n)).idBlock.tagClass=1,e.idBlock.tagNumber=14,e}return s(r,null,[{key:"blockName",value:function(){return"TIME"}}]),r}(H);t.TIME=ue;var le=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.value=(0,Oe.getParametersValue)(t,"value",[]),this.optional=(0,Oe.getParametersValue)(t,"optional",!1)};t.Choice=le;var ce=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.name=(0,Oe.getParametersValue)(t,"name",""),this.optional=(0,Oe.getParametersValue)(t,"optional",!1)};t.Any=ce;var he=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.name=(0,Oe.getParametersValue)(t,"name",""),this.optional=(0,Oe.getParametersValue)(t,"optional",!1),this.value=(0,Oe.getParametersValue)(t,"value",new ce),this.local=(0,Oe.getParametersValue)(t,"local",!1)};t.Repeated=he;var fe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.data=(0,Oe.getParametersValue)(t,"data",new ArrayBuffer(0))}return s(e,[{key:"fromBER",value:function(e,t,r){return this.data=e.slice(t,r),t+r}},{key:"toBER",value:function(){return this.data}}]),e}();function me(e,t,r){var a=t;var i=new v({},Object),s=new n;if(!1===(0,Oe.checkBufferParams)(s,e,t,r))return i.error=s.error,{offset:-1,result:i};if(0===new Uint8Array(e,t,r).length)return this.error="Zero buffer length",{offset:-1,result:i};var o=i.idBlock.fromBER(e,t,r);if(i.warnings.concat(i.idBlock.warnings),-1===o)return i.error=i.idBlock.error,{offset:-1,result:i};if(t=o,r-=i.idBlock.blockLength,o=i.lenBlock.fromBER(e,t,r),i.warnings.concat(i.lenBlock.warnings),-1===o)return i.error=i.lenBlock.error,{offset:-1,result:i};if(t=o,r-=i.lenBlock.blockLength,!1===i.idBlock.isConstructed&&!0===i.lenBlock.isIndefiniteForm)return i.error="Indefinite length form used for primitive encoding form",{offset:-1,result:i};var u=v;switch(i.idBlock.tagClass){case 1:if(i.idBlock.tagNumber>=37&&!1===i.idBlock.isHexOnly)return i.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:i};switch(i.idBlock.tagNumber){case 0:if(!0===i.idBlock.isConstructed&&i.lenBlock.length>0)return i.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:i};u=b;break;case 1:u=S;break;case 2:u=R;break;case 3:u=E;break;case 4:u=x;break;case 5:u=B;break;case 6:u=D;break;case 10:u=L;break;case 12:u=H;break;case 13:u=j;break;case 14:u=ue;break;case 15:return i.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:i};case 16:u=N;break;case 17:u=A;break;case 18:u=q;break;case 19:u=W;break;case 20:u=Q;break;case 21:u=z;break;case 22:u=Y;break;case 23:u=re;break;case 24:u=ne;break;case 25:u=Z;break;case 26:u=$;break;case 27:u=ee;break;case 28:u=X;break;case 29:u=te;break;case 30:u=K;break;case 31:u=ae;break;case 32:u=ie;break;case 33:u=se;break;case 34:u=oe;break;default:var l;(l=!0===i.idBlock.isConstructed?new y:new d).idBlock=i.idBlock,l.lenBlock=i.lenBlock,l.warnings=i.warnings,o=(i=l).fromBER(e,t,r)}break;case 2:case 3:case 4:default:u=!0===i.idBlock.isConstructed?y:d}return o=(i=function(e,t){if(e instanceof t)return e;var r=new t;return r.idBlock=e.idBlock,r.lenBlock=e.lenBlock,r.warnings=e.warnings,r.valueBeforeDecode=e.valueBeforeDecode.slice(0),r}(i,u)).fromBER(e,t,!0===i.lenBlock.isIndefiniteForm?r:i.lenBlock.length),i.valueBeforeDecode=e.slice(a,a+i.blockLength),{offset:o,result:i}}function ve(e){if(0===e.byteLength){var t=new v({},Object);return t.error="Input buffer has zero length",{offset:-1,result:t}}return me(e,0,e.byteLength)}function ge(e,t,r){if(r instanceof le){for(var n=0;n<r.value.length;n++){if(!0===ge(e,t,r.value[n]).verified)return{verified:!0,result:e}}var a={verified:!1,result:{error:"Wrong values for Choice type"}};return r.hasOwnProperty("name")&&(a.name=r.name),a}if(r instanceof ce)return r.hasOwnProperty("name")&&(e[r.name]=t),{verified:!0,result:e};if(e instanceof Object==!1)return{verified:!1,result:{error:"Wrong root object"}};if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(r instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("idBlock"in r==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("fromBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("toBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var i=r.idBlock.toBER(!1);if(0===i.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(-1===r.idBlock.fromBER(i,0,i.byteLength))return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===r.idBlock.hasOwnProperty("tagClass"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagClass!==t.idBlock.tagClass)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("tagNumber"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagNumber!==t.idBlock.tagNumber)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("isConstructed"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isConstructed!==t.idBlock.isConstructed)return{verified:!1,result:e};if("isHexOnly"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly)return{verified:!1,result:e};if(!0===r.idBlock.isHexOnly){if("valueHex"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var s=new Uint8Array(r.idBlock.valueHex),o=new Uint8Array(t.idBlock.valueHex);if(s.length!==o.length)return{verified:!1,result:e};for(var u=0;u<s.length;u++)if(s[u]!==o[1])return{verified:!1,result:e}}if(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(e[r.name]=t)),!0===r.idBlock.isConstructed){var l=0,c={verified:!1},h=r.valueBlock.value.length;if(h>0&&r.valueBlock.value[0]instanceof he&&(h=t.valueBlock.value.length),0===h)return{verified:!0,result:e};if(0===t.valueBlock.value.length&&0!==r.valueBlock.value.length){for(var f=!0,m=0;m<r.valueBlock.value.length;m++)f=f&&(r.valueBlock.value[m].optional||!1);return!0===f?{verified:!0,result:e}:(r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),e.error="Inconsistent object length",{verified:!1,result:e})}for(var v=0;v<h;v++)if(v-l>=t.valueBlock.value.length){if(!1===r.valueBlock.value[v].optional){var g={verified:!1,result:e};return e.error="Inconsistent length between ASN.1 data and schema",r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],g.name=r.name)),g}}else if(r.valueBlock.value[0]instanceof he){if(!1===(c=ge(e,t.valueBlock.value[v],r.valueBlock.value[0].value)).verified){if(!0!==r.valueBlock.value[0].optional)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),c;l++}if("name"in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){var d={};void 0===(d="local"in r.valueBlock.value[0]&&!0===r.valueBlock.value[0].local?t:e)[r.valueBlock.value[0].name]&&(d[r.valueBlock.value[0].name]=[]),d[r.valueBlock.value[0].name].push(t.valueBlock.value[v])}}else if(!1===(c=ge(e,t.valueBlock.value[v-l],r.valueBlock.value[v])).verified){if(!0!==r.valueBlock.value[v].optional)return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&delete e[r.name]),c;l++}if(!1===c.verified){var p={verified:!1,result:e};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],p.name=r.name)),p}return{verified:!0,result:e}}if("primitiveSchema"in r&&"valueHex"in t.valueBlock){var y=ve(t.valueBlock.valueHex);if(-1===y.offset){var k={verified:!1,result:y.result};return r.hasOwnProperty("name")&&(r.name=r.name.replace(/^\s+|\s+$/g,""),""!==r.name&&(delete e[r.name],k.name=r.name)),k}return ge(e,y.result,r.primitiveSchema)}return{verified:!0,result:e}}t.RawData=fe}));de(pr);var yr=pr.fromBER,kr=(pr.compareSchema,pr.verifySchema,pr.fromJSON,pr.RawData,pr.Repeated,pr.Any,pr.Choice,pr.TIME,pr.Duration,pr.DateTime,pr.TimeOfDay,pr.DATE,pr.GeneralizedTime,pr.UTCTime,pr.CharacterString,pr.GeneralString,pr.VisibleString,pr.GraphicString,pr.IA5String,pr.VideotexString,pr.TeletexString,pr.PrintableString,pr.NumericString,pr.UniversalString,pr.BmpString,pr.RelativeObjectIdentifier,pr.Utf8String,pr.ObjectIdentifier,pr.Enumerated,pr.Integer,pr.BitString,pr.OctetString,pr.Null,pr.Set,pr.Sequence,pr.Boolean,pr.EndOfContent,pr.Constructed,pr.Primitive,pr.BaseBlock,pr.ValueBlock,pr.HexBlock,null),br=function(){function e(){a(this,e)}return s(e,null,[{key:"setEngine",value:function(e,t){kr={getRandomValues:t.getRandomValues.bind(t),subtle:t.subtle,name:e},xt(e,new Bt({name:e,crypto:t,subtle:t.subtle}),new Bt({name:e,crypto:t,subtle:t.subtle}))}},{key:"isNodePlugin",value:function(){return"undefined"==typeof self&&"undefined"==typeof window}},{key:"crypto",get:function(){if(!kr)throw new P(E.CRYPTOGRAPHIC_NO_MODULE);return kr}}]),e}();br.isNodePlugin()||br.setEngine("W3 WebCrypto module",self.crypto);var wr,Sr=function(){function e(){a(this,e)}return s(e,[{key:"getAlgorithmName",value:function(){return this.namespaceURI}}]),e}(),Nr=function(e){o(i,e);var t,r=f(i);function i(){return a(this,i),r.apply(this,arguments)}return s(i,[{key:"Digest",value:(t=n(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"string"==typeof t?r=O.FromString(t,"utf8"):ArrayBuffer.isView(t)?r=new Uint8Array(t.buffer):t instanceof ArrayBuffer?r=new Uint8Array(t):(n=(new XMLSerializer).serializeToString(t),r=O.FromString(n,"utf8")),e.next=3,br.crypto.subtle.digest(this.algorithm,r);case 3:return a=e.sent,e.abrupt("return",new Uint8Array(a));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),i}(Sr),Ar=function(e){o(u,e);var t,r,i=f(u);function u(){return a(this,u),i.apply(this,arguments)}return s(u,[{key:"Sign",value:(r=n(regeneratorRuntime.mark((function e(t,r,n){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=O.FromString(t,"utf8"),e.abrupt("return",br.crypto.subtle.sign(n,r,a));case 2:case"end":return e.stop()}}),e)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"Verify",value:(t=n(regeneratorRuntime.mark((function e(t,r,n,a){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=O.FromString(t,"utf8"),e.abrupt("return",br.crypto.subtle.verify(a||this.algorithm,r,n,i));case 2:case"end":return e.stop()}}),e,this)}))),function(e,r,n,a){return t.apply(this,arguments)})}]),u}(Sr),Br="SHA-1",Cr="SHA-256",xr="SHA-384",Ir="SHA-512",Er="http://www.w3.org/2000/09/xmldsig#sha1",Pr="http://www.w3.org/2001/04/xmlenc#sha256",Rr="http://www.w3.org/2001/04/xmldsig-more#sha384",Lr="http://www.w3.org/2001/04/xmlenc#sha512",Or=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).algorithm={name:Br},e.namespaceURI=Er,e}return r}(Nr),Ur=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).algorithm={name:Cr},e.namespaceURI=Pr,e}return r}(Nr),Dr=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).algorithm={name:xr},e.namespaceURI=Rr,e}return r}(Nr),Tr=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).algorithm={name:Ir},e.namespaceURI=Lr,e}return r}(Nr),Hr="ECDSA",Vr="http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha1",_r="http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha256",jr="http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha384",Mr="http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha512",Kr=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).algorithm={name:Hr,hash:{name:Br}},e.namespaceURI=Vr,e}return r}(Ar),Fr=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).algorithm={name:Hr,hash:{name:Cr}},e.namespaceURI=_r,e}return r}(Ar),Xr=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).algorithm={name:Hr,hash:{name:xr}},e.namespaceURI=jr,e}return r}(Ar),Gr=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).algorithm={name:Hr,hash:{name:Ir}},e.namespaceURI=Mr,e}return r}(Ar),Jr="HMAC",qr="http://www.w3.org/2000/09/xmldsig#hmac-sha1",Wr="http://www.w3.org/2001/04/xmldsig-more#hmac-sha256",Qr="http://www.w3.org/2001/04/xmldsig-more#hmac-sha384",zr="http://www.w3.org/2001/04/xmldsig-more#hmac-sha512",Yr=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).algorithm={name:Jr,hash:{name:Br}},e.namespaceURI=qr,e}return r}(Ar),Zr=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).algorithm={name:Jr,hash:{name:Cr}},e.namespaceURI=Wr,e}return r}(Ar),$r=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).algorithm={name:Jr,hash:{name:xr}},e.namespaceURI=Qr,e}return r}(Ar),en=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).algorithm={name:Jr,hash:{name:Ir}},e.namespaceURI=zr,e}return r}(Ar),tn="RSASSA-PKCS1-v1_5",rn=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).algorithm={name:tn,hash:{name:Br}},e.namespaceURI="http://www.w3.org/2000/09/xmldsig#rsa-sha1",e}return r}(Ar),nn=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).algorithm={name:tn,hash:{name:Cr}},e.namespaceURI="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256",e}return r}(Ar),an=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).algorithm={name:tn,hash:{name:xr}},e.namespaceURI="http://www.w3.org/2001/04/xmldsig-more#rsa-sha384",e}return r}(Ar),sn=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).algorithm={name:tn,hash:{name:Ir}},e.namespaceURI="http://www.w3.org/2001/04/xmldsig-more#rsa-sha512",e}return r}(Ar),on=function(e){o(r,e);var t=f(r);function r(e){var n;return a(this,r),(n=t.call(this)).algorithm={name:"RSA-PSS",hash:{name:Br}},n.namespaceURI="http://www.w3.org/2007/05/xmldsig-more#rsa-pss",e&&(n.algorithm.saltLength=e),n}return r}(Ar),un=function(e){o(r,e);var t=f(r);function r(e){var n;return a(this,r),(n=t.call(this,e)).algorithm.hash.name=Br,n}return r}(on),ln=function(e){o(r,e);var t=f(r);function r(e){var n;return a(this,r),(n=t.call(this,e)).algorithm.hash.name=Cr,n}return r}(on),cn=function(e){o(r,e);var t=f(r);function r(e){var n;return a(this,r),(n=t.call(this,e)).algorithm.hash.name=xr,n}return r}(on),hn=function(e){o(r,e);var t=f(r);function r(e){var n;return a(this,r),(n=t.call(this,e)).algorithm.hash.name=Ir,n}return r}(on),fn=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.call(this)).algorithm={name:"RSA-PSS",hash:{name:Br}},e.namespaceURI="http://www.w3.org/2007/05/xmldsig-more#sha1-rsa-MGF1",e}return r}(Ar),mn=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.call(this)).algorithm.hash.name=Br,e.algorithm.saltLength=20,e}return r}(fn),vn=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.call(this)).algorithm.hash.name=Cr,e.algorithm.saltLength=32,e}return r}(fn),gn=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.call(this)).algorithm.hash.name=xr,e.algorithm.saltLength=48,e}return r}(fn),dn=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.call(this)).algorithm.hash.name=Ir,e.algorithm.saltLength=64,e}return r}(fn);!function(e){e[e.BeforeDocElement=0]="BeforeDocElement",e[e.InsideDocElement=1]="InsideDocElement",e[e.AfterDocElement=2]="AfterDocElement"}(wr||(wr={}));var pn=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Q;a(this,e),this.propagatedNamespaces=new Q,this.result=[],this.visibleNamespaces=new Q,this.inclusiveNamespacesPrefixList=[],this.state=wr.BeforeDocElement,this.withComments=t,this.exclusive=r,this.propagatedNamespaces=n}return s(e,[{key:"Canonicalize",value:function(e){if(!e)throw new P(E.CRYPTOGRAPHIC,"Parameter 1 is not Node");return this.WriteNode(e),this.result.join("")}},{key:"WriteNode",value:function(e){switch(e.nodeType){case L.Document:case L.DocumentFragment:this.WriteDocumentNode(e);break;case L.Element:this.WriteElementNode(e);break;case L.CDATA:case L.SignificantWhitespace:case L.Text:X(e.parentNode)||this.WriteTextNode(e);break;case L.Whitespace:this.state===wr.InsideDocElement&&this.WriteTextNode(e);break;case L.Comment:this.WriteCommentNode(e);break;case L.ProcessingInstruction:this.WriteProcessingInstructionNode(e);break;case L.EntityReference:for(var t=0;t<e.childNodes.length;t++)this.WriteNode(e.childNodes[t]);break;case L.Attribute:case L.EndElement:case L.EndEntity:throw new P(E.CRYPTOGRAPHIC,"Attribute node is impossible here");case L.DocumentType:case L.Entity:case L.Notation:case L.XmlDeclaration:}}},{key:"WriteDocumentNode",value:function(e){this.state=wr.BeforeDocElement;for(var t=e.firstChild;null!=t;t=t.nextSibling)this.WriteNode(t)}},{key:"WriteCommentNode",value:function(e){this.withComments&&(this.state===wr.AfterDocElement?this.result.push(String.fromCharCode(10)+"\x3c!--"):this.result.push("\x3c!--"),this.result.push(this.NormalizeString(e.nodeValue,L.Comment)),this.state===wr.BeforeDocElement?this.result.push("--\x3e"+String.fromCharCode(10)):this.result.push("--\x3e"))}},{key:"WriteTextNode",value:function(e){this.result.push(this.NormalizeString(e.nodeValue,e.nodeType))}},{key:"WriteProcessingInstructionNode",value:function(e){var t=e.nodeName||e.tagName;"xml"!==t&&(this.state===wr.AfterDocElement?this.result.push("\n<?"):this.result.push("<?"),this.result.push(t),e.nodeValue&&(this.result.push(" "),this.result.push(this.NormalizeString(e.nodeValue,L.ProcessingInstruction))),this.state===wr.BeforeDocElement?this.result.push("?>\n"):this.result.push("?>"))}},{key:"WriteElementNode",value:function(e){var t=this.state;this.state===wr.BeforeDocElement&&(this.state=wr.InsideDocElement),this.result.push("<"),this.result.push(e.nodeName);var r=this.WriteNamespacesAxis(e);this.WriteAttributesAxis(e),this.result.push(">");for(var n=e.firstChild;null!=n;n=n.nextSibling)this.WriteNode(n);for(this.result.push("</"),this.result.push(e.nodeName),this.result.push(">"),t===wr.BeforeDocElement&&(this.state=wr.AfterDocElement);r--;)this.visibleNamespaces.Pop()}},{key:"WriteNamespacesAxis",value:function(e){for(var t=this,r=[],n=0,a=0;a<e.attributes.length;a++){var i=e.attributes[a];if(wn(i)){if("xmlns"===i.localName&&!i.prefix&&!i.nodeValue){var s={prefix:i.prefix,namespace:i.nodeValue};r.push(s),this.visibleNamespaces.Add(s),n++}var o,u=null;(o=/xmlns:([\w\.]+)/.exec(i.nodeName))&&(u=o[1]);var l=!0;if(this.exclusive&&!this.IsNamespaceInclusive(e,u)){var c=bn(e,u);if(c>1)l=!1;else if(0===c)continue}if(!this.IsNamespaceRendered(u,i.nodeValue)&&l){var h={prefix:u,namespace:i.nodeValue};r.push(h),this.visibleNamespaces.Add(h),n++}}else if(i.prefix&&!this.IsNamespaceRendered(i.prefix,i.namespaceURI)){var f={prefix:i.prefix,namespace:i.namespaceURI};r.push(f),this.visibleNamespaces.Add(f),n++}}if(!this.IsNamespaceRendered(e.prefix,e.namespaceURI)&&"http://www.w3.org/2000/xmlns/"!==e.namespaceURI){var m={prefix:e.prefix,namespace:e.namespaceURI};r.push(m),this.visibleNamespaces.Add(m),n++}r.sort(yn);var v=null;return r.forEach((function(e){e.prefix!==v&&(v=e.prefix,t.result.push(" xmlns"),e.prefix&&t.result.push(":"+e.prefix),t.result.push('="'),t.result.push(e.namespace),t.result.push('"'))})),n}},{key:"WriteAttributesAxis",value:function(e){for(var t=this,r=[],n=0;n<e.attributes.length;n++){var a=e.attributes[n];wn(a)||r.push(a)}r.sort(kn),r.forEach((function(e){null!=e&&(t.result.push(" "),t.result.push(e.nodeName),t.result.push('="'),t.result.push(t.NormalizeString(e.nodeValue,L.Attribute)),t.result.push('"'))}))}},{key:"NormalizeString",value:function(e,t){var r=[];if(e)for(var n=0;n<e.length;n++){var a=e[n];"<"!==a||t!==L.Attribute&&!this.IsTextNode(t)?">"===a&&this.IsTextNode(t)?r.push("&gt;"):"&"!==a||t!==L.Attribute&&!this.IsTextNode(t)?'"'===a&&t===L.Attribute?r.push("&quot;"):"\t"===a&&t===L.Attribute?r.push("&#x9;"):"\n"===a&&t===L.Attribute?r.push("&#xA;"):"\r"===a?r.push("&#xD;"):r.push(a):r.push("&amp;"):r.push("&lt;")}return r.join("")}},{key:"IsTextNode",value:function(e){switch(e){case L.Text:case L.CDATA:case L.SignificantWhitespace:case L.Whitespace:return!0}return!1}},{key:"IsNamespaceInclusive",value:function(e,t){var r=t||null;return e.prefix!==r&&-1!==this.inclusiveNamespacesPrefixList.indexOf(r||"")}},{key:"IsNamespaceRendered",value:function(e,t){if(t=t||"",!(e=e||"")&&!t)return!0;if("xml"===e&&"http://www.w3.org/XML/1998/namespace"===t)return!0;var r=this.visibleNamespaces.GetPrefix(e);return!!r&&r.namespace===t}},{key:"InclusiveNamespacesPrefixList",get:function(){return this.inclusiveNamespacesPrefixList.join(" ")},set:function(e){this.inclusiveNamespacesPrefixList=e.split(" ")}}]),e}();function yn(e,t){return e==t?0:e?t?e.prefix?t.prefix?e.prefix.localeCompare(t.prefix):1:-1:1:-1}function kn(e,t){if(!e.namespaceURI&&t.namespaceURI)return-1;if(!t.namespaceURI&&e.namespaceURI)return 1;var r=e.namespaceURI+e.localName,n=t.namespaceURI+t.localName;return r===n?0:r<n?-1:1}function bn(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t||null;if(e.prefix===n)return++r;if(e.attributes)for(var a=0;a<e.attributes.length;a++){var i=e.attributes[a];if(!wn(i)&&t&&e.attributes[a].prefix===t)return++r}for(var s=e.firstChild;s;s=s.nextSibling)if(s.nodeType===L.Element){var o=s,u=bn(o,t,r);if(s.nodeType===L.Element&&u)return++r+u}return r}function wn(e){return!(null===e||e.nodeType!==L.Attribute||"xmlns"!==e.nodeName&&!/xmlns:/.test(e.nodeName))}var Sn="http://www.w3.org/TR/2001/REC-xml-c14n-20010315",Nn="http://www.w3.org/2001/04/xmlenc#sha256",An="ds",Bn={CanonicalizationMethod:"CanonicalizationMethod",DigestMethod:"DigestMethod",DigestValue:"DigestValue",DSAKeyValue:"DSAKeyValue",DomainParameters:"DomainParameters",EncryptedKey:"EncryptedKey",HMACOutputLength:"HMACOutputLength",RSAPSSParams:"RSAPSSParams",MaskGenerationFunction:"MaskGenerationFunction",SaltLength:"SaltLength",KeyInfo:"KeyInfo",KeyName:"KeyName",KeyValue:"KeyValue",Modulus:"Modulus",Exponent:"Exponent",Manifest:"Manifest",Object:"Object",Reference:"Reference",RetrievalMethod:"RetrievalMethod",RSAKeyValue:"RSAKeyValue",ECDSAKeyValue:"ECDSAKeyValue",NamedCurve:"NamedCurve",PublicKey:"PublicKey",Signature:"Signature",SignatureMethod:"SignatureMethod",SignatureValue:"SignatureValue",SignedInfo:"SignedInfo",Transform:"Transform",Transforms:"Transforms",X509Data:"X509Data",PGPData:"PGPData",SPKIData:"SPKIData",SPKIexp:"SPKIexp",MgmtData:"MgmtData",X509IssuerSerial:"X509IssuerSerial",X509IssuerName:"X509IssuerName",X509SerialNumber:"X509SerialNumber",X509SKI:"X509SKI",X509SubjectName:"X509SubjectName",X509Certificate:"X509Certificate",X509CRL:"X509CRL",XPath:"XPath",X:"X",Y:"Y"},Cn={Algorithm:"Algorithm",Encoding:"Encoding",Id:"Id",MimeType:"MimeType",Type:"Type",URI:"URI"},xn={XmlDsigBase64Transform:"http://www.w3.org/2000/09/xmldsig#base64",XmlDsigC14NTransform:"http://www.w3.org/TR/2001/REC-xml-c14n-20010315",XmlDsigC14NWithCommentsTransform:"http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments",XmlDsigEnvelopedSignatureTransform:"http://www.w3.org/2000/09/xmldsig#enveloped-signature",XmlDsigXPathTransform:"http://www.w3.org/TR/1999/REC-xpath-19991116",XmlDsigXsltTransform:"http://www.w3.org/TR/1999/REC-xslt-19991116",XmlDsigExcC14NTransform:"http://www.w3.org/2001/10/xml-exc-c14n#",XmlDsigExcC14NWithCommentsTransform:"http://www.w3.org/2001/10/xml-exc-c14n#WithComments",XmlDecryptionTransform:"http://www.w3.org/2002/07/decrypt#XML",XmlLicenseTransform:"urn:mpeg:mpeg21:2003:01-REL-R-NS:licenseTransform"},In="http://www.w3.org/2000/09/xmldsig#",En=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(q);En=k([w({localName:"xmldsig",namespaceURI:In,prefix:An})],En);var Pn=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(W);Pn=k([w({localName:"xmldsig_collection",namespaceURI:In,prefix:An})],Pn);var Rn=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(En),Ln=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(En);k([N({localName:Cn.Algorithm,required:!0,defaultValue:Sn})],Ln.prototype,"Algorithm",void 0),Ln=k([w({localName:Bn.CanonicalizationMethod})],Ln);var On=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(En);k([N({localName:Cn.Id,defaultValue:""})],On.prototype,"Id",void 0),k([N({localName:Cn.MimeType,defaultValue:""})],On.prototype,"MimeType",void 0),k([N({localName:Cn.Encoding,defaultValue:""})],On.prototype,"Encoding",void 0),On=k([w({localName:Bn.Object})],On);var Un=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Pn);Un=k([w({localName:"xmldsig_objects",parser:On})],Un);var Dn=function(e){o(r,e);var t=f(r);function r(e){var n;return a(this,r),n=t.call(this),e&&(n.Algorithm=e),n}return r}(En);k([N({localName:Cn.Algorithm,required:!0,defaultValue:Nn})],Dn.prototype,"Algorithm",void 0),Dn=k([w({localName:Bn.DigestMethod})],Dn);var Tn=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"OnLoadXml",value:function(e){for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes.item(t);if(r.nodeType===L.Element){var n=null;switch(r.localName){case Bn.KeyValue:n=ha;break;case Bn.X509Data:n=da;break;case Bn.SPKIData:n=pa}if(n){var a=new n;a.LoadXml(r),this.Add(a)}}}}}]),r}(Pn);k([N({localName:Cn.Id,defaultValue:""})],Tn.prototype,"Id",void 0),Tn=k([w({localName:Bn.KeyInfo})],Tn);var Hn=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).innerXml=null,e}return s(r,[{key:"GetOutput",value:function(){throw new P(E.METHOD_NOT_IMPLEMENTED)}},{key:"LoadInnerXml",value:function(e){if(!e)throw new P(E.PARAM_REQUIRED,"node");this.innerXml=e}},{key:"GetInnerXml",value:function(){return this.innerXml}}]),r}(En);k([N({localName:Cn.Algorithm,defaultValue:""})],Hn.prototype,"Algorithm",void 0),k([S({localName:Bn.XPath,defaultValue:""})],Hn.prototype,"XPath",void 0);var Vn=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).Algorithm=xn.XmlDsigBase64Transform,e}return s(r,[{key:"GetOutput",value:function(){if(!this.innerXml)throw new P(E.PARAM_REQUIRED,"innerXml");return O.FromString(this.innerXml.textContent||"","base64")}}]),r}(Hn=k([w({localName:Bn.Transform})],Hn)),_n=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315",e.xmlCanonicalizer=new pn(!1,!1),e}return s(r,[{key:"GetOutput",value:function(){if(!this.innerXml)throw new P(E.PARAM_REQUIRED,"innerXml");return this.xmlCanonicalizer.Canonicalize(this.innerXml)}}]),r}(Hn),jn=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments",e.xmlCanonicalizer=new pn(!0,!1),e}return r}(_n),Mn=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature",e}return s(r,[{key:"GetOutput",value:function(){var e;if(!this.innerXml)throw new P(E.PARAM_REQUIRED,"innerXml");for(var t=this.innerXml.firstChild,r=[];t;)F(t)&&t.localName===Bn.Signature&&t.namespaceURI===In&&r.push(t),t=t.nextSibling;for(var n=0,a=r;n<a.length;n++){var i=a[n];null===(e=i.parentNode)||void 0===e||e.removeChild(i)}return this.innerXml}}]),r}(Hn),Kn=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#",e.xmlCanonicalizer=new pn(!1,!0),e}return s(r,[{key:"GetOutput",value:function(){if(!this.innerXml)throw new P(E.PARAM_REQUIRED,"innerXml");return this.xmlCanonicalizer.Canonicalize(this.innerXml)}},{key:"InclusiveNamespacesPrefixList",get:function(){return this.xmlCanonicalizer.InclusiveNamespacesPrefixList},set:function(e){this.xmlCanonicalizer.InclusiveNamespacesPrefixList=e}}]),r}(Hn),Fn=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#WithComments",e.xmlCanonicalizer=new pn(!0,!0),e}return r}(Kn),Xn=function(e){o(r,e);var t=f(r);function r(){var e;return a(this,r),(e=t.apply(this,arguments)).Algorithm=xn.XmlDsigXPathTransform,e}return s(r,[{key:"GetOutput",value:function(){if(!this.innerXml)throw new P(E.PARAM_REQUIRED,"innerXml");this.Filter(this.innerXml.ownerDocument||this.innerXml,this.XPath)}},{key:"Filter",value:function(e,t){for(var r=this,n=e.childNodes,a=[],i=0;n&&i<n.length;i++){var s=n.item(i);a.push(s)}a.forEach((function(e){r.Evaluate(e,t)?e.parentNode&&e.parentNode.removeChild(e):r.Filter(e,t)}))}},{key:"GetEvaluator",value:function(e){return"undefined"!=typeof self?null==e.ownerDocument?e:e.ownerDocument:require("xpath")}},{key:"Evaluate",value:function(e,t){try{var r=this.GetEvaluator(e),n=r.createNSResolver(this.GetXml().firstChild),a="boolean(".concat(t,")");return!r.evaluate(a,e,n,("undefined"==typeof self?require("xpath"):self).XPathResult.ANY_TYPE,null).booleanValue}catch(e){return!1}}}]),r}(Hn);k([S({localName:Bn.XPath,namespaceURI:In,prefix:An,required:!0})],Xn.prototype,"XPath",void 0);var Gn=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"OnLoadXml",value:function(e){m(u(r.prototype),"OnLoadXml",this).call(this,e),this.items=this.GetIterator().map((function(e){switch(e.Algorithm){case xn.XmlDsigEnvelopedSignatureTransform:return Jn(e,Mn);case xn.XmlDsigC14NTransform:return Jn(e,_n);case xn.XmlDsigC14NWithCommentsTransform:return Jn(e,jn);case xn.XmlDsigExcC14NTransform:return Jn(e,Kn);case xn.XmlDsigExcC14NWithCommentsTransform:return Jn(e,Fn);case xn.XmlDsigBase64Transform:return Jn(e,Vn);case xn.XmlDsigXPathTransform:return Jn(e,Xn);default:throw new P(E.CRYPTOGRAPHIC_UNKNOWN_TRANSFORM,e.Algorithm)}}))}}]),r}(Pn);function Jn(e,t){var r=new t;return r.LoadXml(e.Element),r}Gn=k([w({localName:Bn.Transforms,parser:Hn})],Gn);var qn=function(e){o(r,e);var t=f(r);function r(e){var n;return a(this,r),(n=t.call(this)).DigestMethod=new Dn,e&&(n.Uri=e),n}return r}(En);k([N({defaultValue:""})],qn.prototype,"Id",void 0),k([N({localName:Cn.URI})],qn.prototype,"Uri",void 0),k([N({localName:Cn.Type,defaultValue:""})],qn.prototype,"Type",void 0),k([S({parser:Gn})],qn.prototype,"Transforms",void 0),k([S({required:!0,parser:Dn})],qn.prototype,"DigestMethod",void 0),k([S({required:!0,localName:Bn.DigestValue,namespaceURI:In,prefix:An,converter:G})],qn.prototype,"DigestValue",void 0),qn=k([w({localName:Bn.Reference})],qn);var Wn=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Pn);Wn=k([w({localName:"References",parser:qn})],Wn);var Qn=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"OnLoadXml",value:function(e){for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes.item(t);if(r.nodeType===L.Element&&r.nodeName!==Bn.HMACOutputLength){var n=void 0;switch(r.localName){case Bn.RSAPSSParams:n=ca}if(n){var a=new n;a.LoadXml(r),this.Add(a)}}}}}]),r}(Pn);Qn=k([w({localName:"Other"})],Qn);var zn=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(En);k([N({localName:Cn.Algorithm,required:!0,defaultValue:""})],zn.prototype,"Algorithm",void 0),k([S({localName:Bn.HMACOutputLength,namespaceURI:In,prefix:An,converter:J})],zn.prototype,"HMACOutputLength",void 0),k([S({parser:Qn,noRoot:!0,minOccurs:0})],zn.prototype,"Any",void 0),zn=k([w({localName:Bn.SignatureMethod})],zn);var Yn=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(En);k([N({localName:Cn.Id,defaultValue:""})],Yn.prototype,"Id",void 0),k([S({parser:Ln,required:!0})],Yn.prototype,"CanonicalizationMethod",void 0),k([S({parser:zn,required:!0})],Yn.prototype,"SignatureMethod",void 0),k([S({parser:Wn,minOccurs:1,noRoot:!0})],Yn.prototype,"References",void 0),Yn=k([w({localName:Bn.SignedInfo})],Yn);var Zn=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(En);k([N({localName:Cn.Id,defaultValue:""})],Zn.prototype,"Id",void 0),k([S({parser:Yn,required:!0})],Zn.prototype,"SignedInfo",void 0),k([S({localName:Bn.SignatureValue,namespaceURI:In,prefix:An,required:!0,converter:G,defaultValue:null})],Zn.prototype,"SignatureValue",void 0),k([S({parser:Tn})],Zn.prototype,"KeyInfo",void 0),k([S({parser:Un,noRoot:!0})],Zn.prototype,"ObjectList",void 0),Zn=k([w({localName:Bn.Signature})],Zn);var $n="http://www.w3.org/2001/04/xmldsig-more#",ea=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(q);k([S({localName:Bn.X,namespaceURI:$n,prefix:"ecdsa",required:!0,converter:G})],ea.prototype,"X",void 0),k([S({localName:Bn.Y,namespaceURI:$n,prefix:"ecdsa",required:!0,converter:G})],ea.prototype,"Y",void 0),ea=k([w({localName:Bn.PublicKey,namespaceURI:$n,prefix:"ecdsa"})],ea);var ta=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(q);k([N({localName:Cn.URI,required:!0})],ta.prototype,"Uri",void 0),ta=k([w({localName:Bn.NamedCurve,namespaceURI:$n,prefix:"ecdsa"})],ta);var ra=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(q);k([S({parser:ta})],ra.prototype,"NamedCurve",void 0),ra=k([w({localName:Bn.DomainParameters,namespaceURI:$n,prefix:"ecdsa"})],ra);var na,aa=function(e){o(u,e);var t,r,i=f(u);function u(){var e;return a(this,u),(e=i.apply(this,arguments)).name=Bn.ECDSAKeyValue,e.key=null,e.jwk=null,e.keyUsage=null,e}return s(u,[{key:"importKey",value:(r=n(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ECDSA"===t.algorithm.name.toUpperCase()){e.next=2;break}throw new P(E.ALGORITHM_WRONG_NAME,t.algorithm.name);case 2:return e.next=4,br.crypto.subtle.exportKey("jwk",t);case 4:return r=e.sent,this.key=t,this.jwk=r,this.PublicKey=new ea,this.PublicKey.X=O.FromString(r.x,"base64url"),this.PublicKey.Y=O.FromString(r.y,"base64url"),this.DomainParameters||(this.DomainParameters=new ra),this.DomainParameters.NamedCurve||(this.DomainParameters.NamedCurve=new ta),this.DomainParameters.NamedCurve.Uri=ia(r.crv),this.keyUsage=t.usages,e.abrupt("return",this);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"exportKey",value:(t=n(regeneratorRuntime.mark((function e(t){var r,n,a,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.key){e.next=2;break}return e.abrupt("return",this.key);case 2:return r=O.ToBase64Url(this.PublicKey.X),n=O.ToBase64Url(this.PublicKey.Y),a=sa(this.DomainParameters.NamedCurve.Uri),i={kty:"EC",crv:a,x:r,y:n,ext:!0},this.keyUsage=["verify"],e.next=9,br.crypto.subtle.importKey("jwk",i,{name:"ECDSA",namedCurve:a},!0,this.keyUsage);case 9:return s=e.sent,this.key=s,e.abrupt("return",this.key);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"NamedCurve",get:function(){return ia(this.DomainParameters.NamedCurve.Uri)}}]),u}(Rn);function ia(e){switch(e){case"P-256":return"urn:oid:1.2.840.10045.3.1.7";case"P-384":return"urn:oid:1.3.132.0.34";case"P-521":return"urn:oid:1.3.132.0.35"}throw new P(E.CRYPTOGRAPHIC,"Unknown NamedCurve")}function sa(e){switch(e){case"urn:oid:1.2.840.10045.3.1.7":return"P-256";case"urn:oid:1.3.132.0.34":return"P-384";case"urn:oid:1.3.132.0.35":return"P-521"}throw new P(E.CRYPTOGRAPHIC,"Unknown NamedCurve OID")}k([S({parser:ra})],aa.prototype,"DomainParameters",void 0),k([S({parser:ea,required:!0})],aa.prototype,"PublicKey",void 0),aa=k([w({localName:Bn.ECDSAKeyValue,namespaceURI:$n,prefix:"ecdsa"})],aa);var oa=function(e){o(l,e);var t,r,i=f(l);function l(){var e;return a(this,l),(e=i.apply(this,arguments)).key=null,e.jwk=null,e.keyUsage=[],e}return s(l,[{key:"importKey",value:(r=n(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=t.algorithm.name.toUpperCase())===tn.toUpperCase()||r==="RSA-PSS".toUpperCase()){e.next=3;break}throw new P(E.ALGORITHM_WRONG_NAME,t.algorithm.name);case 3:return this.key=t,e.next=6,br.crypto.subtle.exportKey("jwk",t);case 6:return n=e.sent,this.jwk=n,this.Modulus=O.FromBase64Url(n.n),this.Exponent=O.FromBase64Url(n.e),this.keyUsage=t.usages,e.abrupt("return",this);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"exportKey",value:(t=n(regeneratorRuntime.mark((function e(t){var r,n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.key){e.next=2;break}return e.abrupt("return",this.key);case 2:if(this.Modulus){e.next=4;break}throw new P(E.CRYPTOGRAPHIC,"RsaKeyValue has no Modulus");case 4:if(r=O.ToBase64Url(this.Modulus),this.Exponent){e.next=7;break}throw new P(E.CRYPTOGRAPHIC,"RsaKeyValue has no Exponent");case 7:n=O.ToBase64Url(this.Exponent),e.t0=t.name.toUpperCase(),e.next=e.t0===tn.toUpperCase()?11:e.t0==="RSA-PSS".toUpperCase()?13:15;break;case 11:return a="R",e.abrupt("break",16);case 13:return a="P",e.abrupt("break",16);case 15:throw new P(E.ALGORITHM_NOT_SUPPORTED,t.name);case 16:e.t1=t.hash.name.toUpperCase(),e.next=e.t1===Br?19:e.t1===Cr?21:e.t1===xr?23:e.t1===Ir?25:27;break;case 19:return a+="S1",e.abrupt("break",27);case 21:return a+="S256",e.abrupt("break",27);case 23:return a+="S384",e.abrupt("break",27);case 25:return a+="S512",e.abrupt("break",27);case 27:return i={kty:"RSA",alg:a,n:r,e:n,ext:!0},e.abrupt("return",br.crypto.subtle.importKey("jwk",i,t,!0,this.keyUsage));case 29:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"LoadXml",value:function(e){m(u(l.prototype),"LoadXml",this).call(this,e),this.keyUsage=["verify"]}}]),l}(Rn);k([S({localName:Bn.Modulus,prefix:An,namespaceURI:In,required:!0,converter:G})],oa.prototype,"Modulus",void 0),k([S({localName:Bn.Exponent,prefix:An,namespaceURI:In,required:!0,converter:G})],oa.prototype,"Exponent",void 0),oa=k([w({localName:Bn.RSAKeyValue})],oa);var ua="http://www.w3.org/2007/05/xmldsig-more#",la=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(q);k([S({parser:Dn})],la.prototype,"DigestMethod",void 0),k([N({localName:Cn.Algorithm,defaultValue:"http://www.w3.org/2007/05/xmldsig-more#MGF1"})],la.prototype,"Algorithm",void 0),la=k([w({localName:Bn.MaskGenerationFunction,prefix:"pss",namespaceURI:ua})],la);var ca=na=function(e){o(r,e);var t=f(r);function r(e){var n;return a(this,r),n=t.call(this),e&&n.FromAlgorithm(e),n}return s(r,[{key:"FromAlgorithm",value:function(e){this.DigestMethod=new Dn;var t=ba.GetHashAlgorithm(e.hash);this.DigestMethod.Algorithm=t.namespaceURI,e.saltLength&&(this.SaltLength=e.saltLength)}}],[{key:"FromAlgorithm",value:function(e){return new na(e)}}]),r}(q);k([S({parser:Dn})],ca.prototype,"DigestMethod",void 0),k([S({parser:la})],ca.prototype,"MGF",void 0),k([S({converter:J,prefix:"pss",namespaceURI:ua})],ca.prototype,"SaltLength",void 0),k([S({converter:J})],ca.prototype,"TrailerField",void 0),ca=na=k([w({localName:Bn.RSAPSSParams,prefix:"pss",namespaceURI:ua})],ca);var ha=function(e){o(u,e);var t,r,i=f(u);function u(e){var t;return a(this,u),t=i.call(this),e&&(t.Value=e),t}return s(u,[{key:"importKey",value:(r=n(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.algorithm.name.toUpperCase(),e.next=e.t0==="RSA-PSS".toUpperCase()||e.t0===tn.toUpperCase()?3:e.t0===Hr.toUpperCase()?7:11;break;case 3:return this.Value=new oa,e.next=6,this.Value.importKey(t);case 6:return e.abrupt("break",12);case 7:return this.Value=new aa,e.next=10,this.Value.importKey(t);case 10:return e.abrupt("break",12);case 11:throw new P(E.ALGORITHM_NOT_SUPPORTED,t.algorithm.name);case 12:return e.abrupt("return",this);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"exportKey",value:(t=n(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.Value){e.next=2;break}throw new P(E.NULL_REFERENCE);case 2:return e.abrupt("return",this.Value.exportKey(t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"OnGetXml",value:function(e){if(!this.Value)throw new P(E.CRYPTOGRAPHIC,"KeyValue has empty value");var t=this.Value.GetXml();t&&e.appendChild(t)}},{key:"OnLoadXml",value:function(e){for(var t=0,r=[oa,aa];t<r.length;t++){var n=r[t];try{for(var a=new n,i=0;i<e.childNodes.length;i++){var s=e.childNodes.item(i);if(F(s))return a.LoadXml(s),void(this.value=a)}}catch(e){}}throw new P(E.CRYPTOGRAPHIC,"Unsupported KeyValue in use")}},{key:"Value",set:function(e){this.element=null,this.value=e},get:function(){return this.value}}]),u}(Rn);ha=k([w({localName:Bn.KeyValue})],ha);var fa,ma={"2.5.4.3":{short:"CN",long:"CommonName"},"2.5.4.6":{short:"C",long:"Country"},"2.5.4.5":{long:"DeviceSerialNumber"},"0.9.2342.19200300.100.1.25":{short:"DC",long:"DomainComponent"},"1.2.840.113549.1.9.1":{short:"E",long:"EMail"},"2.5.4.42":{short:"G",long:"GivenName"},"2.5.4.43":{short:"I",long:"Initials"},"2.5.4.7":{short:"L",long:"Locality"},"2.5.4.10":{short:"O",long:"Organization"},"2.5.4.11":{short:"OU",long:"OrganizationUnit"},"2.5.4.8":{short:"ST",long:"State"},"2.5.4.9":{short:"Street",long:"StreetAddress"},"2.5.4.4":{short:"SN",long:"SurName"},"2.5.4.12":{short:"T",long:"Title"},"1.2.840.113549.1.9.8":{long:"UnstructuredAddress"},"1.2.840.113549.1.9.2":{long:"UnstructuredName"}},va=function(){function e(t){if(a(this,e),this.publicKey=null,t){var r=new Uint8Array(t);this.LoadRaw(r),this.raw=r}}var t,r;return s(e,[{key:"Thumbprint",value:(r=n(regeneratorRuntime.mark((function e(){var t,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"SHA-1",e.abrupt("return",br.crypto.subtle.digest(t,this.raw));case 2:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"GetRaw",value:function(){return this.raw}},{key:"exportKey",value:(t=n(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r={algorithm:t,usages:["verify"]}).algorithm.name.toUpperCase()===Hr&&(r.algorithm.namedCurve=this.simpl.subjectPublicKeyInfo.toJSON().crv),this.isHashedAlgorithm(r.algorithm)&&"string"==typeof r.algorithm.hash&&(r.algorithm.hash={name:r.algorithm.hash}),e.next=5,this.simpl.getPublicKey({algorithm:r});case 5:return n=e.sent,this.publicKey=n,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"NameToString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",r=[];return e.typesAndValues.forEach((function(e){var t=e.type,n=ma[t.toString()],a=n?n.short:null;r.push("".concat(a||t,"=").concat(e.value.valueBlock.value))})),r.join(t+" ")}},{key:"LoadRaw",value:function(e){this.raw=new Uint8Array(e);var t=yr(this.raw.buffer);this.simpl=new dr({schema:t.result})}},{key:"isHashedAlgorithm",value:function(e){return!!e.hash}},{key:"SerialNumber",get:function(){return this.simpl.serialNumber.valueBlock.toString()}},{key:"Issuer",get:function(){return this.NameToString(this.simpl.issuer)}},{key:"Subject",get:function(){return this.NameToString(this.simpl.subject)}},{key:"PublicKey",get:function(){return this.publicKey}}]),e}(),ga=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(En);k([S({localName:Bn.X509IssuerName,namespaceURI:In,prefix:An,required:!0})],ga.prototype,"X509IssuerName",void 0),k([S({localName:Bn.X509SerialNumber,namespaceURI:In,prefix:An,required:!0})],ga.prototype,"X509SerialNumber",void 0),ga=k([w({localName:Bn.X509IssuerSerial})],ga),function(e){e[e.None=0]="None",e[e.EndCertOnly=1]="EndCertOnly",e[e.ExcludeRoot=2]="ExcludeRoot",e[e.WholeChain=3]="WholeChain"}(fa||(fa={}));var da=function(e){o(l,e);var t,r,i=f(l);function l(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fa.None;if(a(this,l),(t=i.call(this)).x509crl=null,t.SubjectKeyIdList=[],t.key=null,e)if(e instanceof Uint8Array)t.AddCertificate(new va(e));else if(e instanceof va)switch(r){case fa.None:case fa.EndCertOnly:t.AddCertificate(e);break;case fa.ExcludeRoot:t.AddCertificatesChainFrom(e,!1);break;case fa.WholeChain:t.AddCertificatesChainFrom(e,!0)}return t}return s(l,[{key:"importKey",value:(r=n(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new P(E.METHOD_NOT_SUPPORTED);case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"exportKey",value:(t=n(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.Certificates.length){e.next=2;break}throw new P(E.NULL_REFERENCE);case 2:return e.next=4,this.Certificates[0].exportKey(t);case 4:return r=e.sent,this.key=r,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"AddCertificate",value:function(e){if(!e)throw new P(E.PARAM_REQUIRED,"certificate");this.X509CertificateList||(this.X509CertificateList=[]),this.X509CertificateList.push(e)}},{key:"AddIssuerSerial",value:function(e,t){if(null==e)throw new P(E.PARAM_REQUIRED,"issuerName");null==this.IssuerSerialList&&(this.IssuerSerialList=[]);var r={issuerName:e,serialNumber:t};this.IssuerSerialList.push(r)}},{key:"AddSubjectKeyId",value:function(e){var t;(this.SubjectKeyIdList&&(this.SubjectKeyIdList=[]),"string"==typeof e)?null!=e&&(t=O.FromBase64(e),this.SubjectKeyIdList.push(t)):this.SubjectKeyIdList.push(e)}},{key:"AddSubjectName",value:function(e){null==this.SubjectNameList&&(this.SubjectNameList=[]),this.SubjectNameList.push(e)}},{key:"GetXml",value:function(){var e=this.CreateDocument(),t=this.CreateElement(e),r=this.GetPrefix();if(null!=this.IssuerSerialList&&this.IssuerSerialList.length>0&&this.IssuerSerialList.forEach((function(n){var a=e.createElementNS(In,r+Bn.X509IssuerSerial),i=e.createElementNS(In,r+Bn.X509IssuerName);i.textContent=n.issuerName,a.appendChild(i);var s=e.createElementNS(In,r+Bn.X509SerialNumber);s.textContent=n.serialNumber,a.appendChild(s),t.appendChild(a)})),null!=this.SubjectKeyIdList&&this.SubjectKeyIdList.length>0&&this.SubjectKeyIdList.forEach((function(n){var a=e.createElementNS(In,r+Bn.X509SKI);a.textContent=O.ToBase64(n),t.appendChild(a)})),null!=this.SubjectNameList&&this.SubjectNameList.length>0&&this.SubjectNameList.forEach((function(n){var a=e.createElementNS(In,r+Bn.X509SubjectName);a.textContent=n,t.appendChild(a)})),null!=this.X509CertificateList&&this.X509CertificateList.length>0&&this.X509CertificateList.forEach((function(n){var a=e.createElementNS(In,r+Bn.X509Certificate);a.textContent=O.ToBase64(n.GetRaw()),t.appendChild(a)})),null!=this.x509crl){var n=e.createElementNS(In,r+Bn.X509CRL);n.textContent=O.ToBase64(this.x509crl),t.appendChild(n)}return t}},{key:"LoadXml",value:function(e){var t=this;m(u(l.prototype),"LoadXml",this).call(this,e),this.IssuerSerialList&&(this.IssuerSerialList=[]),this.SubjectKeyIdList&&(this.SubjectKeyIdList=[]),this.SubjectNameList&&(this.SubjectNameList=[]),this.X509CertificateList&&(this.X509CertificateList=[]),this.x509crl=null;var r=this.GetChildren(Bn.X509IssuerSerial);r&&r.forEach((function(e){var r=En.GetChild(e,Bn.X509IssuerName,In,!0),n=En.GetChild(e,Bn.X509SerialNumber,In,!0);r&&r.textContent&&n&&n.textContent&&t.AddIssuerSerial(r.textContent,n.textContent)})),(r=this.GetChildren(Bn.X509SKI))&&r.forEach((function(e){if(e.textContent){var r=O.FromBase64(e.textContent);t.AddSubjectKeyId(r)}})),null!=(r=this.GetChildren(Bn.X509SubjectName))&&r.forEach((function(e){e.textContent&&t.AddSubjectName(e.textContent)})),(r=this.GetChildren(Bn.X509Certificate))&&r.forEach((function(e){if(e.textContent){var r=O.FromBase64(e.textContent);t.AddCertificate(new va(r))}}));var n=this.GetChild(Bn.X509CRL,!1);n&&n.textContent&&(this.x509crl=O.FromBase64(n.textContent))}},{key:"AddCertificatesChainFrom",value:function(e,t){throw new P(E.METHOD_NOT_IMPLEMENTED)}},{key:"Key",get:function(){return this.key}},{key:"Certificates",get:function(){return this.X509CertificateList}},{key:"CRL",get:function(){return this.x509crl},set:function(e){this.x509crl=e}},{key:"IssuerSerials",get:function(){return this.IssuerSerialList}},{key:"SubjectKeyIds",get:function(){return this.SubjectKeyIdList}},{key:"SubjectNames",get:function(){return this.SubjectNameList}}]),l}(Rn);da=k([w({localName:Bn.X509Data})],da);var pa=function(e){o(u,e);var t,r,i=f(u);function u(){return a(this,u),i.apply(this,arguments)}return s(u,[{key:"importKey",value:(r=n(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,br.crypto.subtle.exportKey("spki",t);case 2:return r=e.sent,this.SPKIexp=new Uint8Array(r),this.Key=t,e.abrupt("return",this);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"exportKey",value:(t=n(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,br.crypto.subtle.importKey("spki",this.SPKIexp,t,!0,["verify"]);case 2:return r=e.sent,this.Key=r,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),u}(Rn);k([S({localName:Bn.SPKIexp,namespaceURI:In,prefix:An,required:!0,converter:G})],pa.prototype,"SPKIexp",void 0),pa=k([w({localName:Bn.SPKIData})],pa);var ya={};ya["http://www.w3.org/2000/09/xmldsig#rsa-sha1"]=rn,ya["http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"]=nn,ya["http://www.w3.org/2001/04/xmldsig-more#rsa-sha384"]=an,ya["http://www.w3.org/2001/04/xmldsig-more#rsa-sha512"]=sn,ya[Vr]=Kr,ya[_r]=Fr,ya[jr]=Xr,ya[Mr]=Gr,ya[qr]=Yr,ya[Wr]=Zr,ya[Qr]=$r,ya[zr]=en,ya["http://www.w3.org/2007/05/xmldsig-more#sha1-rsa-MGF1"]=mn,ya["http://www.w3.org/2007/05/xmldsig-more#sha256-rsa-MGF1"]=vn,ya["http://www.w3.org/2007/05/xmldsig-more#sha384-rsa-MGF1"]=gn,ya["http://www.w3.org/2007/05/xmldsig-more#sha512-rsa-MGF1"]=dn;var ka={};ka[Er]=Or,ka[Pr]=Ur,ka[Rr]=Dr,ka[Lr]=Tr;var ba=function(){function e(){a(this,e)}return s(e,null,[{key:"CreateFromName",value:function(e){var t;switch(e){case xn.XmlDsigBase64Transform:t=new Vn;break;case xn.XmlDsigC14NTransform:t=new _n;break;case xn.XmlDsigC14NWithCommentsTransform:t=new jn;break;case xn.XmlDsigEnvelopedSignatureTransform:t=new Mn;break;case xn.XmlDsigXPathTransform:case xn.XmlDsigXsltTransform:throw new P(E.ALGORITHM_NOT_SUPPORTED,e);case xn.XmlDsigExcC14NTransform:t=new Kn;break;case xn.XmlDsigExcC14NWithCommentsTransform:t=new Fn;break;case xn.XmlDecryptionTransform:default:throw new P(E.ALGORITHM_NOT_SUPPORTED,e)}return t}},{key:"CreateSignatureAlgorithm",value:function(e){var t=ya[e.Algorithm]||null;if(t)return new t;if("http://www.w3.org/2007/05/xmldsig-more#rsa-pss"===e.Algorithm){var r;if(e.Any.Some((function(e){return e instanceof ca&&(r=e),!!r})),r)switch(r.DigestMethod.Algorithm){case Er:return new un(r.SaltLength);case Pr:return new ln(r.SaltLength);case Rr:return new cn(r.SaltLength);case Lr:return new hn(r.SaltLength)}throw new P(E.CRYPTOGRAPHIC,"Cannot get params for RSA-PSS algoriithm")}throw new Error("signature algorithm '".concat(e.Algorithm,"' is not supported"))}},{key:"CreateHashAlgorithm",value:function(e){var t=ka[e];if(t)return new t;throw new Error("hash algorithm '"+e+"' is not supported")}},{key:"GetHashAlgorithm",value:function(e){var t="string"==typeof e?{name:e}:e;switch(t.name.toUpperCase()){case Br:return new Or;case Cr:return new Ur;case xr:return new Dr;case Ir:return new Tr;default:throw new P(E.ALGORITHM_NOT_SUPPORTED,t.name)}}},{key:"GetSignatureAlgorithm",value:function(e){"string"==typeof e.hash&&(e.hash={name:e.hash});var t,r=e.hash.name;if(!r)throw new Error("Signing algorithm doesn't have name for hash");switch(e.name.toUpperCase()){case tn.toUpperCase():switch(r.toUpperCase()){case Br:t=new rn;break;case Cr:t=new nn;break;case xr:t=new an;break;case Ir:t=new sn;break;default:throw new P(E.ALGORITHM_NOT_SUPPORTED,"".concat(e.name,":").concat(r))}break;case"RSA-PSS".toUpperCase():var n=e.saltLength;switch(r.toUpperCase()){case Br:t=n?new un(n):new mn;break;case Cr:t=n?new ln(n):new vn;break;case xr:t=n?new cn(n):new gn;break;case Ir:t=n?new hn(n):new dn;break;default:throw new P(E.ALGORITHM_NOT_SUPPORTED,"".concat(e.name,":").concat(r))}e.saltLength=t.algorithm.saltLength;break;case Hr:switch(r.toUpperCase()){case Br:t=new Kr;break;case Cr:t=new Fr;break;case xr:t=new Xr;break;case Ir:t=new Gr;break;default:throw new P(E.ALGORITHM_NOT_SUPPORTED,"".concat(e.name,":").concat(r))}break;case Jr:switch(r.toUpperCase()){case Br:t=new Yr;break;case Cr:t=new Zr;break;case xr:t=new $r;break;case Ir:t=new en;break;default:throw new P(E.ALGORITHM_NOT_SUPPORTED,"".concat(e.name,":").concat(r))}break;default:throw new P(E.ALGORITHM_NOT_SUPPORTED,e.name)}return t}}]),e}(),wa=function(){function e(t){if(a(this,e),this.signature=new Zn,t&&t.nodeType===L.Document)this.document=t;else if(t&&t.nodeType===L.Element){var r=(new XMLSerializer).serializeToString(t);this.document=(new DOMParser).parseFromString(r,"application/xml")}}var t,r,i,o,u,l,c,h;return s(e,[{key:"Sign",value:(h=n(regeneratorRuntime.mark((function e(t,r,n,a){var i,s,o,u,l,c,h,f,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.cloneNode(!0),o=M({},t),r.algorithm.hash&&(o.hash=r.algorithm.hash),i=ba.GetSignatureAlgorithm(o),e.next=6,this.ApplySignOptions(this.XmlSignature,t,r,a);case 6:return s=this.XmlSignature.SignedInfo,e.next=9,this.DigestReferences(n.documentElement);case 9:if(s.SignatureMethod.Algorithm=i.namespaceURI,!(i instanceof on)){e.next=17;break}"string"==typeof(u=M({},r.algorithm,o)).hash&&(u.hash={name:u.hash}),l=new ca(u),this.XmlSignature.SignedInfo.SignatureMethod.Any.Add(l),e.next=32;break;case 17:if(Jr.toUpperCase()!==t.name.toUpperCase()){e.next=32;break}c=0,h=r.algorithm,e.t0=h.hash.name.toUpperCase(),e.next=e.t0===Br?23:e.t0===Cr?25:e.t0===xr?27:e.t0===Ir?29:31;break;case 23:return c=h.length||160,e.abrupt("break",31);case 25:return c=h.length||256,e.abrupt("break",31);case 27:return c=h.length||384,e.abrupt("break",31);case 29:return c=h.length||512,e.abrupt("break",31);case 31:this.XmlSignature.SignedInfo.SignatureMethod.HMACOutputLength=c;case 32:return f=this.TransformSignedInfo(n),e.next=35,i.Sign(f,r,o);case 35:return m=e.sent,this.Key=r,this.XmlSignature.SignatureValue=new Uint8Array(m),this.document=n,e.abrupt("return",this.XmlSignature);case 40:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return h.apply(this,arguments)})},{key:"Verify",value:(c=n(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=this.document)&&r.documentElement){e.next=3;break}throw new P(E.NULL_PARAM,"SignedXml","document");case 3:return e.next=5,this.ValidateReferences(r.documentElement);case 5:if(!e.sent){e.next=18;break}if(!t){e.next=11;break}e.t0=[t],e.next=14;break;case 11:return e.next=13,this.GetPublicKeys();case 13:e.t0=e.sent;case 14:return n=e.t0,e.abrupt("return",this.ValidateSignatureValue(n));case 18:return e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"GetXml",value:function(){return this.signature.GetXml()}},{key:"LoadXml",value:function(e){this.signature=Zn.LoadXml(e)}},{key:"toString",value:function(){var e=this.XmlSignature;if(e.SignedInfo.References&&e.SignedInfo.References.Some((function(e){return e.Transforms&&e.Transforms.Some((function(e){return e instanceof Mn}))}))){var t=this.document.documentElement.cloneNode(!0),r=this.XmlSignature.GetXml();if(!r)throw new P(E.XML_EXCEPTION,"Cannot get Xml element from Signature");var n=r.cloneNode(!0);return t.appendChild(n),(new XMLSerializer).serializeToString(t)}return this.XmlSignature.toString()}},{key:"GetPublicKeys",value:(l=n(regeneratorRuntime.mark((function e(){var t,r,n,a,i,s,o,u,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=y(this.XmlSignature.KeyInfo.GetIterator()),e.prev=2,r.s();case 4:if((n=r.n()).done){e.next=35;break}if(a=n.value,i=ba.CreateSignatureAlgorithm(this.XmlSignature.SignedInfo.SignatureMethod),!(a instanceof da)){e.next=29;break}s=y(a.Certificates),e.prev=9,s.s();case 11:if((o=s.n()).done){e.next=19;break}return u=o.value,e.next=15,u.exportKey(i.algorithm);case 15:l=e.sent,t.push(l);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),s.e(e.t0);case 24:return e.prev=24,s.f(),e.finish(24);case 27:e.next=33;break;case 29:return e.next=31,a.exportKey(i.algorithm);case 31:c=e.sent,t.push(c);case 33:e.next=4;break;case 35:e.next=40;break;case 37:e.prev=37,e.t1=e.catch(2),r.e(e.t1);case 40:return e.prev=40,r.f(),e.finish(40);case 43:return e.abrupt("return",t);case 44:case"end":return e.stop()}}),e,this,[[2,37,40,43],[9,21,24,27]])}))),function(){return l.apply(this,arguments)})},{key:"GetSignatureNamespaces",value:function(){var e={};return this.XmlSignature.NamespaceURI&&(e[this.XmlSignature.Prefix||""]=this.XmlSignature.NamespaceURI),e}},{key:"CopyNamespaces",value:function(e,t,r){var n;this.InjectNamespaces((function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t&&t.nodeType===L.Element){var n=t;n.namespaceURI&&"http://www.w3.org/XML/1998/namespace"!==n.namespaceURI&&Na(r,n.prefix?n.prefix:"",t.namespaceURI);for(var a=0;a<n.attributes.length;a++){var i=n.attributes.item(a);i&&"xmlns"===i.prefix&&Na(r,i.localName?i.localName:"",i.value)}t.parentNode&&e(t.parentNode,r)}}(e,n={}),n),t,r)}},{key:"InjectNamespaces",value:function(e,t,r){for(var n in e){var a=e[n];r&&""===n||t.setAttribute("xmlns"+(n?":"+n:""),a)}}},{key:"DigestReference",value:(u=n(regeneratorRuntime.mark((function e(t,r,n){var a,i,s,o,u,l,c,h,f,m,v,g,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.Uri){e.next=25;break}if(r.Uri.indexOf("#xpointer")?"#"===r.Uri[0]&&(a=r.Uri.substring(1)):(i=(i=(i=r.Uri).substring(9).replace(/[\r\n\t\s]/g,"")).length<2||"("!==i[0]||")"!==i[i.length-1]?"":i.substring(1,i.length-1)).length>6&&0===i.indexOf("id(")&&")"===i[i.length-1]&&(a=i.substring(4,i.length-2)),!a){e.next=25;break}s=null,o=[this.XmlSignature.KeyInfo.GetXml()],this.XmlSignature.ObjectList.ForEach((function(e){o.push(e.GetXml())})),u=0,l=o;case 7:if(!(u<l.length)){e.next=22;break}if(!(c=l[u])){e.next=19;break}if(!(s=Sa(c,a))){e.next=19;break}return h=s.cloneNode(!0),this.CopyNamespaces(t,h,!1),this.Parent&&(f=this.Parent instanceof q?this.Parent.GetXml():this.Parent,this.CopyNamespaces(f,h,!0)),this.CopyNamespaces(s,h,!1),this.InjectNamespaces(this.GetSignatureNamespaces(),h,!0),t=h,e.abrupt("break",22);case 19:u++,e.next=7;break;case 22:if(!s&&t&&(s=q.GetElementById(t,a))&&(m=s.cloneNode(!0),this.CopyNamespaces(s,m,!1),this.CopyNamespaces(t,m,!1),t=m),null!=s){e.next=25;break}throw new P(E.CRYPTOGRAPHIC,"Cannot get object by reference: ".concat(a));case 25:if(v=null,!r.Transforms||!r.Transforms.Count){e.next=30;break}v=this.ApplyTransforms(r.Transforms,t),e.next=39;break;case 30:if(!r.Uri||"#"===r.Uri[0]){e.next=36;break}if(t.ownerDocument){e.next=33;break}throw new Error("Cannot get ownerDocument from XML document");case 33:v=(new XMLSerializer).serializeToString(t.ownerDocument),e.next=39;break;case 36:(g=new _n).LoadInnerXml(t),v=g.GetOutput();case 39:if(r.DigestMethod.Algorithm){e.next=41;break}throw new P(E.NULL_PARAM,"Reference","DigestMethod");case 41:return d=ba.CreateHashAlgorithm(r.DigestMethod.Algorithm),e.abrupt("return",d.Digest(v));case 43:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return u.apply(this,arguments)})},{key:"DigestReferences",value:(o=n(regeneratorRuntime.mark((function e(t){var r,n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=y(this.XmlSignature.SignedInfo.References.GetIterator()),e.prev=1,r.s();case 3:if((n=r.n()).done){e.next=14;break}if(!(a=n.value).DigestValue){e.next=7;break}return e.abrupt("continue",12);case 7:return a.DigestMethod.Algorithm||(a.DigestMethod.Algorithm=(new Ur).namespaceURI),e.next=10,this.DigestReference(t,a,!1);case 10:i=e.sent,a.DigestValue=i;case 12:e.next=3;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[1,16,19,22]])}))),function(e){return o.apply(this,arguments)})},{key:"TransformSignedInfo",value:function(e){var t=ba.CreateFromName(this.XmlSignature.SignedInfo.CanonicalizationMethod.Algorithm),r=this.XmlSignature.SignedInfo.GetXml();if(!r)throw new P(E.XML_EXCEPTION,"Cannot get Xml element from SignedInfo");var n=r.cloneNode(!0);if(this.CopyNamespaces(r,n,!1),e&&(e.nodeType===L.Document?this.CopyNamespaces(e.documentElement,n,!1):this.CopyNamespaces(e,n,!1)),this.Parent){var a=this.Parent instanceof q?this.Parent.GetXml():this.Parent;a&&this.CopyNamespaces(a,n,!1)}var i=j(r);for(var s in i){var o=i[s];s!==n.prefix&&n.setAttribute("xmlns"+(s?":"+s:""),o)}return t.LoadInnerXml(n),t.GetOutput()}},{key:"ResolveTransform",value:function(e){switch(e){case"enveloped":return new Mn;case"c14n":return new _n;case"c14n-com":return new jn;case"exc-c14n":return new Kn;case"exc-c14n-com":return new Fn;case"base64":return new Vn;case"xpath":return new Xn;default:throw new P(E.CRYPTOGRAPHIC_UNKNOWN_TRANSFORM,e)}}},{key:"ApplyTransforms",value:function(e,t){var r=null;if(e.Sort((function(e,t){var r=[_n,jn,Kn,Fn];return r.some((function(t){return e instanceof t}))?1:r.some((function(e){return t instanceof e}))?-1:0})).ForEach((function(e){e.LoadInnerXml(t),e instanceof Xn?e.GetOutput():r=e.GetOutput()})),1===e.Count&&e.Item(0)instanceof Mn){var n=new _n;n.LoadInnerXml(t),r=n.GetOutput()}return r}},{key:"ApplySignOptions",value:(i=n(regeneratorRuntime.mark((function e(t,r,n){var a,i,s,o,u,l=this,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=c.length>3&&void 0!==c[3]?c[3]:{}).id&&(this.XmlSignature.Id=a.id),!a.keyValue||n.algorithm.name.toUpperCase()===Jr){e.next=9;break}return t.KeyInfo||(t.KeyInfo=new Tn),i=t.KeyInfo,s=new ha,i.Add(s),e.next=9,s.importKey(a.keyValue);case 9:a.x509&&(t.KeyInfo||(t.KeyInfo=new Tn),o=t.KeyInfo,a.x509.forEach((function(e){var t=O.FromBase64(e),r=new da(t);o.Add(r)}))),a.references&&a.references.forEach((function(e){var r=new qn;e.id&&(r.Id=e.id),null!==e.uri&&void 0!==e.uri&&(r.Uri=e.uri),e.type&&(r.Type=e.type);var n=ba.GetHashAlgorithm(e.hash);if(r.DigestMethod.Algorithm=n.namespaceURI,e.transforms&&e.transforms.length){var a=new Gn;e.transforms.forEach((function(e){a.Add(l.ResolveTransform(e))})),r.Transforms=a}t.SignedInfo.References||(t.SignedInfo.References=new Wn),t.SignedInfo.References.Add(r)})),t.SignedInfo.References.Count||(u=new qn,t.SignedInfo.References.Add(u));case 12:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return i.apply(this,arguments)})},{key:"ValidateReferences",value:(r=n(regeneratorRuntime.mark((function e(t){var r,n,a,i,s,o,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=y(this.XmlSignature.SignedInfo.References.GetIterator()),e.prev=1,r.s();case 3:if((n=r.n()).done){e.next=15;break}return a=n.value,e.next=7,this.DigestReference(t,a,!1);case 7:if(i=e.sent,s=O.ToBase64(i),o=O.ToString(a.DigestValue,"base64"),s===o){e.next=13;break}throw u="Invalid digest for uri '".concat(a.Uri,"'. Calculated digest is ").concat(s," but the xml to validate supplies digest ").concat(o),new P(E.CRYPTOGRAPHIC,u);case 13:e.next=3;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),r.e(e.t0);case 20:return e.prev=20,r.f(),e.finish(20);case 23:return e.abrupt("return",!0);case 24:case"end":return e.stop()}}),e,this,[[1,17,20,23]])}))),function(e){return r.apply(this,arguments)})},{key:"ValidateSignatureValue",value:(t=n(regeneratorRuntime.mark((function e(t){var r,n,a,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.TransformSignedInfo(this.document),r=ba.CreateSignatureAlgorithm(this.XmlSignature.SignedInfo.SignatureMethod),a=y(t),e.prev=3,a.s();case 5:if((i=a.n()).done){e.next=14;break}return s=i.value,e.next=9,r.Verify(n,s,this.Signature);case 9:if(!e.sent){e.next=12;break}return e.abrupt("return",!0);case 12:e.next=5;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),a.e(e.t0);case 19:return e.prev=19,a.f(),e.finish(19);case 22:return e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e,this,[[3,16,19,22]])}))),function(e){return t.apply(this,arguments)})},{key:"XmlSignature",get:function(){return this.signature}},{key:"Signature",get:function(){return this.XmlSignature.SignatureValue}}]),e}();function Sa(e,t){if(e.nodeType!==L.Element)return null;if(e.hasAttribute("Id")&&e.getAttribute("Id")===t)return e;if(e.childNodes&&e.childNodes.length)for(var r=0;r<e.childNodes.length;r++){var n=Sa(e.childNodes[r],t);if(n)return n}return null}function Na(e,t,r){t in e||(e[t]=r)}var Aa=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([S({parser:Dn,required:!0})],Aa.prototype,"DigestMethod",void 0),k([S({localName:Bn.DigestValue,namespaceURI:In,prefix:An,converter:G,required:!0})],Aa.prototype,"DigestValue",void 0),Aa=k([w({localName:z.ElementNames.DigestAlgAndValue})],Aa);var Ba=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(ga);Ba=k([w({localName:z.ElementNames.IssuerSerial,namespaceURI:z.NamespaceURI,prefix:z.DefaultPrefix})],Ba);var Ca=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([S({localName:z.ElementNames.CertDigest,parser:Aa,required:!0})],Ca.prototype,"CertDigest",void 0),k([S({parser:Ba,required:!0})],Ca.prototype,"IssuerSerial",void 0),k([N({localName:z.AttributeNames.URI})],Ca.prototype,"Uri",void 0),Ca=k([w({localName:z.ElementNames.Cert})],Ca);var xa=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z),Ia=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(xa=k([w({localName:"CertIDList",parser:Ca})],xa));Ia=k([w({localName:z.ElementNames.SigningCertificate})],Ia);var Ea=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([N({localName:z.AttributeNames.Id,defaultValue:""})],Ea.prototype,"Id",void 0),k([S({localName:z.ElementNames.CertRefs,parser:xa,required:!0})],Ea.prototype,"CertRefs",void 0),Ea=k([w({localName:z.ElementNames.CompleteCertificateRefs})],Ea);var Pa=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,Ra=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,La=/[^-+\dA-Z]/g;var Oa={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},Ua={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]};function Da(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;for(e=String(e);e.length<t;)e="0"+e;return e}function Ta(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var r=new Date(t.getFullYear(),0,4);r.setDate(r.getDate()-(r.getDay()+6)%7+3);var n=t.getTimezoneOffset()-r.getTimezoneOffset();t.setHours(t.getHours()-n);var a=(t.getTime()-r.getTime())/6048e5;return 1+Math.floor(a)}function Ha(e){var t=e.getDay();return 0===t&&(t=7),t}function Va(e){return null===e?"null":void 0===e?"undefined":"object"!==t(e)?t(e):Array.isArray(e)?"array":{}.toString.call(e).slice(8,-1).toLowerCase()}var _a=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"OnLoadXml",value:function(e){e.textContent&&(this.Value=new Date(e.textContent))}},{key:"OnGetXml",value:function(e){this.Format?e.textContent=function(e,t,r,n){if(1!==arguments.length||"string"!==Va(e)||/\d/.test(e)||(t=e,e=void 0),(e=e||new Date)instanceof Date||(e=new Date(e)),isNaN(e))throw TypeError("Invalid date");var a=(t=String(Oa[t]||t||Oa.default)).slice(0,4);"UTC:"!==a&&"GMT:"!==a||(t=t.slice(4),r=!0,"GMT:"===a&&(n=!0));var i=r?"getUTC":"get",s=e[i+"Date"](),o=e[i+"Day"](),u=e[i+"Month"](),l=e[i+"FullYear"](),c=e[i+"Hours"](),h=e[i+"Minutes"](),f=e[i+"Seconds"](),m=e[i+"Milliseconds"](),v=r?0:e.getTimezoneOffset(),g=Ta(e),d=Ha(e),p={d:s,dd:Da(s),ddd:Ua.dayNames[o],dddd:Ua.dayNames[o+7],m:u+1,mm:Da(u+1),mmm:Ua.monthNames[u],mmmm:Ua.monthNames[u+12],yy:String(l).slice(2),yyyy:l,h:c%12||12,hh:Da(c%12||12),H:c,HH:Da(c),M:h,MM:Da(h),s:f,ss:Da(f),l:Da(m,3),L:Da(Math.round(m/10)),t:c<12?Ua.timeNames[0]:Ua.timeNames[1],tt:c<12?Ua.timeNames[2]:Ua.timeNames[3],T:c<12?Ua.timeNames[4]:Ua.timeNames[5],TT:c<12?Ua.timeNames[6]:Ua.timeNames[7],Z:n?"GMT":r?"UTC":(String(e).match(Ra)||[""]).pop().replace(La,""),o:(v>0?"-":"+")+Da(100*Math.floor(Math.abs(v)/60)+Math.abs(v)%60,4),W:g,N:d};return t.replace(Pa,(function(e){return e in p?p[e]:e.slice(1,e.length-1)}))}(this.Value,this.Format):e.textContent=this.Value.toISOString()}}]),r}(Y);k([A({defaultValue:new Date,required:!0})],_a.prototype,"Value",void 0),_a=k([w({localName:"XadesDateTime",namespaceURI:z.NamespaceURI,prefix:z.DefaultPrefix})],_a);var ja=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}($);ja=k([w({localName:z.ElementNames.OtherRef})],ja);var Ma=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z);Ma=k([w({localName:z.ElementNames.OtherRefs})],Ma);var Ka=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([S({localName:z.ElementNames.ByName,namespaceURI:z.NamespaceURI,prefix:z.DefaultPrefix,required:!0})],Ka.prototype,"ByName",void 0),k([S({localName:z.ElementNames.ByKey,namespaceURI:z.NamespaceURI,prefix:z.DefaultPrefix,converter:G,required:!0})],Ka.prototype,"ByKey",void 0),Ka=k([w({localName:z.ElementNames.OCSPIdentifier})],Ka);var Fa=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([N({localName:z.AttributeNames.URI,defaultValue:""})],Fa.prototype,"URI",void 0),k([S({parser:Ka,required:!0})],Fa.prototype,"ResponderID",void 0),k([S({localName:z.ElementNames.IssueTime,parser:_a,required:!0})],Fa.prototype,"ProducedAt",void 0),Fa=k([w({localName:z.ElementNames.OCSPIdentifier})],Fa);var Xa=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([S({parser:Fa})],Xa.prototype,"OCSPIdentifier",void 0),k([S({parser:Aa,required:!0})],Xa.prototype,"DigestAlgAndValue",void 0),Xa=k([w({localName:z.ElementNames.OCSPRef})],Xa);var Ga=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z);Ga=k([w({localName:z.ElementNames.OCSPRefs})],Ga);var Ja=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([N({localName:z.AttributeNames.URI,defaultValue:""})],Ja.prototype,"URI",void 0),k([S({localName:z.ElementNames.Issuer,namespaceURI:z.NamespaceURI,prefix:z.DefaultPrefix,required:!0})],Ja.prototype,"Issuer",void 0),k([S({localName:z.ElementNames.IssueTime,parser:_a,required:!0})],Ja.prototype,"IssueTime",void 0),k([S({localName:z.ElementNames.Number,namespaceURI:z.NamespaceURI,prefix:z.DefaultPrefix,converter:J})],Ja.prototype,"Number",void 0),Ja=k([w({localName:z.ElementNames.CRLIdentifier})],Ja);var qa=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([S({parser:Aa,required:!0})],qa.prototype,"DigestAlgAndValue",void 0),k([S({parser:Ja})],qa.prototype,"CRLIdentifier",void 0),qa=k([w({localName:z.ElementNames.CRLRef})],qa);var Wa=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z);Wa=k([w({localName:z.ElementNames.CRLRefs})],Wa);var Qa=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([N({localName:z.AttributeNames.Id,defaultValue:""})],Qa.prototype,"Id",void 0),k([S({parser:Wa})],Qa.prototype,"CRLRefs",void 0),k([S({parser:Ga})],Qa.prototype,"OCSPRefs",void 0),k([S({parser:Ma})],Qa.prototype,"OtherRefs",void 0),Qa=k([w({localName:z.ElementNames.CompleteRevocationRefs})],Qa);var za=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([S({parser:Zn,required:!0})],za.prototype,"Signature",void 0),za=k([w({localName:z.ElementNames.CounterSignature})],za);var Ya=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([N({localName:z.AttributeNames.ObjectReference,required:!0})],Ya.prototype,"ObjectReference",void 0),k([S({localName:z.ElementNames.Description,namespaceURI:z.NamespaceURI,prefix:z.DefaultPrefix})],Ya.prototype,"Description",void 0),k([S({parser:ce})],Ya.prototype,"ObjectIdentifier",void 0),k([S({localName:z.ElementNames.MimeType,namespaceURI:z.NamespaceURI,prefix:z.DefaultPrefix})],Ya.prototype,"MimeType",void 0),k([S({localName:z.ElementNames.Encoding,namespaceURI:z.NamespaceURI,prefix:z.DefaultPrefix})],Ya.prototype,"Encoding",void 0),Ya=k([w({localName:z.ElementNames.DataObjectFormat})],Ya);var Za=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([N({localName:z.AttributeNames.URI,defaultValue:"",required:!0})],Za.prototype,"Uri",void 0),k([N({localName:z.AttributeNames.ReferencedData,defaultValue:!1})],Za.prototype,"ReferencedData",void 0),Za=k([w({localName:z.ElementNames.Include})],Za);var $a=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([N({localName:z.AttributeNames.URI,defaultValue:""})],$a.prototype,"Uri",void 0),k([N({localName:z.AttributeNames.Id,defaultValue:""})],$a.prototype,"Id",void 0),k([S({localName:Bn.DigestMethod,namespaceURI:In,prefix:An,required:!0})],$a.prototype,"DigestMethod",void 0),k([S({localName:Bn.DigestMethod,namespaceURI:In,prefix:An,converter:G,required:!0})],$a.prototype,"DigestValue",void 0),$a=k([w({localName:z.ElementNames.ReferenceInfo})],$a);var ei=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z);ei=k([w({localName:"ReferenceInfos",parser:$a})],ei);var ti=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(te);ti=k([w({localName:z.ElementNames.EncapsulatedTimeStamp})],ti);var ri=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z);ri=k([w({localName:"EncapsulatedPKIDatas",parser:ti})],ri);var ni=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}($);ni=k([w({localName:z.ElementNames.XMLTimeStamp})],ni);var ai=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z);ai=k([w({localName:"XMLTimeStampCollection",parser:ni})],ai);var ii=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([N({localName:z.AttributeNames.Id,defaultValue:""})],ii.prototype,"Id",void 0),k([S({parser:Za})],ii.prototype,"Include",void 0),k([S({parser:ei,noRoot:!0})],ii.prototype,"ReferenceInfo",void 0),k([S({parser:Ln})],ii.prototype,"CanonicalizationMethod",void 0),k([S({parser:ri,noRoot:!0})],ii.prototype,"EncapsulatedTimeStamp",void 0),k([S({parser:ai,noRoot:!0})],ii.prototype,"XMLTimeStamp",void 0),ii=k([w({localName:"GenericTimeStamp"})],ii);var si=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([N({localName:z.AttributeNames.Id,defaultValue:""})],si.prototype,"Id",void 0),k([S({parser:ei,noRoot:!0})],si.prototype,"ReferenceInfo",void 0),k([S({parser:Ln})],si.prototype,"CanonicalizationMethod",void 0),k([S({parser:ri,noRoot:!0})],si.prototype,"EncapsulatedTimeStamp",void 0),k([S({parser:ai,noRoot:!0})],si.prototype,"XMLTimeStamp",void 0),si=k([w({localName:z.ElementNames.OtherTimeStamp})],si);var oi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([N({localName:z.AttributeNames.Id,defaultValue:""})],oi.prototype,"Id",void 0),k([S({parser:Za})],oi.prototype,"Include",void 0),k([S({parser:Ln})],oi.prototype,"CanonicalizationMethod",void 0),k([S({parser:ri,noRoot:!0})],oi.prototype,"EncapsulatedTimeStamp",void 0),k([S({parser:ai,noRoot:!0})],oi.prototype,"XMLTimeStamp",void 0);var ui=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(oi=k([w({localName:z.ElementNames.XAdESTimeStamp})],oi));ui=k([w({localName:z.ElementNames.IndividualDataObjectsTimeStamp})],ui);var li=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z);li=k([w({localName:"IndividualDataObjectsTimeStampCollection",parser:ui})],li);var ci=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(oi);ci=k([w({localName:z.ElementNames.AllDataObjectsTimeStamp})],ci);var hi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z);hi=k([w({localName:"DataObjectFormatCollection",parser:Ya})],hi);var fi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z);fi=k([w({localName:"CommitmentTypeIndicationCollection",parser:ge})],fi);var mi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z);mi=k([w({localName:"AllDataObjectsTimeStampCollection",parser:ci})],mi);var vi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([N({localName:z.AttributeNames.Id,defaultValue:""})],vi.prototype,"Id",void 0),k([S({parser:hi,noRoot:!0})],vi.prototype,"DataObjectFormats",void 0),k([S({parser:fi,noRoot:!0})],vi.prototype,"CommitmentTypeIndications",void 0),k([S({parser:mi,noRoot:!0})],vi.prototype,"AllDataObjectsTimeStamps",void 0),k([S({parser:li,noRoot:!0})],vi.prototype,"IndividualDataObjectsTimeStamps",void 0),vi=k([w({localName:z.ElementNames.SignedDataObjectProperties})],vi);var gi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(ce);gi=k([w({localName:z.ElementNames.SigPolicyId})],gi);var di=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Aa);di=k([w({localName:z.ElementNames.SigPolicyHash})],di);var pi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(ee);pi=k([w({localName:z.ElementNames.SigPolicyQualifier})],pi);var yi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([A({converter:J,required:!0})],yi.prototype,"Value",void 0),yi=k([w({localName:"int"})],yi);var ki=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z);ki=k([w({localName:"IntegerList",parser:yi})],ki);var bi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([S({localName:z.ElementNames.Organization,namespaceURI:z.NamespaceURI,prefix:z.DefaultPrefix,required:!0})],bi.prototype,"Organization",void 0),k([S({localName:z.ElementNames.NoticeNumbers,parser:ki,required:!0})],bi.prototype,"NoticeNumbers",void 0),bi=k([w({localName:z.ElementNames.NoticeRef})],bi);var wi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([S({localName:z.ElementNames.NoticeRef,parser:bi})],wi.prototype,"NoticeRef",void 0),k([S({localName:z.ElementNames.ExplicitText,namespaceURI:z.NamespaceURI,prefix:z.DefaultPrefix})],wi.prototype,"ExplicitText",void 0),wi=k([w({localName:z.ElementNames.SPUserNotice})],wi);var Si=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([A()],Si.prototype,"Value",void 0),Si=k([w({localName:z.ElementNames.SPURI})],Si);var Ni=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z);Ni=k([w({localName:z.ElementNames.SigPolicyQualifiers,parser:pi})],Ni);var Ai=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([S({localName:z.ElementNames.SigPolicyId,parser:gi,required:!0})],Ai.prototype,"SigPolicyId",void 0),k([S({parser:Gn})],Ai.prototype,"Transforms",void 0),k([S({localName:z.ElementNames.SigPolicyHash,parser:di,required:!0})],Ai.prototype,"SigPolicyHash",void 0),k([S({localName:z.ElementNames.SigPolicyQualifiers,parser:Ni})],Ai.prototype,"SigPolicyQualifiers",void 0),Ai=k([w({localName:z.ElementNames.SignaturePolicyId})],Ai);var Bi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([S({localName:z.ElementNames.SignaturePolicyId,namespaceURI:z.NamespaceURI,prefix:z.DefaultPrefix,parser:Ai})],Bi.prototype,"SignaturePolicyId",void 0),k([S({localName:z.ElementNames.SignaturePolicyImplied,namespaceURI:z.NamespaceURI,prefix:z.DefaultPrefix,converter:{set:function(e){return!0},get:function(e){return""}},defaultValue:!1})],Bi.prototype,"SignaturePolicyImplied",void 0),Bi=k([w({localName:z.ElementNames.SignaturePolicyIdentifier})],Bi);var Ci=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([S({localName:z.ElementNames.City,defaultValue:"",namespaceURI:z.NamespaceURI,prefix:z.DefaultPrefix})],Ci.prototype,"City",void 0),k([S({localName:z.ElementNames.StateOrProvince,defaultValue:"",namespaceURI:z.NamespaceURI,prefix:z.DefaultPrefix})],Ci.prototype,"StateOrProvince",void 0),k([S({localName:z.ElementNames.PostalCode,defaultValue:"",namespaceURI:z.NamespaceURI,prefix:z.DefaultPrefix})],Ci.prototype,"PostalCode",void 0),k([S({localName:z.ElementNames.CountryName,defaultValue:"",namespaceURI:z.NamespaceURI,prefix:z.DefaultPrefix})],Ci.prototype,"CountryName",void 0),Ci=k([w({localName:z.ElementNames.SignatureProductionPlace})],Ci);var xi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}($);xi=k([w({localName:z.ElementNames.ClaimedRole})],xi);var Ii=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z);Ii=k([w({localName:z.ElementNames.ClaimedRoles,parser:xi})],Ii);var Ei=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(te);Ei=k([w({localName:z.ElementNames.CertifiedRole})],Ei);var Pi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z);Pi=k([w({localName:z.ElementNames.CertifiedRoles,parser:Ei})],Pi);var Ri=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([S({parser:Ii})],Ri.prototype,"ClaimedRoles",void 0),k([S({parser:Pi})],Ri.prototype,"CertifiedRoles",void 0),Ri=k([w({localName:z.ElementNames.SignerRole})],Ri);var Li=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([N({localName:z.AttributeNames.Id,defaultValue:""})],Li.prototype,"Id",void 0),k([S({localName:z.ElementNames.SigningTime,parser:_a})],Li.prototype,"SigningTime",void 0),k([S({parser:Ia})],Li.prototype,"SigningCertificate",void 0),k([S({parser:Bi})],Li.prototype,"SignaturePolicyIdentifier",void 0),k([S({parser:Ci})],Li.prototype,"SignatureProductionPlace",void 0),k([S({parser:Ri})],Li.prototype,"SignerRole",void 0),Li=k([w({localName:z.ElementNames.SignedSignatureProperties})],Li);var Oi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([N({localName:z.AttributeNames.Id,defaultValue:""})],Oi.prototype,"Id",void 0),k([S({parser:Li})],Oi.prototype,"SignedSignatureProperties",void 0),k([S({parser:vi})],Oi.prototype,"SignedDataObjectProperties",void 0),Oi=k([w({localName:z.ElementNames.SignedProperties})],Oi);var Ui=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}($);Ui=k([w({localName:z.ElementNames.UnsignedDataObjectProperty})],Ui);var Di=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z);k([N({localName:z.AttributeNames.Id,defaultValue:""})],Di.prototype,"Id",void 0),Di=k([w({localName:z.ElementNames.UnsignedSignatureProperties,parser:Ui})],Di);var Ti=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(te);Ti=k([w({localName:z.ElementNames.OtherValue})],Ti);var Hi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z);Hi=k([w({localName:z.ElementNames.OCSPValues,parser:Ti})],Hi);var Vi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(te);Vi=k([w({localName:z.ElementNames.EncapsulatedOCSPValue})],Vi);var _i=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z);_i=k([w({localName:z.ElementNames.OCSPValues})],_i);var ji=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(te);ji=k([w({localName:z.ElementNames.EncapsulatedCRLValue})],ji);var Mi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Z);Mi=k([w({localName:z.ElementNames.CRLValues,parser:ji})],Mi);var Ki=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([N({localName:z.AttributeNames.Id,defaultValue:""})],Ki.prototype,"Id",void 0),k([S({parser:Mi})],Ki.prototype,"CRLValues",void 0),k([S({parser:_i})],Ki.prototype,"OCSPValues",void 0),k([S({parser:Hi})],Ki.prototype,"OtherValues",void 0),Ki=k([w({localName:z.ElementNames.RevocationValues})],Ki);var Fi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(oi);Fi=k([w({localName:z.ElementNames.SignatureTimeStamp})],Fi);var Xi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(oi);Xi=k([w({localName:z.ElementNames.SigAndRefsTimeStamp})],Xi);var Gi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(oi);Gi=k([w({localName:z.ElementNames.RefsOnlyTimeStamp})],Gi);var Ji=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(oi);Ji=k([w({localName:z.ElementNames.ArchiveTimeStamp})],Ji);var qi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Ea);qi=k([w({localName:z.ElementNames.AttributeCertificateRefs})],qi);var Wi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Qa);Wi=k([w({localName:z.ElementNames.AttributeRevocationRefs})],Wi);var Qi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(se);Qi=k([w({localName:z.ElementNames.AttrAuthoritiesCertValues})],Qi);var zi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Ki);zi=k([w({localName:z.ElementNames.AttributeRevocationValues})],zi);var Yi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);Yi=k([w({localName:"UnsignedSignatureProperty"})],Yi);var Zi=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"OnLoadXml",value:function(e){for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes.item(t);if(r.nodeType===L.Element){var n=void 0;switch(r.localName){case z.ElementNames.CounterSignature:n=za;break;case z.ElementNames.SignatureTimeStamp:n=Fi;break;case z.ElementNames.CompleteCertificateRefs:n=Ea;break;case z.ElementNames.CompleteRevocationRefs:n=Qa;break;case z.ElementNames.AttributeCertificateRefs:n=qi;break;case z.ElementNames.AttributeRevocationRefs:n=Wi;break;case z.ElementNames.SigAndRefsTimeStamp:n=Xi;break;case z.ElementNames.RefsOnlyTimeStamp:n=Gi;break;case z.ElementNames.CertificateValues:n=se;break;case z.ElementNames.RevocationValues:n=Ki;break;case z.ElementNames.AttrAuthoritiesCertValues:n=Qi;break;case z.ElementNames.AttributeRevocationValues:n=zi;break;case z.ElementNames.ArchiveTimeStamp:n=Ji}if(n){var a=n.LoadXml(r);this.Add(a)}}}}}]),r}(Z);k([N({localName:z.AttributeNames.Id,defaultValue:""})],Zi.prototype,"Id",void 0),Zi=k([w({localName:z.ElementNames.UnsignedSignatureProperties,parser:Yi})],Zi);var $i=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([N({localName:z.AttributeNames.Id,defaultValue:""})],$i.prototype,"Id",void 0),k([S({parser:Zi})],$i.prototype,"UnsignedSignatureProperties",void 0),k([S({parser:Di})],$i.prototype,"UnsignedDataObjectProperties",void 0),$i=k([w({localName:z.ElementNames.UnsignedProperties})],$i);var es=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([N({localName:z.AttributeNames.Target,required:!0})],es.prototype,"Target",void 0),k([N({localName:z.AttributeNames.Id,defaultValue:""})],es.prototype,"Id",void 0),k([S({parser:Oi})],es.prototype,"SignedProperties",void 0),k([S({parser:$i})],es.prototype,"UnsignedProperties",void 0),es=k([w({localName:z.ElementNames.QualifyingProperties})],es);var ts=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(Y);k([N({localName:z.AttributeNames.URI,required:!0})],ts.prototype,"Uri",void 0),k([N({localName:z.AttributeNames.Id,defaultValue:""})],ts.prototype,"Id",void 0),ts=k([w({localName:z.ElementNames.QualifyingPropertiesReference})],ts);var rs=function(e){o(r,e);var t=f(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(On);k([S({parser:es})],rs.prototype,"QualifyingProperties",void 0),rs=k([w({localName:Bn.Object})],rs);var ns=Object.freeze({__proto__:null,get Any(){return $},get AnyCollection(){return ee},get OtherCertificate(){return re},get OtherCertificateCollection(){return ne},get EncapsulatedX509Certificate(){return ae},get EncapsulatedX509CertificateCollection(){return ie},get CertificateValues(){return se},get CommitmentTypeQualifier(){return he},get CommitmentTypeQualifiers(){return fe},get ObjectReference(){return me},get ObjectReferenceCollection(){return ve},get CommitmentTypeIndication(){return ge},get CompleteCertificateRefs(){return Ea},get OtherRef(){return ja},get OtherRefs(){return Ma},get ResponderID(){return Ka},get OCSPIdentifier(){return Fa},get OCSPRef(){return Xa},get OCSPRefs(){return Ga},get CRLIdentifier(){return Ja},get CRLRef(){return qa},get CRLRefs(){return Wa},get CompleteRevocationRefs(){return Qa},get CounterSignature(){return za},get DataObjectFormat(){return Ya},get XadesDateTime(){return _a},get EncapsulatedPKIData(){return te},get Include(){return Za},get ReferenceInfo(){return $a},get ReferenceInfos(){return ei},get EncapsulatedTimeStamp(){return ti},get EncapsulatedTimeStampCollection(){return ri},get XMLTimeStamp(){return ni},get XMLTimeStampCollection(){return ai},get GenericTimeStamp(){return ii},get Identifier(){return oe},get DocumentationReference(){return ue},get DocumentationReferences(){return le},get ObjectIdentifier(){return ce},get OtherTimeStamp(){return si},get QualifyingProperties(){return es},get QualifyingPropertiesReference(){return ts},get OtherValue(){return Ti},get OtherValues(){return Hi},get EncapsulatedOCSPValue(){return Vi},get OCSPValues(){return _i},get EncapsulatedCRLValue(){return ji},get CRLValues(){return Mi},get RevocationValues(){return Ki},get SigPolicyId(){return gi},get SigPolicyHash(){return di},get SigPolicyQualifier(){return pi},get Integer(){return yi},get IntegerList(){return ki},get NoticeReference(){return bi},get SPUserNotice(){return wi},get SPURI(){return Si},get SigPolicyQualifiers(){return Ni},get SignaturePolicyId(){return Ai},get SignaturePolicyIdentifier(){return Bi},get SignatureProductionPlace(){return Ci},get IndividualDataObjectsTimeStamp(){return ui},get IndividualDataObjectsTimeStampCollection(){return li},get AllDataObjectsTimeStamp(){return ci},get DataObjectFormatCollection(){return hi},get CommitmentTypeIndicationCollection(){return fi},get AllDataObjectsTimeStampCollection(){return mi},get SignedDataObjectProperties(){return vi},get SignedProperties(){return Oi},get SignedSignatureProperties(){return Li},get ClaimedRole(){return xi},get ClaimedRoles(){return Ii},get CertifiedRole(){return Ei},get CertifiedRoles(){return Pi},get SignerRole(){return Ri},get DigestAlgAndValueType(){return Aa},get IssuerSerial(){return Ba},get Cert(){return Ca},get CertIDList(){return xa},get SigningCertificate(){return Ia},get UnsignedDataObjectProperty(){return Ui},get UnsignedDataObjectProperties(){return Di},get UnsignedProperties(){return $i},get SignatureTimeStamp(){return Fi},get SigAndRefsTimeStamp(){return Xi},get RefsOnlyTimeStamp(){return Gi},get ArchiveTimeStamp(){return Ji},get AttributeCertificateRefs(){return qi},get AttributeRevocationRefs(){return Wi},get AttrAuthoritiesCertValues(){return Qi},get AttributeRevocationValues(){return zi},get UnsignedSignatureProperty(){return Yi},get UnsignedSignatureProperties(){return Zi},get XAdESTimeStamp(){return oi},get DataObject(){return rs},XmlXades:z}),as=function(e){o(g,e);var r,i,l,c,h,v=f(g);function g(e){var t;return a(this,g),(t=v.call(this,e)).properties=null,t.CreateQualifyingProperties(),t}return s(g,[{key:"LoadXml",value:function(e,t){m(u(g.prototype),"LoadXml",this).call(this,e);var r=null;this.XmlSignature.ObjectList.Some((function(e){if(e.Element)for(var t=0;t<e.Element.childNodes.length;t++){var n=e.Element.childNodes.item(t);if(n.nodeType===L.Element&&n.localName===z.ElementNames.QualifyingProperties)return r=es.LoadXml(n),!0}return!1})),this.properties=r}},{key:"Sign",value:(h=n(regeneratorRuntime.mark((function e(t,r,n,a){var i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m(u(g.prototype),"Sign",this).apply(this,i));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return h.apply(this,arguments)})},{key:"CreateQualifyingProperties",value:function(){if(this.Properties)throw new P(E.XML_EXCEPTION,"Cannot create QualifyingProperties cause current signature has got one. You must create CounterSignature");var e=br.crypto.getRandomValues(new Uint8Array(6)),t=O.ToHex(e);this.XmlSignature.Id="id-".concat(t);var r=new rs;r.QualifyingProperties.Target="#".concat(this.XmlSignature.Id),r.QualifyingProperties.SignedProperties.Id="xades-".concat(this.XmlSignature.Id),this.properties=r.QualifyingProperties,this.XmlSignature.ObjectList.Add(r)}},{key:"ApplySignOptions",value:(c=n(regeneratorRuntime.mark((function e(t,r,n,a){var i,s,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(u(g.prototype),"ApplySignOptions",this).call(this,t,r,n,a);case 2:if(!this.Properties){e.next=19;break}return(i=this.Properties.SignedProperties.SignedSignatureProperties).SigningTime.Value=new Date,a.signingTime&&(a.signingTime.value&&(i.SigningTime.Value=a.signingTime.value),a.signingTime.format&&(i.SigningTime.Format=a.signingTime.format)),s=M({},r,n.algorithm),o=s.hash,(l=new qn).Type="http://uri.etsi.org/01903#SignedProperties",l.Uri="#".concat(this.Properties.SignedProperties.Id),l.DigestMethod.Algorithm=ba.GetHashAlgorithm(o).namespaceURI,t.SignedInfo.References.Add(l),e.next=15,this.ApplySigningCertificate(a.signingCertificate);case 15:return e.next=17,this.ApplySignaturePolicyIdentifier(a.policy);case 17:this.ApplySignatureProductionPlace(a.productionPlace),this.ApplySignerRoles(a.signerRole);case 19:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return c.apply(this,arguments)})},{key:"ApplySigningCertificate",value:(l=n(regeneratorRuntime.mark((function e(t){var r,n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Properties||!t){e.next=17;break}if(r=O.FromBase64(t),n=new va(r),!this.Properties.SignedProperties.SignedSignatureProperties.SigningCertificate.Count){e.next=6;break}throw new P(E.XML_EXCEPTION,"Signature can contain only one SigningCertificate");case 6:return(a=new Ca).IssuerSerial.X509IssuerName=n.Issuer,a.IssuerSerial.X509SerialNumber=n.SerialNumber,i=ba.GetHashAlgorithm("SHA-256"),a.CertDigest.DigestMethod.Algorithm=i.namespaceURI,e.t0=Uint8Array,e.next=14,n.Thumbprint(i.algorithm.name);case 14:e.t1=e.sent,a.CertDigest.DigestValue=new e.t0(e.t1),this.Properties.SignedProperties.SignedSignatureProperties.SigningCertificate.Add(a);case 17:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"ApplySignaturePolicyIdentifier",value:(i=n(regeneratorRuntime.mark((function e(r){var n,a,i,s,o,u,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Properties){e.next=29;break}if(n=this.Properties.SignedProperties.SignedSignatureProperties,!r||"object"!==t(r)){e.next=28;break}return(a=new Ai).SigPolicyId=new gi,a.SigPolicyId.Identifier=new oe,a.SigPolicyId.Identifier.Qualifier=r.identifier.qualifier,a.SigPolicyId.Identifier.Value=r.identifier.value,r.identifier.description&&(a.SigPolicyId.Description=r.identifier.description),r.identifier.references&&(a.SigPolicyId.DocumentationReferences=new le,r.identifier.references.forEach((function(e){var t=new ue;t.Uri=e,a.SigPolicyId.DocumentationReferences.Add(t)}))),r.transforms&&r.transforms.length&&(a.Transforms=new Gn,r.transforms.forEach((function(e){a.Transforms.Add(l.ResolveTransform(e))}))),a.SigPolicyHash=new di,a.SigPolicyHash.DigestMethod=new Dn,i=ba.GetHashAlgorithm(r.hash),a.SigPolicyHash.DigestMethod.Algorithm=i.namespaceURI,s=a.SigPolicyId.Identifier.GetXml().cloneNode(!0),this.CopyNamespaces(s,s,!0),this.InjectNamespaces(this.GetSignatureNamespaces(),s,!0),o=null,a.Transforms&&a.Transforms.Count?o=this.ApplyTransforms(a.Transforms,s):((u=new _n).LoadInnerXml(s),o=u.GetOutput()),e.next=22,i.Digest(o);case 22:a.SigPolicyHash.DigestValue=e.sent,r.qualifiers&&(a.SigPolicyQualifiers=new Ni,r.qualifiers.forEach((function(e){var t=new pi;if("string"==typeof e){var r=new Si;r.Value=e,t.Add(r)}else{var n=new wi;e.explicitText&&(n.ExplicitText=e.explicitText),e.noticeRef&&(n.NoticeRef=new bi,n.NoticeRef.Organization=e.noticeRef.organization,n.NoticeRef.NoticeNumbers=new ki,e.noticeRef.noticeNumbers&&e.noticeRef.noticeNumbers.forEach((function(e){var t=new yi;t.Value=e,n.NoticeRef.NoticeNumbers.Add(t)}))),t.Add(n)}a.SigPolicyQualifiers.Add(t)}))),n.SignaturePolicyIdentifier.SignaturePolicyId=a,n.SignaturePolicyIdentifier.SignaturePolicyImplied=!1,e.next=29;break;case 28:r&&(n.SignaturePolicyIdentifier.SignaturePolicyImplied=!0);case 29:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"ApplySignatureProductionPlace",value:function(e){if(this.Properties&&e){var t=this.Properties.SignedProperties.SignedSignatureProperties;e.city&&(t.SignatureProductionPlace.City=e.city),e.code&&(t.SignatureProductionPlace.PostalCode=e.code),e.country&&(t.SignatureProductionPlace.CountryName=e.country),e.state&&(t.SignatureProductionPlace.StateOrProvince=e.state)}}},{key:"ApplySignerRoles",value:function(e){if(this.Properties&&e){var t=this.Properties.SignedProperties.SignedSignatureProperties;e.claimed&&e.claimed.forEach((function(e){var r=new xi;r.Value=e,t.SignerRole.ClaimedRoles.Add(r)})),e.certified&&e.certified.forEach((function(e){var r=new Ei;r.Encoding="der",r.Value=O.FromBase64(e),t.SignerRole.CertifiedRoles.Add(r)}))}}},{key:"VerifySigningCertificate",value:(r=n(regeneratorRuntime.mark((function e(){var t,r,n,a,i,s,o,u,l,c,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,!this.XmlSignature||!this.Properties){e.next=34;break}if(1===(r=this.Properties.SignedProperties.SignedSignatureProperties).SigningCertificate.Count){e.next=5;break}throw new P(E.XML_EXCEPTION,"Signature has got wrong amount of SigningCertificate, MUST be one");case 5:n=ba.GetHashAlgorithm("SHA-256"),a=r.SigningCertificate.Item(0),i=O.ToBase64(a.CertDigest.DigestValue),s=this.XmlSignature.KeyInfo,o=0;case 10:if(s.Count,t){e.next=32;break}if(!((u=s.Item(o))instanceof da)){e.next=29;break}l=u.Certificates,c=0;case 15:if(l.length,t){e.next=29;break}if(h=l[c]){e.next=19;break}return e.abrupt("continue",26);case 19:return e.t0=Uint8Array,e.next=22,h.Thumbprint(n.algorithm);case 22:e.t1=e.sent,f=new e.t0(e.t1),O.ToBase64(f)===i&&(t=h);case 26:c++,e.next=15;break;case 29:o++,e.next=10;break;case 32:if(t&&t.Issuer===a.IssuerSerial.X509IssuerName&&t.SerialNumber===a.IssuerSerial.X509SerialNumber){e.next=34;break}throw new P(E.XML_EXCEPTION,"SigningCertificate not found");case 34:return e.abrupt("return",t);case 35:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"Properties",get:function(){return this.properties}},{key:"SignedProperties",get:function(){if(!this.Properties)throw new P(E.XML_EXCEPTION,"Properties is empty");return this.Properties.SignedProperties}},{key:"UnsignedProperties",get:function(){if(!this.Properties)throw new P(E.XML_EXCEPTION,"Properties is empty");return this.Properties.UnsignedProperties}}]),g}(wa),is=ns;return e.Application=br,e.Convert=O,e.Parse=V,e.Select=H,e.SignedXml=as,e.xml=is,e}({});
  return {WebcryptoSocket,self,pvtsutils,XAdES};
}